var eW=Object.defineProperty,tW=Object.defineProperties;var rW=Object.getOwnPropertyDescriptors;var pT=Object.getOwnPropertySymbols;var nW=Object.prototype.hasOwnProperty,aW=Object.prototype.propertyIsEnumerable;var fT=(e,t,r)=>t in e?eW(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,qn=(e,t)=>{for(var r in t||(t={}))nW.call(t,r)&&fT(e,r,t[r]);if(pT)for(var r of pT(t))aW.call(t,r)&&fT(e,r,t[r]);return e},Mo=(e,t)=>tW(e,rW(t));const iW=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&a(s)}).observe(document,{childList:!0,subtree:!0});function r(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerpolicy&&(i.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?i.credentials="include":n.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(n){if(n.ep)return;n.ep=!0;const i=r(n);fetch(n.href,i)}};iW();var _e={exports:{}},It={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var hT=Object.getOwnPropertySymbols,sW=Object.prototype.hasOwnProperty,oW=Object.prototype.propertyIsEnumerable;function lW(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function uW(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;var a=Object.getOwnPropertyNames(t).map(function(i){return t[i]});if(a.join("")!=="0123456789")return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(i){n[i]=i}),Object.keys(Object.assign({},n)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var o_=uW()?Object.assign:function(e,t){for(var r,a=lW(e),n,i=1;i<arguments.length;i++){r=Object(arguments[i]);for(var s in r)sW.call(r,s)&&(a[s]=r[s]);if(hT){n=hT(r);for(var o=0;o<n.length;o++)oW.call(r,n[o])&&(a[n[o]]=r[n[o]])}}return a};/** @license React v17.0.2
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jk=o_,Yc=60103,l_=60106;It.Fragment=60107;It.StrictMode=60108;It.Profiler=60114;var u_=60109,c_=60110,d_=60112;It.Suspense=60113;var p_=60115,f_=60116;if(typeof Symbol=="function"&&Symbol.for){var Xa=Symbol.for;Yc=Xa("react.element"),l_=Xa("react.portal"),It.Fragment=Xa("react.fragment"),It.StrictMode=Xa("react.strict_mode"),It.Profiler=Xa("react.profiler"),u_=Xa("react.provider"),c_=Xa("react.context"),d_=Xa("react.forward_ref"),It.Suspense=Xa("react.suspense"),p_=Xa("react.memo"),f_=Xa("react.lazy")}var mT=typeof Symbol=="function"&&Symbol.iterator;function cW(e){return e===null||typeof e!="object"?null:(e=mT&&e[mT]||e["@@iterator"],typeof e=="function"?e:null)}function wh(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var h_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m_={};function Kc(e,t,r){this.props=e,this.context=t,this.refs=m_,this.updater=r||h_}Kc.prototype.isReactComponent={};Kc.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error(wh(85));this.updater.enqueueSetState(this,e,t,"setState")};Kc.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function g_(){}g_.prototype=Kc.prototype;function eE(e,t,r){this.props=e,this.context=t,this.refs=m_,this.updater=r||h_}var tE=eE.prototype=new g_;tE.constructor=eE;Jk(tE,Kc.prototype);tE.isPureReactComponent=!0;var rE={current:null},v_=Object.prototype.hasOwnProperty,b_={key:!0,ref:!0,__self:!0,__source:!0};function y_(e,t,r){var a,n={},i=null,s=null;if(t!=null)for(a in t.ref!==void 0&&(s=t.ref),t.key!==void 0&&(i=""+t.key),t)v_.call(t,a)&&!b_.hasOwnProperty(a)&&(n[a]=t[a]);var o=arguments.length-2;if(o===1)n.children=r;else if(1<o){for(var l=Array(o),u=0;u<o;u++)l[u]=arguments[u+2];n.children=l}if(e&&e.defaultProps)for(a in o=e.defaultProps,o)n[a]===void 0&&(n[a]=o[a]);return{$$typeof:Yc,type:e,key:i,ref:s,props:n,_owner:rE.current}}function dW(e,t){return{$$typeof:Yc,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function nE(e){return typeof e=="object"&&e!==null&&e.$$typeof===Yc}function pW(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var gT=/\/+/g;function W0(e,t){return typeof e=="object"&&e!==null&&e.key!=null?pW(""+e.key):t.toString(36)}function Fg(e,t,r,a,n){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(i){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case Yc:case l_:s=!0}}if(s)return s=e,n=n(s),e=a===""?"."+W0(s,0):a,Array.isArray(n)?(r="",e!=null&&(r=e.replace(gT,"$&/")+"/"),Fg(n,t,r,"",function(u){return u})):n!=null&&(nE(n)&&(n=dW(n,r+(!n.key||s&&s.key===n.key?"":(""+n.key).replace(gT,"$&/")+"/")+e)),t.push(n)),1;if(s=0,a=a===""?".":a+":",Array.isArray(e))for(var o=0;o<e.length;o++){i=e[o];var l=a+W0(i,o);s+=Fg(i,t,r,l,n)}else if(l=cW(e),typeof l=="function")for(e=l.call(e),o=0;!(i=e.next()).done;)i=i.value,l=a+W0(i,o++),s+=Fg(i,t,r,l,n);else if(i==="object")throw t=""+e,Error(wh(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t));return s}function Um(e,t,r){if(e==null)return e;var a=[],n=0;return Fg(e,a,"","",function(i){return t.call(r,i,n++)}),a}function fW(e){if(e._status===-1){var t=e._result;t=t(),e._status=0,e._result=t,t.then(function(r){e._status===0&&(r=r.default,e._status=1,e._result=r)},function(r){e._status===0&&(e._status=2,e._result=r)})}if(e._status===1)return e._result;throw e._result}var w_={current:null};function us(){var e=w_.current;if(e===null)throw Error(wh(321));return e}var hW={ReactCurrentDispatcher:w_,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:rE,IsSomeRendererActing:{current:!1},assign:Jk};It.Children={map:Um,forEach:function(e,t,r){Um(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Um(e,function(){t++}),t},toArray:function(e){return Um(e,function(t){return t})||[]},only:function(e){if(!nE(e))throw Error(wh(143));return e}};It.Component=Kc;It.PureComponent=eE;It.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hW;It.cloneElement=function(e,t,r){if(e==null)throw Error(wh(267,e));var a=Jk({},e.props),n=e.key,i=e.ref,s=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,s=rE.current),t.key!==void 0&&(n=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(l in t)v_.call(t,l)&&!b_.hasOwnProperty(l)&&(a[l]=t[l]===void 0&&o!==void 0?o[l]:t[l])}var l=arguments.length-2;if(l===1)a.children=r;else if(1<l){o=Array(l);for(var u=0;u<l;u++)o[u]=arguments[u+2];a.children=o}return{$$typeof:Yc,type:e.type,key:n,ref:i,props:a,_owner:s}};It.createContext=function(e,t){return t===void 0&&(t=null),e={$$typeof:c_,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider={$$typeof:u_,_context:e},e.Consumer=e};It.createElement=y_;It.createFactory=function(e){var t=y_.bind(null,e);return t.type=e,t};It.createRef=function(){return{current:null}};It.forwardRef=function(e){return{$$typeof:d_,render:e}};It.isValidElement=nE;It.lazy=function(e){return{$$typeof:f_,_payload:{_status:-1,_result:e},_init:fW}};It.memo=function(e,t){return{$$typeof:p_,type:e,compare:t===void 0?null:t}};It.useCallback=function(e,t){return us().useCallback(e,t)};It.useContext=function(e,t){return us().useContext(e,t)};It.useDebugValue=function(){};It.useEffect=function(e,t){return us().useEffect(e,t)};It.useImperativeHandle=function(e,t,r){return us().useImperativeHandle(e,t,r)};It.useLayoutEffect=function(e,t){return us().useLayoutEffect(e,t)};It.useMemo=function(e,t){return us().useMemo(e,t)};It.useReducer=function(e,t,r){return us().useReducer(e,t,r)};It.useRef=function(e){return us().useRef(e)};It.useState=function(e){return us().useState(e)};It.version="17.0.2";_e.exports=It;var Ce=_e.exports,x_={exports:{}},Ha={},k_={exports:{}},E_={};/** @license React v0.20.2
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){var t,r,a,n;if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var s=Date,o=s.now();e.unstable_now=function(){return s.now()-o}}if(typeof window=="undefined"||typeof MessageChannel!="function"){var l=null,u=null,c=function(){if(l!==null)try{var L=e.unstable_now();l(!0,L),l=null}catch(V){throw setTimeout(c,0),V}};t=function(L){l!==null?setTimeout(t,0,L):(l=L,setTimeout(c,0))},r=function(L,V){u=setTimeout(L,V)},a=function(){clearTimeout(u)},e.unstable_shouldYield=function(){return!1},n=e.unstable_forceFrameRate=function(){}}else{var d=window.setTimeout,p=window.clearTimeout;if(typeof console!="undefined"){var f=window.cancelAnimationFrame;typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),typeof f!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var h=!1,m=null,g=-1,v=5,b=0;e.unstable_shouldYield=function(){return e.unstable_now()>=b},n=function(){},e.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):v=0<L?Math.floor(1e3/L):5};var y=new MessageChannel,w=y.port2;y.port1.onmessage=function(){if(m!==null){var L=e.unstable_now();b=L+v;try{m(!0,L)?w.postMessage(null):(h=!1,m=null)}catch(V){throw w.postMessage(null),V}}else h=!1},t=function(L){m=L,h||(h=!0,w.postMessage(null))},r=function(L,V){g=d(function(){L(e.unstable_now())},V)},a=function(){p(g),g=-1}}function x(L,V){var H=L.length;L.push(V);e:for(;;){var Y=H-1>>>1,K=L[Y];if(K!==void 0&&0<E(K,V))L[Y]=V,L[H]=K,H=Y;else break e}}function k(L){return L=L[0],L===void 0?null:L}function C(L){var V=L[0];if(V!==void 0){var H=L.pop();if(H!==V){L[0]=H;e:for(var Y=0,K=L.length;Y<K;){var Z=2*(Y+1)-1,le=L[Z],de=Z+1,ie=L[de];if(le!==void 0&&0>E(le,H))ie!==void 0&&0>E(ie,le)?(L[Y]=ie,L[de]=H,Y=de):(L[Y]=le,L[Z]=H,Y=Z);else if(ie!==void 0&&0>E(ie,H))L[Y]=ie,L[de]=H,Y=de;else break e}}return V}return null}function E(L,V){var H=L.sortIndex-V.sortIndex;return H!==0?H:L.id-V.id}var $=[],N=[],I=1,S=null,A=3,R=!1,O=!1,D=!1;function z(L){for(var V=k(N);V!==null;){if(V.callback===null)C(N);else if(V.startTime<=L)C(N),V.sortIndex=V.expirationTime,x($,V);else break;V=k(N)}}function U(L){if(D=!1,z(L),!O)if(k($)!==null)O=!0,t(j);else{var V=k(N);V!==null&&r(U,V.startTime-L)}}function j(L,V){O=!1,D&&(D=!1,a()),R=!0;var H=A;try{for(z(V),S=k($);S!==null&&(!(S.expirationTime>V)||L&&!e.unstable_shouldYield());){var Y=S.callback;if(typeof Y=="function"){S.callback=null,A=S.priorityLevel;var K=Y(S.expirationTime<=V);V=e.unstable_now(),typeof K=="function"?S.callback=K:S===k($)&&C($),z(V)}else C($);S=k($)}if(S!==null)var Z=!0;else{var le=k(N);le!==null&&r(U,le.startTime-V),Z=!1}return Z}finally{S=null,A=H,R=!1}}var G=n;e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(L){L.callback=null},e.unstable_continueExecution=function(){O||R||(O=!0,t(j))},e.unstable_getCurrentPriorityLevel=function(){return A},e.unstable_getFirstCallbackNode=function(){return k($)},e.unstable_next=function(L){switch(A){case 1:case 2:case 3:var V=3;break;default:V=A}var H=A;A=V;try{return L()}finally{A=H}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=G,e.unstable_runWithPriority=function(L,V){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var H=A;A=L;try{return V()}finally{A=H}},e.unstable_scheduleCallback=function(L,V,H){var Y=e.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?Y+H:Y):H=Y,L){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=H+K,L={id:I++,callback:V,priorityLevel:L,startTime:H,expirationTime:K,sortIndex:-1},H>Y?(L.sortIndex=H,x(N,L),k($)===null&&L===k(N)&&(D?a():D=!0,r(U,H-Y))):(L.sortIndex=K,x($,L),O||R||(O=!0,t(j))),L},e.unstable_wrapCallback=function(L){var V=A;return function(){var H=A;A=V;try{return L.apply(this,arguments)}finally{A=H}}}})(E_);k_.exports=E_;/** @license React v17.0.2
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kb=_e.exports,tr=o_,Xr=k_.exports;function Pe(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!kb)throw Error(Pe(227));var C_=new Set,Vf={};function Tl(e,t){Ic(e,t),Ic(e+"Capture",t)}function Ic(e,t){for(Vf[e]=t,e=0;e<t.length;e++)C_.add(t[e])}var ss=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),mW=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,vT=Object.prototype.hasOwnProperty,bT={},yT={};function gW(e){return vT.call(yT,e)?!0:vT.call(bT,e)?!1:mW.test(e)?yT[e]=!0:(bT[e]=!0,!1)}function vW(e,t,r,a){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return a?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function bW(e,t,r,a){if(t===null||typeof t=="undefined"||vW(e,t,r,a))return!0;if(a)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Bn(e,t,r,a,n,i,s){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=a,this.attributeNamespace=n,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=s}var nn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){nn[e]=new Bn(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];nn[t]=new Bn(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){nn[e]=new Bn(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){nn[e]=new Bn(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){nn[e]=new Bn(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){nn[e]=new Bn(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){nn[e]=new Bn(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){nn[e]=new Bn(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){nn[e]=new Bn(e,5,!1,e.toLowerCase(),null,!1,!1)});var aE=/[\-:]([a-z])/g;function iE(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(aE,iE);nn[t]=new Bn(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(aE,iE);nn[t]=new Bn(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(aE,iE);nn[t]=new Bn(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){nn[e]=new Bn(e,1,!1,e.toLowerCase(),null,!1,!1)});nn.xlinkHref=new Bn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){nn[e]=new Bn(e,1,!1,e.toLowerCase(),null,!0,!0)});function sE(e,t,r,a){var n=nn.hasOwnProperty(t)?nn[t]:null,i=n!==null?n.type===0:a?!1:!(!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N");i||(bW(t,r,n,a)&&(r=null),a||n===null?gW(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):n.mustUseProperty?e[n.propertyName]=r===null?n.type===3?!1:"":r:(t=n.attributeName,a=n.attributeNamespace,r===null?e.removeAttribute(t):(n=n.type,r=n===3||n===4&&r===!0?"":""+r,a?e.setAttributeNS(a,t,r):e.setAttribute(t,r))))}var Nl=kb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,tf=60103,Ho=60106,Is=60107,oE=60108,xf=60114,lE=60109,uE=60110,Eb=60112,kf=60113,uv=60120,Cb=60115,cE=60116,dE=60121,pE=60128,S_=60129,fE=60130,ex=60131;if(typeof Symbol=="function"&&Symbol.for){var jr=Symbol.for;tf=jr("react.element"),Ho=jr("react.portal"),Is=jr("react.fragment"),oE=jr("react.strict_mode"),xf=jr("react.profiler"),lE=jr("react.provider"),uE=jr("react.context"),Eb=jr("react.forward_ref"),kf=jr("react.suspense"),uv=jr("react.suspense_list"),Cb=jr("react.memo"),cE=jr("react.lazy"),dE=jr("react.block"),jr("react.scope"),pE=jr("react.opaque.id"),S_=jr("react.debug_trace_mode"),fE=jr("react.offscreen"),ex=jr("react.legacy_hidden")}var wT=typeof Symbol=="function"&&Symbol.iterator;function Tp(e){return e===null||typeof e!="object"?null:(e=wT&&e[wT]||e["@@iterator"],typeof e=="function"?e:null)}var H0;function rf(e){if(H0===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);H0=t&&t[1]||""}return`
`+H0+e}var U0=!1;function jm(e,t){if(!e||U0)return"";U0=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var a=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){a=l}e.call(t.prototype)}else{try{throw Error()}catch(l){a=l}e()}}catch(l){if(l&&a&&typeof l.stack=="string"){for(var n=l.stack.split(`
`),i=a.stack.split(`
`),s=n.length-1,o=i.length-1;1<=s&&0<=o&&n[s]!==i[o];)o--;for(;1<=s&&0<=o;s--,o--)if(n[s]!==i[o]){if(s!==1||o!==1)do if(s--,o--,0>o||n[s]!==i[o])return`
`+n[s].replace(" at new "," at ");while(1<=s&&0<=o);break}}}finally{U0=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?rf(e):""}function yW(e){switch(e.tag){case 5:return rf(e.type);case 16:return rf("Lazy");case 13:return rf("Suspense");case 19:return rf("SuspenseList");case 0:case 2:case 15:return e=jm(e.type,!1),e;case 11:return e=jm(e.type.render,!1),e;case 22:return e=jm(e.type._render,!1),e;case 1:return e=jm(e.type,!0),e;default:return""}}function dc(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Is:return"Fragment";case Ho:return"Portal";case xf:return"Profiler";case oE:return"StrictMode";case kf:return"Suspense";case uv:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case uE:return(e.displayName||"Context")+".Consumer";case lE:return(e._context.displayName||"Context")+".Provider";case Eb:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case Cb:return dc(e.type);case dE:return dc(e._render);case cE:t=e._payload,e=e._init;try{return dc(e(t))}catch{}}return null}function Ks(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function $_(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function wW(e){var t=$_(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&typeof r!="undefined"&&typeof r.get=="function"&&typeof r.set=="function"){var n=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return n.call(this)},set:function(s){a=""+s,i.call(this,s)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return a},setValue:function(s){a=""+s},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Gm(e){e._valueTracker||(e._valueTracker=wW(e))}function I_(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),a="";return e&&(a=$_(e)?e.checked?"true":"false":e.value),e=a,e!==r?(t.setValue(e),!0):!1}function cv(e){if(e=e||(typeof document!="undefined"?document:void 0),typeof e=="undefined")return null;try{return e.activeElement||e.body}catch{return e.body}}function tx(e,t){var r=t.checked;return tr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r!=null?r:e._wrapperState.initialChecked})}function xT(e,t){var r=t.defaultValue==null?"":t.defaultValue,a=t.checked!=null?t.checked:t.defaultChecked;r=Ks(t.value!=null?t.value:r),e._wrapperState={initialChecked:a,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function T_(e,t){t=t.checked,t!=null&&sE(e,"checked",t,!1)}function rx(e,t){T_(e,t);var r=Ks(t.value),a=t.type;if(r!=null)a==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(a==="submit"||a==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?nx(e,t.type,r):t.hasOwnProperty("defaultValue")&&nx(e,t.type,Ks(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function kT(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!(a!=="submit"&&a!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function nx(e,t,r){(t!=="number"||cv(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}function xW(e){var t="";return kb.Children.forEach(e,function(r){r!=null&&(t+=r)}),t}function ax(e,t){return e=tr({children:void 0},t),(t=xW(t.children))&&(e.children=t),e}function pc(e,t,r,a){if(e=e.options,t){t={};for(var n=0;n<r.length;n++)t["$"+r[n]]=!0;for(r=0;r<e.length;r++)n=t.hasOwnProperty("$"+e[r].value),e[r].selected!==n&&(e[r].selected=n),n&&a&&(e[r].defaultSelected=!0)}else{for(r=""+Ks(r),t=null,n=0;n<e.length;n++){if(e[n].value===r){e[n].selected=!0,a&&(e[n].defaultSelected=!0);return}t!==null||e[n].disabled||(t=e[n])}t!==null&&(t.selected=!0)}}function ix(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Pe(91));return tr({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ET(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(Pe(92));if(Array.isArray(r)){if(!(1>=r.length))throw Error(Pe(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Ks(r)}}function N_(e,t){var r=Ks(t.value),a=Ks(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),a!=null&&(e.defaultValue=""+a)}function CT(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}var sx={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function A_(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ox(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?A_(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var qm,__=function(e){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(t,r,a,n){MSApp.execUnsafeLocalFunction(function(){return e(t,r,a,n)})}:e}(function(e,t){if(e.namespaceURI!==sx.svg||"innerHTML"in e)e.innerHTML=t;else{for(qm=qm||document.createElement("div"),qm.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=qm.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Wf(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Ef={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},kW=["Webkit","ms","Moz","O"];Object.keys(Ef).forEach(function(e){kW.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ef[t]=Ef[e]})});function M_(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Ef.hasOwnProperty(e)&&Ef[e]?(""+t).trim():t+"px"}function R_(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var a=r.indexOf("--")===0,n=M_(r,t[r],a);r==="float"&&(r="cssFloat"),a?e.setProperty(r,n):e[r]=n}}var EW=tr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function lx(e,t){if(t){if(EW[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Pe(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Pe(60));if(!(typeof t.dangerouslySetInnerHTML=="object"&&"__html"in t.dangerouslySetInnerHTML))throw Error(Pe(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Pe(62))}}function ux(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function hE(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var cx=null,fc=null,hc=null;function ST(e){if(e=kh(e)){if(typeof cx!="function")throw Error(Pe(280));var t=e.stateNode;t&&(t=Ab(t),cx(e.stateNode,e.type,t))}}function O_(e){fc?hc?hc.push(e):hc=[e]:fc=e}function P_(){if(fc){var e=fc,t=hc;if(hc=fc=null,ST(e),t)for(e=0;e<t.length;e++)ST(t[e])}}function mE(e,t){return e(t)}function D_(e,t,r,a,n){return e(t,r,a,n)}function gE(){}var F_=mE,Uo=!1,j0=!1;function vE(){(fc!==null||hc!==null)&&(gE(),P_())}function CW(e,t,r){if(j0)return e(t,r);j0=!0;try{return F_(e,t,r)}finally{j0=!1,vE()}}function Hf(e,t){var r=e.stateNode;if(r===null)return null;var a=Ab(r);if(a===null)return null;r=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(Pe(231,t,typeof r));return r}var dx=!1;if(ss)try{var Np={};Object.defineProperty(Np,"passive",{get:function(){dx=!0}}),window.addEventListener("test",Np,Np),window.removeEventListener("test",Np,Np)}catch{dx=!1}function SW(e,t,r,a,n,i,s,o,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(c){this.onError(c)}}var Cf=!1,dv=null,pv=!1,px=null,$W={onError:function(e){Cf=!0,dv=e}};function IW(e,t,r,a,n,i,s,o,l){Cf=!1,dv=null,SW.apply($W,arguments)}function TW(e,t,r,a,n,i,s,o,l){if(IW.apply(this,arguments),Cf){if(Cf){var u=dv;Cf=!1,dv=null}else throw Error(Pe(198));pv||(pv=!0,px=u)}}function Al(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&1026)!==0&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function L_(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function $T(e){if(Al(e)!==e)throw Error(Pe(188))}function NW(e){var t=e.alternate;if(!t){if(t=Al(e),t===null)throw Error(Pe(188));return t!==e?null:e}for(var r=e,a=t;;){var n=r.return;if(n===null)break;var i=n.alternate;if(i===null){if(a=n.return,a!==null){r=a;continue}break}if(n.child===i.child){for(i=n.child;i;){if(i===r)return $T(n),e;if(i===a)return $T(n),t;i=i.sibling}throw Error(Pe(188))}if(r.return!==a.return)r=n,a=i;else{for(var s=!1,o=n.child;o;){if(o===r){s=!0,r=n,a=i;break}if(o===a){s=!0,a=n,r=i;break}o=o.sibling}if(!s){for(o=i.child;o;){if(o===r){s=!0,r=i,a=n;break}if(o===a){s=!0,a=i,r=n;break}o=o.sibling}if(!s)throw Error(Pe(189))}}if(r.alternate!==a)throw Error(Pe(190))}if(r.tag!==3)throw Error(Pe(188));return r.stateNode.current===r?e:t}function z_(e){if(e=NW(e),!e)return null;for(var t=e;;){if(t.tag===5||t.tag===6)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function IT(e,t){for(var r=e.alternate;t!==null;){if(t===e||t===r)return!0;t=t.return}return!1}var B_,bE,V_,W_,fx=!1,wi=[],Ls=null,zs=null,Bs=null,Uf=new Map,jf=new Map,Ap=[],TT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function hx(e,t,r,a,n){return{blockedOn:e,domEventName:t,eventSystemFlags:r|16,nativeEvent:n,targetContainers:[a]}}function NT(e,t){switch(e){case"focusin":case"focusout":Ls=null;break;case"dragenter":case"dragleave":zs=null;break;case"mouseover":case"mouseout":Bs=null;break;case"pointerover":case"pointerout":Uf.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":jf.delete(t.pointerId)}}function _p(e,t,r,a,n,i){return e===null||e.nativeEvent!==i?(e=hx(t,r,a,n,i),t!==null&&(t=kh(t),t!==null&&bE(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,n!==null&&t.indexOf(n)===-1&&t.push(n),e)}function AW(e,t,r,a,n){switch(t){case"focusin":return Ls=_p(Ls,e,t,r,a,n),!0;case"dragenter":return zs=_p(zs,e,t,r,a,n),!0;case"mouseover":return Bs=_p(Bs,e,t,r,a,n),!0;case"pointerover":var i=n.pointerId;return Uf.set(i,_p(Uf.get(i)||null,e,t,r,a,n)),!0;case"gotpointercapture":return i=n.pointerId,jf.set(i,_p(jf.get(i)||null,e,t,r,a,n)),!0}return!1}function _W(e){var t=jo(e.target);if(t!==null){var r=Al(t);if(r!==null){if(t=r.tag,t===13){if(t=L_(r),t!==null){e.blockedOn=t,W_(e.lanePriority,function(){Xr.unstable_runWithPriority(e.priority,function(){V_(r)})});return}}else if(t===3&&r.stateNode.hydrate){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Lg(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=kE(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r!==null)return t=kh(r),t!==null&&bE(t),e.blockedOn=r,!1;t.shift()}return!0}function AT(e,t,r){Lg(e)&&r.delete(t)}function MW(){for(fx=!1;0<wi.length;){var e=wi[0];if(e.blockedOn!==null){e=kh(e.blockedOn),e!==null&&B_(e);break}for(var t=e.targetContainers;0<t.length;){var r=kE(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r!==null){e.blockedOn=r;break}t.shift()}e.blockedOn===null&&wi.shift()}Ls!==null&&Lg(Ls)&&(Ls=null),zs!==null&&Lg(zs)&&(zs=null),Bs!==null&&Lg(Bs)&&(Bs=null),Uf.forEach(AT),jf.forEach(AT)}function Mp(e,t){e.blockedOn===t&&(e.blockedOn=null,fx||(fx=!0,Xr.unstable_scheduleCallback(Xr.unstable_NormalPriority,MW)))}function H_(e){function t(n){return Mp(n,e)}if(0<wi.length){Mp(wi[0],e);for(var r=1;r<wi.length;r++){var a=wi[r];a.blockedOn===e&&(a.blockedOn=null)}}for(Ls!==null&&Mp(Ls,e),zs!==null&&Mp(zs,e),Bs!==null&&Mp(Bs,e),Uf.forEach(t),jf.forEach(t),r=0;r<Ap.length;r++)a=Ap[r],a.blockedOn===e&&(a.blockedOn=null);for(;0<Ap.length&&(r=Ap[0],r.blockedOn===null);)_W(r),r.blockedOn===null&&Ap.shift()}function Xm(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var ec={animationend:Xm("Animation","AnimationEnd"),animationiteration:Xm("Animation","AnimationIteration"),animationstart:Xm("Animation","AnimationStart"),transitionend:Xm("Transition","TransitionEnd")},G0={},U_={};ss&&(U_=document.createElement("div").style,"AnimationEvent"in window||(delete ec.animationend.animation,delete ec.animationiteration.animation,delete ec.animationstart.animation),"TransitionEvent"in window||delete ec.transitionend.transition);function Sb(e){if(G0[e])return G0[e];if(!ec[e])return e;var t=ec[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in U_)return G0[e]=t[r];return e}var j_=Sb("animationend"),G_=Sb("animationiteration"),q_=Sb("animationstart"),X_=Sb("transitionend"),Y_=new Map,yE=new Map,RW=["abort","abort",j_,"animationEnd",G_,"animationIteration",q_,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",X_,"transitionEnd","waiting","waiting"];function wE(e,t){for(var r=0;r<e.length;r+=2){var a=e[r],n=e[r+1];n="on"+(n[0].toUpperCase()+n.slice(1)),yE.set(a,t),Y_.set(a,n),Tl(n,[a])}}var OW=Xr.unstable_now;OW();var Ut=8;function Xu(e){if((1&e)!==0)return Ut=15,1;if((2&e)!==0)return Ut=14,2;if((4&e)!==0)return Ut=13,4;var t=24&e;return t!==0?(Ut=12,t):(e&32)!==0?(Ut=11,32):(t=192&e,t!==0?(Ut=10,t):(e&256)!==0?(Ut=9,256):(t=3584&e,t!==0?(Ut=8,t):(e&4096)!==0?(Ut=7,4096):(t=4186112&e,t!==0?(Ut=6,t):(t=62914560&e,t!==0?(Ut=5,t):e&67108864?(Ut=4,67108864):(e&134217728)!==0?(Ut=3,134217728):(t=805306368&e,t!==0?(Ut=2,t):(1073741824&e)!==0?(Ut=1,1073741824):(Ut=8,e))))))}function PW(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}function DW(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(Pe(358,e))}}function Gf(e,t){var r=e.pendingLanes;if(r===0)return Ut=0;var a=0,n=0,i=e.expiredLanes,s=e.suspendedLanes,o=e.pingedLanes;if(i!==0)a=i,n=Ut=15;else if(i=r&134217727,i!==0){var l=i&~s;l!==0?(a=Xu(l),n=Ut):(o&=i,o!==0&&(a=Xu(o),n=Ut))}else i=r&~s,i!==0?(a=Xu(i),n=Ut):o!==0&&(a=Xu(o),n=Ut);if(a===0)return 0;if(a=31-Zs(a),a=r&((0>a?0:1<<a)<<1)-1,t!==0&&t!==a&&(t&s)===0){if(Xu(t),n<=Ut)return t;Ut=n}if(t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=a;0<t;)r=31-Zs(t),n=1<<r,a|=e[r],t&=~n;return a}function K_(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function fv(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return e=Yu(24&~t),e===0?fv(10,t):e;case 10:return e=Yu(192&~t),e===0?fv(8,t):e;case 8:return e=Yu(3584&~t),e===0&&(e=Yu(4186112&~t),e===0&&(e=512)),e;case 2:return t=Yu(805306368&~t),t===0&&(t=268435456),t}throw Error(Pe(358,e))}function Yu(e){return e&-e}function q0(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function $b(e,t,r){e.pendingLanes|=t;var a=t-1;e.suspendedLanes&=a,e.pingedLanes&=a,e=e.eventTimes,t=31-Zs(t),e[t]=r}var Zs=Math.clz32?Math.clz32:zW,FW=Math.log,LW=Math.LN2;function zW(e){return e===0?32:31-(FW(e)/LW|0)|0}var BW=Xr.unstable_UserBlockingPriority,VW=Xr.unstable_runWithPriority,zg=!0;function WW(e,t,r,a){Uo||gE();var n=xE,i=Uo;Uo=!0;try{D_(n,e,t,r,a)}finally{(Uo=i)||vE()}}function HW(e,t,r,a){VW(BW,xE.bind(null,e,t,r,a))}function xE(e,t,r,a){if(zg){var n;if((n=(t&4)===0)&&0<wi.length&&-1<TT.indexOf(e))e=hx(null,e,t,r,a),wi.push(e);else{var i=kE(e,t,r,a);if(i===null)n&&NT(e,a);else{if(n){if(-1<TT.indexOf(e)){e=hx(i,e,t,r,a),wi.push(e);return}if(AW(i,e,t,r,a))return;NT(e,a)}uM(e,t,a,null,r)}}}}function kE(e,t,r,a){var n=hE(a);if(n=jo(n),n!==null){var i=Al(n);if(i===null)n=null;else{var s=i.tag;if(s===13){if(n=L_(i),n!==null)return n;n=null}else if(s===3){if(i.stateNode.hydrate)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}return uM(e,t,a,n,r),null}var As=null,EE=null,Bg=null;function Z_(){if(Bg)return Bg;var e,t=EE,r=t.length,a,n="value"in As?As.value:As.textContent,i=n.length;for(e=0;e<r&&t[e]===n[e];e++);var s=r-e;for(a=1;a<=s&&t[r-a]===n[i-a];a++);return Bg=n.slice(e,1<a?1-a:void 0)}function Vg(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ym(){return!0}function _T(){return!1}function Sa(e){function t(r,a,n,i,s){this._reactName=r,this._targetInst=n,this.type=a,this.nativeEvent=i,this.target=s,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(r=e[o],this[o]=r?r(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ym:_T,this.isPropagationStopped=_T,this}return tr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Ym)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Ym)},persist:function(){},isPersistent:Ym}),t}var Zc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},CE=Sa(Zc),xh=tr({},Zc,{view:0,detail:0}),UW=Sa(xh),X0,Y0,Rp,Ib=tr({},xh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:SE,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Rp&&(Rp&&e.type==="mousemove"?(X0=e.screenX-Rp.screenX,Y0=e.screenY-Rp.screenY):Y0=X0=0,Rp=e),X0)},movementY:function(e){return"movementY"in e?e.movementY:Y0}}),MT=Sa(Ib),jW=tr({},Ib,{dataTransfer:0}),GW=Sa(jW),qW=tr({},xh,{relatedTarget:0}),K0=Sa(qW),XW=tr({},Zc,{animationName:0,elapsedTime:0,pseudoElement:0}),YW=Sa(XW),KW=tr({},Zc,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ZW=Sa(KW),QW=tr({},Zc,{data:0}),RT=Sa(QW),JW={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},eH={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},tH={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rH(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=tH[e])?!!t[e]:!1}function SE(){return rH}var nH=tr({},xh,{key:function(e){if(e.key){var t=JW[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Vg(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?eH[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:SE,charCode:function(e){return e.type==="keypress"?Vg(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Vg(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),aH=Sa(nH),iH=tr({},Ib,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),OT=Sa(iH),sH=tr({},xh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:SE}),oH=Sa(sH),lH=tr({},Zc,{propertyName:0,elapsedTime:0,pseudoElement:0}),uH=Sa(lH),cH=tr({},Ib,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),dH=Sa(cH),pH=[9,13,27,32],$E=ss&&"CompositionEvent"in window,Sf=null;ss&&"documentMode"in document&&(Sf=document.documentMode);var fH=ss&&"TextEvent"in window&&!Sf,Q_=ss&&(!$E||Sf&&8<Sf&&11>=Sf),PT=String.fromCharCode(32),DT=!1;function J_(e,t){switch(e){case"keyup":return pH.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function eM(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var tc=!1;function hH(e,t){switch(e){case"compositionend":return eM(t);case"keypress":return t.which!==32?null:(DT=!0,PT);case"textInput":return e=t.data,e===PT&&DT?null:e;default:return null}}function mH(e,t){if(tc)return e==="compositionend"||!$E&&J_(e,t)?(e=Z_(),Bg=EE=As=null,tc=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Q_&&t.locale!=="ko"?null:t.data;default:return null}}var gH={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function FT(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!gH[e.type]:t==="textarea"}function tM(e,t,r,a){O_(a),t=hv(t,"onChange"),0<t.length&&(r=new CE("onChange","change",null,r,a),e.push({event:r,listeners:t}))}var $f=null,qf=null;function vH(e){sM(e,0)}function Tb(e){var t=nc(e);if(I_(t))return e}function bH(e,t){if(e==="change")return t}var rM=!1;if(ss){var Z0;if(ss){var Q0="oninput"in document;if(!Q0){var LT=document.createElement("div");LT.setAttribute("oninput","return;"),Q0=typeof LT.oninput=="function"}Z0=Q0}else Z0=!1;rM=Z0&&(!document.documentMode||9<document.documentMode)}function zT(){$f&&($f.detachEvent("onpropertychange",nM),qf=$f=null)}function nM(e){if(e.propertyName==="value"&&Tb(qf)){var t=[];if(tM(t,qf,e,hE(e)),e=vH,Uo)e(t);else{Uo=!0;try{mE(e,t)}finally{Uo=!1,vE()}}}}function yH(e,t,r){e==="focusin"?(zT(),$f=t,qf=r,$f.attachEvent("onpropertychange",nM)):e==="focusout"&&zT()}function wH(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Tb(qf)}function xH(e,t){if(e==="click")return Tb(t)}function kH(e,t){if(e==="input"||e==="change")return Tb(t)}function EH(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ra=typeof Object.is=="function"?Object.is:EH,CH=Object.prototype.hasOwnProperty;function Xf(e,t){if(Ra(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),a=Object.keys(t);if(r.length!==a.length)return!1;for(a=0;a<r.length;a++)if(!CH.call(t,r[a])||!Ra(e[r[a]],t[r[a]]))return!1;return!0}function BT(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function VT(e,t){var r=BT(e);e=0;for(var a;r;){if(r.nodeType===3){if(a=e+r.textContent.length,e<=t&&a>=t)return{node:r,offset:t-e};e=a}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=BT(r)}}function aM(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?aM(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function WT(){for(var e=window,t=cv();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=cv(e.document)}return t}function mx(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var SH=ss&&"documentMode"in document&&11>=document.documentMode,rc=null,gx=null,If=null,vx=!1;function HT(e,t,r){var a=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;vx||rc==null||rc!==cv(a)||(a=rc,"selectionStart"in a&&mx(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),If&&Xf(If,a)||(If=a,a=hv(gx,"onSelect"),0<a.length&&(t=new CE("onSelect","select",null,t,r),e.push({event:t,listeners:a}),t.target=rc)))}wE("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0);wE("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);wE(RW,2);for(var UT="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),J0=0;J0<UT.length;J0++)yE.set(UT[J0],0);Ic("onMouseEnter",["mouseout","mouseover"]);Ic("onMouseLeave",["mouseout","mouseover"]);Ic("onPointerEnter",["pointerout","pointerover"]);Ic("onPointerLeave",["pointerout","pointerover"]);Tl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Tl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Tl("onBeforeInput",["compositionend","keypress","textInput","paste"]);Tl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Tl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Tl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var nf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),iM=new Set("cancel close invalid load scroll toggle".split(" ").concat(nf));function jT(e,t,r){var a=e.type||"unknown-event";e.currentTarget=r,TW(a,t,void 0,e),e.currentTarget=null}function sM(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var a=e[r],n=a.event;a=a.listeners;e:{var i=void 0;if(t)for(var s=a.length-1;0<=s;s--){var o=a[s],l=o.instance,u=o.currentTarget;if(o=o.listener,l!==i&&n.isPropagationStopped())break e;jT(n,o,u),i=l}else for(s=0;s<a.length;s++){if(o=a[s],l=o.instance,u=o.currentTarget,o=o.listener,l!==i&&n.isPropagationStopped())break e;jT(n,o,u),i=l}}}if(pv)throw e=px,pv=!1,px=null,e}function Xt(e,t){var r=dM(t),a=e+"__bubble";r.has(a)||(lM(t,e,2,!1),r.add(a))}var GT="_reactListening"+Math.random().toString(36).slice(2);function oM(e){e[GT]||(e[GT]=!0,C_.forEach(function(t){iM.has(t)||qT(t,!1,e,null),qT(t,!0,e,null)}))}function qT(e,t,r,a){var n=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,i=r;if(e==="selectionchange"&&r.nodeType!==9&&(i=r.ownerDocument),a!==null&&!t&&iM.has(e)){if(e!=="scroll")return;n|=2,i=a}var s=dM(i),o=e+"__"+(t?"capture":"bubble");s.has(o)||(t&&(n|=4),lM(i,e,n,t),s.add(o))}function lM(e,t,r,a){var n=yE.get(t);switch(n===void 0?2:n){case 0:n=WW;break;case 1:n=HW;break;default:n=xE}r=n.bind(null,t,r,e),n=void 0,!dx||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(n=!0),a?n!==void 0?e.addEventListener(t,r,{capture:!0,passive:n}):e.addEventListener(t,r,!0):n!==void 0?e.addEventListener(t,r,{passive:n}):e.addEventListener(t,r,!1)}function uM(e,t,r,a,n){var i=a;if((t&1)===0&&(t&2)===0&&a!==null)e:for(;;){if(a===null)return;var s=a.tag;if(s===3||s===4){var o=a.stateNode.containerInfo;if(o===n||o.nodeType===8&&o.parentNode===n)break;if(s===4)for(s=a.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===n||l.nodeType===8&&l.parentNode===n))return;s=s.return}for(;o!==null;){if(s=jo(o),s===null)return;if(l=s.tag,l===5||l===6){a=i=s;continue e}o=o.parentNode}}a=a.return}CW(function(){var u=i,c=hE(r),d=[];e:{var p=Y_.get(e);if(p!==void 0){var f=CE,h=e;switch(e){case"keypress":if(Vg(r)===0)break e;case"keydown":case"keyup":f=aH;break;case"focusin":h="focus",f=K0;break;case"focusout":h="blur",f=K0;break;case"beforeblur":case"afterblur":f=K0;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=MT;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=GW;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=oH;break;case j_:case G_:case q_:f=YW;break;case X_:f=uH;break;case"scroll":f=UW;break;case"wheel":f=dH;break;case"copy":case"cut":case"paste":f=ZW;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=OT}var m=(t&4)!==0,g=!m&&e==="scroll",v=m?p!==null?p+"Capture":null:p;m=[];for(var b=u,y;b!==null;){y=b;var w=y.stateNode;if(y.tag===5&&w!==null&&(y=w,v!==null&&(w=Hf(b,v),w!=null&&m.push(Yf(b,w,y)))),g)break;b=b.return}0<m.length&&(p=new f(p,h,null,r,c),d.push({event:p,listeners:m}))}}if((t&7)===0){e:{if(p=e==="mouseover"||e==="pointerover",f=e==="mouseout"||e==="pointerout",p&&(t&16)===0&&(h=r.relatedTarget||r.fromElement)&&(jo(h)||h[Qc]))break e;if((f||p)&&(p=c.window===c?c:(p=c.ownerDocument)?p.defaultView||p.parentWindow:window,f?(h=r.relatedTarget||r.toElement,f=u,h=h?jo(h):null,h!==null&&(g=Al(h),h!==g||h.tag!==5&&h.tag!==6)&&(h=null)):(f=null,h=u),f!==h)){if(m=MT,w="onMouseLeave",v="onMouseEnter",b="mouse",(e==="pointerout"||e==="pointerover")&&(m=OT,w="onPointerLeave",v="onPointerEnter",b="pointer"),g=f==null?p:nc(f),y=h==null?p:nc(h),p=new m(w,b+"leave",f,r,c),p.target=g,p.relatedTarget=y,w=null,jo(c)===u&&(m=new m(v,b+"enter",h,r,c),m.target=y,m.relatedTarget=g,w=m),g=w,f&&h)t:{for(m=f,v=h,b=0,y=m;y;y=Wu(y))b++;for(y=0,w=v;w;w=Wu(w))y++;for(;0<b-y;)m=Wu(m),b--;for(;0<y-b;)v=Wu(v),y--;for(;b--;){if(m===v||v!==null&&m===v.alternate)break t;m=Wu(m),v=Wu(v)}m=null}else m=null;f!==null&&XT(d,p,f,m,!1),h!==null&&g!==null&&XT(d,g,h,m,!0)}}e:{if(p=u?nc(u):window,f=p.nodeName&&p.nodeName.toLowerCase(),f==="select"||f==="input"&&p.type==="file")var x=bH;else if(FT(p))if(rM)x=kH;else{x=wH;var k=yH}else(f=p.nodeName)&&f.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(x=xH);if(x&&(x=x(e,u))){tM(d,x,r,c);break e}k&&k(e,p,u),e==="focusout"&&(k=p._wrapperState)&&k.controlled&&p.type==="number"&&nx(p,"number",p.value)}switch(k=u?nc(u):window,e){case"focusin":(FT(k)||k.contentEditable==="true")&&(rc=k,gx=u,If=null);break;case"focusout":If=gx=rc=null;break;case"mousedown":vx=!0;break;case"contextmenu":case"mouseup":case"dragend":vx=!1,HT(d,r,c);break;case"selectionchange":if(SH)break;case"keydown":case"keyup":HT(d,r,c)}var C;if($E)e:{switch(e){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else tc?J_(e,r)&&(E="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(E="onCompositionStart");E&&(Q_&&r.locale!=="ko"&&(tc||E!=="onCompositionStart"?E==="onCompositionEnd"&&tc&&(C=Z_()):(As=c,EE="value"in As?As.value:As.textContent,tc=!0)),k=hv(u,E),0<k.length&&(E=new RT(E,e,null,r,c),d.push({event:E,listeners:k}),C?E.data=C:(C=eM(r),C!==null&&(E.data=C)))),(C=fH?hH(e,r):mH(e,r))&&(u=hv(u,"onBeforeInput"),0<u.length&&(c=new RT("onBeforeInput","beforeinput",null,r,c),d.push({event:c,listeners:u}),c.data=C))}sM(d,t)})}function Yf(e,t,r){return{instance:e,listener:t,currentTarget:r}}function hv(e,t){for(var r=t+"Capture",a=[];e!==null;){var n=e,i=n.stateNode;n.tag===5&&i!==null&&(n=i,i=Hf(e,r),i!=null&&a.unshift(Yf(e,i,n)),i=Hf(e,t),i!=null&&a.push(Yf(e,i,n))),e=e.return}return a}function Wu(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function XT(e,t,r,a,n){for(var i=t._reactName,s=[];r!==null&&r!==a;){var o=r,l=o.alternate,u=o.stateNode;if(l!==null&&l===a)break;o.tag===5&&u!==null&&(o=u,n?(l=Hf(r,i),l!=null&&s.unshift(Yf(r,l,o))):n||(l=Hf(r,i),l!=null&&s.push(Yf(r,l,o)))),r=r.return}s.length!==0&&e.push({event:t,listeners:s})}function mv(){}var ew=null,tw=null;function cM(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function bx(e,t){return e==="textarea"||e==="option"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var YT=typeof setTimeout=="function"?setTimeout:void 0,$H=typeof clearTimeout=="function"?clearTimeout:void 0;function IE(e){e.nodeType===1?e.textContent="":e.nodeType===9&&(e=e.body,e!=null&&(e.textContent=""))}function mc(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break}return e}function KT(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var rw=0;function IH(e){return{$$typeof:pE,toString:e,valueOf:e}}var Nb=Math.random().toString(36).slice(2),_s="__reactFiber$"+Nb,gv="__reactProps$"+Nb,Qc="__reactContainer$"+Nb,ZT="__reactEvents$"+Nb;function jo(e){var t=e[_s];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Qc]||r[_s]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=KT(e);e!==null;){if(r=e[_s])return r;e=KT(e)}return t}e=r,r=e.parentNode}return null}function kh(e){return e=e[_s]||e[Qc],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function nc(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Pe(33))}function Ab(e){return e[gv]||null}function dM(e){var t=e[ZT];return t===void 0&&(t=e[ZT]=new Set),t}var yx=[],ac=-1;function ho(e){return{current:e}}function Yt(e){0>ac||(e.current=yx[ac],yx[ac]=null,ac--)}function fr(e,t){ac++,yx[ac]=e.current,e.current=t}var Qs={},bn=ho(Qs),ra=ho(!1),sl=Qs;function Tc(e,t){var r=e.type.contextTypes;if(!r)return Qs;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var n={},i;for(i in r)n[i]=t[i];return a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=n),n}function na(e){return e=e.childContextTypes,e!=null}function vv(){Yt(ra),Yt(bn)}function QT(e,t,r){if(bn.current!==Qs)throw Error(Pe(168));fr(bn,t),fr(ra,r)}function pM(e,t,r){var a=e.stateNode;if(e=t.childContextTypes,typeof a.getChildContext!="function")return r;a=a.getChildContext();for(var n in a)if(!(n in e))throw Error(Pe(108,dc(t)||"Unknown",n));return tr({},r,a)}function Wg(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Qs,sl=bn.current,fr(bn,e),fr(ra,ra.current),!0}function JT(e,t,r){var a=e.stateNode;if(!a)throw Error(Pe(169));r?(e=pM(e,t,sl),a.__reactInternalMemoizedMergedChildContext=e,Yt(ra),Yt(bn),fr(bn,e)):Yt(ra),fr(ra,r)}var TE=null,Zo=null,TH=Xr.unstable_runWithPriority,NE=Xr.unstable_scheduleCallback,wx=Xr.unstable_cancelCallback,NH=Xr.unstable_shouldYield,e2=Xr.unstable_requestPaint,xx=Xr.unstable_now,AH=Xr.unstable_getCurrentPriorityLevel,_b=Xr.unstable_ImmediatePriority,fM=Xr.unstable_UserBlockingPriority,hM=Xr.unstable_NormalPriority,mM=Xr.unstable_LowPriority,gM=Xr.unstable_IdlePriority,aw={},_H=e2!==void 0?e2:function(){},Wi=null,Hg=null,iw=!1,t2=xx(),gn=1e4>t2?xx:function(){return xx()-t2};function Nc(){switch(AH()){case _b:return 99;case fM:return 98;case hM:return 97;case mM:return 96;case gM:return 95;default:throw Error(Pe(332))}}function vM(e){switch(e){case 99:return _b;case 98:return fM;case 97:return hM;case 96:return mM;case 95:return gM;default:throw Error(Pe(332))}}function ol(e,t){return e=vM(e),TH(e,t)}function Kf(e,t,r){return e=vM(e),NE(e,t,r)}function Ai(){if(Hg!==null){var e=Hg;Hg=null,wx(e)}bM()}function bM(){if(!iw&&Wi!==null){iw=!0;var e=0;try{var t=Wi;ol(99,function(){for(;e<t.length;e++){var r=t[e];do r=r(!0);while(r!==null)}}),Wi=null}catch(r){throw Wi!==null&&(Wi=Wi.slice(e+1)),NE(_b,Ai),r}finally{iw=!1}}}var MH=Nl.ReactCurrentBatchConfig;function Ka(e,t){if(e&&e.defaultProps){t=tr({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}var bv=ho(null),yv=null,ic=null,wv=null;function AE(){wv=ic=yv=null}function _E(e){var t=bv.current;Yt(bv),e.type._context._currentValue=t}function yM(e,t){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)===t){if(r===null||(r.childLanes&t)===t)break;r.childLanes|=t}else e.childLanes|=t,r!==null&&(r.childLanes|=t);e=e.return}}function gc(e,t){yv=e,wv=ic=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(Ja=!0),e.firstContext=null)}function La(e,t){if(wv!==e&&t!==!1&&t!==0)if((typeof t!="number"||t===1073741823)&&(wv=e,t=1073741823),t={context:e,observedBits:t,next:null},ic===null){if(yv===null)throw Error(Pe(308));ic=t,yv.dependencies={lanes:0,firstContext:t,responders:null}}else ic=ic.next=t;return e._currentValue}var $s=!1;function ME(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function wM(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Vs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ws(e,t){if(e=e.updateQueue,e!==null){e=e.shared;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}}function r2(e,t){var r=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,r===a)){var n=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var s={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?n=i=s:i=i.next=s,r=r.next}while(r!==null);i===null?n=i=t:i=i.next=t}else n=i=t;r={baseState:a.baseState,firstBaseUpdate:n,lastBaseUpdate:i,shared:a.shared,effects:a.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Zf(e,t,r,a){var n=e.updateQueue;$s=!1;var i=n.firstBaseUpdate,s=n.lastBaseUpdate,o=n.shared.pending;if(o!==null){n.shared.pending=null;var l=o,u=l.next;l.next=null,s===null?i=u:s.next=u,s=l;var c=e.alternate;if(c!==null){c=c.updateQueue;var d=c.lastBaseUpdate;d!==s&&(d===null?c.firstBaseUpdate=u:d.next=u,c.lastBaseUpdate=l)}}if(i!==null){d=n.baseState,s=0,c=u=l=null;do{o=i.lane;var p=i.eventTime;if((a&o)===o){c!==null&&(c=c.next={eventTime:p,lane:0,tag:i.tag,payload:i.payload,callback:i.callback,next:null});e:{var f=e,h=i;switch(o=t,p=r,h.tag){case 1:if(f=h.payload,typeof f=="function"){d=f.call(p,d,o);break e}d=f;break e;case 3:f.flags=f.flags&-4097|64;case 0:if(f=h.payload,o=typeof f=="function"?f.call(p,d,o):f,o==null)break e;d=tr({},d,o);break e;case 2:$s=!0}}i.callback!==null&&(e.flags|=32,o=n.effects,o===null?n.effects=[i]:o.push(i))}else p={eventTime:p,lane:o,tag:i.tag,payload:i.payload,callback:i.callback,next:null},c===null?(u=c=p,l=d):c=c.next=p,s|=o;if(i=i.next,i===null){if(o=n.shared.pending,o===null)break;i=o.next,o.next=null,n.lastBaseUpdate=o,n.shared.pending=null}}while(1);c===null&&(l=d),n.baseState=l,n.firstBaseUpdate=u,n.lastBaseUpdate=c,Ch|=s,e.lanes=s,e.memoizedState=d}}function n2(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var a=e[t],n=a.callback;if(n!==null){if(a.callback=null,a=r,typeof n!="function")throw Error(Pe(191,n));n.call(a)}}}var xM=new kb.Component().refs;function xv(e,t,r,a){t=e.memoizedState,r=r(a,t),r=r==null?t:tr({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Mb={isMounted:function(e){return(e=e._reactInternals)?Al(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var a=xa(),n=Hs(e),i=Vs(a,n);i.payload=t,r!=null&&(i.callback=r),Ws(e,i),Us(e,n,a)},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var a=xa(),n=Hs(e),i=Vs(a,n);i.tag=1,i.payload=t,r!=null&&(i.callback=r),Ws(e,i),Us(e,n,a)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=xa(),a=Hs(e),n=Vs(r,a);n.tag=2,t!=null&&(n.callback=t),Ws(e,n),Us(e,a,r)}};function a2(e,t,r,a,n,i,s){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,i,s):t.prototype&&t.prototype.isPureReactComponent?!Xf(r,a)||!Xf(n,i):!0}function kM(e,t,r){var a=!1,n=Qs,i=t.contextType;return typeof i=="object"&&i!==null?i=La(i):(n=na(t)?sl:bn.current,a=t.contextTypes,i=(a=a!=null)?Tc(e,n):Qs),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Mb,e.stateNode=t,t._reactInternals=e,a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=i),t}function i2(e,t,r,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,a),t.state!==e&&Mb.enqueueReplaceState(t,t.state,null)}function kx(e,t,r,a){var n=e.stateNode;n.props=r,n.state=e.memoizedState,n.refs=xM,ME(e);var i=t.contextType;typeof i=="object"&&i!==null?n.context=La(i):(i=na(t)?sl:bn.current,n.context=Tc(e,i)),Zf(e,r,n,a),n.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(xv(e,t,i,r),n.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof n.getSnapshotBeforeUpdate=="function"||typeof n.UNSAFE_componentWillMount!="function"&&typeof n.componentWillMount!="function"||(t=n.state,typeof n.componentWillMount=="function"&&n.componentWillMount(),typeof n.UNSAFE_componentWillMount=="function"&&n.UNSAFE_componentWillMount(),t!==n.state&&Mb.enqueueReplaceState(n,n.state,null),Zf(e,r,n,a),n.state=e.memoizedState),typeof n.componentDidMount=="function"&&(e.flags|=4)}var Km=Array.isArray;function Op(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Pe(309));var a=r.stateNode}if(!a)throw Error(Pe(147,e));var n=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===n?t.ref:(t=function(i){var s=a.refs;s===xM&&(s=a.refs={}),i===null?delete s[n]:s[n]=i},t._stringRef=n,t)}if(typeof e!="string")throw Error(Pe(284));if(!r._owner)throw Error(Pe(290,e))}return e}function Zm(e,t){if(e.type!=="textarea")throw Error(Pe(31,Object.prototype.toString.call(t)==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function EM(e){function t(g,v){if(e){var b=g.lastEffect;b!==null?(b.nextEffect=v,g.lastEffect=v):g.firstEffect=g.lastEffect=v,v.nextEffect=null,v.flags=8}}function r(g,v){if(!e)return null;for(;v!==null;)t(g,v),v=v.sibling;return null}function a(g,v){for(g=new Map;v!==null;)v.key!==null?g.set(v.key,v):g.set(v.index,v),v=v.sibling;return g}function n(g,v){return g=eo(g,v),g.index=0,g.sibling=null,g}function i(g,v,b){return g.index=b,e?(b=g.alternate,b!==null?(b=b.index,b<v?(g.flags=2,v):b):(g.flags=2,v)):v}function s(g){return e&&g.alternate===null&&(g.flags=2),g}function o(g,v,b,y){return v===null||v.tag!==6?(v=cw(b,g.mode,y),v.return=g,v):(v=n(v,b),v.return=g,v)}function l(g,v,b,y){return v!==null&&v.elementType===b.type?(y=n(v,b.props),y.ref=Op(g,v,b),y.return=g,y):(y=qg(b.type,b.key,b.props,null,g.mode,y),y.ref=Op(g,v,b),y.return=g,y)}function u(g,v,b,y){return v===null||v.tag!==4||v.stateNode.containerInfo!==b.containerInfo||v.stateNode.implementation!==b.implementation?(v=dw(b,g.mode,y),v.return=g,v):(v=n(v,b.children||[]),v.return=g,v)}function c(g,v,b,y,w){return v===null||v.tag!==7?(v=wc(b,g.mode,y,w),v.return=g,v):(v=n(v,b),v.return=g,v)}function d(g,v,b){if(typeof v=="string"||typeof v=="number")return v=cw(""+v,g.mode,b),v.return=g,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case tf:return b=qg(v.type,v.key,v.props,null,g.mode,b),b.ref=Op(g,null,v),b.return=g,b;case Ho:return v=dw(v,g.mode,b),v.return=g,v}if(Km(v)||Tp(v))return v=wc(v,g.mode,b,null),v.return=g,v;Zm(g,v)}return null}function p(g,v,b,y){var w=v!==null?v.key:null;if(typeof b=="string"||typeof b=="number")return w!==null?null:o(g,v,""+b,y);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case tf:return b.key===w?b.type===Is?c(g,v,b.props.children,y,w):l(g,v,b,y):null;case Ho:return b.key===w?u(g,v,b,y):null}if(Km(b)||Tp(b))return w!==null?null:c(g,v,b,y,null);Zm(g,b)}return null}function f(g,v,b,y,w){if(typeof y=="string"||typeof y=="number")return g=g.get(b)||null,o(v,g,""+y,w);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case tf:return g=g.get(y.key===null?b:y.key)||null,y.type===Is?c(v,g,y.props.children,w,y.key):l(v,g,y,w);case Ho:return g=g.get(y.key===null?b:y.key)||null,u(v,g,y,w)}if(Km(y)||Tp(y))return g=g.get(b)||null,c(v,g,y,w,null);Zm(v,y)}return null}function h(g,v,b,y){for(var w=null,x=null,k=v,C=v=0,E=null;k!==null&&C<b.length;C++){k.index>C?(E=k,k=null):E=k.sibling;var $=p(g,k,b[C],y);if($===null){k===null&&(k=E);break}e&&k&&$.alternate===null&&t(g,k),v=i($,v,C),x===null?w=$:x.sibling=$,x=$,k=E}if(C===b.length)return r(g,k),w;if(k===null){for(;C<b.length;C++)k=d(g,b[C],y),k!==null&&(v=i(k,v,C),x===null?w=k:x.sibling=k,x=k);return w}for(k=a(g,k);C<b.length;C++)E=f(k,g,C,b[C],y),E!==null&&(e&&E.alternate!==null&&k.delete(E.key===null?C:E.key),v=i(E,v,C),x===null?w=E:x.sibling=E,x=E);return e&&k.forEach(function(N){return t(g,N)}),w}function m(g,v,b,y){var w=Tp(b);if(typeof w!="function")throw Error(Pe(150));if(b=w.call(b),b==null)throw Error(Pe(151));for(var x=w=null,k=v,C=v=0,E=null,$=b.next();k!==null&&!$.done;C++,$=b.next()){k.index>C?(E=k,k=null):E=k.sibling;var N=p(g,k,$.value,y);if(N===null){k===null&&(k=E);break}e&&k&&N.alternate===null&&t(g,k),v=i(N,v,C),x===null?w=N:x.sibling=N,x=N,k=E}if($.done)return r(g,k),w;if(k===null){for(;!$.done;C++,$=b.next())$=d(g,$.value,y),$!==null&&(v=i($,v,C),x===null?w=$:x.sibling=$,x=$);return w}for(k=a(g,k);!$.done;C++,$=b.next())$=f(k,g,C,$.value,y),$!==null&&(e&&$.alternate!==null&&k.delete($.key===null?C:$.key),v=i($,v,C),x===null?w=$:x.sibling=$,x=$);return e&&k.forEach(function(I){return t(g,I)}),w}return function(g,v,b,y){var w=typeof b=="object"&&b!==null&&b.type===Is&&b.key===null;w&&(b=b.props.children);var x=typeof b=="object"&&b!==null;if(x)switch(b.$$typeof){case tf:e:{for(x=b.key,w=v;w!==null;){if(w.key===x){switch(w.tag){case 7:if(b.type===Is){r(g,w.sibling),v=n(w,b.props.children),v.return=g,g=v;break e}break;default:if(w.elementType===b.type){r(g,w.sibling),v=n(w,b.props),v.ref=Op(g,w,b),v.return=g,g=v;break e}}r(g,w);break}else t(g,w);w=w.sibling}b.type===Is?(v=wc(b.props.children,g.mode,y,b.key),v.return=g,g=v):(y=qg(b.type,b.key,b.props,null,g.mode,y),y.ref=Op(g,v,b),y.return=g,g=y)}return s(g);case Ho:e:{for(w=b.key;v!==null;){if(v.key===w)if(v.tag===4&&v.stateNode.containerInfo===b.containerInfo&&v.stateNode.implementation===b.implementation){r(g,v.sibling),v=n(v,b.children||[]),v.return=g,g=v;break e}else{r(g,v);break}else t(g,v);v=v.sibling}v=dw(b,g.mode,y),v.return=g,g=v}return s(g)}if(typeof b=="string"||typeof b=="number")return b=""+b,v!==null&&v.tag===6?(r(g,v.sibling),v=n(v,b),v.return=g,g=v):(r(g,v),v=cw(b,g.mode,y),v.return=g,g=v),s(g);if(Km(b))return h(g,v,b,y);if(Tp(b))return m(g,v,b,y);if(x&&Zm(g,b),typeof b=="undefined"&&!w)switch(g.tag){case 1:case 22:case 0:case 11:case 15:throw Error(Pe(152,dc(g.type)||"Component"))}return r(g,v)}}var kv=EM(!0),CM=EM(!1),Eh={},Ei=ho(Eh),Qf=ho(Eh),Jf=ho(Eh);function Go(e){if(e===Eh)throw Error(Pe(174));return e}function Ex(e,t){switch(fr(Jf,t),fr(Qf,e),fr(Ei,Eh),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ox(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=ox(t,e)}Yt(Ei),fr(Ei,t)}function Ac(){Yt(Ei),Yt(Qf),Yt(Jf)}function s2(e){Go(Jf.current);var t=Go(Ei.current),r=ox(t,e.type);t!==r&&(fr(Qf,e),fr(Ei,r))}function RE(e){Qf.current===e&&(Yt(Ei),Yt(Qf))}var pr=ho(0);function Ev(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&64)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Yi=null,Ms=null,Ci=!1;function SM(e,t){var r=Oa(5,null,null,0);r.elementType="DELETED",r.type="DELETED",r.stateNode=t,r.return=e,r.flags=8,e.lastEffect!==null?(e.lastEffect.nextEffect=r,e.lastEffect=r):e.firstEffect=e.lastEffect=r}function o2(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,!0):!1;case 13:return!1;default:return!1}}function Cx(e){if(Ci){var t=Ms;if(t){var r=t;if(!o2(e,t)){if(t=mc(r.nextSibling),!t||!o2(e,t)){e.flags=e.flags&-1025|2,Ci=!1,Yi=e;return}SM(Yi,r)}Yi=e,Ms=mc(t.firstChild)}else e.flags=e.flags&-1025|2,Ci=!1,Yi=e}}function l2(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Yi=e}function Qm(e){if(e!==Yi)return!1;if(!Ci)return l2(e),Ci=!0,!1;var t=e.type;if(e.tag!==5||t!=="head"&&t!=="body"&&!bx(t,e.memoizedProps))for(t=Ms;t;)SM(e,t),t=mc(t.nextSibling);if(l2(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Pe(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Ms=mc(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Ms=null}}else Ms=Yi?mc(e.stateNode.nextSibling):null;return!0}function sw(){Ms=Yi=null,Ci=!1}var vc=[];function OE(){for(var e=0;e<vc.length;e++)vc[e]._workInProgressVersionPrimary=null;vc.length=0}var Tf=Nl.ReactCurrentDispatcher,Pa=Nl.ReactCurrentBatchConfig,eh=0,Er=null,cn=null,Jr=null,Cv=!1,Nf=!1;function Xn(){throw Error(Pe(321))}function PE(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Ra(e[r],t[r]))return!1;return!0}function DE(e,t,r,a,n,i){if(eh=i,Er=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Tf.current=e===null||e.memoizedState===null?OH:PH,e=r(a,n),Nf){i=0;do{if(Nf=!1,!(25>i))throw Error(Pe(301));i+=1,Jr=cn=null,t.updateQueue=null,Tf.current=DH,e=r(a,n)}while(Nf)}if(Tf.current=Tv,t=cn!==null&&cn.next!==null,eh=0,Jr=cn=Er=null,Cv=!1,t)throw Error(Pe(300));return e}function qo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Jr===null?Er.memoizedState=Jr=e:Jr=Jr.next=e,Jr}function _l(){if(cn===null){var e=Er.alternate;e=e!==null?e.memoizedState:null}else e=cn.next;var t=Jr===null?Er.memoizedState:Jr.next;if(t!==null)Jr=t,cn=e;else{if(e===null)throw Error(Pe(310));cn=e,e={memoizedState:cn.memoizedState,baseState:cn.baseState,baseQueue:cn.baseQueue,queue:cn.queue,next:null},Jr===null?Er.memoizedState=Jr=e:Jr=Jr.next=e}return Jr}function xi(e,t){return typeof t=="function"?t(e):t}function Pp(e){var t=_l(),r=t.queue;if(r===null)throw Error(Pe(311));r.lastRenderedReducer=e;var a=cn,n=a.baseQueue,i=r.pending;if(i!==null){if(n!==null){var s=n.next;n.next=i.next,i.next=s}a.baseQueue=n=i,r.pending=null}if(n!==null){n=n.next,a=a.baseState;var o=s=i=null,l=n;do{var u=l.lane;if((eh&u)===u)o!==null&&(o=o.next={lane:0,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null}),a=l.eagerReducer===e?l.eagerState:e(a,l.action);else{var c={lane:u,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null};o===null?(s=o=c,i=a):o=o.next=c,Er.lanes|=u,Ch|=u}l=l.next}while(l!==null&&l!==n);o===null?i=a:o.next=s,Ra(a,t.memoizedState)||(Ja=!0),t.memoizedState=a,t.baseState=i,t.baseQueue=o,r.lastRenderedState=a}return[t.memoizedState,r.dispatch]}function Dp(e){var t=_l(),r=t.queue;if(r===null)throw Error(Pe(311));r.lastRenderedReducer=e;var a=r.dispatch,n=r.pending,i=t.memoizedState;if(n!==null){r.pending=null;var s=n=n.next;do i=e(i,s.action),s=s.next;while(s!==n);Ra(i,t.memoizedState)||(Ja=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,a]}function u2(e,t,r){var a=t._getVersion;a=a(t._source);var n=t._workInProgressVersionPrimary;if(n!==null?e=n===a:(e=e.mutableReadLanes,(e=(eh&e)===e)&&(t._workInProgressVersionPrimary=a,vc.push(t))),e)return r(t._source);throw vc.push(t),Error(Pe(350))}function $M(e,t,r,a){var n=On;if(n===null)throw Error(Pe(349));var i=t._getVersion,s=i(t._source),o=Tf.current,l=o.useState(function(){return u2(n,t,r)}),u=l[1],c=l[0];l=Jr;var d=e.memoizedState,p=d.refs,f=p.getSnapshot,h=d.source;d=d.subscribe;var m=Er;return e.memoizedState={refs:p,source:t,subscribe:a},o.useEffect(function(){p.getSnapshot=r,p.setSnapshot=u;var g=i(t._source);if(!Ra(s,g)){g=r(t._source),Ra(c,g)||(u(g),g=Hs(m),n.mutableReadLanes|=g&n.pendingLanes),g=n.mutableReadLanes,n.entangledLanes|=g;for(var v=n.entanglements,b=g;0<b;){var y=31-Zs(b),w=1<<y;v[y]|=g,b&=~w}}},[r,t,a]),o.useEffect(function(){return a(t._source,function(){var g=p.getSnapshot,v=p.setSnapshot;try{v(g(t._source));var b=Hs(m);n.mutableReadLanes|=b&n.pendingLanes}catch(y){v(function(){throw y})}})},[t,a]),Ra(f,r)&&Ra(h,t)&&Ra(d,a)||(e={pending:null,dispatch:null,lastRenderedReducer:xi,lastRenderedState:c},e.dispatch=u=zE.bind(null,Er,e),l.queue=e,l.baseQueue=null,c=u2(n,t,r),l.memoizedState=l.baseState=c),c}function IM(e,t,r){var a=_l();return $M(a,e,t,r)}function Fp(e){var t=qo();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e=t.queue={pending:null,dispatch:null,lastRenderedReducer:xi,lastRenderedState:e},e=e.dispatch=zE.bind(null,Er,e),[t.memoizedState,e]}function Sv(e,t,r,a){return e={tag:e,create:t,destroy:r,deps:a,next:null},t=Er.updateQueue,t===null?(t={lastEffect:null},Er.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(a=r.next,r.next=e,e.next=a,t.lastEffect=e)),e}function c2(e){var t=qo();return e={current:e},t.memoizedState=e}function $v(){return _l().memoizedState}function Sx(e,t,r,a){var n=qo();Er.flags|=e,n.memoizedState=Sv(1|t,r,void 0,a===void 0?null:a)}function FE(e,t,r,a){var n=_l();a=a===void 0?null:a;var i=void 0;if(cn!==null){var s=cn.memoizedState;if(i=s.destroy,a!==null&&PE(a,s.deps)){Sv(t,r,i,a);return}}Er.flags|=e,n.memoizedState=Sv(1|t,r,i,a)}function d2(e,t){return Sx(516,4,e,t)}function Iv(e,t){return FE(516,4,e,t)}function TM(e,t){return FE(4,2,e,t)}function NM(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function AM(e,t,r){return r=r!=null?r.concat([e]):null,FE(4,2,NM.bind(null,t,e),r)}function LE(){}function _M(e,t){var r=_l();t=t===void 0?null:t;var a=r.memoizedState;return a!==null&&t!==null&&PE(t,a[1])?a[0]:(r.memoizedState=[e,t],e)}function MM(e,t){var r=_l();t=t===void 0?null:t;var a=r.memoizedState;return a!==null&&t!==null&&PE(t,a[1])?a[0]:(e=e(),r.memoizedState=[e,t],e)}function RH(e,t){var r=Nc();ol(98>r?98:r,function(){e(!0)}),ol(97<r?97:r,function(){var a=Pa.transition;Pa.transition=1;try{e(!1),t()}finally{Pa.transition=a}})}function zE(e,t,r){var a=xa(),n=Hs(e),i={lane:n,action:r,eagerReducer:null,eagerState:null,next:null},s=t.pending;if(s===null?i.next=i:(i.next=s.next,s.next=i),t.pending=i,s=e.alternate,e===Er||s!==null&&s===Er)Nf=Cv=!0;else{if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,l=s(o,r);if(i.eagerReducer=s,i.eagerState=l,Ra(l,o))return}catch{}finally{}Us(e,n,a)}}var Tv={readContext:La,useCallback:Xn,useContext:Xn,useEffect:Xn,useImperativeHandle:Xn,useLayoutEffect:Xn,useMemo:Xn,useReducer:Xn,useRef:Xn,useState:Xn,useDebugValue:Xn,useDeferredValue:Xn,useTransition:Xn,useMutableSource:Xn,useOpaqueIdentifier:Xn,unstable_isNewReconciler:!1},OH={readContext:La,useCallback:function(e,t){return qo().memoizedState=[e,t===void 0?null:t],e},useContext:La,useEffect:d2,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Sx(4,2,NM.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Sx(4,2,e,t)},useMemo:function(e,t){var r=qo();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var a=qo();return t=r!==void 0?r(t):t,a.memoizedState=a.baseState=t,e=a.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},e=e.dispatch=zE.bind(null,Er,e),[a.memoizedState,e]},useRef:c2,useState:Fp,useDebugValue:LE,useDeferredValue:function(e){var t=Fp(e),r=t[0],a=t[1];return d2(function(){var n=Pa.transition;Pa.transition=1;try{a(e)}finally{Pa.transition=n}},[e]),r},useTransition:function(){var e=Fp(!1),t=e[0];return e=RH.bind(null,e[1]),c2(e),[e,t]},useMutableSource:function(e,t,r){var a=qo();return a.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:r},$M(a,e,t,r)},useOpaqueIdentifier:function(){if(Ci){var e=!1,t=IH(function(){throw e||(e=!0,r("r:"+(rw++).toString(36))),Error(Pe(355))}),r=Fp(t)[1];return(Er.mode&2)===0&&(Er.flags|=516,Sv(5,function(){r("r:"+(rw++).toString(36))},void 0,null)),t}return t="r:"+(rw++).toString(36),Fp(t),t},unstable_isNewReconciler:!1},PH={readContext:La,useCallback:_M,useContext:La,useEffect:Iv,useImperativeHandle:AM,useLayoutEffect:TM,useMemo:MM,useReducer:Pp,useRef:$v,useState:function(){return Pp(xi)},useDebugValue:LE,useDeferredValue:function(e){var t=Pp(xi),r=t[0],a=t[1];return Iv(function(){var n=Pa.transition;Pa.transition=1;try{a(e)}finally{Pa.transition=n}},[e]),r},useTransition:function(){var e=Pp(xi)[0];return[$v().current,e]},useMutableSource:IM,useOpaqueIdentifier:function(){return Pp(xi)[0]},unstable_isNewReconciler:!1},DH={readContext:La,useCallback:_M,useContext:La,useEffect:Iv,useImperativeHandle:AM,useLayoutEffect:TM,useMemo:MM,useReducer:Dp,useRef:$v,useState:function(){return Dp(xi)},useDebugValue:LE,useDeferredValue:function(e){var t=Dp(xi),r=t[0],a=t[1];return Iv(function(){var n=Pa.transition;Pa.transition=1;try{a(e)}finally{Pa.transition=n}},[e]),r},useTransition:function(){var e=Dp(xi)[0];return[$v().current,e]},useMutableSource:IM,useOpaqueIdentifier:function(){return Dp(xi)[0]},unstable_isNewReconciler:!1},FH=Nl.ReactCurrentOwner,Ja=!1;function Kn(e,t,r,a){t.child=e===null?CM(t,null,r,a):kv(t,e.child,r,a)}function p2(e,t,r,a,n){r=r.render;var i=t.ref;return gc(t,n),a=DE(e,t,r,a,i,n),e!==null&&!Ja?(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~n,Ki(e,t,n)):(t.flags|=1,Kn(e,t,a,n),t.child)}function f2(e,t,r,a,n,i){if(e===null){var s=r.type;return typeof s=="function"&&!jE(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=s,RM(e,t,s,a,n,i)):(e=qg(r.type,null,a,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}return s=e.child,(n&i)===0&&(n=s.memoizedProps,r=r.compare,r=r!==null?r:Xf,r(n,a)&&e.ref===t.ref)?Ki(e,t,i):(t.flags|=1,e=eo(s,a),e.ref=t.ref,e.return=t,t.child=e)}function RM(e,t,r,a,n,i){if(e!==null&&Xf(e.memoizedProps,a)&&e.ref===t.ref)if(Ja=!1,(i&n)!==0)(e.flags&16384)!==0&&(Ja=!0);else return t.lanes=e.lanes,Ki(e,t,i);return $x(e,t,r,a,i)}function ow(e,t,r){var a=t.pendingProps,n=a.children,i=e!==null?e.memoizedState:null;if(a.mode==="hidden"||a.mode==="unstable-defer-without-hiding")if((t.mode&4)===0)t.memoizedState={baseLanes:0},eg(t,r);else if((r&1073741824)!==0)t.memoizedState={baseLanes:0},eg(t,i!==null?i.baseLanes:r);else return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},eg(t,e),null;else i!==null?(a=i.baseLanes|r,t.memoizedState=null):a=r,eg(t,a);return Kn(e,t,n,r),t.child}function OM(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=128)}function $x(e,t,r,a,n){var i=na(r)?sl:bn.current;return i=Tc(t,i),gc(t,n),r=DE(e,t,r,a,i,n),e!==null&&!Ja?(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~n,Ki(e,t,n)):(t.flags|=1,Kn(e,t,r,n),t.child)}function h2(e,t,r,a,n){if(na(r)){var i=!0;Wg(t)}else i=!1;if(gc(t,n),t.stateNode===null)e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),kM(t,r,a),kx(t,r,a,n),a=!0;else if(e===null){var s=t.stateNode,o=t.memoizedProps;s.props=o;var l=s.context,u=r.contextType;typeof u=="object"&&u!==null?u=La(u):(u=na(r)?sl:bn.current,u=Tc(t,u));var c=r.getDerivedStateFromProps,d=typeof c=="function"||typeof s.getSnapshotBeforeUpdate=="function";d||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o!==a||l!==u)&&i2(t,s,a,u),$s=!1;var p=t.memoizedState;s.state=p,Zf(t,a,s,n),l=t.memoizedState,o!==a||p!==l||ra.current||$s?(typeof c=="function"&&(xv(t,r,c,a),l=t.memoizedState),(o=$s||a2(t,r,o,a,p,l,u))?(d||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4)):(typeof s.componentDidMount=="function"&&(t.flags|=4),t.memoizedProps=a,t.memoizedState=l),s.props=a,s.state=l,s.context=u,a=o):(typeof s.componentDidMount=="function"&&(t.flags|=4),a=!1)}else{s=t.stateNode,wM(e,t),o=t.memoizedProps,u=t.type===t.elementType?o:Ka(t.type,o),s.props=u,d=t.pendingProps,p=s.context,l=r.contextType,typeof l=="object"&&l!==null?l=La(l):(l=na(r)?sl:bn.current,l=Tc(t,l));var f=r.getDerivedStateFromProps;(c=typeof f=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o!==d||p!==l)&&i2(t,s,a,l),$s=!1,p=t.memoizedState,s.state=p,Zf(t,a,s,n);var h=t.memoizedState;o!==d||p!==h||ra.current||$s?(typeof f=="function"&&(xv(t,r,f,a),h=t.memoizedState),(u=$s||a2(t,r,u,a,p,h,l))?(c||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(a,h,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(a,h,l)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=256)):(typeof s.componentDidUpdate!="function"||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=256),t.memoizedProps=a,t.memoizedState=h),s.props=a,s.state=h,s.context=l,a=u):(typeof s.componentDidUpdate!="function"||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=256),a=!1)}return Ix(e,t,r,a,i,n)}function Ix(e,t,r,a,n,i){OM(e,t);var s=(t.flags&64)!==0;if(!a&&!s)return n&&JT(t,r,!1),Ki(e,t,i);a=t.stateNode,FH.current=t;var o=s&&typeof r.getDerivedStateFromError!="function"?null:a.render();return t.flags|=1,e!==null&&s?(t.child=kv(t,e.child,null,i),t.child=kv(t,null,o,i)):Kn(e,t,o,i),t.memoizedState=a.state,n&&JT(t,r,!0),t.child}function m2(e){var t=e.stateNode;t.pendingContext?QT(e,t.pendingContext,t.pendingContext!==t.context):t.context&&QT(e,t.context,!1),Ex(e,t.containerInfo)}var Jm={dehydrated:null,retryLane:0};function g2(e,t,r){var a=t.pendingProps,n=pr.current,i=!1,s;return(s=(t.flags&64)!==0)||(s=e!==null&&e.memoizedState===null?!1:(n&2)!==0),s?(i=!0,t.flags&=-65):e!==null&&e.memoizedState===null||a.fallback===void 0||a.unstable_avoidThisFallback===!0||(n|=1),fr(pr,n&1),e===null?(a.fallback!==void 0&&Cx(t),e=a.children,n=a.fallback,i?(e=v2(t,e,n,r),t.child.memoizedState={baseLanes:r},t.memoizedState=Jm,e):typeof a.unstable_expectedLoadTime=="number"?(e=v2(t,e,n,r),t.child.memoizedState={baseLanes:r},t.memoizedState=Jm,t.lanes=33554432,e):(r=GE({mode:"visible",children:e},t.mode,r,null),r.return=t,t.child=r)):e.memoizedState!==null?i?(a=y2(e,t,a.children,a.fallback,r),i=t.child,n=e.child.memoizedState,i.memoizedState=n===null?{baseLanes:r}:{baseLanes:n.baseLanes|r},i.childLanes=e.childLanes&~r,t.memoizedState=Jm,a):(r=b2(e,t,a.children,r),t.memoizedState=null,r):i?(a=y2(e,t,a.children,a.fallback,r),i=t.child,n=e.child.memoizedState,i.memoizedState=n===null?{baseLanes:r}:{baseLanes:n.baseLanes|r},i.childLanes=e.childLanes&~r,t.memoizedState=Jm,a):(r=b2(e,t,a.children,r),t.memoizedState=null,r)}function v2(e,t,r,a){var n=e.mode,i=e.child;return t={mode:"hidden",children:t},(n&2)===0&&i!==null?(i.childLanes=0,i.pendingProps=t):i=GE(t,n,0,null),r=wc(r,n,a,null),i.return=e,r.return=e,i.sibling=r,e.child=i,r}function b2(e,t,r,a){var n=e.child;return e=n.sibling,r=eo(n,{mode:"visible",children:r}),(t.mode&2)===0&&(r.lanes=a),r.return=t,r.sibling=null,e!==null&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=r}function y2(e,t,r,a,n){var i=t.mode,s=e.child;e=s.sibling;var o={mode:"hidden",children:r};return(i&2)===0&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=o,s=r.lastEffect,s!==null?(t.firstEffect=r.firstEffect,t.lastEffect=s,s.nextEffect=null):t.firstEffect=t.lastEffect=null):r=eo(s,o),e!==null?a=eo(e,a):(a=wc(a,i,n,null),a.flags|=2),a.return=t,r.return=t,r.sibling=a,t.child=r,a}function w2(e,t){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),yM(e.return,t)}function lw(e,t,r,a,n,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:r,tailMode:n,lastEffect:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=a,s.tail=r,s.tailMode=n,s.lastEffect=i)}function x2(e,t,r){var a=t.pendingProps,n=a.revealOrder,i=a.tail;if(Kn(e,t,a.children,r),a=pr.current,(a&2)!==0)a=a&1|2,t.flags|=64;else{if(e!==null&&(e.flags&64)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&w2(e,r);else if(e.tag===19)w2(e,r);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(fr(pr,a),(t.mode&2)===0)t.memoizedState=null;else switch(n){case"forwards":for(r=t.child,n=null;r!==null;)e=r.alternate,e!==null&&Ev(e)===null&&(n=r),r=r.sibling;r=n,r===null?(n=t.child,t.child=null):(n=r.sibling,r.sibling=null),lw(t,!1,n,r,i,t.lastEffect);break;case"backwards":for(r=null,n=t.child,t.child=null;n!==null;){if(e=n.alternate,e!==null&&Ev(e)===null){t.child=n;break}e=n.sibling,n.sibling=r,r=n,n=e}lw(t,!0,r,null,i,t.lastEffect);break;case"together":lw(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function Ki(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Ch|=t.lanes,(r&t.childLanes)!==0){if(e!==null&&t.child!==e.child)throw Error(Pe(153));if(t.child!==null){for(e=t.child,r=eo(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=eo(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}return null}var PM,Tx,DM,FM;PM=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Tx=function(){};DM=function(e,t,r,a){var n=e.memoizedProps;if(n!==a){e=t.stateNode,Go(Ei.current);var i=null;switch(r){case"input":n=tx(e,n),a=tx(e,a),i=[];break;case"option":n=ax(e,n),a=ax(e,a),i=[];break;case"select":n=tr({},n,{value:void 0}),a=tr({},a,{value:void 0}),i=[];break;case"textarea":n=ix(e,n),a=ix(e,a),i=[];break;default:typeof n.onClick!="function"&&typeof a.onClick=="function"&&(e.onclick=mv)}lx(r,a);var s;r=null;for(u in n)if(!a.hasOwnProperty(u)&&n.hasOwnProperty(u)&&n[u]!=null)if(u==="style"){var o=n[u];for(s in o)o.hasOwnProperty(s)&&(r||(r={}),r[s]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Vf.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in a){var l=a[u];if(o=n!=null?n[u]:void 0,a.hasOwnProperty(u)&&l!==o&&(l!=null||o!=null))if(u==="style")if(o){for(s in o)!o.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(r||(r={}),r[s]="");for(s in l)l.hasOwnProperty(s)&&o[s]!==l[s]&&(r||(r={}),r[s]=l[s])}else r||(i||(i=[]),i.push(u,r)),r=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(i=i||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Vf.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Xt("scroll",e),i||o===l||(i=[])):typeof l=="object"&&l!==null&&l.$$typeof===pE?l.toString():(i=i||[]).push(u,l))}r&&(i=i||[]).push("style",r);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};FM=function(e,t,r,a){r!==a&&(t.flags|=4)};function Lp(e,t){if(!Ci)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function LH(e,t,r){var a=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return na(t.type)&&vv(),null;case 3:return Ac(),Yt(ra),Yt(bn),OE(),a=t.stateNode,a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Qm(t)?t.flags|=4:a.hydrate||(t.flags|=256)),Tx(t),null;case 5:RE(t);var n=Go(Jf.current);if(r=t.type,e!==null&&t.stateNode!=null)DM(e,t,r,a,n),e.ref!==t.ref&&(t.flags|=128);else{if(!a){if(t.stateNode===null)throw Error(Pe(166));return null}if(e=Go(Ei.current),Qm(t)){a=t.stateNode,r=t.type;var i=t.memoizedProps;switch(a[_s]=t,a[gv]=i,r){case"dialog":Xt("cancel",a),Xt("close",a);break;case"iframe":case"object":case"embed":Xt("load",a);break;case"video":case"audio":for(e=0;e<nf.length;e++)Xt(nf[e],a);break;case"source":Xt("error",a);break;case"img":case"image":case"link":Xt("error",a),Xt("load",a);break;case"details":Xt("toggle",a);break;case"input":xT(a,i),Xt("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!i.multiple},Xt("invalid",a);break;case"textarea":ET(a,i),Xt("invalid",a)}lx(r,i),e=null;for(var s in i)i.hasOwnProperty(s)&&(n=i[s],s==="children"?typeof n=="string"?a.textContent!==n&&(e=["children",n]):typeof n=="number"&&a.textContent!==""+n&&(e=["children",""+n]):Vf.hasOwnProperty(s)&&n!=null&&s==="onScroll"&&Xt("scroll",a));switch(r){case"input":Gm(a),kT(a,i,!0);break;case"textarea":Gm(a),CT(a);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(a.onclick=mv)}a=e,t.updateQueue=a,a!==null&&(t.flags|=4)}else{switch(s=n.nodeType===9?n:n.ownerDocument,e===sx.html&&(e=A_(r)),e===sx.html?r==="script"?(e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof a.is=="string"?e=s.createElement(r,{is:a.is}):(e=s.createElement(r),r==="select"&&(s=e,a.multiple?s.multiple=!0:a.size&&(s.size=a.size))):e=s.createElementNS(e,r),e[_s]=t,e[gv]=a,PM(e,t,!1,!1),t.stateNode=e,s=ux(r,a),r){case"dialog":Xt("cancel",e),Xt("close",e),n=a;break;case"iframe":case"object":case"embed":Xt("load",e),n=a;break;case"video":case"audio":for(n=0;n<nf.length;n++)Xt(nf[n],e);n=a;break;case"source":Xt("error",e),n=a;break;case"img":case"image":case"link":Xt("error",e),Xt("load",e),n=a;break;case"details":Xt("toggle",e),n=a;break;case"input":xT(e,a),n=tx(e,a),Xt("invalid",e);break;case"option":n=ax(e,a);break;case"select":e._wrapperState={wasMultiple:!!a.multiple},n=tr({},a,{value:void 0}),Xt("invalid",e);break;case"textarea":ET(e,a),n=ix(e,a),Xt("invalid",e);break;default:n=a}lx(r,n);var o=n;for(i in o)if(o.hasOwnProperty(i)){var l=o[i];i==="style"?R_(e,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&__(e,l)):i==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&Wf(e,l):typeof l=="number"&&Wf(e,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Vf.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Xt("scroll",e):l!=null&&sE(e,i,l,s))}switch(r){case"input":Gm(e),kT(e,a,!1);break;case"textarea":Gm(e),CT(e);break;case"option":a.value!=null&&e.setAttribute("value",""+Ks(a.value));break;case"select":e.multiple=!!a.multiple,i=a.value,i!=null?pc(e,!!a.multiple,i,!1):a.defaultValue!=null&&pc(e,!!a.multiple,a.defaultValue,!0);break;default:typeof n.onClick=="function"&&(e.onclick=mv)}cM(r,a)&&(t.flags|=4)}t.ref!==null&&(t.flags|=128)}return null;case 6:if(e&&t.stateNode!=null)FM(e,t,e.memoizedProps,a);else{if(typeof a!="string"&&t.stateNode===null)throw Error(Pe(166));r=Go(Jf.current),Go(Ei.current),Qm(t)?(a=t.stateNode,r=t.memoizedProps,a[_s]=t,a.nodeValue!==r&&(t.flags|=4)):(a=(r.nodeType===9?r:r.ownerDocument).createTextNode(a),a[_s]=t,t.stateNode=a)}return null;case 13:return Yt(pr),a=t.memoizedState,(t.flags&64)!==0?(t.lanes=r,t):(a=a!==null,r=!1,e===null?t.memoizedProps.fallback!==void 0&&Qm(t):r=e.memoizedState!==null,a&&!r&&(t.mode&2)!==0&&(e===null&&t.memoizedProps.unstable_avoidThisFallback!==!0||(pr.current&1)!==0?en===0&&(en=3):((en===0||en===3)&&(en=4),On===null||(Ch&134217727)===0&&(ed&134217727)===0||bc(On,vn))),(a||r)&&(t.flags|=4),null);case 4:return Ac(),Tx(t),e===null&&oM(t.stateNode.containerInfo),null;case 10:return _E(t),null;case 17:return na(t.type)&&vv(),null;case 19:if(Yt(pr),a=t.memoizedState,a===null)return null;if(i=(t.flags&64)!==0,s=a.rendering,s===null)if(i)Lp(a,!1);else{if(en!==0||e!==null&&(e.flags&64)!==0)for(e=t.child;e!==null;){if(s=Ev(e),s!==null){for(t.flags|=64,Lp(a,!1),i=s.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),a.lastEffect===null&&(t.firstEffect=null),t.lastEffect=a.lastEffect,a=r,r=t.child;r!==null;)i=r,e=a,i.flags&=2,i.nextEffect=null,i.firstEffect=null,i.lastEffect=null,s=i.alternate,s===null?(i.childLanes=0,i.lanes=e,i.child=null,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=s.childLanes,i.lanes=s.lanes,i.child=s.child,i.memoizedProps=s.memoizedProps,i.memoizedState=s.memoizedState,i.updateQueue=s.updateQueue,i.type=s.type,e=s.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return fr(pr,pr.current&1|2),t.child}e=e.sibling}a.tail!==null&&gn()>Ox&&(t.flags|=64,i=!0,Lp(a,!1),t.lanes=33554432)}else{if(!i)if(e=Ev(s),e!==null){if(t.flags|=64,i=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Lp(a,!0),a.tail===null&&a.tailMode==="hidden"&&!s.alternate&&!Ci)return t=t.lastEffect=a.lastEffect,t!==null&&(t.nextEffect=null),null}else 2*gn()-a.renderingStartTime>Ox&&r!==1073741824&&(t.flags|=64,i=!0,Lp(a,!1),t.lanes=33554432);a.isBackwards?(s.sibling=t.child,t.child=s):(r=a.last,r!==null?r.sibling=s:t.child=s,a.last=s)}return a.tail!==null?(r=a.tail,a.rendering=r,a.tail=r.sibling,a.lastEffect=t.lastEffect,a.renderingStartTime=gn(),r.sibling=null,t=pr.current,fr(pr,i?t&1|2:t&1),r):null;case 23:case 24:return UE(),e!==null&&e.memoizedState!==null!=(t.memoizedState!==null)&&a.mode!=="unstable-defer-without-hiding"&&(t.flags|=4),null}throw Error(Pe(156,t.tag))}function zH(e){switch(e.tag){case 1:na(e.type)&&vv();var t=e.flags;return t&4096?(e.flags=t&-4097|64,e):null;case 3:if(Ac(),Yt(ra),Yt(bn),OE(),t=e.flags,(t&64)!==0)throw Error(Pe(285));return e.flags=t&-4097|64,e;case 5:return RE(e),null;case 13:return Yt(pr),t=e.flags,t&4096?(e.flags=t&-4097|64,e):null;case 19:return Yt(pr),null;case 4:return Ac(),null;case 10:return _E(e),null;case 23:case 24:return UE(),null;default:return null}}function BE(e,t){try{var r="",a=t;do r+=yW(a),a=a.return;while(a);var n=r}catch(i){n=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:n}}function Nx(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var BH=typeof WeakMap=="function"?WeakMap:Map;function LM(e,t,r){r=Vs(-1,r),r.tag=3,r.payload={element:null};var a=t.value;return r.callback=function(){Av||(Av=!0,Px=a),Nx(e,t)},r}function zM(e,t,r){r=Vs(-1,r),r.tag=3;var a=e.type.getDerivedStateFromError;if(typeof a=="function"){var n=t.value;r.payload=function(){return Nx(e,t),a(n)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){typeof a!="function"&&(ki===null?ki=new Set([this]):ki.add(this),Nx(e,t));var s=t.stack;this.componentDidCatch(t.value,{componentStack:s!==null?s:""})}),r}var VH=typeof WeakSet=="function"?WeakSet:Set;function k2(e){var t=e.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){js(e,r)}else t.current=null}function WH(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(t.flags&256&&e!==null){var r=e.memoizedProps,a=e.memoizedState;e=t.stateNode,t=e.getSnapshotBeforeUpdate(t.elementType===t.type?r:Ka(t.type,r),a),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:t.flags&256&&IE(t.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return}throw Error(Pe(163))}function HH(e,t,r){switch(r.tag){case 0:case 11:case 15:case 22:if(t=r.updateQueue,t=t!==null?t.lastEffect:null,t!==null){e=t=t.next;do{if((e.tag&3)===3){var a=e.create;e.destroy=a()}e=e.next}while(e!==t)}if(t=r.updateQueue,t=t!==null?t.lastEffect:null,t!==null){e=t=t.next;do{var n=e;a=n.next,n=n.tag,(n&4)!==0&&(n&1)!==0&&(XM(r,e),ZH(r,e)),e=a}while(e!==t)}return;case 1:e=r.stateNode,r.flags&4&&(t===null?e.componentDidMount():(a=r.elementType===r.type?t.memoizedProps:Ka(r.type,t.memoizedProps),e.componentDidUpdate(a,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),t=r.updateQueue,t!==null&&n2(r,t,e);return;case 3:if(t=r.updateQueue,t!==null){if(e=null,r.child!==null)switch(r.child.tag){case 5:e=r.child.stateNode;break;case 1:e=r.child.stateNode}n2(r,t,e)}return;case 5:e=r.stateNode,t===null&&r.flags&4&&cM(r.type,r.memoizedProps)&&e.focus();return;case 6:return;case 4:return;case 12:return;case 13:r.memoizedState===null&&(r=r.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&H_(r))));return;case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(Pe(163))}function E2(e,t){for(var r=e;;){if(r.tag===5){var a=r.stateNode;if(t)a=a.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none";else{a=r.stateNode;var n=r.memoizedProps.style;n=n!=null&&n.hasOwnProperty("display")?n.display:null,a.style.display=M_("display",n)}}else if(r.tag===6)r.stateNode.nodeValue=t?"":r.memoizedProps;else if((r.tag!==23&&r.tag!==24||r.memoizedState===null||r===e)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}}function C2(e,t){if(Zo&&typeof Zo.onCommitFiberUnmount=="function")try{Zo.onCommitFiberUnmount(TE,t)}catch{}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(e=t.updateQueue,e!==null&&(e=e.lastEffect,e!==null)){var r=e=e.next;do{var a=r,n=a.destroy;if(a=a.tag,n!==void 0)if((a&4)!==0)XM(t,r);else{a=t;try{n()}catch(i){js(a,i)}}r=r.next}while(r!==e)}break;case 1:if(k2(t),e=t.stateNode,typeof e.componentWillUnmount=="function")try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(i){js(t,i)}break;case 5:k2(t);break;case 4:BM(e,t)}}function S2(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function $2(e){return e.tag===5||e.tag===3||e.tag===4}function I2(e){e:{for(var t=e.return;t!==null;){if($2(t))break e;t=t.return}throw Error(Pe(160))}var r=t;switch(t=r.stateNode,r.tag){case 5:var a=!1;break;case 3:t=t.containerInfo,a=!0;break;case 4:t=t.containerInfo,a=!0;break;default:throw Error(Pe(161))}r.flags&16&&(Wf(t,""),r.flags&=-17);e:t:for(r=e;;){for(;r.sibling===null;){if(r.return===null||$2(r.return)){r=null;break e}r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue t;r.child.return=r,r=r.child}if(!(r.flags&2)){r=r.stateNode;break e}}a?Ax(e,r,t):_x(e,r,t)}function Ax(e,t,r){var a=e.tag,n=a===5||a===6;if(n)e=n?e.stateNode:e.stateNode.instance,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=mv));else if(a!==4&&(e=e.child,e!==null))for(Ax(e,t,r),e=e.sibling;e!==null;)Ax(e,t,r),e=e.sibling}function _x(e,t,r){var a=e.tag,n=a===5||a===6;if(n)e=n?e.stateNode:e.stateNode.instance,t?r.insertBefore(e,t):r.appendChild(e);else if(a!==4&&(e=e.child,e!==null))for(_x(e,t,r),e=e.sibling;e!==null;)_x(e,t,r),e=e.sibling}function BM(e,t){for(var r=t,a=!1,n,i;;){if(!a){a=r.return;e:for(;;){if(a===null)throw Error(Pe(160));switch(n=a.stateNode,a.tag){case 5:i=!1;break e;case 3:n=n.containerInfo,i=!0;break e;case 4:n=n.containerInfo,i=!0;break e}a=a.return}a=!0}if(r.tag===5||r.tag===6){e:for(var s=e,o=r,l=o;;)if(C2(s,l),l.child!==null&&l.tag!==4)l.child.return=l,l=l.child;else{if(l===o)break e;for(;l.sibling===null;){if(l.return===null||l.return===o)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}i?(s=n,o=r.stateNode,s.nodeType===8?s.parentNode.removeChild(o):s.removeChild(o)):n.removeChild(r.stateNode)}else if(r.tag===4){if(r.child!==null){n=r.stateNode.containerInfo,i=!0,r.child.return=r,r=r.child;continue}}else if(C2(e,r),r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return,r.tag===4&&(a=!1)}r.sibling.return=r.return,r=r.sibling}}function uw(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do(a.tag&3)===3&&(e=a.destroy,a.destroy=void 0,e!==void 0&&e()),a=a.next;while(a!==r)}return;case 1:return;case 5:if(r=t.stateNode,r!=null){a=t.memoizedProps;var n=e!==null?e.memoizedProps:a;e=t.type;var i=t.updateQueue;if(t.updateQueue=null,i!==null){for(r[gv]=a,e==="input"&&a.type==="radio"&&a.name!=null&&T_(r,a),ux(e,n),t=ux(e,a),n=0;n<i.length;n+=2){var s=i[n],o=i[n+1];s==="style"?R_(r,o):s==="dangerouslySetInnerHTML"?__(r,o):s==="children"?Wf(r,o):sE(r,s,o,t)}switch(e){case"input":rx(r,a);break;case"textarea":N_(r,a);break;case"select":e=r._wrapperState.wasMultiple,r._wrapperState.wasMultiple=!!a.multiple,i=a.value,i!=null?pc(r,!!a.multiple,i,!1):e!==!!a.multiple&&(a.defaultValue!=null?pc(r,!!a.multiple,a.defaultValue,!0):pc(r,!!a.multiple,a.multiple?[]:"",!1))}}}return;case 6:if(t.stateNode===null)throw Error(Pe(162));t.stateNode.nodeValue=t.memoizedProps;return;case 3:r=t.stateNode,r.hydrate&&(r.hydrate=!1,H_(r.containerInfo));return;case 12:return;case 13:t.memoizedState!==null&&(HE=gn(),E2(t.child,!0)),T2(t);return;case 19:T2(t);return;case 17:return;case 23:case 24:E2(t,t.memoizedState!==null);return}throw Error(Pe(163))}function T2(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new VH),t.forEach(function(a){var n=eU.bind(null,e,a);r.has(a)||(r.add(a),a.then(n,n))})}}function UH(e,t){return e!==null&&(e=e.memoizedState,e===null||e.dehydrated!==null)?(t=t.memoizedState,t!==null&&t.dehydrated===null):!1}var jH=Math.ceil,Nv=Nl.ReactCurrentDispatcher,VE=Nl.ReactCurrentOwner,ot=0,On=null,Lr=null,vn=0,ll=0,Mx=ho(0),en=0,Rb=null,Jc=0,Ch=0,ed=0,WE=0,Rx=null,HE=0,Ox=1/0;function td(){Ox=gn()+500}var Ye=null,Av=!1,Px=null,ki=null,Js=!1,Af=null,af=90,Dx=[],Fx=[],Qi=null,_f=0,Lx=null,Ug=-1,Gi=0,jg=0,Mf=null,Gg=!1;function xa(){return(ot&48)!==0?gn():Ug!==-1?Ug:Ug=gn()}function Hs(e){if(e=e.mode,(e&2)===0)return 1;if((e&4)===0)return Nc()===99?1:2;if(Gi===0&&(Gi=Jc),MH.transition!==0){jg!==0&&(jg=Rx!==null?Rx.pendingLanes:0),e=Gi;var t=4186112&~jg;return t&=-t,t===0&&(e=4186112&~e,t=e&-e,t===0&&(t=8192)),t}return e=Nc(),(ot&4)!==0&&e===98?e=fv(12,Gi):(e=PW(e),e=fv(e,Gi)),e}function Us(e,t,r){if(50<_f)throw _f=0,Lx=null,Error(Pe(185));if(e=Ob(e,t),e===null)return null;$b(e,t,r),e===On&&(ed|=t,en===4&&bc(e,vn));var a=Nc();t===1?(ot&8)!==0&&(ot&48)===0?zx(e):(za(e,r),ot===0&&(td(),Ai())):((ot&4)===0||a!==98&&a!==99||(Qi===null?Qi=new Set([e]):Qi.add(e)),za(e,r)),Rx=e}function Ob(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}function za(e,t){for(var r=e.callbackNode,a=e.suspendedLanes,n=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-Zs(s),l=1<<o,u=i[o];if(u===-1){if((l&a)===0||(l&n)!==0){u=t,Xu(l);var c=Ut;i[o]=10<=c?u+250:6<=c?u+5e3:-1}}else u<=t&&(e.expiredLanes|=l);s&=~l}if(a=Gf(e,e===On?vn:0),t=Ut,a===0)r!==null&&(r!==aw&&wx(r),e.callbackNode=null,e.callbackPriority=0);else{if(r!==null){if(e.callbackPriority===t)return;r!==aw&&wx(r)}t===15?(r=zx.bind(null,e),Wi===null?(Wi=[r],Hg=NE(_b,bM)):Wi.push(r),r=aw):t===14?r=Kf(99,zx.bind(null,e)):(r=DW(t),r=Kf(r,VM.bind(null,e))),e.callbackPriority=t,e.callbackNode=r}}function VM(e){if(Ug=-1,jg=Gi=0,(ot&48)!==0)throw Error(Pe(327));var t=e.callbackNode;if(mo()&&e.callbackNode!==t)return null;var r=Gf(e,e===On?vn:0);if(r===0)return null;var a=r,n=ot;ot|=16;var i=jM();(On!==e||vn!==a)&&(td(),yc(e,a));do try{XH();break}catch(o){UM(e,o)}while(1);if(AE(),Nv.current=i,ot=n,Lr!==null?a=0:(On=null,vn=0,a=en),(Jc&ed)!==0)yc(e,0);else if(a!==0){if(a===2&&(ot|=64,e.hydrate&&(e.hydrate=!1,IE(e.containerInfo)),r=K_(e),r!==0&&(a=sf(e,r))),a===1)throw t=Rb,yc(e,0),bc(e,r),za(e,gn()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=r,a){case 0:case 1:throw Error(Pe(345));case 2:Do(e);break;case 3:if(bc(e,r),(r&62914560)===r&&(a=HE+500-gn(),10<a)){if(Gf(e,0)!==0)break;if(n=e.suspendedLanes,(n&r)!==r){xa(),e.pingedLanes|=e.suspendedLanes&n;break}e.timeoutHandle=YT(Do.bind(null,e),a);break}Do(e);break;case 4:if(bc(e,r),(r&4186112)===r)break;for(a=e.eventTimes,n=-1;0<r;){var s=31-Zs(r);i=1<<s,s=a[s],s>n&&(n=s),r&=~i}if(r=n,r=gn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*jH(r/1960))-r,10<r){e.timeoutHandle=YT(Do.bind(null,e),r);break}Do(e);break;case 5:Do(e);break;default:throw Error(Pe(329))}}return za(e,gn()),e.callbackNode===t?VM.bind(null,e):null}function bc(e,t){for(t&=~WE,t&=~ed,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Zs(t),a=1<<r;e[r]=-1,t&=~a}}function zx(e){if((ot&48)!==0)throw Error(Pe(327));if(mo(),e===On&&(e.expiredLanes&vn)!==0){var t=vn,r=sf(e,t);(Jc&ed)!==0&&(t=Gf(e,t),r=sf(e,t))}else t=Gf(e,0),r=sf(e,t);if(e.tag!==0&&r===2&&(ot|=64,e.hydrate&&(e.hydrate=!1,IE(e.containerInfo)),t=K_(e),t!==0&&(r=sf(e,t))),r===1)throw r=Rb,yc(e,0),bc(e,t),za(e,gn()),r;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Do(e),za(e,gn()),null}function GH(){if(Qi!==null){var e=Qi;Qi=null,e.forEach(function(t){t.expiredLanes|=24&t.pendingLanes,za(t,gn())})}Ai()}function WM(e,t){var r=ot;ot|=1;try{return e(t)}finally{ot=r,ot===0&&(td(),Ai())}}function HM(e,t){var r=ot;ot&=-2,ot|=8;try{return e(t)}finally{ot=r,ot===0&&(td(),Ai())}}function eg(e,t){fr(Mx,ll),ll|=t,Jc|=t}function UE(){ll=Mx.current,Yt(Mx)}function yc(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,$H(r)),Lr!==null)for(r=Lr.return;r!==null;){var a=r;switch(a.tag){case 1:a=a.type.childContextTypes,a!=null&&vv();break;case 3:Ac(),Yt(ra),Yt(bn),OE();break;case 5:RE(a);break;case 4:Ac();break;case 13:Yt(pr);break;case 19:Yt(pr);break;case 10:_E(a);break;case 23:case 24:UE()}r=r.return}On=e,Lr=eo(e.current,null),vn=ll=Jc=t,en=0,Rb=null,WE=ed=Ch=0}function UM(e,t){do{var r=Lr;try{if(AE(),Tf.current=Tv,Cv){for(var a=Er.memoizedState;a!==null;){var n=a.queue;n!==null&&(n.pending=null),a=a.next}Cv=!1}if(eh=0,Jr=cn=Er=null,Nf=!1,VE.current=null,r===null||r.return===null){en=1,Rb=t,Lr=null;break}e:{var i=e,s=r.return,o=r,l=t;if(t=vn,o.flags|=2048,o.firstEffect=o.lastEffect=null,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l;if((o.mode&2)===0){var c=o.alternate;c?(o.updateQueue=c.updateQueue,o.memoizedState=c.memoizedState,o.lanes=c.lanes):(o.updateQueue=null,o.memoizedState=null)}var d=(pr.current&1)!==0,p=s;do{var f;if(f=p.tag===13){var h=p.memoizedState;if(h!==null)f=h.dehydrated!==null;else{var m=p.memoizedProps;f=m.fallback===void 0?!1:m.unstable_avoidThisFallback!==!0?!0:!d}}if(f){var g=p.updateQueue;if(g===null){var v=new Set;v.add(u),p.updateQueue=v}else g.add(u);if((p.mode&2)===0){if(p.flags|=64,o.flags|=16384,o.flags&=-2981,o.tag===1)if(o.alternate===null)o.tag=17;else{var b=Vs(-1,1);b.tag=2,Ws(o,b)}o.lanes|=1;break e}l=void 0,o=t;var y=i.pingCache;if(y===null?(y=i.pingCache=new BH,l=new Set,y.set(u,l)):(l=y.get(u),l===void 0&&(l=new Set,y.set(u,l))),!l.has(o)){l.add(o);var w=JH.bind(null,i,u,o);u.then(w,w)}p.flags|=4096,p.lanes=t;break e}p=p.return}while(p!==null);l=Error((dc(o.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`)}en!==5&&(en=2),l=BE(l,o),p=s;do{switch(p.tag){case 3:i=l,p.flags|=4096,t&=-t,p.lanes|=t;var x=LM(p,i,t);r2(p,x);break e;case 1:i=l;var k=p.type,C=p.stateNode;if((p.flags&64)===0&&(typeof k.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(ki===null||!ki.has(C)))){p.flags|=4096,t&=-t,p.lanes|=t;var E=zM(p,i,t);r2(p,E);break e}}p=p.return}while(p!==null)}qM(r)}catch($){t=$,Lr===r&&r!==null&&(Lr=r=r.return);continue}break}while(1)}function jM(){var e=Nv.current;return Nv.current=Tv,e===null?Tv:e}function sf(e,t){var r=ot;ot|=16;var a=jM();On===e&&vn===t||yc(e,t);do try{qH();break}catch(n){UM(e,n)}while(1);if(AE(),ot=r,Nv.current=a,Lr!==null)throw Error(Pe(261));return On=null,vn=0,en}function qH(){for(;Lr!==null;)GM(Lr)}function XH(){for(;Lr!==null&&!NH();)GM(Lr)}function GM(e){var t=YM(e.alternate,e,ll);e.memoizedProps=e.pendingProps,t===null?qM(e):Lr=t,VE.current=null}function qM(e){var t=e;do{var r=t.alternate;if(e=t.return,(t.flags&2048)===0){if(r=LH(r,t,ll),r!==null){Lr=r;return}if(r=t,r.tag!==24&&r.tag!==23||r.memoizedState===null||(ll&1073741824)!==0||(r.mode&4)===0){for(var a=0,n=r.child;n!==null;)a|=n.lanes|n.childLanes,n=n.sibling;r.childLanes=a}e!==null&&(e.flags&2048)===0&&(e.firstEffect===null&&(e.firstEffect=t.firstEffect),t.lastEffect!==null&&(e.lastEffect!==null&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(e.lastEffect!==null?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(r=zH(t),r!==null){r.flags&=2047,Lr=r;return}e!==null&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(t=t.sibling,t!==null){Lr=t;return}Lr=t=e}while(t!==null);en===0&&(en=5)}function Do(e){var t=Nc();return ol(99,YH.bind(null,e,t)),null}function YH(e,t){do mo();while(Af!==null);if((ot&48)!==0)throw Error(Pe(327));var r=e.finishedWork;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(Pe(177));e.callbackNode=null;var a=r.lanes|r.childLanes,n=a,i=e.pendingLanes&~n;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=n,e.mutableReadLanes&=n,e.entangledLanes&=n,n=e.entanglements;for(var s=e.eventTimes,o=e.expirationTimes;0<i;){var l=31-Zs(i),u=1<<l;n[l]=0,s[l]=-1,o[l]=-1,i&=~u}if(Qi!==null&&(a&24)===0&&Qi.has(e)&&Qi.delete(e),e===On&&(Lr=On=null,vn=0),1<r.flags?r.lastEffect!==null?(r.lastEffect.nextEffect=r,a=r.firstEffect):a=r:a=r.firstEffect,a!==null){if(n=ot,ot|=32,VE.current=null,ew=zg,s=WT(),mx(s)){if("selectionStart"in s)o={start:s.selectionStart,end:s.selectionEnd};else e:if(o=(o=s.ownerDocument)&&o.defaultView||window,(u=o.getSelection&&o.getSelection())&&u.rangeCount!==0){o=u.anchorNode,i=u.anchorOffset,l=u.focusNode,u=u.focusOffset;try{o.nodeType,l.nodeType}catch{o=null;break e}var c=0,d=-1,p=-1,f=0,h=0,m=s,g=null;t:for(;;){for(var v;m!==o||i!==0&&m.nodeType!==3||(d=c+i),m!==l||u!==0&&m.nodeType!==3||(p=c+u),m.nodeType===3&&(c+=m.nodeValue.length),(v=m.firstChild)!==null;)g=m,m=v;for(;;){if(m===s)break t;if(g===o&&++f===i&&(d=c),g===l&&++h===u&&(p=c),(v=m.nextSibling)!==null)break;m=g,g=m.parentNode}m=v}o=d===-1||p===-1?null:{start:d,end:p}}else o=null;o=o||{start:0,end:0}}else o=null;tw={focusedElem:s,selectionRange:o},zg=!1,Mf=null,Gg=!1,Ye=a;do try{KH()}catch($){if(Ye===null)throw Error(Pe(330));js(Ye,$),Ye=Ye.nextEffect}while(Ye!==null);Mf=null,Ye=a;do try{for(s=e;Ye!==null;){var b=Ye.flags;if(b&16&&Wf(Ye.stateNode,""),b&128){var y=Ye.alternate;if(y!==null){var w=y.ref;w!==null&&(typeof w=="function"?w(null):w.current=null)}}switch(b&1038){case 2:I2(Ye),Ye.flags&=-3;break;case 6:I2(Ye),Ye.flags&=-3,uw(Ye.alternate,Ye);break;case 1024:Ye.flags&=-1025;break;case 1028:Ye.flags&=-1025,uw(Ye.alternate,Ye);break;case 4:uw(Ye.alternate,Ye);break;case 8:o=Ye,BM(s,o);var x=o.alternate;S2(o),x!==null&&S2(x)}Ye=Ye.nextEffect}}catch($){if(Ye===null)throw Error(Pe(330));js(Ye,$),Ye=Ye.nextEffect}while(Ye!==null);if(w=tw,y=WT(),b=w.focusedElem,s=w.selectionRange,y!==b&&b&&b.ownerDocument&&aM(b.ownerDocument.documentElement,b)){for(s!==null&&mx(b)&&(y=s.start,w=s.end,w===void 0&&(w=y),"selectionStart"in b?(b.selectionStart=y,b.selectionEnd=Math.min(w,b.value.length)):(w=(y=b.ownerDocument||document)&&y.defaultView||window,w.getSelection&&(w=w.getSelection(),o=b.textContent.length,x=Math.min(s.start,o),s=s.end===void 0?x:Math.min(s.end,o),!w.extend&&x>s&&(o=s,s=x,x=o),o=VT(b,x),i=VT(b,s),o&&i&&(w.rangeCount!==1||w.anchorNode!==o.node||w.anchorOffset!==o.offset||w.focusNode!==i.node||w.focusOffset!==i.offset)&&(y=y.createRange(),y.setStart(o.node,o.offset),w.removeAllRanges(),x>s?(w.addRange(y),w.extend(i.node,i.offset)):(y.setEnd(i.node,i.offset),w.addRange(y)))))),y=[],w=b;w=w.parentNode;)w.nodeType===1&&y.push({element:w,left:w.scrollLeft,top:w.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<y.length;b++)w=y[b],w.element.scrollLeft=w.left,w.element.scrollTop=w.top}zg=!!ew,tw=ew=null,e.current=r,Ye=a;do try{for(b=e;Ye!==null;){var k=Ye.flags;if(k&36&&HH(b,Ye.alternate,Ye),k&128){y=void 0;var C=Ye.ref;if(C!==null){var E=Ye.stateNode;switch(Ye.tag){case 5:y=E;break;default:y=E}typeof C=="function"?C(y):C.current=y}}Ye=Ye.nextEffect}}catch($){if(Ye===null)throw Error(Pe(330));js(Ye,$),Ye=Ye.nextEffect}while(Ye!==null);Ye=null,_H(),ot=n}else e.current=r;if(Js)Js=!1,Af=e,af=t;else for(Ye=a;Ye!==null;)t=Ye.nextEffect,Ye.nextEffect=null,Ye.flags&8&&(k=Ye,k.sibling=null,k.stateNode=null),Ye=t;if(a=e.pendingLanes,a===0&&(ki=null),a===1?e===Lx?_f++:(_f=0,Lx=e):_f=0,r=r.stateNode,Zo&&typeof Zo.onCommitFiberRoot=="function")try{Zo.onCommitFiberRoot(TE,r,void 0,(r.current.flags&64)===64)}catch{}if(za(e,gn()),Av)throw Av=!1,e=Px,Px=null,e;return(ot&8)!==0||Ai(),null}function KH(){for(;Ye!==null;){var e=Ye.alternate;Gg||Mf===null||((Ye.flags&8)!==0?IT(Ye,Mf)&&(Gg=!0):Ye.tag===13&&UH(e,Ye)&&IT(Ye,Mf)&&(Gg=!0));var t=Ye.flags;(t&256)!==0&&WH(e,Ye),(t&512)===0||Js||(Js=!0,Kf(97,function(){return mo(),null})),Ye=Ye.nextEffect}}function mo(){if(af!==90){var e=97<af?97:af;return af=90,ol(e,QH)}return!1}function ZH(e,t){Dx.push(t,e),Js||(Js=!0,Kf(97,function(){return mo(),null}))}function XM(e,t){Fx.push(t,e),Js||(Js=!0,Kf(97,function(){return mo(),null}))}function QH(){if(Af===null)return!1;var e=Af;if(Af=null,(ot&48)!==0)throw Error(Pe(331));var t=ot;ot|=32;var r=Fx;Fx=[];for(var a=0;a<r.length;a+=2){var n=r[a],i=r[a+1],s=n.destroy;if(n.destroy=void 0,typeof s=="function")try{s()}catch(l){if(i===null)throw Error(Pe(330));js(i,l)}}for(r=Dx,Dx=[],a=0;a<r.length;a+=2){n=r[a],i=r[a+1];try{var o=n.create;n.destroy=o()}catch(l){if(i===null)throw Error(Pe(330));js(i,l)}}for(o=e.current.firstEffect;o!==null;)e=o.nextEffect,o.nextEffect=null,o.flags&8&&(o.sibling=null,o.stateNode=null),o=e;return ot=t,Ai(),!0}function N2(e,t,r){t=BE(r,t),t=LM(e,t,1),Ws(e,t),t=xa(),e=Ob(e,1),e!==null&&($b(e,1,t),za(e,t))}function js(e,t){if(e.tag===3)N2(e,e,t);else for(var r=e.return;r!==null;){if(r.tag===3){N2(r,e,t);break}else if(r.tag===1){var a=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(ki===null||!ki.has(a))){e=BE(t,e);var n=zM(r,e,1);if(Ws(r,n),n=xa(),r=Ob(r,1),r!==null)$b(r,1,n),za(r,n);else if(typeof a.componentDidCatch=="function"&&(ki===null||!ki.has(a)))try{a.componentDidCatch(t,e)}catch{}break}}r=r.return}}function JH(e,t,r){var a=e.pingCache;a!==null&&a.delete(t),t=xa(),e.pingedLanes|=e.suspendedLanes&r,On===e&&(vn&r)===r&&(en===4||en===3&&(vn&62914560)===vn&&500>gn()-HE?yc(e,0):WE|=r),za(e,t)}function eU(e,t){var r=e.stateNode;r!==null&&r.delete(t),t=0,t===0&&(t=e.mode,(t&2)===0?t=1:(t&4)===0?t=Nc()===99?1:2:(Gi===0&&(Gi=Jc),t=Yu(62914560&~Gi),t===0&&(t=4194304))),r=xa(),e=Ob(e,t),e!==null&&($b(e,t,r),za(e,r))}var YM;YM=function(e,t,r){var a=t.lanes;if(e!==null)if(e.memoizedProps!==t.pendingProps||ra.current)Ja=!0;else if((r&a)!==0)Ja=(e.flags&16384)!==0;else{switch(Ja=!1,t.tag){case 3:m2(t),sw();break;case 5:s2(t);break;case 1:na(t.type)&&Wg(t);break;case 4:Ex(t,t.stateNode.containerInfo);break;case 10:a=t.memoizedProps.value;var n=t.type._context;fr(bv,n._currentValue),n._currentValue=a;break;case 13:if(t.memoizedState!==null)return(r&t.child.childLanes)!==0?g2(e,t,r):(fr(pr,pr.current&1),t=Ki(e,t,r),t!==null?t.sibling:null);fr(pr,pr.current&1);break;case 19:if(a=(r&t.childLanes)!==0,(e.flags&64)!==0){if(a)return x2(e,t,r);t.flags|=64}if(n=t.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),fr(pr,pr.current),a)break;return null;case 23:case 24:return t.lanes=0,ow(e,t,r)}return Ki(e,t,r)}else Ja=!1;switch(t.lanes=0,t.tag){case 2:if(a=t.type,e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,n=Tc(t,bn.current),gc(t,r),n=DE(null,t,a,e,n,r),t.flags|=1,typeof n=="object"&&n!==null&&typeof n.render=="function"&&n.$$typeof===void 0){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,na(a)){var i=!0;Wg(t)}else i=!1;t.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,ME(t);var s=a.getDerivedStateFromProps;typeof s=="function"&&xv(t,a,s,e),n.updater=Mb,t.stateNode=n,n._reactInternals=t,kx(t,a,e,r),t=Ix(null,t,a,!0,i,r)}else t.tag=0,Kn(null,t,n,r),t=t.child;return t;case 16:n=t.elementType;e:{switch(e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=n._init,n=i(n._payload),t.type=n,i=t.tag=rU(n),e=Ka(n,e),i){case 0:t=$x(null,t,n,e,r);break e;case 1:t=h2(null,t,n,e,r);break e;case 11:t=p2(null,t,n,e,r);break e;case 14:t=f2(null,t,n,Ka(n.type,e),a,r);break e}throw Error(Pe(306,n,""))}return t;case 0:return a=t.type,n=t.pendingProps,n=t.elementType===a?n:Ka(a,n),$x(e,t,a,n,r);case 1:return a=t.type,n=t.pendingProps,n=t.elementType===a?n:Ka(a,n),h2(e,t,a,n,r);case 3:if(m2(t),a=t.updateQueue,e===null||a===null)throw Error(Pe(282));if(a=t.pendingProps,n=t.memoizedState,n=n!==null?n.element:null,wM(e,t),Zf(t,a,null,r),a=t.memoizedState.element,a===n)sw(),t=Ki(e,t,r);else{if(n=t.stateNode,(i=n.hydrate)&&(Ms=mc(t.stateNode.containerInfo.firstChild),Yi=t,i=Ci=!0),i){if(e=n.mutableSourceEagerHydrationData,e!=null)for(n=0;n<e.length;n+=2)i=e[n],i._workInProgressVersionPrimary=e[n+1],vc.push(i);for(r=CM(t,null,a,r),t.child=r;r;)r.flags=r.flags&-3|1024,r=r.sibling}else Kn(e,t,a,r),sw();t=t.child}return t;case 5:return s2(t),e===null&&Cx(t),a=t.type,n=t.pendingProps,i=e!==null?e.memoizedProps:null,s=n.children,bx(a,n)?s=null:i!==null&&bx(a,i)&&(t.flags|=16),OM(e,t),Kn(e,t,s,r),t.child;case 6:return e===null&&Cx(t),null;case 13:return g2(e,t,r);case 4:return Ex(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=kv(t,null,a,r):Kn(e,t,a,r),t.child;case 11:return a=t.type,n=t.pendingProps,n=t.elementType===a?n:Ka(a,n),p2(e,t,a,n,r);case 7:return Kn(e,t,t.pendingProps,r),t.child;case 8:return Kn(e,t,t.pendingProps.children,r),t.child;case 12:return Kn(e,t,t.pendingProps.children,r),t.child;case 10:e:{a=t.type._context,n=t.pendingProps,s=t.memoizedProps,i=n.value;var o=t.type._context;if(fr(bv,o._currentValue),o._currentValue=i,s!==null)if(o=s.value,i=Ra(o,i)?0:(typeof a._calculateChangedBits=="function"?a._calculateChangedBits(o,i):1073741823)|0,i===0){if(s.children===n.children&&!ra.current){t=Ki(e,t,r);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var l=o.dependencies;if(l!==null){s=o.child;for(var u=l.firstContext;u!==null;){if(u.context===a&&(u.observedBits&i)!==0){o.tag===1&&(u=Vs(-1,r&-r),u.tag=2,Ws(o,u)),o.lanes|=r,u=o.alternate,u!==null&&(u.lanes|=r),yM(o.return,r),l.lanes|=r;break}u=u.next}}else s=o.tag===10&&o.type===t.type?null:o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===t){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}Kn(e,t,n.children,r),t=t.child}return t;case 9:return n=t.type,i=t.pendingProps,a=i.children,gc(t,r),n=La(n,i.unstable_observedBits),a=a(n),t.flags|=1,Kn(e,t,a,r),t.child;case 14:return n=t.type,i=Ka(n,t.pendingProps),i=Ka(n.type,i),f2(e,t,n,i,a,r);case 15:return RM(e,t,t.type,t.pendingProps,a,r);case 17:return a=t.type,n=t.pendingProps,n=t.elementType===a?n:Ka(a,n),e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,na(a)?(e=!0,Wg(t)):e=!1,gc(t,r),kM(t,a,n),kx(t,a,n,r),Ix(null,t,a,!0,e,r);case 19:return x2(e,t,r);case 23:return ow(e,t,r);case 24:return ow(e,t,r)}throw Error(Pe(156,t.tag))};function tU(e,t,r,a){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Oa(e,t,r,a){return new tU(e,t,r,a)}function jE(e){return e=e.prototype,!(!e||!e.isReactComponent)}function rU(e){if(typeof e=="function")return jE(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Eb)return 11;if(e===Cb)return 14}return 2}function eo(e,t){var r=e.alternate;return r===null?(r=Oa(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.nextEffect=null,r.firstEffect=null,r.lastEffect=null),r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function qg(e,t,r,a,n,i){var s=2;if(a=e,typeof e=="function")jE(e)&&(s=1);else if(typeof e=="string")s=5;else e:switch(e){case Is:return wc(r.children,n,i,t);case S_:s=8,n|=16;break;case oE:s=8,n|=1;break;case xf:return e=Oa(12,r,t,n|8),e.elementType=xf,e.type=xf,e.lanes=i,e;case kf:return e=Oa(13,r,t,n),e.type=kf,e.elementType=kf,e.lanes=i,e;case uv:return e=Oa(19,r,t,n),e.elementType=uv,e.lanes=i,e;case fE:return GE(r,n,i,t);case ex:return e=Oa(24,r,t,n),e.elementType=ex,e.lanes=i,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case lE:s=10;break e;case uE:s=9;break e;case Eb:s=11;break e;case Cb:s=14;break e;case cE:s=16,a=null;break e;case dE:s=22;break e}throw Error(Pe(130,e==null?e:typeof e,""))}return t=Oa(s,r,t,n),t.elementType=e,t.type=a,t.lanes=i,t}function wc(e,t,r,a){return e=Oa(7,e,a,t),e.lanes=r,e}function GE(e,t,r,a){return e=Oa(23,e,a,t),e.elementType=fE,e.lanes=r,e}function cw(e,t,r){return e=Oa(6,e,null,t),e.lanes=r,e}function dw(e,t,r){return t=Oa(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function nU(e,t,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=r,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=q0(0),this.expirationTimes=q0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=q0(0),this.mutableSourceEagerHydrationData=null}function aU(e,t,r){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ho,key:a==null?null:""+a,children:e,containerInfo:t,implementation:r}}function _v(e,t,r,a){var n=t.current,i=xa(),s=Hs(n);e:if(r){r=r._reactInternals;t:{if(Al(r)!==r||r.tag!==1)throw Error(Pe(170));var o=r;do{switch(o.tag){case 3:o=o.stateNode.context;break t;case 1:if(na(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break t}}o=o.return}while(o!==null);throw Error(Pe(171))}if(r.tag===1){var l=r.type;if(na(l)){r=pM(r,l,o);break e}}r=o}else r=Qs;return t.context===null?t.context=r:t.pendingContext=r,t=Vs(i,s),t.payload={element:e},a=a===void 0?null:a,a!==null&&(t.callback=a),Ws(n,t),Us(n,s,i),s}function pw(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function A2(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function qE(e,t){A2(e,t),(e=e.alternate)&&A2(e,t)}function iU(){return null}function XE(e,t,r){var a=r!=null&&r.hydrationOptions!=null&&r.hydrationOptions.mutableSources||null;if(r=new nU(e,t,r!=null&&r.hydrate===!0),t=Oa(3,null,null,t===2?7:t===1?3:0),r.current=t,t.stateNode=r,ME(t),e[Qc]=r.current,oM(e.nodeType===8?e.parentNode:e),a)for(e=0;e<a.length;e++){t=a[e];var n=t._getVersion;n=n(t._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[t,n]:r.mutableSourceEagerHydrationData.push(t,n)}this._internalRoot=r}XE.prototype.render=function(e){_v(e,this._internalRoot,null,null)};XE.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;_v(null,e,null,function(){t[Qc]=null})};function Sh(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function sU(e,t){if(t||(t=e?e.nodeType===9?e.documentElement:e.firstChild:null,t=!(!t||t.nodeType!==1||!t.hasAttribute("data-reactroot"))),!t)for(var r;r=e.lastChild;)e.removeChild(r);return new XE(e,0,t?{hydrate:!0}:void 0)}function Pb(e,t,r,a,n){var i=r._reactRootContainer;if(i){var s=i._internalRoot;if(typeof n=="function"){var o=n;n=function(){var u=pw(s);o.call(u)}}_v(t,s,e,n)}else{if(i=r._reactRootContainer=sU(r,a),s=i._internalRoot,typeof n=="function"){var l=n;n=function(){var u=pw(s);l.call(u)}}HM(function(){_v(t,s,e,n)})}return pw(s)}B_=function(e){if(e.tag===13){var t=xa();Us(e,4,t),qE(e,4)}};bE=function(e){if(e.tag===13){var t=xa();Us(e,67108864,t),qE(e,67108864)}};V_=function(e){if(e.tag===13){var t=xa(),r=Hs(e);Us(e,r,t),qE(e,r)}};W_=function(e,t){return t()};cx=function(e,t,r){switch(t){case"input":if(rx(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var a=r[t];if(a!==e&&a.form===e.form){var n=Ab(a);if(!n)throw Error(Pe(90));I_(a),rx(a,n)}}}break;case"textarea":N_(e,r);break;case"select":t=r.value,t!=null&&pc(e,!!r.multiple,t,!1)}};mE=WM;D_=function(e,t,r,a,n){var i=ot;ot|=4;try{return ol(98,e.bind(null,t,r,a,n))}finally{ot=i,ot===0&&(td(),Ai())}};gE=function(){(ot&49)===0&&(GH(),mo())};F_=function(e,t){var r=ot;ot|=2;try{return e(t)}finally{ot=r,ot===0&&(td(),Ai())}};function KM(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Sh(t))throw Error(Pe(200));return aU(e,t,null,r)}var oU={Events:[kh,nc,Ab,O_,P_,mo,{current:!1}]},zp={findFiberByHostInstance:jo,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},lU={bundleType:zp.bundleType,version:zp.version,rendererPackageName:zp.rendererPackageName,rendererConfig:zp.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Nl.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=z_(e),e===null?null:e.stateNode},findFiberByHostInstance:zp.findFiberByHostInstance||iU,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var tg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!tg.isDisabled&&tg.supportsFiber)try{TE=tg.inject(lU),Zo=tg}catch{}}Ha.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oU;Ha.createPortal=KM;Ha.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Pe(188)):Error(Pe(268,Object.keys(e)));return e=z_(t),e=e===null?null:e.stateNode,e};Ha.flushSync=function(e,t){var r=ot;if((r&48)!==0)return e(t);ot|=1;try{if(e)return ol(99,e.bind(null,t))}finally{ot=r,Ai()}};Ha.hydrate=function(e,t,r){if(!Sh(t))throw Error(Pe(200));return Pb(null,e,t,!0,r)};Ha.render=function(e,t,r){if(!Sh(t))throw Error(Pe(200));return Pb(null,e,t,!1,r)};Ha.unmountComponentAtNode=function(e){if(!Sh(e))throw Error(Pe(40));return e._reactRootContainer?(HM(function(){Pb(null,null,e,!1,function(){e._reactRootContainer=null,e[Qc]=null})}),!0):!1};Ha.unstable_batchedUpdates=WM;Ha.unstable_createPortal=function(e,t){return KM(e,t,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)};Ha.unstable_renderSubtreeIntoContainer=function(e,t,r,a){if(!Sh(r))throw Error(Pe(200));if(e==null||e._reactInternals===void 0)throw Error(Pe(38));return Pb(e,t,r,!1,a)};Ha.version="17.0.2";function ZM(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ZM)}catch(e){console.error(e)}}ZM(),x_.exports=Ha;var uU=x_.exports;function _2(e){return e!==null&&typeof e=="object"&&"constructor"in e&&e.constructor===Object}function YE(e,t){e===void 0&&(e={}),t===void 0&&(t={}),Object.keys(t).forEach(function(r){typeof e[r]=="undefined"?e[r]=t[r]:_2(t[r])&&_2(e[r])&&Object.keys(t[r]).length>0&&YE(e[r],t[r])})}var QM={body:{},addEventListener:function(){},removeEventListener:function(){},activeElement:{blur:function(){},nodeName:""},querySelector:function(){return null},querySelectorAll:function(){return[]},getElementById:function(){return null},createEvent:function(){return{initEvent:function(){}}},createElement:function(){return{children:[],childNodes:[],style:{},setAttribute:function(){},getElementsByTagName:function(){return[]}}},createElementNS:function(){return{}},importNode:function(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function nt(){var e=typeof document!="undefined"?document:{};return YE(e,QM),e}var cU={document:QM,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState:function(){},pushState:function(){},go:function(){},back:function(){}},CustomEvent:function(){return this},addEventListener:function(){},removeEventListener:function(){},getComputedStyle:function(){return{getPropertyValue:function(){return""}}},Image:function(){},Date:function(){},screen:{},setTimeout:function(){},clearTimeout:function(){},matchMedia:function(){return{}},requestAnimationFrame:function(e){return typeof setTimeout=="undefined"?(e(),null):setTimeout(e,0)},cancelAnimationFrame:function(e){typeof setTimeout!="undefined"&&clearTimeout(e)}};function De(){var e=typeof window!="undefined"?window:{};return YE(e,cU),e}function dU(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function Bx(e){return Bx=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},Bx(e)}function Mv(e,t){return Mv=Object.setPrototypeOf||function(a,n){return a.__proto__=n,a},Mv(e,t)}function pU(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function Xg(e,t,r){return pU()?Xg=Reflect.construct:Xg=function(n,i,s){var o=[null];o.push.apply(o,i);var l=Function.bind.apply(n,o),u=new l;return s&&Mv(u,s.prototype),u},Xg.apply(null,arguments)}function fU(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function Vx(e){var t=typeof Map=="function"?new Map:void 0;return Vx=function(a){if(a===null||!fU(a))return a;if(typeof a!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t!="undefined"){if(t.has(a))return t.get(a);t.set(a,n)}function n(){return Xg(a,arguments,Bx(this).constructor)}return n.prototype=Object.create(a.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Mv(n,a)},Vx(e)}function hU(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mU(e){var t=e.__proto__;Object.defineProperty(e,"__proto__",{get:function(){return t},set:function(a){t.__proto__=a}})}var Rs=function(e){dU(t,e);function t(r){var a;return a=e.call.apply(e,[this].concat(r))||this,mU(hU(a)),a}return t}(Vx(Array));function $h(e){e===void 0&&(e=[]);var t=[];return e.forEach(function(r){Array.isArray(r)?t.push.apply(t,$h(r)):t.push(r)}),t}function JM(e,t){return Array.prototype.filter.call(e,t)}function gU(e){for(var t=[],r=0;r<e.length;r+=1)t.indexOf(e[r])===-1&&t.push(e[r]);return t}function vU(e){return e.toLowerCase().replace(/-(.)/g,function(t,r){return r.toUpperCase()})}function bU(e,t){if(typeof e!="string")return[e];for(var r=[],a=t.querySelectorAll(e),n=0;n<a.length;n+=1)r.push(a[n]);return r}function He(e,t){var r=De(),a=nt(),n=[];if(!t&&e instanceof Rs)return e;if(!e)return new Rs(n);if(typeof e=="string"){var i=e.trim();if(i.indexOf("<")>=0&&i.indexOf(">")>=0){var s="div";i.indexOf("<li")===0&&(s="ul"),i.indexOf("<tr")===0&&(s="tbody"),(i.indexOf("<td")===0||i.indexOf("<th")===0)&&(s="tr"),i.indexOf("<tbody")===0&&(s="table"),i.indexOf("<option")===0&&(s="select");var o=a.createElement(s);o.innerHTML=i;for(var l=0;l<o.childNodes.length;l+=1)n.push(o.childNodes[l])}else n=bU(e.trim(),t||a)}else if(e.nodeType||e===r||e===a)n.push(e);else if(Array.isArray(e)){if(e instanceof Rs)return e;n=e}return new Rs(gU(n))}He.fn=Rs.prototype;function eR(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var a=$h(t.map(function(n){return n.split(" ")}));return this.forEach(function(n){var i;(i=n.classList).add.apply(i,a)}),this}function tR(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var a=$h(t.map(function(n){return n.split(" ")}));return this.forEach(function(n){var i;(i=n.classList).remove.apply(i,a)}),this}function rR(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var a=$h(t.map(function(n){return n.split(" ")}));this.forEach(function(n){a.forEach(function(i){n.classList.toggle(i)})})}function nR(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var a=$h(t.map(function(n){return n.split(" ")}));return JM(this,function(n){return a.filter(function(i){return n.classList.contains(i)}).length>0}).length>0}function aR(e,t){if(arguments.length===1&&typeof e=="string")return this[0]?this[0].getAttribute(e):void 0;for(var r=0;r<this.length;r+=1)if(arguments.length===2)this[r].setAttribute(e,t);else for(var a in e)this[r][a]=e[a],this[r].setAttribute(a,e[a]);return this}function iR(e){for(var t=0;t<this.length;t+=1)this[t].removeAttribute(e);return this}function yU(e,t){if(arguments.length===1&&typeof e=="string"){if(this[0])return this[0][e]}else{for(var r=0;r<this.length;r+=1)if(arguments.length===2)this[r][e]=t;else for(var a in e)this[r][a]=e[a];return this}return this}function wU(e,t){var r;if(typeof t=="undefined"){if(r=this[0],!r)return;if(r.dom7ElementDataStorage&&e in r.dom7ElementDataStorage)return r.dom7ElementDataStorage[e];var a=r.getAttribute("data-"+e);return a||void 0}for(var n=0;n<this.length;n+=1)r=this[n],r.dom7ElementDataStorage||(r.dom7ElementDataStorage={}),r.dom7ElementDataStorage[e]=t;return this}function xU(e){for(var t=0;t<this.length;t+=1){var r=this[t];r.dom7ElementDataStorage&&r.dom7ElementDataStorage[e]&&(r.dom7ElementDataStorage[e]=null,delete r.dom7ElementDataStorage[e])}}function kU(){var e=this[0];if(!!e){var t={};if(e.dataset)for(var r in e.dataset)t[r]=e.dataset[r];else for(var a=0;a<e.attributes.length;a+=1){var n=e.attributes[a];n.name.indexOf("data-")>=0&&(t[vU(n.name.split("data-")[1])]=n.value)}for(var i in t)t[i]==="false"?t[i]=!1:t[i]==="true"?t[i]=!0:parseFloat(t[i])===t[i]*1&&(t[i]*=1);return t}}function EU(e){if(typeof e=="undefined"){var t=this[0];if(!t)return;if(t.multiple&&t.nodeName.toLowerCase()==="select"){for(var r=[],a=0;a<t.selectedOptions.length;a+=1)r.push(t.selectedOptions[a].value);return r}return t.value}for(var n=0;n<this.length;n+=1){var i=this[n];if(Array.isArray(e)&&i.multiple&&i.nodeName.toLowerCase()==="select")for(var s=0;s<i.options.length;s+=1)i.options[s].selected=e.indexOf(i.options[s].value)>=0;else i.value=e}return this}function CU(e){return this.val(e)}function sR(e){for(var t=0;t<this.length;t+=1)this[t].style.transform=e;return this}function oR(e){for(var t=0;t<this.length;t+=1)this[t].style.transitionDuration=typeof e!="string"?e+"ms":e;return this}function lR(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var a=t[0],n=t[1],i=t[2],s=t[3];typeof t[1]=="function"&&(a=t[0],i=t[1],s=t[2],n=void 0),s||(s=!1);function o(m){var g=m.target;if(!!g){var v=m.target.dom7EventData||[];if(v.indexOf(m)<0&&v.unshift(m),He(g).is(n))i.apply(g,v);else for(var b=He(g).parents(),y=0;y<b.length;y+=1)He(b[y]).is(n)&&i.apply(b[y],v)}}function l(m){var g=m&&m.target?m.target.dom7EventData||[]:[];g.indexOf(m)<0&&g.unshift(m),i.apply(this,g)}for(var u=a.split(" "),c,d=0;d<this.length;d+=1){var p=this[d];if(n)for(c=0;c<u.length;c+=1){var h=u[c];p.dom7LiveListeners||(p.dom7LiveListeners={}),p.dom7LiveListeners[h]||(p.dom7LiveListeners[h]=[]),p.dom7LiveListeners[h].push({listener:i,proxyListener:o}),p.addEventListener(h,o,s)}else for(c=0;c<u.length;c+=1){var f=u[c];p.dom7Listeners||(p.dom7Listeners={}),p.dom7Listeners[f]||(p.dom7Listeners[f]=[]),p.dom7Listeners[f].push({listener:i,proxyListener:l}),p.addEventListener(f,l,s)}}return this}function uR(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var a=t[0],n=t[1],i=t[2],s=t[3];typeof t[1]=="function"&&(a=t[0],i=t[1],s=t[2],n=void 0),s||(s=!1);for(var o=a.split(" "),l=0;l<o.length;l+=1)for(var u=o[l],c=0;c<this.length;c+=1){var d=this[c],p=void 0;if(!n&&d.dom7Listeners?p=d.dom7Listeners[u]:n&&d.dom7LiveListeners&&(p=d.dom7LiveListeners[u]),p&&p.length)for(var f=p.length-1;f>=0;f-=1){var h=p[f];i&&h.listener===i||i&&h.listener&&h.listener.dom7proxy&&h.listener.dom7proxy===i?(d.removeEventListener(u,h.proxyListener,s),p.splice(f,1)):i||(d.removeEventListener(u,h.proxyListener,s),p.splice(f,1))}}return this}function SU(){for(var e=this,t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];var n=r[0],i=r[1],s=r[2],o=r[3];typeof r[1]=="function"&&(n=r[0],s=r[1],o=r[2],i=void 0);function l(){for(var u=arguments.length,c=new Array(u),d=0;d<u;d++)c[d]=arguments[d];s.apply(this,c),e.off(n,i,l,o),l.dom7proxy&&delete l.dom7proxy}return l.dom7proxy=s,e.on(n,i,l,o)}function cR(){for(var e=De(),t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];for(var n=r[0].split(" "),i=r[1],s=0;s<n.length;s+=1)for(var o=n[s],l=0;l<this.length;l+=1){var u=this[l];if(e.CustomEvent){var c=new e.CustomEvent(o,{detail:i,bubbles:!0,cancelable:!0});u.dom7EventData=r.filter(function(d,p){return p>0}),u.dispatchEvent(c),u.dom7EventData=[],delete u.dom7EventData}}return this}function dR(e){var t=this;function r(a){a.target===this&&(e.call(this,a),t.off("transitionend",r))}return e&&t.on("transitionend",r),this}function $U(e){var t=this;function r(a){a.target===this&&(e.call(this,a),t.off("animationend",r))}return e&&t.on("animationend",r),this}function IU(){var e=De();return this[0]===e?e.innerWidth:this.length>0?parseFloat(this.css("width")):null}function pR(e){if(this.length>0){if(e){var t=this.styles();return this[0].offsetWidth+parseFloat(t.getPropertyValue("margin-right"))+parseFloat(t.getPropertyValue("margin-left"))}return this[0].offsetWidth}return null}function TU(){var e=De();return this[0]===e?e.innerHeight:this.length>0?parseFloat(this.css("height")):null}function fR(e){if(this.length>0){if(e){var t=this.styles();return this[0].offsetHeight+parseFloat(t.getPropertyValue("margin-top"))+parseFloat(t.getPropertyValue("margin-bottom"))}return this[0].offsetHeight}return null}function hR(){if(this.length>0){var e=De(),t=nt(),r=this[0],a=r.getBoundingClientRect(),n=t.body,i=r.clientTop||n.clientTop||0,s=r.clientLeft||n.clientLeft||0,o=r===e?e.scrollY:r.scrollTop,l=r===e?e.scrollX:r.scrollLeft;return{top:a.top+o-i,left:a.left+l-s}}return null}function NU(){for(var e=0;e<this.length;e+=1)this[e].style.display="none";return this}function AU(){for(var e=De(),t=0;t<this.length;t+=1){var r=this[t];r.style.display==="none"&&(r.style.display=""),e.getComputedStyle(r,null).getPropertyValue("display")==="none"&&(r.style.display="block")}return this}function mR(){var e=De();return this[0]?e.getComputedStyle(this[0],null):{}}function gR(e,t){var r=De(),a;if(arguments.length===1)if(typeof e=="string"){if(this[0])return r.getComputedStyle(this[0],null).getPropertyValue(e)}else{for(a=0;a<this.length;a+=1)for(var n in e)this[a].style[n]=e[n];return this}if(arguments.length===2&&typeof e=="string"){for(a=0;a<this.length;a+=1)this[a].style[e]=t;return this}return this}function vR(e){return e?(this.forEach(function(t,r){e.apply(t,[t,r])}),this):this}function bR(e){var t=JM(this,e);return He(t)}function yR(e){if(typeof e=="undefined")return this[0]?this[0].innerHTML:null;for(var t=0;t<this.length;t+=1)this[t].innerHTML=e;return this}function wR(e){if(typeof e=="undefined")return this[0]?this[0].textContent.trim():null;for(var t=0;t<this.length;t+=1)this[t].textContent=e;return this}function xR(e){var t=De(),r=nt(),a=this[0],n,i;if(!a||typeof e=="undefined")return!1;if(typeof e=="string"){if(a.matches)return a.matches(e);if(a.webkitMatchesSelector)return a.webkitMatchesSelector(e);if(a.msMatchesSelector)return a.msMatchesSelector(e);for(n=He(e),i=0;i<n.length;i+=1)if(n[i]===a)return!0;return!1}if(e===r)return a===r;if(e===t)return a===t;if(e.nodeType||e instanceof Rs){for(n=e.nodeType?[e]:e,i=0;i<n.length;i+=1)if(n[i]===a)return!0;return!1}return!1}function kR(){var e=this[0],t;if(e){for(t=0;(e=e.previousSibling)!==null;)e.nodeType===1&&(t+=1);return t}}function ER(e){if(typeof e=="undefined")return this;var t=this.length;if(e>t-1)return He([]);if(e<0){var r=t+e;return r<0?He([]):He([this[r]])}return He([this[e]])}function CR(){for(var e,t=nt(),r=0;r<arguments.length;r+=1){e=r<0||arguments.length<=r?void 0:arguments[r];for(var a=0;a<this.length;a+=1)if(typeof e=="string"){var n=t.createElement("div");for(n.innerHTML=e;n.firstChild;)this[a].appendChild(n.firstChild)}else if(e instanceof Rs)for(var i=0;i<e.length;i+=1)this[a].appendChild(e[i]);else this[a].appendChild(e)}return this}function _U(e){return He(e).append(this),this}function SR(e){var t=nt(),r,a;for(r=0;r<this.length;r+=1)if(typeof e=="string"){var n=t.createElement("div");for(n.innerHTML=e,a=n.childNodes.length-1;a>=0;a-=1)this[r].insertBefore(n.childNodes[a],this[r].childNodes[0])}else if(e instanceof Rs)for(a=0;a<e.length;a+=1)this[r].insertBefore(e[a],this[r].childNodes[0]);else this[r].insertBefore(e,this[r].childNodes[0]);return this}function MU(e){return He(e).prepend(this),this}function RU(e){for(var t=He(e),r=0;r<this.length;r+=1)if(t.length===1)t[0].parentNode.insertBefore(this[r],t[0]);else if(t.length>1)for(var a=0;a<t.length;a+=1)t[a].parentNode.insertBefore(this[r].cloneNode(!0),t[a])}function OU(e){for(var t=He(e),r=0;r<this.length;r+=1)if(t.length===1)t[0].parentNode.insertBefore(this[r],t[0].nextSibling);else if(t.length>1)for(var a=0;a<t.length;a+=1)t[a].parentNode.insertBefore(this[r].cloneNode(!0),t[a].nextSibling)}function $R(e){return this.length>0?e?this[0].nextElementSibling&&He(this[0].nextElementSibling).is(e)?He([this[0].nextElementSibling]):He([]):this[0].nextElementSibling?He([this[0].nextElementSibling]):He([]):He([])}function IR(e){var t=[],r=this[0];if(!r)return He([]);for(;r.nextElementSibling;){var a=r.nextElementSibling;e?He(a).is(e)&&t.push(a):t.push(a),r=a}return He(t)}function TR(e){if(this.length>0){var t=this[0];return e?t.previousElementSibling&&He(t.previousElementSibling).is(e)?He([t.previousElementSibling]):He([]):t.previousElementSibling?He([t.previousElementSibling]):He([])}return He([])}function NR(e){var t=[],r=this[0];if(!r)return He([]);for(;r.previousElementSibling;){var a=r.previousElementSibling;e?He(a).is(e)&&t.push(a):t.push(a),r=a}return He(t)}function PU(e){return this.nextAll(e).add(this.prevAll(e))}function AR(e){for(var t=[],r=0;r<this.length;r+=1)this[r].parentNode!==null&&(e?He(this[r].parentNode).is(e)&&t.push(this[r].parentNode):t.push(this[r].parentNode));return He(t)}function _R(e){for(var t=[],r=0;r<this.length;r+=1)for(var a=this[r].parentNode;a;)e?He(a).is(e)&&t.push(a):t.push(a),a=a.parentNode;return He(t)}function MR(e){var t=this;return typeof e=="undefined"?He([]):(t.is(e)||(t=t.parents(e).eq(0)),t)}function RR(e){for(var t=[],r=0;r<this.length;r+=1)for(var a=this[r].querySelectorAll(e),n=0;n<a.length;n+=1)t.push(a[n]);return He(t)}function OR(e){for(var t=[],r=0;r<this.length;r+=1)for(var a=this[r].children,n=0;n<a.length;n+=1)(!e||He(a[n]).is(e))&&t.push(a[n]);return He(t)}function PR(){for(var e=0;e<this.length;e+=1)this[e].parentNode&&this[e].parentNode.removeChild(this[e]);return this}function DU(){return this.remove()}function FU(){for(var e=this,t,r,a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];for(t=0;t<n.length;t+=1){var s=He(n[t]);for(r=0;r<s.length;r+=1)e.push(s[r])}return e}function LU(){for(var e=0;e<this.length;e+=1){var t=this[e];if(t.nodeType===1){for(var r=0;r<t.childNodes.length;r+=1)t.childNodes[r].parentNode&&t.childNodes[r].parentNode.removeChild(t.childNodes[r]);t.textContent=""}}return this}function zU(){for(var e=De(),t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];var n=r[0],i=r[1],s=r[2],o=r[3],l=r[4];return r.length===4&&typeof o=="function"&&(l=o,n=r[0],i=r[1],s=r[2],l=r[3],o=r[4]),typeof o=="undefined"&&(o="swing"),this.each(function(){var c=this,d,p,f,h,m,g,v,b,y=i>0||i===0,w=n>0||n===0;if(typeof o=="undefined"&&(o="swing"),y&&(d=c.scrollTop,s||(c.scrollTop=i)),w&&(p=c.scrollLeft,s||(c.scrollLeft=n)),!s)return;y&&(f=c.scrollHeight-c.offsetHeight,m=Math.max(Math.min(i,f),0)),w&&(h=c.scrollWidth-c.offsetWidth,g=Math.max(Math.min(n,h),0));var x=null;y&&m===d&&(y=!1),w&&g===p&&(w=!1);function k(C){C===void 0&&(C=new Date().getTime()),x===null&&(x=C);var E=Math.max(Math.min((C-x)/s,1),0),$=o==="linear"?E:.5-Math.cos(E*Math.PI)/2,N;if(y&&(v=d+$*(m-d)),w&&(b=p+$*(g-p)),y&&m>d&&v>=m&&(c.scrollTop=m,N=!0),y&&m<d&&v<=m&&(c.scrollTop=m,N=!0),w&&g>p&&b>=g&&(c.scrollLeft=g,N=!0),w&&g<p&&b<=g&&(c.scrollLeft=g,N=!0),N){l&&l();return}y&&(c.scrollTop=v),w&&(c.scrollLeft=b),e.requestAnimationFrame(k)}e.requestAnimationFrame(k)})}function BU(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var a=t[0],n=t[1],i=t[2],s=t[3];t.length===3&&typeof i=="function"&&(a=t[0],n=t[1],s=t[2],i=t[3]);var o=this;return typeof a=="undefined"?o.length>0?o[0].scrollTop:null:o.scrollTo(void 0,a,n,i,s)}function VU(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var a=t[0],n=t[1],i=t[2],s=t[3];t.length===3&&typeof i=="function"&&(a=t[0],n=t[1],s=t[2],i=t[3]);var o=this;return typeof a=="undefined"?o.length>0?o[0].scrollLeft:null:o.scrollTo(a,void 0,n,i,s)}function WU(e,t){var r=De(),a=this,n={props:Object.assign({},e),params:Object.assign({duration:300,easing:"swing"},t),elements:a,animating:!1,que:[],easingProgress:function(l,u){return l==="swing"?.5-Math.cos(u*Math.PI)/2:typeof l=="function"?l(u):u},stop:function(){n.frameId&&r.cancelAnimationFrame(n.frameId),n.animating=!1,n.elements.each(function(l){var u=l;delete u.dom7AnimateInstance}),n.que=[]},done:function(l){if(n.animating=!1,n.elements.each(function(c){var d=c;delete d.dom7AnimateInstance}),l&&l(a),n.que.length>0){var u=n.que.shift();n.animate(u[0],u[1])}},animate:function(l,u){if(n.animating)return n.que.push([l,u]),n;var c=[];n.elements.each(function(b,y){var w,x,k,C,E;b.dom7AnimateInstance||(n.elements[y].dom7AnimateInstance=n),c[y]={container:b},Object.keys(l).forEach(function($){w=r.getComputedStyle(b,null).getPropertyValue($).replace(",","."),x=parseFloat(w),k=w.replace(x,""),C=parseFloat(l[$]),E=l[$]+k,c[y][$]={initialFullValue:w,initialValue:x,unit:k,finalValue:C,finalFullValue:E,currentValue:x}})});var d=null,p,f=0,h=0,m,g=!1;n.animating=!0;function v(){p=new Date().getTime();var b,y;g||(g=!0,u.begin&&u.begin(a)),d===null&&(d=p),u.progress&&u.progress(a,Math.max(Math.min((p-d)/u.duration,1),0),d+u.duration-p<0?0:d+u.duration-p,d),c.forEach(function(w){var x=w;m||x.done||Object.keys(l).forEach(function(k){if(!(m||x.done)){b=Math.max(Math.min((p-d)/u.duration,1),0),y=n.easingProgress(u.easing,b);var C=x[k],E=C.initialValue,$=C.finalValue,N=C.unit;x[k].currentValue=E+y*($-E);var I=x[k].currentValue;if(($>E&&I>=$||$<E&&I<=$)&&(x.container.style[k]=$+N,h+=1,h===Object.keys(l).length&&(x.done=!0,f+=1),f===c.length&&(m=!0)),m){n.done(u.complete);return}x.container.style[k]=I+N}})}),!m&&(n.frameId=r.requestAnimationFrame(v))}return n.frameId=r.requestAnimationFrame(v),n}};if(n.elements.length===0)return a;for(var i,s=0;s<n.elements.length;s+=1)n.elements[s].dom7AnimateInstance?i=n.elements[s].dom7AnimateInstance:n.elements[s].dom7AnimateInstance=n;return i||(i=n),e==="stop"?i.stop():i.animate(n.props,n.params),a}function HU(){for(var e=this,t=0;t<e.length;t+=1)e[t].dom7AnimateInstance&&e[t].dom7AnimateInstance.stop()}var UU="resize scroll".split(" ");function mr(e){function t(){for(var r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];if(typeof a[0]=="undefined"){for(var i=0;i<this.length;i+=1)UU.indexOf(e)<0&&(e in this[i]?this[i][e]():He(this[i]).trigger(e));return this}return this.on.apply(this,[e].concat(a))}return t}var jU=mr("click"),GU=mr("blur"),qU=mr("focus"),XU=mr("focusin"),YU=mr("focusout"),KU=mr("keyup"),ZU=mr("keydown"),QU=mr("keypress"),JU=mr("submit"),e7=mr("change"),t7=mr("mousedown"),r7=mr("mousemove"),n7=mr("mouseup"),a7=mr("mouseenter"),i7=mr("mouseleave"),s7=mr("mouseout"),o7=mr("mouseover"),l7=mr("touchstart"),u7=mr("touchend"),c7=mr("touchmove"),d7=mr("resize"),p7=mr("scroll"),M2=Object.freeze(Object.defineProperty({__proto__:null,default:He,$:He,add:FU,addClass:eR,animate:WU,animationEnd:$U,append:CR,appendTo:_U,attr:aR,blur:GU,change:e7,children:OR,click:jU,closest:MR,css:gR,data:wU,dataset:kU,detach:DU,each:vR,empty:LU,eq:ER,filter:bR,find:RR,focus:qU,focusin:XU,focusout:YU,hasClass:nR,height:TU,hide:NU,html:yR,index:kR,insertAfter:OU,insertBefore:RU,is:xR,keydown:ZU,keypress:QU,keyup:KU,mousedown:t7,mouseenter:a7,mouseleave:i7,mousemove:r7,mouseout:s7,mouseover:o7,mouseup:n7,next:$R,nextAll:IR,off:uR,offset:hR,on:lR,once:SU,outerHeight:fR,outerWidth:pR,parent:AR,parents:_R,prepend:SR,prependTo:MU,prev:TR,prevAll:NR,prop:yU,remove:PR,removeAttr:iR,removeClass:tR,removeData:xU,resize:d7,scroll:p7,scrollLeft:VU,scrollTo:zU,scrollTop:BU,show:AU,siblings:PU,stop:HU,styles:mR,submit:JU,text:wR,toggleClass:rR,touchend:u7,touchmove:c7,touchstart:l7,transform:sR,transition:oR,transitionEnd:dR,trigger:cR,val:EU,value:CU,width:IU},Symbol.toStringTag,{value:"Module"}));Object.keys(M2).forEach(function(e){e!=="$"&&(He.fn[e]=M2[e])});var T=He,R2=0;function f7(){return R2+=1,R2}function Db(e,t){e===void 0&&(e="xxxxxxxxxx"),t===void 0&&(t="0123456789abcdef");var r=t.length;return e.replace(/x/g,function(){return t[Math.floor(Math.random()*r)]})}var Qo=`
  <span class="preloader-inner">
    <svg viewBox="0 0 36 36">
      <circle cx="18" cy="18" r="16"></circle>
    </svg>
  </span>
`.trim(),Jo=(`
  <span class="preloader-inner">
    `+[0,1,2,3,4,5,6,7].map(function(){return'<span class="preloader-inner-line"></span>'}).join("")+`
  </span>
`).trim(),el=`
  <span class="preloader-inner">
    <span class="preloader-inner-circle"></span>
  </span>
`;function of(e){var t;return e.split("").map(function(r,a){return r.match(/[A-Z]/)&&a!==0&&!t?(t=!0,":"+r.toLowerCase()):r.toLowerCase()}).join("")}function $r(e){var t=e;Object.keys(t).forEach(function(r){try{t[r]=null}catch{}try{delete t[r]}catch{}})}function Rv(e){var t=De();return t.requestAnimationFrame(e)}function h7(e){var t=De();return t.cancelAnimationFrame(e)}function qr(e,t){return t===void 0&&(t=0),setTimeout(e,t)}function aa(e){return Rv(function(){Rv(e)})}function sa(){return Date.now()}function th(e){var t=De(),r={},a=e||t.location.href,n,i,s,o;if(typeof a=="string"&&a.length)for(a=a.indexOf("?")>-1?a.replace(/\S*\?/,""):"",i=a.split("&").filter(function(l){return l!==""}),o=i.length,n=0;n<o;n+=1)s=i[n].replace(/#\S+/g,"").split("="),r[decodeURIComponent(s[0])]=typeof s[1]=="undefined"?void 0:decodeURIComponent(s.slice(1).join("="))||"";return r}function Os(e,t){t===void 0&&(t="x");var r=De(),a,n,i,s=r.getComputedStyle(e,null);return r.WebKitCSSMatrix?(n=s.transform||s.webkitTransform,n.split(",").length>6&&(n=n.split(", ").map(function(o){return o.replace(",",".")}).join(", ")),i=new r.WebKitCSSMatrix(n==="none"?"":n)):(i=s.MozTransform||s.OTransform||s.MsTransform||s.msTransform||s.transform||s.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),a=i.toString().split(",")),t==="x"&&(r.WebKitCSSMatrix?n=i.m41:a.length===16?n=parseFloat(a[12]):n=parseFloat(a[4])),t==="y"&&(r.WebKitCSSMatrix?n=i.m42:a.length===16?n=parseFloat(a[13]):n=parseFloat(a[5])),n||0}function Ji(e,t){if(t===void 0&&(t=[]),typeof e=="string")return e;var r=[],a="&",n;function i(o){if(t.length>0){for(var l="",u=0;u<t.length;u+=1)u===0?l+=t[u]:l+="["+encodeURIComponent(t[u])+"]";return l+"["+encodeURIComponent(o)+"]"}return encodeURIComponent(o)}function s(o){return encodeURIComponent(o)}return Object.keys(e).forEach(function(o){var l;if(Array.isArray(e[o])){l=[];for(var u=0;u<e[o].length;u+=1)!Array.isArray(e[o][u])&&typeof e[o][u]=="object"?(n=t.slice(),n.push(o),n.push(String(u)),l.push(Ji(e[o][u],n))):l.push(i(o)+"[]="+s(e[o][u]));l.length>0&&r.push(l.join(a))}else e[o]===null||e[o]===""?r.push(i(o)+"="):typeof e[o]=="object"?(n=t.slice(),n.push(o),l=Ji(e[o],n),l!==""&&r.push(l)):typeof e[o]!="undefined"&&e[o]!==""?r.push(i(o)+"="+s(e[o])):e[o]===""&&r.push(i(o))}),r.join(a)}function sc(e){return typeof e=="object"&&e!==null&&e.constructor&&e.constructor===Object}function m7(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var a=t[0];t.splice(0,1);for(var n=t,i=0;i<n.length;i+=1){var s=t[i];if(s!=null)for(var o=Object.keys(Object(s)),l=0,u=o.length;l<u;l+=1){var c=o[l],d=Object.getOwnPropertyDescriptor(s,c);d!==void 0&&d.enumerable&&(a[c]=s[c])}}return a}function se(){for(var e=!0,t,r,a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];typeof n[0]=="boolean"?(e=n[0],t=n[1],n.splice(0,2),r=n):(t=n[0],n.splice(0,1),r=n);for(var s=0;s<r.length;s+=1){var o=n[s];if(o!=null)for(var l=Object.keys(Object(o)),u=0,c=l.length;u<c;u+=1){var d=l[u],p=Object.getOwnPropertyDescriptor(o,d);p!==void 0&&p.enumerable&&(e?sc(t[d])&&sc(o[d])?se(t[d],o[d]):!sc(t[d])&&sc(o[d])?(t[d]={},se(t[d],o[d])):t[d]=o[d]:t[d]=o[d])}}return t}function KE(e){var t=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(a,n,i,s){return n+n+i+i+s+s}),r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return r?r.slice(1).map(function(a){return parseInt(a,16)}):null}function qi(e,t,r){var a=[e,t,r].map(function(n){var i=n.toString(16);return i.length===1?"0"+i:i}).join("");return"#"+a}function Ov(e,t,r){e/=255,t/=255,r/=255;var a=Math.max(e,t,r),n=Math.min(e,t,r),i=a-n,s;i===0?s=0:a===e?s=(t-r)/i%6:a===t?s=(r-e)/i+2:a===r&&(s=(e-t)/i+4);var o=(n+a)/2,l=i===0?0:i/(1-Math.abs(2*o-1));return s<0&&(s=360/60+s),[s*60,l,o]}function xc(e,t,r){var a=(1-Math.abs(2*r-1))*t,n=e/60,i=a*(1-Math.abs(n%2-1)),s;Number.isNaN(e)||typeof e=="undefined"?s=[0,0,0]:n<=1?s=[a,i,0]:n<=2?s=[i,a,0]:n<=3?s=[0,a,i]:n<=4?s=[0,i,a]:n<=5?s=[i,0,a]:n<=6&&(s=[a,0,i]);var o=r-a/2;return s.map(function(l){return Math.max(0,Math.min(255,Math.round(255*(l+o))))})}function es(e,t,r){var a={h:e,s:0,l:0},n={h:e,s:t,b:r};return a.l=(2-n.s)*n.b/2,a.s=a.l&&a.l<1?n.s*n.b/(a.l<.5?a.l*2:2-a.l*2):a.s,[a.h,a.s,a.l]}function lf(e,t,r){var a={h:e,s:0,b:0},n={h:e,s:t,l:r},i=n.s*(n.l<.5?n.l:1-n.l);return a.b=n.l+i,a.s=n.l>0?2*i/a.b:a.s,[a.h,a.s,a.b]}function g7(){for(var e,t,r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];if(a.length===1?(e=a[0],t=KE(e)):a.length===3&&(t=a,e=qi.apply(void 0,t)),!t)return{};var i=Ov.apply(void 0,t),s=[i[0],i[1],Math.max(0,i[2]-.08)],o=[i[0],i[1],Math.max(0,i[2]+.08)],l=qi.apply(void 0,xc.apply(void 0,s)),u=qi.apply(void 0,xc.apply(void 0,o));return{"--f7-theme-color":e,"--f7-theme-color-rgb":t.join(", "),"--f7-theme-color-shade":l,"--f7-theme-color-tint":u}}function En(e,t){Object.keys(t).forEach(function(r){sc(t[r])&&Object.keys(t[r]).forEach(function(a){typeof t[r][a]=="function"&&(t[r][a]=t[r][a].bind(e))}),e[r]=t[r]})}function DR(){for(var e=[],t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return r.forEach(function(n){Array.isArray(n)?e.push.apply(e,DR.apply(void 0,n)):e.push(n)}),e}var O2=Object.freeze(Object.defineProperty({__proto__:null,uniqueNumber:f7,id:Db,mdPreloaderContent:Qo,iosPreloaderContent:Jo,auroraPreloaderContent:el,eventNameToColonCase:of,deleteProps:$r,requestAnimationFrame:Rv,cancelAnimationFrame:h7,nextTick:qr,nextFrame:aa,now:sa,parseUrlQuery:th,getTranslate:Os,serializeObject:Ji,isObject:sc,merge:m7,extend:se,colorHexToRgb:KE,colorRgbToHex:qi,colorRgbToHsl:Ov,colorHslToRgb:xc,colorHsbToHsl:es,colorHslToHsb:lf,colorThemeCSSProperties:g7,bindMethods:En,flattenArray:DR},Symbol.toStringTag,{value:"Module"})),fw;function v7(){var e=De(),t=nt();return{touch:!!("ontouchstart"in e||e.DocumentTouch&&t instanceof e.DocumentTouch),pointerEvents:!!e.PointerEvent&&"maxTouchPoints"in e.navigator&&e.navigator.maxTouchPoints>=0,passiveListener:function(){var a=!1;try{var n=Object.defineProperty({},"passive",{get:function(){a=!0}});e.addEventListener("testPassiveListener",null,n)}catch{}return a}(),intersectionObserver:function(){return"IntersectionObserver"in e}()}}function Ft(){return fw||(fw=v7()),fw}var hw;function b7(e){var t=e===void 0?{}:e,r=t.userAgent,a=Ft(),n=De(),i=n.navigator.platform,s=r||n.navigator.userAgent,o={ios:!1,android:!1,androidChrome:!1,desktop:!1,iphone:!1,ipod:!1,ipad:!1,edge:!1,ie:!1,firefox:!1,macos:!1,windows:!1,cordova:!!(n.cordova||n.phonegap),phonegap:!!(n.cordova||n.phonegap),electron:!1,capacitor:!!n.Capacitor,nwjs:!1},l=n.screen.width,u=n.screen.height,c=s.match(/(Android);?[\s\/]+([\d.]+)?/),d=s.match(/(iPad).*OS\s([\d_]+)/),p=s.match(/(iPod)(.*OS\s([\d_]+))?/),f=!d&&s.match(/(iPhone\sOS|iOS|iPhone;\sCPU\sOS)\s([\d_]+)/),h=s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0,m=s.indexOf("Edge/")>=0,g=s.indexOf("Gecko/")>=0&&s.indexOf("Firefox/")>=0,v=i==="Win32",b=s.toLowerCase().indexOf("electron")>=0,y=typeof nw!="undefined"&&typeof process!="undefined"&&typeof process.versions!="undefined"&&typeof process.versions.nw!="undefined",w=i==="MacIntel",x=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];!d&&w&&a.touch&&x.indexOf(l+"x"+u)>=0&&(d=s.match(/(Version)\/([\d.]+)/),d||(d=[0,1,"13_0_0"]),w=!1),o.ie=h,o.edge=m,o.firefox=g,c&&(o.os="android",o.osVersion=c[2],o.android=!0,o.androidChrome=s.toLowerCase().indexOf("chrome")>=0),(d||f||p)&&(o.os="ios",o.ios=!0),f&&!p&&(o.osVersion=f[2].replace(/_/g,"."),o.iphone=!0),d&&(o.osVersion=d[2].replace(/_/g,"."),o.ipad=!0),p&&(o.osVersion=p[3]?p[3].replace(/_/g,"."):null,o.ipod=!0),o.ios&&o.osVersion&&s.indexOf("Version/")>=0&&o.osVersion.split(".")[0]==="10"&&(o.osVersion=s.toLowerCase().split("version/")[1].split(" ")[0]),o.webView=!!((f||d||p)&&(s.match(/.*AppleWebKit(?!.*Safari)/i)||n.navigator.standalone))||n.matchMedia&&n.matchMedia("(display-mode: standalone)").matches,o.webview=o.webView,o.standalone=o.webView,o.desktop=!(o.ios||o.android)||b||y,o.desktop&&(o.electron=b,o.nwjs=y,o.macos=w,o.windows=v,o.macos&&(o.os="macos"),o.windows&&(o.os="windows")),o.pixelRatio=n.devicePixelRatio||1;var k="(prefers-color-scheme: dark)",C="(prefers-color-scheme: light)";return o.prefersColorScheme=function(){var $;return n.matchMedia&&n.matchMedia(C).matches&&($="light"),n.matchMedia&&n.matchMedia(k).matches&&($="dark"),$},o}function Ct(e,t){return e===void 0&&(e={}),(!hw||t)&&(hw=b7(e)),hw}var y7=function(){function e(r){r===void 0&&(r=[]);var a=this;a.eventsParents=r,a.eventsListeners={}}var t=e.prototype;return t.on=function(a,n,i){var s=this;if(typeof n!="function")return s;var o=i?"unshift":"push";return a.split(" ").forEach(function(l){s.eventsListeners[l]||(s.eventsListeners[l]=[]),s.eventsListeners[l][o](n)}),s},t.once=function(a,n,i){var s=this;if(typeof n!="function")return s;function o(){s.off(a,o),o.f7proxy&&delete o.f7proxy;for(var l=arguments.length,u=new Array(l),c=0;c<l;c++)u[c]=arguments[c];n.apply(s,u)}return o.f7proxy=n,s.on(a,o,i)},t.off=function(a,n){var i=this;return i.eventsListeners&&a.split(" ").forEach(function(s){typeof n=="undefined"?i.eventsListeners[s]=[]:i.eventsListeners[s]&&i.eventsListeners[s].forEach(function(o,l){(o===n||o.f7proxy&&o.f7proxy===n)&&i.eventsListeners[s].splice(l,1)})}),i},t.emit=function(){var a=this;if(!a.eventsListeners)return a;for(var n,i,s,o,l=arguments.length,u=new Array(l),c=0;c<l;c++)u[c]=arguments[c];typeof u[0]=="string"||Array.isArray(u[0])?(n=u[0],i=u.slice(1,u.length),s=a,o=a.eventsParents):(n=u[0].events,i=u[0].data,s=u[0].context||a,o=u[0].local?[]:u[0].parents||a.eventsParents);var d=Array.isArray(n)?n:n.split(" "),p=d.map(function(h){return h.replace("local::","")}),f=d.filter(function(h){return h.indexOf("local::")<0});return p.forEach(function(h){if(a.eventsListeners&&a.eventsListeners[h]){var m=[];a.eventsListeners[h].forEach(function(g){m.push(g)}),m.forEach(function(g){g.apply(s,i)})}}),o&&o.length>0&&o.forEach(function(h){h.emit.apply(h,[f].concat(i))}),a},e}(),FR=y7;function P2(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function w7(e,t,r){return t&&P2(e.prototype,t),r&&P2(e,r),e}function x7(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k7(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Wx(e,t)}function Wx(e,t){return Wx=Object.setPrototypeOf||function(a,n){return a.__proto__=n,a},Wx(e,t)}var E7=function(e){k7(t,e);function t(a,n){var i;a===void 0&&(a={}),n===void 0&&(n=[]),i=e.call(this,n)||this;var s=x7(i);return s.params=a,s.params&&s.params.on&&Object.keys(s.params.on).forEach(function(o){s.on(o,s.params.on[o])}),i}var r=t.prototype;return r.useModuleParams=function(n,i){if(n.params){var s={};Object.keys(n.params).forEach(function(o){typeof i[o]!="undefined"&&(s[o]=se({},i[o]))}),se(i,n.params),Object.keys(s).forEach(function(o){se(i[o],s[o])})}},r.useModulesParams=function(n){var i=this;!i.modules||Object.keys(i.modules).forEach(function(s){var o=i.modules[s];o.params&&se(n,o.params)})},r.useModule=function(n,i){n===void 0&&(n=""),i===void 0&&(i={});var s=this;if(!!s.modules){var o=typeof n=="string"?s.modules[n]:n;!o||(o.instance&&Object.keys(o.instance).forEach(function(l){var u=o.instance[l];typeof u=="function"?s[l]=u.bind(s):s[l]=u}),o.on&&s.on&&Object.keys(o.on).forEach(function(l){s.on(l,o.on[l])}),o.vnode&&(s.vnodeHooks||(s.vnodeHooks={}),Object.keys(o.vnode).forEach(function(l){Object.keys(o.vnode[l]).forEach(function(u){var c=o.vnode[l][u];s.vnodeHooks[u]||(s.vnodeHooks[u]={}),s.vnodeHooks[u][l]||(s.vnodeHooks[u][l]=[]),s.vnodeHooks[u][l].push(c.bind(s))})})),o.create&&o.create.bind(s)(i))}},r.useModules=function(n){n===void 0&&(n={});var i=this;!i.modules||Object.keys(i.modules).forEach(function(s){var o=n[s]||{};i.useModule(s,o)})},t.installModule=function(n){var i=this;i.prototype.modules||(i.prototype.modules={});var s=n.name||Object.keys(i.prototype.modules).length+"_"+sa();if(i.prototype.modules[s]=n,n.proto&&Object.keys(n.proto).forEach(function(c){i.prototype[c]=n.proto[c]}),n.static&&Object.keys(n.static).forEach(function(c){i[c]=n.static[c]}),n.install){for(var o=arguments.length,l=new Array(o>1?o-1:0),u=1;u<o;u++)l[u-1]=arguments[u];n.install.apply(i,l)}return i},t.use=function(n){var i=this;if(Array.isArray(n))return n.forEach(function(u){return i.installModule(u)}),i;for(var s=arguments.length,o=new Array(s>1?s-1:0),l=1;l<s;l++)o[l-1]=arguments[l];return i.installModule.apply(i,[n].concat(o))},w7(t,null,[{key:"components",set:function(n){var i=this;!i.use||i.use(n)}}]),t}(FR),rr=E7;function Rf(e,t,r){return C7()?Rf=Reflect.construct:Rf=function(n,i,s){var o=[null];o.push.apply(o,i);var l=Function.bind.apply(n,o),u=new l;return s&&Hx(u,s.prototype),u},Rf.apply(null,arguments)}function C7(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Hx(e,t){return Hx=Object.setPrototypeOf||function(a,n){return a.__proto__=n,a},Hx(e,t)}function Ir(e){e===void 0&&(e={});var t=e,r=t.defaultSelector,a=t.constructor,n=t.domProp,i=t.app,s=t.addMethods,o={create:function(){for(var u=arguments.length,c=new Array(u),d=0;d<u;d++)c[d]=arguments[d];return i?Rf(a,[i].concat(c)):Rf(a,c)},get:function(u){if(u===void 0&&(u=r),u instanceof a)return u;var c=T(u);if(c.length!==0)return c[0][n]},destroy:function(u){var c=o.get(u);if(c&&c.destroy)return c.destroy()}};return s&&Array.isArray(s)&&s.forEach(function(l){o[l]=function(u){u===void 0&&(u=r);for(var c=o.get(u),d=arguments.length,p=new Array(d>1?d-1:0),f=1;f<d;f++)p[f-1]=arguments[f];if(c&&c[l])return c[l].apply(c,p)}}),o}function Pv(){return Pv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Pv.apply(this,arguments)}function cs(e){e===void 0&&(e={});var t=e,r=t.defaultSelector,a=t.constructor,n=t.app,i=se(Ir({defaultSelector:r,constructor:a,app:n,domProp:"f7Modal"}),{open:function(o,l,u){var c=T(o);if(c.length>1&&u){var d=T(u).parents(".page");d.length&&c.each(function(h){var m=T(h);m.parents(d)[0]===d[0]&&(c=m)})}if(c.length>1&&(c=c.eq(c.length-1)),!!c.length){var p=c[0].f7Modal;if(!p){var f=c.dataset();p=new a(n,Pv({el:c},f))}return p.open(l)}},close:function(o,l,u){o===void 0&&(o=r);var c=T(o);if(!!c.length){if(c.length>1){var d;if(u){var p=T(u);p.length&&(d=p.parents(c))}d&&d.length>0?c=d:c=c.eq(c.length-1)}var f=c[0].f7Modal;if(!f){var h=c.dataset();f=new a(n,Pv({el:c},h))}return f.close(l)}}});return i}var D2=[];function S7(e){var t=this,r=De(),a=nt();return new Promise(function(n,i){var s=t.instance,o,l,u;if(!e){i(new Error("Framework7: Lazy module must be specified"));return}function c(g){t.use(g),s&&(s.useModuleParams(g,s.params),s.useModule(g))}if(typeof e=="string"){var d=e.match(/([a-z0-9-]*)/i);if(e.indexOf(".")<0&&d&&d[0].length===e.length){if(!s||s&&!s.params.lazyModulesPath){i(new Error('Framework7: "lazyModulesPath" app parameter must be specified to fetch module by name'));return}o=s.params.lazyModulesPath+"/"+e+"/"+e+".js"}else o=e}else typeof e=="function"?u=e:l=e;if(u){var p=u(t,!1);if(!p){i(new Error("Framework7: Can't find Framework7 component in specified component function"));return}if(t.prototype.modules&&t.prototype.modules[p.name]){n();return}c(p),n()}if(l){var f=l;if(!f){i(new Error("Framework7: Can't find Framework7 component in specified component"));return}if(t.prototype.modules&&t.prototype.modules[f.name]){n();return}c(f),n()}if(o){if(D2.indexOf(o)>=0){n();return}D2.push(o);var h=new Promise(function(g,v){t.request.get(o,function(b){var y=Db(),w="f7_component_loader_callback_"+y,x=a.createElement("script");x.innerHTML="window."+w+" = function (Framework7, Framework7AutoInstallComponent) {return "+b.trim()+"}",T("head").append(x);var k=r[w];delete r[w],T(x).remove();var C=k(t,!1);if(!C){v(new Error("Framework7: Can't find Framework7 component in "+o+" file"));return}if(t.prototype.modules&&t.prototype.modules[C.name]){g();return}c(C),g()},function(b,y){v(b,y)})}),m=new Promise(function(g){t.request.get(o.replace(".js",s.rtl?".rtl.css":".css"),function(v){var b=a.createElement("style");b.innerHTML=v,T("head").append(b),g()},function(){g()})});Promise.all([h,m]).then(function(){n()}).catch(function(g){i(g)})}})}function F2(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function $7(e,t,r){return t&&F2(e.prototype,t),r&&F2(e,r),e}function L2(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function I7(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Ux(e,t)}function Ux(e,t){return Ux=Object.setPrototypeOf||function(a,n){return a.__proto__=n,a},Ux(e,t)}var _c=function(e){I7(t,e);function t(a){var n;if(a===void 0&&(a={}),n=e.call(this,a)||this,t.instance&&typeof window!="undefined")throw new Error("Framework7 is already initialized and can't be initialized more than once");var i=Ct({userAgent:a.userAgent||void 0}),s=Ft(),o=se({},a),l=L2(n);l.device=i,l.support=s;var u=De(),c=nt();t.instance=l;var d={version:"1.0.0",id:"io.framework7.myapp",el:"body",theme:"auto",language:u.navigator.language,routes:[],name:"Framework7",lazyModulesPath:null,initOnDeviceReady:!0,init:!0,autoDarkTheme:!1,iosTranslucentBars:!0,iosTranslucentModals:!0,component:void 0,componentUrl:void 0,userAgent:null,url:null};return l.useModulesParams(d),l.params=se(d,a),se(l,{id:l.params.id,name:l.params.name,version:l.params.version,routes:l.params.routes,language:l.params.language,theme:function(){return l.params.theme==="auto"?i.ios?"ios":i.desktop&&i.electron?"aurora":"md":l.params.theme}(),passedParams:o,online:u.navigator.onLine}),a.store&&(l.params.store=a.store),l.$el&&l.$el[0]&&(l.$el[0].f7=l),l.useModules(),l.initStore(),l.params.init&&(i.cordova&&l.params.initOnDeviceReady?T(c).on("deviceready",function(){l.init()}):l.init()),l||L2(n)}var r=t.prototype;return r.mount=function(n){var i=this,s=De(),o=nt(),l=T(n||i.params.el).eq(0);i.$el=l,i.$el&&i.$el[0]&&(i.el=i.$el[0],i.el.f7=i,i.rtl=l.css("direction")==="rtl");var u="(prefers-color-scheme: dark)",c="(prefers-color-scheme: light)";i.mq={},s.matchMedia&&(i.mq.dark=s.matchMedia(u),i.mq.light=s.matchMedia(c)),i.colorSchemeListener=function(p){var f=p.matches,h=p.media;if(!!f){var m=o.querySelector("html");h===u?(m.classList.add("theme-dark"),i.darkTheme=!0,i.emit("darkThemeChange",!0)):h===c&&(m.classList.remove("theme-dark"),i.darkTheme=!1,i.emit("darkThemeChange",!1))}},i.emit("mount")},r.initStore=function(){var n=this;typeof n.params.store!="undefined"&&n.params.store.__store?n.store=n.params.store:n.store=n.createStore(n.params.store)},r.enableAutoDarkTheme=function(){var n=De(),i=nt();if(!!n.matchMedia){var s=this,o=i.querySelector("html");s.mq.dark&&s.mq.light&&(s.mq.dark.addListener(s.colorSchemeListener),s.mq.light.addListener(s.colorSchemeListener)),s.mq.dark&&s.mq.dark.matches?(o.classList.add("theme-dark"),s.darkTheme=!0,s.emit("darkThemeChange",!0)):s.mq.light&&s.mq.light.matches&&(o.classList.remove("theme-dark"),s.darkTheme=!1,s.emit("darkThemeChange",!1))}},r.disableAutoDarkTheme=function(){var n=De();if(!!n.matchMedia){var i=this;i.mq.dark&&i.mq.dark.removeListener(i.colorSchemeListener),i.mq.light&&i.mq.light.removeListener(i.colorSchemeListener)}},r.initAppComponent=function(n){var i=this;i.router.componentLoader(i.params.component,i.params.componentUrl,{componentOptions:{el:i.$el[0]}},function(s){i.$el=T(s),i.$el[0].f7=i,i.$elComponent=s.f7Component,i.el=i.$el[0],n&&n()},function(){})},r.init=function(n){var i=this;i.mount(n);var s=function(){if(!i.initialized){i.$el.addClass("framework7-initializing"),i.rtl&&T("html").attr("dir","rtl"),i.params.autoDarkTheme&&i.enableAutoDarkTheme();var l=De();l.addEventListener("offline",function(){i.online=!1,i.emit("offline"),i.emit("connection",!1)}),l.addEventListener("online",function(){i.online=!0,i.emit("online"),i.emit("connection",!0)}),i.$el.addClass("framework7-root"),T("html").removeClass("ios md aurora").addClass(i.theme);var u=i.device;i.params.iosTranslucentBars&&i.theme==="ios"&&u.ios&&T("html").addClass("ios-translucent-bars"),i.params.iosTranslucentModals&&i.theme==="ios"&&u.ios&&T("html").addClass("ios-translucent-modals"),aa(function(){i.$el.removeClass("framework7-initializing")}),i.initialized=!0,i.emit("init")}};return i.params.component||i.params.componentUrl?i.initAppComponent(function(){s()}):s(),i},r.loadModule=function(){return t.loadModule.apply(t,arguments)},r.loadModules=function(){return t.loadModules.apply(t,arguments)},r.getVnodeHooks=function(n,i){var s=this;return!s.vnodeHooks||!s.vnodeHooks[n]?[]:s.vnodeHooks[n][i]||[]},$7(t,[{key:"$",get:function(){return T}}],[{key:"Dom7",get:function(){return T}},{key:"$",get:function(){return T}},{key:"device",get:function(){return Ct()}},{key:"support",get:function(){return Ft()}},{key:"Class",get:function(){return rr}},{key:"Events",get:function(){return FR}}]),t}(rr);_c.ModalMethods=cs;_c.ConstructorMethods=Ir;_c.loadModule=S7;_c.loadModules=function(t){return Promise.all(t.map(function(r){return _c.loadModule(r)}))};var to=_c;function T7(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function N7(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,rh(e,t)}function jx(e){var t=typeof Map=="function"?new Map:void 0;return jx=function(a){if(a===null||!_7(a))return a;if(typeof a!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t!="undefined"){if(t.has(a))return t.get(a);t.set(a,n)}function n(){return Yg(a,arguments,Gx(this).constructor)}return n.prototype=Object.create(a.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),rh(n,a)},jx(e)}function Yg(e,t,r){return A7()?Yg=Reflect.construct:Yg=function(n,i,s){var o=[null];o.push.apply(o,i);var l=Function.bind.apply(n,o),u=new l;return s&&rh(u,s.prototype),u},Yg.apply(null,arguments)}function A7(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _7(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function rh(e,t){return rh=Object.setPrototypeOf||function(a,n){return a.__proto__=n,a},rh(e,t)}function Gx(e){return Gx=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},Gx(e)}var xs={},M7=0,mw=function(t){Object.assign(this,t)},Ya=function(e){N7(t,e);function t(r){var a;return a=e.call(this)||this,Object.assign(T7(a),r),a}return t}(jx(Error)),Ih=function(t){return new Promise(function(r,a){var n=De(),i=nt(),s=se({},xs);"beforeCreate beforeOpen beforeSend error complete success statusCode".split(" ").forEach(function(S){delete s[S]});var o=se({url:n.location.toString(),method:"GET",data:!1,async:!0,cache:!0,user:"",password:"",headers:{},xhrFields:{},statusCode:{},processData:!0,dataType:"text",contentType:"application/x-www-form-urlencoded",timeout:0},s),l,u=se({},o,t);if(t.abortController&&(u.abortController=t.abortController),u.abortController&&u.abortController.canceled){a(new Ya({options:u,status:"canceled",message:"canceled"}));return}function c(S){for(var A,R,O=arguments.length,D=new Array(O>1?O-1:0),z=1;z<O;z++)D[z-1]=arguments[z];return xs[S]&&(A=xs[S].apply(xs,D)),u[S]&&(R=u[S].apply(u,D)),typeof A!="boolean"&&(A=!0),typeof R!="boolean"&&(R=!0),u.abortController&&u.abortController.canceled&&(S==="beforeCreate"||S==="beforeOpen"||S==="beforeSend")?!1:A&&R}if(l=c("beforeCreate",u),l===!1){a(new Ya({options:u,status:"canceled",message:"canceled"}));return}u.type&&(u.method=u.type);var d=u.url.indexOf("?")>=0?"&":"?",p=u.method.toUpperCase();if((p==="GET"||p==="HEAD"||p==="OPTIONS"||p==="DELETE")&&u.data){var f;typeof u.data=="string"?u.data.indexOf("?")>=0?f=u.data.split("?")[1]:f=u.data:f=Ji(u.data),f.length&&(u.url+=d+f,d==="?"&&(d="&"))}if(u.dataType==="json"&&u.url.indexOf("callback=")>=0){var h="f7jsonp_"+(Date.now()+(M7+=1)),m,g=u.url.split("callback="),v=g[0]+"callback="+h;if(g[1].indexOf("&")>=0){var b=g[1].split("&").filter(function(S){return S.indexOf("=")>0}).join("&");b.length>0&&(v+="&"+b)}var y=i.createElement("script");y.type="text/javascript",y.onerror=function(){clearTimeout(m),c("error",null,"scripterror","scripterror"),a(new Ya({options:u,status:"scripterror",message:"scripterror"})),c("complete",null,"scripterror")},y.src=v,n[h]=function(A){clearTimeout(m),c("success",A),y.parentNode.removeChild(y),y=null,delete n[h],r(new mw({options:u,data:A}))},i.querySelector("head").appendChild(y),u.timeout>0&&(m=setTimeout(function(){y.parentNode.removeChild(y),y=null,c("error",null,"timeout","timeout"),a(new Ya({options:u,status:"timeout",message:"timeout"}))},u.timeout));return}(p==="GET"||p==="HEAD"||p==="OPTIONS"||p==="DELETE")&&u.cache===!1&&(u.url+=d+"_nocache"+Date.now());var w=new XMLHttpRequest;if(u.abortController){var x=!1;u.abortController.onAbort=function(){x||(x=!0,w.abort(),a(new Ya({options:u,xhr:w,status:"canceled",message:"canceled"})))}}if(w.requestUrl=u.url,w.requestParameters=u,l=c("beforeOpen",w,u),l===!1){a(new Ya({options:u,xhr:w,status:"canceled",message:"canceled"}));return}w.open(p,u.url,u.async,u.user,u.password);var k=null;if((p==="POST"||p==="PUT"||p==="PATCH")&&u.data)if(u.processData){var C=[ArrayBuffer,Blob,Document,FormData];if(C.indexOf(u.data.constructor)>=0)k=u.data;else{var E="---------------------------"+Date.now().toString(16);u.contentType==="multipart/form-data"?w.setRequestHeader("Content-Type","multipart/form-data; boundary="+E):w.setRequestHeader("Content-Type",u.contentType),k="";var $=Ji(u.data);if(u.contentType==="multipart/form-data"){$=$.split("&");for(var N=[],I=0;I<$.length;I+=1)N.push('Content-Disposition: form-data; name="'+$[I].split("=")[0]+`"\r
\r
`+$[I].split("=")[1]+`\r
`);k="--"+E+`\r
`+N.join("--"+E+`\r
`)+"--"+E+`--\r
`}else u.contentType==="application/json"?k=JSON.stringify(u.data):k=$}}else k=u.data,w.setRequestHeader("Content-Type",u.contentType);if(u.dataType==="json"&&(!u.headers||!u.headers.Accept)&&w.setRequestHeader("Accept","application/json"),u.headers&&Object.keys(u.headers).forEach(function(S){typeof u.headers[S]!="undefined"&&w.setRequestHeader(S,u.headers[S])}),typeof u.crossDomain=="undefined"&&(u.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(u.url)&&RegExp.$2!==n.location.host),u.crossDomain||w.setRequestHeader("X-Requested-With","XMLHttpRequest"),u.xhrFields&&se(w,u.xhrFields),w.onload=function(){if(w.status>=200&&w.status<300||w.status===0){var A;if(u.dataType==="json"){var R;try{A=JSON.parse(w.responseText)}catch{R=!0}R?(c("error",w,"parseerror","parseerror"),a(new Ya({options:u,xhr:w,status:"parseerror",message:"parseerror"}))):(c("success",A,w.status,w),r(new mw({options:u,data:A,status:w.status,xhr:w})))}else A=w.responseType==="text"||w.responseType===""?w.responseText:w.response,c("success",A,w.status,w),r(new mw({options:u,data:A,status:w.status,xhr:w}))}else c("error",w,w.status,w.statusText),a(new Ya({options:u,xhr:w,status:w.status,message:w.statusText}));u.statusCode&&(xs.statusCode&&xs.statusCode[w.status]&&xs.statusCode[w.status](w),u.statusCode[w.status]&&u.statusCode[w.status](w)),c("complete",w,w.status)},w.onerror=function(){c("error",w,w.status,w.status),a(new Ya({options:u,xhr:w,status:w.status,message:w.statusText})),c("complete",w,"error")},u.timeout>0&&(w.timeout=u.timeout,w.ontimeout=function(){c("error",w,"timeout","timeout"),a(new Ya({options:u,xhr:w,status:"timeout",message:"timeout"})),c("complete",w,"timeout")}),l=c("beforeSend",w,u),l===!1){a(new Ya({options:u,xhr:w,status:"canceled",message:"canceled"}));return}w.send(k)})};function Bp(e){for(var t=[],r=t[0],a=t[1],n=t[2],i=t[3],s=t[4],o=arguments.length,l=new Array(o>1?o-1:0),u=1;u<o;u++)l[u-1]=arguments[u];typeof l[1]=="function"?(r=l[0],n=l[1],i=l[2],s=l[3]):(r=l[0],a=l[1],n=l[2],i=l[3],s=l[4]),[n,i].forEach(function(d){typeof d=="string"&&(s=d,d===n?n=void 0:i=void 0)}),s=s||(e==="json"||e==="postJSON"?"json":void 0);var c={url:r,method:e==="post"||e==="postJSON"?"POST":"GET",data:a,success:n,error:i,dataType:s};return e==="postJSON"&&se(c,{contentType:"application/json",processData:!1,crossDomain:!0,data:typeof a=="string"?a:JSON.stringify(a)}),Ih(c)}Object.assign(Ih,{get:function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return Bp.apply(void 0,["get"].concat(r))},post:function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return Bp.apply(void 0,["post"].concat(r))},json:function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return Bp.apply(void 0,["json"].concat(r))},getJSON:function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return Bp.apply(void 0,["json"].concat(r))},postJSON:function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return Bp.apply(void 0,["postJSON"].concat(r))}});Ih.abortController=function(){var e={canceled:!1,onAbort:null,abort:function(){e.canceled=!0,e.onAbort&&e.onAbort()}};return e};Ih.setup=function(t){t.type&&!t.method&&se(t,{method:t.type}),se(xs,t)};var z2=Ih,LR={name:"device",static:{getDevice:Ct},on:{init:function(){var t=nt(),r=Ct(),a=[],n=t.querySelector("html"),i=t.querySelector('meta[name="apple-mobile-web-app-status-bar-style"]');!n||(r.standalone&&r.ios&&i&&i.content==="black-translucent"&&a.push("device-full-viewport"),a.push("device-pixel-ratio-"+Math.floor(r.pixelRatio)),r.os&&!r.desktop?a.push("device-"+r.os):r.desktop&&(a.push("device-desktop"),r.os&&a.push("device-"+r.os)),(r.cordova||r.phonegap)&&a.push("device-cordova"),r.capacitor&&a.push("device-capacitor"),a.forEach(function(s){n.classList.add(s)}))}}},zR={name:"support",static:{getSupport:Ft}},BR={name:"utils",proto:{utils:O2},static:{utils:O2}},VR={name:"resize",create:function(){var t=this;t.getSize=function(){if(!t.el)return{width:0,height:0,left:0,top:0};var r=t.$el.offset(),a=[t.el.offsetWidth,t.el.offsetHeight,r.left,r.top],n=a[0],i=a[1],s=a[2],o=a[3];return t.width=n,t.height=i,t.left=s,t.top=o,{width:n,height:i,left:s,top:o}}},on:{init:function(){var t=this,r=De();t.getSize(),r.addEventListener("resize",function(){t.emit("resize")},!1),r.addEventListener("orientationchange",function(){t.emit("orientationchange")})},orientationchange:function(){var t=nt(),r=Ct();r.ipad&&(t.body.scrollLeft=0,setTimeout(function(){t.body.scrollLeft=0},0))},resize:function(){var t=this;t.getSize()}}},WR={name:"request",proto:{request:z2},static:{request:z2}};function R7(){var e=this,t=Ct(),r=Ft(),a=De(),n=nt(),i=e.params.touch,s=i[e.theme+"TouchRipple"];t.ios&&t.webView&&a.addEventListener("touchstart",function(){});var o,l,u,c,d,p,f,h,m,g,v,b;function y(he){var Re=T(he),Ne=Re.parents(i.activeStateElements);if(Re.closest(".no-active-state").length)return null;var je;if(Re.is(i.activeStateElements)&&(je=Re),Ne.length>0&&(je=je?je.add(Ne):Ne),je&&je.length>1){for(var ve=[],Ge,Ze=0;Ze<je.length;Ze+=1)Ge||(ve.push(je[Ze]),(je.eq(Ze).hasClass("prevent-active-state-propagation")||je.eq(Ze).hasClass("no-active-state-propagation"))&&(Ge=!0));je=T(ve)}return je||Re}function w(he){var Re=he.parents(".page-content");return Re.length>0}function x(){!h||h.addClass("active-state")}function k(){!h||(h.removeClass("active-state"),h=null)}function C(he){var Re=i.touchRippleElements,Ne=T(he);if(Ne.is(Re))return Ne.hasClass("no-ripple")?!1:Ne;if(Ne.parents(Re).length>0){var je=Ne.parents(Re).eq(0);return je.hasClass("no-ripple")?!1:je}return!1}function E(he,Re,Ne){!he||(g=e.touchRipple.create(e,he,Re,Ne))}function $(){!g||(g.remove(),g=void 0,v=void 0)}function N(he){if(v=C(he),!v||v.length===0){v=void 0;return}var Re=w(v);Re?(clearTimeout(b),b=setTimeout(function(){$(),E(v,o,l)},80)):($(),E(v,o,l))}function I(){clearTimeout(b),$()}function S(){!g&&v&&!c?(clearTimeout(b),E(v,o,l),setTimeout($,0)):$()}function A(he){var Re=y(he.target);Re&&(Re.addClass("active-state"),"which"in he&&he.which===3&&setTimeout(function(){T(".active-state").removeClass("active-state")},0)),s&&(o=he.pageX,l=he.pageY,N(he.target,he.pageX,he.pageY))}function R(){i.activeStateOnMouseMove||T(".active-state").removeClass("active-state"),s&&I()}function O(){T(".active-state").removeClass("active-state"),s&&S()}function D(){u=null,clearTimeout(m),clearTimeout(p),i.activeState&&k(),s&&S()}var z,U=!1,j=null,G=".dialog-button, .actions-button",L=!1,V=null;function H(he){return c=!1,d=!1,f=!1,z=void 0,he.targetTouches.length>1?(h&&k(),!0):(he.touches.length>1&&h&&k(),i.tapHold&&(p&&clearTimeout(p),p=setTimeout(function(){he&&he.touches&&he.touches.length>1||(d=!0,he.preventDefault(),f=!0,T(he.target).trigger("taphold",he),e.emit("taphold",he))},i.tapHoldDelay)),u=he.target,o=he.targetTouches[0].pageX,l=he.targetTouches[0].pageY,U=he.target.closest(".segmented-strong .button-active, .segmented-strong .tab-link-active"),L=e.theme==="ios"&&he.target.closest(G),U&&(j=U.closest(".segmented-strong")),i.activeState&&(h=y(u),h&&!w(h)?x():h&&(m=setTimeout(x,80))),s&&N(u),!0)}function Y(he){var Re,Ne,je=!0;he.type==="touchmove"&&(Re=he.targetTouches[0],Ne=i.touchClicksDistanceThreshold);var ve=he.targetTouches[0].pageX,Ge=he.targetTouches[0].pageY;if(typeof z=="undefined"&&(z=!!(z||Math.abs(Ge-l)>Math.abs(ve-o))),(L||!z&&U&&j)&&he.cancelable&&he.preventDefault(),!z&&U&&j){var Ze=n.elementFromPoint(he.targetTouches[0].clientX,he.targetTouches[0].clientY),qe=Ze.closest(".segmented-strong .button:not(.button-active):not(.tab-link-active)");qe&&j.contains(qe)&&(T(qe).trigger("click","f7Segmented"),u=qe)}if(Ne&&Re){var Ae=Re.pageX,rt=Re.pageY;(Math.abs(Ae-o)>Ne||Math.abs(rt-l)>Ne)&&(c=!0)}else c=!0;if(c){if(f=!0,L){var pt=n.elementFromPoint(he.targetTouches[0].clientX,he.targetTouches[0].clientY);V=pt.closest(G),V&&h&&h[0]===V?je=!1:V&&setTimeout(function(){h=y(V),x()})}i.tapHold&&clearTimeout(p),i.activeState&&je&&(clearTimeout(m),k()),s&&I()}}function K(he){return z=void 0,U=!1,j=null,L=!1,clearTimeout(m),clearTimeout(p),V&&(T(V).trigger("click","f7TouchMoveActivable"),V=null),n.activeElement===he.target?(i.activeState&&k(),s&&S(),!0):(i.activeState&&(x(),setTimeout(k,0)),s&&S(),i.tapHoldPreventClicks&&d||f?(he.cancelable&&he.preventDefault(),f=!0,!1):!0)}function Z(he){var Re=he&&he.detail&&he.detail==="f7Overswipe",Ne=he&&he.detail&&he.detail==="f7Segmented",je=he&&he.detail&&he.detail==="f7TouchMoveActivable",ve=f;return u&&he.target!==u?Re||Ne||je?ve=!1:ve=!0:je&&(ve=!1),i.tapHold&&i.tapHoldPreventClicks&&d&&(ve=!0),ve&&(he.stopImmediatePropagation(),he.stopPropagation(),he.preventDefault()),i.tapHold&&(p=setTimeout(function(){d=!1},t.ios||t.androidChrome?100:400)),f=!1,u=null,!ve}function le(he,Re){e.emit({events:he,data:[Re]})}function de(he){le("click",he)}function ie(he){le("touchstart touchstart:active",he)}function ue(he){le("touchmove touchmove:active",he)}function pe(he){le("touchend touchend:active",he)}function Se(he){le("touchstart:passive",he)}function ke(he){le("touchmove:passive",he)}function oe(he){le("touchend:passive",he)}var me=r.passiveListener?{passive:!0}:!1,$e=r.passiveListener?{passive:!0,capture:!0}:!0,Me=r.passiveListener?{passive:!1}:!1,Oe=r.passiveListener?{passive:!1,capture:!0}:!0;n.addEventListener("click",de,!0),r.passiveListener?(n.addEventListener(e.touchEvents.start,ie,Oe),n.addEventListener(e.touchEvents.move,ue,Me),n.addEventListener(e.touchEvents.end,pe,Me),n.addEventListener(e.touchEvents.start,Se,$e),n.addEventListener(e.touchEvents.move,ke,me),n.addEventListener(e.touchEvents.end,oe,me)):(n.addEventListener(e.touchEvents.start,function(he){ie(he),Se(he)},!0),n.addEventListener(e.touchEvents.move,function(he){ue(he),ke(he)},!1),n.addEventListener(e.touchEvents.end,function(he){pe(he),oe(he)},!1)),r.touch?(e.on("click",Z),e.on("touchstart",H),e.on("touchmove",Y),e.on("touchend",K),n.addEventListener("touchcancel",D,{passive:!0})):i.activeState&&(e.on("touchstart",A),e.on("touchmove",R),e.on("touchend",O),n.addEventListener("pointercancel",O,{passive:!0})),n.addEventListener("contextmenu",function(he){i.disableContextMenu&&(t.ios||t.android||t.cordova||a.Capacitor&&a.Capacitor.isNative)&&he.preventDefault(),s&&(h&&k(),S())})}var HR={name:"touch",params:{touch:{touchClicksDistanceThreshold:5,disableContextMenu:!1,tapHold:!1,tapHoldDelay:750,tapHoldPreventClicks:!0,activeState:!0,activeStateElements:"a, button, label, span, .actions-button, .stepper-button, .stepper-button-plus, .stepper-button-minus, .card-expandable, .menu-item, .link, .item-link, .accordion-item-toggle",activeStateOnMouseMove:!1,mdTouchRipple:!0,iosTouchRipple:!1,auroraTouchRipple:!1,touchRippleElements:".ripple, .link, .item-link, .list-button, .links-list a, .button, button, .input-clear-button, .dialog-button, .tab-link, .item-radio, .item-checkbox, .actions-button, .searchbar-disable-button, .fab a, .checkbox, .radio, .data-table .sortable-cell:not(.input-cell), .notification-close-button, .stepper-button, .stepper-button-minus, .stepper-button-plus, .menu-item-content, .list.accordion-list .accordion-item-toggle",touchRippleInsetElements:".ripple-inset, .icon-only, .searchbar-disable-button, .input-clear-button, .notification-close-button, .md .navbar .link.back"}},create:function(){var t=this,r=Ft();se(t,{touchEvents:{start:r.touch?"touchstart":r.pointerEvents?"pointerdown":"mousedown",move:r.touch?"touchmove":r.pointerEvents?"pointermove":"mousemove",end:r.touch?"touchend":r.pointerEvents?"pointerup":"mouseup"}})},on:{init:R7}};function O7(e){for(var t=[],r=0;r<e.length;){var a=e[r];if(a==="*"||a==="+"||a==="?"){t.push({type:"MODIFIER",index:r,value:e[r++]});continue}if(a==="\\"){t.push({type:"ESCAPED_CHAR",index:r++,value:e[r++]});continue}if(a==="{"){t.push({type:"OPEN",index:r,value:e[r++]});continue}if(a==="}"){t.push({type:"CLOSE",index:r,value:e[r++]});continue}if(a===":"){for(var n="",i=r+1;i<e.length;){var s=e.charCodeAt(i);if(s>=48&&s<=57||s>=65&&s<=90||s>=97&&s<=122||s===95){n+=e[i++];continue}break}if(!n)throw new TypeError("Missing parameter name at "+r);t.push({type:"NAME",index:r,value:n}),r=i;continue}if(a==="("){var o=1,l="",i=r+1;if(e[i]==="?")throw new TypeError('Pattern cannot start with "?" at '+i);for(;i<e.length;){if(e[i]==="\\"){l+=e[i++]+e[i++];continue}if(e[i]===")"){if(o--,o===0){i++;break}}else if(e[i]==="("&&(o++,e[i+1]!=="?"))throw new TypeError("Capturing groups are not allowed at "+i);l+=e[i++]}if(o)throw new TypeError("Unbalanced pattern at "+r);if(!l)throw new TypeError("Missing pattern at "+r);t.push({type:"PATTERN",index:r,value:l}),r=i;continue}t.push({type:"CHAR",index:r,value:e[r++]})}return t.push({type:"END",index:r,value:""}),t}function UR(e,t){t===void 0&&(t={});for(var r=O7(e),a=t.prefixes,n=a===void 0?"./":a,i="[^"+Ku(t.delimiter||"/#?")+"]+?",s=[],o=0,l=0,u="",c=function(k){if(l<r.length&&r[l].type===k)return r[l++].value},d=function(k){var C=c(k);if(C!==void 0)return C;var E=r[l],$=E.type,N=E.index;throw new TypeError("Unexpected "+$+" at "+N+", expected "+k)},p=function(){for(var k="",C;C=c("CHAR")||c("ESCAPED_CHAR");)k+=C;return k};l<r.length;){var f=c("CHAR"),h=c("NAME"),m=c("PATTERN");if(h||m){var g=f||"";n.indexOf(g)===-1&&(u+=g,g=""),u&&(s.push(u),u=""),s.push({name:h||o++,prefix:g,suffix:"",pattern:m||i,modifier:c("MODIFIER")||""});continue}var v=f||c("ESCAPED_CHAR");if(v){u+=v;continue}u&&(s.push(u),u="");var b=c("OPEN");if(b){var g=p(),y=c("NAME")||"",w=c("PATTERN")||"",x=p();d("CLOSE"),s.push({name:y||(w?o++:""),pattern:y&&!w?i:w,prefix:g,suffix:x,modifier:c("MODIFIER")||""});continue}d("END")}return s}function P7(e,t){return D7(UR(e,t),t)}function D7(e,t){t===void 0&&(t={});var r=ZE(t),a=t.encode,n=a===void 0?function(l){return l}:a,i=t.validate,s=i===void 0?!0:i,o=e.map(function(l){if(typeof l=="object")return new RegExp("^(?:"+l.pattern+")$",r)});return function(l){for(var u="",c=0;c<e.length;c++){var d=e[c];if(typeof d=="string"){u+=d;continue}var p=l?l[d.name]:void 0,f=d.modifier==="?"||d.modifier==="*",h=d.modifier==="*"||d.modifier==="+";if(Array.isArray(p)){if(!h)throw new TypeError('Expected "'+d.name+'" to not repeat, but got an array');if(p.length===0){if(f)continue;throw new TypeError('Expected "'+d.name+'" to not be empty')}for(var m=0;m<p.length;m++){var g=n(p[m],d);if(s&&!o[c].test(g))throw new TypeError('Expected all "'+d.name+'" to match "'+d.pattern+'", but got "'+g+'"');u+=d.prefix+g+d.suffix}continue}if(typeof p=="string"||typeof p=="number"){var g=n(String(p),d);if(s&&!o[c].test(g))throw new TypeError('Expected "'+d.name+'" to match "'+d.pattern+'", but got "'+g+'"');u+=d.prefix+g+d.suffix;continue}if(!f){var v=h?"an array":"a string";throw new TypeError('Expected "'+d.name+'" to be '+v)}}return u}}function Ku(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function ZE(e){return e&&e.sensitive?"":"i"}function F7(e,t){if(!t)return e;for(var r=/\((?:\?<(.*?)>)?(?!\?)/g,a=0,n=r.exec(e.source);n;)t.push({name:n[1]||a++,prefix:"",suffix:"",modifier:"",pattern:""}),n=r.exec(e.source);return e}function L7(e,t,r){var a=e.map(function(n){return jR(n,t,r).source});return new RegExp("(?:"+a.join("|")+")",ZE(r))}function z7(e,t,r){return B7(UR(e,r),t,r)}function B7(e,t,r){r===void 0&&(r={});for(var a=r.strict,n=a===void 0?!1:a,i=r.start,s=i===void 0?!0:i,o=r.end,l=o===void 0?!0:o,u=r.encode,c=u===void 0?function(k){return k}:u,d="["+Ku(r.endsWith||"")+"]|$",p="["+Ku(r.delimiter||"/#?")+"]",f=s?"^":"",h=0,m=e;h<m.length;h++){var g=m[h];if(typeof g=="string")f+=Ku(c(g));else{var v=Ku(c(g.prefix)),b=Ku(c(g.suffix));if(g.pattern)if(t&&t.push(g),v||b)if(g.modifier==="+"||g.modifier==="*"){var y=g.modifier==="*"?"?":"";f+="(?:"+v+"((?:"+g.pattern+")(?:"+b+v+"(?:"+g.pattern+"))*)"+b+")"+y}else f+="(?:"+v+"("+g.pattern+")"+b+")"+g.modifier;else f+="("+g.pattern+")"+g.modifier;else f+="(?:"+v+b+")"+g.modifier}}if(l)n||(f+=p+"?"),f+=r.endsWith?"(?="+d+")":"$";else{var w=e[e.length-1],x=typeof w=="string"?p.indexOf(w[w.length-1])>-1:w===void 0;n||(f+="(?:"+p+"(?="+d+"))?"),x||(f+="(?="+p+"|"+d+")")}return new RegExp(f,ZE(r))}function jR(e,t,r){return e instanceof RegExp?F7(e,t):Array.isArray(e)?L7(e,t,r):z7(e,t,r)}var kt={queue:[],clearQueue:function(){if(kt.queue.length!==0){var t=kt.queue.shift();t()}},routerQueue:[],clearRouterQueue:function(){if(kt.routerQueue.length!==0){var t=kt.routerQueue.pop(),r=t.router,a=t.stateUrl,n=t.action,i=r.params.animate;r.params.browserHistoryAnimate===!1&&(i=!1),n==="back"&&r.back({animate:i,browserHistory:!1}),n==="load"&&r.navigate(a,{animate:i,browserHistory:!1})}},handle:function(t){if(!kt.blockPopstate){var r=this,a=t.state;kt.previousState=kt.state,kt.state=a,kt.allowChange=!0,kt.clearQueue(),a=kt.state,a||(a={}),r.views.forEach(function(n){var i=n.router,s=a[n.id];if(!s&&n.params.browserHistory&&(s={url:n.router.history[0]}),!!s){var o=s.url||void 0,l=i.params.animate;i.params.browserHistoryAnimate===!1&&(l=!1),o!==i.url&&(i.history.indexOf(o)>=0?i.allowPageChange?i.back({animate:l,browserHistory:!1}):kt.routerQueue.push({action:"back",router:i}):i.allowPageChange?i.navigate(o,{animate:l,browserHistory:!1}):kt.routerQueue.unshift({action:"load",stateUrl:o,router:i}))}})}},initViewState:function(t,r){var a,n=De(),i=se({},kt.state||{},(a={},a[t]=r,a));kt.state=i,n.history.replaceState(i,"")},push:function(t,r,a){var n,i=De();if(a.substr(-3)==="#!/"&&(a=a.replace("#!/","")),!kt.allowChange){kt.queue.push(function(){kt.push(t,r,a)});return}kt.previousState=kt.state;var s=se({},kt.previousState||{},(n={},n[t]=r,n));kt.state=s,i.history.pushState(s,"",a)},replace:function(t,r,a){var n,i=De();if(a.substr(-3)==="#!/"&&(a=a.replace("#!/","")),!kt.allowChange){kt.queue.push(function(){kt.replace(t,r,a)});return}kt.previousState=kt.state;var s=se({},kt.previousState||{},(n={},n[t]=r,n));kt.state=s,i.history.replaceState(s,"",a)},go:function(t){var r=De();kt.allowChange=!1,r.history.go(t)},back:function(){var t=De();kt.allowChange=!1,t.history.back()},allowChange:!0,previousState:{},state:{},blockPopstate:!0,init:function(t){var r=De(),a=nt();kt.state=r.history.state,T(r).on("load",function(){setTimeout(function(){kt.blockPopstate=!1},0)}),a.readyState&&a.readyState==="complete"&&(kt.blockPopstate=!1),T(r).on("popstate",kt.handle.bind(t))}},or=kt;function V7(e){var t=e,r=t.$el,a=t.$navbarsEl,n=t.app,i=t.params,s=Ft(),o=Ct(),l=!1,u=!1,c={},d,p=[],f=[],h,m,g=!0,v,b=[],y=[],w,x,k,C,E=i[n.theme+"SwipeBackAnimateShadow"],$=i[n.theme+"SwipeBackAnimateOpacity"],N=i[n.theme+"SwipeBackActiveArea"],I=i[n.theme+"SwipeBackThreshold"],S=n.rtl?"right center":"left center",A=n.rtl?"calc(100% - var(--f7-navbar-large-title-padding-left) - var(--f7-safe-area-left)) center":"calc(var(--f7-navbar-large-title-padding-left) + var(--f7-safe-area-left)) center";function R(){var L=[],V=n.rtl?-1:1,H=b.hasClass("navbar-transparent")&&!b.hasClass("navbar-large")&&!b.hasClass("navbar-transparent-visible"),Y=b.hasClass("navbar-large"),K=b.hasClass("navbar-large-collapsed"),Z=b.hasClass("navbar-large-transparent")||b.hasClass("navbar-large")&&b.hasClass("navbar-transparent"),le=y.hasClass("navbar-transparent")&&!y.hasClass("navbar-large")&&!y.hasClass("navbar-transparent-visible"),de=y.hasClass("navbar-large"),ie=y.hasClass("navbar-large-collapsed"),ue=y.hasClass("navbar-large-transparent")||y.hasClass("navbar-large")&&y.hasClass("navbar-transparent"),pe=Y&&!K,Se=de&&!ie,ke=b.find(".left, .title, .right, .subnavbar, .fading, .title-large, .navbar-bg"),oe=y.find(".left, .title, .right, .subnavbar, .fading, .title-large, .navbar-bg"),me,$e;return i.iosAnimateNavbarBackIcon&&(b.hasClass("sliding")||b.find(".navbar-inner.sliding").length?me=b.find(".left").find(".back .icon + span").eq(0):me=b.find(".left.sliding").find(".back .icon + span").eq(0),y.hasClass("sliding")||y.find(".navbar-inner.sliding").length?$e=y.find(".left").find(".back .icon + span").eq(0):$e=y.find(".left.sliding").find(".back .icon + span").eq(0),me.length&&oe.each(function(Me){!T(Me).hasClass("title")||(Me.f7NavbarLeftOffset+=me.prev(".icon")[0].offsetWidth)})),ke.each(function(Me){var Oe=T(Me),he=Oe.hasClass("subnavbar"),Re=Oe.hasClass("left"),Ne=Oe.hasClass("title"),je=Oe.hasClass("navbar-bg");if(!((Ne||je)&&H)&&!(!pe&&Oe.hasClass(".title-large"))){var ve={el:Me};if(pe){if(Ne)return;if(Oe.hasClass("title-large")){L.indexOf(ve)<0&&L.push(ve),ve.overflow="visible",Oe.find(".title-large-text").each(function(Ae){L.push({el:Ae,transform:function(pt){return"translateX("+pt*100*V+"%)"}})});return}}if(Se&&(pe||Oe.hasClass("title-large")&&(L.indexOf(ve)<0&&L.push(ve),ve.opacity=0),Re)){L.indexOf(ve)<0&&L.push(ve),ve.opacity=function(Ae){return 1-Math.pow(Ae,.33)},Oe.find(".back span").each(function(Ae){L.push({el:Ae,"transform-origin":S,transform:function(pt){return"translateX(calc("+pt+" * (var(--f7-navbarTitleLargeOffset) - var(--f7-navbarLeftTextOffset)))) translateY(calc("+pt+" * (var(--f7-navbar-large-title-height) - var(--f7-navbar-large-title-padding-vertical) / 2))) scale("+(1+1*pt)+")"}})});return}if(je){L.indexOf(ve)<0&&L.push(ve),!pe&&!Se&&(K?(Z&&(ve.className="ios-swipeback-navbar-bg-large"),ve.transform=function(Ae){return"translateX("+100*Ae*V+"%) translateY(calc(-1 * var(--f7-navbar-large-title-height)))"}):ve.transform=function(Ae){return"translateX("+100*Ae*V+"%)"}),!pe&&Se&&(ve.className="ios-swipeback-navbar-bg-large",ve.transform=function(Ae){return"translateX("+100*Ae*V+"%) translateY(calc(-1 * "+(1-Ae)+" * var(--f7-navbar-large-title-height)))"}),pe&&Se&&(ve.transform=function(Ae){return"translateX("+100*Ae*V+"%)"}),pe&&!Se&&(ve.transform=function(Ae){return"translateX("+100*Ae*V+"%) translateY(calc(-"+Ae+" * var(--f7-navbar-large-title-height)))"});return}if(!Oe.hasClass("title-large")){var Ge=Oe.hasClass("sliding")||Oe.parents(".navbar-inner.sliding").length;if(L.indexOf(ve)<0&&L.push(ve),(!he||he&&!Ge)&&(ve.opacity=function(Ae){return 1-Math.pow(Ae,.33)}),Ge){var Ze=ve;if(Re&&me.length&&i.iosAnimateNavbarBackIcon){var qe={el:me[0]};Ze=qe,L.push(qe)}Ze.transform=function(Ae){var rt=Ae*Ze.el.f7NavbarRightOffset;return o.pixelRatio===1&&(rt=Math.round(rt)),he&&Y?"translate3d("+rt+"px, calc(-1 * var(--f7-navbar-large-collapse-progress) * var(--f7-navbar-large-title-height)), 0)":"translate3d("+rt+"px,0,0)"}}}}}),oe.each(function(Me){var Oe=T(Me),he=Oe.hasClass("subnavbar"),Re=Oe.hasClass("left"),Ne=Oe.hasClass("title"),je=Oe.hasClass("navbar-bg");if(!((Ne||je)&&le)){var ve={el:Me};if(Se){if(Ne)return;if(L.indexOf(ve)<0&&L.push(ve),Oe.hasClass("title-large")){ve.opacity=1,ve.overflow="visible",Oe.find(".title-large-text").each(function(Ae){L.push({el:Ae,"transform-origin":A,opacity:function(pt){return Math.pow(pt,3)},transform:function(pt){return"translateX(calc("+(1-pt)+" * (var(--f7-navbarLeftTextOffset) - var(--f7-navbarTitleLargeOffset)))) translateY(calc("+(pt-1)+" * var(--f7-navbar-large-title-height) + "+(1-pt)+" * var(--f7-navbar-large-title-padding-vertical))) scale("+(.5+pt*.5)+")"}})});return}}if(je){L.indexOf(ve)<0&&L.push(ve),!pe&&!Se&&(ie?(ue&&(ve.className="ios-swipeback-navbar-bg-large"),ve.transform=function(Ae){return"translateX("+(-100+100*Ae)*V+"%) translateY(calc(-1 * var(--f7-navbar-large-title-height)))"}):ve.transform=function(Ae){return"translateX("+(-100+100*Ae)*V+"%)"}),!pe&&Se&&(ve.transform=function(Ae){return"translateX("+(-100+100*Ae)*V+"%) translateY(calc(-1 * "+(1-Ae)+" * var(--f7-navbar-large-title-height)))"}),pe&&!Se&&(ve.className="ios-swipeback-navbar-bg-large",ve.transform=function(Ae){return"translateX("+(-100+100*Ae)*V+"%) translateY(calc(-"+Ae+" * var(--f7-navbar-large-title-height)))"}),pe&&Se&&(ve.transform=function(Ae){return"translateX("+(-100+100*Ae)*V+"%)"});return}if(!Oe.hasClass("title-large")){var Ge=Oe.hasClass("sliding")||y.children(".navbar-inner.sliding").length;if(L.indexOf(ve)<0&&L.push(ve),(!he||he&&!Ge)&&(ve.opacity=function(Ae){return Math.pow(Ae,3)}),Ge){var Ze=ve;if(Re&&$e.length&&i.iosAnimateNavbarBackIcon){var qe={el:$e[0]};Ze=qe,L.push(qe)}Ze.transform=function(Ae){var rt=Ze.el.f7NavbarLeftOffset*(1-Ae);return o.pixelRatio===1&&(rt=Math.round(rt)),he&&de?"translate3d("+rt+"px, calc(-1 * var(--f7-navbar-large-collapse-progress) * var(--f7-navbar-large-title-height)), 0)":"translate3d("+rt+"px,0,0)"}}}}}),L}function O(L){var V=L===void 0?{}:L,H=V.progress,Y=V.reset,K=V.transition,Z=V.reflow,le=["overflow","transform","transform-origin","opacity"];if(K===!0||K===!1)for(var de=0;de<C.length;de+=1){var ie=C[de];ie&&ie.el&&(K===!0&&ie.el.classList.add("navbar-page-transitioning"),K===!1&&ie.el.classList.remove("navbar-page-transitioning"))}Z&&C.length&&C[0]&&C[0].el&&(C[0].el._clientLeft=C[0].el.clientLeft);for(var ue=0;ue<C.length;ue+=1){var pe=C[ue];if(pe&&pe.el){pe.className&&!pe.classNameSet&&!Y&&(pe.el.classList.add(pe.className),pe.classNameSet=!0),pe.className&&Y&&pe.el.classList.remove(pe.className);for(var Se=0;Se<le.length;Se+=1){var ke=le[Se];pe[ke]&&(Y?pe.el.style[ke]="":typeof pe[ke]=="function"?pe.el.style[ke]=pe[ke](H):pe.el.style[ke]=pe[ke])}}}}function D(L){var V=i[n.theme+"SwipeBack"];!g||!V||l||n.swipeout&&n.swipeout.el||!t.allowPageChange||T(L.target).closest(".range-slider, .calendar-months").length>0||T(L.target).closest(".page-master, .page-master-detail").length>0&&i.masterDetailBreakpoint>0&&n.width>=i.masterDetailBreakpoint||(u=!1,l=!0,d=void 0,c.x=L.type==="touchstart"?L.targetTouches[0].pageX:L.pageX,c.y=L.type==="touchstart"?L.targetTouches[0].pageY:L.pageY,v=sa(),w=t.dynamicNavbar)}function z(L){if(!!l){var V=L.type==="touchmove"?L.targetTouches[0].pageX:L.pageX,H=L.type==="touchmove"?L.targetTouches[0].pageY:L.pageY;if(typeof d=="undefined"&&(d=!!(d||Math.abs(H-c.y)>Math.abs(V-c.x))||V<c.x&&!n.rtl||V>c.x&&n.rtl),d||L.f7PreventSwipeBack||n.preventSwipeBack){l=!1;return}if(!u){var Y=!1,K=T(L.target),Z=K.closest(".swipeout");Z.length>0&&(!n.rtl&&Z.find(".swipeout-actions-left").length>0&&(Y=!0),n.rtl&&Z.find(".swipeout-actions-right").length>0&&(Y=!0)),p=K.closest(".page"),(p.hasClass("no-swipeback")||K.closest(".no-swipeback, .card-opened").length>0)&&(Y=!0),f=r.find(".page-previous:not(.stacked)"),f.length>1&&(f=f.eq(f.length-1));var le=c.x-r.offset().left>N;if(h=r.width(),n.rtl?le=c.x<r.offset().left-r[0].scrollLeft+(h-N):le=c.x-r.offset().left>N,le&&(Y=!0),(f.length===0||p.length===0)&&(Y=!0),Y){l=!1;return}E&&(x=p.find(".page-shadow-effect"),x.length===0&&(x=T('<div class="page-shadow-effect"></div>'),p.append(x))),$&&(k=f.find(".page-opacity-effect"),k.length===0&&(k=T('<div class="page-opacity-effect"></div>'),f.append(k))),w&&(b=a.find(".navbar-current:not(.stacked)"),y=a.find(".navbar-previous:not(.stacked)"),y.length>1&&(y=y.eq(y.length-1)),C=R()),T(".sheet.modal-in").length>0&&n.sheet&&n.sheet.close(T(".sheet.modal-in"))}L.f7PreventSwipePanel=!0,u=!0,n.preventSwipePanelBySwipeBack=!0,L.preventDefault();var de=n.rtl?-1:1;m=(V-c.x-I)*de,m<0&&(m=0);var ie=Math.min(Math.max(m/h,0),1),ue={percentage:ie,progress:ie,currentPageEl:p[0],previousPageEl:f[0],currentNavbarEl:b[0],previousNavbarEl:y[0]};r.trigger("swipeback:move",ue),t.emit("swipebackMove",ue);var pe=m*de,Se=(m/5-h/5)*de;n.rtl?(pe=Math.max(pe,-h),Se=Math.max(Se,0)):(pe=Math.min(pe,h),Se=Math.min(Se,0)),o.pixelRatio===1&&(pe=Math.round(pe),Se=Math.round(Se)),t.swipeBackActive=!0,T([p[0],f[0]]).addClass("page-swipeback-active"),p.transform("translate3d("+pe+"px,0,0)"),E&&(x[0].style.opacity=1-1*ie),n.theme==="ios"&&f.transform("translate3d("+Se+"px,0,0)"),$&&(k[0].style.opacity=1-1*ie),w&&O({progress:ie})}}function U(){if(n.preventSwipePanelBySwipeBack=!1,!l||!u){l=!1,u=!1;return}l=!1,u=!1,t.swipeBackActive=!1;var L=T([p[0],f[0]]);if(L.removeClass("page-swipeback-active"),m===0){L.transform(""),x&&x.length>0&&x.remove(),k&&k.length>0&&k.remove(),w&&O({reset:!0});return}var V=sa()-v,H=!1;(V<300&&m>10||V>=300&&m>h/2)&&(p.removeClass("page-current").addClass("page-next"+(n.theme!=="ios"?" page-next-on-right":"")),f.removeClass("page-previous").addClass("page-current").removeAttr("aria-hidden"),x&&(x[0].style.opacity=""),k&&(k[0].style.opacity=""),w&&(t.setNavbarPosition(b,"next"),t.setNavbarPosition(y,"current",!1)),H=!0),L.addClass("page-transitioning page-transitioning-swipeback"),o.ios&&(p[0]._clientLeft=p[0].clientLeft),L.transform(""),w&&O({progress:H?1:0,transition:!0,reflow:!!o.ios}),g=!1,t.allowPageChange=!1;var Y={currentPageEl:p[0],previousPageEl:f[0],currentNavbarEl:b[0],previousNavbarEl:y[0]};H?(t.currentRoute=f[0].f7Page.route,t.currentPage=f[0],t.pageCallback("beforeOut",p,b,"current","next",{route:p[0].f7Page.route,swipeBack:!0}),t.pageCallback("beforeIn",f,y,"previous","current",{route:f[0].f7Page.route,swipeBack:!0},p[0]),r.trigger("swipeback:beforechange",Y),t.emit("swipebackBeforeChange",Y)):(r.trigger("swipeback:beforereset",Y),t.emit("swipebackBeforeReset",Y)),p.transitionEnd(function(){L.removeClass("page-transitioning page-transitioning-swipeback"),w&&O({reset:!0,transition:!1}),g=!0,t.allowPageChange=!0,H?(t.history.length===1&&t.history.unshift(t.url),t.history.pop(),t.saveHistory(),i.browserHistory&&or.back(),t.pageCallback("afterOut",p,b,"current","next",{route:p[0].f7Page.route,swipeBack:!0}),t.pageCallback("afterIn",f,y,"previous","current",{route:f[0].f7Page.route,swipeBack:!0}),i.stackPages&&t.initialPages.indexOf(p[0])>=0?(p.addClass("stacked"),w&&b.addClass("stacked")):(t.pageCallback("beforeRemove",p,b,"next",{swipeBack:!0}),t.removePage(p),w&&t.removeNavbar(b)),r.trigger("swipeback:afterchange",Y),t.emit("swipebackAfterChange",Y),t.emit("routeChanged",t.currentRoute,t.previousRoute,t),i.preloadPreviousPage&&t.back(t.history[t.history.length-2],{preload:!0})):(r.trigger("swipeback:afterreset",Y),t.emit("swipebackAfterReset",Y)),x&&x.length>0&&x.remove(),k&&k.length>0&&k.remove()})}function j(){var L=n.touchEvents.start==="touchstart"&&s.passiveListener?{passive:!0,capture:!1}:!1;r.on(n.touchEvents.start,D,L),n.on("touchmove:active",z),n.on("touchend:passive",U)}function G(){var L=n.touchEvents.start==="touchstart"&&s.passiveListener?{passive:!0,capture:!1}:!1;r.off(n.touchEvents.start,D,L),n.off("touchmove:active",z),n.off("touchend:passive",U)}j(),t.on("routerDestroy",G)}function GR(e,t,r){var a=this,n=t.route.redirect,i=e==="forward"?"navigate":"back";r.initial&&a.params.browserHistory&&(r.replaceState=!0,r.history=!0);function s(u,c){c===void 0&&(c={}),a.allowPageChange=!0,a[i](u,se({},r,c))}function o(){a.allowPageChange=!0}if(typeof n=="function"){a.allowPageChange=!1;var l=n.call(a,{router:a,to:t,resolve:s,reject:o,direction:e,app:a.app});return l&&typeof l=="string"?(a.allowPageChange=!0,a[i](l,r)):a}return a[i](n,r)}function B2(e,t,r,a,n,i,s,o){var l=[];Array.isArray(r)?l.push.apply(l,r):r&&typeof r=="function"&&l.push(r),t&&(Array.isArray(t)?l.push.apply(l,t):l.push(t));function u(){if(l.length===0){i();return}var c=l.shift();c.call(e,{router:e,to:a,from:n,resolve:function(){u()},reject:function(){s()},direction:o,app:e.app})}u()}function qx(e,t,r,a,n){var i=this;function s(){e&&e.route&&(i.params.routesBeforeEnter||e.route.beforeEnter)?(i.allowPageChange=!1,B2(i,i.params.routesBeforeEnter,e.route.beforeEnter,e,t,function(){i.allowPageChange=!0,r()},function(){a()},n)):r()}function o(){t&&t.route&&(i.params.routesBeforeLeave||t.route.beforeLeave)?(i.allowPageChange=!1,B2(i,i.params.routesBeforeLeave,t.route.beforeLeave,e,t,function(){i.allowPageChange=!0,s()},function(){a()},n)):s()}o()}function rd(e,t){if(!e.view)throw new Error("Framework7: it is not allowed to use router methods on global app router. Use router methods only on related View, e.g. app.views.main.router."+t+"(...)")}function Fb(e,t,r,a){function n(s){s.then(function(o){r({component:o.default||o._default||o})}).catch(function(o){throw a(),new Error(o)})}if(t instanceof Promise){n(t);return}var i=t.call(e);i instanceof Promise?n(i):r({component:i})}function Dv(){return Dv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Dv.apply(this,arguments)}function W7(){var e=this;return rd(e,"refreshPage"),e.navigate(e.currentRoute.url,{ignoreCache:!0,reloadCurrent:!0})}function Vp(e,t,r){r===void 0&&(r={});var a=nt(),n=T(t),i=e.app,s=e.view,o=se(!1,{animate:e.params.animate,browserHistory:!0,replaceState:!1,history:!0,reloadCurrent:e.params.reloadPages,reloadPrevious:!1,reloadAll:!1,clearPreviousHistory:!1,reloadDetail:e.params.reloadDetail,on:{}},r),l=e.params.masterDetailBreakpoint>0,u=l&&o.route&&o.route.route&&(o.route.route.master===!0||typeof o.route.route.master=="function"&&o.route.route.master(i,e)),c,d,p=0,f=e.currentRoute.modal,h;if(f||"popup popover sheet loginScreen actions customModal panel".split(" ").forEach(function(ue){e.currentRoute&&e.currentRoute.route&&e.currentRoute.route[ue]&&(f=!0,h=ue)}),f){var m=e.currentRoute.modal||e.currentRoute.route.modalInstance||i[h].get(),g=e.history[e.history.length-2],v=e.findMatchingRoute(g);!v&&g&&(v={url:g,path:g.split("?")[0],query:th(g),route:{path:g.split("?")[0],url:g}}),e.modalRemove(m)}var b=e.dynamicNavbar,y=e.$el,w=n,x=o.reloadPrevious||o.reloadCurrent||o.reloadAll,k,C,E,$;if(e.allowPageChange=!1,w.length===0)return e.allowPageChange=!0,e;w.length&&e.removeThemeElements(w),b&&(E=w.children(".navbar"),C=e.$navbarsEl,E.length===0&&w[0]&&w[0].f7Page&&(E=w[0].f7Page.$navbarEl)),o.route&&o.route.route&&o.route.route.keepAlive&&!o.route.route.keepAliveData&&(o.route.route.keepAliveData={pageEl:n[0]});var N=y.children(".page:not(.stacked)").filter(function(ue){return ue!==w[0]}),I;if(b&&(I=C.children(".navbar:not(.stacked)").filter(function(ue){return ue!==E[0]})),o.reloadPrevious&&N.length<2)return e.allowPageChange=!0,e;var S,A,R;if(l&&!o.reloadAll){for(var O=0;O<N.length;O+=1)if(!c&&N[O].classList.contains("page-master")){c=N[O];continue}if(S=!u&&c,S&&c){for(var D=0;D<N.length;D+=1)if(N[D].classList.contains("page-master-detail")){d=N[D];continue}}A=S&&o.reloadDetail&&i.width>=e.params.masterDetailBreakpoint&&c}S&&(R=!d||A||o.reloadAll||o.reloadCurrent);var z="next";if(o.reloadCurrent||o.reloadAll||A?z="current":o.reloadPrevious&&(z="previous"),w.removeClass("page-previous page-current page-next").addClass("page-"+z+(u?" page-master":"")+(S?" page-master-detail":"")+(R?" page-master-detail-root":"")).removeClass("stacked").trigger("page:unstack").trigger("page:position",{position:z}),e.emit("pageUnstack",w[0]),e.emit("pagePosition",w[0],z),(u||S)&&(w.trigger("page:role",{role:u?"master":"detail",root:!!R}),e.emit("pageRole",w[0],{role:u?"master":"detail",detailRoot:!!R})),b&&E.length&&(E.removeClass("navbar-previous navbar-current navbar-next").addClass("navbar-"+z+(u?" navbar-master":"")+(S?" navbar-master-detail":"")+(R?" navbar-master-detail-root":"")).removeClass("stacked"),E.trigger("navbar:position",{position:z}),e.emit("navbarPosition",E[0],z),(u||S)&&e.emit("navbarRole",E[0],{role:u?"master":"detail",detailRoot:!!R})),o.reloadCurrent||A)A?(k=N.filter(function(ue){return!ue.classList.contains("page-master")}),b&&($=T(k.map(function(ue){return i.navbar.getElByPage(ue)}))),k.length>1&&c&&(p=k.length-1,T(c).removeClass("page-master-stacked").trigger("page:masterunstack"),e.emit("pageMasterUnstack",c),b&&(T(i.navbar.getElByPage(c)).removeClass("navbar-master-stacked"),e.emit("navbarMasterUnstack",i.navbar.getElByPage(c))))):(k=N.eq(N.length-1),b&&($=T(i.navbar.getElByPage(k))));else if(o.reloadPrevious)k=N.eq(N.length-2),b&&($=T(i.navbar.getElByPage(k)));else if(o.reloadAll)k=N.filter(function(ue){return ue!==w[0]}),b&&($=I.filter(function(ue){return ue!==E[0]}));else{var U=[],j=[];if(N.length>1){var G=0;for(G=0;G<N.length-1;G+=1){if(c&&N[G]===c){N.eq(G).addClass("page-master-stacked"),N.eq(G).trigger("page:masterstack"),e.emit("pageMasterStack",N[G]),b&&(T(i.navbar.getElByPage(c)).addClass("navbar-master-stacked"),e.emit("navbarMasterStack",i.navbar.getElByPage(c)));continue}var L=i.navbar.getElByPage(N.eq(G));e.params.stackPages?(N.eq(G).addClass("stacked"),N.eq(G).trigger("page:stack"),e.emit("pageStack",N[G]),b&&T(L).addClass("stacked")):(U.push(N[G]),e.pageCallback("beforeRemove",N[G],I&&I[G],"previous",void 0,o),e.removePage(N[G]),b&&L&&(j.push(L),e.removeNavbar(L)))}}k=y.children(".page:not(.stacked)").filter(function(ue){return ue!==w[0]&&U.indexOf(ue)<0}),b&&($=C.children(".navbar:not(.stacked)").filter(function(ue){return ue!==E[0]&&j.indexOf(j)<0})),U=[],j=[]}if(S&&!o.reloadAll&&((k.length>1||A)&&(k=k.filter(function(ue){return!ue.classList.contains("page-master")})),$&&($.length>1||A)&&($=$.filter(function(ue){return!ue.classList.contains("navbar-master")}))),e.params.browserHistory&&(o.browserHistory||o.replaceState)&&!o.reloadPrevious){var V=e.params.browserHistoryRoot||"";or[o.reloadCurrent||A&&d||o.reloadAll||o.replaceState?"replace":"push"](s.id,{url:o.route.url},V+e.params.browserHistorySeparator+o.route.url)}o.reloadPrevious||(e.currentPageEl=w[0],b&&E.length?e.currentNavbarEl=E[0]:delete e.currentNavbarEl,e.currentRoute=o.route);var H=o.route.url;o.history&&(((o.reloadCurrent||A&&d)&&e.history.length)>0||o.replaceState?(A&&p>0&&(e.history=e.history.slice(0,e.history.length-p)),e.history[e.history.length-(o.reloadPrevious?2:1)]=H):o.reloadPrevious?e.history[e.history.length-2]=H:o.reloadAll?e.history=[H]:e.history.push(H)),e.saveHistory();var Y=w.parents(a).length>0,K=w[0].f7Component;if(o.reloadPrevious?(K&&!Y?K.mount(function(ue){T(ue).insertBefore(k)}):w.insertBefore(k),b&&E.length&&(E.find(".title-large").length&&E.addClass("navbar-large"),$.length?E.insertBefore($):(e.$navbarsEl.parents(a).length||e.$el.prepend(e.$navbarsEl),C.append(E)))):(k.next(".page")[0]!==w[0]&&(K&&!Y?K.mount(function(ue){y.append(ue)}):y.append(w[0])),b&&E.length&&(E.find(".title-large").length&&E.addClass("navbar-large"),e.$navbarsEl.parents(a).length||e.$el.prepend(e.$navbarsEl),C.append(E[0]))),Y?o.route&&o.route.route&&o.route.route.keepAlive&&!w[0].f7PageMounted&&(w[0].f7PageMounted=!0,e.pageCallback("mounted",w,E,z,x?z:"current",o,k)):e.pageCallback("mounted",w,E,z,x?z:"current",o,k),(o.reloadCurrent||A)&&k.length>0?e.params.stackPages&&e.initialPages.indexOf(k[0])>=0?(k.addClass("stacked"),k.trigger("page:stack"),e.emit("pageStack",k[0]),b&&$.addClass("stacked")):(e.pageCallback("beforeOut",k,$,"current",void 0,o),e.pageCallback("afterOut",k,$,"current",void 0,o),e.pageCallback("beforeRemove",k,$,"current",void 0,o),e.removePage(k),b&&$&&$.length&&e.removeNavbar($)):o.reloadAll?k.each(function(ue,pe){var Se=T(ue),ke=T(i.navbar.getElByPage(Se));e.params.stackPages&&e.initialPages.indexOf(Se[0])>=0?(Se.addClass("stacked"),Se.trigger("page:stack"),e.emit("pageStack",Se[0]),b&&ke.addClass("stacked")):(Se.hasClass("page-current")&&(e.pageCallback("beforeOut",k,$,"current",void 0,o),e.pageCallback("afterOut",k,$,"current",void 0,o)),e.pageCallback("beforeRemove",Se,$&&$.eq(pe),"previous",void 0,o),e.removePage(Se),b&&ke.length&&e.removeNavbar(ke))}):o.reloadPrevious&&(e.params.stackPages&&e.initialPages.indexOf(k[0])>=0?(k.addClass("stacked"),k.trigger("page:stack"),e.emit("pageStack",k[0]),b&&$.addClass("stacked")):(e.pageCallback("beforeRemove",k,$,"previous",void 0,o),e.removePage(k),b&&$&&$.length&&e.removeNavbar($))),o.route.route.tab&&e.tabLoad(o.route.route.tab,se({},o,{history:!1,browserHistory:!1})),l&&s.checkMasterDetailBreakpoint(),e.pageCallback("init",w,E,z,x?z:"current",o,k),o.reloadCurrent||o.reloadAll||A)return e.allowPageChange=!0,e.pageCallback("beforeIn",w,E,z,"current",o),w.removeAttr("aria-hidden"),b&&E&&E.removeAttr("aria-hidden"),e.pageCallback("afterIn",w,E,z,"current",o),o.reloadCurrent&&o.clearPreviousHistory&&e.clearPreviousHistory(),A&&(e.setPagePosition(T(c),"previous"),c.f7Page&&c.f7Page.navbarEl&&e.setNavbarPosition(T(c.f7Page.navbarEl),"previous")),e;if(o.reloadPrevious)return e.allowPageChange=!0,e;e.pageCallback("beforeOut",k,$,"current","previous",o),e.pageCallback("beforeIn",w,E,"next","current",o);function Z(){e.setPagePosition(w,"current",!1),e.setPagePosition(k,"previous",!k.hasClass("page-master")),b&&(e.setNavbarPosition(E,"current",!1),e.setNavbarPosition($,"previous",!$.hasClass("navbar-master"))),e.allowPageChange=!0,e.pageCallback("afterOut",k,$,"current","previous",o),e.pageCallback("afterIn",w,E,"next","current",o);var ue=(e.params.preloadPreviousPage||e.params[i.theme+"SwipeBack"])&&!u;ue||(w.hasClass("smart-select-page")||w.hasClass("photo-browser-page")||w.hasClass("autocomplete-page")||w.hasClass("color-picker-page"))&&(ue=!0),ue||(e.params.stackPages?(k.addClass("stacked"),k.trigger("page:stack"),e.emit("pageStack",k[0]),b&&$.addClass("stacked")):w.attr("data-name")&&w.attr("data-name")==="smart-select-page"||(e.pageCallback("beforeRemove",k,$,"previous",void 0,o),e.removePage(k),b&&$.length&&e.removeNavbar($))),o.clearPreviousHistory&&e.clearPreviousHistory(),e.emit("routeChanged",e.currentRoute,e.previousRoute,e),e.params.browserHistory&&or.clearRouterQueue()}function le(){e.setPagePosition(k,"current",!1),e.setPagePosition(w,"next",!1),b&&(e.setNavbarPosition($,"current",!1),e.setNavbarPosition(E,"next",!1))}if(o.animate&&!(u&&i.width>=e.params.masterDetailBreakpoint)){var de=e.params[e.app.theme+"PageLoadDelay"],ie=e.params.transition;o.transition&&(ie=o.transition),!ie&&e.currentRoute&&e.currentRoute.route&&(ie=e.currentRoute.route.transition),!ie&&e.currentRoute&&e.currentRoute.route.options&&(ie=e.currentRoute.route.options.transition),ie&&(w[0].f7PageTransition=ie),de?setTimeout(function(){le(),e.animate(k,w,$,E,"forward",ie,function(){Z()})},de):(le(),e.animate(k,w,$,E,"forward",ie,function(){Z()}))}else Z();return e}function gw(e,t,r,a){if(t===void 0&&(t={}),r===void 0&&(r={}),!e.allowPageChange&&!a)return e;var n=t,i=r,s=n.url,o=n.content,l=n.el,u=n.pageName,c=n.component,d=n.componentUrl;if(!i.reloadCurrent&&i.route&&i.route.route&&i.route.route.parentPath&&e.currentRoute.route&&e.currentRoute.route.parentPath===i.route.route.parentPath){if(i.route.url===e.url)return e.allowPageChange=!0,!1;var p=Object.keys(i.route.params).length===Object.keys(e.currentRoute.params).length;if(p&&Object.keys(i.route.params).forEach(function(m){(!(m in e.currentRoute.params)||e.currentRoute.params[m]!==i.route.params[m])&&(p=!1)}),p)return i.route.route.tab?e.tabLoad(i.route.route.tab,i):!1;if(!p&&i.route.route.tab&&e.currentRoute.route.tab&&e.currentRoute.parentPath===i.route.parentPath)return e.tabLoad(i.route.route.tab,i)}if(i.route&&i.route.url&&e.url===i.route.url&&!(i.reloadCurrent||i.reloadPrevious)&&!e.params.allowDuplicateUrls)return e.allowPageChange=!0,!1;!i.route&&s&&(i.route=e.parseRouteUrl(s),se(i.route,{route:{url:s,path:s}}));function f(m,g){return Vp(e,m,se(i,g))}function h(){return e.allowPageChange=!0,e}if((s||d||c)&&(e.allowPageChange=!1),o)Vp(e,e.getPageEl(o),i);else if(l)Vp(e,e.getPageEl(l),i);else if(u)Vp(e,e.$el.children('.page[data-name="'+u+'"]').eq(0),i);else if(c||d)try{e.pageComponentLoader({routerEl:e.el,component:c,componentUrl:d,options:i,resolve:f,reject:h})}catch(m){throw e.allowPageChange=!0,m}else s&&(e.xhrAbortController&&(e.xhrAbortController.abort(),e.xhrAbortController=!1),e.xhrRequest(s,i).then(function(m){Vp(e,e.getPageEl(m),i)}).catch(function(){e.allowPageChange=!0}));return e}function H7(e,t,r){var a={url:t,route:{path:t,options:Dv({},r,{openIn:void 0})}},n=Dv({},r);if(r.openIn==="popup"&&(n.content='<div class="popup popup-router-open-in" data-url="'+t+'"><div class="view view-init" data-links-view="'+e.view.selector+'" data-url="'+t+'" data-ignore-open-in="true"></div></div>',a.route.popup=n),r.openIn==="loginScreen"&&(n.content='<div class="login-screen login-screen-router-open-in" data-url="'+t+'"><div class="view view-init" data-links-view="'+e.view.selector+'" data-url="'+t+'" data-ignore-open-in="true"></div></div>',a.route.loginScreen=n),r.openIn==="sheet"&&(n.content='<div class="sheet-modal sheet-modal-router-open-in" data-url="'+t+'"><div class="sheet-modal-inner"><div class="view view-init" data-links-view="'+e.view.selector+'" data-url="'+t+'" data-ignore-open-in="true"></div></div></div>',a.route.sheet=n),r.openIn==="popover"&&(n.targetEl=r.clickedEl||r.targetEl,n.content='<div class="popover popover-router-open-in" data-url="'+t+'"><div class="popover-inner"><div class="view view-init" data-links-view="'+e.view.selector+'" data-url="'+t+'" data-ignore-open-in="true"></div></div></div>',a.route.popover=n),r.openIn.indexOf("panel")>=0){var i=r.openIn.split(":"),s=i[1]||"left",o=i[2]||"cover";n.targetEl=r.clickedEl||r.targetEl,n.content='<div class="panel panel-router-open-in panel-'+s+" panel-"+o+'" data-url="'+t+'"><div class="view view-init" data-links-view="'+e.view.selector+'" data-url="'+t+'" data-ignore-open-in="true"></div></div>',a.route.panel=n}return e.navigate(a)}function U7(e,t){t===void 0&&(t={});var r=this;if(r.swipeBackActive)return r;var a,n,i,s,o,l,u;if(typeof e=="string"?a=e:(a=e.url,n=e.route,i=e.name,s=e.path,o=e.query,l=e.params),i||s)return a=r.generateUrl({path:s,name:i,params:l,query:o}),a?r.navigate(a,t):r;var c=r.app;if(rd(r,"navigate"),a==="#"||a==="")return r;var d=a.replace("./","");if(d[0]!=="/"&&d.indexOf("#")!==0){var p=r.currentRoute.parentPath||r.currentRoute.path;d=((p?p+"/":"/")+d).replace("///","/").replace("//","/")}if(n?u=se(r.parseRouteUrl(d),{route:se({},n)}):u=r.findMatchingRoute(d),!u)return r;if(u.route&&u.route.viewName){var f=u.route.viewName,h=c.views[f];if(!h)throw new Error('Framework7: There is no View with "'+f+'" name that was specified in this route');if(h!==r.view)return h.router.navigate(e,t)}if(u.route.redirect)return GR.call(r,"forward",u,t);var m={};if(u.route.options?se(m,u.route.options,t):se(m,t),m.openIn&&(!r.params.ignoreOpenIn||r.params.ignoreOpenIn&&r.history.length>0))return H7(r,d,m);m.route=u;function g(){var w=!1;if("popup popover sheet loginScreen actions customModal panel".split(" ").forEach(function(C){u.route[C]&&!w&&(w=!0,r.modalLoad(C,u,m,"forward"))}),u.route.keepAlive&&u.route.keepAliveData&&(gw(r,{el:u.route.keepAliveData.pageEl},m,!1),w=!0),"url content component pageName el componentUrl".split(" ").forEach(function(C){if(u.route[C]&&!w){var E;w=!0,gw(r,(E={},E[C]=u.route[C],E),m,!1)}}),w)return;function x(C,E){r.allowPageChange=!1;var $=!1;"popup popover sheet loginScreen actions customModal panel".split(" ").forEach(function(N){if(C[N]){$=!0;var I=se({},u,{route:C});r.allowPageChange=!0,r.modalLoad(N,I,se(m,E),"forward")}}),!$&&gw(r,C,se(m,E),!0)}function k(){r.allowPageChange=!0}u.route.async&&(r.allowPageChange=!1,u.route.async.call(r,{router:r,to:m.route,from:r.currentRoute,resolve:x,reject:k,direction:"forward",app:c})),u.route.asyncComponent&&Fb(r,u.route.asyncComponent,x,k)}function v(){r.allowPageChange=!0}if(r.params.masterDetailBreakpoint>0&&u.route.masterRoute){var b=!0,y=!1;if(r.currentRoute&&r.currentRoute.route&&((r.currentRoute.route.master===!0||typeof r.currentRoute.route.master=="function"&&r.currentRoute.route.master(c,r))&&(r.currentRoute.route===u.route.masterRoute||r.currentRoute.route.path===u.route.masterRoute.path)&&(b=!1),r.currentRoute.route.masterRoute&&(r.currentRoute.route.masterRoute===u.route.masterRoute||r.currentRoute.route.masterRoute.path===u.route.masterRoute.path)&&(b=!1,y=!0)),b||y&&t.reloadAll)return r.navigate({path:u.route.masterRoute.path,params:u.params||{}},{animate:!1,reloadAll:t.reloadAll,reloadCurrent:t.reloadCurrent,reloadPrevious:t.reloadPrevious,browserHistory:!t.initial,history:!t.initial,once:{pageAfterIn:function(){r.navigate(e,se({},t,{animate:!1,reloadAll:!1,reloadCurrent:!1,reloadPrevious:!1,history:!t.initial,browserHistory:!t.initial}))}}}),r}return qx.call(r,u,r.currentRoute,function(){u.route.modules?c.loadModules(Array.isArray(u.route.modules)?u.route.modules:[u.route.modules]).then(function(){g()}).catch(function(){v()}):g()},function(){v()},"forward"),r}function j7(e,t){t===void 0&&(t={});var r=this,a=se({animate:r.params.animate,browserHistory:!0,history:!0,parentPageEl:null,preload:!1,on:{}},t),n,i;a.route&&(!a.preload&&a.route!==r.currentRoute&&(i=r.previousRoute,r.currentRoute=a.route),a.preload?(n=a.route,i=r.currentRoute):(n=r.currentRoute,i||(i=r.previousRoute)),r.params.browserHistory&&a.browserHistory&&!a.reloadPrevious&&or.replace(r.view.id,{url:a.route.url},(r.params.browserHistoryRoot||"")+r.params.browserHistorySeparator+a.route.url),a.history&&(r.history[Math.max(r.history.length-1,0)]=a.route.url,r.saveHistory()));var s=T(a.parentPageEl||r.currentPageEl),o;s.length&&s.find("#"+e.id).length?o=s.find("#"+e.id).eq(0):r.view.selector?o=r.view.selector+" #"+e.id:o="#"+e.id;var l=r.app.tab.show({tabEl:o,animate:a.animate,tabRoute:a.route}),u=l.$newTabEl,c=l.$oldTabEl,d=l.animated,p=l.onTabsChanged;if(u&&u.parents(".page").length>0&&a.route){var f=u.parents(".page")[0].f7Page;f&&a.route&&(f.route=a.route)}function h(y){r.removeThemeElements(u);var w=u;typeof y!="string"&&(w=T(y)),w.trigger("tab:init tab:mounted",e),r.emit("tabInit tabMounted",u[0],e),c&&c.length&&(d?p(function(){r.emit("routeChanged",r.currentRoute,r.previousRoute,r),r.params.unloadTabContent&&r.tabRemove(c,u,e)}):(r.emit("routeChanged",r.currentRoute,r.previousRoute,r),r.params.unloadTabContent&&r.tabRemove(c,u,e)))}if(u[0].f7RouterTabLoaded)return!c||!c.length||(d?p(function(){r.emit("routeChanged",r.currentRoute,r.previousRoute,r)}):r.emit("routeChanged",r.currentRoute,r.previousRoute,r)),r;function m(y,w){var x=y.url,k=y.content,C=y.el,E=y.component,$=y.componentUrl;function N(S){r.allowPageChange=!0,S&&(typeof S=="string"?u.html(S):(u.html(""),S.f7Component?S.f7Component.mount(function(A){u.append(A)}):u.append(S)),u[0].f7RouterTabLoaded=!0,h(S))}function I(){return r.allowPageChange=!0,r}if(k)N(k);else if(C)N(C);else if(E||$)try{r.tabComponentLoader({tabEl:u[0],component:E,componentUrl:$,options:w,resolve:N,reject:I})}catch(S){throw r.allowPageChange=!0,S}else x&&(r.xhrAbortController&&(r.xhrAbortController.abort(),r.xhrAbortController=!1),r.xhrRequest(x,w).then(function(S){N(S)}).catch(function(){r.allowPageChange=!0}))}var g;"url content component el componentUrl".split(" ").forEach(function(y){if(e[y]){var w;g=!0,m((w={},w[y]=e[y],w),a)}});function v(y,w){m(y,se(a,w))}function b(){r.allowPageChange=!0}return e.async?e.async.call(r,{router:r,to:n,from:i,resolve:v,reject:b,app:r.app}):e.asyncComponent?Fb(r,e.asyncComponent,v,b):g||(r.allowPageChange=!0),r}function G7(e,t,r){var a=this,n;e[0]&&(e[0].f7RouterTabLoaded=!1,delete e[0].f7RouterTabLoaded),e.children().each(function(i){i.f7Component&&(n=!0,T(i).trigger("tab:beforeremove",r),i.f7Component.destroy())}),n||e.trigger("tab:beforeremove",r),a.emit("tabBeforeRemove",e[0],t[0],r),a.removeTabContent(e[0],r)}function q7(e,t,r,a){r===void 0&&(r={});var n=this,i=n.app,s=e==="panel",o=s?"panel":"modal",l=se({animate:n.params.animate,browserHistory:!0,history:!0,on:{},once:{}},r),u=se({},t.route[e]),c=t.route,d=function(b,y){var w=l.on,x=l.once,k;y==="open"&&(k=w.modalOpen||x.modalOpen||w.panelOpen||x.panelOpen),y==="close"&&(k=w.modalClose||x.modalClose||w.panelClose||x.panelClose),y==="closed"&&(k=w.modalClosed||x.modalClosed||w.panelClosed||x.panelClosed),k&&k(b)};function p(){var v=i[e].create(u);c.modalInstance=v;var b=v.el;function y(){v.close()}v.on(o+"Open",function(){b||(n.removeThemeElements(v.el),v.$el.trigger(e.toLowerCase()+":init "+e.toLowerCase()+":mounted",t,v),n.emit((s?"":"modalInit")+" "+e+"Init "+e+"Mounted",v.el,t,v)),n.once("swipeBackMove",y),d(v,"open")}),v.on(o+"Close",function(){n.off("swipeBackMove",y),v.closeByRouter||n.back(),d(v,"close")}),v.on(o+"Closed",function(){v.$el.trigger(e.toLowerCase()+":beforeremove",t,v),v.emit((s?"":"modalBeforeRemove ")+e+"BeforeRemove",v.el,t,v);var w=v.el.f7Component;d(v,"closed"),w&&w.destroy(),qr(function(){(w||u.component||u.asyncComponent)&&n.removeModal(v.el),v.destroy(),delete v.route,delete c.modalInstance})}),l.route&&(n.params.browserHistory&&l.browserHistory&&or.push(n.view.id,{url:l.route.url,modal:e},(n.params.browserHistoryRoot||"")+n.params.browserHistorySeparator+l.route.url),l.route!==n.currentRoute&&(v.route=se(l.route,{modal:v}),n.currentRoute=v.route),l.history&&!l.reloadCurrent&&(n.history.push(l.route.url),n.saveHistory())),b&&(n.removeThemeElements(v.el),v.$el.trigger(e.toLowerCase()+":init "+e.toLowerCase()+":mounted",t,v),n.emit(o+"Init "+e+"Init "+e+"Mounted",v.el,t,v)),v.open(l.animate===!1||l.animate===!0?l.animate:void 0)}function f(v,b){var y=v.url,w=v.content,x=v.component,k=v.componentUrl;function C($){$&&(typeof $=="string"?u.content=$:$.f7Component?$.f7Component.mount(function(N){u.el=N,i.$el.append(N)}):u.el=$,p())}function E(){return n.allowPageChange=!0,n}if(w)C(w);else if(x||k)try{n.modalComponentLoader({rootEl:i.el,component:x,componentUrl:k,options:b,resolve:C,reject:E})}catch($){throw n.allowPageChange=!0,$}else y?(n.xhrAbortController&&(n.xhrAbortController.abort(),n.xhrAbortController=!1),n.xhrRequest(y,b).then(function($){u.content=$,p()}).catch(function(){n.allowPageChange=!0})):p()}var h;"url content component el componentUrl template".split(" ").forEach(function(v){if(u[v]&&!h){var b;h=!0,f((b={},b[v]=u[v],b),l)}}),!h&&e==="actions"&&p();function m(v,b){f(v,se(l,b))}function g(){n.allowPageChange=!0}return u.async&&u.async.call(n,{router:n,to:l.route,from:n.currentRoute,resolve:m,reject:g,direction:a,app:i}),u.asyncComponent&&Fb(n,u.asyncComponent,m,g),n}function X7(e){se(e,{closeByRouter:!0}),e.close()}function Wp(e,t,r){var a=Ct(),n=nt(),i=T(t),s=e.app,o=e.view,l=se(!1,{animate:e.params.animate,browserHistory:!0,replaceState:!1},r),u=e.params.masterDetailBreakpoint>0,c=u&&l.route&&l.route.route&&(l.route.route.master===!0||typeof l.route.route.master=="function"&&l.route.route.master(s,e)),d,p,f=e.dynamicNavbar,h=i,m=e.$el.children(".page-current"),g=m.length===0&&l.preload,v=u&&m.hasClass("page-master");h.length&&e.removeThemeElements(h);var b,y,w;if(f&&(y=h.children(".navbar"),b=e.$navbarsEl,y.length===0&&h[0]&&h[0].f7Page&&(y=h[0].f7Page.$navbarEl),w=b.find(".navbar-current")),e.allowPageChange=!1,h.length===0||m.length===0&&!l.preload)return e.allowPageChange=!0,e;e.removeThemeElements(h),l.route&&l.route.route&&l.route.route.keepAlive&&!l.route.route.keepAliveData&&(l.route.route.keepAliveData={pageEl:i[0]});var x,k;if(u){for(var C=e.$el.children(".page:not(.stacked)").filter(function(L){return L!==h[0]}),E=0;E<C.length;E+=1)if(!d&&C[E].classList.contains("page-master")){d=C[E];continue}x=!c&&d&&e.history.indexOf(l.route.url)>e.history.indexOf(d.f7Page.route.url),!x&&!c&&d&&d.f7Page&&l.route.route.masterRoute&&(x=l.route.route.masterRoute.path===d.f7Page.route.route.path)}x&&d&&d.f7Page&&(k=e.history.indexOf(l.route.url)-e.history.indexOf(d.f7Page.route.url)===1),h.addClass("page-"+(g?"current":"previous")+(c?" page-master":"")+(x?" page-master-detail":"")+(k?" page-master-detail-root":"")).removeClass("stacked").removeAttr("aria-hidden").trigger("page:unstack").trigger("page:position",{position:g?"current":"previous"}),e.emit("pageUnstack",h[0]),e.emit("pagePosition",h[0],g?"current":"previous"),(c||x)&&(h.trigger("page:role",{role:c?"master":"detail",root:!!k}),e.emit("pageRole",h[0],{role:c?"master":"detail",detailRoot:!!k})),f&&y.length>0&&(y.addClass("navbar-"+(g?"current":"previous")+(c?" navbar-master":"")+(x?" navbar-master-detail":"")+(k?" navbar-master-detail-root":"")).removeClass("stacked").removeAttr("aria-hidden"),y.trigger("navbar:position",{position:g?"current":"previous"}),e.emit("navbarPosition",y[0],g?"current":"previous"),(c||k)&&e.emit("navbarRole",y[0],{role:c?"master":"detail",detailRoot:!!k}));var $;if(l.force&&(m.prev(".page-previous:not(.stacked)").length>0||m.prev(".page-previous").length===0))if(e.history.indexOf(l.route.url)>=0?($=e.history.length-e.history.indexOf(l.route.url)-1,e.history=e.history.slice(0,e.history.indexOf(l.route.url)+2),o.history=e.history):e.history[[e.history.length-2]]?e.history[e.history.length-2]=l.route.url:e.history.unshift(e.url),$&&e.params.stackPages)m.prevAll(".page-previous").each(function(L){var V=T(L),H;f&&(H=T(s.navbar.getElByPage(V))),V[0]!==h[0]&&V.index()>h.index()&&(e.initialPages.indexOf(V[0])>=0?(V.addClass("stacked"),V.trigger("page:stack"),e.emit("pageStack",V[0]),f&&H.addClass("stacked")):(e.pageCallback("beforeRemove",V,H,"previous",void 0,l),V[0]===d&&(p=!0),e.removePage(V),f&&H.length>0&&e.removeNavbar(H)))});else{var N=m.prev(".page-previous:not(.stacked)"),I;f&&(I=T(s.navbar.getElByPage(N))),e.params.stackPages&&e.initialPages.indexOf(N[0])>=0?(N.addClass("stacked"),N.trigger("page:stack"),e.emit("pageStack",N[0]),I.addClass("stacked")):N.length>0&&(e.pageCallback("beforeRemove",N,I,"previous",void 0,l),N[0]===d&&(p=!0),e.removePage(N),f&&I.length&&e.removeNavbar(I))}var S=h.parents(n).length>0,A=h[0].f7Component;function R(){g&&(!S&&A?A.mount(function(L){e.$el.append(L)}):e.$el.append(h)),h.next(m).length===0&&(!S&&A?A.mount(function(L){T(L).insertBefore(m)}):h.insertBefore(m)),f&&y.length&&(y.find(".title-large").length&&y.addClass("navbar-large"),y.insertBefore(w),w.length>0?y.insertBefore(w):(e.$navbarsEl.parents(n).length||e.$el.prepend(e.$navbarsEl),b.append(y))),S?l.route&&l.route.route&&l.route.route.keepAlive&&!h[0].f7PageMounted&&(h[0].f7PageMounted=!0,e.pageCallback("mounted",h,y,"previous","current",l,m)):e.pageCallback("mounted",h,y,"previous","current",l,m)}if(l.preload){R(),l.route.route.tab&&e.tabLoad(l.route.route.tab,se({},l,{history:!1,browserHistory:!1,preload:!0})),c&&(h.removeClass("page-master-stacked").trigger("page:masterunstack"),e.emit("pageMasterUnstack",h[0]),f&&(T(s.navbar.getElByPage(h)).removeClass("navbar-master-stacked"),e.emit("navbarMasterUnstack",s.navbar.getElByPage(h)))),e.pageCallback("init",h,y,"previous","current",l,m),g&&(e.pageCallback("beforeIn",h,y,"current",void 0,l),e.pageCallback("afterIn",h,y,"current",void 0,l));var O=h.prevAll(".page-previous:not(.stacked):not(.page-master)");return O.length>0&&O.each(function(L){var V=T(L),H;f&&(H=T(s.navbar.getElByPage(V))),e.params.stackPages&&e.initialPages.indexOf(L)>=0?(V.addClass("stacked"),V.trigger("page:stack"),e.emit("pageStack",V[0]),f&&H.addClass("stacked")):(e.pageCallback("beforeRemove",V,H,"previous",void 0),e.removePage(V),f&&H.length&&e.removeNavbar(H))}),e.allowPageChange=!0,e}if(!(a.ie||a.edge||a.firefox&&!a.ios)&&e.params.browserHistory&&l.browserHistory)if(l.replaceState){var D=e.params.browserHistoryRoot||"";or.replace(o.id,{url:l.route.url},D+e.params.browserHistorySeparator+l.route.url)}else $?or.go(-$):or.back();if(l.replaceState?e.history[e.history.length-1]=l.route.url:(e.history.length===1&&e.history.unshift(e.url),e.history.pop()),e.saveHistory(),e.currentPageEl=h[0],f&&y.length?e.currentNavbarEl=y[0]:delete e.currentNavbarEl,e.currentRoute=l.route,(a.ie||a.edge||a.firefox&&!a.ios)&&e.params.browserHistory&&l.browserHistory)if(l.replaceState){var z=e.params.browserHistoryRoot||"";or.replace(o.id,{url:l.route.url},z+e.params.browserHistorySeparator+l.route.url)}else $?or.go(-$):or.back();R(),l.route.route.tab&&e.tabLoad(l.route.route.tab,se({},l,{history:!1,browserHistory:!1})),u&&(v||p)&&o.checkMasterDetailBreakpoint(!1),e.pageCallback("init",h,y,"previous","current",l,m),e.pageCallback("beforeOut",m,w,"current","next",l),e.pageCallback("beforeIn",h,y,"previous","current",l);function U(){e.setPagePosition(h,"current",!1),e.setPagePosition(m,"next",!0),f&&(e.setNavbarPosition(y,"current",!1),e.setNavbarPosition(w,"next",!0)),e.pageCallback("afterOut",m,w,"current","next",l),e.pageCallback("afterIn",h,y,"previous","current",l),e.params.stackPages&&e.initialPages.indexOf(m[0])>=0?(m.addClass("stacked"),m.trigger("page:stack"),e.emit("pageStack",m[0]),f&&w.addClass("stacked")):(e.pageCallback("beforeRemove",m,w,"next",void 0,l),e.removePage(m),f&&w.length&&e.removeNavbar(w)),e.allowPageChange=!0,e.emit("routeChanged",e.currentRoute,e.previousRoute,e);var L=e.params.preloadPreviousPage||e.params[s.theme+"SwipeBack"];L&&e.history[e.history.length-2]&&!c&&e.back(e.history[e.history.length-2],{preload:!0}),e.params.browserHistory&&or.clearRouterQueue()}function j(){e.setPagePosition(m,"current"),e.setPagePosition(h,"previous",!1),f&&(e.setNavbarPosition(w,"current"),e.setNavbarPosition(y,"previous",!1))}if(l.animate&&!(v&&s.width>=e.params.masterDetailBreakpoint)){var G=e.params.transition;m[0]&&m[0].f7PageTransition&&(G=m[0].f7PageTransition,delete m[0].f7PageTransition),l.transition&&(G=l.transition),!G&&e.previousRoute&&e.previousRoute.route&&(G=e.previousRoute.route.transition),!G&&e.previousRoute&&e.previousRoute.route&&e.previousRoute.route.options&&(G=e.previousRoute.route.options.transition),j(),e.animate(m,h,w,y,"backward",G,function(){U()})}else U();return e}function Hu(e,t,r,a){if(!e.allowPageChange&&!a)return e;var n=t,i=r,s=n.url,o=n.content,l=n.el,u=n.pageName,c=n.component,d=n.componentUrl;if(i.route.url&&e.url===i.route.url&&!(i.reloadCurrent||i.reloadPrevious)&&!e.params.allowDuplicateUrls)return!1;!i.route&&s&&(i.route=e.parseRouteUrl(s));function p(h,m){return Wp(e,h,se(i,m))}function f(){return e.allowPageChange=!0,e}if((s||d||c)&&(e.allowPageChange=!1),o)Wp(e,e.getPageEl(o),i);else if(l)Wp(e,e.getPageEl(l),i);else if(u)Wp(e,e.$el.children('.page[data-name="'+u+'"]').eq(0),i);else if(c||d)try{e.pageComponentLoader({routerEl:e.el,component:c,componentUrl:d,options:i,resolve:p,reject:f})}catch(h){throw e.allowPageChange=!0,h}else s&&(e.xhrAbortController&&(e.xhrAbortController.abort(),e.xhrAbortController=!1),e.xhrRequest(s,i).then(function(h){Wp(e,e.getPageEl(h),i)}).catch(function(){e.allowPageChange=!0}));return e}function Y7(){var e=this,t=Ct();if(e.swipeBackActive)return e;var r,a,n;typeof(arguments.length<=0?void 0:arguments[0])=="object"?a=(arguments.length<=0?void 0:arguments[0])||{}:(r=arguments.length<=0?void 0:arguments[0],a=(arguments.length<=1?void 0:arguments[1])||{});var i=a,s=i.name,o=i.params,l=i.query;if(s)return r=e.generateUrl({name:s,params:o,query:l}),r?e.back(r,se({},a,{name:null,params:null,query:null})):e;var u=e.app;rd(e,"back");var c=e.currentRoute.modal,d;if(c||"popup popover sheet loginScreen actions customModal panel".split(" ").forEach(function(D){e.currentRoute.route[D]&&(c=!0,d=D)}),c&&!a.preload){var p=e.currentRoute.modal||e.currentRoute.route.modalInstance||u[d].get(),f=e.history[e.history.length-2],h;if(p&&p.$el){var m=p.$el.prevAll(".modal-in");if(m.length&&m[0].f7Modal){var g=m[0];e.$el.parents(g).length||(h=g.f7Modal.route)}}if(h||(h=e.findMatchingRoute(f)),!h&&f&&(h={url:f,path:f.split("?")[0],query:th(f),route:{path:f.split("?")[0],url:f}}),(!r||r.replace(/[# ]/g,"").trim().length===0)&&(!h||!p))return e;var v=a.force&&h&&r;if(h&&p){var b=t.ie||t.edge||t.firefox&&!t.ios,y=e.params.browserHistory&&a.browserHistory!==!1,w=e.currentRoute&&e.currentRoute.route&&e.currentRoute.route.options&&e.currentRoute.route.options.browserHistory===!1;y&&!b&&!w&&or.back(),e.currentRoute=h,e.history.pop(),e.saveHistory(),y&&b&&!w&&or.back(),e.modalRemove(p),v&&e.navigate(r,{reloadCurrent:!0})}else p&&(e.modalRemove(p),r&&e.navigate(r,{reloadCurrent:!0}));return e}var x=e.$el.children(".page-current").prevAll(".page-previous:not(.page-master)").eq(0),k;if(e.params.masterDetailBreakpoint>0){var C=[];e.$el.children(".page").each(function(D){C.push(D.className)});var E=e.$el.children(".page-current").prevAll(".page-master").eq(0);if(E.length){var $=e.history[e.history.length-2],N=e.findMatchingRoute($);N&&E[0].f7Page&&N.route===E[0].f7Page.route.route&&(x=E,a.preload||(k=u.width>=e.params.masterDetailBreakpoint))}}if(!a.force&&x.length&&!k){if(e.params.browserHistory&&x[0].f7Page&&e.history[e.history.length-2]!==x[0].f7Page.route.url)return e.back(e.history[e.history.length-2],se(a,{force:!0})),e;var I=x[0].f7Page.route;return a.preload&&x.hasClass("stacked")?(Hu(e,{el:x},se(a,{route:I})),e):(qx.call(e,I,e.currentRoute,function(){Hu(e,{el:x},se(a,{route:I}))},function(){},"backward"),e)}if(r==="#"&&(r=void 0),r&&r[0]!=="/"&&r.indexOf("#")!==0&&(r=((e.path||"/")+r).replace("//","/")),!r&&e.history.length>1&&(r=e.history[e.history.length-2]),k&&!a.force&&e.history[e.history.length-3])return e.back(e.history[e.history.length-3],se({},a||{},{force:!0,animate:!1}));if(k&&!a.force||(n=e.findMatchingRoute(r),n||r&&(n={url:r,path:r.split("?")[0],query:th(r),route:{path:r.split("?")[0],url:r}}),!n))return e;if(n.route.redirect)return GR.call(e,"backward",n,a);var S={};n.route.options?se(S,n.route.options,a):se(S,a),S.route=n;var A;if(S.force&&e.params.stackPages&&(e.$el.children(".page-previous.stacked").each(function(D){D.f7Page&&D.f7Page.route&&D.f7Page.route.url===n.url&&(A=!0,Hu(e,{el:D},S))}),A))return e;function R(){var D=!1;if(n.route.keepAlive&&n.route.keepAliveData&&(Hu(e,{el:n.route.keepAliveData.pageEl},S),D=!0),"url content component pageName el componentUrl".split(" ").forEach(function(j){if(n.route[j]&&!D){var G;D=!0,Hu(e,(G={},G[j]=n.route[j],G),S)}}),D)return;function z(j,G){e.allowPageChange=!1,Hu(e,j,se(S,G),!0)}function U(){e.allowPageChange=!0}n.route.async&&(e.allowPageChange=!1,n.route.async.call(e,{router:e,to:n,from:e.currentRoute,resolve:z,reject:U,direction:"backward",app:u})),n.route.asyncComponent&&Fb(e,n.route.asyncComponent,z,U)}function O(){e.allowPageChange=!0}return S.preload?R():qx.call(e,n,e.currentRoute,function(){n.route.modules?u.loadModules(Array.isArray(n.route.modules)?n.route.modules:[n.route.modules]).then(function(){R()}).catch(function(){O()}):R()},function(){O()},"backward"),e}function K7(e){rd(e,"clearPreviousPages");var t=e.app,r=e.dynamicNavbar,a=e.$el.children(".page").filter(function(n){return e.currentRoute&&(e.currentRoute.modal||e.currentRoute.panel)?!0:n!==e.currentPageEl});a.each(function(n){var i=T(n),s=T(t.navbar.getElByPage(i));e.params.stackPages&&e.initialPages.indexOf(i[0])>=0?(i.addClass("stacked"),r&&s.addClass("stacked")):(e.pageCallback("beforeRemove",i,s,"previous",void 0,{}),e.removePage(i),r&&s.length&&e.removeNavbar(s))})}function Z7(){var e=this;rd(e,"clearPreviousHistory");var t=e.history[e.history.length-1];K7(e),e.history=[t],e.view.history=[t],e.saveHistory()}function V2(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Q7(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Xx(e,t)}function Xx(e,t){return Xx=Object.setPrototypeOf||function(a,n){return a.__proto__=n,a},Xx(e,t)}var ds=function(e){Q7(t,e);function t(a,n){var i;i=e.call(this,{},[typeof n=="undefined"?a:n])||this;var s=V2(i);s.isAppRouter=typeof n=="undefined",s.isAppRouter?se(!1,s,{app:a,params:a.params.view,routes:a.routes||[],cache:a.cache}):se(!1,s,{app:a,view:n,viewId:n.id,id:n.params.routerId,params:n.params,routes:n.routes,history:n.history,scrollHistory:n.scrollHistory,cache:a.cache,dynamicNavbar:a.theme==="ios"&&n.params.iosDynamicNavbar,initialPages:[],initialNavbars:[]}),s.useModules(),s.allowPageChange=!0;var o={},l={};return Object.defineProperty(s,"currentRoute",{enumerable:!0,configurable:!0,set:function(c){c===void 0&&(c={}),l=se({},o),o=c,o&&(s.url=o.url,s.emit("routeChange",c,l,s))},get:function(){return o}}),Object.defineProperty(s,"previousRoute",{enumerable:!0,configurable:!0,get:function(){return l},set:function(c){l=c}}),s||V2(i)}var r=t.prototype;return r.mount=function(){var n=this,i=n.view,s=nt();se(!1,n,{tempDom:s.createElement("div"),$el:i.$el,el:i.el,$navbarsEl:i.$navbarsEl,navbarsEl:i.navbarsEl}),n.emit("local::mount routerMount",n)},r.animatableNavElements=function(n,i,s,o,l){var u=this,c=u.dynamicNavbar,d=u.params.iosAnimateNavbarBackIcon,p,f;function h(m,g){var v=m.hasClass("sliding")||g.hasClass("sliding"),b=m.hasClass("subnavbar"),y=v?!b:!0,w=m.find(".back .icon"),x;return v&&d&&m.hasClass("left")&&w.length>0&&w.next("span").length&&(m=w.next("span"),x=!0),{$el:m,isIconLabel:x,leftOffset:m[0].f7NavbarLeftOffset,rightOffset:m[0].f7NavbarRightOffset,isSliding:v,isSubnavbar:b,needsOpacityTransition:y}}return c&&(p=[],f=[],n.children(".navbar-inner").children(".left, .right, .title, .subnavbar").each(function(m){var g=T(m);g.hasClass("left")&&o&&l==="forward"||g.hasClass("title")&&s||p.push(h(g,n.children(".navbar-inner")))}),i.hasClass("navbar-master")&&u.params.masterDetailBreakpoint>0&&u.app.width>=u.params.masterDetailBreakpoint||i.children(".navbar-inner").children(".left, .right, .title, .subnavbar").each(function(m){var g=T(m);g.hasClass("left")&&s&&!o&&l==="forward"||g.hasClass("left")&&s&&l==="backward"||g.hasClass("title")&&o||f.push(h(g,i.children(".navbar-inner")))}),[f,p].forEach(function(m){m.forEach(function(g){var v=g,b=g.isSliding,y=g.$el,w=m===f?p:f;!(b&&y.hasClass("title")&&w)||w.forEach(function(x){if(x.isIconLabel){var k=x.$el[0];v.leftOffset+=k&&k.offsetLeft||0}})})})),{newNavEls:p,oldNavEls:f}},r.animate=function(n,i,s,o,l,u,c){var d=this;if(d.params.animateCustom){d.params.animateCustom.apply(d,[n,i,s,o,l,c]);return}var p=d.dynamicNavbar,f=d.app.theme==="ios";if(u){var h="router-transition-custom router-transition-"+u+"-"+l,m=function(){d.$el.removeClass(h),p&&d.$navbarsEl.length&&(o&&d.$navbarsEl.prepend(o),s&&d.$navbarsEl.prepend(s)),c&&c()};(l==="forward"?i:n).animationEnd(m),p&&(o&&i&&(d.setNavbarPosition(o,""),o.removeClass("navbar-next navbar-previous navbar-current"),i.prepend(o)),s&&n&&(d.setNavbarPosition(s,""),s.removeClass("navbar-next navbar-previous navbar-current"),n.prepend(s))),d.$el.addClass(h);return}var g="router-transition-"+l+" router-transition",v,b,y,w,x,k,C;if(f&&p){var E=d.params.masterDetailBreakpoint>0&&d.app.width>=d.params.masterDetailBreakpoint&&(s.hasClass("navbar-master")&&o.hasClass("navbar-master-detail")||s.hasClass("navbar-master-detail")&&o.hasClass("navbar-master"));E||(k=s&&s.hasClass("navbar-large"),C=o&&o.hasClass("navbar-large"),y=k&&!s.hasClass("navbar-large-collapsed"),w=C&&!o.hasClass("navbar-large-collapsed"),x=y&&!w||w&&!y);var $=d.animatableNavElements(o,s,w,y,l);v=$.newNavEls,b=$.oldNavEls}function N(S){!(f&&p)||(S===1&&(w&&(o.addClass("router-navbar-transition-to-large"),s.addClass("router-navbar-transition-to-large")),y&&(o.addClass("router-navbar-transition-from-large"),s.addClass("router-navbar-transition-from-large"))),v.forEach(function(A){var R=A.$el,O=l==="forward"?A.rightOffset:A.leftOffset;A.isSliding&&(A.isSubnavbar&&C?R[0].style.setProperty("transform","translate3d("+O*(1-S)+"px, calc(-1 * var(--f7-navbar-large-collapse-progress) * var(--f7-navbar-large-title-height)), 0)","important"):R.transform("translate3d("+O*(1-S)+"px,0,0)"))}),b.forEach(function(A){var R=A.$el,O=l==="forward"?A.leftOffset:A.rightOffset;A.isSliding&&(A.isSubnavbar&&k?R.transform("translate3d("+O*S+"px, calc(-1 * var(--f7-navbar-large-collapse-progress) * var(--f7-navbar-large-title-height)), 0)"):R.transform("translate3d("+O*S+"px,0,0)"))}))}function I(){d.dynamicNavbar&&(o&&(o.removeClass("router-navbar-transition-to-large router-navbar-transition-from-large"),o.addClass("navbar-no-title-large-transition"),aa(function(){o.removeClass("navbar-no-title-large-transition")})),s&&s.removeClass("router-navbar-transition-to-large router-navbar-transition-from-large"),o.hasClass("sliding")||o.children(".navbar-inner.sliding").length?o.find(".title, .left, .right, .left .icon, .subnavbar").transform(""):o.find(".sliding").transform(""),s.hasClass("sliding")||s.children(".navbar-inner.sliding").length?s.find(".title, .left, .right, .left .icon, .subnavbar").transform(""):s.find(".sliding").transform("")),d.$el.removeClass(g),c&&c()}(l==="forward"?i:n).animationEnd(function(){I()}),p?(N(0),aa(function(){d.$el.addClass(g),x&&(d.el._clientLeft=d.el.clientLeft),N(1)})):d.$el.addClass(g)},r.removeModal=function(n){var i=this;i.removeEl(n)},r.removeTabContent=function(n){var i=T(n);i.html("")},r.removeNavbar=function(n){var i=this;i.removeEl(n)},r.removePage=function(n){var i=T(n),s=i&&i[0]&&i[0].f7Page,o=this;if(s&&s.route&&s.route.route&&s.route.route.keepAlive){i.remove();return}o.removeEl(n)},r.removeEl=function(n){if(!!n){var i=this,s=T(n);s.length!==0&&(s.find(".tab").each(function(o){T(o).children().each(function(l){l.f7Component&&(T(l).trigger("tab:beforeremove"),l.f7Component.destroy())})}),s[0].f7Component&&s[0].f7Component.destroy&&s[0].f7Component.destroy(),i.params.removeElements&&(i.params.removeElementsWithTimeout?setTimeout(function(){s.remove()},i.params.removeElementsTimeout):s.remove()))}},r.getPageEl=function(n){var i=this;if(typeof n=="string")i.tempDom.innerHTML=n;else{if(T(n).hasClass("page"))return n;i.tempDom.innerHTML="",T(i.tempDom).append(n)}return i.findElement(".page",i.tempDom)},r.findElement=function(n,i,s){var o=this,l=o.view,u=o.app,c=".popup, .dialog, .popover, .actions-modal, .sheet-modal, .login-screen, .page",d=T(i),p=n;s&&(p+=":not(.stacked)");var f=d.find(p).filter(function(h){return T(h).parents(c).length===0});if(f.length>1&&(typeof l.selector=="string"&&(f=d.find(l.selector+" "+p)),f.length>1&&(f=d.find("."+u.params.viewMainClass+" "+p))),f.length===1||(s||(f=o.findElement(p,d,!0)),f&&f.length===1))return f;if(f&&f.length>1)return T(f[0])},r.flattenRoutes=function(n){n===void 0&&(n=this.routes);var i=this,s=[];return n.forEach(function(o){var l=!1;if("tabs"in o&&o.tabs){var u=o.tabs.map(function(p){var f=se({},o,{path:(o.path+"/"+p.path).replace("///","/").replace("//","/"),parentPath:o.path,tab:p});return delete f.tabs,delete f.routes,f});l=!0,s=s.concat(i.flattenRoutes(u))}if("detailRoutes"in o){var c=o.detailRoutes.map(function(p){var f=se({},p);return f.masterRoute=o,f.masterRoutePath=o.path,f});s=s.concat(o,i.flattenRoutes(c))}if("routes"in o){var d=o.routes.map(function(p){var f=se({},p);return f.path=(o.path+"/"+f.path).replace("///","/").replace("//","/"),f});l?s=s.concat(i.flattenRoutes(d)):s=s.concat(o,i.flattenRoutes(d))}!("routes"in o)&&!("tabs"in o&&o.tabs)&&!("detailRoutes"in o)&&s.push(o)}),s},r.parseRouteUrl=function(n){if(!n)return{};var i=th(n),s=n.split("#")[1],o={},l=n.split("#")[0].split("?")[0];return{query:i,hash:s,params:o,url:n,path:l}},r.generateUrl=function(n){if(n===void 0&&(n={}),typeof n=="string")return n;var i=n,s=i.name,o=i.path,l=i.params,u=i.query;if(!s&&!o)throw new Error('Framework7: "name" or "path" parameter is required');var c=this,d=s?c.findRouteByKey("name",s):c.findRouteByKey("path",o);if(!d)throw s?new Error('Framework7: route with name "'+s+'" not found'):new Error('Framework7: route with path "'+o+'" not found');var p=c.constructRouteUrl(d,{params:l,query:u});if(!p)throw new Error(`Framework7: can't construct URL for route with name "`+s+'"');return p},r.constructRouteUrl=function(n,i){var s=i===void 0?{}:i,o=s.params,l=s.query,u=n.path,c=P7(u),d;try{d=c(o||{})}catch(p){throw new Error(`Framework7: error constructing route URL from passed params:
Route: `+u+`
`+p.toString())}return l&&(typeof l=="string"?d+="?"+l:Object.keys(l).length&&(d+="?"+Ji(l))),d},r.findTabRouteUrl=function(n){var i=this,s=T(n),o=i.currentRoute.route.parentPath,l=s.attr("id"),u=i.flattenRoutes(i.routes),c;return u.forEach(function(d){d.parentPath===o&&d.tab&&d.tab.id===l&&(i.currentRoute.params&&Object.keys(i.currentRoute.params).length>0?c=i.constructRouteUrl(d,{params:i.currentRoute.params,query:i.currentRoute.query}):c=d.path)}),c},r.findRouteByKey=function(n,i){var s=this,o=s.routes,l=s.flattenRoutes(o),u;return l.forEach(function(c){u||c[n]===i&&(u=c)}),u},r.findMatchingRoute=function(n){if(!!n){var i=this,s=i.routes,o=i.flattenRoutes(s),l=i.parseRouteUrl(n),u=l.path,c=l.query,d=l.hash,p=l.params,f;return o.forEach(function(h){if(!f){var m=[],g=[h.path];h.alias&&(typeof h.alias=="string"?g.push(h.alias):Array.isArray(h.alias)&&h.alias.forEach(function(y){g.push(y)}));var v;if(g.forEach(function(y){v||(v=jR(y,m).exec(u))}),v){m.forEach(function(y,w){if(typeof y.name!="number"){var x=v[w+1];typeof x=="undefined"||x===null?p[y.name]=x:p[y.name]=decodeURIComponent(x)}});var b;h.parentPath&&(b=u.split("/").slice(0,h.parentPath.split("/").length-1).join("/")),f={query:c,hash:d,params:p,url:n,path:u,parentPath:b,route:h,name:h.name}}}}),f}},r.replaceRequestUrlParams=function(n,i){n===void 0&&(n=""),i===void 0&&(i={});var s=n;return typeof s=="string"&&s.indexOf("{{")>=0&&i&&i.route&&i.route.params&&Object.keys(i.route.params).length&&Object.keys(i.route.params).forEach(function(o){var l=new RegExp("{{"+o+"}}","g");s=s.replace(l,i.route.params[o]||"")}),s},r.removeFromXhrCache=function(n){for(var i=this,s=i.cache.xhr,o=!1,l=0;l<s.length;l+=1)s[l].url===n&&(o=l);o!==!1&&s.splice(o,1)},r.xhrRequest=function(n,i){var s=this,o=s.params,l=i.ignoreCache,u=n,c=u.indexOf("?")>=0;return o.passRouteQueryToRequest&&i&&i.route&&i.route.query&&Object.keys(i.route.query).length&&(u+=(c?"&":"?")+Ji(i.route.query),c=!0),o.passRouteParamsToRequest&&i&&i.route&&i.route.params&&Object.keys(i.route.params).length&&(u+=(c?"&":"?")+Ji(i.route.params),c=!0),u.indexOf("{{")>=0&&(u=s.replaceRequestUrlParams(u,i)),o.xhrCacheIgnoreGetParameters&&u.indexOf("?")>=0&&(u=u.split("?")[0]),new Promise(function(d,p){if(o.xhrCache&&!l&&u.indexOf("nocache")<0&&o.xhrCacheIgnore.indexOf(u)<0)for(var f=0;f<s.cache.xhr.length;f+=1){var h=s.cache.xhr[f];if(h.url===u&&sa()-h.time<o.xhrCacheDuration){d(h.content);return}}s.xhrAbortController=s.app.request.abortController(),s.app.request({abortController:s.xhrAbortController,url:u,method:"GET",beforeSend:function(g){s.emit("routerAjaxStart",g,i)},complete:function(g,v){s.emit("routerAjaxComplete",g),v!=="error"&&v!=="timeout"&&g.status>=200&&g.status<300||g.status===0?(o.xhrCache&&g.responseText!==""&&(s.removeFromXhrCache(u),s.cache.xhr.push({url:u,time:sa(),content:g.responseText})),s.emit("routerAjaxSuccess",g,i),d(g.responseText)):(s.emit("routerAjaxError",g,i),p(g))},error:function(g){s.emit("routerAjaxError",g,i),p(g)}})})},r.setNavbarPosition=function(n,i,s){var o=this;n.removeClass("navbar-previous navbar-current navbar-next"),i&&n.addClass("navbar-"+i),s===!1?n.removeAttr("aria-hidden"):s===!0&&n.attr("aria-hidden","true"),n.trigger("navbar:position",{position:i}),o.emit("navbarPosition",n[0],i)},r.setPagePosition=function(n,i,s){var o=this;n.removeClass("page-previous page-current page-next"),n.addClass("page-"+i),s===!1?n.removeAttr("aria-hidden"):s===!0&&n.attr("aria-hidden","true"),n.trigger("page:position",{position:i}),o.emit("pagePosition",n[0],i)},r.removeThemeElements=function(n){var i=this,s=i.app.theme,o;s==="ios"?o=".md-only, .aurora-only, .if-md, .if-aurora, .if-not-ios, .not-ios":s==="md"?o=".ios-only, .aurora-only, .if-ios, .if-aurora, .if-not-md, .not-md":s==="aurora"&&(o=".ios-only, .md-only, .if-ios, .if-md, .if-not-aurora, .not-aurora"),T(n).find(o).remove()},r.getPageData=function(n,i,s,o,l,u){l===void 0&&(l={});var c=this,d=T(n).eq(0),p=T(i).eq(0),f=d[0].f7Page||{},h,m;if((s==="next"&&o==="current"||s==="current"&&o==="previous")&&(h="forward"),(s==="current"&&o==="next"||s==="previous"&&o==="current")&&(h="backward"),f&&!f.fromPage){var g=T(u);g.length&&(m=g[0].f7Page)}m=f.pageFrom||m,m&&m.pageFrom&&(m.pageFrom=null);var v={app:c.app,view:c.view,router:c,$el:d,el:d[0],$pageEl:d,pageEl:d[0],$navbarEl:p,navbarEl:p[0],name:d.attr("data-name"),position:s,from:s,to:o,direction:h,route:f.route?f.route:l,pageFrom:m};return d[0].f7Page=v,v},r.pageCallback=function(n,i,s,o,l,u,c){if(u===void 0&&(u={}),!i)return;var d=this,p=T(i);if(!p.length)return;var f=T(s),h=u,m=h.route,g=d.params.restoreScrollTopOnBack&&!(d.params.masterDetailBreakpoint>0&&p.hasClass("page-master")&&d.app.width>=d.params.masterDetailBreakpoint),v=p[0].f7Page&&p[0].f7Page.route&&p[0].f7Page.route.route&&p[0].f7Page.route.route.keepAlive;n==="beforeRemove"&&v&&(n="beforeUnmount");var b="page"+(n[0].toUpperCase()+n.slice(1,n.length)),y="page:"+n.toLowerCase(),w={};n==="beforeRemove"&&p[0].f7Page?w=se(p[0].f7Page,{from:o,to:l,position:o}):w=d.getPageData(p[0],f[0],o,l,m,c),w.swipeBack=!!u.swipeBack;var x=u.route?u.route.route:{},k=x.on,C=k===void 0?{}:k,E=x.once,$=E===void 0?{}:E;u.on&&se(C,u.on),u.once&&se($,u.once);function N(){p[0].f7RouteEventsAttached||(p[0].f7RouteEventsAttached=!0,C&&Object.keys(C).length>0&&(p[0].f7RouteEventsOn=C,Object.keys(C).forEach(function(R){C[R]=C[R].bind(d),p.on(of(R),C[R])})),$&&Object.keys($).length>0&&(p[0].f7RouteEventsOnce=$,Object.keys($).forEach(function(R){$[R]=$[R].bind(d),p.once(of(R),$[R])})))}function I(){!p[0].f7RouteEventsAttached||(p[0].f7RouteEventsOn&&Object.keys(p[0].f7RouteEventsOn).forEach(function(R){p.off(of(R),p[0].f7RouteEventsOn[R])}),p[0].f7RouteEventsOnce&&Object.keys(p[0].f7RouteEventsOnce).forEach(function(R){p.off(of(R),p[0].f7RouteEventsOnce[R])}),p[0].f7RouteEventsAttached=null,p[0].f7RouteEventsOn=null,p[0].f7RouteEventsOnce=null,delete p[0].f7RouteEventsAttached,delete p[0].f7RouteEventsOn,delete p[0].f7RouteEventsOnce)}if(n==="mounted"&&N(),n==="init"){if(g&&(o==="previous"||!o)&&l==="current"&&d.scrollHistory[w.route.url]&&!p.hasClass("no-restore-scroll")){var S=p.find(".page-content");S.length>0&&(S=S.filter(function(R){return T(R).parents(".tab:not(.tab-active)").length===0&&!T(R).is(".tab:not(.tab-active)")})),S.scrollTop(d.scrollHistory[w.route.url])}if(N(),p[0].f7PageInitialized){p.trigger("page:reinit",w),d.emit("pageReinit",w);return}p[0].f7PageInitialized=!0}if(g&&n==="beforeOut"&&o==="current"&&l==="previous"){var A=p.find(".page-content");A.length>0&&(A=A.filter(function(R){return T(R).parents(".tab:not(.tab-active)").length===0&&!T(R).is(".tab:not(.tab-active)")})),d.scrollHistory[w.route.url]=A.scrollTop()}g&&n==="beforeOut"&&o==="current"&&l==="next"&&delete d.scrollHistory[w.route.url],p.trigger(y,w),d.emit(b,w),(n==="beforeRemove"||n==="beforeUnmount")&&(I(),v||(p[0].f7Page&&p[0].f7Page.navbarEl&&delete p[0].f7Page.navbarEl.f7Page,p[0].f7Page=null))},r.saveHistory=function(){var n=this,i=De();n.view.history=n.history,n.params.browserHistory&&n.params.browserHistoryStoreHistory&&i.localStorage&&(i.localStorage["f7router-"+n.view.id+"-history"]=JSON.stringify(n.history))},r.restoreHistory=function(){var n=this,i=De();n.params.browserHistory&&n.params.browserHistoryStoreHistory&&i.localStorage&&i.localStorage["f7router-"+n.view.id+"-history"]&&(n.history=JSON.parse(i.localStorage["f7router-"+n.view.id+"-history"]),n.view.history=n.history)},r.clearHistory=function(){var n=this;n.history=[],n.view&&(n.view.history=[]),n.saveHistory()},r.updateCurrentUrl=function(n){var i=this;rd(i,"updateCurrentUrl"),i.history.length?i.history[i.history.length-1]=n:i.history.push(n);var s=i.parseRouteUrl(n),o=s.query,l=s.hash,u=s.params,c=s.url,d=s.path;if(i.currentRoute&&se(i.currentRoute,{query:o,hash:l,params:u,url:c,path:d}),i.params.browserHistory){var p=i.params.browserHistoryRoot||"";or.replace(i.view.id,{url:n},p+i.params.browserHistorySeparator+n)}i.saveHistory(),i.emit("routeUrlUpdate",i.currentRoute,i)},r.getInitialUrl=function(){var n=this;if(n.initialUrl)return{initialUrl:n.initialUrl,historyRestored:n.historyRestored};var i=n.app,s=n.view,o=nt(),l=De(),u=i.params.url&&typeof i.params.url=="string"&&typeof URL!="undefined"?new URL(i.params.url):o.location,c=n.params.url,d=u.href.split(u.origin)[1],p,f=n.params,h=f.browserHistory,m=f.browserHistoryOnLoad,g=f.browserHistorySeparator,v=n.params.browserHistoryRoot;return(l.cordova||l.Capacitor&&l.Capacitor.isNative)&&h&&!g&&!v&&u.pathname.indexOf("index.html")&&(console.warn("Framework7: wrong or not complete browserHistory configuration, trying to guess browserHistoryRoot"),v=u.pathname.split("index.html")[0]),!h||!m?(c||(c=d),u.search&&c.indexOf("?")<0&&(c+=u.search),u.hash&&c.indexOf("#")<0&&(c+=u.hash)):(v&&d.indexOf(v)>=0&&(d=d.split(v)[1],d===""&&(d="/")),g.length>0&&d.indexOf(g)>=0?c=d.split(g)[1]:c=d,n.restoreHistory(),n.history.indexOf(c)>=0?n.history=n.history.slice(0,n.history.indexOf(c)+1):n.params.url===c?n.history=[c]:or.state&&or.state[s.id]&&or.state[s.id].url===n.history[n.history.length-1]?c=n.history[n.history.length-1]:n.history=[d.split(g)[0]||"/",c],n.history.length>1?p=!0:n.history=[],n.saveHistory()),n.initialUrl=c,n.historyRestored=p,{initialUrl:c,historyRestored:p}},r.init=function(){var n=this,i=n.app,s=n.view,o=nt();n.mount();var l=n.getInitialUrl(),u=l.initialUrl,c=l.historyRestored;(s&&n.params.iosSwipeBack&&i.theme==="ios"||s&&n.params.mdSwipeBack&&i.theme==="md"||s&&n.params.auroraSwipeBack&&i.theme==="aurora")&&V7(n);var d=n.params,p=d.browserHistory,f=d.browserHistoryOnLoad,h=d.browserHistoryAnimateOnLoad,m=d.browserHistoryInitialMatch,g;if(n.history.length>1){var v=m?u:n.history[0];g=n.findMatchingRoute(v),g||(g=se(n.parseRouteUrl(v),{route:{url:v,path:v.split("?")[0]}}))}else g=n.findMatchingRoute(u),g||(g=se(n.parseRouteUrl(u),{route:{url:u,path:u.split("?")[0]}}));if(n.params.stackPages&&n.$el.children(".page").each(function(w){var x=T(w);n.initialPages.push(x[0]),n.dynamicNavbar&&x.children(".navbar").length>0&&n.initialNavbars.push(x.children(".navbar")[0])}),n.$el.children(".page:not(.stacked)").length===0&&u&&n.params.loadInitialPage)n.navigate(u,{initial:!0,reloadCurrent:!0,browserHistory:!1,animate:!1,once:{modalOpen:function(){if(!!c){var x=n.params.preloadPreviousPage||n.params[i.theme+"SwipeBack"];x&&n.history.length>1&&n.back({preload:!0})}},pageAfterIn:function(){if(!!c){var x=n.params.preloadPreviousPage||n.params[i.theme+"SwipeBack"];x&&n.history.length>1&&n.back({preload:!0})}}}});else if(n.$el.children(".page:not(.stacked)").length){var b;if(n.currentRoute=g,n.$el.children(".page:not(.stacked)").each(function(w){var x=T(w),k;n.setPagePosition(x,"current"),n.dynamicNavbar&&(k=x.children(".navbar"),k.length>0?(n.$navbarsEl.parents(o).length||n.$el.prepend(n.$navbarsEl),n.setNavbarPosition(k,"current"),n.$navbarsEl.append(k),k.children(".title-large").length&&k.addClass("navbar-large"),x.children(".navbar").remove()):(n.$navbarsEl.addClass("navbar-hidden"),k.children(".title-large").length&&n.$navbarsEl.addClass("navbar-hidden navbar-large-hidden"))),n.currentRoute&&n.currentRoute.route&&(n.currentRoute.route.master===!0||typeof n.currentRoute.route.master=="function"&&n.currentRoute.route.master(i,n))&&n.params.masterDetailBreakpoint>0&&(x.addClass("page-master"),x.trigger("page:role",{role:"master"}),k&&k.length&&k.addClass("navbar-master"),s.checkMasterDetailBreakpoint());var C={route:n.currentRoute};n.currentRoute&&n.currentRoute.route&&n.currentRoute.route.options&&se(C,n.currentRoute.route.options),n.currentPageEl=x[0],n.dynamicNavbar&&k.length&&(n.currentNavbarEl=k[0]),n.removeThemeElements(x),n.dynamicNavbar&&k.length&&n.removeThemeElements(k),C.route.route.tab&&(b=!0,n.tabLoad(C.route.route.tab,se({},C))),n.pageCallback("init",x,k,"current",void 0,C),n.pageCallback("beforeIn",x,k,"current",void 0,C),n.pageCallback("afterIn",x,k,"current",void 0,C)}),c)if(m){var y=n.params.preloadPreviousPage||n.params[i.theme+"SwipeBack"];y&&n.history.length>1&&n.back({preload:!0})}else n.navigate(u,{initial:!0,browserHistory:!1,history:!1,animate:h,once:{pageAfterIn:function(){var x=n.params.preloadPreviousPage||n.params[i.theme+"SwipeBack"];x&&n.history.length>2&&n.back({preload:!0})}}});!c&&!b&&(n.history.push(u),n.saveHistory())}u&&p&&f&&(!or.state||!or.state[s.id])&&or.initViewState(s.id,{url:u}),n.emit("local::init routerInit",n)},r.destroy=function(){var n=this;n.emit("local::destroy routerDestroy",n),Object.keys(n).forEach(function(i){n[i]=null,delete n[i]}),n=null},t}(rr);ds.prototype.navigate=U7;ds.prototype.refreshPage=W7;ds.prototype.tabLoad=j7;ds.prototype.tabRemove=G7;ds.prototype.modalLoad=q7;ds.prototype.modalRemove=X7;ds.prototype.back=Y7;ds.prototype.clearPreviousHistory=Z7;var vw=ds,QE={name:"router",static:{Router:vw},instance:{cache:{xhr:[],templates:[],components:[]}},create:function(){var t=this;t.app?t.params.router&&(t.router=new vw(t.app,t)):t.router=new vw(t)}};function J7(e){var t=e.app,r=Ft();if(e.resizableInitialized)return;se(e,{resizable:!0,resizableWidth:null,resizableInitialized:!0});var a=T("html"),n=e.$el;if(!n)return;var i,s,o,l={},u,c,d,p;function f(w){if(!w)return null;if(w.indexOf("%")>=0||w.indexOf("vw")>=0)return parseInt(w,10)/100*t.width;var x=parseInt(w,10);return Number.isNaN(x)?null:x}function h(){return e.resizable&&n.hasClass("view-resizable")&&n.hasClass("view-master-detail")}function m(w){if(!!h()){l.x=w.type==="touchstart"?w.targetTouches[0].pageX:w.pageX,l.y=w.type==="touchstart"?w.targetTouches[0].pageY:w.pageY,o=!1,s=!0;var x=n.children(".page-master");d=f(x.css("min-width")),p=f(x.css("max-width"))}}function g(w){if(!!s){w.f7PreventSwipePanel=!0;var x=w.type==="touchmove"?w.targetTouches[0].pageX:w.pageX;o||(c=i[0].offsetLeft+i[0].offsetWidth,n.addClass("view-resizing"),a.css("cursor","col-resize")),o=!0,w.preventDefault(),u=x-l.x;var k=c+u;d&&!Number.isNaN(d)&&(k=Math.max(k,d)),p&&!Number.isNaN(p)&&(k=Math.min(k,p)),k=Math.min(Math.max(k,0),t.width),e.resizableWidth=k,a[0].style.setProperty("--f7-page-master-width",k+"px"),n.trigger("view:resize",k),e.emit("local::resize viewResize",e,k)}}function v(){if(T("html").css("cursor",""),!s||!o){s=!1,o=!1;return}s=!1,o=!1,a[0].style.setProperty("--f7-page-master-width",e.resizableWidth+"px"),n.removeClass("view-resizing")}function b(){!e.resizableWidth||(d=f(i.css("min-width")),p=f(i.css("max-width")),d&&!Number.isNaN(d)&&e.resizableWidth<d&&(e.resizableWidth=Math.max(e.resizableWidth,d)),p&&!Number.isNaN(p)&&e.resizableWidth>p&&(e.resizableWidth=Math.min(e.resizableWidth,p)),e.resizableWidth=Math.min(Math.max(e.resizableWidth,0),t.width),a[0].style.setProperty("--f7-page-master-width",e.resizableWidth+"px"))}i=e.$el.children(".view-resize-handler"),i.length||(e.$el.append('<div class="view-resize-handler"></div>'),i=e.$el.children(".view-resize-handler")),e.$resizeHandlerEl=i,n.addClass("view-resizable");var y=r.passiveListener?{passive:!0}:!1;e.$el.on(t.touchEvents.start,".view-resize-handler",m,y),t.on("touchmove:active",g),t.on("touchend:passive",v),t.on("resize",b),e.on("beforeOpen",b),e.once("viewDestroy",function(){n.removeClass("view-resizable"),e.$resizeHandlerEl.remove(),e.$el.off(t.touchEvents.start,".view-resize-handler",m,y),t.off("touchmove:active",g),t.off("touchend:passive",v),t.off("resize",b),e.off("beforeOpen",b)})}function bw(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ej(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Yx(e,t)}function Yx(e,t){return Yx=Object.setPrototypeOf||function(a,n){return a.__proto__=n,a},Yx(e,t)}var qR=function(e){ej(t,e);function t(a,n,i){var s;i===void 0&&(i={}),s=e.call(this,i,[a])||this;var o=bw(s),l=o.params.routerId,u={routes:[],routesAdd:[]};if(!l){var c=T(n);if(!c.length){var d="Framework7: can't create a View instance because ";throw d+=typeof n=="string"?'the selector "'+n+`" didn't match any element`:"el must be an HTMLElement or Dom7 object",new Error(d)}}o.params=se({el:n},u,a.params.view,i),o.params.routes.length>0?o.routes=o.params.routes:o.routes=[].concat(a.routes,o.params.routesAdd),se(!1,o,{app:a,name:o.params.name,main:o.params.main,history:[],scrollHistory:{}}),o.useModules(),a.views.push(o),o.main&&(a.views.main=o),o.name&&(a.views[o.name]=o),o.index=a.views.indexOf(o);var p;return o.name?p="view_"+o.name:o.main?p="view_main":p="view_"+o.index,o.id=p,o.params.init&&(a.initialized?o.init():a.on("init",function(){o.init()})),o||bw(s)}var r=t.prototype;return r.destroy=function(){var n=this,i=n.app;n.$el.trigger("view:beforedestroy"),n.emit("local::beforeDestroy viewBeforeDestroy",n),i.off("resize",n.checkMasterDetailBreakpoint),n.main?(i.views.main=null,delete i.views.main):n.name&&(i.views[n.name]=null,delete i.views[n.name]),n.$el[0].f7View=null,delete n.$el[0].f7View,i.views.splice(i.views.indexOf(n),1),n.params.router&&n.router&&n.router.destroy(),n.emit("local::destroy viewDestroy",n),Object.keys(n).forEach(function(s){n[s]=null,delete n[s]}),n=null},r.checkMasterDetailBreakpoint=function(n){var i=this,s=i.app,o=i.$el.hasClass("view-master-detail"),l=s.width>=i.params.masterDetailBreakpoint&&i.$el.children(".page-master").length;typeof n=="undefined"&&l||n===!0?(i.$el.addClass("view-master-detail"),o||(i.emit("local::masterDetailBreakpoint viewMasterDetailBreakpoint",i),i.$el.trigger("view:masterDetailBreakpoint"))):(i.$el.removeClass("view-master-detail"),o&&(i.emit("local::masterDetailBreakpoint viewMasterDetailBreakpoint",i),i.$el.trigger("view:masterDetailBreakpoint")))},r.initMasterDetail=function(){var n=this,i=n.app;n.checkMasterDetailBreakpoint=n.checkMasterDetailBreakpoint.bind(n),n.checkMasterDetailBreakpoint(),n.params.masterDetailResizable&&J7(n),i.on("resize",n.checkMasterDetailBreakpoint)},r.mount=function(n){var i=this,s=i.app,o=i.params.el||n,l=T(o),u;typeof o=="string"?u=o:u=(l.attr("id")?"#"+l.attr("id"):"")+(l.attr("class")?"."+l.attr("class").replace(/ /g,".").replace(".active",""):"");var c;s.theme==="ios"&&i.params.iosDynamicNavbar&&(c=l.children(".navbars").eq(0),c.length===0&&(c=T('<div class="navbars"></div>'))),se(i,{$el:l,el:l[0],main:i.main||l.hasClass("view-main"),$navbarsEl:c,navbarsEl:c?c[0]:void 0,selector:u}),i.main&&(s.views.main=i),l&&l[0]&&(l[0].f7View=i),i.emit("local::mount viewMount",i)},r.init=function(n){var i=this;i.mount(n),i.params.router&&(i.params.masterDetailBreakpoint>0&&i.initMasterDetail(),i.router.init(),i.$el.trigger("view:init"),i.emit("local::init viewInit",i))},t}(rr);qR.use(QE);var Kx=qR;function tj(e){function t(r){var a=De(),n=T(r.target),i=n.closest("a"),s=i.length>0,o=s&&i.attr("href");if(s&&(i.is(e.params.clicks.externalLinks)||o&&o.indexOf("javascript:")>=0)){var l=i.attr("target");o&&a.cordova&&a.cordova.InAppBrowser&&(l==="_system"||l==="_blank")?(r.preventDefault(),a.cordova.InAppBrowser.open(o,l)):o&&a.Capacitor&&a.Capacitor.Plugins&&a.Capacitor.Plugins.Browser&&(l==="_system"||l==="_blank")&&(r.preventDefault(),a.Capacitor.Plugins.Browser.open({url:o}));return}Object.keys(e.modules).forEach(function(p){var f=e.modules[p].clicks;!f||r.preventF7Router||Object.keys(f).forEach(function(h){var m=n.closest(h).eq(0);m.length>0&&f[h].call(e,m,m.dataset(),r)})});var u={};if(s&&(r.preventDefault(),u=i.dataset()),u.clickedEl=i[0],!r.preventF7Router&&!(i.hasClass("prevent-router")||i.hasClass("router-prevent"))){var c=o&&o.length>0&&o[0]!=="#";if(c||i.hasClass("back")){var d;if(u.view&&u.view==="current"?d=e.views.current:u.view?d=T(u.view)[0].f7View:(d=n.parents(".view")[0]&&n.parents(".view")[0].f7View,!i.hasClass("back")&&d&&d.params.linksView&&(typeof d.params.linksView=="string"?d=T(d.params.linksView)[0].f7View:d.params.linksView instanceof Kx&&(d=d.params.linksView))),d||e.views.main&&(d=e.views.main),!d||!d.router)return;i[0].f7RouteProps&&(u.props=i[0].f7RouteProps),i.hasClass("back")?d.router.back(o,u):d.router.navigate(o,u)}}}e.on("click",t)}var XR={name:"clicks",params:{clicks:{externalLinks:".external"}},on:{init:function(){var t=this;tj(t)}}},YR={name:"history",static:{history:or},on:{init:function(){or.init(this)}}},Ts={registrations:[],register:function(t,r){var a=this,n=De();return!("serviceWorker"in n.navigator)||!a.serviceWorker.container?new Promise(function(i,s){s(new Error("Service worker is not supported"))}):new Promise(function(i,s){a.serviceWorker.container.register(t,r?{scope:r}:{}).then(function(o){Ts.registrations.push(o),a.emit("serviceWorkerRegisterSuccess",o),i(o)}).catch(function(o){a.emit("serviceWorkerRegisterError",o),s(o)})})},unregister:function(t){var r=this,a=De();if(!("serviceWorker"in a.navigator)||!r.serviceWorker.container)return new Promise(function(i,s){s(new Error("Service worker is not supported"))});var n;return t?Array.isArray(t)?n=t:n=[t]:n=Ts.registrations,Promise.all(n.map(function(i){return new Promise(function(s,o){i.unregister().then(function(){Ts.registrations.indexOf(i)>=0&&Ts.registrations.splice(Ts.registrations.indexOf(i),1),r.emit("serviceWorkerUnregisterSuccess",i),s()}).catch(function(l){r.emit("serviceWorkerUnregisterError",i,l),o(l)})})}))}},KR={name:"sw",params:{serviceWorker:{path:void 0,scope:void 0}},create:function(){var t=this,r=De();se(t,{serviceWorker:{container:"serviceWorker"in r.navigator?r.navigator.serviceWorker:void 0,registrations:Ts.registrations,register:Ts.register.bind(t),unregister:Ts.unregister.bind(t)}})},on:{init:function(){var t=De();if("serviceWorker"in t.navigator){var r=this;if(!(r.device.cordova||t.Capacitor&&t.Capacitor.isNative)&&!!r.serviceWorker.container){var a=r.params.serviceWorker.path,n=r.params.serviceWorker.scope;if(!(!a||Array.isArray(a)&&!a.length)){var i=Array.isArray(a)?a:[a];i.forEach(function(s){r.serviceWorker.register(s,n)})}}}}}};function Of(){return Of=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Of.apply(this,arguments)}function Zx(e){e===void 0&&(e={});var t={__store:!0},r=Of({},e.state||{}),a=Of({},e.actions||{}),n=Of({},e.getters||{}),i=se({},r),s=[],o={},l={};Object.keys(n).forEach(function(m){o[m]=[],l[m]=[]});var u=function(g){return n[g]({state:t.state})},c=function(g,v){o[g]||(o[g]=[]),v.forEach(function(b){o[g].indexOf(b)<0&&o[g].push(b)})},d=function(g,v){l[g]||(l[g]=[]),l[g].push(v)},p=function(g){var v=Object.keys(o).filter(function(b){return o[b].indexOf(g)>=0});v.forEach(function(b){!l[b]||!l[b].length||l[b].forEach(function(y){y(u(b))})})},f=function(g){Object.keys(l).forEach(function(v){var b=l[v];b.indexOf(g)>=0&&b.splice(b.indexOf(g),1)})};t.__removeCallback=function(m){f(m)};var h=function(g,v){if(v===void 0&&(v=!0),g!=="constructor"){s=[];var b=u(g);c(g,s);var y=function(C){d(g,C)},w={value:b,onUpdated:y};if(!v)return w;var x=function(C){w.value=C};return w.__callback=x,d(g,x),w}};return t.state=new Proxy(i,{set:function(g,v,b){return g[v]=b,p(v),!0},get:function(g,v){return s.push(v),g[v]}}),t.getters=new Proxy(n,{set:function(){return!1},get:function(g,v){if(!!g[v])return h(v,!0)}}),t._gettersPlain=new Proxy(n,{set:function(){return!1},get:function(g,v){if(!!g[v])return h(v,!1)}}),t.dispatch=function(m,g){return new Promise(function(v,b){if(!a[m])throw b(),new Error('Framework7: Store action "'+m+'" is not found');var y=a[m]({state:t.state,dispatch:t.dispatch},g);v(y)})},t}var ZR={name:"store",static:{createStore:Zx},proto:{createStore:Zx}},Ro=function(){var t=De();return t.Capacitor&&t.Capacitor.isNative&&t.Capacitor.Plugins&&t.Capacitor.Plugins.StatusBar},ma={hide:function(){var t=De(),r=Ct();r.cordova&&t.StatusBar&&t.StatusBar.hide(),Ro()&&t.Capacitor.Plugins.StatusBar.hide()},show:function(){var t=De(),r=Ct();r.cordova&&t.StatusBar&&t.StatusBar.show(),Ro()&&t.Capacitor.Plugins.StatusBar.show()},onClick:function(){var t=this,r;T(".popup.modal-in").length>0?r=T(".popup.modal-in").find(".page:not(.page-previous):not(.page-next):not(.cached)").find(".page-content"):T(".panel.panel-in").length>0?r=T(".panel.panel-in").find(".page:not(.page-previous):not(.page-next):not(.cached)").find(".page-content"):T(".views > .view.tab-active").length>0?r=T(".views > .view.tab-active").find(".page:not(.page-previous):not(.page-next):not(.cached)").find(".page-content"):T(".views").length>0?r=T(".views").find(".page:not(.page-previous):not(.page-next):not(.cached)").find(".page-content"):r=t.$el.children(".view").find(".page:not(.page-previous):not(.page-next):not(.cached)").find(".page-content"),r&&r.length>0&&(r.hasClass("tab")&&(r=r.parent(".tabs").children(".page-content.tab-active")),r.length>0&&r.scrollTop(0,300))},setTextColor:function(t){var r=De(),a=Ct();a.cordova&&r.StatusBar&&(t==="white"?r.StatusBar.styleLightContent():r.StatusBar.styleDefault()),Ro()&&(t==="white"?r.Capacitor.Plugins.StatusBar.setStyle({style:"DARK"}):r.Capacitor.Plugins.StatusBar.setStyle({style:"LIGHT"}))},setBackgroundColor:function(t){var r=De(),a=Ct();a.cordova&&r.StatusBar&&r.StatusBar.backgroundColorByHexString(t),Ro()&&r.Capacitor.Plugins.StatusBar.setBackgroundColor({color:t})},isVisible:function(){var t=De(),r=Ct();return new Promise(function(a){r.cordova&&t.StatusBar&&a(t.StatusBar.isVisible),Ro()&&t.Capacitor.Plugins.StatusBar.getInfo().then(function(n){a(n.visible)}),a(!1)})},overlaysWebView:function(t){t===void 0&&(t=!0);var r=De(),a=Ct();a.cordova&&r.StatusBar&&r.StatusBar.overlaysWebView(t),Ro()&&r.Capacitor.Plugins.StatusBar.setOverlaysWebView({overlay:t})},init:function(){var t=this,r=De(),a=Ct(),n=t.params.statusbar;if(!!n.enabled){var i=a.cordova&&r.StatusBar,s=Ro();(i||s)&&(n.scrollTopOnClick&&T(r).on("statusTap",ma.onClick.bind(t)),a.ios&&(n.iosOverlaysWebView?ma.overlaysWebView(!0):ma.overlaysWebView(!1),n.iosTextColor==="white"?ma.setTextColor("white"):ma.setTextColor("black")),a.android&&(n.androidOverlaysWebView?ma.overlaysWebView(!0):ma.overlaysWebView(!1),n.androidTextColor==="white"?ma.setTextColor("white"):ma.setTextColor("black"))),n.iosBackgroundColor&&a.ios&&ma.setBackgroundColor(n.iosBackgroundColor),n.androidBackgroundColor&&a.android&&ma.setBackgroundColor(n.androidBackgroundColor)}}},QR={name:"statusbar",params:{statusbar:{enabled:!0,scrollTopOnClick:!0,iosOverlaysWebView:!0,iosTextColor:"black",iosBackgroundColor:null,androidOverlaysWebView:!1,androidTextColor:"black",androidBackgroundColor:null}},create:function(){var t=this;En(t,{statusbar:ma})},on:{init:function(){var t=this;ma.init.call(t)}}};function rj(e){var t=T(".popover.modal-in .view"),r=T(".popup.modal-in .view"),a=T(".panel.panel-in .view"),n=T(".views");n.length===0&&(n=e.$el);var i=n.children(".view");if(i.length===0&&(i=n.children(".tabs").children(".view")),i.length>1&&i.hasClass("tab")&&(i=n.children(".view.tab-active"),i.length===0&&(i=n.children(".tabs").children(".view.tab-active"))),t.length>0&&t[0].f7View)return t[0].f7View;if(r.length>0&&r[0].f7View)return r[0].f7View;if(a.length>0&&a[0].f7View)return a[0].f7View;if(i.length>0){if(i.length===1&&i[0].f7View)return i[0].f7View;if(i.length>1)return e.views.main}}var JR={name:"view",params:{view:{init:!0,name:void 0,main:!1,router:!0,linksView:null,stackPages:!1,xhrCache:!0,xhrCacheIgnore:[],xhrCacheIgnoreGetParameters:!1,xhrCacheDuration:1e3*60*10,componentCache:!0,preloadPreviousPage:!0,allowDuplicateUrls:!1,reloadPages:!1,reloadDetail:!1,masterDetailBreakpoint:0,masterDetailResizable:!1,removeElements:!0,removeElementsWithTimeout:!1,removeElementsTimeout:0,restoreScrollTopOnBack:!0,unloadTabContent:!0,passRouteQueryToRequest:!0,passRouteParamsToRequest:!1,loadInitialPage:!0,iosSwipeBack:!0,iosSwipeBackAnimateShadow:!0,iosSwipeBackAnimateOpacity:!0,iosSwipeBackActiveArea:30,iosSwipeBackThreshold:0,mdSwipeBack:!1,mdSwipeBackAnimateShadow:!0,mdSwipeBackAnimateOpacity:!1,mdSwipeBackActiveArea:30,mdSwipeBackThreshold:0,auroraSwipeBack:!1,auroraSwipeBackAnimateShadow:!1,auroraSwipeBackAnimateOpacity:!0,auroraSwipeBackActiveArea:30,auroraSwipeBackThreshold:0,browserHistory:!1,browserHistoryRoot:void 0,browserHistoryAnimate:!0,browserHistoryAnimateOnLoad:!1,browserHistorySeparator:"#!",browserHistoryOnLoad:!0,browserHistoryInitialMatch:!1,browserHistoryStoreHistory:!0,animate:!0,iosDynamicNavbar:!0,iosAnimateNavbarBackIcon:!0,iosPageLoadDelay:0,mdPageLoadDelay:0,auroraPageLoadDelay:0,routesBeforeEnter:null,routesBeforeLeave:null}},static:{View:Kx},create:function(){var t=this;se(t,{views:se([],{create:function(a,n){return new Kx(t,a,n)},get:function(a){var n=T(a);if(n.length&&n[0].f7View)return n[0].f7View}})}),Object.defineProperty(t.views,"current",{enumerable:!0,configurable:!0,get:function(){return rj(t)}}),t.view=t.views},on:{init:function(){var t=this;T(".view-init").each(function(r){if(!r.f7View){var a=T(r).dataset();t.views.create(r,a)}})},"modalOpen panelOpen":function(t){var r=this;t.$el.find(".view-init").each(function(a){if(!a.f7View){var n=T(a).dataset();r.views.create(a,n)}})},"modalBeforeDestroy panelBeforeDestroy":function(t){!t||!t.$el||t.$el.find(".view-init").each(function(r){var a=r.f7View;!a||a.destroy()})}},vnode:{"view-init":{insert:function(t){var r=this,a=t.elm;if(!a.f7View){var n=T(a).dataset();r.views.create(a,n)}},destroy:function(t){var r=t.elm,a=r.f7View;!a||a.destroy()}}}},nj={size:function(t){var r=this,a=T(t);if(a.hasClass("navbars")){a=a.children(".navbar").each(function(U){r.navbar.size(U)});return}var n=a.children(".navbar-inner");if(!!n.length){var i=n.hasClass("navbar-inner-centered-title")||r.params.navbar[r.theme+"CenterTitle"],s=r.theme==="ios"&&!r.params.navbar[r.theme+"CenterTitle"];if(!(!i&&!s)&&!(a.hasClass("stacked")||a.parents(".stacked").length>0||a.parents(".tab:not(.tab-active)").length>0||a.parents(".popup:not(.modal-in)").length>0)){r.theme!=="ios"&&r.params.navbar[r.theme+"CenterTitle"]&&n.addClass("navbar-inner-centered-title"),r.theme==="ios"&&!r.params.navbar.iosCenterTitle&&n.addClass("navbar-inner-left-title");var o=a.parents(".view").eq(0),l=r.rtl?n.children(".right"):n.children(".left"),u=r.rtl?n.children(".left"):n.children(".right"),c=n.children(".title"),d=n.children(".subnavbar"),p=l.length===0,f=u.length===0,h=p?0:l.outerWidth(!0),m=f?0:u.outerWidth(!0),g=c.outerWidth(!0),v=n.styles(),b=n[0].offsetWidth,y=b-parseInt(v.paddingLeft,10)-parseInt(v.paddingRight,10),w=a.hasClass("navbar-previous"),x=n.hasClass("sliding"),k,C;o.length>0&&o[0].f7View&&(k=o[0].f7View.router,C=k&&k.dynamicNavbar);var E,$;f&&(E=y-g),p&&(E=0),!p&&!f&&(E=(y-m-g+h)/2);var N=(y-g)/2;y-h-m>g?(N<h&&(N=h),N+g>y-m&&(N=y-m-g),$=N-E):$=0;var I=r.rtl?-1:1;if(C&&r.theme==="ios"){if(c.hasClass("sliding")||c.length>0&&x){var S=-(E+$)*I,A=(y-E-$-g)*I;if(w&&k&&k.params.iosAnimateNavbarBackIcon){var R=a.parent().find(".navbar-current").children(".left.sliding").find(".back .icon ~ span");R.length>0&&(S+=R[0].offsetLeft)}c[0].f7NavbarLeftOffset=S,c[0].f7NavbarRightOffset=A}if(!p&&(l.hasClass("sliding")||x)){if(r.rtl)l[0].f7NavbarLeftOffset=-(y-l[0].offsetWidth)/2*I,l[0].f7NavbarRightOffset=h*I;else if(l[0].f7NavbarLeftOffset=-h,l[0].f7NavbarRightOffset=(y-l[0].offsetWidth)/2,k&&k.params.iosAnimateNavbarBackIcon&&l.find(".back .icon").length>0&&l.find(".back .icon ~ span").length){var O=l[0].f7NavbarLeftOffset,D=l[0].f7NavbarRightOffset;l[0].f7NavbarLeftOffset=0,l[0].f7NavbarRightOffset=0,l.find(".back .icon ~ span")[0].f7NavbarLeftOffset=O,l.find(".back .icon ~ span")[0].f7NavbarRightOffset=D-l.find(".back .icon")[0].offsetWidth}}!f&&(u.hasClass("sliding")||x)&&(r.rtl?(u[0].f7NavbarLeftOffset=-m*I,u[0].f7NavbarRightOffset=(y-u[0].offsetWidth)/2*I):(u[0].f7NavbarLeftOffset=-(y-u[0].offsetWidth)/2,u[0].f7NavbarRightOffset=m)),d.length&&(d.hasClass("sliding")||x)&&(d[0].f7NavbarLeftOffset=r.rtl?d[0].offsetWidth:-d[0].offsetWidth,d[0].f7NavbarRightOffset=-d[0].f7NavbarLeftOffset)}if(i){var z=$;r.rtl&&p&&f&&c.length>0&&(z=-z),c.css({left:z+"px"})}}}},hide:function(t,r,a,n){r===void 0&&(r=!0),a===void 0&&(a=!1),n===void 0&&(n=!1);var i=this,s=T(t),o=s.hasClass("navbar")&&s.parent(".navbars").length&&!n;if(o&&(s=s.parents(".navbars")),!!s.length&&!s.hasClass("navbar-hidden")){var l="navbar-hidden"+(r?" navbar-transitioning":""),u=o?s.find(".navbar-current .title-large").length:s.find(".title-large").length;u&&(l+=" navbar-large-hidden"),a&&(l+=" navbar-hidden-statusbar"),s.transitionEnd(function(){s.removeClass("navbar-transitioning")}),s.addClass(l),o?s.children(".navbar").each(function(c){T(c).trigger("navbar:hide"),i.emit("navbarHide",c)}):(s.trigger("navbar:hide"),i.emit("navbarHide",s[0]))}},show:function(t,r,a){t===void 0&&(t=".navbar-hidden"),r===void 0&&(r=!0),a===void 0&&(a=!1);var n=this,i=T(t),s=i.hasClass("navbar")&&i.parent(".navbars").length&&!a;s&&(i=i.parents(".navbars")),i.length&&(!i.hasClass("navbar-hidden")||(r&&(i.addClass("navbar-transitioning"),i.transitionEnd(function(){i.removeClass("navbar-transitioning")})),i.removeClass("navbar-hidden navbar-large-hidden navbar-hidden-statusbar"),s?i.children(".navbar").each(function(o){T(o).trigger("navbar:show"),n.emit("navbarShow",o)}):(i.trigger("navbar:show"),n.emit("navbarShow",i[0]))))},getElByPage:function(t){var r,a,n;if(t.$navbarEl||t.$el?(n=t,r=t.$el):(r=T(t),r.length>0&&(n=r[0].f7Page)),n&&n.$navbarEl&&n.$navbarEl.length>0?a=n.$navbarEl:r&&(a=r.children(".navbar")),!(!a||a&&a.length===0))return a[0]},getPageByEl:function(t){var r=T(t);if(r.parents(".page").length)return r.parents(".page")[0];var a;return r.parents(".view").find(".page").each(function(n){n&&n.f7Page&&n.f7Page.navbarEl&&r[0]===n.f7Page.navbarEl&&(a=n)}),a},collapseLargeTitle:function(t){var r=this,a=T(t);if(!(a.hasClass("navbars")&&(a=a.find(".navbar"),a.length>1&&(a=T(t).find(".navbar-large.navbar-current")),a.length>1||!a.length))){var n=T(r.navbar.getPageByEl(a));a.addClass("navbar-large-collapsed"),n.eq(0).addClass("page-with-navbar-large-collapsed").trigger("page:navbarlargecollapsed"),r.emit("pageNavbarLargeCollapsed",n[0]),a.trigger("navbar:collapse"),r.emit("navbarCollapse",a[0])}},expandLargeTitle:function(t){var r=this,a=T(t);if(!(a.hasClass("navbars")&&(a=a.find(".navbar-large"),a.length>1&&(a=T(t).find(".navbar-large.navbar-current")),a.length>1||!a.length))){var n=T(r.navbar.getPageByEl(a));a.removeClass("navbar-large-collapsed"),n.eq(0).removeClass("page-with-navbar-large-collapsed").trigger("page:navbarlargeexpanded"),r.emit("pageNavbarLargeExpanded",n[0]),a.trigger("navbar:expand"),r.emit("navbarExpand",a[0])}},toggleLargeTitle:function(t){var r=this,a=T(t);a.hasClass("navbars")&&(a=a.find(".navbar-large"),a.length>1&&(a=T(t).find(".navbar-large.navbar-current")),a.length>1||!a.length)||(a.hasClass("navbar-large-collapsed")?r.navbar.expandLargeTitle(a):r.navbar.collapseLargeTitle(a))},initNavbarOnScroll:function(t,r,a,n,i){var s=this,o=Ft(),l=T(t),u=T(r),c=u.find(".title-large"),d=c.length||u.hasClass(".navbar-large"),p=44,f=s.params.navbar.snapPageScrollToLargeTitle,h=s.params.navbar.snapPageScrollToTransparentNavbar,m,g,v,b,y,w,x,k,C,E;(n||a&&d)&&(C=u.css("--f7-navbar-large-title-height"),C&&C.indexOf("px")>=0?(C=parseInt(C,10),Number.isNaN(C)&&c.length?C=c[0].offsetHeight:Number.isNaN(C)&&(s.theme==="ios"?C=52:s.theme==="md"?C=48:s.theme==="aurora"&&(C=38))):c.length?C=c[0].offsetHeight:s.theme==="ios"?C=52:s.theme==="md"?C=48:s.theme==="aurora"&&(C=38)),a&&d&&(p+=C);var $,N,I,S,A=70,R=300;function O(){l.find(".page-content").each(function(Z){Z.f7ScrollableDistance=Z.scrollHeight-Z.offsetHeight})}function D(){var Z=u.hasClass("with-searchbar-expandable-enabled");Z||!N||g<0||(g>=C/2&&g<C?T(N).scrollTop(C,100):g<C&&T(N).scrollTop(0,200))}function z(){var Z=u.hasClass("with-searchbar-expandable-enabled");Z||!N||g<0||(g>=E/2&&g<E?T(N).scrollTop(E,100):g<E&&T(N).scrollTop(0,200))}function U(){var Z=u.hasClass("navbar-hidden")||u.parent(".navbars").hasClass("navbar-hidden"),le=u.hasClass("with-searchbar-expandable-enabled");if(!(le||Z)){E||(E=r.offsetHeight);var de=g/E,ie=u.hasClass("navbar-transparent-visible");if(de=Math.max(Math.min(de,1),0),ie&&de===1||!ie&&de===0){u.find(".navbar-bg, .title").css("opacity","");return}if(ie&&de===0){u.trigger("navbar:transparenthide"),s.emit("navbarTransparentHide",u[0]),u.removeClass("navbar-transparent-visible"),u.find(".navbar-bg, .title").css("opacity","");return}if(!ie&&de===1){u.trigger("navbar:transparentshow"),s.emit("navbarTransparentShow",u[0]),u.addClass("navbar-transparent-visible"),u.find(".navbar-bg, .title").css("opacity","");return}u.find(".navbar-bg, .title").css("opacity",de),h&&(o.touch?S&&(clearTimeout(S),S=null,S=setTimeout(function(){z(),clearTimeout(S),S=null},A)):(clearTimeout(I),I=setTimeout(function(){z()},R)))}}var j=null,G=null;function L(Z){var le=u.hasClass("navbar-hidden")||u.parent(".navbars").hasClass("navbar-hidden");if(!le){var de=u.hasClass("navbar-large-transparent")||u.hasClass("navbar-large")&&u.hasClass("navbar-transparent");j=G;var ie=Math.min(C,Z.f7ScrollableDistance||C);G=Math.min(Math.max(g/ie,0),1);var ue=j>0&&j<1,pe=u.hasClass("with-searchbar-expandable-enabled");pe||(k=u.hasClass("navbar-large-collapsed"),G===0&&k?s.navbar.expandLargeTitle(u[0]):G===1&&!k&&s.navbar.collapseLargeTitle(u[0]),G===0&&k||G===0&&ue||G===1&&!k||G===1&&ue?(s.theme==="md"&&u.find(".navbar-inner").css("overflow",""),u.find(".title").css("opacity",""),u.find(".title-large-text, .subnavbar").css("transform",""),de?u.find(".navbar-bg").css("opacity",""):u.find(".navbar-bg").css("transform","")):G>0&&G<1&&(s.theme==="md"&&u.find(".navbar-inner").css("overflow","visible"),u.find(".title").css("opacity",G),u.find(".title-large-text, .subnavbar").css("transform","translate3d(0px, "+-1*G*C+"px, 0)"),de?u.find(".navbar-bg").css("opacity",G):u.find(".navbar-bg").css("transform","translate3d(0px, "+-1*G*C+"px, 0)")),f&&(o.touch?S&&(clearTimeout(S),S=null,S=setTimeout(function(){D(),clearTimeout(S),S=null},A)):(clearTimeout(I),I=setTimeout(function(){D()},R))))}}function V(){l.hasClass("page-with-card-opened")||(v=N.scrollHeight,b=N.offsetHeight,y=g+b>=v,x=u.hasClass("navbar-hidden")||u.parent(".navbars").hasClass("navbar-hidden"),y?s.params.navbar.showOnPageScrollEnd&&(w="show"):m>g?s.params.navbar.showOnPageScrollTop||g<=p?w="show":w="hide":g>p?w="hide":w="show",w==="show"&&x?(s.navbar.show(u,!0,!0),x=!1):w==="hide"&&!x&&(s.navbar.hide(u,!0,!1,!0),x=!0),m=g)}function H(Z){N=this,!(Z&&Z.target&&Z.target!==N)&&(g=N.scrollTop,$=g,n?L(N):i&&U(),!l.hasClass("page-previous")&&a&&V())}function Y(){$=!1}function K(){clearTimeout(S),S=null,S=setTimeout(function(){$!==!1&&(i&&!n?z():D(),clearTimeout(S),S=null)},A)}l.on("scroll",".page-content",H,!0),o.touch&&(n&&f||i&&h)&&(s.on("touchstart:passive",Y),s.on("touchend:passive",K)),O(),(n||i)&&l.find(".page-content").each(function(Z){Z.scrollTop>0&&H.call(Z)}),s.on("resize",O),l[0].f7DetachNavbarScrollHandlers=function(){s.off("resize",O),delete l[0].f7DetachNavbarScrollHandlers,l.off("scroll",".page-content",H,!0),o.touch&&(n&&f||i&&h)&&(s.off("touchstart:passive",Y),s.off("touchend:passive",K))}}},eO={name:"navbar",create:function(){var t=this;En(t,{navbar:nj})},params:{navbar:{scrollTopOnTitleClick:!0,iosCenterTitle:!0,mdCenterTitle:!1,auroraCenterTitle:!0,hideOnPageScroll:!1,showOnPageScrollEnd:!0,showOnPageScrollTop:!0,collapseLargeTitleOnScroll:!0,snapPageScrollToLargeTitle:!0,snapPageScrollToTransparentNavbar:!0}},on:{"panelBreakpoint panelCollapsedBreakpoint panelResize viewResize resize viewMasterDetailBreakpoint":function(){var t=this;T(".navbar").each(function(r){t.navbar.size(r)})},pageBeforeRemove:function(t){t.$el[0].f7DetachNavbarScrollHandlers&&t.$el[0].f7DetachNavbarScrollHandlers()},pageBeforeIn:function(t){var r=this;if(r.theme==="ios"){var a,n=t.$el.parents(".view")[0].f7View,i=r.navbar.getElByPage(t);if(i?a=T(i).parents(".navbars"):a=t.$el.parents(".view").children(".navbars"),t.$el.hasClass("no-navbar")||n.router.dynamicNavbar&&!i){var s=!!(t.pageFrom&&t.router.history.length>0);r.navbar.hide(a,s)}else r.navbar.show(a)}},pageReinit:function(t){var r=this,a=T(r.navbar.getElByPage(t));!a||a.length===0||r.navbar.size(a)},pageInit:function(t){var r=this,a=T(r.navbar.getElByPage(t));if(!(!a||a.length===0)){r.navbar.size(a);var n;a.find(".title-large").length>0&&a.addClass("navbar-large"),a.hasClass("navbar-large")&&(r.params.navbar.collapseLargeTitleOnScroll&&(n=!0),t.$el.addClass("page-with-navbar-large"));var i;!n&&a.hasClass("navbar-transparent")&&(i=!0);var s;(r.params.navbar.hideOnPageScroll||t.$el.find(".hide-navbar-on-scroll").length||t.$el.hasClass("hide-navbar-on-scroll")||t.$el.find(".hide-bars-on-scroll").length||t.$el.hasClass("hide-bars-on-scroll"))&&(t.$el.find(".keep-navbar-on-scroll").length||t.$el.hasClass("keep-navbar-on-scroll")||t.$el.find(".keep-bars-on-scroll").length||t.$el.hasClass("keep-bars-on-scroll")?s=!1:s=!0),(n||s||i)&&r.navbar.initNavbarOnScroll(t.el,a[0],s,n,i)}},"panelOpen panelSwipeOpen modalOpen":function(t){var r=this;t.$el.find(".navbar:not(.navbar-previous):not(.stacked)").each(function(a){r.navbar.size(a)})},tabShow:function(t){var r=this;T(t).find(".navbar:not(.navbar-previous):not(.stacked)").each(function(a){r.navbar.size(a)})}},clicks:{".navbar .title":function(t,r,a){var n=this;if(!!n.params.navbar.scrollTopOnTitleClick&&!(T(a.target).closest("a, button").length>0)){var i,s=t.parents(".navbar"),o=s.parents(".navbars");i=s.parents(".page-content"),i.length===0&&(s.parents(".page").length>0&&(i=s.parents(".page").find(".page-content")),i.length===0&&o.length&&o.nextAll(".page-current:not(.stacked)").length>0&&(i=o.nextAll(".page-current:not(.stacked)").find(".page-content")),i.length===0&&s.nextAll(".page-current:not(.stacked)").length>0&&(i=s.nextAll(".page-current:not(.stacked)").find(".page-content"))),i&&i.length>0&&(i.hasClass("tab")&&(i=i.parent(".tabs").children(".page-content.tab-active")),i.length>0&&i.scrollTop(0,300))}}},vnode:{navbar:{postpatch:function(t){var r=this;r.navbar.size(t.elm)}}}},aj={setHighlight:function(t){var r=this,a=T(t);if(!(r.theme==="ios"&&!a.hasClass("tabbar-highlight"))&&!(a.length===0||!(a.hasClass("tabbar")||a.hasClass("tabbar-labels")))){var n=a.find(".tab-link-highlight"),i=a.find(".tab-link").length;if(i===0){n.remove();return}n.length===0?(a.children(".toolbar-inner").append('<span class="tab-link-highlight"></span>'),n=a.find(".tab-link-highlight")):n.next().length&&a.children(".toolbar-inner").append(n);var s=a.find(".tab-link-active"),o,l;if(a.hasClass("tabbar-scrollable")&&s&&s[0])o=s[0].offsetWidth+"px",l=s[0].offsetLeft+"px";else{var u=s.index();o=100/i+"%",l=(r.rtl?-u:u)*100+"%"}aa(function(){n.css("width",o).transform("translate3d("+l+",0,0)")})}},init:function(t){var r=this;r.toolbar.setHighlight(t)},hide:function(t,r){r===void 0&&(r=!0);var a=this,n=T(t);if(!n.hasClass("toolbar-hidden")){var i="toolbar-hidden"+(r?" toolbar-transitioning":"");n.transitionEnd(function(){n.removeClass("toolbar-transitioning")}),n.addClass(i),n.trigger("toolbar:hide"),a.emit("toolbarHide",n[0])}},show:function(t,r){r===void 0&&(r=!0);var a=this,n=T(t);!n.hasClass("toolbar-hidden")||(r&&(n.addClass("toolbar-transitioning"),n.transitionEnd(function(){n.removeClass("toolbar-transitioning")})),n.removeClass("toolbar-hidden"),n.trigger("toolbar:show"),a.emit("toolbarShow",n[0]))},initToolbarOnScroll:function(t){var r=this,a=T(t),n=a.parents(".view").children(".toolbar");if(n.length===0&&(n=a.find(".toolbar")),n.length===0&&(n=a.parents(".views").children(".tabbar, .tabbar-labels")),n.length===0)return;var i,s,o,l,u,c,d;function p(f){if(!a.hasClass("page-with-card-opened")&&!a.hasClass("page-previous")){var h=this;f&&f.target&&f.target!==h||(s=h.scrollTop,o=h.scrollHeight,l=h.offsetHeight,u=s+l>=o,d=n.hasClass("toolbar-hidden"),u?r.params.toolbar.showOnPageScrollEnd&&(c="show"):i>s?r.params.toolbar.showOnPageScrollTop||s<=44?c="show":c="hide":s>44?c="hide":c="show",c==="show"&&d?(r.toolbar.show(n),d=!1):c==="hide"&&!d&&(r.toolbar.hide(n),d=!0),i=s)}}a.on("scroll",".page-content",p,!0),a[0].f7ScrollToolbarHandler=p}},tO={name:"toolbar",create:function(){var t=this;En(t,{toolbar:aj})},params:{toolbar:{hideOnPageScroll:!1,showOnPageScrollEnd:!0,showOnPageScrollTop:!0}},on:{pageBeforeRemove:function(t){t.$el[0].f7ScrollToolbarHandler&&t.$el.off("scroll",".page-content",t.$el[0].f7ScrollToolbarHandler,!0)},pageBeforeIn:function(t){var r=this,a=t.$el.parents(".view").children(".toolbar");a.length===0&&(a=t.$el.parents(".views").children(".tabbar, .tabbar-labels")),a.length===0&&(a=t.$el.find(".toolbar")),a.length!==0&&(t.$el.hasClass("no-toolbar")?r.toolbar.hide(a):r.toolbar.show(a))},pageInit:function(t){var r=this;if(t.$el.find(".tabbar, .tabbar-labels").each(function(a){r.toolbar.init(a)}),r.params.toolbar.hideOnPageScroll||t.$el.find(".hide-toolbar-on-scroll").length||t.$el.hasClass("hide-toolbar-on-scroll")||t.$el.find(".hide-bars-on-scroll").length||t.$el.hasClass("hide-bars-on-scroll")){if(t.$el.find(".keep-toolbar-on-scroll").length||t.$el.hasClass("keep-toolbar-on-scroll")||t.$el.find(".keep-bars-on-scroll").length||t.$el.hasClass("keep-bars-on-scroll"))return;r.toolbar.initToolbarOnScroll(t.el)}},init:function(){var t=this;t.$el.find(".tabbar, .tabbar-labels").each(function(r){t.toolbar.init(r)})}},vnode:{tabbar:{insert:function(t){var r=this;r.toolbar.init(t.elm)}}}},rO={name:"subnavbar",on:{pageInit:function(t){t.$navbarEl&&t.$navbarEl.length&&t.$navbarEl.find(".subnavbar").length&&t.$el.addClass("page-with-subnavbar");var r=t.$el.find(".subnavbar").filter(function(a){return T(a).parents(".page")[0]===t.$el[0]});r.length&&t.$el.addClass("page-with-subnavbar")}}},W2=function(){function e(r,a,n,i){var s=this;if(!!a){var o=a[0].getBoundingClientRect(),l=o.left,u=o.top,c=o.width,d=o.height,p={x:n-l,y:i-u},f=Math.max(Math.pow(Math.pow(d,2)+Math.pow(c,2),.5),48),h=!1,m=r.params.touch.touchRippleInsetElements||"";if(m&&a.is(m)&&(h=!0),h&&(f=Math.max(Math.min(c,d),48)),!h&&a.css("overflow")==="hidden"){var g=Math.pow(Math.pow(p.x-c/2,2)+Math.pow(p.y-d/2,2),.5),v=(f/2+g)/(f/2);s.rippleTransform="translate3d(0px, 0px, 0) scale("+v+")"}else s.rippleTransform="translate3d("+(-p.x+c/2)+"px, "+(-p.y+d/2)+"px, 0) scale(1)";return h&&a.addClass("ripple-inset"),s.$rippleWaveEl=T('<div class="ripple-wave" style="width: '+f+"px; height: "+f+"px; margin-top:-"+f/2+"px; margin-left:-"+f/2+"px; left:"+p.x+"px; top:"+p.y+"px; --f7-ripple-transform: "+s.rippleTransform+'"></div>'),a.prepend(s.$rippleWaveEl),s.$rippleWaveEl.animationEnd(function(){!s.$rippleWaveEl||s.$rippleWaveEl.hasClass("ripple-wave-out")||(s.$rippleWaveEl.addClass("ripple-wave-in"),s.shouldBeRemoved&&s.out())}),s}}var t=e.prototype;return t.destroy=function(){var a=this;a.$rippleWaveEl&&a.$rippleWaveEl.remove(),Object.keys(a).forEach(function(n){a[n]=null,delete a[n]}),a=null},t.out=function(){var a=this,n=this.$rippleWaveEl;clearTimeout(a.removeTimeout),n.addClass("ripple-wave-out"),a.removeTimeout=setTimeout(function(){a.destroy()},300),n.animationEnd(function(){clearTimeout(a.removeTimeout),a.destroy()})},t.remove=function(){var a=this;a.shouldBeRemoved||(a.removeTimeout=setTimeout(function(){a.destroy()},400),a.shouldBeRemoved=!0,a.$rippleWaveEl.hasClass("ripple-wave-in")&&a.out())},e}();function Kg(e,t,r){return ij()?Kg=Reflect.construct:Kg=function(n,i,s){var o=[null];o.push.apply(o,i);var l=Function.bind.apply(n,o),u=new l;return s&&Qx(u,s.prototype),u},Kg.apply(null,arguments)}function ij(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Qx(e,t){return Qx=Object.setPrototypeOf||function(a,n){return a.__proto__=n,a},Qx(e,t)}var nO={name:"touch-ripple",static:{TouchRipple:W2},create:function(){var t=this;t.touchRipple={create:function(){for(var a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];return Kg(W2,n)}}}};function yw(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sj(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Jx(e,t)}function Jx(e,t){return Jx=Object.setPrototypeOf||function(a,n){return a.__proto__=n,a},Jx(e,t)}var Hp=[],oc=[];function oj(){if(oc.length!==0){var e=oc.shift();e.open()}}var lj=function(e){sj(t,e);function t(a,n){var i;i=e.call(this,n,[a])||this;var s=yw(i),o={};s.useModulesParams(o),s.params=se(o,n),s.opened=!1;var l=s.params.containerEl?T(s.params.containerEl).eq(0):a.$el;return l.length||(l=a.$el),s.$containerEl=l,s.containerEl=l[0],s.useModules(),yw(i)||yw(i)}var r=t.prototype;return r.onOpen=function(){var n=this;n.opened=!0,Hp.push(n),T("html").addClass("with-modal-"+n.type.toLowerCase()),n.$el.trigger("modal:open "+n.type.toLowerCase()+":open"),n.emit("local::open modalOpen "+n.type+"Open",n)},r.onOpened=function(){var n=this;n.$el.trigger("modal:opened "+n.type.toLowerCase()+":opened"),n.emit("local::opened modalOpened "+n.type+"Opened",n)},r.onClose=function(){var n=this;n.opened=!1,!(!n.type||!n.$el)&&(Hp.splice(Hp.indexOf(n),1),T("html").removeClass("with-modal-"+n.type.toLowerCase()),n.$el.trigger("modal:close "+n.type.toLowerCase()+":close"),n.emit("local::close modalClose "+n.type+"Close",n))},r.onClosed=function(){var n=this;!n.type||!n.$el||(n.$el.removeClass("modal-out"),n.$el.hide(),n.$el.trigger("modal:closed "+n.type.toLowerCase()+":closed"),n.emit("local::closed modalClosed "+n.type+"Closed",n))},r.open=function(n){var i=this,s=nt(),o=i.app,l=i.$el,u=i.$backdropEl,c=i.type,d=!0;if(typeof n!="undefined"?d=n:typeof i.params.animate!="undefined"&&(d=i.params.animate),!l||l.hasClass("modal-in"))return n===!1&&l[0]&&c!=="dialog"&&(l[0].style.display="block"),i;if(c==="dialog"&&o.params.modal.queueDialogs){var p;if(T(".dialog.modal-in").length>0?p=!0:Hp.length>0&&Hp.forEach(function(g){g.type==="dialog"&&(p=!0)}),p)return oc.push(i),i}var f=l.parent(),h=l.parents(s).length>0;f.is(i.$containerEl)||(i.$containerEl.append(l),i.once(c+"Closed",function(){h?f.append(l):l.remove()})),l.show(),i._clientLeft=l[0].clientLeft;function m(){l.hasClass("modal-out")?i.onClosed():l.hasClass("modal-in")&&i.onOpened()}return d?(u&&(u.removeClass("not-animated"),u.addClass("backdrop-in")),l.animationEnd(function(){m()}),l.transitionEnd(function(){m()}),l.removeClass("modal-out not-animated").addClass("modal-in"),i.onOpen()):(u&&u.addClass("backdrop-in not-animated"),l.removeClass("modal-out").addClass("modal-in not-animated"),i.onOpen(),i.onOpened()),i},r.close=function(n){var i=this,s=i.$el,o=i.$backdropEl,l=!0;if(typeof n!="undefined"?l=n:typeof i.params.animate!="undefined"&&(l=i.params.animate),!s||!s.hasClass("modal-in"))return oc.indexOf(i)>=0&&oc.splice(oc.indexOf(i),1),i;if(o){var u=!0;i.type==="popup"&&i.$el.prevAll(".popup.modal-in").add(i.$el.nextAll(".popup.modal-in")).each(function(d){var p=d.f7Modal;!p||p.params.closeByBackdropClick&&p.params.backdrop&&p.backdropEl===i.backdropEl&&(u=!1)}),u&&(o[l?"removeClass":"addClass"]("not-animated"),o.removeClass("backdrop-in"))}s[l?"removeClass":"addClass"]("not-animated");function c(){s.hasClass("modal-out")?i.onClosed():s.hasClass("modal-in")&&i.onOpened()}return l?(s.animationEnd(function(){c()}),s.transitionEnd(function(){c()}),s.removeClass("modal-in").addClass("modal-out"),i.onClose()):(s.addClass("not-animated").removeClass("modal-in").addClass("modal-out"),i.onClose(),i.onClosed()),i.type==="dialog"&&oj(),i},r.destroy=function(){var n=this;n.destroyed||(n.emit("local::beforeDestroy modalBeforeDestroy "+n.type+"BeforeDestroy",n),n.$el&&(n.$el.trigger("modal:beforedestroy "+n.type.toLowerCase()+":beforedestroy"),n.$el.length&&n.$el[0].f7Modal&&delete n.$el[0].f7Modal),$r(n),n.destroyed=!0)},t}(rr),_i=lj;function rg(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function uj(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e1(e,t)}function e1(e,t){return e1=Object.setPrototypeOf||function(a,n){return a.__proto__=n,a},e1(e,t)}var cj=function(e){uj(t,e);function t(r,a){var n,i=se({backdrop:!0,closeByBackdropClick:!0,on:{}},a);n=e.call(this,r,i)||this;var s=rg(n);s.params=i;var o;if(s.params.el?o=T(s.params.el):o=T(s.params.content),o&&o.length>0&&o[0].f7Modal)return o[0].f7Modal||rg(n);if(o.length===0)return s.destroy()||rg(n);var l;s.params.backdrop&&(l=r.$el.children(".custom-modal-backdrop"),l.length===0&&(l=T('<div class="custom-modal-backdrop"></div>'),r.$el.append(l)));function u(c){!s||s.destroyed||l&&c.target===l[0]&&s.close()}return s.on("customModalOpened",function(){s.params.closeByBackdropClick&&s.params.backdrop&&r.on("click",u)}),s.on("customModalClose",function(){s.params.closeByBackdropClick&&s.params.backdrop&&r.off("click",u)}),se(s,{app:r,$el:o,el:o[0],$backdropEl:l,backdropEl:l&&l[0],type:"customModal"}),o[0].f7Modal=s,s||rg(n)}return t}(_i),H2=cj,aO={name:"modal",static:{Modal:_i,CustomModal:H2},create:function(){var t=this;t.customModal={create:function(a){return new H2(t,a)}}},params:{modal:{queueDialogs:!0}}},dj={name:"appbar"},pj=function(t,r){for(var a=r||{},n=arguments.length,i=new Array(n>2?n-2:0),s=2;s<n;s++)i[s-2]=arguments[s];var o=i||[],l=Object.keys(a).map(function(c){return c[0]==="_"?a[c]?c.replace("_",""):"":c+'="'+a[c]+'"'}).filter(function(c){return!!c}).join(" ");if(["path","img","circle","polygon","line","input"].indexOf(t)>=0)return("<"+t+" "+l+" />").trim();var u=o.filter(function(c){return!!c}).map(function(c){return Array.isArray(c)?c.join(""):c}).join("");return("<"+t+" "+l+">"+u+"</"+t+">").trim()},F=pj;function ng(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fj(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,t1(e,t)}function t1(e,t){return t1=Object.setPrototypeOf||function(a,n){return a.__proto__=n,a},t1(e,t)}var hj=function(e){fj(t,e);function t(r,a){var n,i=se({title:r.params.dialog.title,text:void 0,content:"",buttons:[],verticalButtons:!1,onClick:void 0,cssClass:void 0,destroyOnClose:!1,on:{}},a);typeof i.closeByBackdropClick=="undefined"&&(i.closeByBackdropClick=r.params.dialog.closeByBackdropClick),typeof i.backdrop=="undefined"&&(i.backdrop=r.params.dialog.backdrop),n=e.call(this,r,i)||this;var s=ng(n),o=Ct(),l=nt(),u=i.title,c=i.text,d=i.content,p=i.buttons,f=i.verticalButtons,h=i.cssClass,m=i.backdrop;s.params=i;var g;if(s.params.el)g=T(s.params.el);else{var v=["dialog"];p.length===0&&v.push("dialog-no-buttons"),p.length>0&&v.push("dialog-buttons-"+p.length),f&&v.push("dialog-buttons-vertical"),h&&v.push(h);var b="";p.length>0&&(b=F("div",{class:"dialog-buttons"},p.map(function($){return F("span",{class:"dialog-button"+($.bold?" dialog-button-bold":"")+($.color?" color-"+$.color:"")+($.cssClass?" "+$.cssClass:"")},$.text)})));var y=F("div",{class:v.join(" ")},F("div",{class:"dialog-inner"},u&&F("div",{class:"dialog-title"},u),c&&F("div",{class:"dialog-text"},c),d),b);g=T(y)}if(g&&g.length>0&&g[0].f7Modal)return g[0].f7Modal||ng(n);if(g.length===0)return s.destroy()||ng(n);var w;m&&(w=r.$el.children(".dialog-backdrop"),w.length===0&&(w=T('<div class="dialog-backdrop"></div>'),r.$el.append(w)));function x($){var N=this,I=T(N).index(),S=p[I];S.onClick&&S.onClick(s,$),s.params.onClick&&s.params.onClick(s,I),S.close!==!1&&s.close()}var k;function C($){var N=$.keyCode;p.forEach(function(I,S){I.keyCodes&&I.keyCodes.indexOf(N)>=0&&(l.activeElement&&l.activeElement.blur(),I.onClick&&I.onClick(s,$),s.params.onClick&&s.params.onClick(s,S),I.close!==!1&&s.close())})}p&&p.length>0&&(s.on("open",function(){g.find(".dialog-button").each(function($,N){var I=p[N];I.keyCodes&&(k=!0),T($).on("click",x)}),k&&!o.ios&&!o.android&&!o.cordova&&!o.capacitor&&T(l).on("keydown",C)}),s.on("close",function(){g.find(".dialog-button").each(function($){T($).off("click",x)}),k&&!o.ios&&!o.android&&!o.cordova&&!o.capacitor&&T(l).off("keydown",C),k=!1})),se(s,{app:r,$el:g,el:g[0],$backdropEl:w,backdropEl:w&&w[0],type:"dialog",setProgress:function(N,I){return r.progressbar.set(g.find(".progressbar"),N,I),s},setText:function(N){var I=g.find(".dialog-text");return I.length===0&&(I=T('<div class="dialog-text"></div>'),typeof u!="undefined"?I.insertAfter(g.find(".dialog-title")):g.find(".dialog-inner").prepend(I)),I.html(N),s.params.text=N,s},setTitle:function(N){var I=g.find(".dialog-title");return I.length===0&&(I=T('<div class="dialog-title"></div>'),g.find(".dialog-inner").prepend(I)),I.html(N),s.params.title=N,s}});function E($){var N=$.target,I=T(N);I.closest(s.el).length===0&&s.params.closeByBackdropClick&&s.backdropEl&&s.backdropEl===N&&s.close()}return s.on("opened",function(){s.params.closeByBackdropClick&&r.on("click",E)}),s.on("close",function(){s.params.closeByBackdropClick&&r.off("click",E)}),g[0].f7Modal=s,s.params.destroyOnClose&&s.once("closed",function(){setTimeout(function(){s.destroy()},0)}),s||ng(n)}return t}(_i),Vi=hj;function Pf(){return Pf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Pf.apply(this,arguments)}var mj={name:"dialog",params:{dialog:{title:void 0,buttonOk:"OK",buttonCancel:"Cancel",usernamePlaceholder:"Username",passwordPlaceholder:"Password",preloaderTitle:"Loading... ",progressTitle:"Loading... ",backdrop:!0,closeByBackdropClick:!1,destroyPredefinedDialogs:!0,keyboardActions:!0,autoFocus:!0}},static:{Dialog:Vi},create:function(){var t=this;function r(){return t.params.dialog.title||t.name}var a=t.params.dialog.destroyPredefinedDialogs,n=t.params.dialog.keyboardActions,i=t.params.dialog.autoFocus,s=i?{on:{opened:function(l){l.$el.find("input").eq(0).focus()}}}:{};t.dialog=se(cs({app:t,constructor:Vi,defaultSelector:".dialog.modal-in"}),{alert:function(){for(var l=arguments.length,u=new Array(l),c=0;c<l;c++)u[c]=arguments[c];var d=u[0],p=u[1],f=u[2];return u.length===2&&typeof u[1]=="function"&&(d=u[0],f=u[1],p=u[2]),new Vi(t,{title:typeof p=="undefined"?r():p,text:d,buttons:[{text:t.params.dialog.buttonOk,bold:!0,onClick:f,keyCodes:n?[13,27]:null}],destroyOnClose:a}).open()},prompt:function(){for(var l=arguments.length,u=new Array(l),c=0;c<l;c++)u[c]=arguments[c];var d=u[0],p=u[1],f=u[2],h=u[3],m=u[4];return typeof u[1]=="function"&&(d=u[0],f=u[1],h=u[2],m=u[3],p=u[4]),m=typeof m=="undefined"||m===null?"":m,new Vi(t,Pf({title:typeof p=="undefined"?r():p,text:d,content:'<div class="dialog-input-field input"><input type="text" class="dialog-input" value="'+m+'"></div>',buttons:[{text:t.params.dialog.buttonCancel,keyCodes:n?[27]:null,color:t.theme==="aurora"?"gray":null},{text:t.params.dialog.buttonOk,bold:!0,keyCodes:n?[13]:null}],onClick:function(v,b){var y=v.$el.find(".dialog-input").val();b===0&&h&&h(y),b===1&&f&&f(y)},destroyOnClose:a},s)).open()},confirm:function(){for(var l=arguments.length,u=new Array(l),c=0;c<l;c++)u[c]=arguments[c];var d=u[0],p=u[1],f=u[2],h=u[3];return typeof u[1]=="function"&&(d=u[0],f=u[1],h=u[2],p=u[3]),new Vi(t,{title:typeof p=="undefined"?r():p,text:d,buttons:[{text:t.params.dialog.buttonCancel,onClick:h,keyCodes:n?[27]:null,color:t.theme==="aurora"?"gray":null},{text:t.params.dialog.buttonOk,bold:!0,onClick:f,keyCodes:n?[13]:null}],destroyOnClose:a}).open()},login:function(){for(var l=arguments.length,u=new Array(l),c=0;c<l;c++)u[c]=arguments[c];var d=u[0],p=u[1],f=u[2],h=u[3];return typeof u[1]=="function"&&(d=u[0],f=u[1],h=u[2],p=u[3]),new Vi(t,Pf({title:typeof p=="undefined"?r():p,text:d,content:`
              <div class="dialog-input-field dialog-input-double input">
                <input type="text" name="dialog-username" placeholder="`+t.params.dialog.usernamePlaceholder+`" class="dialog-input">
              </div>
              <div class="dialog-input-field dialog-input-double input">
                <input type="password" name="dialog-password" placeholder="`+t.params.dialog.passwordPlaceholder+`" class="dialog-input">
              </div>`,buttons:[{text:t.params.dialog.buttonCancel,keyCodes:n?[27]:null,color:t.theme==="aurora"?"gray":null},{text:t.params.dialog.buttonOk,bold:!0,keyCodes:n?[13]:null}],onClick:function(g,v){var b=g.$el.find('[name="dialog-username"]').val(),y=g.$el.find('[name="dialog-password"]').val();v===0&&h&&h(b,y),v===1&&f&&f(b,y)},destroyOnClose:a},s)).open()},password:function(){for(var l=arguments.length,u=new Array(l),c=0;c<l;c++)u[c]=arguments[c];var d=u[0],p=u[1],f=u[2],h=u[3];return typeof u[1]=="function"&&(d=u[0],f=u[1],h=u[2],p=u[3]),new Vi(t,Pf({title:typeof p=="undefined"?r():p,text:d,content:`
              <div class="dialog-input-field input">
                <input type="password" name="dialog-password" placeholder="`+t.params.dialog.passwordPlaceholder+`" class="dialog-input">
              </div>`,buttons:[{text:t.params.dialog.buttonCancel,keyCodes:n?[27]:null,color:t.theme==="aurora"?"gray":null},{text:t.params.dialog.buttonOk,bold:!0,keyCodes:n?[13]:null}],onClick:function(g,v){var b=g.$el.find('[name="dialog-password"]').val();v===0&&h&&h(b),v===1&&f&&f(b)},destroyOnClose:a},s)).open()},preloader:function(l,u){var c={iosPreloaderContent:Jo,mdPreloaderContent:Qo,auroraPreloaderContent:el},d=c[t.theme+"PreloaderContent"]||"";return new Vi(t,{title:typeof l=="undefined"||l===null?t.params.dialog.preloaderTitle:l,content:'<div class="preloader'+(u?" color-"+u:"")+'">'+d+"</div>",cssClass:"dialog-preloader",destroyOnClose:a}).open()},progress:function(){for(var l=arguments.length,u=new Array(l),c=0;c<l;c++)u[c]=arguments[c];var d=u[0],p=u[1],f=u[2];u.length===2?typeof u[0]=="number"?(p=u[0],f=u[1],d=u[2]):typeof u[0]=="string"&&typeof u[1]=="string"&&(d=u[0],f=u[1],p=u[2]):u.length===1&&typeof u[0]=="number"&&(p=u[0],d=u[1],f=u[2]);var h=typeof p=="undefined",m=new Vi(t,{title:typeof d=="undefined"?t.params.dialog.progressTitle:d,cssClass:"dialog-progress",content:`
              <div class="progressbar`+(h?"-infinite":"")+(f?" color-"+f:"")+`">
                `+(h?"":"<span></span>")+`
              </div>
            `,destroyOnClose:a});return h||m.setProgress(p),m.open()}})}};function ag(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gj(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,r1(e,t)}function r1(e,t){return r1=Object.setPrototypeOf||function(a,n){return a.__proto__=n,a},r1(e,t)}var vj=function(e){gj(t,e);function t(r,a){var n,i=se({on:{}},r.params.popup,a);n=e.call(this,r,i)||this;var s=ag(n),o=De(),l=nt(),u=Ft(),c=Ct();s.params=i;var d;if(s.params.el?d=T(s.params.el).eq(0):d=T(s.params.content).filter(function(H){return H.nodeType===1}).eq(0),d&&d.length>0&&d[0].f7Modal)return d[0].f7Modal||ag(n);if(d.length===0)return s.destroy()||ag(n);var p;s.params.backdrop&&s.params.backdropEl?p=T(s.params.backdropEl):s.params.backdrop&&(p=s.$containerEl.children(".popup-backdrop"),p.length===0&&(p=T('<div class="popup-backdrop"></div>'),s.$containerEl.append(p))),se(s,{app:r,push:d.hasClass("popup-push")||s.params.push,$el:d,el:d[0],$backdropEl:p,backdropEl:p&&p[0],type:"popup",$htmlEl:T("html")}),s.params.push&&d.addClass("popup-push");function f(H){var Y=H.target,K=T(Y),Z=!c.desktop&&c.cordova&&(o.Keyboard&&o.Keyboard.isVisible||o.cordova.plugins&&o.cordova.plugins.Keyboard&&o.cordova.plugins.Keyboard.isVisible);if(!Z&&K.closest(s.el).length===0&&s.params&&s.params.closeByBackdropClick&&s.params.backdrop&&s.backdropEl&&s.backdropEl===Y){var le=!0;s.$el.nextAll(".popup.modal-in").each(function(de){var ie=de.f7Modal;!ie||ie.params.closeByBackdropClick&&ie.params.backdrop&&ie.backdropEl===s.backdropEl&&(le=!1)}),le&&s.close()}}function h(H){var Y=H.keyCode;Y===27&&s.params.closeOnEscape&&s.close()}var m,g;function v(H){return(r.height-H*2)/r.height}var b=!0,y=!1,w,x,k,C,E,$=!1,N,I,S,A,R,O;function D(H){y||!b||!s.params.swipeToClose||s.params.swipeHandler&&T(H.target).closest(s.params.swipeHandler).length===0||(y=!0,$=!1,w={x:H.type==="touchstart"?H.targetTouches[0].pageX:H.pageX,y:H.type==="touchstart"?H.targetTouches[0].pageY:H.pageY},C=sa(),k=void 0,!s.params.swipeHandler&&H.type==="touchstart"&&(N=T(H.target).closest(".page-content")[0]))}function z(H){if(!!y){if(x={x:H.type==="touchmove"?H.targetTouches[0].pageX:H.pageX,y:H.type==="touchmove"?H.targetTouches[0].pageY:H.pageY},typeof k=="undefined"&&(k=!!(k||Math.abs(x.x-w.x)>Math.abs(x.y-w.y))),k){y=!1,$=!1;return}E=w.y-x.y,g&&m&&E>0&&(E=0);var Y=E<0?"to-bottom":"to-top";if(d.transition(0),typeof s.params.swipeToClose=="string"&&Y!==s.params.swipeToClose){d.transform(""),d.transition("");return}if($)s.emit("local::swipeMove popupSwipeMove",s),s.$el.trigger("popup:swipemove");else{if(g&&m&&(R=d[0].offsetHeight,O=d.prevAll(".popup.modal-in").eq(0),O.length===0&&(O=r.$el.children(".view, .views"))),N&&(I=N.scrollTop,A=N.scrollHeight,S=N.offsetHeight,A!==S&&!(Y==="to-bottom"&&I===0)&&!(Y==="to-top"&&I===A-S))){d.transform(""),d.transition(""),y=!1,$=!1;return}$=!0,s.emit("local::swipeStart popupSwipeStart",s),s.$el.trigger("popup:swipestart")}if(H.preventDefault(),g&&m){var K=1-Math.abs(E/R),Z=1-(1-v(m))*K;O.hasClass("popup")?O.hasClass("popup-push")?O.transition(0).forEach(function(le){le.style.setProperty("transform","translate3d(0, calc(-1 * "+K+" * (var(--f7-popup-push-offset) + 10px)) , 0px) scale("+Z+")","important")}):O.transition(0).forEach(function(le){le.style.setProperty("transform","translate3d(0, 0px , 0px) scale("+Z+")","important")}):O.transition(0).forEach(function(le){le.style.setProperty("transform","translate3d(0,0,0) scale("+Z+")","important")})}d.transition(0).transform("translate3d(0,"+-E+"px,0)")}}function U(){if(y=!1,!!$){s.emit("local::swipeEnd popupSwipeEnd",s),s.$el.trigger("popup:swipeend"),$=!1,b=!1,d.transition(""),g&&m&&O.transition("").transform("");var H=E<=0?"to-bottom":"to-top";if(typeof s.params.swipeToClose=="string"&&H!==s.params.swipeToClose){d.transform(""),b=!0;return}var Y=Math.abs(E),K=new Date().getTime()-C;if(K<300&&Y>20||K>=300&&Y>100){qr(function(){H==="to-bottom"?d.addClass("swipe-close-to-bottom"):d.addClass("swipe-close-to-top"),d.transform(""),s.emit("local::swipeclose popupSwipeClose",s),s.$el.trigger("popup:swipeclose"),s.close(),b=!0});return}b=!0,d.transform("")}}var j=u.passiveListener?{passive:!0}:!1;s.params.swipeToClose&&(d.on(r.touchEvents.start,D,j),r.on("touchmove",z),r.on("touchend:passive",U),s.once("popupDestroy",function(){d.off(r.touchEvents.start,D,j),r.off("touchmove",z),r.off("touchend:passive",U)}));var G,L=function(){var Y=g;s.push&&(g=s.push&&(r.width<630||r.height<630||d.hasClass("popup-tablet-fullscreen"))),g&&!Y?V():g&&Y?s.$htmlEl[0].style.setProperty("--f7-popup-push-scale",v(m)):!g&&Y&&(s.$htmlEl.removeClass("with-modal-popup-push"),s.$htmlEl[0].style.removeProperty("--f7-popup-push-scale"))},V=function(){r.off("resize",L),s.push&&(g=s.push&&(r.width<630||r.height<630||d.hasClass("popup-tablet-fullscreen"))),g&&(m=parseInt(d.css("--f7-popup-push-offset"),10),Number.isNaN(m)&&(m=0),m&&(d.addClass("popup-push"),s.$htmlEl.addClass("with-modal-popup-push"),s.$htmlEl[0].style.setProperty("--f7-popup-push-scale",v(m)))),r.on("resize",L)};return s.on("open",function(){G=!1,s.params.closeOnEscape&&T(l).on("keydown",h),d.prevAll(".popup.modal-in").addClass("popup-behind"),V()}),s.on("opened",function(){d.removeClass("swipe-close-to-bottom swipe-close-to-top"),s.params.closeByBackdropClick&&r.on("click",f)}),s.on("close",function(){G=s.$el.prevAll(".popup-push.modal-in").length>0,s.params.closeOnEscape&&T(l).off("keydown",h),s.params.closeByBackdropClick&&r.off("click",f),d.prevAll(".popup.modal-in").eq(0).removeClass("popup-behind"),g&&m&&!G&&(s.$htmlEl.removeClass("with-modal-popup-push"),s.$htmlEl.addClass("with-modal-popup-push-closing")),r.off("resize",L)}),s.on("closed",function(){d.removeClass("popup-behind"),g&&m&&!G&&(s.$htmlEl.removeClass("with-modal-popup-push-closing"),s.$htmlEl[0].style.removeProperty("--f7-popup-push-scale"))}),d[0].f7Modal=s,s||ag(n)}return t}(_i),U2=vj,bj={name:"popup",params:{popup:{backdrop:!0,backdropEl:void 0,closeByBackdropClick:!0,closeOnEscape:!1,swipeToClose:!1,swipeHandler:null,push:!1,containerEl:null}},static:{Popup:U2},create:function(){var t=this;t.popup=cs({app:t,constructor:U2,defaultSelector:".popup.modal-in",parentSelector:".popup"})},clicks:{".popup-open":function(t,r){r===void 0&&(r={});var a=this;a.popup.open(r.popup,r.animate,t)},".popup-close":function(t,r){r===void 0&&(r={});var a=this;a.popup.close(r.popup,r.animate,t)}}};function ig(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yj(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,n1(e,t)}function n1(e,t){return n1=Object.setPrototypeOf||function(a,n){return a.__proto__=n,a},n1(e,t)}var wj=function(e){yj(t,e);function t(r,a){var n,i=se({on:{}},a);n=e.call(this,r,i)||this;var s=ig(n);s.params=i;var o;return s.params.el?o=T(s.params.el).eq(0):o=T(s.params.content).filter(function(l){return l.nodeType===1}).eq(0),o&&o.length>0&&o[0].f7Modal?o[0].f7Modal||ig(n):o.length===0?s.destroy()||ig(n):(se(s,{app:r,$el:o,el:o[0],type:"loginScreen"}),o[0].f7Modal=s,s||ig(n))}return t}(_i),j2=wj,xj={name:"loginScreen",static:{LoginScreen:j2},create:function(){var t=this;t.loginScreen=cs({app:t,constructor:j2,defaultSelector:".login-screen.modal-in"})},clicks:{".login-screen-open":function(t,r){r===void 0&&(r={});var a=this;a.loginScreen.open(r.loginScreen,r.animate,t)},".login-screen-close":function(t,r){r===void 0&&(r={});var a=this;a.loginScreen.close(r.loginScreen,r.animate,t)}}};function sg(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function kj(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,a1(e,t)}function a1(e,t){return a1=Object.setPrototypeOf||function(a,n){return a.__proto__=n,a},a1(e,t)}var Ej=function(e){kj(t,e);function t(a,n){var i,s=se({on:{}},a.params.popover,n);i=e.call(this,a,s)||this;var o=sg(i),l=Ct(),u=De(),c=nt();o.params=s;var d;if(o.params.el?d=T(o.params.el).eq(0):d=T(o.params.content).filter(function(x){return x.nodeType===1}).eq(0),d&&d.length>0&&d[0].f7Modal)return d[0].f7Modal||sg(i);var p=T(o.params.targetEl).eq(0);if(d.length===0)return o.destroy()||sg(i);var f;o.params.backdrop&&o.params.backdropEl?f=T(o.params.backdropEl):o.params.backdrop&&(f=o.$containerEl.children(".popover-backdrop"),f.length===0&&(f=T('<div class="popover-backdrop"></div>'),o.$containerEl.append(f)));var h;d.find(".popover-angle").length===0?(h=T('<div class="popover-angle"></div>'),d.prepend(h)):h=d.find(".popover-angle");var m=o.open;se(o,{app:a,$el:d,el:d[0],$targetEl:p,targetEl:p[0],$angleEl:h,angleEl:h[0],$backdropEl:f,backdropEl:f&&f[0],type:"popover",open:function(){for(var k=arguments.length,C=new Array(k),E=0;E<k;E++)C[E]=arguments[E];var $=C[0],N=C[1];return typeof C[0]=="boolean"&&(N=C[0],$=C[1]),$&&(o.$targetEl=T($),o.targetEl=o.$targetEl[0]),m.call(o,N)}});function g(){o.resize()}o.on("popoverOpen",function(){o.resize(),a.on("resize",g),T(u).on("keyboardDidShow keyboardDidHide",g),o.on("popoverClose popoverBeforeDestroy",function(){a.off("resize",g),T(u).off("keyboardDidShow keyboardDidHide",g)})});var v=null;function b(x){v=x.target}function y(x){var k=x.target,C=T(k),E=!l.desktop&&l.cordova&&(u.Keyboard&&u.Keyboard.isVisible||u.cordova.plugins&&u.cordova.plugins.Keyboard&&u.cordova.plugins.Keyboard.isVisible);E||C.closest(o.el).length===0&&(o.params.closeByBackdropClick&&o.params.backdrop&&o.backdropEl&&o.backdropEl===k&&v===k||o.params.closeByOutsideClick&&v===k)&&o.close()}function w(x){var k=x.keyCode;k===27&&o.params.closeOnEscape&&o.close()}return o.params.closeOnEscape&&(o.on("popoverOpen",function(){T(c).on("keydown",w)}),o.on("popoverClose",function(){T(c).off("keydown",w)})),o.on("popoverOpened",function(){(o.params.closeByOutsideClick||o.params.closeByBackdropClick)&&(a.on("touchstart",b),a.on("click",y))}),o.on("popoverClose",function(){(o.params.closeByOutsideClick||o.params.closeByBackdropClick)&&(a.off("touchstart",b),a.off("click",y))}),d[0].f7Modal=o,o||sg(i)}var r=t.prototype;return r.resize=function(){var n=this,i=n.app,s=n.$el,o=n.$targetEl,l=n.$angleEl,u=n.params,c=u.targetX,d=u.targetY;s.css({left:"",top:""});var p=[s.width(),s.height()],f=p[0],h=p[1],m=0,g,v;i.theme==="ios"||i.theme==="aurora"?(l.removeClass("on-left on-right on-top on-bottom").css({left:"",top:""}),m=l.width()/2):s.removeClass("popover-on-left popover-on-right popover-on-top popover-on-bottom popover-on-middle").css({left:"",top:""});var b,y,w,x,k=parseInt(T("html").css("--f7-safe-area-top"),10),C=parseInt(T("html").css("--f7-safe-area-left"),10),E=parseInt(T("html").css("--f7-safe-area-right"),10);if(Number.isNaN(k)&&(k=0),Number.isNaN(C)&&(C=0),Number.isNaN(E)&&(E=0),o&&o.length>0){b=o.outerWidth(),y=o.outerHeight();var $=o.offset();w=$.left-i.left,x=$.top-i.top;var N=o.parents(".page");N.length>0&&(x-=N[0].scrollTop)}else typeof c!="undefined"&&d!=="undefined"&&(w=c,x=d,b=n.params.targetWidth||0,y=n.params.targetHeight||0);var I=0,S=0,A=0,R=i.theme==="md"?"bottom":"top";if(i.theme==="md"){h<i.height-x-y?(R="bottom",S=x+y):h<x-k?(S=x-h,R="top"):(R="middle",S=y/2+x-h/2),S=Math.max(8,Math.min(S,i.height-h-8));var O;w<i.width/2?(O="right",I=R==="middle"?w+b:w):(O="left",I=R==="middle"?w-f:w+b-f),I=Math.max(8,Math.min(I,i.width-f-8-E),C),s.addClass("popover-on-"+R+" popover-on-"+O)}else h+m<x-k?S=x-h-m:h+m<i.height-x-y?(R="bottom",S=x+y+m):(R="middle",S=y/2+x-h/2,A=S,S=Math.max(5,Math.min(S,i.height-h-5)),A-=S),R==="top"||R==="bottom"?(I=b/2+w-f/2,A=I,I=Math.max(5,Math.min(I,i.width-f-5)),C&&(I=Math.max(I,C)),E&&I+f>i.width-5-E&&(I=i.width-5-E-f),R==="top"&&l.addClass("on-bottom"),R==="bottom"&&l.addClass("on-top"),A-=I,g=f/2-m+A,g=Math.max(Math.min(g,f-m*2-13),13),l.css({left:g+"px"})):R==="middle"&&(I=w-f-m,l.addClass("on-right"),(I<5||I+f+E>i.width||I<C)&&(I<5&&(I=w+b+m),I+f+E>i.width&&(I=i.width-f-5-E),I<C&&(I=C),l.removeClass("on-right").addClass("on-left")),v=h/2-m+A,v=Math.max(Math.min(v,h-m*2-13),13),l.css({top:v+"px"}));s.css({top:S+"px",left:I+"px"})},t}(_i),ww=Ej,Cj={name:"popover",params:{popover:{backdrop:!0,backdropEl:void 0,closeByBackdropClick:!0,closeByOutsideClick:!0,closeOnEscape:!1,containerEl:null}},static:{Popover:ww},create:function(){var t=this;t.popover=se(cs({app:t,constructor:ww,defaultSelector:".popover.modal-in"}),{open:function(a,n,i){var s=T(a);if(s.length>1){var o=T(n).parents(".page");o.length&&s.each(function(c){var d=T(c);d.parents(o)[0]===o[0]&&(s=d)})}s.length>1&&(s=s.eq(s.length-1));var l=s[0].f7Modal,u=s.dataset();return l||(l=new ww(t,Object.assign({el:s,targetEl:n},u))),l.open(n,i)}})},clicks:{".popover-open":function(t,r){r===void 0&&(r={});var a=this;a.popover.open(r.popover,t,r.animate)},".popover-close":function(t,r){r===void 0&&(r={});var a=this;a.popover.close(r.popover,r.animate,t)}}};function og(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Sj(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,i1(e,t)}function i1(e,t){return i1=Object.setPrototypeOf||function(a,n){return a.__proto__=n,a},i1(e,t)}var $j=function(e){Sj(t,e);function t(a,n){var i,s=se({on:{}},a.params.actions,n);i=e.call(this,a,s)||this;var o=og(i),l=Ct(),u=De(),c=nt();o.params=s;var d;o.params.buttons&&(d=o.params.buttons,Array.isArray(d[0])||(d=[d])),o.groups=d;var p;if(o.params.el?p=T(o.params.el).eq(0):o.params.content?p=T(o.params.content).filter(function(w){return w.nodeType===1}).eq(0):o.params.buttons&&(o.params.convertToPopover&&(o.popoverHtml=o.renderPopover()),o.actionsHtml=o.render()),p&&p.length>0&&p[0].f7Modal)return p[0].f7Modal||og(i);if(p&&p.length===0&&!(o.actionsHtml||o.popoverHtml))return o.destroy()||og(i);var f;o.params.backdrop&&o.params.backdropEl?f=T(o.params.backdropEl):o.params.backdrop&&(f=o.$containerEl.children(".actions-backdrop"),f.length===0&&(f=T('<div class="actions-backdrop"></div>'),o.$containerEl.append(f)));var h=o.open,m=o.close,g;function v(w){var x=T(this),k,C;if(x.hasClass("list-button")||x.hasClass("item-link")?(k=x.parents("li").index(),C=x.parents(".list").index()):(k=x.index(),C=x.parents(".actions-group").index()),typeof d!="undefined"){var E=d[C][k];E.onClick&&E.onClick(o,w),o.params.onClick&&o.params.onClick(o,w),E.close!==!1&&o.close()}}o.open=function(x){var k=!1,C=o.params,E=C.targetEl,$=C.targetX,N=C.targetY,I=C.targetWidth,S=C.targetHeight;return o.params.convertToPopover&&(E||$!==void 0&&N!==void 0)&&(o.params.forceToPopover||l.ios&&l.ipad||a.width>=768||l.desktop&&a.theme==="aurora")&&(k=!0),k&&o.popoverHtml?(g=a.popover.create({containerEl:o.params.containerEl,content:o.popoverHtml,backdrop:o.params.backdrop,targetEl:E,targetX:$,targetY:N,targetWidth:I,targetHeight:S,on:{open:function(){o.$el||(o.$el=g.$el),o.$el.trigger("modal:open "+o.type.toLowerCase()+":open"),o.emit("local::open modalOpen "+o.type+"Open",o)},opened:function(){o.$el||(o.$el=g.$el),o.$el.trigger("modal:opened "+o.type.toLowerCase()+":opened"),o.emit("local::opened modalOpened "+o.type+"Opened",o)},close:function(){o.$el||(o.$el=g.$el),o.$el.trigger("modal:close "+o.type.toLowerCase()+":close"),o.emit("local::close modalClose "+o.type+"Close",o)},closed:function(){o.$el||(o.$el=g.$el),o.$el.trigger("modal:closed "+o.type.toLowerCase()+":closed"),o.emit("local::closed modalClosed "+o.type+"Closed",o)}}}),g.open(x),g.once("popoverOpened",function(){g.$el.find(".list-button, .item-link").each(function(A){T(A).on("click",v)})}),g.once("popoverClosed",function(){g.$el.find(".list-button, .item-link").each(function(A){T(A).off("click",v)}),qr(function(){g.destroy(),g=void 0})})):(o.$el=o.actionsHtml?T(o.actionsHtml):o.$el,o.$el[0].f7Modal=o,o.groups&&(o.$el.find(".actions-button").each(function(A){T(A).on("click",v)}),o.once("actionsClosed",function(){o.$el.find(".actions-button").each(function(A){T(A).off("click",v)})})),o.el=o.$el[0],h.call(o,x)),o},o.close=function(x){return g?g.close(x):m.call(o,x),o},se(o,{app:a,$el:p,el:p?p[0]:void 0,$backdropEl:f,backdropEl:f&&f[0],type:"actions"});function b(w){var x=w.target,k=T(x),C=!l.desktop&&l.cordova&&(u.Keyboard&&u.Keyboard.isVisible||u.cordova.plugins&&u.cordova.plugins.Keyboard&&u.cordova.plugins.Keyboard.isVisible);C||k.closest(o.el).length===0&&(o.params.closeByBackdropClick&&o.params.backdrop&&o.backdropEl&&o.backdropEl===x||o.params.closeByOutsideClick)&&o.close()}function y(w){var x=w.keyCode;x===27&&o.params.closeOnEscape&&o.close()}return o.params.closeOnEscape&&(o.on("open",function(){T(c).on("keydown",y)}),o.on("close",function(){T(c).off("keydown",y)})),o.on("opened",function(){(o.params.closeByBackdropClick||o.params.closeByOutsideClick)&&a.on("click",b)}),o.on("close",function(){(o.params.closeByBackdropClick||o.params.closeByOutsideClick)&&a.off("click",b)}),p&&(p[0].f7Modal=o),o||og(i)}var r=t.prototype;return r.render=function(){var n=this;if(n.params.render)return n.params.render.call(n,n);var i=n.groups,s=n.params.cssClass;return F("div",{class:"actions-modal"+(n.params.grid?" actions-grid":"")+" "+(s||"")},i.map(function(o){return F("div",{class:"actions-group"},o.map(function(l){var u=["actions-"+(l.label?"label":"button")],c=l.color,d=l.bg,p=l.bold,f=l.disabled,h=l.label,m=l.text,g=l.icon;return c&&u.push("color-"+c),d&&u.push("bg-color-"+d),p&&u.push("actions-button-bold"),f&&u.push("disabled"),h?F("div",{class:u.join(" ")},m):F("div",{class:u.join(" ")},g&&F("div",{class:"actions-button-media"},g),F("div",{class:"actions-button-text"},m))}))}))},r.renderPopover=function(){var n=this;if(n.params.renderPopover)return n.params.renderPopover.call(n,n);var i=n.groups,s=n.params.cssClass;return F("div",{class:"popover popover-from-actions "+(s||"")},F("div",{class:"popover-inner"},i.map(function(o){return F("div",{class:"list"},F("ul",null,o.map(function(l){var u=[],c=l.color,d=l.bg,p=l.bold,f=l.disabled,h=l.label,m=l.text,g=l.icon;return c&&u.push("color-"+c),d&&u.push("bg-color-"+d),p&&u.push("popover-from-actions-bold"),f&&u.push("disabled"),h?(u.push("popover-from-actions-label"),'<li class="'+u.join(" ")+'">'+m+"</li>"):g?(u.push("item-link item-content"),F("li",null,F("a",{class:u.join(" ")},F("div",{class:"item-media"},g),F("div",{class:"item-inner"},F("div",{class:"item-title"},m))))):(u.push("list-button"),F("li",null,F("a",{class:u.join(" ")},m)))})))})))},t}(_i),G2=$j,Ij={name:"actions",params:{actions:{convertToPopover:!0,forceToPopover:!1,backdrop:!0,backdropEl:void 0,cssClass:null,closeByBackdropClick:!0,closeOnEscape:!1,render:null,renderPopover:null,containerEl:null}},static:{Actions:G2},create:function(){var t=this;t.actions=cs({app:t,constructor:G2,defaultSelector:".actions-modal.modal-in"})},clicks:{".actions-open":function(t,r){r===void 0&&(r={});var a=this;a.actions.open(r.actions,r.animate,t)},".actions-close":function(t,r){r===void 0&&(r={});var a=this;a.actions.close(r.actions,r.animate,t)}}};function lg(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Tj(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,s1(e,t)}function s1(e,t){return s1=Object.setPrototypeOf||function(a,n){return a.__proto__=n,a},s1(e,t)}var Nj=function(e){Tj(t,e);function t(r,a){var n,i=se({on:{}},r.params.sheet,a);n=e.call(this,r,i)||this;var s=lg(n),o=De(),l=nt(),u=Ft(),c=Ct();s.params=i,typeof s.params.backdrop=="undefined"&&(s.params.backdrop=r.theme!=="ios");var d;if(s.params.el?d=T(s.params.el).eq(0):d=T(s.params.content).filter(function(ie){return ie.nodeType===1}).eq(0),d&&d.length>0&&d[0].f7Modal)return d[0].f7Modal||lg(n);if(d.length===0)return s.destroy()||lg(n);var p;s.params.backdrop&&s.params.backdropEl?p=T(s.params.backdropEl):s.params.backdrop&&(p=s.$containerEl.children(".sheet-backdrop"),p.length===0&&(p=T('<div class="sheet-backdrop"></div>'),s.$containerEl.append(p))),se(s,{app:r,push:d.hasClass("sheet-modal-push")||s.params.push,$el:d,el:d[0],$backdropEl:p,backdropEl:p&&p[0],type:"sheet",$htmlEl:T("html")}),s.params.push&&d.addClass("sheet-modal-push");var f;function h(){var ie=T(s.params.scrollToEl).eq(0);if(ie.length!==0&&(f=ie.parents(".page-content"),f.length!==0)){var ue=parseInt(f.css("padding-top"),10),pe=parseInt(f.css("padding-bottom"),10),Se=f[0].offsetHeight-ue-d.height(),ke=f[0].scrollHeight-ue-d.height(),oe=f.scrollTop(),me,$e=ie.offset().top-ue+ie[0].offsetHeight;if($e>Se){var Me=oe+$e-Se;Me+Se>ke&&(me=Me+Se-ke+pe,Se===ke&&(me=d.height()),f.css({"padding-bottom":me+"px"})),f.scrollTop(Me,300)}}}function m(){f&&f.length>0&&f.css({"padding-bottom":""})}function g(ie){var ue=ie.target,pe=T(ue),Se=!c.desktop&&c.cordova&&(o.Keyboard&&o.Keyboard.isVisible||o.cordova.plugins&&o.cordova.plugins.Keyboard&&o.cordova.plugins.Keyboard.isVisible);Se||pe.closest(s.el).length===0&&(s.params.closeByBackdropClick&&s.params.backdrop&&s.backdropEl&&s.backdropEl===ue||s.params.closeByOutsideClick)&&s.close()}function v(ie){var ue=ie.keyCode;ue===27&&s.params.closeOnEscape&&s.close()}var b;function y(ie){return(r.height-ie*2)/r.height}var w=!1,x,k,C,E,$,N=!1,I,S,A,R,O,D,z,U,j,G,L,V,H;function Y(ie){w||!(s.params.swipeToClose||s.params.swipeToStep)||s.params.swipeHandler&&T(ie.target).closest(s.params.swipeHandler).length===0||(w=!0,N=!1,x={x:ie.type==="touchstart"?ie.targetTouches[0].pageX:ie.pageX,y:ie.type==="touchstart"?ie.targetTouches[0].pageY:ie.pageY},E=sa(),C=void 0,I=d.hasClass("sheet-modal-top"),!s.params.swipeHandler&&ie.type==="touchstart"&&(G=T(ie.target).closest(".page-content")[0]))}function K(ie){if(!!w){if(k={x:ie.type==="touchmove"?ie.targetTouches[0].pageX:ie.pageX,y:ie.type==="touchmove"?ie.targetTouches[0].pageY:ie.pageY},typeof C=="undefined"&&(C=!!(C||Math.abs(k.x-x.x)>Math.abs(k.y-x.y))),C){w=!1,N=!1;return}$=x.y-k.y;var ue=$<0?"to-bottom":"to-top";if(!N){if(G&&!d.hasClass("modal-in-swipe-step")&&(L=G.scrollTop,V=G.scrollHeight,H=G.offsetHeight,V!==H&&!(ue==="to-bottom"&&L===0)&&!(ue==="to-top"&&L===V-H))){d.transform(""),w=!1,N=!1;return}s.push&&b&&(U=r.$el.children(".view, .views")),O=d[0].offsetHeight,A=Os(d[0],"y"),I?(D=s.params.swipeToClose?-O:-S,z=0):(D=0,z=s.params.swipeToClose?O:S),N=!0}if(R=A-$,R=Math.min(Math.max(R,D),z),ie.preventDefault(),s.push&&b){var pe=(R-A)/O;s.params.swipeToStep&&(I?pe=R/S:pe=1-(S-R)/S),pe=Math.abs(pe),pe=Math.min(Math.max(pe,0),1);var Se=1-pe,ke=1-(1-y(b))*Se;U.transition(0).forEach(function(me){me.style.setProperty("transform","translate3d(0,0,0) scale("+ke+")","important")}),s.params.swipeToStep&&U.css("border-radius",j*Se+"px")}if(d.transition(0).transform("translate3d(0,"+R+"px,0)"),s.params.swipeToStep){var oe;I?oe=1-R/S:oe=(S-R)/S,oe=Math.min(Math.max(oe,0),1),d.trigger("sheet:stepprogress",oe),s.emit("local::stepProgress sheetStepProgress",s,oe)}}}function Z(){if(w=!1,!!N){N=!1,d.transform("").transition(""),s.push&&b&&(U.transition("").transform(""),U.css("border-radius",""));var ie=$<0?"to-bottom":"to-top",ue=Math.abs($);if(!(ue===0||R===A)){var pe=new Date().getTime()-E;if(!s.params.swipeToStep){if(ie!==(I?"to-top":"to-bottom"))return;(pe<300&&ue>20||pe>=300&&ue>O/2)&&s.close();return}var Se=I?"to-bottom":"to-top",ke=I?"to-top":"to-bottom",oe=Math.abs(R),me=Math.abs(S);if(pe<300&&ue>10){ie===Se&&oe<me&&(d.removeClass("modal-in-swipe-step"),d.trigger("sheet:stepprogress",1),s.emit("local::stepProgress sheetStepProgress",s,1),s.emit("local::_swipeStep",!1),d.trigger("sheet:stepopen"),s.emit("local::stepOpen sheetStepOpen",s),s.push&&b&&(s.$htmlEl[0].style.setProperty("--f7-sheet-push-scale",y(b)),U.css("border-radius",""))),ie===ke&&oe>me&&(s.params.swipeToClose?s.close():(d.addClass("modal-in-swipe-step"),d.trigger("sheet:stepprogress",0),s.emit("local::stepProgress sheetStepProgress",s,0),s.emit("local::_swipeStep",!0),d.trigger("sheet:stepclose"),s.emit("local::stepClose sheetStepClose",s),s.push&&b&&(s.$htmlEl[0].style.removeProperty("--f7-sheet-push-scale"),U.css("border-radius","0px")))),ie===ke&&oe<=me&&(d.addClass("modal-in-swipe-step"),d.trigger("sheet:stepprogress",0),s.emit("local::stepProgress sheetStepProgress",s,0),s.emit("local::_swipeStep",!0),d.trigger("sheet:stepclose"),s.emit("local::stepClose sheetStepClose",s),s.push&&b&&(s.$htmlEl[0].style.removeProperty("--f7-sheet-push-scale"),U.css("border-radius","0px")));return}if(pe>=300){var $e=!d.hasClass("modal-in-swipe-step");$e?$e&&(oe>me+(O-me)/2?s.params.swipeToClose&&s.close():oe>me/2&&(d.addClass("modal-in-swipe-step"),d.trigger("sheet:stepprogress",0),s.emit("local::stepProgress sheetStepProgress",s,0),s.emit("local::_swipeStep",!0),d.trigger("sheet:stepclose"),s.emit("local::stepClose sheetStepClose",s),s.push&&b&&(s.$htmlEl[0].style.removeProperty("--f7-sheet-push-scale"),U.css("border-radius","0px")))):oe<me/2?(d.removeClass("modal-in-swipe-step"),d.trigger("sheet:stepprogress",1),s.emit("local::stepProgress sheetStepProgress",s,1),s.emit("local::_swipeStep",!1),d.trigger("sheet:stepopen"),s.emit("local::stepOpen sheetStepOpen",s),s.push&&b&&(s.$htmlEl[0].style.setProperty("--f7-sheet-push-scale",y(b)),U.css("border-radius",""))):oe-me>(O-me)/2&&s.params.swipeToClose&&s.close()}}}}s.setSwipeStep=function(ue){ue===void 0&&(ue=!0);var pe=d.find(".sheet-modal-swipe-step").eq(0);!pe.length||(d.hasClass("sheet-modal-top")?S=-(pe.offset().top-d.offset().top+pe[0].offsetHeight):S=d[0].offsetHeight-(pe.offset().top-d.offset().top+pe[0].offsetHeight),d[0].style.setProperty("--f7-sheet-swipe-step",S+"px"),ue||(d.addClass("modal-in-swipe-step"),s.emit("local::_swipeStep",!0)))};function le(){s.setSwipeStep(!0)}var de=u.passiveListener?{passive:!0}:!1;return(s.params.swipeToClose||s.params.swipeToStep)&&(d.on(r.touchEvents.start,Y,de),r.on("touchmove",K),r.on("touchend:passive",Z),s.once("sheetDestroy",function(){d.off(r.touchEvents.start,Y,de),r.off("touchmove",K),r.off("touchend:passive",Z)})),s.on("open",function(){s.params.closeOnEscape&&T(l).on("keydown",v),d.prevAll(".popup.modal-in").addClass("popup-behind"),s.params.swipeToStep&&(s.setSwipeStep(!1),r.on("resize",le)),s.params.scrollToEl&&h(),s.push&&(b=parseInt(d.css("--f7-sheet-push-offset"),10),Number.isNaN(b)&&(b=0),b&&(d.addClass("sheet-modal-push"),s.$htmlEl.addClass("with-modal-sheet-push"),s.params.swipeToStep?(U=r.$el.children(".view, .views"),j=parseFloat(d.css("border-"+(I?"bottom":"top")+"-left-radius")),U.css("border-radius","0px")):s.$htmlEl[0].style.setProperty("--f7-sheet-push-scale",y(b))))}),s.on("opened",function(){(s.params.closeByOutsideClick||s.params.closeByBackdropClick)&&r.on("click",g)}),s.on("close",function(){s.params.swipeToStep&&(d.removeClass("modal-in-swipe-step"),s.emit("local::_swipeStep",!1),r.off("resize",le)),s.params.closeOnEscape&&T(l).off("keydown",v),s.params.scrollToEl&&m(),(s.params.closeByOutsideClick||s.params.closeByBackdropClick)&&r.off("click",g),d.prevAll(".popup.modal-in").eq(0).removeClass("popup-behind"),s.push&&b&&(s.$htmlEl.removeClass("with-modal-sheet-push"),s.$htmlEl.addClass("with-modal-sheet-push-closing"))}),s.on("closed",function(){s.push&&b&&(s.$htmlEl.removeClass("with-modal-sheet-push-closing"),s.$htmlEl[0].style.removeProperty("--f7-sheet-push-scale"))}),s.stepOpen=function(){d.removeClass("modal-in-swipe-step"),s.emit("local::_swipeStep",!1),s.push&&(b||(b=parseInt(d.css("--f7-sheet-push-offset"),10),Number.isNaN(b)&&(b=0)),b&&s.$htmlEl[0].style.setProperty("--f7-sheet-push-scale",y(b)))},s.stepClose=function(){d.addClass("modal-in-swipe-step"),s.emit("local::_swipeStep",!0),s.push&&s.$htmlEl[0].style.removeProperty("--f7-sheet-push-scale")},s.stepToggle=function(){d.toggleClass("modal-in-swipe-step"),s.emit("local::_swipeStep",d.hasClass("modal-in-swipe-step"))},d[0].f7Modal=s,s||lg(n)}return t}(_i),q2=Nj,Aj={name:"sheet",params:{sheet:{push:!1,backdrop:void 0,backdropEl:void 0,closeByBackdropClick:!0,closeByOutsideClick:!1,closeOnEscape:!1,swipeToClose:!1,swipeToStep:!1,swipeHandler:null,containerEl:null}},static:{Sheet:q2},create:function(){var t=this;t.sheet=se({},cs({app:t,constructor:q2,defaultSelector:".sheet-modal.modal-in"}),{stepOpen:function(a){var n=t.sheet.get(a);if(n&&n.stepOpen)return n.stepOpen()},stepClose:function(a){var n=t.sheet.get(a);if(n&&n.stepClose)return n.stepClose()},stepToggle:function(a){var n=t.sheet.get(a);if(n&&n.stepToggle)return n.stepToggle()}})},clicks:{".sheet-open":function(t,r){r===void 0&&(r={});var a=this;T(".sheet-modal.modal-in").length>0&&r.sheet&&T(r.sheet)[0]!==T(".sheet-modal.modal-in")[0]&&a.sheet.close(".sheet-modal.modal-in"),a.sheet.open(r.sheet,r.animate,t)},".sheet-close":function(t,r){r===void 0&&(r={});var a=this;a.sheet.close(r.sheet,r.animate,t)}}};function ug(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _j(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,o1(e,t)}function o1(e,t){return o1=Object.setPrototypeOf||function(a,n){return a.__proto__=n,a},o1(e,t)}var Mj=function(e){_j(t,e);function t(a,n){var i,s=se({on:{}},a.params.toast,n);i=e.call(this,a,s)||this;var o=ug(i),l=De();o.app=a,o.params=s;var u=o.params,c=u.closeButton,d=u.closeTimeout,p;if(o.params.el)p=T(o.params.el);else{var f=o.render();p=T(f)}if(p&&p.length>0&&p[0].f7Modal)return p[0].f7Modal||ug(i);if(p.length===0)return o.destroy()||ug(i);se(o,{$el:p,el:p[0],type:"toast"}),p[0].f7Modal=o,c&&(p.find(".toast-button").on("click",function(){o.emit("local::closeButtonClick toastCloseButtonClick",o),o.close()}),o.on("beforeDestroy",function(){p.find(".toast-button").off("click")}));var h;return o.on("open",function(){T(".toast.modal-in").each(function(m){var g=a.toast.get(m);m!==o.el&&g&&g.close()}),d&&(h=qr(function(){o.close()},d))}),o.on("close",function(){l.clearTimeout(h)}),o.params.destroyOnClose&&o.once("closed",function(){setTimeout(function(){o.destroy()},0)}),o||ug(i)}var r=t.prototype;return r.render=function(){var n=this;if(n.params.render)return n.params.render.call(n,n);var i=n.params,s=i.position,o=i.horizontalPosition,l=i.cssClass,u=i.icon,c=i.text,d=i.closeButton,p=i.closeButtonColor,f=i.closeButtonText,h=s==="top"||s==="bottom"?"toast-horizontal-"+o:"";return F("div",{class:"toast toast-"+s+" "+h+" "+(l||"")+" "+(u?"toast-with-icon":"")},F("div",{class:"toast-content"},u&&F("div",{class:"toast-icon"},u),F("div",{class:"toast-text"},c),d&&!u&&F("a",{class:"toast-button button "+(p?"color-"+p:"")},f)))},t}(_i),xw=Mj,Rj={name:"toast",static:{Toast:xw},create:function(){var t=this;t.toast=se({},cs({app:t,constructor:xw,defaultSelector:".toast.modal-in"}),{show:function(a){return se(a,{destroyOnClose:!0}),new xw(t,a).open()}})},params:{toast:{icon:null,text:null,position:"bottom",horizontalPosition:"left",closeButton:!1,closeButtonColor:null,closeButtonText:"Ok",closeTimeout:null,cssClass:null,render:null,containerEl:null}}},uf={init:function(t){var r=this,a={iosPreloaderContent:Jo,mdPreloaderContent:Qo,auroraPreloaderContent:el},n=T(t);n.length===0||n.children(".preloader-inner").length>0||n.children(".preloader-inner-line").length>0||n.append(a[r.theme+"PreloaderContent"])},visible:!1,show:function(t){t===void 0&&(t="white");var r=this;if(!uf.visible){var a={iosPreloaderContent:Jo,mdPreloaderContent:Qo,auroraPreloaderContent:el},n=a[r.theme+"PreloaderContent"]||"";T("html").addClass("with-modal-preloader"),r.$el.append(`
      <div class="preloader-backdrop"></div>
      <div class="preloader-modal">
        <div class="preloader color-`+t+'">'+n+`</div>
      </div>
    `),uf.visible=!0}},showIn:function(t,r){r===void 0&&(r="white");var a=this,n={iosPreloaderContent:Jo,mdPreloaderContent:Qo,auroraPreloaderContent:el},i=n[a.theme+"PreloaderContent"]||"";T(t||"html").addClass("with-modal-preloader"),T(t||a.$el).append(`
      <div class="preloader-backdrop"></div>
      <div class="preloader-modal">
        <div class="preloader color-`+r+'">'+i+`</div>
      </div>
    `)},hide:function(){var t=this;!uf.visible||(T("html").removeClass("with-modal-preloader"),t.$el.find(".preloader-backdrop, .preloader-modal").remove(),uf.visible=!1)},hideIn:function(t){var r=this;T(t||"html").removeClass("with-modal-preloader"),T(t||r.$el).find(".preloader-backdrop, .preloader-modal").remove()}},Oj={name:"preloader",create:function(){var t=this;En(t,{preloader:uf})},on:{photoBrowserOpen:function(t){var r=this;t.$el.find(".preloader").each(function(a){r.preloader.init(a)})},tabMounted:function(t){var r=this;T(t).find(".preloader").each(function(a){r.preloader.init(a)})},pageInit:function(t){var r=this;t.$el.find(".preloader").each(function(a){r.preloader.init(a)})}},vnode:{preloader:{insert:function(t){var r=this,a=t.elm;r.preloader.init(a)}}}},Pj={set:function(){for(var t=this,r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];var i=a[0],s=a[1],o=a[2];if(typeof a[0]=="number"&&(s=a[0],o=a[1],i=t.$el),typeof s=="undefined"||s===null)return i;s||(s=0);var l=T(i||t.$el);if(l.length===0)return i;var u=Math.min(Math.max(s,0),100),c;if(l.hasClass("progressbar")?c=l.eq(0):c=l.children(".progressbar"),c.length===0||c.hasClass("progressbar-infinite"))return c;var d=c.children("span");return d.length===0&&(d=T("<span></span>"),c.append(d)),d.transition(typeof o!="undefined"?o:"").transform("translate3d("+(-100+u)*(t.rtl?-1:1)+"%,0,0)"),c[0]},show:function(){for(var t=this,r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];var i=a[0],s=a[1],o=a[2],l="determined";a.length===2?(typeof a[0]=="string"||typeof a[0]=="object")&&typeof a[1]=="string"?(i=a[0],o=a[1],s=a[2],l="infinite"):typeof a[0]=="number"&&typeof a[1]=="string"&&(s=a[0],o=a[1],i=t.$el):a.length===1?typeof a[0]=="number"?(i=t.$el,s=a[0]):typeof a[0]=="string"&&(l="infinite",i=t.$el,o=a[0]):a.length===0&&(l="infinite",i=t.$el);var u=T(i);if(u.length!==0){var c;return u.hasClass("progressbar")||u.hasClass("progressbar-infinite")?c=u:(c=u.children(".progressbar:not(.progressbar-out), .progressbar-infinite:not(.progressbar-out)"),c.length===0&&(c=T(`
          <span class="progressbar`+(l==="infinite"?"-infinite":"")+(o?" color-"+o:"")+` progressbar-in">
            `+(l==="infinite"?"":"<span></span>")+`
          </span>`),u.append(c))),typeof s!="undefined"&&t.progressbar.set(c,s),c[0]}},hide:function(t,r){r===void 0&&(r=!0);var a=this,n=T(t||a.$el);if(n.length!==0){var i;return n.hasClass("progressbar")||n.hasClass("progressbar-infinite")?i=n:i=n.children(".progressbar, .progressbar-infinite"),i.length===0||!i.hasClass("progressbar-in")||i.hasClass("progressbar-out")||i.removeClass("progressbar-in").addClass("progressbar-out").animationEnd(function(){r&&i.remove()}),i}}},Dj={name:"progressbar",create:function(){var t=this;En(t,{progressbar:Pj})},on:{tabMounted:function(t){var r=this;T(t).find(".progressbar").each(function(a){var n=T(a);r.progressbar.set(n,n.attr("data-progress"))})},pageInit:function(t){var r=this;t.$el.find(".progressbar").each(function(a){var n=T(a);r.progressbar.set(n,n.attr("data-progress"))})}},vnode:{progressbar:{insert:function(t){var r=this,a=t.elm;r.progressbar.set(a,a.getAttribute("data-progress"))},update:function(t){var r=this,a=t.elm;r.progressbar.set(a,a.getAttribute("data-progress"))}}}},Fj={init:function(){var t=this,r=nt(),a,n,i,s,o,l,u,c,d,p,f,h,m,g,v,b,y,w,x,k,C;function E(S,A){n=!1,a=!0,C=!1,i=S.type==="touchstart"?S.targetTouches[0].pageY:S.pageY,o=T(S.target).closest("li").eq(0),m=o.index(),u=o.parents(".sortable");var R=o.parents(".list-group");R.length&&R.parents(u).length&&(u=R),l=u.children("ul").children("li:not(.disallow-sorting):not(.no-sorting)"),t.panel&&(t.panel.allowOpen=!1),t.swipeout&&(t.swipeout.allow=!1),A&&(o.addClass("sorting"),u.addClass("sortable-sorting"),C=!0)}function $(S){if(!(!a||!o)){var A=S.type==="touchmove"?S.targetTouches[0].pageY:S.pageY;if(!n){g=o.parents(".page"),v=o.parents(".page-content");var R=parseInt(v.css("padding-top"),10),O=parseInt(v.css("padding-bottom"),10);k=v[0].scrollTop,y=g.offset().top+R,b=g.height()-R-O,o.addClass("sorting"),u.addClass("sortable-sorting"),w=o[0].offsetTop,d=o[0].offsetTop,p=o.parent().height()-w-o.height(),c=o[0].offsetHeight,x=o.offset().top}n=!0,S.preventDefault(),S.f7PreventSwipePanel=!0,s=A-i;var D=v[0].scrollTop-k,z=Math.min(Math.max(s+D,-d),p);o.transform("translate3d(0,"+z+"px,0)");var U=44,j=!0;s+D+U<-d&&(j=!1),s+D-U>p&&(j=!1),h=void 0,f=void 0;var G;j&&(x+s+c+U>y+b&&(G=x+s+c+U-(y+b)),x+s<y+U&&(G=x+s-y-U),G&&(v[0].scrollTop+=G)),l.each(function(L){var V=T(L);if(V[0]!==o[0]){var H=V[0].offsetTop,Y=V.height(),K=w+z,Z,le=V[0].f7Translate;K>=H-Y/2&&o.index()<V.index()?(Z=-c,V.transform("translate3d(0, "+Z+"px,0)"),f=V,h=void 0):K<=H+Y/2&&o.index()>V.index()?(Z=c,V[0].f7Translate=Z,V.transform("translate3d(0, "+Z+"px,0)"),f=void 0,h||(h=V)):(Z=void 0,V.transform("translate3d(0, 0%,0)")),le!==Z&&(V.trigger("sortable:move"),t.emit("sortableMove",V[0],u[0])),V[0].f7Translate=Z}})}}function N(){if(!a||!n){a&&!n&&(t.panel&&(t.panel.allowOpen=!0),t.swipeout&&(t.swipeout.allow=!0),C&&(o.removeClass("sorting"),u.removeClass("sortable-sorting"))),a=!1,n=!1;return}t.panel&&(t.panel.allowOpen=!0),t.swipeout&&(t.swipeout.allow=!0),l.transform(""),o.removeClass("sorting"),u.removeClass("sortable-sorting");var S;f?S=f.index():h&&(S=h.index());var A=u.dataset().sortableMoveElements;if(typeof A=="undefined"&&(A=t.params.sortable.moveElements),A&&(f&&o.insertAfter(f),h&&o.insertBefore(h)),(f||h)&&u.hasClass("virtual-list")){m=o[0].f7VirtualListIndex,typeof m=="undefined"&&(m=o.attr("data-virtual-list-index")),h?(S=h[0].f7VirtualListIndex,typeof S=="undefined"&&(S=h.attr("data-virtual-list-index"))):(S=f[0].f7VirtualListIndex,typeof S=="undefined"&&(S=f.attr("data-virtual-list-index"))),S!==null?S=parseInt(S,10):S=void 0;var R=u[0].f7VirtualList;m&&(m=parseInt(m,10)),S&&(S=parseInt(S,10)),R&&R.moveItem(m,S)}typeof S!="undefined"&&!Number.isNaN(S)&&S!==m&&(o.trigger("sortable:sort",{from:m,to:S}),t.emit("sortableSort",o[0],{from:m,to:S,el:o[0]},u[0])),h=void 0,f=void 0,a=!1,n=!1}var I=Ft().passiveListener?{passive:!1,capture:!1}:!1;T(r).on(t.touchEvents.start,".list.sortable .sortable-handler",E,I),t.on("touchmove:active",$),t.on("touchend:passive",N),T(r).on("taphold",".sortable-tap-hold",function(S,A){E(A,!0)})},enable:function(t){t===void 0&&(t=".list.sortable");var r=this,a=T(t);a.length!==0&&(a.addClass("sortable-enabled"),a.trigger("sortable:enable"),r.emit("sortableEnable",a[0]))},disable:function(t){t===void 0&&(t=".list.sortable");var r=this,a=T(t);a.length!==0&&(a.removeClass("sortable-enabled"),a.trigger("sortable:disable"),r.emit("sortableDisable",a[0]))},toggle:function(t){t===void 0&&(t=".list.sortable");var r=this,a=T(t);a.length!==0&&(a.hasClass("sortable-enabled")?r.sortable.disable(a):r.sortable.enable(a))}},Lj={name:"sortable",params:{sortable:{moveElements:!0}},create:function(){var t=this;En(t,{sortable:Fj})},on:{init:function(){var t=this;!t.params.sortable||t.sortable.init()}},clicks:{".sortable-enable":function(t,r){r===void 0&&(r={});var a=this;a.sortable.enable(r.sortable)},".sortable-disable":function(t,r){r===void 0&&(r={});var a=this;a.sortable.disable(r.sortable)},".sortable-toggle":function(t,r){r===void 0&&(r={});var a=this;a.sortable.toggle(r.sortable)}}},Ta={init:function(){var t=this,r=nt(),a={},n,i,s,o,l,u,c,d,p,f,h,m,g,v,b,y,w,x,k,C,E;function $(A){!t.swipeout.allow||(i=!1,n=!0,s=void 0,a.x=A.type==="touchstart"?A.targetTouches[0].pageX:A.pageX,a.y=A.type==="touchstart"?A.targetTouches[0].pageY:A.pageY,o=new Date().getTime(),u=T(this))}function N(A){if(!!n){var R=A.type==="touchmove"?A.targetTouches[0].pageX:A.pageX,O=A.type==="touchmove"?A.targetTouches[0].pageY:A.pageY;if(typeof s=="undefined"&&(s=!!(s||Math.abs(O-a.y)>Math.abs(R-a.x))),s){n=!1;return}if(!i){if(T(".list.sortable-opened").length>0)return;c=u.find(".swipeout-content"),d=u.find(".swipeout-actions-right"),p=u.find(".swipeout-actions-left"),f=null,h=null,b=null,y=null,k=null,x=null,p.length>0&&(f=p.outerWidth(),b=p.children("a"),x=p.find(".swipeout-overswipe")),d.length>0&&(h=d.outerWidth(),y=d.children("a"),k=d.find(".swipeout-overswipe")),g=u.hasClass("swipeout-opened"),g&&(v=u.find(".swipeout-actions-left.swipeout-actions-opened").length>0?"left":"right"),u.removeClass("swipeout-transitioning"),t.params.swipeout.noFollow||(u.find(".swipeout-actions-opened").removeClass("swipeout-actions-opened"),u.removeClass("swipeout-opened"))}if(i=!0,A.cancelable&&A.preventDefault(),l=R-a.x,m=l,g&&(v==="right"?m-=h:m+=f),m>0&&p.length===0||m<0&&d.length===0){if(!g){n=!1,i=!1,c.transform(""),y&&y.length>0&&y.transform(""),b&&b.length>0&&b.transform("");return}m=0}m<0?w="to-left":m>0?w="to-right":w||(w="to-left");var D,z;if(A.f7PreventSwipePanel=!0,t.params.swipeout.noFollow){g?(v==="right"&&l>0&&t.swipeout.close(u),v==="left"&&l<0&&t.swipeout.close(u)):(l<0&&d.length>0&&t.swipeout.open(u,"right"),l>0&&p.length>0&&t.swipeout.open(u,"left")),n=!1,i=!1;return}if(C=!1,E=!1,d.length>0){var U=m;if(z=U/h,U<-h){var j=U/-h;U=-h-Math.pow(-U-h,.8),m=U,k.length>0&&j>t.params.swipeout.overswipeRatio&&(E=!0)}w!=="to-left"&&(z=0,U=0),y.each(function(V){var H=T(V);typeof V.f7SwipeoutButtonOffset=="undefined"&&(H[0].f7SwipeoutButtonOffset=V.offsetLeft),D=V.f7SwipeoutButtonOffset,k.length>0&&H.hasClass("swipeout-overswipe")&&w==="to-left"&&(H.css({left:(E?-D:0)+"px"}),E?(H.hasClass("swipeout-overswipe-active")||(u.trigger("swipeout:overswipeenter"),t.emit("swipeoutOverswipeEnter",u[0])),H.addClass("swipeout-overswipe-active")):(H.hasClass("swipeout-overswipe-active")&&(u.trigger("swipeout:overswipeexit"),t.emit("swipeoutOverswipeExit",u[0])),H.removeClass("swipeout-overswipe-active"))),H.transform("translate3d("+(U-D*(1+Math.max(z,-1)))+"px,0,0)")})}if(p.length>0){var G=m;if(z=G/f,G>f){var L=G/h;G=f+Math.pow(G-f,.8),m=G,x.length>0&&L>t.params.swipeout.overswipeRatio&&(C=!0)}w!=="to-right"&&(G=0,z=0),b.each(function(V,H){var Y=T(V);typeof V.f7SwipeoutButtonOffset=="undefined"&&(Y[0].f7SwipeoutButtonOffset=f-V.offsetLeft-V.offsetWidth),D=V.f7SwipeoutButtonOffset,x.length>0&&Y.hasClass("swipeout-overswipe")&&w==="to-right"&&(Y.css({left:(C?D:0)+"px"}),C?(Y.hasClass("swipeout-overswipe-active")||(u.trigger("swipeout:overswipeenter"),t.emit("swipeoutOverswipeEnter",u[0])),Y.addClass("swipeout-overswipe-active")):(Y.hasClass("swipeout-overswipe-active")&&(u.trigger("swipeout:overswipeexit"),t.emit("swipeoutOverswipeExit",u[0])),Y.removeClass("swipeout-overswipe-active"))),b.length>1&&Y.css("z-index",b.length-H),Y.transform("translate3d("+(G+D*(1-Math.min(z,1)))+"px,0,0)")})}u.trigger("swipeout",z),t.emit("swipeout",u[0],z),c.transform("translate3d("+m+"px,0,0)")}}function I(){if(!n||!i){n=!1,i=!1;return}n=!1,i=!1;var A=new Date().getTime()-o,R=w==="to-left"?d:p,O=w==="to-left"?h:f,D,z,U;if(A<300&&(l<-10&&w==="to-left"||l>10&&w==="to-right")||A>=300&&Math.abs(m)>O/2?D="open":D="close",A<300&&(Math.abs(m)===0&&(D="close"),Math.abs(m)===O&&(D="open")),D==="open"){Ta.el=u[0],u.trigger("swipeout:open"),t.emit("swipeoutOpen",u[0]),u.addClass("swipeout-opened swipeout-transitioning");var j=w==="to-left"?-O:O;if(c.transform("translate3d("+j+"px,0,0)"),R.addClass("swipeout-actions-opened"),z=w==="to-left"?y:b,z)for(U=0;U<z.length;U+=1)T(z[U]).transform("translate3d("+j+"px,0,0)");E&&d.find(".swipeout-overswipe").trigger("click","f7Overswipe"),C&&p.find(".swipeout-overswipe").trigger("click","f7Overswipe")}else u.trigger("swipeout:close"),t.emit("swipeoutClose",u[0]),Ta.el=void 0,u.addClass("swipeout-transitioning").removeClass("swipeout-opened"),c.transform(""),R.removeClass("swipeout-actions-opened");var G;b&&b.length>0&&b!==z&&b.each(function(L){var V=T(L);G=L.f7SwipeoutButtonOffset,typeof G=="undefined"&&(V[0].f7SwipeoutButtonOffset=f-L.offsetLeft-L.offsetWidth),V.transform("translate3d("+G+"px,0,0)")}),y&&y.length>0&&y!==z&&y.each(function(L){var V=T(L);G=L.f7SwipeoutButtonOffset,typeof G=="undefined"&&(V[0].f7SwipeoutButtonOffset=L.offsetLeft),V.transform("translate3d("+-G+"px,0,0)")}),c.transitionEnd(function(){g&&D==="open"||!g&&D==="close"||(u.trigger(D==="open"?"swipeout:opened":"swipeout:closed"),t.emit(D==="open"?"swipeoutOpened":"swipeoutClosed",u[0]),u.removeClass("swipeout-transitioning"),g&&D==="close"&&(d.length>0&&y.transform(""),p.length>0&&b.transform("")))})}var S=Ft().passiveListener?{passive:!0}:!1;t.on("touchstart",function(A){if(Ta.el){var R=T(A.target);T(Ta.el).is(R[0])||R.parents(".swipeout").is(Ta.el)||R.hasClass("modal-in")||(R.attr("class")||"").indexOf("-backdrop")>0||R.hasClass("actions-modal")||R.parents(".actions-modal.modal-in, .dialog.modal-in").length>0||t.swipeout.close(Ta.el)}}),T(r).on(t.touchEvents.start,"li.swipeout",$,S),t.on("touchmove:active",N),t.on("touchend:passive",I)},allow:!0,el:void 0,open:function(){for(var t=this,r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];var i=a[0],s=a[1],o=a[2];typeof a[1]=="function"&&(i=a[0],o=a[1],s=a[2]);var l=T(i).eq(0);if(l.length!==0&&!(!l.hasClass("swipeout")||l.hasClass("swipeout-opened"))){s||(l.find(".swipeout-actions-right").length>0?s="right":s="left");var u=l.find(".swipeout-actions-"+s),c=l.find(".swipeout-content");if(u.length!==0){l.trigger("swipeout:open").addClass("swipeout-opened").removeClass("swipeout-transitioning"),t.emit("swipeoutOpen",l[0]),u.addClass("swipeout-actions-opened");var d=u.children("a"),p=u.outerWidth(),f=s==="right"?-p:p;d.length>1&&d.each(function(h,m){var g=T(h);s==="right"?g.transform("translate3d("+-h.offsetLeft+"px,0,0)"):g.css("z-index",d.length-m).transform("translate3d("+(p-h.offsetWidth-h.offsetLeft)+"px,0,0)")}),l.addClass("swipeout-transitioning"),c.transitionEnd(function(){l.trigger("swipeout:opened"),t.emit("swipeoutOpened",l[0]),o&&o.call(l[0])}),aa(function(){d.transform("translate3d("+f+"px,0,0)"),c.transform("translate3d("+f+"px,0,0)")}),Ta.el=l[0]}}},close:function(t,r){var a=this,n=T(t).eq(0);if(n.length===0||!n.hasClass("swipeout-opened"))return;var i=n.find(".swipeout-actions-opened").hasClass("swipeout-actions-right")?"right":"left",s=n.find(".swipeout-actions-opened").removeClass("swipeout-actions-opened"),o=s.children("a"),l=s.outerWidth();a.swipeout.allow=!1,n.trigger("swipeout:close"),a.emit("swipeoutClose",n[0]),n.removeClass("swipeout-opened").addClass("swipeout-transitioning");var u;function c(){a.swipeout.allow=!0,!n.hasClass("swipeout-opened")&&(n.removeClass("swipeout-transitioning"),o.transform(""),n.trigger("swipeout:closed"),a.emit("swipeoutClosed",n[0]),r&&r.call(n[0]),u&&clearTimeout(u))}n.find(".swipeout-content").transform("").transitionEnd(c),u=setTimeout(c,500),o.each(function(d){var p=T(d);i==="right"?p.transform("translate3d("+-d.offsetLeft+"px,0,0)"):p.transform("translate3d("+(l-d.offsetWidth-d.offsetLeft)+"px,0,0)"),p.css({left:"0px"}).removeClass("swipeout-overswipe-active")}),Ta.el&&Ta.el===n[0]&&(Ta.el=void 0)},delete:function(t,r){var a=this,n=T(t).eq(0);n.length!==0&&(Ta.el=void 0,n.trigger("swipeout:delete"),a.emit("swipeoutDelete",n[0]),n.css({height:n.outerHeight()+"px"}),n.transitionEnd(function(){if(n.trigger("swipeout:deleted"),a.emit("swipeoutDeleted",n[0]),r&&r.call(n[0]),n.parents(".virtual-list").length>0){var i=n.parents(".virtual-list")[0].f7VirtualList,s=n[0].f7VirtualListIndex;i&&typeof s!="undefined"&&i.deleteItem(s)}else a.params.swipeout.removeElements?a.params.swipeout.removeElementsWithTimeout?setTimeout(function(){n.remove()},a.params.swipeout.removeElementsTimeout):n.remove():n.removeClass("swipeout-deleting swipeout-transitioning")}),aa(function(){n.addClass("swipeout-deleting swipeout-transitioning").css({height:"0px"}).find(".swipeout-content").transform("translate3d(-100%,0,0)")}))}},zj={name:"swipeout",params:{swipeout:{actionsNoFold:!1,noFollow:!1,removeElements:!0,removeElementsWithTimeout:!1,removeElementsTimeout:0,overswipeRatio:1.2}},create:function(){var t=this;En(t,{swipeout:Ta})},clicks:{".swipeout-open":function(t,r){r===void 0&&(r={});var a=this;a.swipeout.open(r.swipeout,r.side)},".swipeout-close":function(t){var r=this,a=t.closest(".swipeout");a.length!==0&&r.swipeout.close(a)},".swipeout-delete":function(t,r){r===void 0&&(r={});var a=this,n=t.closest(".swipeout");if(n.length!==0){var i=r,s=i.confirm,o=i.confirmTitle;r.confirm?a.dialog.confirm(s,o,function(){a.swipeout.delete(n)}):a.swipeout.delete(n)}}},on:{init:function(){var t=this;!t.params.swipeout||t.swipeout.init()}}},X2={toggleClicked:function(t){var r=this,a=t.closest(".accordion-item").eq(0);a.length||(a=t.parents("li").eq(0));var n=t.parents(".accordion-item-content").eq(0);n.length&&n.parents(a).length||t.parents("li").length>1&&t.parents("li")[0]!==a[0]||r.accordion.toggle(a)},open:function(t){var r=this,a=T(t),n=!1;function i(){n=!0}if(a.trigger("accordion:beforeopen",{prevent:i},i),r.emit("accordionBeforeOpen",a[0],i),!n){var s=a.parents(".accordion-list").eq(0),o=a.children(".accordion-item-content");if(o.removeAttr("aria-hidden"),o.length===0&&(o=a.find(".accordion-item-content")),o.length!==0){var l=s.length>0&&a.parent().children(".accordion-item-opened");l.length>0&&r.accordion.close(l),o.transitionEnd(function(){a.hasClass("accordion-item-opened")?(o.transition(0),o.css("height","auto"),aa(function(){o.transition(""),a.trigger("accordion:opened"),r.emit("accordionOpened",a[0])})):(o.css("height",""),a.trigger("accordion:closed"),r.emit("accordionClosed",a[0]))}),o.css("height",o[0].scrollHeight+"px"),a.trigger("accordion:open"),a.addClass("accordion-item-opened"),r.emit("accordionOpen",a[0])}}},close:function(t){var r=this,a=T(t),n=!1;function i(){n=!0}if(a.trigger("accordion:beforeclose",{prevent:i},i),r.emit("accordionBeforeClose",a[0],i),!n){var s=a.children(".accordion-item-content");s.length===0&&(s=a.find(".accordion-item-content")),a.removeClass("accordion-item-opened"),s.attr("aria-hidden",!0),s.transition(0),s.css("height",s[0].scrollHeight+"px"),s.transitionEnd(function(){a.hasClass("accordion-item-opened")?(s.transition(0),s.css("height","auto"),aa(function(){s.transition(""),a.trigger("accordion:opened"),r.emit("accordionOpened",a[0])})):(s.css("height",""),a.trigger("accordion:closed"),r.emit("accordionClosed",a[0]))}),aa(function(){s.transition(""),s.css("height",""),a.trigger("accordion:close"),r.emit("accordionClose",a[0])})}},toggle:function(t){var r=this,a=T(t);a.length!==0&&(a.hasClass("accordion-item-opened")?r.accordion.close(t):r.accordion.open(t))}},Bj={name:"accordion",create:function(){var t=this;En(t,{accordion:X2})},clicks:{".accordion-item .item-link, .accordion-item-toggle, .links-list.accordion-list > ul > li > a":function(t){var r=this;X2.toggleClicked.call(r,t)}}},Vj={name:"contactsList"};function kw(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Wj(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,l1(e,t)}function l1(e,t){return l1=Object.setPrototypeOf||function(a,n){return a.__proto__=n,a},l1(e,t)}var Hj=function(e){Wj(t,e);function t(a,n){var i;n===void 0&&(n={}),i=e.call(this,n,[a])||this;var s=kw(i),o=Ct(),l=nt(),u;a.theme==="md"?u=48:a.theme==="ios"?u=44:a.theme==="aurora"&&(u=38);var c={cols:1,height:u,cache:!0,dynamicHeightBufferSize:1,showFilteredItemsOnly:!1,renderExternal:void 0,setListHeight:!0,searchByItem:void 0,searchAll:void 0,ul:null,createUl:!0,scrollableParentEl:void 0,renderItem:function(w){return(`
          <li>
            <div class="item-content">
              <div class="item-inner">
                <div class="item-title">`+w+`</div>
              </div>
            </div>
          </li>
        `).trim()},on:{}};if(s.useModulesParams(c),s.params=se(c,n),(s.params.height===void 0||!s.params.height)&&(s.params.height=u),s.$el=T(n.el),s.el=s.$el[0],s.$el.length===0)return kw(i);s.$el[0].f7VirtualList=s,s.items=s.params.items,s.params.showFilteredItemsOnly&&(s.filteredItems=[]),s.params.renderItem&&(s.renderItem=s.params.renderItem),s.$pageContentEl=s.$el.parents(".page-content"),s.pageContentEl=s.$pageContentEl[0],s.$scrollableParentEl=s.params.scrollableParentEl?T(s.params.scrollableParentEl).eq(0):s.$pageContentEl,!s.$scrollableParentEl.length&&s.$pageContentEl.length&&(s.$scrollableParentEl=s.$pageContentEl),s.scrollableParentEl=s.$scrollableParentEl[0],typeof s.params.updatableScroll!="undefined"?s.updatableScroll=s.params.updatableScroll:(s.updatableScroll=!0,o.ios&&o.osVersion.split(".")[0]<8&&(s.updatableScroll=!1));var d=s.params.ul;s.$ul=d?T(s.params.ul):s.$el.children("ul"),s.$ul.length===0&&s.params.createUl&&(s.$el.append("<ul></ul>"),s.$ul=s.$el.children("ul")),s.ul=s.$ul[0];var p;!s.ul&&!s.params.createUl?p=s.$el:p=s.$ul,se(s,{$itemsWrapEl:p,itemsWrapEl:p[0],domCache:{},displayDomCache:{},tempDomElement:l.createElement("ul"),lastRepaintY:null,fragment:l.createDocumentFragment(),pageHeight:void 0,rowsPerScreen:void 0,rowsBefore:void 0,rowsAfter:void 0,rowsToRender:void 0,maxBufferHeight:0,listHeight:void 0,dynamicHeight:typeof s.params.height=="function"}),s.useModules();var f=s.handleScroll.bind(s),h=s.handleResize.bind(s),m,g,v,b;return s.attachEvents=function(){m=s.$el.parents(".page").eq(0),g=s.$el.parents(".tab").filter(function(w){return T(w).parent(".tabs").parent(".tabs-animated-wrap, .tabs-swipeable-wrap").length===0}).eq(0),v=s.$el.parents(".panel").eq(0),b=s.$el.parents(".popup").eq(0),s.$scrollableParentEl.on("scroll",f),m.length&&m.on("page:reinit",h),g.length&&g.on("tab:show",h),v.length&&v.on("panel:open",h),b.length&&b.on("popup:open",h),a.on("resize",h)},s.detachEvents=function(){s.$scrollableParentEl.off("scroll",f),m.length&&m.off("page:reinit",h),g.length&&g.off("tab:show",h),v.length&&v.off("panel:open",h),b.length&&b.off("popup:open",h),a.off("resize",h)},s.init(),s||kw(i)}var r=t.prototype;return r.setListSize=function(){var n=this,i=n.filteredItems||n.items;if(n.pageHeight=n.$scrollableParentEl[0].offsetHeight,n.dynamicHeight){n.listHeight=0,n.heights=[];for(var s=0;s<i.length;s+=1){var o=n.params.height(i[s]);n.listHeight+=o,n.heights.push(o)}}else n.listHeight=Math.ceil(i.length/n.params.cols)*n.params.height,n.rowsPerScreen=Math.ceil(n.pageHeight/n.params.height),n.rowsBefore=n.params.rowsBefore||n.rowsPerScreen*2,n.rowsAfter=n.params.rowsAfter||n.rowsPerScreen,n.rowsToRender=n.rowsPerScreen+n.rowsBefore+n.rowsAfter,n.maxBufferHeight=n.rowsBefore/2*n.params.height;(n.updatableScroll||n.params.setListHeight)&&n.$itemsWrapEl.css({height:n.listHeight+"px"})},r.render=function(n,i){var s=this;n&&(s.lastRepaintY=null);var o=-(s.$el[0].getBoundingClientRect().top-s.$scrollableParentEl[0].getBoundingClientRect().top);if(typeof i!="undefined"&&(o=i),s.lastRepaintY===null||Math.abs(o-s.lastRepaintY)>s.maxBufferHeight||!s.updatableScroll&&s.$scrollableParentEl[0].scrollTop+s.pageHeight>=s.$scrollableParentEl[0].scrollHeight)s.lastRepaintY=o;else return;var l=s.filteredItems||s.items,u,c,d=0,p=0;if(s.dynamicHeight){var f=0,h;s.maxBufferHeight=s.pageHeight;for(var m=0;m<s.heights.length;m+=1)h=s.heights[m],typeof u=="undefined"&&(f+h>=o-s.pageHeight*2*s.params.dynamicHeightBufferSize?u=m:d+=h),typeof c=="undefined"&&((f+h>=o+s.pageHeight*2*s.params.dynamicHeightBufferSize||m===s.heights.length-1)&&(c=m+1),p+=h),f+=h;c=Math.min(c,l.length)}else u=(parseInt(o/s.params.height,10)-s.rowsBefore)*s.params.cols,u<0&&(u=0),c=Math.min(u+s.rowsToRender*s.params.cols,l.length);var g,v=[];s.reachEnd=!1;var b;for(b=u;b<c;b+=1){var y=void 0,w=s.items.indexOf(l[b]);b===u&&(s.currentFromIndex=w),b===c-1&&(s.currentToIndex=w),s.filteredItems?s.items[w]===s.filteredItems[s.filteredItems.length-1]&&(s.reachEnd=!0):w===s.items.length-1&&(s.reachEnd=!0),s.params.renderExternal?v.push(l[b]):s.domCache[w]?(y=s.domCache[w],y.f7VirtualListIndex=w):(s.renderItem?s.tempDomElement.innerHTML=s.renderItem(l[b],w).trim():s.tempDomElement.innerHTML=l[b].toString().trim(),y=s.tempDomElement.childNodes[0],s.params.cache&&(s.domCache[w]=y),y.f7VirtualListIndex=w),b===u&&(s.dynamicHeight?g=d:g=b*s.params.height/s.params.cols),s.params.renderExternal||(y.style.top=g+"px",s.emit("local::itemBeforeInsert vlItemBeforeInsert",s,y,l[b]),s.fragment.appendChild(y))}s.updatableScroll||(s.dynamicHeight?s.itemsWrapEl.style.height=p+"px":s.itemsWrapEl.style.height=b*s.params.height/s.params.cols+"px"),s.params.renderExternal?l&&l.length===0&&(s.reachEnd=!0):(s.emit("local::beforeClear vlBeforeClear",s,s.fragment),s.itemsWrapEl.innerHTML="",s.emit("local::itemsBeforeInsert vlItemsBeforeInsert",s,s.fragment),l&&l.length===0?(s.reachEnd=!0,s.params.emptyTemplate&&(s.itemsWrapEl.innerHTML=s.params.emptyTemplate)):s.itemsWrapEl.appendChild(s.fragment),s.emit("local::itemsAfterInsert vlItemsAfterInsert",s,s.fragment)),typeof i!="undefined"&&n&&s.$scrollableParentEl.scrollTop(i,0),s.params.renderExternal&&s.params.renderExternal(s,{fromIndex:u,toIndex:c,listHeight:s.listHeight,topPosition:g,items:v})},r.filterItems=function(n,i){i===void 0&&(i=!0);var s=this;s.filteredItems=[];for(var o=0;o<n.length;o+=1)s.filteredItems.push(s.items[n[o]]);i&&(s.$scrollableParentEl[0].scrollTop=0),s.update()},r.resetFilter=function(){var n=this;n.params.showFilteredItemsOnly?n.filteredItems=[]:(n.filteredItems=null,delete n.filteredItems),n.update()},r.scrollToItem=function(n){var i=this;if(n>i.items.length)return!1;var s=0;if(i.dynamicHeight)for(var o=0;o<n;o+=1)s+=i.heights[o];else s=n*i.params.height;var l=i.$el[0].offsetTop;return i.render(!0,l+s-parseInt(i.$scrollableParentEl.css("padding-top"),10)),!0},r.handleScroll=function(){var n=this;n.render()},r.isVisible=function(){var n=this;return!!(n.el.offsetWidth||n.el.offsetHeight||n.el.getClientRects().length)},r.handleResize=function(){var n=this;n.isVisible()&&(n.setListSize(),n.render(!0))},r.appendItems=function(n){for(var i=this,s=0;s<n.length;s+=1)i.items.push(n[s]);i.update()},r.appendItem=function(n){var i=this;i.appendItems([n])},r.replaceAllItems=function(n){var i=this;i.items=n,delete i.filteredItems,i.domCache={},i.update()},r.replaceItem=function(n,i){var s=this;s.items[n]=i,s.params.cache&&delete s.domCache[n],s.update()},r.prependItems=function(n){for(var i=this,s=n.length-1;s>=0;s-=1)i.items.unshift(n[s]);if(i.params.cache){var o={};Object.keys(i.domCache).forEach(function(l){o[parseInt(l,10)+n.length]=i.domCache[l]}),i.domCache=o}i.update()},r.prependItem=function(n){var i=this;i.prependItems([n])},r.moveItem=function(n,i){var s=this,o=n,l=i;if(o!==l){var u=s.items.splice(o,1)[0];if(l>=s.items.length?(s.items.push(u),l=s.items.length-1):s.items.splice(l,0,u),s.params.cache){var c={};Object.keys(s.domCache).forEach(function(d){var p=parseInt(d,10),f=o<l?o:l,h=o<l?l:o,m=o<l?-1:1;(p<f||p>h)&&(c[p]=s.domCache[p]),p===f&&(c[h]=s.domCache[p]),p>f&&p<=h&&(c[p+m]=s.domCache[p])}),s.domCache=c}s.update()}},r.insertItemBefore=function(n,i){var s=this;if(n===0){s.prependItem(i);return}if(n>=s.items.length){s.appendItem(i);return}if(s.items.splice(n,0,i),s.params.cache){var o={};Object.keys(s.domCache).forEach(function(l){var u=parseInt(l,10);u>=n&&(o[u+1]=s.domCache[u])}),s.domCache=o}s.update()},r.deleteItems=function(n){for(var i=this,s,o=0,l=function(d){var p=n[d];typeof s!="undefined"&&p>s&&(o=-d),p+=o,s=n[d];var f=i.items.splice(p,1)[0];if(i.filteredItems&&i.filteredItems.indexOf(f)>=0&&i.filteredItems.splice(i.filteredItems.indexOf(f),1),i.params.cache){var h={};Object.keys(i.domCache).forEach(function(m){var g=parseInt(m,10);g===p?delete i.domCache[p]:parseInt(m,10)>p?h[g-1]=i.domCache[m]:h[g]=i.domCache[m]}),i.domCache=h}},u=0;u<n.length;u+=1)l(u);i.update()},r.deleteAllItems=function(){var n=this;n.items=[],delete n.filteredItems,n.params.cache&&(n.domCache={}),n.update()},r.deleteItem=function(n){var i=this;i.deleteItems([n])},r.clearCache=function(){var n=this;n.domCache={}},r.update=function(n){var i=this;n&&i.params.cache&&(i.domCache={}),i.setListSize(),i.render(!0)},r.init=function(){var n=this;n.attachEvents(),n.setListSize(),n.render()},r.destroy=function(){var n=this;n.detachEvents(),n.$el[0].f7VirtualList=null,delete n.$el[0].f7VirtualList,$r(n),n=null},t}(rr),Y2=Hj,Uj={name:"virtualList",static:{VirtualList:Y2},create:function(){var t=this;t.virtualList=Ir({defaultSelector:".virtual-list",constructor:Y2,app:t,domProp:"f7VirtualList"})}};function Up(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jj(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,u1(e,t)}function u1(e,t){return u1=Object.setPrototypeOf||function(a,n){return a.__proto__=n,a},u1(e,t)}var Gj=function(e){jj(t,e);function t(a,n){var i;n===void 0&&(n={}),i=e.call(this,n,[a])||this;var s=Up(i),o={el:null,listEl:null,indexes:"auto",iosItemHeight:14,mdItemHeight:14,auroraItemHeight:14,scrollList:!0,label:!1,renderItem:function($,N){return(`
          <li>`+$+`</li>
        `).trim()},renderSkipPlaceholder:function(){return'<li class="list-index-skip-placeholder"></li>'},on:{}};s.useModulesParams(o),s.params=se(o,n);var l,u,c,d;if(s.params.el)l=T(s.params.el);else return s||Up(i);if(l[0].f7ListIndex)return l[0].f7ListIndex||Up(i);if(d=l.find("ul"),d.length===0&&(d=T("<ul></ul>"),l.append(d)),s.params.listEl&&(u=T(s.params.listEl)),s.params.indexes==="auto"&&!u)return s||Up(i);u?c=u.parents(".page-content").eq(0):(c=l.siblings(".page-content").eq(0),c.length===0&&(c=l.parents(".page").eq(0).find(".page-content").eq(0))),l[0].f7ListIndex=s,se(s,{app:a,$el:l,el:l&&l[0],$ul:d,ul:d&&d[0],$listEl:u,listEl:u&&u[0],$pageContentEl:c,pageContentEl:c&&c[0],indexes:n.indexes,height:0,skipRate:0}),s.useModules();function p(){var E={index:s};s.calcSize(),E!==s.height&&s.render()}function f(E){var $=T(E.target).closest("li");if(!!$.length){var N=$.index();if(s.skipRate>0){var I=N/($.siblings("li").length-1);N=Math.round((s.indexes.length-1)*I)}var S=s.indexes[N];s.$el.trigger("listindex:click",{content:S,index:N}),s.emit("local::click listIndexClick",s,S,N),s.$el.trigger("listindex:select",{content:S,index:N}),s.emit("local::select listIndexSelect",s,S,N),s.$listEl&&s.params.scrollList&&s.scrollListToIndex(S,N)}}var h,m,g,v,b,y=null;function w(E){var $=d.children();!$.length||(g=$[0].getBoundingClientRect().top,v=$[$.length-1].getBoundingClientRect().top+$[0].offsetHeight,E.type==="touchstart"?E.targetTouches[0].pageX:E.pageX,E.type==="touchstart"?E.targetTouches[0].pageY:E.pageY,h=!0,m=!1,y=null)}function x(E){if(!!h){!m&&s.params.label&&(b=T('<span class="list-index-label"></span>'),l.append(b)),m=!0;var $=E.type==="touchmove"?E.targetTouches[0].pageY:E.pageY;E.preventDefault();var N=($-g)/(v-g);N=Math.min(Math.max(N,0),1);var I=Math.round((s.indexes.length-1)*N),S=s.indexes[I],A=v-g,R=(s.height-A)/2+(1-N)*A;I!==y&&(s.params.label&&b.html(S).transform("translateY(-"+R+"px)"),s.$listEl&&s.params.scrollList&&s.scrollListToIndex(S,I)),y=I,s.$el.trigger("listindex:select"),s.emit("local::select listIndexSelect",s,S,I)}}function k(){!h||(h=!1,m=!1,s.params.label&&(b&&b.remove(),b=void 0))}var C=Ft().passiveListener?{passive:!0}:!1;return s.attachEvents=function(){l.parents(".tab").on("tab:show",p),l.parents(".page").on("page:reinit",p),l.parents(".panel").on("panel:open",p),l.parents(".sheet-modal, .actions-modal, .popup, .popover, .login-screen, .dialog, .toast").on("modal:open",p),a.on("resize",p),l.on("click",f),l.on(a.touchEvents.start,w,C),a.on("touchmove:active",x),a.on("touchend:passive",k)},s.detachEvents=function(){l.parents(".tab").off("tab:show",p),l.parents(".page").off("page:reinit",p),l.parents(".panel").off("panel:open",p),l.parents(".sheet-modal, .actions-modal, .popup, .popover, .login-screen, .dialog, .toast").off("modal:open",p),a.off("resize",p),l.off("click",f),l.off(a.touchEvents.start,w,C),a.off("touchmove:active",x),a.off("touchend:passive",k)},s.init(),s||Up(i)}var r=t.prototype;return r.scrollListToIndex=function(n,i){var s=this,o=s.$listEl,l=s.$pageContentEl,u=s.app;if(!o||!l||l.length===0)return s;var c;if(o.find(".list-group-title, .item-divider").each(function(v){if(!c){var b=T(v);b.text()===n&&(c=b)}}),!c||c.length===0)return s;var d=c.parent().offset().top,p=parseInt(l.css("padding-top"),10),f=l[0].scrollTop,h=c.offset().top;if(l.parents(".page-with-navbar-large").length){var m=u.navbar.getElByPage(l.parents(".page-with-navbar-large").eq(0)),g=T(m).find(".title-large");g.length&&(p-=g[0].offsetHeight||0)}return d<=p?l.scrollTop(d+f-p):l.scrollTop(h+f-p),s},r.renderSkipPlaceholder=function(){var n=this;return n.params.renderSkipPlaceholder.call(n)},r.renderItem=function(n,i){var s=this;return s.params.renderItem.call(s,n,i)},r.render=function(){var n=this,i=n.$ul,s=n.indexes,o=n.skipRate,l,u=s.map(function(c,d){if(d%o!==0&&o>0)return l=!0,"";var p=n.renderItem(c,d);return l&&(p=n.renderSkipPlaceholder()+p),l=!1,p}).join("");return i.html(u),n},r.calcSize=function(){var n=this,i=n.app,s=n.params,o=n.el,l=n.indexes,u=o.offsetHeight,c=s[i.theme+"ItemHeight"],d=Math.floor(u/c),p=l.length,f=0;return p>d&&(f=Math.ceil((p*2-1)/d)),n.height=u,n.skipRate=f,n},r.calcIndexes=function(){var n=this;return n.params.indexes==="auto"?(n.indexes=[],n.$listEl.find(".list-group-title, .item-divider").each(function(i){var s=T(i).text();n.indexes.indexOf(s)<0&&n.indexes.push(s)})):n.indexes=n.params.indexes,n},r.update=function(){var n=this;return n.calcIndexes(),n.calcSize(),n.render(),n},r.init=function(){var n=this;n.calcIndexes(),n.calcSize(),n.render(),n.attachEvents()},r.destroy=function(){var n=this;n.$el.trigger("listindex:beforedestroy",n),n.emit("local::beforeDestroy listIndexBeforeDestroy"),n.detachEvents(),n.$el[0]&&(n.$el[0].f7ListIndex=null,delete n.$el[0].f7ListIndex),$r(n),n=null},t}(rr),K2=Gj,qj={name:"listIndex",static:{ListIndex:K2},create:function(){var t=this;t.listIndex=Ir({defaultSelector:".list-index",constructor:K2,app:t,domProp:"f7ListIndex"})},on:{tabMounted:function(t){var r=this;T(t).find(".list-index-init").each(function(a){var n=se(T(a).dataset(),{el:a});r.listIndex.create(n)})},tabBeforeRemove:function(t){T(t).find(".list-index-init").each(function(r){r.f7ListIndex&&r.f7ListIndex.destroy()})},pageInit:function(t){var r=this;t.$el.find(".list-index-init").each(function(a){var n=se(T(a).dataset(),{el:a});r.listIndex.create(n)})},pageBeforeRemove:function(t){t.$el.find(".list-index-init").each(function(r){r.f7ListIndex&&r.f7ListIndex.destroy()})}},vnode:{"list-index-init":{insert:function(t){var r=this,a=t.elm,n=se(T(a).dataset(),{el:a});r.listIndex.create(n)},destroy:function(t){var r=t.elm;r.f7ListIndex&&r.f7ListIndex.destroy()}}}},Xj={name:"timeline"},Yj={show:function(){for(var t=this,r,a,n,i,s,o=arguments.length,l=new Array(o),u=0;u<o;u++)l[u]=arguments[u];l.length===1&&l[0]&&l[0].constructor===Object?(r=l[0].tabEl,a=l[0].tabLinkEl,n=l[0].animate,i=l[0].tabRoute,s=l[0].animatedInit):(r=l[0],a=l[1],n=l[2],i=l[3],typeof l[1]=="boolean"&&(r=l[0],n=l[1],a=l[2],i=l[3],l.length>2&&a.constructor===Object&&(r=l[0],n=l[1],i=l[2],a=l[3]))),typeof n=="undefined"&&(n=!0);var c=T(r);if(i&&c[0]&&(c[0].f7TabRoute=i),!s&&(c.length===0||c.hasClass("tab-active")))return{$newTabEl:c,newTabEl:c[0]};var d;a&&(d=T(a));var p=c.parent(".tabs");if(p.length===0)return{$newTabEl:c,newTabEl:c[0]};t.swipeout&&(t.swipeout.allowOpen=!0);var f=[];function h(I){f.push(I)}function m(){f.forEach(function(I){I()})}var g=!1;if(p.parent().hasClass("tabs-animated-wrap")){p.parent()[n?"removeClass":"addClass"]("not-animated");var v=parseFloat(p.css("transition-duration").replace(",","."));n&&v&&(p.transitionEnd(m),g=!0);var b=(t.rtl?c.index():-c.index())*100;p.transform("translate3d("+b+"%,0,0)")}var y;p.parent().hasClass("tabs-swipeable-wrap")&&t.swiper&&(y=p.parent()[0].swiper,y&&y.activeIndex!==c.index()?(g=!0,y.once("slideChangeTransitionEnd",function(){m()}).slideTo(c.index(),n?void 0:0)):y&&y.animating&&(g=!0,y.once("slideChangeTransitionEnd",function(){m()})));var w=p.children(".tab-active");if(w.removeClass("tab-active"),!s&&(!y||y&&!y.animating||y&&i)&&(w.hasClass("view")&&w.children(".page").length&&w.children(".page").each(function(I){T(I).trigger("page:tabhide"),t.emit("pageTabHide",I)}),w.trigger("tab:hide"),t.emit("tabHide",w[0])),c.addClass("tab-active"),!s&&(!y||y&&!y.animating||y&&i)&&(c.hasClass("view")&&c.children(".page").length&&c.children(".page").each(function(I){T(I).trigger("page:tabshow"),t.emit("pageTabShow",I)}),c.trigger("tab:show"),t.emit("tabShow",c[0])),!d&&(typeof r=="string"?d=T('.tab-link[href="'+r+'"]'):d=T('.tab-link[href="#'+c.attr("id")+'"]'),(!d||d&&d.length===0)&&T("[data-tab]").each(function(I){c.is(T(I).attr("data-tab"))&&(d=T(I))}),i&&(!d||d&&d.length===0)&&(d=T('[data-route-tab-id="'+i.route.tab.id+'"]'),d.length===0&&(d=T('.tab-link[href="'+i.url+'"]'))),d.length>1&&c.parents(".page").length&&(d=d.filter(function(I){return T(I).parents(".page")[0]===c.parents(".page")[0]}),t.theme==="ios"&&d.length===0&&i))){var x=c.parents(".page"),k=T(t.navbar.getElByPage(x));d=k.find('[data-route-tab-id="'+i.route.tab.id+'"]'),d.length===0&&(d=k.find('.tab-link[href="'+i.url+'"]'))}if(d.length>0){var C;if(w&&w.length>0){var E=w.attr("id");E&&(C=T('.tab-link[href="#'+E+'"]'),(!C||C&&C.length===0)&&(C=T('.tab-link[data-route-tab-id="'+E+'"]'))),(!C||C&&C.length===0)&&T("[data-tab]").each(function(I){w.is(T(I).attr("data-tab"))&&(C=T(I))}),(!C||C&&C.length===0)&&(C=d.siblings(".tab-link-active"))}else i&&(C=d.siblings(".tab-link-active"));if(C&&C.length>1&&w&&w.parents(".page").length&&(C=C.filter(function(I){return T(I).parents(".page")[0]===w.parents(".page")[0]})),C&&C.length>0&&C.removeClass("tab-link-active"),d&&d.length>0){d.addClass("tab-link-active");var $=d.parents(".tabbar, .tabbar-labels"),N=t.toolbar&&$.length>0&&($.hasClass("tabbar-highlight")||t.theme!=="ios");N&&t.toolbar.setHighlight($)}}return{$newTabEl:c,newTabEl:c[0],$oldTabEl:w,oldTabEl:w[0],onTabsChanged:h,animated:g}}},Kj={name:"tabs",create:function(){var t=this;se(t,{tab:{show:Yj.show.bind(t)}})},on:{"pageInit tabMounted":function(t){var r=T(t.el||t),a=r.find(".tabs-animated-wrap > .tabs > .tab-active")[0];if(!!a){var n=this;n.tab.show({tabEl:a,animatedInit:!0,animate:!1})}}},clicks:{".tab-link":function(t,r){if(r===void 0&&(r={}),t.attr("href")&&t.attr("href").indexOf("#")===0||t.attr("data-tab")){var a=this;a.tab.show({tabEl:r.tab||t.attr("href"),tabLinkEl:t,animate:r.animate})}}}};function Zj(e){var t=e.app;if(e.swipeInitialized)return;se(e,{swipeable:!0,swipeInitialized:!0});var r=e.params,a=e.$el,n=e.$backdropEl,i=e.side,s=e.effect,o,l,u,c,d,p,f={},h,m,g,v,b,y,w,x=0;function k(I){if(!(!e.swipeable||u)&&!(!t.panel.allowOpen||!r.swipe&&!r.swipeOnlyClose||l)&&!(T(".modal-in:not(.toast):not(.notification), .photo-browser-in").length>0)){o=t.panel.get(i==="left"?"right":"left")||{};var S=o.opened&&o.$el&&!o.$el.hasClass("panel-in-breakpoint");!e.opened&&S||!r.swipeOnlyClose&&S||I.target&&I.target.nodeName.toLowerCase()==="input"&&I.target.type==="range"||T(I.target).closest(".range-slider, .tabs-swipeable-wrap, .calendar-months, .no-swipe-panel, .card-opened").length>0||(f.x=I.type==="touchstart"?I.targetTouches[0].pageX:I.pageX,f.y=I.type==="touchstart"?I.targetTouches[0].pageY:I.pageY,!(r.swipeOnlyClose&&!e.opened)&&(r.swipeActiveArea&&!e.opened&&(i==="left"&&f.x>r.swipeActiveArea||i==="right"&&f.x<t.width-r.swipeActiveArea)||(x=0,w=T(e.getViewEl()),c=!1,l=!0,d=void 0,p=!1,h=sa(),y=void 0)))}}function C(I){if(!(!l||u||p)&&(x+=1,!(x<2))){if(I.f7PreventSwipePanel||t.preventSwipePanelBySwipeBack||t.preventSwipePanel){l=!1;return}var S=I.type==="touchmove"?I.targetTouches[0].pageX:I.pageX,A=I.type==="touchmove"?I.targetTouches[0].pageY:I.pageY;if(typeof d=="undefined"&&(d=!!(d||Math.abs(A-f.y)>Math.abs(S-f.x))),d){l=!1;return}if(!y){if(S>f.x?y="to-right":y="to-left",r.swipeActiveArea>0&&!e.opened){if(i==="left"&&f.x>r.swipeActiveArea){l=!1;return}if(i==="right"&&f.x<t.width-r.swipeActiveArea){l=!1;return}}if(a.hasClass("panel-in-breakpoint")){l=!1;return}if(i==="left"&&y==="to-left"&&!a.hasClass("panel-in")||i==="right"&&y==="to-right"&&!a.hasClass("panel-in")){l=!1;return}}var R=e.opened?0:-r.swipeThreshold;i==="right"&&(R=-R),c||(e.opened||(e.insertToRoot(),a.addClass("panel-in-swipe"),n.css("visibility","visible"),a.trigger("panel:swipeopen"),e.emit("local::swipeOpen panelSwipeOpen",e)),b=a[0].offsetWidth,s==="reveal"&&a.hasClass("panel-in-collapsed")&&(b-=parseFloat(w.css("margin-"+i))),a.transition(0)),c=!0,I.cancelable&&I.preventDefault(),m=S-f.x+R,i==="right"?s==="cover"||s==="push"?(g=m+(e.opened?0:b),g<0&&(g=0),g>b&&(g=b)):(g=m-(e.opened?b:0),g>0&&(g=0),g<-b&&(g=-b)):(g=m+(e.opened?b:0),g<0&&(g=0),g>b&&(g=b));var O=Math.abs(g/b);if(s==="reveal")r.swipeNoFollow||(w.transform("translate3d("+g+"px,0,0)").transition(0),n.transform("translate3d("+g+"px,0,0)").transition(0)),a.trigger("panel:swipe",Math.abs(g/b)),e.emit("local::swipe panelSwipe",e,Math.abs(g/b));else{if(i==="left"&&(g-=b),!r.swipeNoFollow&&(n.transition(0),v=1-Math.abs(g/b),n.css({opacity:v}),a.transform("translate3d("+g+"px,0,0)").transition(0),s==="push")){var D=i==="left"?g+b:g-b;w.transform("translate3d("+D+"px,0,0)").transition(0),n.transform("translate3d("+D+"px,0,0)").transition(0)}a.trigger("panel:swipe",Math.abs(g/b)),e.emit("local::swipe panelSwipe",e,Math.abs(g/b))}if(r.swipeNoFollow){var z=e.opened&&O===0||!e.opened&&O===1;z&&(p=!0,E(I))}}}function E(I){if(!l||!c){l=!1,c=!1;return}var S=I.type==="gesturestart"||u;l=!1,c=!1;var A=new Date().getTime()-h,R,O=(g===0||Math.abs(g)===b)&&!r.swipeNoFollow,D=r.swipeThreshold||0;S?R="reset":e.opened?s==="cover"||s==="push"?g===0?R="reset":A<300&&Math.abs(g)>0?R="swap":A>=300&&Math.abs(g)<b/2?R="reset":R="swap":g===-b?R="reset":A<300&&Math.abs(g)>=0||A>=300&&Math.abs(g)<=b/2?i==="left"&&g===b?R="reset":R="swap":R="reset":Math.abs(m)<D?R="reset":s==="cover"||s==="push"?g===0||A<300&&Math.abs(g)>0||A>=300&&Math.abs(g)<b/2?R="swap":R="reset":g===0?R="reset":A<300&&Math.abs(g)>0||A>=300&&Math.abs(g)>=b/2?R="swap":R="reset",R==="swap"&&(e.opened?e.close(!O):e.open(!O));var z=!0;if(R==="reset"&&!e.opened)if(O)a.removeClass("panel-in-swipe");else{z=!1;var U=s==="reveal"?w:a;e.setStateClasses("before-closing"),U.transitionEnd(function(){a.hasClass("panel-in")||(a.removeClass("panel-in-swipe"),e.setStateClasses("after-closing"))})}(s==="reveal"||s==="push")&&aa(function(){w.transition(""),w.transform("")}),z&&a.removeClass("panel-in-swipe"),a.transition("").transform(""),n.transform("").transition("").css({opacity:"",visibility:""})}function $(I){u=!0,E(I)}function N(){u=!1}t.on("touchstart:passive",k),t.on("touchmove:active",C),t.on("touchend:passive",E),t.on("gesturestart",$),t.on("gestureend",N),e.on("panelDestroy",function(){t.off("touchstart:passive",k),t.off("touchmove:active",C),t.off("touchend:passive",E),t.off("gesturestart",$),t.off("gestureend",N)})}function Qj(e){var t=e.app,r=Ft();if(e.resizableInitialized)return;se(e,{resizable:!0,resizableWidth:null,resizableInitialized:!0});var a=T("html"),n=e.$el,i=e.$backdropEl,s=e.side,o=e.effect;if(!n)return;var l,u,c={},d,p,f,h,m,g;function v(E){if(!E)return null;if(E.indexOf("%")>=0||E.indexOf("vw")>=0)return parseInt(E,10)/100*t.width;var $=parseInt(E,10);return Number.isNaN($)?null:$}function b(){return e.resizable&&n.hasClass("panel-resizable")}function y(E){!b()||(c.x=E.type==="touchstart"?E.targetTouches[0].pageX:E.pageX,c.y=E.type==="touchstart"?E.targetTouches[0].pageY:E.pageY,u=!1,l=!0,h=v(n.css("min-width")),m=v(n.css("max-width")),g=n.hasClass("panel-in-breakpoint"))}function w(E){if(!!l){var $=E.type==="touchmove"?E.targetTouches[0].pageX:E.pageX;u||(p=n[0].offsetWidth,n.transition(0),n.addClass("panel-resizing"),a.css("cursor","col-resize"),(o!=="cover"||g)&&(f=T(e.getViewEl()),e.$containerEl&&e.$containerEl.hasClass("page")&&f.add(e.$containerEl.children(".page-content, .tabs, .fab"))),o!=="cover"&&!g&&(i.transition(0),f.transition(0))),u=!0,E.preventDefault(),d=$-c.x;var N=s==="left"?p+d:p-d;h&&!Number.isNaN(h)&&(N=Math.max(N,h)),m&&!Number.isNaN(m)&&(N=Math.min(N,m)),N=Math.min(Math.max(N,0),t.width),e.resizableWidth=N,n[0].style.width=N+"px",o!=="cover"&&!g?(f&&f.transform("translate3d("+(s==="left"?N:-N)+"px, 0, 0)"),i&&i.transform("translate3d("+(s==="left"?N:-N)+"px, 0, 0)")):g&&f&&f.css("margin-"+s,N+"px"),n.trigger("panel:resize",N),e.emit("local::resize panelResize",e,N)}}function x(){if(T("html").css("cursor",""),!l||!u){l=!1,u=!1;return}l=!1,u=!1,a[0].style.setProperty("--f7-panel-"+s+"-width",e.resizableWidth+"px"),n[0].style.width="",o!=="cover"&&!g&&(f.transform(""),i.transform("")),n.removeClass("panel-resizing"),aa(function(){n.transition(""),o!=="cover"&&(i.transition(""),f&&f.transition(""))})}function k(){!e.opened||!e.resizableWidth||(h=v(n.css("min-width")),m=v(n.css("max-width")),h&&!Number.isNaN(h)&&e.resizableWidth<h&&(e.resizableWidth=Math.max(e.resizableWidth,h)),m&&!Number.isNaN(m)&&e.resizableWidth>m&&(e.resizableWidth=Math.min(e.resizableWidth,m)),e.resizableWidth=Math.min(Math.max(e.resizableWidth,0),t.width),a[0].style.setProperty("--f7-panel-"+s+"-width",e.resizableWidth+"px"))}e.$el.find(".panel-resize-handler").length===0&&e.$el.append('<div class="panel-resize-handler"></div>'),e.$resizeHandlerEl=e.$el.children(".panel-resize-handler"),n.addClass("panel-resizable");var C=r.passiveListener?{passive:!0}:!1;e.$el.on(t.touchEvents.start,".panel-resize-handler",y,C),t.on("touchmove:active",w),t.on("touchend:passive",x),t.on("resize",k),e.on("beforeOpen",k),e.once("panelDestroy",function(){n.removeClass("panel-resizable"),e.$resizeHandlerEl.remove(),e.$el.off(t.touchEvents.start,".panel-resize-handler",y,C),t.off("touchmove:active",w),t.off("touchend:passive",x),t.off("resize",k),e.off("beforeOpen",k)})}function cg(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Jj(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,c1(e,t)}function c1(e,t){return c1=Object.setPrototypeOf||function(a,n){return a.__proto__=n,a},c1(e,t)}var e6=function(e){Jj(t,e);function t(a,n){var i;n===void 0&&(n={});var s=se({on:{}},a.params.panel,n);i=e.call(this,s,[a])||this;var o=cg(i);o.params=s,o.$containerEl=o.params.containerEl?T(o.params.containerEl).eq(0):a.$el,o.containerEl=o.$containerEl[0],o.containerEl||(o.$containerEl=a.$el,o.containerEl=a.$el[0]);var l;if(o.params.el?l=T(o.params.el).eq(0):o.params.content&&(l=T(o.params.content).filter(function(h){return h.nodeType===1}).eq(0)),l.length===0)return o||cg(i);if(l[0].f7Panel)return l[0].f7Panel||cg(i);l[0].f7Panel=o;var u=o.params,c=u.side,d=u.effect,p=u.resizable;typeof c=="undefined"&&(c=l.hasClass("panel-left")?"left":"right"),typeof d=="undefined"&&(d=l.hasClass("panel-cover")?"cover":l.hasClass("panel-push")?"push":"reveal"),typeof p=="undefined"&&(p=l.hasClass("panel-resizable"));var f;return o.params.backdrop&&o.params.backdropEl?f=T(o.params.backdropEl):o.params.backdrop&&(f=o.$containerEl.children(".panel-backdrop"),f.length===0&&(f=T('<div class="panel-backdrop"></div>'),o.$containerEl.prepend(f))),se(o,{app:a,side:c,effect:d,resizable:p,$el:l,el:l[0],opened:!1,$backdropEl:f,backdropEl:f&&f[0]}),o.useModules(),o.init(),o||cg(i)}var r=t.prototype;return r.getViewEl=function(){var n=this,i;return n.$containerEl.children(".views").length>0?i=n.$containerEl.children(".views")[0]:i=n.$containerEl.children(".view")[0],i},r.setStateClasses=function(n){var i=this,s=i.side,o=i.el,l=i.getViewEl(),u=l&&l.contains(o),c=!l||u?i.$containerEl:T("html");n==="open"&&c.addClass("with-panel with-panel-"+i.side+"-"+i.effect),n==="before-closing"&&c.addClass("with-panel-closing"),n==="closing"&&(c.addClass("with-panel-closing"),c.removeClass("with-panel with-panel-"+i.side+"-"+i.effect)),n==="after-closing"&&c.removeClass("with-panel-closing"),n==="closed"&&c.removeClass("with-panel-"+s+"-reveal with-panel-"+s+"-cover with-panel-"+s+"-push with-panel")},r.enableVisibleBreakpoint=function(){var n=this;return n.visibleBreakpointDisabled=!1,n.setVisibleBreakpoint(),n},r.disableVisibleBreakpoint=function(){var n=this;return n.visibleBreakpointDisabled=!0,n.setVisibleBreakpoint(),n},r.toggleVisibleBreakpoint=function(){var n=this;return n.visibleBreakpointDisabled=!n.visibleBreakpointDisabled,n.setVisibleBreakpoint(),n},r.setVisibleBreakpoint=function(n){n===void 0&&(n=!0);var i=this,s=i.app;i.visibleBreakpointResizeHandler||(i.visibleBreakpointResizeHandler=function(){i.setVisibleBreakpoint()},s.on("resize",i.visibleBreakpointResizeHandler));var o=i.side,l=i.$el,u=i.$containerEl,c=i.params,d=i.visibleBreakpointDisabled,p=c.visibleBreakpoint,f=T(i.getViewEl()),h=l.hasClass("panel-in-breakpoint");if(u&&u.hasClass("page")&&f.add(u.children(".page-content, .tabs, .fab")),s.width>=p&&typeof p!="undefined"&&p!==null&&!d)if(h){var g;f.css((g={},g["margin-"+o]=l.width()+"px",g))}else{var m;i.setStateClasses("closed"),l.addClass("panel-in-breakpoint").removeClass("panel-in panel-in-collapsed"),i.onOpen(!1),i.onOpened(),f.css((m={},m["margin-"+o]=l.width()+"px",m)),s.allowPanelOpen=!0,n&&(i.emit("local::breakpoint panelBreakpoint",i),i.$el.trigger("panel:breakpoint"))}else if(h){var v;l.removeClass("panel-in-breakpoint panel-in"),i.onClose(),i.onClosed(),f.css((v={},v["margin-"+o]="",v)),n&&(i.emit("local::breakpoint panelBreakpoint",i),i.$el.trigger("panel:breakpoint"))}},r.enableCollapsedBreakpoint=function(){var n=this;return n.collapsedBreakpointDisabled=!1,n.setCollapsedBreakpoint(),n},r.disableCollapsedBreakpoint=function(){var n=this;return n.collapsedBreakpointDisabled=!0,n.setCollapsedBreakpoint(),n},r.toggleCollapsedBreakpoint=function(){var n=this;return n.collapsedBreakpointDisabled=!n.collapsedBreakpointDisabled,n.setCollapsedBreakpoint(),n},r.setCollapsedBreakpoint=function(n){n===void 0&&(n=!0);var i=this,s=i.app;i.collapsedBreakpointResizeHandler||(i.collapsedBreakpointResizeHandler=function(){i.setCollapsedBreakpoint()},s.on("resize",i.collapsedBreakpointResizeHandler));var o=i.$el,l=i.params,u=i.collapsedBreakpointDisabled;if(!o.hasClass("panel-in-breakpoint")){var c=l.collapsedBreakpoint,d=o.hasClass("panel-in-collapsed");s.width>=c&&typeof c!="undefined"&&c!==null&&!u?d||(i.setStateClasses("closed"),o.addClass("panel-in-collapsed").removeClass("panel-in"),i.collapsed=!0,s.allowPanelOpen=!0,n&&(i.emit("local::collapsedBreakpoint panelCollapsedBreakpoint",i),i.$el.trigger("panel:collapsedbreakpoint"))):d&&(o.removeClass("panel-in-collapsed panel-in"),i.collapsed=!1,n&&(i.emit("local::collapsedBreakpoint panelCollapsedBreakpoint",i),i.$el.trigger("panel:collapsedbreakpoint")))}},r.enableResizable=function(){var n=this;return n.resizableInitialized?(n.resizable=!0,n.$el.addClass("panel-resizable")):Qj(n),n},r.disableResizable=function(){var n=this;return n.resizable=!1,n.$el.removeClass("panel-resizable"),n},r.enableSwipe=function(){var n=this;return n.swipeInitialized?n.swipeable=!0:Zj(n),n},r.disableSwipe=function(){var n=this;return n.swipeable=!1,n},r.onOpen=function(n){n===void 0&&(n=!0);var i=this,s=i.app;i.opened=!0,s.panel.allowOpen=!1,i.$el.trigger("panel:beforeopen"),i.emit("local::beforeOpen panelBeforeOpen",i),n&&i.setStateClasses("open"),i.$el.trigger("panel:open"),i.emit("local::open panelOpen",i)},r.onOpened=function(){var n=this,i=n.app;i.panel.allowOpen=!0,n.$el.trigger("panel:opened"),n.emit("local::opened panelOpened",n)},r.onClose=function(){var n=this,i=n.app;n.opened=!1,i.panel.allowOpen=!1,n.$el.trigger("panel:beforeclose"),n.emit("local::beforeClose panelBeforeClose",n),n.setStateClasses("closing"),n.$el.trigger("panel:close"),n.emit("local::close panelClose",n)},r.onClosed=function(){var n=this,i=n.app;if(i.panel.allowOpen=!0,n.setStateClasses("after-closing"),n.$el.removeClass("panel-out"),n.$backdropEl){var s=i.panel.get(".panel-in"),o=!s||s&&!s.$backdropEl;o&&n.$backdropEl.removeClass("panel-backdrop-in")}n.$el.trigger("panel:closed"),n.emit("local::closed panelClosed",n)},r.toggle=function(n){n===void 0&&(n=!0);var i=this,s=i.params.visibleBreakpoint,o=i.app;return o.width>=s&&typeof s!="undefined"&&s!==null?i.toggleVisibleBreakpoint():(i.opened?i.close(n):i.open(n),i)},r.insertToRoot=function(){var n=this,i=nt(),s=n.$el,o=n.$backdropEl,l=n.$containerEl,u=s.parent(),c=s.parents(i).length>0;if(!u.is(l)||s.prevAll(".views, .view").length){var d=l.children(".panel, .views, .view").eq(0),p=l.children(".panel-backdrop").eq(0);d.length?s.insertBefore(d):p?s.insertBefore(p):l.prepend(s),o&&o.length&&(!o.parent().is(l)&&o.nextAll(".panel").length===0||o.parent().is(l)&&o.nextAll(".panel").length===0)&&o.insertBefore(s),n.once("panelClosed",function(){c?u.append(s):s.remove()})}},r.open=function(n){n===void 0&&(n=!0);var i=this,s=i.app;if(!s.panel.allowOpen)return!1;var o=i.effect,l=i.$el,u=i.$backdropEl,c=i.opened,d=i.$containerEl;if(!l||l.hasClass("panel-in"))return i;if(i.insertToRoot(),c||l.hasClass("panel-in-breakpoint")||l.hasClass("panel-in"))return!1;var p=s.panel.get(".panel-in");p&&p!==i&&p.close(n),l[n?"removeClass":"addClass"]("not-animated"),l.addClass("panel-in"),u&&(u.addClass("panel-backdrop-in"),u[n?"removeClass":"addClass"]("not-animated")),(i.effect==="cover"||i.effect==="push")&&(i._clientLeft=l[0].clientLeft);var f=T(i.getViewEl());d&&d.hasClass("page")&&f.add(d.children(".page-content, .tabs"));var h=o==="reveal"?f:l;function m(){h.transitionEnd(function(g){T(g.target).is(h)?l.hasClass("panel-out")?i.onClosed():i.onOpened():m()})}return n?(u&&u.removeClass("not-animated"),m(),l.removeClass("panel-out not-animated").addClass("panel-in"),i.onOpen()):(u&&u.addClass("not-animated"),l.removeClass("panel-out").addClass("panel-in not-animated"),i.onOpen(),i.onOpened()),!0},r.close=function(n){n===void 0&&(n=!0);var i=this,s=i.effect,o=i.$el,l=i.$backdropEl,u=i.opened,c=i.$containerEl;if(!u||o.hasClass("panel-in-breakpoint")||!o.hasClass("panel-in"))return i;o[n?"removeClass":"addClass"]("not-animated"),l&&l[n?"removeClass":"addClass"]("not-animated");var d=T(i.getViewEl());c&&c.hasClass("page")&&d.add(c.children(".page-content, .tabs"));var p=s==="reveal"?d:o;function f(){o.hasClass("panel-out")?i.onClosed():o.hasClass("panel-in")&&i.onOpened(),i.setStateClasses("after-closing")}return n?(p.transitionEnd(function(){f()}),o.removeClass("panel-in").addClass("panel-out"),i.onClose()):(o.addClass("not-animated").removeClass("panel-in").addClass("panel-out"),i.onClose(),i.onClosed()),i},r.init=function(){var n=this;typeof n.params.visibleBreakpoint!="undefined"&&n.setVisibleBreakpoint(),typeof n.params.collapsedBreakpoint!="undefined"&&n.setCollapsedBreakpoint(),n.params.swipe&&n.enableSwipe(),n.resizable&&n.enableResizable()},r.destroy=function(){var n=this,i=n.app,s=n,o=s.$containerEl;if(!!n.$el){if(n.emit("local::beforeDestroy panelBeforeDestroy",n),n.$el.trigger("panel:beforedestroy"),n.visibleBreakpointResizeHandler&&i.off("resize",n.visibleBreakpointResizeHandler),n.collapsedBreakpointResizeHandler&&i.off("resize",n.collapsedBreakpointResizeHandler),n.$el.hasClass("panel-in-breakpoint")||n.$el.hasClass("panel-in-collapsed")){var l,u=T(n.getViewEl());o&&o.hasClass("page")&&u.add(o.children(".page-content, .tabs")),n.$el.removeClass("panel-in-breakpoint panel-in-collapsed panel-in"),u.css((l={},l["margin-"+n.side]="",l)),n.emit("local::breakpoint panelBreakpoint",n),n.$el.trigger("panel:breakpoint")}n.$el.trigger("panel:destroy"),n.emit("local::destroy panelDestroy",n),n.el&&(n.el.f7Panel=null,delete n.el.f7Panel),$r(n),n=null}},t}(rr),Ew=e6,t6={name:"panel",params:{panel:{opened:void 0,side:void 0,effect:void 0,resizable:void 0,backdrop:!0,backdropEl:void 0,visibleBreakpoint:void 0,collapsedBreakpoint:void 0,swipe:!1,swipeNoFollow:!1,swipeOnlyClose:!1,swipeActiveArea:0,swipeThreshold:0,closeByBackdropClick:!0,containerEl:void 0}},static:{Panel:Ew},create:function(){var t=this;se(t,{panel:{allowOpen:!0,create:function(a){return new Ew(t,a)},get:function(a){if(a===void 0&&(a=".panel"),a instanceof Ew)return a;(a==="left"||a==="right")&&(a=".panel-"+a);var n=T(a);if(!(n.length===0||n.length>1))return n[0].f7Panel},destroy:function(a){a===void 0&&(a=".panel");var n=t.panel.get(a);if(n&&n.destroy)return n.destroy()},open:function(a,n){a===void 0&&(a=".panel"),(a==="left"||a==="right")&&(a=".panel-"+a);var i=t.panel.get(a);if(i&&i.open)return i.open(n);if(!i)return i=t.panel.create({el:a}),i.open(n)},close:function(a,n){a===void 0&&(a=".panel-in"),(a==="left"||a==="right")&&(a=".panel-"+a);var i=t.panel.get(a);if(i&&i.open)return i.close(n);if(!i)return i=t.panel.create({el:a}),i.close(n)},toggle:function(a,n){a===void 0&&(a=".panel"),(a==="left"||a==="right")&&(a=".panel-"+a);var i=t.panel.get(a);if(i&&i.toggle)return i.toggle(n);if(!i)return i=t.panel.create({el:a}),i.toggle(n)}}})},on:{init:function(){var t=this;T(".panel-init").each(function(r){var a=Object.assign({el:r},T(r).dataset()||{});t.panel.create(a)})},pageInit:function(t){var r=this;t.$el.find(".panel-init").each(function(a){var n=Object.assign({el:a},T(a).dataset()||{});r.panel.create(n)})},pageBeforeRemove:function(t){var r=this;t.$el.find(".panel-init").each(function(a){var n=r.panel.get(a);n&&n.destroy&&n.destroy()})}},vnode:{"panel-init":{insert:function(t){var r=this,a=t.elm,n=Object.assign({el:a},T(a).dataset()||{});r.panel.create(n)},destroy:function(t){var r=this,a=t.elm,n=r.panel.get(a);n&&n.destroy&&n.destroy()}}},clicks:{".panel-open":function(t,r){r===void 0&&(r={});var a=this;a.panel.open(r.panel,r.animate)},".panel-close":function(t,r){r===void 0&&(r={});var a=this;a.panel.close(r.panel,r.animate)},".panel-toggle":function(t,r){r===void 0&&(r={});var a=this;a.panel.toggle(r.panel,r.animate)},".panel-backdrop":function(){var t=this,r=T(".panel-in:not(.panel-out)");if(!!r.length){var a=r[0]&&r[0].f7Panel;r.trigger("panel:backdrop-click"),a&&a.emit("backdropClick",a),t.emit("panelBackdropClick",a||r[0]),t.params.panel.closeByBackdropClick&&t.panel.close()}}}},r6={open:function(t,r){t===void 0&&(t=".card-expandable"),r===void 0&&(r=!0);var a=this,n=Ct(),i=nt(),s=Ft(),o=T(t).eq(0);if(!o||!o.length||o.hasClass("card-opened")||o.hasClass("card-opening")||o.hasClass("card-closing"))return;var l=o.parents(".page").eq(0);if(!l.length||l.find(".card-opened").length)return;var u;function c(){u=!0}if(o.trigger("card:beforeopen",{prevent:c}),a.emit("cardBeforeOpen",o[0],c),u)return;var d=Object.assign({animate:r},a.params.card,o.dataset()),p=o.parents(".page-content"),f;o.attr("data-backdrop-el")&&(f=T(o.attr("data-backdrop-el"))),!f&&d.backdrop&&(f=p.find(".card-backdrop"),f.length||(f=T('<div class="card-backdrop"></div>'),p.append(f)));var h,m;d.hideNavbarOnOpen&&(h=l.children(".navbar"),h.length||l[0].f7Page&&(h=l[0].f7Page.$navbarEl)),d.hideToolbarOnOpen&&(m=l.children(".toolbar"),m.length||(m=l.parents(".view").children(".toolbar")),m.length||(m=l.parents(".views").children(".toolbar")));var g=o.css("transform"),v;g&&g.match(/[2-9]/)&&(v=!0);var b=o.children(".card-content"),y=T(i.createElement("div")).addClass("card-expandable-size");o.append(y);var w=o[0].offsetWidth,x=o[0].offsetHeight,k=l[0].offsetWidth,C=l[0].offsetHeight,E=y[0].offsetWidth||k,$=y[0].offsetHeight||C,N;h&&!d.hideStatusbarOnOpen&&$===C&&(N=parseInt(h.css("--f7-safe-area-top"),10),Number.isNaN(N)&&(N=0)),N&&($-=N);var I=E/w,S=$/x,A=o.offset(),R=l.offset();N&&(R.top+=N/2),A.left-=R.left;var O,D;if(v){var z=g.replace(/matrix\(|\)/g,"").split(",").map(function(Ne){return Ne.trim()});if(z&&z.length>1){var U=parseFloat(z[0]);O=A.left-w*(1-U)/2,D=A.top-R.top-x*(1-U)/2,a.rtl&&(O-=o[0].scrollLeft)}else O=o[0].offsetLeft,D=o[0].offsetTop-(p.length?p[0].scrollTop:0)}else O=A.left,D=A.top-R.top,a.rtl&&(O-=o[0].scrollLeft);O-=(k-E)/2,D-=(C-$)/2;var j=E-w-O;if(a.rtl){var G=[j,O];O=G[0],j=G[1]}var L=$-x-D,V=(j-O)/2,H=(L-D)/2;d.hideNavbarOnOpen&&h&&h.length&&(h.closest(".navbar-hidden").length?o[0].f7KeepNavbarOnClose=!0:(delete o[0].f7KeepNavbarOnClose,a.navbar.hide(h,d.animate,d.hideStatusbarOnOpen,!0))),d.hideToolbarOnOpen&&m&&m.length&&(m.closest(".toolbar-hidden").length?o[0].f7KeepToolbarOnClose=!0:(delete o[0].f7KeepToolbarOnClose,a.toolbar.hide(m,d.animate))),f&&f.removeClass("card-backdrop-out").addClass("card-backdrop-in"),o.removeClass("card-transitioning"),d.animate&&o.addClass("card-opening"),o.trigger("card:open"),a.emit("cardOpen",o[0]);function Y(){l.addClass("page-with-card-opened"),n.ios&&p.length&&(p.css("height",p[0].offsetHeight+1+"px"),setTimeout(function(){p.css("height","")})),o.addClass("card-opened"),o.removeClass("card-opening"),o.trigger("card:opened"),a.emit("cardOpened",o[0],l[0])}b.css({width:E+"px",height:$+"px"}).transform("translate3d("+(a.rtl?O+V:-O-V)+"px, 0px, 0) scale("+1/I+", "+1/S+")"),o.transform("translate3d("+(a.rtl?-V:V)+"px, "+H+"px, 0) scale("+I+", "+S+")"),d.animate?o.transitionEnd(function(){Y()}):Y();function K(){if(o.removeClass("card-transitioning"),w=o[0].offsetWidth,x=o[0].offsetHeight,k=l[0].offsetWidth,C=l[0].offsetHeight,E=y[0].offsetWidth||k,$=y[0].offsetHeight||C,N=0,h&&!d.hideStatusbarOnOpen&&$===C&&(N=parseInt(h.css("--f7-safe-area-top"),10),Number.isNaN(N)&&(N=0)),N&&($-=N),I=E/w,S=$/x,o.transform("translate3d(0px, 0px, 0) scale(1)"),A=o.offset(),R=l.offset(),N&&(R.top+=N/2),A.left-=R.left,A.top-=R.top,O=A.left-(k-E)/2,a.rtl&&(O-=o[0].scrollLeft),D=A.top-(C-$)/2,j=E-w-O,L=$-x-D,a.rtl){var Ne=[j,O];O=Ne[0],j=Ne[1]}V=(j-O)/2,H=(L-D)/2,o.transform("translate3d("+(a.rtl?-V:V)+"px, "+H+"px, 0) scale("+I+", "+S+")"),b.css({width:E+"px",height:$+"px"}).transform("translate3d("+(a.rtl?O+V:-O-V)+"px, 0px, 0) scale("+1/I+", "+1/S+")")}var Z,le,de,ie,ue,pe,Se,ke,oe,me,$e,Me;function Oe(Ne){!T(Ne.target).closest(o).length||!o.hasClass("card-opened")||(Me=o.find(d.scrollableEl),Me[0]&&Me[0]!==b[0]&&!Me[0].contains(Ne.target)?Z=0:Z=Me.scrollTop(),le=!0,ie=Ne.targetTouches[0].pageX,ue=Ne.targetTouches[0].pageY,ke=void 0,me=!1,$e=!1)}function he(Ne){if(!!le){if(pe=Ne.targetTouches[0].pageX,Se=Ne.targetTouches[0].pageY,typeof ke=="undefined"&&(ke=!!(ke||Math.abs(Se-ue)>Math.abs(pe-ie))),!$e&&!me&&(!ke&&Ne.targetTouches[0].clientX<=50?$e=!0:me=!0),!($e||me)||me&&Z!==0){le=!0,de=!0;return}de||o.removeClass("card-transitioning"),de=!0,oe=Math.max(me?(Se-ue)/150:(pe-ie)/(w/2),0),(oe>0&&me||$e)&&(me&&n.ios&&Me[0]===b[0]&&(Me.css("-webkit-overflow-scrolling","auto"),Me.scrollTop(0)),Ne.preventDefault()),oe>1&&(oe=Math.pow(oe,.3)),oe>(me?1.3:1.1)?(le=!1,de=!1,a.card.close(o)):o.transform("translate3d("+(a.rtl?-V:V)+"px, "+H+"px, 0) scale("+I*(1-oe*.2)+", "+S*(1-oe*.2)+")")}}function Re(){!le||!de||(le=!1,de=!1,n.ios&&Me.css("-webkit-overflow-scrolling",""),oe>=.8?a.card.close(o):o.addClass("card-transitioning").transform("translate3d("+(a.rtl?-V:V)+"px, "+H+"px, 0) scale("+I+", "+S+")"))}o[0].detachEventHandlers=function(){a.off("resize",K),s.touch&&d.swipeToClose&&(a.off("touchstart:passive",Oe),a.off("touchmove:active",he),a.off("touchend:passive",Re))},a.on("resize",K),s.touch&&d.swipeToClose&&(a.on("touchstart:passive",Oe),a.on("touchmove:active",he),a.on("touchend:passive",Re))},close:function(t,r){t===void 0&&(t=".card-expandable.card-opened"),r===void 0&&(r=!0);var a=this,n=Ct(),i=T(t).eq(0);if(!i||!i.length||!i.hasClass("card-opened")||i.hasClass("card-opening")||i.hasClass("card-closing"))return;var s=i.children(".card-content"),o=i.parents(".page-content"),l=i.parents(".page").eq(0);if(!l.length)return;var u=Object.assign({animate:r},a.params.card,i.dataset()),c=i.find(u.scrollableEl),d,p,f;i.attr("data-backdrop-el")&&(f=T(i.attr("data-backdrop-el"))),u.backdrop&&(f=i.parents(".page-content").find(".card-backdrop")),u.hideNavbarOnOpen&&(d=l.children(".navbar"),d.length||l[0].f7Page&&(d=l[0].f7Page.$navbarEl),d&&d.length&&!i[0].f7KeepNavbarOnClose&&a.navbar.show(d,u.animate,!0)),u.hideToolbarOnOpen&&(p=l.children(".toolbar"),p.length||(p=l.parents(".view").children(".toolbar")),p.length||(p=l.parents(".views").children(".toolbar")),p&&p.length&&!i[0].f7KeepToolbarOnClose&&a.toolbar.show(p,u.animate)),l.removeClass("page-with-card-opened"),n.ios&&o.length&&(o.css("height",o[0].offsetHeight+1+"px"),setTimeout(function(){o.css("height","")})),f&&f.length&&f.removeClass("card-backdrop-in").addClass("card-backdrop-out"),i.removeClass("card-opened card-transitioning"),u.animate?i.addClass("card-closing"):i.addClass("card-no-transition"),i.transform(""),i.trigger("card:close"),a.emit("cardClose",i[0],l[0]);var h=i.hasClass("card-expandable-animate-width");function m(){h||s.css({width:"",height:""}),f&&f.length&&f.removeClass("card-backdrop-in card-backdrop-out"),i.removeClass("card-closing card-no-transition"),i.trigger("card:closed"),i.find(".card-expandable-size").remove(),a.emit("cardClosed",i[0],l[0])}h&&s.css({width:"",height:""}),s.transform("").scrollTop(0,r?300:0),c.length&&c[0]!==s[0]&&c.scrollTop(0,r?300:0),r?s.transitionEnd(function(){m()}):m(),i[0].detachEventHandlers&&(i[0].detachEventHandlers(),delete i[0].detachEventHandlers)},toggle:function(t,r){t===void 0&&(t=".card-expandable");var a=this,n=T(t).eq(0);!n.length||(n.hasClass("card-opened")?a.card.close(n,r):a.card.open(n,r))}},n6={name:"card",params:{card:{hideNavbarOnOpen:!0,hideStatusbarOnOpen:!0,hideToolbarOnOpen:!0,scrollableEl:".card-content",swipeToClose:!0,closeByBackdropClick:!0,backdrop:!0}},create:function(){var t=this;En(t,{card:r6})},on:{pageBeforeIn:function(t){var r=this;if(r.params.card.hideNavbarOnOpen&&t.navbarEl&&t.$el.find(".card-opened.card-expandable").length&&r.navbar.hide(t.navbarEl,!0,r.params.card.hideStatusbarOnOpen,!0),r.params.card.hideToolbarOnOpen&&t.$el.find(".card-opened.card-expandable").length){var a=t.$el.children(".toolbar");a.length||(a=t.$el.parents(".view").children(".toolbar")),a.length||(a=t.$el.parents(".views").children(".toolbar")),a&&a.length&&r.toolbar.hide(a)}}},clicks:{".card-close":function(t,r){var a=this;a.card.close(r.card,r.animate)},".card-open":function(t,r){var a=this;a.card.open(r.card,r.animate)},".card-expandable":function(t,r,a){var n=this;t.hasClass("card-opened")||t.hasClass("card-opening")||t.hasClass("card-closing")||T(a.target).closest(".card-prevent-open, .card-close").length||n.card.open(t)},".card-backdrop-in":function(){var t=this,r=!1;t.params.card.closeByBackdropClick&&(r=!0);var a=T(".card-opened");!a.length||(a.attr("data-close-by-backdrop-click")==="true"?r=!0:a.attr("data-close-by-backdrop-click")==="false"&&(r=!1),r&&t.card.close(a))}}},a6={name:"chip"},Cw={store:function(t,r){var a=this,n=De(),i=t,s=T(t);s.length&&s.is("form")&&s.attr("id")&&(i=s.attr("id")),a.form.data["form-"+i]=r,n.localStorage["f7form-"+i]=JSON.stringify(r)},get:function(t){var r=this,a=De(),n=t,i=T(t);if(i.length&&i.is("form")&&i.attr("id")&&(n=i.attr("id")),a.localStorage["f7form-"+n])return JSON.parse(a.localStorage["f7form-"+n]);if(r.form.data["form-"+n])return r.form.data["form-"+n]},remove:function(t){var r=this,a=De(),n=t,i=T(t);i.length&&i.is("form")&&i.attr("id")&&(n=i.attr("id")),r.form.data["form-"+n]&&(r.form.data["form-"+n]="",delete r.form.data["form-"+n]),a.localStorage["f7form-"+n]&&(a.localStorage["f7form-"+n]="",a.localStorage.removeItem("f7form-"+n))}},Z2={init:function(t){var r=this,a=T(t),n=a.attr("id");if(!n)return;var i=r.form.getFormData(n);i&&r.form.fillFromData(a,i);function s(){var o=r.form.convertToData(a);!o||(r.form.storeFormData(n,o),a.trigger("form:storedata",o),r.emit("formStoreData",a[0],o))}a.on("change submit",s)},destroy:function(t){var r=T(t);r.off("change submit")}};function i6(e){var t=this,r=T(e).eq(0);if(r.length!==0){var a={},n=["submit","image","button","file"],i=[];return r.find("input, select, textarea").each(function(s){var o=T(s);if(!(o.hasClass("ignore-store-data")||o.hasClass("no-store-data"))){var l=o.attr("name"),u=o.attr("type"),c=s.nodeName.toLowerCase();if(!(n.indexOf(u)>=0)&&!(i.indexOf(l)>=0||!l))if(c==="select"&&o.prop("multiple"))i.push(l),a[l]=[],r.find('select[name="'+l+'"] option').each(function(d){d.selected&&a[l].push(d.value)});else switch(u){case"checkbox":i.push(l),a[l]=[],r.find('input[name="'+l+'"]').each(function(d){d.checked&&a[l].push(d.value)});break;case"radio":i.push(l),r.find('input[name="'+l+'"]').each(function(d){d.checked&&(a[l]=d.value)});break;default:a[l]=o.val();break}}}),r.trigger("form:todata",a),t.emit("formToData",r[0],a),a}}function s6(e,t){var r=this,a=T(e).eq(0);if(!!a.length){var n=t,i=a.attr("id");if(!n&&i&&(n=r.form.getFormData(i)),!!n){var s=["submit","image","button","file"],o=[];a.find("input, select, textarea").each(function(l){var u=T(l);if(!(u.hasClass("ignore-store-data")||u.hasClass("no-store-data"))){var c=u.attr("name"),d=u.attr("type"),p=l.nodeName.toLowerCase();if(!(typeof n[c]=="undefined"||n[c]===null)&&!(s.indexOf(d)>=0)&&!(o.indexOf(c)>=0||!c)){if(p==="select"&&u.prop("multiple"))o.push(c),a.find('select[name="'+c+'"] option').each(function(f){var h=f;n[c].indexOf(f.value)>=0?h.selected=!0:h.selected=!1});else switch(d){case"checkbox":o.push(c),a.find('input[name="'+c+'"]').each(function(f){var h=f;n[c].indexOf(f.value)>=0?h.checked=!0:h.checked=!1});break;case"radio":o.push(c),a.find('input[name="'+c+'"]').each(function(f){var h=f;n[c]===f.value?h.checked=!0:h.checked=!1});break;default:u.val(n[c]);break}(p==="select"||p==="input"||p==="textarea")&&u.trigger("change","fromdata")}}}),a.trigger("form:fromdata",n),r.emit("formFromData",a[0],n)}}}function o6(){var e=this,t=De(),r=nt();function a(n,i){var s=T(this);if(!(n.type==="change"&&!s.hasClass("form-ajax-submit-onchange"))&&(n.type==="submit"&&n.preventDefault(),!(n.type==="change"&&i==="fromdata"))){var o=(s.attr("method")||"GET").toUpperCase(),l=s.prop("enctype")||s.attr("enctype"),u=s.attr("action");if(!!u){var c;o==="POST"?l==="application/x-www-form-urlencoded"?c=e.form.convertToData(s[0]):c=new t.FormData(s[0]):c=Ji(e.form.convertToData(s[0])),e.request({method:o,url:u,contentType:l,data:c,beforeSend:function(p){s.trigger("formajax:beforesend",{data:c,xhr:p}),e.emit("formAjaxBeforeSend",s[0],c,p)},error:function(p){s.trigger("formajax:error",{data:c,xhr:p}),e.emit("formAjaxError",s[0],c,p)},complete:function(p){s.trigger("formajax:complete",{data:c,xhr:p}),e.emit("formAjaxComplete",s[0],c,p)},success:function(p,f,h){s.trigger("formajax:success",{data:c,xhr:h}),e.emit("formAjaxSuccess",s[0],c,h)}})}}}T(r).on("submit change","form.form-ajax-submit, form.form-ajax-submit-onchange",a)}var l6={name:"form",create:function(){var t=this;se(t,{form:{data:{},storeFormData:Cw.store.bind(t),getFormData:Cw.get.bind(t),removeFormData:Cw.remove.bind(t),convertToData:i6.bind(t),fillFromData:s6.bind(t),storage:{init:Z2.init.bind(t),destroy:Z2.destroy.bind(t)}}})},on:{init:function(){var t=this;o6.call(t)},tabBeforeRemove:function(t){var r=this;T(t).find(".form-store-data").each(function(a){r.form.storage.destroy(a)})},tabMounted:function(t){var r=this;T(t).find(".form-store-data").each(function(a){r.form.storage.init(a)})},pageBeforeRemove:function(t){var r=this;t.$el.find(".form-store-data").each(function(a){r.form.storage.destroy(a)})},pageInit:function(t){var r=this;t.$el.find(".form-store-data").each(function(a){r.form.storage.init(a)})}}},ga={ignoreTypes:["checkbox","button","submit","range","radio","image"],createTextareaResizableShadow:function(){var t=nt(),r=T(t.createElement("textarea"));r.addClass("textarea-resizable-shadow"),r.prop({disabled:!0,readonly:!0}),ga.textareaResizableShadow=r},textareaResizableShadow:void 0,resizeTextarea:function(t){var r=this,a=De(),n=T(t);ga.textareaResizableShadow||ga.createTextareaResizableShadow();var i=ga.textareaResizableShadow;if(!!n.length&&!!n.hasClass("resizable")){ga.textareaResizableShadow.parents().length===0&&r.$el.append(i);var s=a.getComputedStyle(n[0]);"padding-top padding-bottom padding-left padding-right margin-left margin-right margin-top margin-bottom width font-size font-family font-style font-weight line-height font-variant text-transform letter-spacing border box-sizing display".split(" ").forEach(function(c){var d=s[c];"font-size line-height letter-spacing width".split(" ").indexOf(c)>=0&&(d=d.replace(",",".")),i.css(c,d)});var o=n[0].clientHeight;i.val("");var l=i[0].scrollHeight;i.val(n.val()),i.css("height",0);var u=i[0].scrollHeight;o!==u&&(u>l?n.css("height",u+"px"):u<o&&n.css("height",""),(u>l||u<o)&&(n.trigger("textarea:resize",{initialHeight:l,currentHeight:o,scrollHeight:u}),r.emit("textareaResize",{initialHeight:l,currentHeight:o,scrollHeight:u})))}},validate:function(t){var r=T(t);if(!r.length)return!0;var a=r.parents(".item-input"),n=r.parents(".input");function i(){r[0].f7ValidateReadonly&&(r[0].readOnly=!1)}function s(){r[0].f7ValidateReadonly&&(r[0].readOnly=!0)}i();var o=r[0].validity,l=r.dataset().errorMessage||r[0].validationMessage||"";if(!o)return s(),!0;if(!o.valid){var u=r.nextAll(".item-input-error-message, .input-error-message");return l&&(u.length===0&&(u=T('<div class="'+(n.length?"input-error-message":"item-input-error-message")+'"></div>'),u.insertAfter(r)),u.text(l)),u.length>0&&(a.addClass("item-input-with-error-message"),n.addClass("input-with-error-message")),a.addClass("item-input-invalid"),n.addClass("input-invalid"),r.addClass("input-invalid"),s(),!1}return a.removeClass("item-input-invalid item-input-with-error-message"),n.removeClass("input-invalid input-with-error-message"),r.removeClass("input-invalid"),s(),!0},validateInputs:function(t){var r=this,a=T(t).find("input, textarea, select").map(function(n){return r.input.validate(n)});return a.indexOf(!1)<0},focus:function(t){var r=T(t),a=r.attr("type");ga.ignoreTypes.indexOf(a)>=0||(r.parents(".item-input").addClass("item-input-focused"),r.parents(".input").addClass("input-focused"),r.addClass("input-focused"))},blur:function(t){var r=T(t);r.parents(".item-input").removeClass("item-input-focused"),r.parents(".input").removeClass("input-focused"),r.removeClass("input-focused")},checkEmptyState:function(t){var r=this,a=T(t);if(a.is("input, select, textarea, .item-input [contenteditable]")||(a=a.find("input, select, textarea, .item-input [contenteditable]").eq(0)),!!a.length){var n=a[0].hasAttribute("contenteditable"),i;n?a.find(".text-editor-placeholder").length?i="":i=a.html():i=a.val();var s=a.parents(".item-input"),o=a.parents(".input");i&&typeof i=="string"&&i.trim()!==""||Array.isArray(i)&&i.length>0?(s.addClass("item-input-with-value"),o.addClass("input-with-value"),a.addClass("input-with-value"),a.trigger("input:notempty"),r.emit("inputNotEmpty",a[0])):(s.removeClass("item-input-with-value"),o.removeClass("input-with-value"),a.removeClass("input-with-value"),a.trigger("input:empty"),r.emit("inputEmpty",a[0]))}},scrollIntoView:function(t,r,a,n){r===void 0&&(r=0);var i=T(t),s=i.parents(".page-content, .panel, .card-expandable .card-content").eq(0);if(!s.length)return!1;var o=s[0].offsetHeight,l=s[0].scrollTop,u=parseInt(s.css("padding-top"),10),c=parseInt(s.css("padding-bottom"),10),d=s.offset().top-l,p=i.offset().top-d,f=i[0].offsetHeight,h=p+l-u,m=p+l-o+c+f,g=h+(m-h)/2;return l>h?(s.scrollTop(a?g:h,r),!0):l<m?(s.scrollTop(a?g:m,r),!0):(n&&s.scrollTop(a?g:m,r),!1)},init:function(){var t=this,r=Ct(),a=De(),n=nt();ga.createTextareaResizableShadow();function i(){var d=this;t.params.input.scrollIntoViewOnFocus&&(r.android?T(a).once("resize",function(){n&&n.activeElement===d&&t.input.scrollIntoView(d,t.params.input.scrollIntoViewDuration,t.params.input.scrollIntoViewCentered,t.params.input.scrollIntoViewAlways)}):t.input.scrollIntoView(d,t.params.input.scrollIntoViewDuration,t.params.input.scrollIntoViewCentered,t.params.input.scrollIntoViewAlways)),t.input.focus(d)}function s(){var d=T(this),p=d[0].nodeName.toLowerCase();t.input.blur(d),(d.dataset().validate||d.attr("validate")!==null||d.attr("data-validate-on-blur")!==null)&&t.input.validate(d),p==="textarea"&&d.hasClass("resizable")&&ga.textareaResizableShadow&&ga.textareaResizableShadow.remove()}function o(){var d=T(this),p=d.attr("type"),f=d[0].nodeName.toLowerCase(),h=d[0].hasAttribute("contenteditable");ga.ignoreTypes.indexOf(p)>=0||(t.input.checkEmptyState(d),!h&&(d.attr("data-validate-on-blur")===null&&(d.dataset().validate||d.attr("validate")!==null)&&t.input.validate(d),f==="textarea"&&d.hasClass("resizable")&&t.input.resizeTextarea(d)))}function l(d){var p=T(this);p.attr("data-validate-on-blur")===null&&(p.dataset().validate||p.attr("validate")!==null)&&(d.preventDefault(),t.input.validate(p))}function u(){var d=T(this),p=d.siblings("input, textarea").eq(0),f=p.val();p.val("").trigger("input change").focus().trigger("input:clear",f),t.emit("inputClear",f)}function c(d){d.preventDefault()}T(n).on("click",".input-clear-button",u),T(n).on("mousedown",".input-clear-button",c),T(n).on("change input","input, textarea, select, .item-input [contenteditable]",o,!0),T(n).on("focus","input, textarea, select, .item-input [contenteditable]",i,!0),T(n).on("blur","input, textarea, select, .item-input [contenteditable]",s,!0),T(n).on("invalid","input, textarea, select",l,!0)}},u6={name:"input",params:{input:{scrollIntoViewOnFocus:void 0,scrollIntoViewCentered:!1,scrollIntoViewDuration:0,scrollIntoViewAlways:!1}},create:function(){var t=this;typeof t.params.input.scrollIntoViewOnFocus=="undefined"&&(t.params.input.scrollIntoViewOnFocus=Ct().android),En(t,{input:ga})},on:{init:function(){var t=this;t.input.init()},tabMounted:function(t){var r=this,a=T(t);a.find(".item-input, .input").each(function(n){var i=T(n);i.find("input, select, textarea, [contenteditable]").each(function(s){var o=T(s);ga.ignoreTypes.indexOf(o.attr("type"))>=0||r.input.checkEmptyState(o)})}),a.find("textarea.resizable").each(function(n){r.input.resizeTextarea(n)})},pageInit:function(t){var r=this,a=t.$el;a.find(".item-input, .input").each(function(n){var i=T(n);i.find("input, select, textarea, [contenteditable]").each(function(s){var o=T(s);ga.ignoreTypes.indexOf(o.attr("type"))>=0||r.input.checkEmptyState(o)})}),a.find("textarea.resizable").each(function(n){r.input.resizeTextarea(n)})},"panelBreakpoint panelCollapsedBreakpoint panelResize panelOpen panelSwipeOpen resize viewMasterDetailBreakpoint":function(t){var r=this;t&&t.$el?t.$el.find("textarea.resizable").each(function(a){r.input.resizeTextarea(a)}):T("textarea.resizable").each(function(a){r.input.resizeTextarea(a)})}}},c6={name:"checkbox"},d6={name:"radio"};function dg(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p6(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,d1(e,t)}function d1(e,t){return d1=Object.setPrototypeOf||function(a,n){return a.__proto__=n,a},d1(e,t)}var f6=function(e){p6(t,e);function t(a,n){var i;n===void 0&&(n={}),i=e.call(this,n,[a])||this;var s=dg(i),o=Ft(),l={};s.useModulesParams(l),s.params=se(l,n);var u=s.params.el;if(!u)return s||dg(i);var c=T(u);if(c.length===0)return s||dg(i);if(c[0].f7Toggle)return c[0].f7Toggle||dg(i);var d=c.children('input[type="checkbox"]');se(s,{app:a,$el:c,el:c[0],$inputEl:d,inputEl:d[0],disabled:c.hasClass("disabled")||d.hasClass("disabled")||d.attr("disabled")||d[0].disabled}),Object.defineProperty(s,"checked",{enumerable:!0,configurable:!0,set:function(E){!s||typeof s.$inputEl=="undefined"||s.checked!==E&&(d[0].checked=E,s.$inputEl.trigger("change"))},get:function(){return d[0].checked}}),c[0].f7Toggle=s;var p,f={},h,m,g,v,b;function y(C){p||s.disabled||(f.x=C.type==="touchstart"?C.targetTouches[0].pageX:C.pageX,f.y=C.type==="touchstart"?C.targetTouches[0].pageY:C.pageY,m=0,p=!0,h=void 0,v=sa(),b=s.checked,g=c[0].offsetWidth,qr(function(){p&&c.addClass("toggle-active-state")}))}function w(C){if(!(!p||s.disabled)){var E=C.type==="touchmove"?C.targetTouches[0].pageX:C.pageX,$=C.type==="touchmove"?C.targetTouches[0].pageY:C.pageY,N=a.rtl?-1:1;if(typeof h=="undefined"&&(h=!!(h||Math.abs($-f.y)>Math.abs(E-f.x))),h){p=!1;return}C.preventDefault(),m=E-f.x;var I;m*N<0&&Math.abs(m)>g/3&&b&&(I=!0),m*N>0&&Math.abs(m)>g/3&&!b&&(I=!0),I&&(f.x=E,s.checked=!b,b=!b)}}function x(){if(!p||s.disabled){h&&c.removeClass("toggle-active-state"),p=!1;return}var C=a.rtl?-1:1;p=!1,c.removeClass("toggle-active-state");var E;sa()-v<300&&(m*C<0&&b&&(E=!0),m*C>0&&!b&&(E=!0),E&&(s.checked=!b))}function k(){s.$el.trigger("toggle:change"),s.emit("local::change toggleChange",s)}return s.attachEvents=function(){var E=o.passiveListener?{passive:!0}:!1;c.on(a.touchEvents.start,y,E),a.on("touchmove",w),a.on("touchend:passive",x),s.$inputEl.on("change",k)},s.detachEvents=function(){var E=o.passiveListener?{passive:!0}:!1;c.off(a.touchEvents.start,y,E),a.off("touchmove",w),a.off("touchend:passive",x),s.$inputEl.off("change",k)},s.useModules(),s.init(),i}var r=t.prototype;return r.toggle=function(){var n=this;n.checked=!n.checked},r.init=function(){var n=this;n.attachEvents()},r.destroy=function(){var n=this;n.$el.trigger("toggle:beforedestroy"),n.emit("local::beforeDestroy toggleBeforeDestroy",n),delete n.$el[0].f7Toggle,n.detachEvents(),$r(n),n=null},t}(rr),Q2=f6,h6={name:"toggle",create:function(){var t=this;t.toggle=Ir({defaultSelector:".toggle",constructor:Q2,app:t,domProp:"f7Toggle"})},static:{Toggle:Q2},on:{tabMounted:function(t){var r=this;T(t).find(".toggle-init").each(function(a){return r.toggle.create({el:a})})},tabBeforeRemove:function(t){T(t).find(".toggle-init").each(function(r){r.f7Toggle&&r.f7Toggle.destroy()})},pageInit:function(t){var r=this;t.$el.find(".toggle-init").each(function(a){return r.toggle.create({el:a})})},pageBeforeRemove:function(t){t.$el.find(".toggle-init").each(function(r){r.f7Toggle&&r.f7Toggle.destroy()})}},vnode:{"toggle-init":{insert:function(t){var r=this,a=t.elm;r.toggle.create({el:a})},destroy:function(t){var r=t.elm;r.f7Toggle&&r.f7Toggle.destroy()}}}};function jp(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m6(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,p1(e,t)}function p1(e,t){return p1=Object.setPrototypeOf||function(a,n){return a.__proto__=n,a},p1(e,t)}var g6=function(e){m6(t,e);function t(a,n){var i;i=e.call(this,n,[a])||this;var s=jp(i),o=Ft(),l={el:null,inputEl:null,dual:!1,step:1,label:!1,min:0,max:100,value:0,draggableBar:!0,vertical:!1,verticalReversed:!1,formatLabel:null,scale:!1,scaleSteps:5,scaleSubSteps:0,formatScaleLabel:null,limitKnobPosition:a.theme==="ios"};s.useModulesParams(l),s.params=se(l,n);var u=s.params.el;if(!u)return s||jp(i);var c=T(u);if(c.length===0)return s||jp(i);if(c[0].f7Range)return c[0].f7Range||jp(i);var d=c.dataset();"step min max value scaleSteps scaleSubSteps".split(" ").forEach(function(oe){typeof n[oe]=="undefined"&&typeof d[oe]!="undefined"&&(s.params[oe]=parseFloat(d[oe]))}),"dual label vertical verticalReversed scale".split(" ").forEach(function(oe){typeof n[oe]=="undefined"&&typeof d[oe]!="undefined"&&(s.params[oe]=d[oe])}),s.params.value||(typeof d.value!="undefined"&&(s.params.value=d.value),typeof d.valueLeft!="undefined"&&typeof d.valueRight!="undefined"&&(s.params.value=[parseFloat(d.valueLeft),parseFloat(d.valueRight)]));var p;s.params.dual||(s.params.inputEl?p=T(s.params.inputEl):c.find('input[type="range"]').length&&(p=c.find('input[type="range"]').eq(0)));var f=s.params,h=f.dual,m=f.step,g=f.label,v=f.min,b=f.max,y=f.value,w=f.vertical,x=f.verticalReversed,k=f.scale,C=f.scaleSteps,E=f.scaleSubSteps,$=f.limitKnobPosition;se(s,{app:a,$el:c,el:c[0],$inputEl:p,inputEl:p?p[0]:void 0,dual:h,step:m,label:g,min:v,max:b,value:y,previousValue:y,vertical:w,verticalReversed:x,scale:k,scaleSteps:C,scaleSubSteps:E,limitKnobPosition:$}),p&&("step min max".split(" ").forEach(function(oe){!n[oe]&&p.attr(oe)&&(s.params[oe]=parseFloat(p.attr(oe)),s[oe]=parseFloat(p.attr(oe)))}),typeof p.val()!="undefined"&&(s.params.value=parseFloat(p.val()),s.value=parseFloat(p.val()))),s.dual&&c.addClass("range-slider-dual"),s.label&&c.addClass("range-slider-label"),s.vertical?(c.addClass("range-slider-vertical"),s.verticalReversed&&c.addClass("range-slider-vertical-reversed")):c.addClass("range-slider-horizontal");var N=T('<div class="range-bar"></div>'),I=T('<div class="range-bar-active"></div>');N.append(I);var S=`
      <div class="range-knob-wrap">
        <div class="range-knob"></div>
        `+(s.label?'<div class="range-knob-label"></div>':"")+`
      </div>
    `,A=[T(S)];s.dual&&A.push(T(S)),c.append(N),A.forEach(function(oe){c.append(oe)});var R=[];s.label&&(R.push(A[0].find(".range-knob-label")),s.dual&&R.push(A[1].find(".range-knob-label")));var O;s.scale&&s.scaleSteps>=1&&(O=T(`
        <div class="range-scale">
          `+s.renderScale()+`
        </div>
      `),c.append(O)),se(s,{knobs:A,labels:R,$barEl:N,$barActiveEl:I,$scaleEl:O}),c[0].f7Range=s;var D,z={},U,j,G,L,V,H,Y,K;function Z(){Y=!0}function le(oe){if(!D&&!(!s.params.draggableBar&&T(oe.target).closest(".range-knob").length===0)){Y=!1,z.x=oe.type==="touchstart"?oe.targetTouches[0].pageX:oe.pageX,z.y=oe.type==="touchstart"?oe.targetTouches[0].pageY:oe.pageY,oe.type==="touchstart"&&(K=oe.targetTouches[0].identifier),D=!0,U=void 0,j=c.offset(),G=j.left,L=j.top;var me;s.vertical?(me=(z.y-L)/s.rangeHeight,s.verticalReversed||(me=1-me)):s.app.rtl?me=(G+s.rangeWidth-z.x)/s.rangeWidth:me=(z.x-G)/s.rangeWidth;var $e=me*(s.max-s.min)+s.min;s.dual?Math.abs(s.value[0]-$e)<Math.abs(s.value[1]-$e)?(H=0,V=s.knobs[0],$e=[$e,s.value[1]]):(H=1,V=s.knobs[1],$e=[s.value[0],$e]):(V=s.knobs[0],$e=me*(s.max-s.min)+s.min),qr(function(){D&&V.addClass("range-knob-active-state")},70),s.on("change",Z),s.setValue($e,!0)}}function de(oe){if(!!D){var me,$e;if(oe.type==="touchmove")for(var Me=0;Me<oe.targetTouches.length;Me+=1)oe.targetTouches[Me].identifier===K&&(me=oe.targetTouches[Me].pageX,$e=oe.targetTouches[Me].pageY);else me=oe.pageX,$e=oe.pageY;if(!(typeof me=="undefined"&&typeof $e=="undefined")){if(typeof U=="undefined"&&!s.vertical&&(U=!!(U||Math.abs($e-z.y)>Math.abs(me-z.x))),U){D=!1;return}oe.preventDefault();var Oe;s.vertical?(Oe=($e-L)/s.rangeHeight,s.verticalReversed||(Oe=1-Oe)):s.app.rtl?Oe=(G+s.rangeWidth-me)/s.rangeWidth:Oe=(me-G)/s.rangeWidth;var he=Oe*(s.max-s.min)+s.min;if(s.dual){var Re,Ne;H===0?(Re=he,Ne=s.value[1],Re>Ne&&(Ne=Re)):(Re=s.value[0],Ne=he,Ne<Re&&(Re=Ne)),he=[Re,Ne]}s.setValue(he,!0)}}}function ie(oe){if(oe.type==="touchend"){for(var me,$e=0;$e<oe.changedTouches.length;$e+=1)oe.changedTouches[$e].identifier===K&&(me=!0);if(!me)return}if(!D){U&&V.removeClass("range-knob-active-state"),D=!1;return}s.off("change",Z),D=!1,V.removeClass("range-knob-active-state"),Y&&s.$inputEl&&!s.dual&&s.$inputEl.trigger("change"),Y=!1,typeof s.previousValue!="undefined"&&(s.dual&&(s.previousValue[0]!==s.value[0]||s.previousValue[1]!==s.value[1])||!s.dual&&s.previousValue!==s.value)&&(s.$el.trigger("range:changed",s.value),s.emit("local::changed rangeChanged",s,s.value))}function ue(){s.calcSize(),s.layout()}var pe,Se,ke;return s.attachEvents=function(){var me=o.passiveListener?{passive:!0}:!1;s.$el.on(a.touchEvents.start,le,me),a.on("touchmove",de),a.on("touchend:passive",ie),a.on("tabShow",ue),a.on("resize",ue),pe=s.$el.parents(".sheet-modal, .actions-modal, .popup, .popover, .login-screen, .dialog, .toast"),pe.on("modal:open",ue),Se=s.$el.parents(".panel"),Se.on("panel:open panel:resize",ue),ke=s.$el.parents(".page").eq(0),ke.on("page:reinit",ue)},s.detachEvents=function(){var me=o.passiveListener?{passive:!0}:!1;s.$el.off(a.touchEvents.start,le,me),a.off("touchmove",de),a.off("touchend:passive",ie),a.off("tabShow",ue),a.off("resize",ue),pe&&pe.off("modal:open",ue),Se&&Se.off("panel:open panel:resize",ue),ke&&ke.off("page:reinit",ue),pe=null,Se=null,ke=null},s.useModules(),s.init(),s||jp(i)}var r=t.prototype;return r.calcSize=function(){var n=this;if(n.vertical){var i=n.$el.outerHeight();if(i===0)return;n.rangeHeight=i,n.knobHeight=n.knobs[0].outerHeight()}else{var s=n.$el.outerWidth();if(s===0)return;n.rangeWidth=s,n.knobWidth=n.knobs[0].outerWidth()}},r.layout=function(){var n=this,i=n.app,s=n.knobWidth,o=n.knobHeight,l=n.rangeWidth,u=n.rangeHeight,c=n.min,d=n.max,p=n.knobs,f=n.$barActiveEl,h=n.value,m=n.label,g=n.labels,v=n.vertical,b=n.verticalReversed,y=n.limitKnobPosition,w=v?o:s,x=v?u:l,k=v?b?"top":"bottom":i.rtl?"right":"left";if(n.dual){var C,E=[(h[0]-c)/(d-c),(h[1]-c)/(d-c)];f.css((C={},C[k]=E[0]*100+"%",C[v?"height":"width"]=(E[1]-E[0])*100+"%",C)),p.forEach(function(S,A){var R=x*E[A];if(y){var O=x*E[A]-w/2;O<0&&(R=w/2),O+w>x&&(R=x-w/2)}S.css(k,R+"px"),m&&g[A].text(n.formatLabel(h[A],g[A][0]))})}else{var $=(h-c)/(d-c);f.css(v?"height":"width",$*100+"%");var N=x*$;if(y){var I=x*$-w/2;I<0&&(N=w/2),I+w>x&&(N=x-w/2)}p[0].css(k,N+"px"),m&&g[0].text(n.formatLabel(h,g[0][0]))}n.dual&&h.indexOf(c)>=0||!n.dual&&h===c?n.$el.addClass("range-slider-min"):n.$el.removeClass("range-slider-min"),n.dual&&h.indexOf(d)>=0||!n.dual&&h===d?n.$el.addClass("range-slider-max"):n.$el.removeClass("range-slider-max")},r.setValue=function(n,i){var s=this,o=s.step,l=s.min,u=s.max,c,d;if(s.dual){d=[s.value[0],s.value[1]];var p=n;if(Array.isArray(p)||(p=[n,n]),n[0]>n[1]&&(p=[p[0],p[0]]),p=p.map(function(h){return Math.max(Math.min(Math.round(h/o)*o,u),l)}),p[0]===s.value[0]&&p[1]===s.value[1])return s;p.forEach(function(h,m){s.value[m]=h}),c=d[0]!==p[0]||d[1]!==p[1],s.layout()}else{d=s.value;var f=Math.max(Math.min(Math.round(n/o)*o,u),l);s.value=f,s.layout(),c=d!==f}return c&&(s.previousValue=d),c&&(s.$el.trigger("range:change",s.value),s.$inputEl&&!s.dual&&(s.$inputEl.val(s.value),i?s.$inputEl.trigger("input"):s.$inputEl.trigger("input change")),i||(s.$el.trigger("range:changed",s.value),s.emit("local::changed rangeChanged",s,s.value)),s.emit("local::change rangeChange",s,s.value)),s},r.getValue=function(){return this.value},r.formatLabel=function(n,i){var s=this;return s.params.formatLabel?s.params.formatLabel.call(s,n,i):n},r.formatScaleLabel=function(n){var i=this;return i.params.formatScaleLabel?i.params.formatScaleLabel.call(i,n):n},r.renderScale=function(){var n=this,i=n.app,s=n.verticalReversed,o=n.vertical,l=o?s?"top":"bottom":i.rtl?"right":"left",u="";return Array.from({length:n.scaleSteps+1}).forEach(function(c,d){var p=(n.max-n.min)/n.scaleSteps,f=n.min+p*d,h=(f-n.min)/(n.max-n.min);u+='<div class="range-scale-step" style="'+l+": "+h*100+'%">'+n.formatScaleLabel(f)+"</div>",n.scaleSubSteps&&n.scaleSubSteps>1&&d<n.scaleSteps&&Array.from({length:n.scaleSubSteps-1}).forEach(function(m,g){var v=p/n.scaleSubSteps,b=f+v*(g+1),y=(b-n.min)/(n.max-n.min);u+='<div class="range-scale-step range-scale-substep" style="'+l+": "+y*100+'%"></div>'})}),u},r.updateScale=function(){var n=this;if(!n.scale||n.scaleSteps<1){n.$scaleEl&&n.$scaleEl.remove(),delete n.$scaleEl;return}n.$scaleEl||(n.$scaleEl=T('<div class="range-scale"></div>'),n.$el.append(n.$scaleEl)),n.$scaleEl.html(n.renderScale())},r.init=function(){var n=this;return n.calcSize(),n.layout(),n.attachEvents(),n},r.destroy=function(){var n=this;n.$el.trigger("range:beforedestroy"),n.emit("local::beforeDestroy rangeBeforeDestroy",n),delete n.$el[0].f7Range,n.detachEvents(),$r(n),n=null},t}(rr),pg=g6,v6={name:"range",create:function(){var t=this;t.range=se(Ir({defaultSelector:".range-slider",constructor:pg,app:t,domProp:"f7Range"}),{getValue:function(a){a===void 0&&(a=".range-slider");var n=t.range.get(a);if(n)return n.getValue()},setValue:function(a,n){a===void 0&&(a=".range-slider");var i=t.range.get(a);if(i)return i.setValue(n)}})},static:{Range:pg},on:{tabMounted:function(t){var r=this;T(t).find(".range-slider-init").each(function(a){return new pg(r,{el:a})})},tabBeforeRemove:function(t){T(t).find(".range-slider-init").each(function(r){r.f7Range&&r.f7Range.destroy()})},pageInit:function(t){var r=this;t.$el.find(".range-slider-init").each(function(a){return new pg(r,{el:a})})},pageBeforeRemove:function(t){t.$el.find(".range-slider-init").each(function(r){r.f7Range&&r.f7Range.destroy()})}},vnode:{"range-slider-init":{insert:function(t){var r=t.elm,a=this;a.range.create({el:r})},destroy:function(t){var r=t.elm;r.f7Range&&r.f7Range.destroy()}}}};function Gp(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b6(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,f1(e,t)}function f1(e,t){return f1=Object.setPrototypeOf||function(a,n){return a.__proto__=n,a},f1(e,t)}var y6=function(e){b6(t,e);function t(a,n){var i;i=e.call(this,n,[a])||this;var s=Gp(i),o={el:null,inputEl:null,valueEl:null,value:0,formatValue:null,step:1,min:0,max:100,watchInput:!0,autorepeat:!1,autorepeatDynamic:!1,wraps:!1,manualInputMode:!1,decimalPoint:4,buttonsEndInputMode:!0};s.useModulesParams(o),s.params=se(o,n),s.params.value<s.params.min&&(s.params.value=s.params.min),s.params.value>s.params.max&&(s.params.value=s.params.max);var l=s.params.el;if(!l)return s||Gp(i);var u=T(l);if(u.length===0)return s||Gp(i);if(u[0].f7Stepper)return u[0].f7Stepper||Gp(i);var c;if(s.params.inputEl?c=T(s.params.inputEl):u.find(".stepper-input-wrap").find("input, textarea").length&&(c=u.find(".stepper-input-wrap").find("input, textarea").eq(0)),c&&c.length){"step min max".split(" ").forEach(function(K){!n[K]&&c.attr(K)&&(s.params[K]=parseFloat(c.attr(K)))});var d=parseInt(s.params.decimalPoint,10);Number.isNaN(d)?s.params.decimalPoint=0:s.params.decimalPoint=d;var p=parseFloat(c.val());typeof n.value=="undefined"&&!Number.isNaN(p)&&(p||p===0)&&(s.params.value=p)}var f;s.params.valueEl?f=T(s.params.valueEl):u.find(".stepper-value").length&&(f=u.find(".stepper-value").eq(0));var h=u.find(".stepper-button-plus"),m=u.find(".stepper-button-minus"),g=s.params,v=g.step,b=g.min,y=g.max,w=g.value,x=g.decimalPoint;se(s,{app:a,$el:u,el:u[0],$buttonPlusEl:h,buttonPlusEl:h[0],$buttonMinusEl:m,buttonMinusEl:m[0],$inputEl:c,inputEl:c?c[0]:void 0,$valueEl:f,valueEl:f?f[0]:void 0,step:v,min:b,max:y,value:w,decimalPoint:x,typeModeChanged:!1}),u[0].f7Stepper=s;var k={},C,E,$,N,I,S=null,A=!1,R=!1;function O(K,Z,le,de,ie,ue){clearTimeout(I),I=setTimeout(function(){K===1&&($=!0,A=!0),clearInterval(N),ue(),N=setInterval(function(){ue()},ie),K<Z&&O(K+1,Z,le,de,ie/2,ue)},K===1?le:de)}function D(K){if(!C&&!R&&(T(K.target).closest(h).length?S="increment":T(K.target).closest(m).length&&(S="decrement"),!!S)){k.x=K.type==="touchstart"?K.targetTouches[0].pageX:K.pageX,k.y=K.type==="touchstart"?K.targetTouches[0].pageY:K.pageY,C=!0,E=void 0;var Z=s.params.autorepeatDynamic?4:1;O(1,Z,500,1e3,300,function(){s[S]()})}}function z(K){if(!!C&&!R){var Z=K.type==="touchmove"?K.targetTouches[0].pageX:K.pageX,le=K.type==="touchmove"?K.targetTouches[0].pageY:K.pageY;typeof E=="undefined"&&!A&&(E=!!(E||Math.abs(le-k.y)>Math.abs(Z-k.x)));var de=Math.pow(Math.pow(Z-k.x,2)+Math.pow(le-k.y,2),.5);(E||de>20)&&(C=!1,clearTimeout(I),clearInterval(N))}}function U(){clearTimeout(I),clearInterval(N),S=null,A=!1,C=!1}function j(){if(R){s.params.buttonsEndInputMode&&(R=!1,s.endTypeMode(!0));return}if($){$=!1;return}s.decrement(!0)}function G(){if(R){s.params.buttonsEndInputMode&&(R=!1,s.endTypeMode(!0));return}if($){$=!1;return}s.increment(!0)}function L(K){!K.target.readOnly&&s.params.manualInputMode&&(R=!0,typeof K.target.selectionStart=="number"&&(K.target.selectionStart=K.target.value.length,K.target.selectionEnd=K.target.value.length))}function V(K){(K.keyCode===13||K.which===13)&&(K.preventDefault(),R=!1,s.endTypeMode())}function H(){R=!1,s.endTypeMode(!0)}function Y(K){if(R){s.typeValue(K.target.value);return}K.detail&&K.detail.sentByF7Stepper||s.setValue(K.target.value,!0)}return s.attachEvents=function(){m.on("click",j),h.on("click",G),s.params.watchInput&&c&&c.length&&(c.on("input",Y),c.on("click",L),c.on("blur",H),c.on("keyup",V)),s.params.autorepeat&&(a.on("touchstart:passive",D),a.on("touchmove:active",z),a.on("touchend:passive",U))},s.detachEvents=function(){m.off("click",j),h.off("click",G),s.params.watchInput&&c&&c.length&&(c.off("input",Y),c.off("click",L),c.off("blur",H),c.off("keyup",V))},s.useModules(),s.init(),s||Gp(i)}var r=t.prototype;return r.minus=function(){return this.decrement()},r.plus=function(){return this.increment()},r.decrement=function(){var n=this;return n.setValue(n.value-n.step,!1,!0)},r.increment=function(){var n=this;return n.setValue(n.value+n.step,!1,!0)},r.setValue=function(n,i,s){var o=this,l=o.step,u=o.min,c=o.max,d=o.value,p=Math.round(n/l)*l;o.params.wraps&&s?(p>c&&(p=u),p<u&&(p=c)):p=Math.max(Math.min(p,c),u),Number.isNaN(p)&&(p=d),o.value=p;var f=d!==p;if(!f&&!i)return o;o.$el.trigger("stepper:change",o.value);var h=o.formatValue(o.value);return o.$inputEl&&o.$inputEl.length&&(o.$inputEl.val(h),o.$inputEl.trigger("input change",{sentByF7Stepper:!0})),o.$valueEl&&o.$valueEl.length&&o.$valueEl.html(h),o.emit("local::change stepperChange",o,o.value),o},r.endTypeMode=function(n){var i=this,s=i.min,o=i.max,l=parseFloat(i.value);if(Number.isNaN(l)&&(l=0),l=Math.max(Math.min(l,o),s),i.value=l,!i.typeModeChanged)return i.$inputEl&&i.$inputEl.length&&!n&&i.$inputEl.blur(),i;i.typeModeChanged=!1,i.$el.trigger("stepper:change",i.value);var u=i.formatValue(i.value);return i.$inputEl&&i.$inputEl.length&&(i.$inputEl.val(u),i.$inputEl.trigger("input change",{sentByF7Stepper:!0}),n||i.$inputEl.blur()),i.$valueEl&&i.$valueEl.length&&i.$valueEl.html(u),i.emit("local::change stepperChange",i,i.value),i},r.typeValue=function(n){var i=this;i.typeModeChanged=!0;var s=String(n);if(s.length===1&&s==="-")return i;if(s.lastIndexOf(".")+1===s.length||s.lastIndexOf(",")+1===s.length){if(s.lastIndexOf(".")!==s.indexOf(".")||s.lastIndexOf(",")!==s.indexOf(","))return s=s.slice(0,-1),i.value=s,i.$inputEl.val(i.value),i}else{var o=parseFloat(s.replace(",","."));if(o===0)return i.value=s.replace(",","."),i.$inputEl.val(i.value),i;if(Number.isNaN(o))return i.value=0,i.$inputEl.val(i.value),i;var l=Math.pow(10,i.params.decimalPoint);return o=Math.round(o*l).toFixed(i.params.decimalPoint+1)/l,i.value=parseFloat(String(o).replace(",",".")),i.$inputEl.val(i.value),i}return i.value=s,i.$inputEl.val(s),i},r.getValue=function(){return this.value},r.formatValue=function(n){var i=this;return i.params.formatValue?i.params.formatValue.call(i,n):n},r.init=function(){var n=this;if(n.attachEvents(),n.$valueEl&&n.$valueEl.length){var i=n.formatValue(n.value);n.$valueEl.html(i)}return n},r.destroy=function(){var n=this;n.$el.trigger("stepper:beforedestroy"),n.emit("local::beforeDestroy stepperBeforeDestroy",n),delete n.$el[0].f7Stepper,n.detachEvents(),$r(n),n=null},t}(rr),J2=y6,w6={name:"stepper",create:function(){var t=this;t.stepper=se(Ir({defaultSelector:".stepper",constructor:J2,app:t,domProp:"f7Stepper"}),{getValue:function(a){a===void 0&&(a=".stepper");var n=t.stepper.get(a);if(n)return n.getValue()},setValue:function(a,n){a===void 0&&(a=".stepper");var i=t.stepper.get(a);if(i)return i.setValue(n)}})},static:{Stepper:J2},on:{tabMounted:function(t){var r=this;T(t).find(".stepper-init").each(function(a){var n=T(a).dataset();r.stepper.create(se({el:a},n||{}))})},tabBeforeRemove:function(t){T(t).find(".stepper-init").each(function(r){r.f7Stepper&&r.f7Stepper.destroy()})},pageInit:function(t){var r=this;t.$el.find(".stepper-init").each(function(a){var n=T(a).dataset();r.stepper.create(se({el:a},n||{}))})},pageBeforeRemove:function(t){t.$el.find(".stepper-init").each(function(r){r.f7Stepper&&r.f7Stepper.destroy()})}},vnode:{"stepper-init":{insert:function(t){var r=this,a=t.elm,n=T(a).dataset();r.stepper.create(se({el:a},n||{}))},destroy:function(t){var r=t.elm;r.f7Stepper&&r.f7Stepper.destroy()}}}};function eN(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function x6(e,t,r){return t&&eN(e.prototype,t),r&&eN(e,r),e}function qp(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k6(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,h1(e,t)}function h1(e,t){return h1=Object.setPrototypeOf||function(a,n){return a.__proto__=n,a},h1(e,t)}var E6=function(e){k6(t,e);function t(a,n){var i;n===void 0&&(n={}),i=e.call(this,n,[a])||this;var s=qp(i),o=se({on:{}},a.params.smartSelect);typeof o.searchbarDisableButton=="undefined"&&(o.searchbarDisableButton=a.theme!=="aurora"),s.useModulesParams(o),s.params=se({},o,n),s.app=a;var l=T(s.params.el).eq(0);if(l.length===0)return s||qp(i);if(l[0].f7SmartSelect)return l[0].f7SmartSelect||qp(i);var u=l.find("select").eq(0);if(u.length===0)return s||qp(i);var c;s.params.setValueText&&(c=T(s.params.valueEl),c.length===0&&(c=l.find(".item-after")),c.length===0&&(c=T('<div class="item-after"></div>'),c.insertAfter(l.find(".item-title"))));var d=n.url;d||(l.attr("href")&&l.attr("href")!=="#"?d=l.attr("href"):u.attr("name")&&(d=u.attr("name").toLowerCase()+"-select/")),d||(d=s.params.url);var p=u[0].multiple,f=p?"checkbox":"radio",h=Db();se(s,{$el:l,el:l[0],$selectEl:u,selectEl:u[0],$valueEl:c,valueEl:c&&c[0],url:d,multiple:p,inputType:f,id:h,inputName:f+"-"+h,selectName:u.attr("name"),maxLength:u.attr("maxlength")||n.maxLength}),l[0].f7SmartSelect=s;function m(){s.open()}function g(){var b=s.$selectEl.val();s.$el.trigger("smartselect:change",b),s.emit("local::change smartSelectChange",s,b),s.vl&&s.vl.clearCache(),s.setValueText()}s.attachEvents=function(){l.on("click",m),l.on("change","select",g)},s.detachEvents=function(){l.off("click",m),l.off("change","select",g)};function v(){var b,y,w=this,x=w.value,k=[],C;if(w.type==="checkbox"){for(var E=0;E<s.selectEl.options.length;E+=1)b=s.selectEl.options[E],b.value===x&&(b.selected=w.checked),b.selected&&(C=b.dataset?b.dataset.displayAs:T(b).data("display-value-as"),y=C&&typeof C!="undefined"?C:b.textContent,k.push(y.trim()));s.maxLength&&s.checkMaxLength()}else b=s.$selectEl.find('option[value="'+x+'"]')[0],b||(b=s.$selectEl.find("option").filter(function($){return $.value===x})[0]),C=b.dataset?b.dataset.displayAs:T(b).data("display-as"),y=C&&typeof C!="undefined"?C:b.textContent,k=[y],s.selectEl.value=x;s.$selectEl.trigger("change"),s.params.setValueText&&s.$valueEl.text(s.formatValueText(k)),s.params.closeOnSelect&&s.inputType==="radio"&&s.close()}return s.attachInputsEvents=function(){s.$containerEl.on("change",'input[type="checkbox"], input[type="radio"]',v)},s.detachInputsEvents=function(){s.$containerEl.off("change",'input[type="checkbox"], input[type="radio"]',v)},s.useModules(),s.init(),s||qp(i)}var r=t.prototype;return r.setValue=function(n){var i=this,s=n,o=[],l,u,c;if(i.multiple){Array.isArray(s)||(s=[s]);for(var d=0;d<i.selectEl.options.length;d+=1)l=i.selectEl.options[d],s.indexOf(l.value)>=0?l.selected=!0:l.selected=!1,l.selected&&(u=l.dataset?l.dataset.displayAs:T(l).data("display-value-as"),c=u&&typeof u!="undefined"?u:l.textContent,o.push(c.trim()))}else l=i.$selectEl.find('option[value="'+s+'"]')[0],l&&(u=l.dataset?l.dataset.displayAs:T(l).data("display-as"),c=u&&typeof u!="undefined"?u:l.textContent,o=[c]),i.selectEl.value=s;return i.params.setValueText&&i.$valueEl.text(i.formatValueText(o)),i.$selectEl.trigger("change"),i},r.unsetValue=function(){var n=this;n.params.setValueText&&n.$valueEl.text(n.formatValueText([])),n.$selectEl.find("option").each(function(i){i.selected=!1,i.checked=!1}),n.$selectEl[0].value=null,n.$containerEl&&n.$containerEl.find('input[name="'+n.inputName+'"][type="checkbox"], input[name="'+n.inputName+'"][type="radio"]').prop("checked",!1),n.$selectEl.trigger("change")},r.getValue=function(){var n=this;return n.$selectEl.val()},r.checkMaxLength=function(){var n=this,i=n.$containerEl;n.selectEl.selectedOptions.length>=n.maxLength?i.find('input[type="checkbox"]').each(function(s){s.checked?T(s).parents("li").removeClass("disabled"):T(s).parents("li").addClass("disabled")}):i.find(".disabled").removeClass("disabled")},r.formatValueText=function(n){var i=this,s;return i.params.formatValueText?s=i.params.formatValueText.call(i,n,i):s=n.join(", "),s},r.setValueText=function(n){var i=this,s=[];typeof n!="undefined"?Array.isArray(n)?s=n:s=[n]:i.$selectEl.find("option").each(function(o){var l=T(o);if(o.selected){var u=o.dataset?o.dataset.displayAs:l.data("display-value-as");u&&typeof u!="undefined"?s.push(u):s.push(o.textContent.trim())}}),i.params.setValueText&&i.$valueEl.text(i.formatValueText(s))},r.getItemsData=function(){var n=this,i=n.app.theme,s=[],o;return n.$selectEl.find("option").each(function(l){var u=T(l),c=u.dataset(),d=c.optionImage||n.params.optionImage,p=c.optionIcon||n.params.optionIcon,f=i==="ios"&&(c.optionIconIos||n.params.optionIconIos),h=i==="md"&&(c.optionIconMd||n.params.optionIconMd),m=i==="aurora"&&(c.optionIconAurora||n.params.optionIconAurora),g=d||p||f||h||m,v=c.optionColor,b=c.optionClass||"";u[0].disabled&&(b+=" disabled");var y=u.parent("optgroup")[0],w=y&&y.label,x=!1;y&&y!==o&&(x=!0,o=y,s.push({groupLabel:w,isLabel:x})),s.push({value:u[0].value,text:u[0].textContent.trim(),selected:u[0].selected,groupEl:y,groupLabel:w,image:d,icon:p,iconIos:f,iconMd:h,iconAurora:m,color:v,className:b,disabled:u[0].disabled,id:n.id,hasMedia:g,checkbox:n.inputType==="checkbox",radio:n.inputType==="radio",inputName:n.inputName,inputType:n.inputType})}),n.items=s,s},r.renderSearchbar=function(){var n=this;return n.params.renderSearchbar?n.params.renderSearchbar.call(n):F("form",{class:"searchbar"},F("div",{class:"searchbar-inner"},F("div",{class:"searchbar-input-wrap"},F("input",{type:"search",spellcheck:n.params.searchbarSpellcheck||"false",placeholder:n.params.searchbarPlaceholder}),F("i",{class:"searchbar-icon"}),F("span",{class:"input-clear-button"})),n.params.searchbarDisableButton&&F("span",{class:"searchbar-disable-button"},n.params.searchbarDisableText)))},r.renderItem=function(n,i){var s=this;if(s.params.renderItem)return s.params.renderItem.call(s,n,i);function o(w){return w===void 0&&(w=""),w.indexOf(":")>=0?w.split(":")[1]:""}function l(w){if(w===void 0&&(w=""),w.indexOf(":")>=0){var x=w.split(":")[0];return x==="f7"&&(x="f7-icons"),x==="material"&&(x="material-icons"),x}return w}var u;if(n.isLabel)u='<li class="item-divider">'+n.groupLabel+"</li>";else{var c=n.selected,d;if(s.params.virtualList){var p=s.getValue();c=s.multiple?p.indexOf(n.value)>=0:p===n.value,s.multiple&&(d=s.multiple&&!c&&p.length===parseInt(s.maxLength,10))}var f=n.icon,h=n.iconIos,m=n.iconMd,g=n.iconAurora,v=f||h||m||g,b=o(f||h||m||g||""),y=l(f||h||m||g||"");u=F("li",{class:""+(n.className||"")+(d?" disabled":"")},F("label",{class:"item-"+n.inputType+" item-content"},F("input",{type:n.inputType,name:n.inputName,value:n.value,_checked:c}),F("i",{class:"icon icon-"+n.inputType}),n.hasMedia&&F("div",{class:"item-media"},v&&F("i",{class:"icon "+y},b),n.image&&F("img",{src:n.image})),F("div",{class:"item-inner"},F("div",{class:"item-title"+(n.color?" text-color-"+n.color:"")},n.text))))}return u},r.renderItems=function(){var n=this;if(n.params.renderItems)return n.params.renderItems.call(n,n.items);var i=`
      `+n.items.map(function(s,o){return""+n.renderItem(s,o)}).join("")+`
    `;return i},r.renderPage=function(){var n=this;if(n.params.renderPage)return n.params.renderPage.call(n,n.items);var i=n.params.pageTitle;if(typeof i=="undefined"){var s=n.$el.find(".item-title");i=s.length?s.text().trim():""}var o=n.params.cssClass;return F("div",{class:"page smart-select-page "+o,"data-name":"smart-select-page","data-select-name":n.selectName},F("div",{class:"navbar "+(n.params.navbarColorTheme?"color-"+n.params.navbarColorTheme:"")},F("div",{class:"navbar-bg"}),F("div",{class:"navbar-inner sliding "+(n.params.navbarColorTheme?"color-"+n.params.navbarColorTheme:"")},F("div",{class:"left"},F("a",{class:"link back"},F("i",{class:"icon icon-back"}),F("span",{class:"if-not-md"},n.params.pageBackLinkText))),i&&F("div",{class:"title"},i),n.params.searchbar&&F("div",{class:"subnavbar"},n.renderSearchbar()))),n.params.searchbar&&F("div",{class:"searchbar-backdrop"}),F("div",{class:"page-content"},F("div",{class:"list smart-select-list-"+n.id+" "+(n.params.virtualList?" virtual-list":"")+" "+(n.params.formColorTheme?"color-"+n.params.formColorTheme:"")},F("ul",null,!n.params.virtualList&&n.renderItems(n.items)))))},r.renderPopup=function(){var n=this;if(n.params.renderPopup)return n.params.renderPopup.call(n,n.items);var i=n.params.pageTitle;if(typeof i=="undefined"){var s=n.$el.find(".item-title");i=s.length?s.text().trim():""}var o=n.params.cssClass||"";return F("div",{class:"popup smart-select-popup "+o+" "+(n.params.popupTabletFullscreen?"popup-tablet-fullscreen":""),"data-select-name":n.selectName},F("div",{class:"view"},F("div",{class:"page smart-select-page "+(n.params.searchbar?"page-with-subnavbar":""),"data-name":"smart-select-page"},F("div",{class:"navbar "+(n.params.navbarColorTheme?"color-"+n.params.navbarColorTheme:"")},F("div",{class:"navbar-bg"}),F("div",{class:"navbar-inner sliding"},i&&F("div",{class:"title"},i),F("div",{class:"right"},F("a",{class:"link popup-close","data-popup":".smart-select-popup[data-select-name='"+n.selectName+"']"},n.params.popupCloseLinkText)),n.params.searchbar&&F("div",{class:"subnavbar"},n.renderSearchbar()))),n.params.searchbar&&F("div",{class:"searchbar-backdrop"}),F("div",{class:"page-content"},F("div",{class:"list smart-select-list-"+n.id+" "+(n.params.virtualList?" virtual-list":"")+" "+(n.params.formColorTheme?"color-"+n.params.formColorTheme:"")},F("ul",null,!n.params.virtualList&&n.renderItems(n.items)))))))},r.renderSheet=function(){var n=this;if(n.params.renderSheet)return n.params.renderSheet.call(n,n.items);var i=n.params.cssClass;return F("div",{class:"sheet-modal smart-select-sheet "+i,"data-select-name":n.selectName},F("div",{class:"toolbar toolbar-top "+(n.params.toolbarColorTheme?"color-"+n.params.toolbarColorTheme:"")},F("div",{class:"toolbar-inner"},F("div",{class:"left"}),F("div",{class:"right"},F("a",{class:"link sheet-close"},n.params.sheetCloseLinkText)))),F("div",{class:"sheet-modal-inner"},F("div",{class:"page-content"},F("div",{class:"list smart-select-list-"+n.id+" "+(n.params.virtualList?" virtual-list":"")+" "+(n.params.formColorTheme?"color-"+n.params.formColorTheme:"")},F("ul",null,!n.params.virtualList&&n.renderItems(n.items))))))},r.renderPopover=function(){var n=this;if(n.params.renderPopover)return n.params.renderPopover.call(n,n.items);var i=n.params.cssClass;return F("div",{class:"popover smart-select-popover "+i,"data-select-name":n.selectName},F("div",{class:"popover-inner"},F("div",{class:"list smart-select-list-"+n.id+" "+(n.params.virtualList?" virtual-list":"")+" "+(n.params.formColorTheme?"color-"+n.params.formColorTheme:"")},F("ul",null,!n.params.virtualList&&n.renderItems(n.items)))))},r.scrollToSelectedItem=function(){var n=this,i=n.params,s=n.$containerEl;if(!n.opened)return n;if(i.virtualList){var o;n.vl.items.forEach(function(c,d){typeof o=="undefined"&&c.selected&&(o=d)}),typeof o!="undefined"&&n.vl.scrollToItem(o)}else{var l=s.find("input:checked").parents("li");if(!l.length)return n;var u=s.find(".page-content, .popover-inner");if(!u.length)return n;u.scrollTop(l.offset().top-u.offset().top-parseInt(u.css("padding-top"),10))}return n},r.onOpen=function(n,i){var s=this,o=s.app,l=T(i);if(s.$containerEl=l,s.openedIn=n,s.opened=!0,s.params.virtualList&&(s.vl=o.virtualList.create({el:l.find(".virtual-list"),items:s.items,renderItem:s.renderItem.bind(s),height:s.params.virtualListHeight,searchByItem:function(f,h){return!!(h.text&&h.text.toLowerCase().indexOf(f.trim().toLowerCase())>=0)}})),s.params.scrollToSelectedItem&&s.scrollToSelectedItem(),s.params.searchbar){var u=l.find(".searchbar");if(n==="page"&&o.theme==="ios"&&(u=T(o.navbar.getElByPage(l)).find(".searchbar")),s.params.appendSearchbarNotFound&&(n==="page"||n==="popup")){var c=null;typeof s.params.appendSearchbarNotFound=="string"?c=T('<div class="block searchbar-not-found">'+s.params.appendSearchbarNotFound+"</div>"):typeof s.params.appendSearchbarNotFound=="boolean"?c=T('<div class="block searchbar-not-found">Nothing found</div>'):c=s.params.appendSearchbarNotFound,c&&l.find(".page-content").append(c[0])}var d=se({el:u,backdropEl:l.find(".searchbar-backdrop"),searchContainer:".smart-select-list-"+s.id,searchIn:".item-title"},typeof s.params.searchbar=="object"?s.params.searchbar:{});s.searchbar=o.searchbar.create(d)}s.maxLength&&s.checkMaxLength(),s.params.closeOnSelect&&s.$containerEl.find('input[type="radio"][name="'+s.inputName+'"]:checked').parents("label").once("click",function(){s.close()}),s.attachInputsEvents(),s.$el.trigger("smartselect:open"),s.emit("local::open smartSelectOpen",s)},r.onOpened=function(){var n=this;n.$el.trigger("smartselect:opened"),n.emit("local::opened smartSelectOpened",n)},r.onClose=function(){var n=this;n.destroyed||(n.vl&&n.vl.destroy&&(n.vl.destroy(),n.vl=null,delete n.vl),n.searchbar&&n.searchbar.destroy&&(n.searchbar.destroy(),n.searchbar=null,delete n.searchbar),n.detachInputsEvents(),n.$el.trigger("smartselect:close"),n.emit("local::close smartSelectClose",n))},r.onClosed=function(){var n=this;n.destroyed||(n.opened=!1,n.$containerEl=null,delete n.$containerEl,n.$el.trigger("smartselect:closed"),n.emit("local::closed smartSelectClosed",n))},r.openPage=function(){var n=this;if(n.opened)return n;n.getItemsData();var i=n.renderPage(n.items);return n.view.router.navigate({url:n.url,route:{content:i,path:n.url,on:{pageBeforeIn:function(o,l){n.onOpen("page",l.el)},pageAfterIn:function(o,l){n.onOpened("page",l.el)},pageBeforeOut:function(o,l){n.onClose("page",l.el)},pageAfterOut:function(o,l){n.onClosed("page",l.el)}}}}),n},r.openPopup=function(){var n=this;if(n.opened)return n;n.getItemsData();var i=n.renderPopup(n.items),s={content:i,push:n.params.popupPush,swipeToClose:n.params.popupSwipeToClose,on:{popupOpen:function(l){n.onOpen("popup",l.el)},popupOpened:function(l){n.onOpened("popup",l.el)},popupClose:function(l){n.onClose("popup",l.el)},popupClosed:function(l){n.onClosed("popup",l.el)}}};return n.params.routableModals&&n.view?n.view.router.navigate({url:n.url,route:{path:n.url,popup:s}}):n.modal=n.app.popup.create(s).open(),n},r.openSheet=function(){var n=this;if(n.opened)return n;n.getItemsData();var i=n.renderSheet(n.items),s={content:i,backdrop:n.params.sheetBackdrop,scrollToEl:n.$el,closeByOutsideClick:!0,push:n.params.sheetPush,swipeToClose:n.params.sheetSwipeToClose,on:{sheetOpen:function(l){n.onOpen("sheet",l.el)},sheetOpened:function(l){n.onOpened("sheet",l.el)},sheetClose:function(l){n.onClose("sheet",l.el)},sheetClosed:function(l){n.onClosed("sheet",l.el)}}};return n.params.routableModals&&n.view?n.view.router.navigate({url:n.url,route:{path:n.url,sheet:s}}):n.modal=n.app.sheet.create(s).open(),n},r.openPopover=function(){var n=this;if(n.opened)return n;n.getItemsData();var i=n.renderPopover(n.items),s={content:i,targetEl:n.$el,on:{popoverOpen:function(l){n.onOpen("popover",l.el)},popoverOpened:function(l){n.onOpened("popover",l.el)},popoverClose:function(l){n.onClose("popover",l.el)},popoverClosed:function(l){n.onClosed("popover",l.el)}}};return n.params.routableModals&&n.view?n.view.router.navigate({url:n.url,route:{path:n.url,popover:s}}):n.modal=n.app.popover.create(s).open(),n},r.open=function(n){var i=this;if(i.opened)return i;var s=!1;function o(){s=!0}if(i.$el&&i.$el.trigger("smartselect:beforeopen",{prevent:o}),i.emit("local::beforeOpen smartSelectBeforeOpen",i,o),s)return i;var l=n||i.params.openIn;return i["open"+l.split("").map(function(u,c){return c===0?u.toUpperCase():u}).join("")](),i},r.close=function(){var n=this;return n.opened&&(n.params.routableModals&&n.view||n.openedIn==="page"?n.view.router.back():(n.modal.once("modalClosed",function(){qr(function(){n.destroyed||(n.modal.destroy(),delete n.modal)})}),n.modal.close())),n},r.init=function(){var n=this;n.attachEvents(),n.setValueText()},r.destroy=function(){var n=this;n.emit("local::beforeDestroy smartSelectBeforeDestroy",n),n.$el.trigger("smartselect:beforedestroy"),n.detachEvents(),delete n.$el[0].f7SmartSelect,$r(n),n.destroyed=!0},x6(t,[{key:"view",get:function(){var n=this.params,i=this.$el,s;if(n.view&&(s=n.view),s||(s=i.parents(".view").length&&i.parents(".view")[0].f7View),!s&&n.openIn==="page")throw Error("Smart Select requires initialized View");return s}}]),t}(rr),tN=E6,C6={name:"smartSelect",params:{smartSelect:{el:void 0,valueEl:void 0,setValueText:!0,formatValueText:null,openIn:"page",popupPush:!1,popupSwipeToClose:void 0,sheetPush:!1,sheetSwipeToClose:void 0,sheetBackdrop:!1,pageTitle:void 0,pageBackLinkText:"Back",popupCloseLinkText:"Close",popupTabletFullscreen:!1,sheetCloseLinkText:"Done",searchbar:!1,searchbarPlaceholder:"Search",searchbarDisableText:"Cancel",searchbarDisableButton:void 0,searchbarSpellcheck:!1,closeOnSelect:!1,virtualList:!1,virtualListHeight:void 0,scrollToSelectedItem:!1,formColorTheme:void 0,navbarColorTheme:void 0,routableModals:!1,url:"select/",cssClass:"",renderPage:void 0,renderPopup:void 0,renderSheet:void 0,renderPopover:void 0,renderItems:void 0,renderItem:void 0,renderSearchbar:void 0}},static:{SmartSelect:tN},create:function(){var t=this;t.smartSelect=se(Ir({defaultSelector:".smart-select",constructor:tN,app:t,domProp:"f7SmartSelect"}),{open:function(a){var n=t.smartSelect.get(a);if(n&&n.open)return n.open()},close:function(a){var n=t.smartSelect.get(a);if(n&&n.close)return n.close()}})},on:{tabMounted:function(t){var r=this;T(t).find(".smart-select-init").each(function(a){r.smartSelect.create(se({el:a},T(a).dataset()))})},tabBeforeRemove:function(t){T(t).find(".smart-select-init").each(function(r){r.f7SmartSelect&&r.f7SmartSelect.destroy&&r.f7SmartSelect.destroy()})},pageInit:function(t){var r=this;t.$el.find(".smart-select-init").each(function(a){r.smartSelect.create(se({el:a},T(a).dataset()))})},pageBeforeRemove:function(t){t.$el.find(".smart-select-init").each(function(r){r.f7SmartSelect&&r.f7SmartSelect.destroy&&r.f7SmartSelect.destroy()})}},clicks:{".smart-select":function(t,r){var a=this;if(!t[0].f7SmartSelect){var n=a.smartSelect.create(se({el:t},r));n.open()}}},vnode:{"smart-select-init":{insert:function(t){var r=this,a=t.elm;r.smartSelect.create(se({el:a},T(a).dataset()))},destroy:function(t){var r=t.elm;r.f7SmartSelect&&r.f7SmartSelect.destroy&&r.f7SmartSelect.destroy()}}}};function rN(e,t){var r=t.css("min-"+e);return r==="auto"||r==="none"?r=0:r.indexOf("px")>=0?r=parseFloat(r):r.indexOf("%")>=0&&(r=t.parent()[0][e==="height"?"offsetHeight":"offsetWidth"]*parseFloat(r)/100),r}function nN(e,t){var r=t.css("max-"+e);return r==="auto"||r==="none"?r=null:r.indexOf("px")>=0?r=parseFloat(r):r.indexOf("%")>=0&&(r=t.parent()[0][e==="height"?"offsetHeight":"offsetWidth"]*parseFloat(r)/100),r}var S6={init:function(){var t=this,r,a,n,i,s,o,l,u,c,d,p,f,h,m,g,v,b;function y(C){r||a||(s=T(C.target).closest(".resize-handler"),n=C.type==="touchstart"?C.targetTouches[0].pageX:C.pageX,i=C.type==="touchstart"?C.targetTouches[0].pageY:C.pageY,r=!0,o=void 0,l=void 0,b=void 0)}function w(C){if(!!r){var E=s.parent(".row").length===1,$=E?"height":"width",N=E?"offsetHeight":"offsetWidth";a||(o=s.parent(E?".row":".col"),o.length&&(!o.hasClass("resizable")||o.hasClass("resizable-fixed"))&&(o=o.prevAll(".resizable:not(.resizable-fixed)").eq(0)),l=o.next(E?".row":".col"),l.length&&(!l.hasClass("resizable")||l.hasClass("resizable-fixed"))&&(l=l.nextAll(".resizable:not(.resizable-fixed)").eq(0)),o.length&&(u=o[0][N],c=rN($,o),d=nN($,o),m=o.parent()[0][N],g=o.parent().children(E?".row":'[class*="col-"], .col').length,v=parseFloat(o.css(E?"--f7-grid-row-gap":"--f7-grid-gap"))),l.length&&(p=l[0][N],f=rN($,l),h=nN($,l),o.length||(m=l.parent()[0][N],g=l.parent().children(E?".row":'[class*="col-"], .col').length,v=parseFloat(l.css(E?"--f7-grid-row-gap":"--f7-grid-gap"))))),a=!0;var I=C.type==="touchmove"?C.targetTouches[0].pageX:C.pageX,S=C.type==="touchmove"?C.targetTouches[0].pageY:C.pageY;if(typeof b=="undefined"&&!E&&(b=!!(b||Math.abs(S-i)>Math.abs(I-n))),b){r=!1,a=!1;return}var A=o.hasClass("resizable-absolute")||l.hasClass("resizable-absolute"),R=!E||E&&!A;if(R&&!l.length||!o.length){r=!1,a=!1;return}C.preventDefault();var O=E?S-i:I-n,D,z;if(o.length&&(D=u+O,D<c&&(D=c,O=D-u),d&&D>d&&(D=d,O=D-u)),l.length&&R&&(z=p-O,z<f&&(z=f,O=p-z,D=u+O),h&&z>h&&(z=h,O=p-z,D=u+O)),A){o[0].style[$]=D+"px",R&&(l[0].style[$]=z+"px"),o.trigger("grid:resize"),l.trigger("grid:resize"),t.emit("gridResize",o[0]),t.emit("gridResize",l[0]);return}var U=(g-1)*v/g,j=E?g-1+" * var(--f7-grid-row-gap) / "+g:"(var(--f7-cols-per-row) - 1) * var(--f7-grid-gap) / var(--f7-cols-per-row)",G=D+U,L=z+U;o[0].style[$]="calc("+G/m*100+"% - "+j+")",l[0].style[$]="calc("+L/m*100+"% - "+j+")",o.trigger("grid:resize"),l.trigger("grid:resize"),t.emit("gridResize",o[0]),t.emit("gridResize",l[0])}}function x(){!r||(a||(r=!1),r=!1,a=!1)}var k=nt();T(k).on(t.touchEvents.start,".col > .resize-handler, .row > .resize-handler",y),t.on("touchmove",w),t.on("touchend",x)}},$6={name:"grid",create:function(){var t=this;se(t,{grid:{init:S6.init.bind(t)}})},on:{init:function(){var t=this;t.grid.init()}}};function aN(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function I6(e,t,r){return t&&aN(e.prototype,t),r&&aN(e,r),e}function Sw(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T6(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,m1(e,t)}function m1(e,t){return m1=Object.setPrototypeOf||function(a,n){return a.__proto__=n,a},m1(e,t)}var N6=function(e){T6(t,e);function t(a,n){var i;n===void 0&&(n={}),i=e.call(this,n,[a])||this;var s=Sw(i);s.params=se({},a.params.calendar,n);var o;if(s.params.containerEl&&(o=T(s.params.containerEl),o.length===0))return s||Sw(i);var l;s.params.inputEl&&(l=T(s.params.inputEl));var u=s.params.direction==="horizontal",c=1;u&&(c=a.rtl?-1:1),se(s,{app:a,$containerEl:o,containerEl:o&&o[0],inline:o&&o.length>0,$inputEl:l,inputEl:l&&l[0],initialized:!1,opened:!1,url:s.params.url,isHorizontal:u,inverter:c,animating:!1,allowTouchMove:!0,hasTimePicker:s.params.timePicker&&!s.params.rangePicker&&!s.params.multiple}),s.dayFormatter=function(N){var I=new Intl.DateTimeFormat(s.params.locale,{day:"numeric"});return I.format(N).replace(/日/,"")},s.monthFormatter=function(N){var I=new Intl.DateTimeFormat(s.params.locale,{month:"long"});return I.format(N)},s.yearFormatter=function(N){var I=new Intl.DateTimeFormat(s.params.locale,{year:"numeric"});return I.format(N)},s.timeSelectorFormatter=function(N){var I=new Intl.DateTimeFormat(s.params.locale,s.params.timePickerFormat);return I.format(N)};var d=s.timeSelectorFormatter(new Date).toLowerCase();s.is12HoursFormat=d.indexOf("pm")>=0||d.indexOf("am")>=0;var p=s.params,f=p.monthNames,h=p.monthNamesShort,m=p.dayNames,g=p.dayNamesShort,v=s.getIntlNames(),b=v.monthNamesIntl,y=v.monthNamesShortIntl,w=v.dayNamesIntl,x=v.dayNamesShortIntl;f==="auto"&&(f=b),h==="auto"&&(h=y),m==="auto"&&(m=w),g==="auto"&&(g=x),se(s,{monthNames:f,monthNamesShort:h,dayNames:m,dayNamesShort:g});function k(){s.open()}function C(N){N.preventDefault()}function E(){s.setValue([]),s.opened&&s.update()}function $(N){var I=T(N.target);s.destroyed||!s.params||s.isPopover()||!s.opened||s.closing||I.closest('[class*="backdrop"]').length||(l&&l.length>0?I[0]!==l[0]&&I.closest(".sheet-modal, .calendar-modal").length===0&&s.close():T(N.target).closest(".sheet-modal, .calendar-modal").length===0&&s.close())}return se(s,{attachInputEvents:function(){s.$inputEl.on("click",k),s.$inputEl.on("input:clear",E),s.params.inputReadOnly&&(s.$inputEl.on("focus mousedown",C),s.$inputEl[0]&&(s.$inputEl[0].f7ValidateReadonly=!0))},detachInputEvents:function(){s.$inputEl.off("click",k),s.$inputEl.off("input:clear",E),s.params.inputReadOnly&&(s.$inputEl.off("focus mousedown",C),s.$inputEl[0]&&delete s.$inputEl[0].f7ValidateReadonly)},attachHtmlEvents:function(){a.on("click",$)},detachHtmlEvents:function(){a.off("click",$)}}),s.attachCalendarEvents=function(){var I=!0,S,A,R,O,D,z,U,j,G,L,V,H,Y,K,Z=s.$el,le=s.$wrapperEl;function de(ve){A||S||(S=!0,R=ve.type==="touchstart"?ve.targetTouches[0].pageX:ve.pageX,D=R,O=ve.type==="touchstart"?ve.targetTouches[0].pageY:ve.pageY,z=O,U=new Date().getTime(),H=0,I=!0,K=void 0,G=s.monthsTranslate)}function ie(ve){if(!!S){var Ge=s.isHorizontal;if(D=ve.type==="touchmove"?ve.targetTouches[0].pageX:ve.pageX,z=ve.type==="touchmove"?ve.targetTouches[0].pageY:ve.pageY,typeof K=="undefined"&&(K=!!(K||Math.abs(z-O)>Math.abs(D-R))),Ge&&K||!s.allowTouchMove){S=!1;return}if(ve.preventDefault(),s.animating){S=!1;return}I=!1,A||(A=!0,L=le[0].offsetWidth,V=le[0].offsetHeight,le.transition(0)),Y=Ge?D-R:z-O,H=Y/(Ge?L:V),G=(s.monthsTranslate*s.inverter+H)*100,le.transform("translate3d("+(Ge?G:0)+"%, "+(Ge?0:G)+"%, 0)")}}function ue(){if(!S||!A){S=!1,A=!1;return}S=!1,A=!1,j=new Date().getTime(),j-U<300?Math.abs(Y)<10?s.resetMonth():Y>=10?a.rtl?s.nextMonth():s.prevMonth():a.rtl?s.prevMonth():s.nextMonth():H<=-.5?a.rtl?s.prevMonth():s.nextMonth():H>=.5?a.rtl?s.nextMonth():s.prevMonth():s.resetMonth(),setTimeout(function(){I=!0},100)}function pe(ve){if(!!I){var Ge=T(ve.target).parents(".calendar-day");if(Ge.length===0&&T(ve.target).hasClass("calendar-day")&&(Ge=T(ve.target)),Ge.length!==0&&!Ge.hasClass("calendar-day-disabled")){s.params.rangePicker||(Ge.hasClass("calendar-day-next")&&s.nextMonth(),Ge.hasClass("calendar-day-prev")&&s.prevMonth());var Ze=parseInt(Ge.attr("data-year"),10),qe=parseInt(Ge.attr("data-month"),10),Ae=parseInt(Ge.attr("data-day"),10);if(s.emit("local::dayClick calendarDayClick",s,Ge[0],Ze,qe,Ae),!Ge.hasClass("calendar-day-selected")||s.params.multiple||s.params.rangePicker){var rt=new Date(Ze,qe,Ae,0,0,0);s.hasTimePicker&&(s.value&&s.value[0]?rt.setHours(s.value[0].getHours(),s.value[0].getMinutes()):rt.setHours(new Date().getHours(),new Date().getMinutes())),s.addValue(rt)}s.params.closeOnSelect&&(s.params.rangePicker&&s.value.length===2||!s.params.rangePicker)&&s.close()}}}function Se(){s.nextMonth()}function ke(){s.prevMonth()}function oe(){s.nextYear()}function me(){s.prevYear()}function $e(){Z.append(s.renderMonthPicker())}function Me(){var ve=T(this);if(ve.hasClass("calendar-month-picker-item-current")){Z.find(".calendar-month-picker").remove();return}Z.find(".calendar-month-picker-item-current").add(ve).toggleClass("calendar-month-picker-item-current");var Ge=ve.index(),Ze=parseInt(s.$el.find(".calendar-month-current").attr("data-locale-month"),10),qe=s.currentMonth,Ae=Ze-qe,rt=Ge-Ae;s.setYearMonth(s.currentYear,rt,0),setTimeout(function(){Z.find(".calendar-month-picker").remove()},200)}function Oe(){Z.append(s.renderYearPicker());var ve=Z.find(".calendar-year-picker-item-current"),Ge=Z.find(".calendar-year-picker");!ve||!ve.length||Ge.scrollTop(ve[0].offsetTop-Ge[0].offsetHeight/2+ve[0].offsetHeight/2)}function he(){var ve=T(this);if(ve.hasClass("calendar-year-picker-item-current")){Z.find(".calendar-year-picker").remove();return}Z.find(".calendar-year-picker-item-current").add(ve).toggleClass("calendar-year-picker-item-current");var Ge=parseInt(ve.attr("data-year"),10);s.setYearMonth(Ge,void 0,0),setTimeout(function(){Z.find(".calendar-year-picker").remove()},200)}function Re(){s.openTimePicker()}function Ne(){s.closeTimePicker()}var je=a.touchEvents.start==="touchstart"&&Ft().passiveListener?{passive:!0,capture:!1}:!1;Z.find(".calendar-prev-month-button").on("click",ke),Z.find(".calendar-next-month-button").on("click",Se),Z.find(".calendar-prev-year-button").on("click",me),Z.find(".calendar-next-year-button").on("click",oe),s.params.monthPicker&&(Z.find(".current-month-value").on("click",$e),Z.on("click",".calendar-month-picker-item",Me)),s.params.yearPicker&&(Z.find(".current-year-value").on("click",Oe),Z.on("click",".calendar-year-picker-item",he)),s.hasTimePicker&&(Z.find(".calendar-time-selector a").on("click",Re),Z.on("click",".calendar-time-picker-close",Ne)),le.on("click",pe),s.params.touchMove&&(le.on(a.touchEvents.start,de,je),a.on("touchmove:active",ie),a.on("touchend:passive",ue)),s.detachCalendarEvents=function(){Z.find(".calendar-prev-month-button").off("click",ke),Z.find(".calendar-next-month-button").off("click",Se),Z.find(".calendar-prev-year-button").off("click",me),Z.find(".calendar-next-year-button").off("click",oe),s.params.monthPicker&&(Z.find(".current-month-value").off("click",$e),Z.off("click",".calendar-month-picker-item",Me)),s.params.yearPicker&&(Z.find(".current-year-value").off("click",Oe),Z.off("click",".calendar-year-picker-item",he)),s.hasTimePicker&&(Z.find(".calendar-time-selector a").off("click",Re),Z.off("click",".calendar-time-picker-close",Ne)),le.off("click",pe),s.params.touchMove&&(le.off(a.touchEvents.start,de,je),a.off("touchmove:active",ie),a.off("touchend:passive",ue))}},s.init(),s||Sw(i)}var r=t.prototype;return r.getIntlNames=function(){for(var n=this,i=n.params.locale,s=[],o=[],l=[],u=[],c=new Intl.DateTimeFormat(i,{month:"long"}),d=new Intl.DateTimeFormat(i,{month:"short"}),p=new Intl.DateTimeFormat(i,{weekday:"long"}),f=new Intl.DateTimeFormat(i,{weekday:"short"}),h,m,g,v=0;v<24;v+=1){var b=new Date().setMonth(v,1),y=n.yearFormatter(b);h&&y!==h&&(m&&(g=!0),m=!0,h=y),h||(h=y),m&&h===y&&!g&&(s.push(c.format(b)),o.push(d.format(b)))}for(var w=new Date().getDay(),x=0;x<7;x+=1){var k=new Date().getTime()+(x-w)*24*60*60*1e3;l.push(p.format(k)),u.push(f.format(k))}return{monthNamesIntl:s,monthNamesShortIntl:o,dayNamesIntl:l,dayNamesShortIntl:u}},r.normalizeDate=function(n){var i=this,s=new Date(n);return i.hasTimePicker?new Date(s.getFullYear(),s.getMonth(),s.getDate(),s.getHours(),s.getMinutes()):new Date(s.getFullYear(),s.getMonth(),s.getDate())},r.normalizeValues=function(n){var i=this,s=[];return n&&Array.isArray(n)&&(s=n.map(function(o){return i.normalizeDate(o)})),s},r.initInput=function(){var n=this;!n.$inputEl||n.params.inputReadOnly&&n.$inputEl.prop("readOnly",!0)},r.isPopover=function(){var n=this,i=n.app,s=n.modal,o=n.params,l=Ct();if(o.openIn==="sheet"||s&&s.type!=="popover")return!1;if(!n.inline&&n.inputEl){if(o.openIn==="popover")return!0;if(l.ios)return!!l.ipad;if(i.width>=768||l.desktop&&i.theme==="aurora")return!0}return!1},r.formatDate=function(n){var i=this,s=new Date(n),o=s.getFullYear(),l=s.getMonth(),u=l+1,c=s.getDate(),d=s.getDay(),p=i.monthNames,f=i.monthNamesShort,h=i.dayNames,m=i.dayNamesShort,g=i.params,v=g.dateFormat,b=g.locale;function y(S){return S<10?"0"+S:S}if(typeof v=="string"){var w={yyyy:o,yy:String(o).substring(2),mm:y(u),m:u,MM:p[l],M:f[l],dd:y(c),d:c,DD:h[d],D:m[d]};if(i.params.timePicker){var x=s.getHours(),k=s.getMinutes(),C=s.getSeconds(),E=x;x>12&&(E=x-12),x===0&&(E=12);var $=x>=12&&x!==0?"pm":"am";Object.assign(w,{HH:y(x),H:x,hh:y(E),h:E,ss:y(C),s:C,":mm":y(k),":m":k,a:$,A:$.toUpperCase()})}var N=new RegExp(Object.keys(w).map(function(S){return"("+S+")"}).join("|"),"g");return v.replace(N,function(S){return S in w?w[S]:S})}if(typeof v=="function")return v(s);var I=new Intl.DateTimeFormat(b,v);return I.format(s)},r.formatValue=function(){var n=this,i=n.value;return n.params.formatValue?n.params.formatValue.call(n,i):i.map(function(s){return n.formatDate(s)}).join(n.params.rangePicker?" - ":", ")},r.addValue=function(n){var i=this,s=i.params,o=s.multiple,l=s.rangePicker,u=s.rangePickerMinDays,c=s.rangePickerMaxDays;if(o){i.value||(i.value=[]);for(var d,p=0;p<i.value.length;p+=1)new Date(n).getTime()===new Date(i.value[p]).getTime()&&(d=p);typeof d=="undefined"?i.value.push(n):i.value.splice(d,1),i.updateValue()}else l?(i.value||(i.value=[]),(i.value.length===2||i.value.length===0)&&(i.value=[]),i.value.length===0||Math.abs(i.value[0].getTime()-n.getTime())>=(u-1)*60*60*24*1e3&&(c===0||Math.abs(i.value[0].getTime()-n.getTime())<=(c-1)*60*60*24*1e3)?i.value.push(n):i.value=[],i.value.sort(function(f,h){return f-h}),i.updateValue()):(i.value=[n],i.updateValue())},r.setValue=function(n){var i=this,s=i.value;if(Array.isArray(s)&&Array.isArray(n)&&s.length===n.length){var o=!0;if(s.forEach(function(l,u){l!==n[u]&&(o=!1)}),o)return}i.value=n,i.updateValue()},r.getValue=function(){var n=this;return n.value},r.updateValue=function(n){var i=this,s=i.$el,o=i.$wrapperEl,l=i.$inputEl,u=i.value,c=i.params,d;if(s&&s.length>0){o.find(".calendar-day-selected").removeClass("calendar-day-selected calendar-day-selected-range calendar-day-selected-left calendar-day-selected-right");var p;if(c.rangePicker&&u.length===2){var f=new Date(u[0]).getTime(),h=new Date(u[1]).getTime();for(d=f;d<=h;d+=24*60*60*1e3){p=new Date(d);var m="calendar-day-selected";f!==h&&(d!==f&&d!==h&&(m+=" calendar-day-selected-range"),d===f&&(m+=" calendar-day-selected-left"),d===h&&(m+=" calendar-day-selected-right")),o.find('.calendar-day[data-date="'+p.getFullYear()+"-"+p.getMonth()+"-"+p.getDate()+'"]').addClass(m)}p=new Date(f),o.find('.calendar-day[data-date="'+p.getFullYear()+"-"+p.getMonth()+"-"+p.getDate()+'"]').removeClass("calendar-day-selected-range").addClass("calendar-day-selected calendar-day-selected-left"),p=new Date(h),o.find('.calendar-day[data-date="'+p.getFullYear()+"-"+p.getMonth()+"-"+p.getDate()+'"]').removeClass("calendar-day-selected-range").addClass("calendar-day-selected calendar-day-selected-right")}else for(d=0;d<i.value.length;d+=1)p=new Date(u[d]),o.find('.calendar-day[data-date="'+p.getFullYear()+"-"+p.getMonth()+"-"+p.getDate()+'"]').addClass("calendar-day-selected")}if(n||i.emit("local::change calendarChange",i,u),s&&s.length>0&&i.hasTimePicker&&s.find(".calendar-time-selector a").text(u&&u.length?i.timeSelectorFormatter(u[0]):i.params.timePickerPlaceholder),l&&l.length||c.header){var g=i.formatValue(u);c.header&&s&&s.length&&s.find(".calendar-selected-date").text(g),l&&l.length&&!n&&(l.val(g),l.trigger("change"))}},r.updateCurrentMonthYear=function(n){var i=this,s=i.$months,o=i.$el,l=i.monthNames,u,c;typeof n=="undefined"?(i.currentMonth=parseInt(s.eq(1).attr("data-month"),10),i.currentYear=parseInt(s.eq(1).attr("data-year"),10),u=s.eq(1).attr("data-locale-month"),c=s.eq(1).attr("data-locale-year")):(i.currentMonth=parseInt(s.eq(n==="next"?s.length-1:0).attr("data-month"),10),i.currentYear=parseInt(s.eq(n==="next"?s.length-1:0).attr("data-year"),10),u=s.eq(n==="next"?s.length-1:0).attr("data-locale-month"),c=s.eq(n==="next"?s.length-1:0).attr("data-locale-year")),o.find(".current-month-value").text(l[u]),o.find(".current-year-value").text(c)},r.update=function(){var n=this,i=n.currentYear,s=n.currentMonth,o=n.$wrapperEl,l=new Date(i,s),u=n.renderMonth(l,"prev"),c=n.renderMonth(l),d=n.renderMonth(l,"next");o.transition(0).html(""+u+c+d).transform("translate3d(0,0,0)"),n.$months=o.find(".calendar-month"),n.monthsTranslate=0,n.setMonthsTranslate(),n.$months.each(function(p){n.emit("local::monthAdd calendarMonthAdd",p)})},r.onMonthChangeStart=function(n){var i=this,s=i.$months,o=i.currentYear,l=i.currentMonth;i.updateCurrentMonthYear(n),s.removeClass("calendar-month-current calendar-month-prev calendar-month-next");var u=n==="next"?s.length-1:0;s.eq(u).addClass("calendar-month-current"),s.eq(n==="next"?u-1:u+1).addClass(n==="next"?"calendar-month-prev":"calendar-month-next"),i.emit("local::monthYearChangeStart calendarMonthYearChangeStart",i,o,l)},r.onMonthChangeEnd=function(n,i){var s=this,o=s.currentYear,l=s.currentMonth,u=s.$wrapperEl,c=s.monthsTranslate;s.animating=!1;var d,p,f;u.find(".calendar-month:not(.calendar-month-prev):not(.calendar-month-current):not(.calendar-month-next)").remove(),typeof n=="undefined"&&(n="next",i=!0),i?(u.find(".calendar-month-next, .calendar-month-prev").remove(),p=s.renderMonth(new Date(o,l),"prev"),d=s.renderMonth(new Date(o,l),"next")):f=s.renderMonth(new Date(o,l),n),(n==="next"||i)&&u.append(f||d),(n==="prev"||i)&&u.prepend(f||p);var h=u.find(".calendar-month");s.$months=h,s.setMonthsTranslate(c),s.emit("local::monthAdd calendarMonthAdd",s,n==="next"?h.eq(h.length-1)[0]:h.eq(0)[0]),s.emit("local::monthYearChangeEnd calendarMonthYearChangeEnd",s,o,l)},r.setMonthsTranslate=function(n){var i=this,s=i.$months,o=i.isHorizontal,l=i.inverter;n=n||i.monthsTranslate||0,typeof i.monthsTranslate=="undefined"&&(i.monthsTranslate=n),s.removeClass("calendar-month-current calendar-month-prev calendar-month-next");var u=-(n+1)*100*l,c=-n*100*l,d=-(n-1)*100*l;s.eq(0).transform("translate3d("+(o?u:0)+"%, "+(o?0:u)+"%, 0)").addClass("calendar-month-prev"),s.eq(1).transform("translate3d("+(o?c:0)+"%, "+(o?0:c)+"%, 0)").addClass("calendar-month-current"),s.eq(2).transform("translate3d("+(o?d:0)+"%, "+(o?0:d)+"%, 0)").addClass("calendar-month-next")},r.nextMonth=function(n){var i=this,s=i.params,o=i.$wrapperEl,l=i.inverter,u=i.isHorizontal;(typeof n=="undefined"||typeof n=="object")&&(n="",s.animate||(n=0));var c=parseInt(i.$months.eq(i.$months.length-1).attr("data-month"),10),d=parseInt(i.$months.eq(i.$months.length-1).attr("data-year"),10),p=new Date(d,c),f=p.getTime(),h=!i.animating;if(s.maxDate&&f>new Date(s.maxDate).getTime()){i.resetMonth();return}if(i.monthsTranslate-=1,c===i.currentMonth){var m=-i.monthsTranslate*100*l,g=T(i.renderMonth(f,"next")).transform("translate3d("+(u?m:0)+"%, "+(u?0:m)+"%, 0)").addClass("calendar-month-next");o.append(g[0]),i.$months=o.find(".calendar-month"),i.emit("local::monthAdd calendarMonthAdd",i.$months.eq(i.$months.length-1)[0])}i.animating=!0,i.onMonthChangeStart("next");var v=i.monthsTranslate*100*l;o.transition(n).transform("translate3d("+(u?v:0)+"%, "+(u?0:v)+"%, 0)"),h&&o.transitionEnd(function(){i.onMonthChangeEnd("next")}),s.animate||i.onMonthChangeEnd("next")},r.prevMonth=function(n){var i=this,s=i.params,o=i.$wrapperEl,l=i.inverter,u=i.isHorizontal;(typeof n=="undefined"||typeof n=="object")&&(n="",s.animate||(n=0));var c=parseInt(i.$months.eq(0).attr("data-month"),10),d=parseInt(i.$months.eq(0).attr("data-year"),10),p=new Date(d,c+1,-1),f=p.getTime(),h=!i.animating;if(s.minDate){var m=new Date(s.minDate);if(m=new Date(m.getFullYear(),m.getMonth(),1),f<m.getTime()){i.resetMonth();return}}if(i.monthsTranslate+=1,c===i.currentMonth){var g=-i.monthsTranslate*100*l,v=T(i.renderMonth(f,"prev")).transform("translate3d("+(u?g:0)+"%, "+(u?0:g)+"%, 0)").addClass("calendar-month-prev");o.prepend(v[0]),i.$months=o.find(".calendar-month"),i.emit("local::monthAdd calendarMonthAdd",i.$months.eq(0)[0])}i.animating=!0,i.onMonthChangeStart("prev");var b=i.monthsTranslate*100*l;o.transition(n).transform("translate3d("+(u?b:0)+"%, "+(u?0:b)+"%, 0)"),h&&o.transitionEnd(function(){i.onMonthChangeEnd("prev")}),s.animate||i.onMonthChangeEnd("prev")},r.resetMonth=function(n){n===void 0&&(n="");var i=this,s=i.$wrapperEl,o=i.inverter,l=i.isHorizontal,u=i.monthsTranslate,c=u*100*o;s.transition(n).transform("translate3d("+(l?c:0)+"%, "+(l?0:c)+"%, 0)")},r.setYearMonth=function(n,i,s){var o=this,l=o.params,u=o.isHorizontal,c=o.$wrapperEl,d=o.inverter;typeof n=="undefined"&&(n=o.currentYear),typeof i=="undefined"&&(i=o.currentMonth),(typeof s=="undefined"||typeof s=="object")&&(s="",l.animate||(s=0));var p;if(n<o.currentYear?p=new Date(n,i+1,-1).getTime():p=new Date(n,i).getTime(),l.maxDate&&p>new Date(l.maxDate).getTime())return!1;if(l.minDate){var f=new Date(l.minDate);if(f=new Date(f.getFullYear(),f.getMonth(),1),p<f.getTime())return!1}var h=new Date(o.currentYear,o.currentMonth).getTime(),m=p>h?"next":"prev",g=o.renderMonth(new Date(n,i));o.monthsTranslate=o.monthsTranslate||0;var v=o.monthsTranslate,b,y=!o.animating&&s!==0;p>h?(o.monthsTranslate-=1,o.animating||o.$months.eq(o.$months.length-1).remove(),c.append(g),o.$months=c.find(".calendar-month"),b=-(v-1)*100*d,o.$months.eq(o.$months.length-1).transform("translate3d("+(u?b:0)+"%, "+(u?0:b)+"%, 0)").addClass("calendar-month-next")):(o.monthsTranslate+=1,o.animating||o.$months.eq(0).remove(),c.prepend(g),o.$months=c.find(".calendar-month"),b=-(v+1)*100*d,o.$months.eq(0).transform("translate3d("+(u?b:0)+"%, "+(u?0:b)+"%, 0)").addClass("calendar-month-prev")),o.emit("local::monthAdd calendarMonthAdd",m==="next"?o.$months.eq(o.$months.length-1)[0]:o.$months.eq(0)[0]),o.animating=!0,o.onMonthChangeStart(m);var w=o.monthsTranslate*100*d;c.transition(s).transform("translate3d("+(u?w:0)+"%, "+(u?0:w)+"%, 0)"),y&&c.transitionEnd(function(){o.onMonthChangeEnd(m,!0)}),(!l.animate||s===0)&&o.onMonthChangeEnd(m,!0)},r.nextYear=function(){var n=this;n.setYearMonth(n.currentYear+1)},r.prevYear=function(){var n=this;n.setYearMonth(n.currentYear-1)},r.dateInRange=function(n,i){var s=!1,o;if(!i)return!1;if(Array.isArray(i))for(o=0;o<i.length;o+=1)i[o].from||i[o].to?i[o].from&&i[o].to?n<=new Date(i[o].to).getTime()&&n>=new Date(i[o].from).getTime()&&(s=!0):i[o].from?n>=new Date(i[o].from).getTime()&&(s=!0):i[o].to&&n<=new Date(i[o].to).getTime()&&(s=!0):i[o].date?n===new Date(i[o].date).getTime()&&(s=!0):n===new Date(i[o]).getTime()&&(s=!0);else i.from||i.to?i.from&&i.to?n<=new Date(i.to).getTime()&&n>=new Date(i.from).getTime()&&(s=!0):i.from?n>=new Date(i.from).getTime()&&(s=!0):i.to&&n<=new Date(i.to).getTime()&&(s=!0):i.date?s=n===new Date(i.date).getTime():typeof i=="function"&&(s=i(new Date(n)));return s},r.daysInMonth=function(n){var i=new Date(n);return new Date(i.getFullYear(),i.getMonth()+1,0).getDate()},r.renderMonths=function(n){var i=this;return i.params.renderMonths?i.params.renderMonths.call(i,n):F("div",{class:"calendar-months-wrapper"},i.renderMonth(n,"prev"),i.renderMonth(n),i.renderMonth(n,"next"))},r.renderMonth=function(n,i){var s=this,o=s.params,l=s.value;if(o.renderMonth)return o.renderMonth.call(s,n,i);var u=new Date(n),c=u.getFullYear(),d=u.getMonth(),p=s.monthNames.indexOf(s.monthFormatter(u));p<0&&(p=d);var f=s.yearFormatter(u);i==="next"&&(d===11?u=new Date(c+1,0):u=new Date(c,d+1,1)),i==="prev"&&(d===0?u=new Date(c-1,11):u=new Date(c,d-1,1)),(i==="next"||i==="prev")&&(d=u.getMonth(),c=u.getFullYear(),p=s.monthNames.indexOf(s.monthFormatter(u)),p<0&&(p=d),f=s.yearFormatter(u));var h=[],m=new Date().setHours(0,0,0,0),g=o.minDate?new Date(o.minDate).getTime():null,v=o.maxDate?new Date(o.maxDate).getTime():null,b=6,y=7,w=s.daysInMonth(new Date(u.getFullYear(),u.getMonth()).getTime()-10*24*60*60*1e3),x=s.daysInMonth(u),k=o.firstDay===6?0:1,C="",E=0+(o.firstDay-1),$,N,I=new Date(u.getFullYear(),u.getMonth()).getDay();if(I===0&&(I=7),l&&l.length)for(var S=0;S<l.length;S+=1)h.push(new Date(l[S]).setHours(0,0,0,0));for(var A=1;A<=b;A+=1){for(var R="",O=function(U){E+=1;var j=void 0,G=E-I,L="";A===1&&U===1&&G>k&&o.firstDay!==1&&(E-=7,G=E-I);var V=U-1+o.firstDay>6?U-1-7+o.firstDay:U-1+o.firstDay;G<0?(G=w+G+1,L+=" calendar-day-prev",j=new Date(d-1<0?c-1:c,d-1<0?11:d-1,G).getTime()):(G+=1,G>x?(G-=x,L+=" calendar-day-next",j=new Date(d+1>11?c+1:c,d+1>11?0:d+1,G).getTime()):j=new Date(c,d,G).getTime()),j===m&&(L+=" calendar-day-today"),o.rangePicker&&h.length===2?(j>=h[0]&&j<=h[1]&&(L+=" calendar-day-selected"),h[0]!==h[1]&&(j>h[0]&&j<h[1]&&(L+=" calendar-day-selected-range"),j===h[0]&&(L+=" calendar-day-selected-left"),j===h[1]&&(L+=" calendar-day-selected-right"))):h.indexOf(j)>=0&&(L+=" calendar-day-selected"),o.weekendDays.indexOf(V)>=0&&(L+=" calendar-day-weekend");var H="";if(N=!1,o.events&&s.dateInRange(j,o.events)&&(N=!0),N&&(L+=" calendar-day-has-events",H=`
            <span class="calendar-day-events">
              <span class="calendar-day-event"></span>
            </span>
          `,Array.isArray(o.events))){var Y=[];o.events.forEach(function(ie){var ue=ie.color||"";Y.indexOf(ue)<0&&s.dateInRange(j,ie)&&Y.push(ue)}),H=`
              <span class="calendar-day-events">
                `+Y.map(function(ie){return(`
                  <span class="calendar-day-event" style="`+(ie?"background-color: "+ie:"")+`"></span>
                `).trim()}).join("")+`
              </span>
            `}if(o.rangesClasses)for(var K=0;K<o.rangesClasses.length;K+=1)s.dateInRange(j,o.rangesClasses[K].range)&&(L+=" "+o.rangesClasses[K].cssClass);$=!1,(g&&j<g||v&&j>v)&&($=!0),o.disabled&&s.dateInRange(j,o.disabled)&&($=!0),$&&(L+=" calendar-day-disabled"),j=new Date(j);var Z=j.getFullYear(),le=j.getMonth(),de=s.dayFormatter(j);R+=(`
          <div data-year="`+Z+'" data-month="'+le+'" data-day="'+G+'" class="calendar-day'+L+'" data-date="'+Z+"-"+le+"-"+G+`">
            <span class="calendar-day-number">`+de+H+`</span>
          </div>`).trim()},D=1;D<=y;D+=1)O(D);C+='<div class="calendar-row">'+R+"</div>"}return C='<div class="calendar-month" data-year="'+c+'" data-month="'+d+'" data-locale-year="'+f+'" data-locale-month="'+p+'">'+C+"</div>",C},r.renderWeekHeader=function(){var n=this;if(n.params.renderWeekHeader)return n.params.renderWeekHeader.call(n);for(var i=n.params,s="",o=0;o<7;o+=1){var l=o+i.firstDay>6?o-7+i.firstDay:o+i.firstDay,u=n.dayNamesShort[l];s+='<div class="calendar-week-day">'+u+"</div>"}return F("div",{class:"calendar-week-header"},s)},r.renderMonthSelector=function(){var n=this;return n.params.renderMonthSelector?n.params.renderMonthSelector.call(n):F("div",{class:"calendar-month-selector"},F("a",{class:"link icon-only calendar-prev-month-button"},F("i",{class:"icon icon-prev"})),n.params.monthPicker?F("a",{class:"current-month-value link"}):F("span",{class:"current-month-value"}),F("a",{class:"link icon-only calendar-next-month-button"},F("i",{class:"icon icon-next"})))},r.renderMonthPicker=function(){var n=this,i=parseInt(n.$el.find(".calendar-month-current").attr("data-locale-month"),10);return F("div",{class:"calendar-month-picker"},n.monthNames.map(function(s,o){return F("div",{class:"calendar-month-picker-item "+(i===o?"calendar-month-picker-item-current":"")},F("span",null,s))}))},r.renderYearSelector=function(){var n=this;return n.params.renderYearSelector?n.params.renderYearSelector.call(n):F("div",{class:"calendar-year-selector"},F("a",{class:"link icon-only calendar-prev-year-button"},F("i",{class:"icon icon-prev"})),n.params.yearPicker?F("a",{class:"current-year-value link"}):F("span",{class:"current-year-value"}),F("a",{class:"link icon-only calendar-next-year-button"},F("i",{class:"icon icon-next"})))},r.renderYearPicker=function(){var n=this,i=n.currentYear,s=n.params.yearPickerMin||new Date().getFullYear()-100;n.params.minDate&&(s=Math.max(s,new Date(n.params.minDate).getFullYear()));var o=n.params.yearPickerMax||new Date().getFullYear()+100;n.params.maxDate&&(o=Math.min(o,new Date(n.params.maxDate).getFullYear()));for(var l=[],u=s;u<=o;u+=1)l.push(u);return F("div",{class:"calendar-year-picker"},l.map(function(c){return F("div",{"data-year":c,class:"calendar-year-picker-item "+(c===i?"calendar-year-picker-item-current":"")},F("span",null,n.yearFormatter(new Date().setFullYear(c))))}))},r.renderTimeSelector=function(){var n=this,i=n.value&&n.value[0],s;return i&&(s=n.timeSelectorFormatter(i)),F("div",{class:"calendar-time-selector"},F("a",{class:"link"},s||n.params.timePickerPlaceholder))},r.renderHeader=function(){var n=this;return n.params.renderHeader?n.params.renderHeader.call(n):F("div",{class:"calendar-header"},F("div",{class:"calendar-selected-date"},n.params.headerPlaceholder))},r.renderFooter=function(){var n=this,i=n.app;return n.params.renderFooter?n.params.renderFooter.call(n):F("div",{class:"calendar-footer"},F("a",{class:(i.theme==="md"?"button":"link")+" calendar-close sheet-close popover-close"},n.params.toolbarCloseText))},r.renderToolbar=function(){var n=this;return n.params.renderToolbar?n.params.renderToolbar.call(n,n):F("div",{class:"toolbar toolbar-top no-shadow"},F("div",{class:"toolbar-inner"},n.params.monthSelector?n.renderMonthSelector():"",n.params.yearSelector?n.renderYearSelector():""))},r.renderInline=function(){var n=this,i=n.params,s=i.cssClass,o=i.toolbar,l=i.header,u=i.footer,c=i.rangePicker,d=i.weekHeader,p=n.value,f=n.hasTimePicker,h=p&&p.length?p[0]:new Date().setHours(0,0,0);return F("div",{class:"calendar calendar-inline "+(c?"calendar-range":"")+" "+(s||"")},l&&n.renderHeader(),o&&n.renderToolbar(),d&&n.renderWeekHeader(),F("div",{class:"calendar-months"},n.renderMonths(h)),f&&n.renderTimeSelector(),u&&n.renderFooter())},r.renderCustomModal=function(){var n=this,i=n.params,s=i.cssClass,o=i.toolbar,l=i.header,u=i.footer,c=i.rangePicker,d=i.weekHeader,p=n.value,f=n.hasTimePicker,h=p&&p.length?p[0]:new Date().setHours(0,0,0);return F("div",{class:"calendar calendar-modal "+(c?"calendar-range":"")+" "+(s||"")},l&&n.renderHeader(),o&&n.renderToolbar(),d&&n.renderWeekHeader(),F("div",{class:"calendar-months"},n.renderMonths(h)),f&&n.renderTimeSelector(),u&&n.renderFooter())},r.renderSheet=function(){var n=this,i=n.params,s=i.cssClass,o=i.toolbar,l=i.header,u=i.footer,c=i.rangePicker,d=i.weekHeader,p=n.value,f=n.hasTimePicker,h=p&&p.length?p[0]:new Date().setHours(0,0,0);return F("div",{class:"sheet-modal calendar calendar-sheet "+(c?"calendar-range":"")+" "+(s||"")},l&&n.renderHeader(),o&&n.renderToolbar(),d&&n.renderWeekHeader(),F("div",{class:"sheet-modal-inner calendar-months"},n.renderMonths(h)),f&&n.renderTimeSelector(),u&&n.renderFooter())},r.renderPopover=function(){var n=this,i=n.params,s=i.cssClass,o=i.toolbar,l=i.header,u=i.footer,c=i.rangePicker,d=i.weekHeader,p=n.value,f=n.hasTimePicker,h=p&&p.length?p[0]:new Date().setHours(0,0,0);return F("div",{class:"popover calendar-popover"},F("div",{class:"popover-inner"},F("div",{class:"calendar "+(c?"calendar-range":"")+" "+(s||"")},l&&n.renderHeader(),o&&n.renderToolbar(),d&&n.renderWeekHeader(),F("div",{class:"calendar-months"},n.renderMonths(h)),f&&n.renderTimeSelector(),u&&n.renderFooter())))},r.render=function(){var n=this,i=n.params;if(i.render)return i.render.call(n);if(!n.inline){var s=i.openIn;return s==="auto"&&(s=n.isPopover()?"popover":"sheet"),s==="popover"?n.renderPopover():s==="sheet"?n.renderSheet():n.renderCustomModal()}return n.renderInline()},r.openTimePicker=function(){var n=this,i=n.$el,s=n.app,o=n.is12HoursFormat;if(!(!i||!i.length)){i.append('<div class="calendar-time-picker"></div>');for(var l=[],u=[],c=o?1:0,d=o?12:23,p=c;p<=d;p+=1)l.push(p);for(var f=0;f<=59;f+=1)u.push(f);var h;n.value&&n.value.length?h=[n.value[0].getHours(),n.value[0].getMinutes()]:h=[new Date().getHours(),new Date().getMinutes()],o&&(h.push(h[0]<12?"AM":"PM"),h[0]>12&&(h[0]-=12),h[0]===0&&(h[0]=12)),n.timePickerInstance=s.picker.create({containerEl:i.find(".calendar-time-picker"),value:h,toolbar:!0,rotateEffect:!1,toolbarCloseText:n.params.toolbarCloseText,cols:[{values:l},{divider:!0,content:":"},{values:u,displayValues:u.map(function(m){return m<10?"0"+m:m})}].concat(o?[{values:["AM","PM"]}]:[])}),n.timePickerInstance.$el.find(".toolbar a").removeClass("sheet-close popover-close").addClass("calendar-time-picker-close")}},r.closeTimePicker=function(){var n=this,i=n.is12HoursFormat;if(n.timePickerInstance){var s=n.timePickerInstance.value,o=parseInt(s[0],10),l=parseInt(s[1],10),u=n.timePickerInstance.value[2];i&&(u==="AM"&&o===12?o=0:u==="PM"&&o!==12&&(o+=12));var c=n.value&&n.value.length&&n.value[0];c?(c=new Date(c),c.setHours(o,l)):(c=new Date,c.setHours(o,l,0,0)),n.setValue([c]),n.timePickerInstance.close(),n.timePickerInstance.destroy(),delete n.timePickerInstance}n.$el&&n.$el.length&&n.$el.find(".calendar-time-picker").remove()},r.onOpen=function(){var n=this,i=n.initialized,s=n.$el,o=n.app,l=n.$inputEl,u=n.inline,c=n.value,d=n.params;n.closing=!1,n.opened=!0,n.opening=!0,n.attachCalendarEvents();var p=!c&&d.value;i?c&&n.setValue(c,0):c?n.setValue(c,0):d.value&&n.setValue(n.normalizeValues(d.value),0),n.updateCurrentMonthYear(),n.monthsTranslate=0,n.setMonthsTranslate(),p?n.updateValue():d.header&&c&&n.updateValue(!0),!u&&l&&l.length&&o.theme==="md"&&l.trigger("focus"),n.initialized=!0,n.$months.each(function(f){n.emit("local::monthAdd calendarMonthAdd",f)}),s&&s.trigger("calendar:open"),l&&l.trigger("calendar:open"),n.emit("local::open calendarOpen",n)},r.onOpened=function(){var n=this;n.opening=!1,n.$el&&n.$el.trigger("calendar:opened"),n.$inputEl&&n.$inputEl.trigger("calendar:opened"),n.emit("local::opened calendarOpened",n)},r.onClose=function(){var n=this,i=n.app;if(n.opening=!1,n.closing=!0,n.$inputEl)if(i.theme==="md")n.$inputEl.trigger("blur");else{var s=n.$inputEl.attr("validate"),o=n.$inputEl.attr("required");s&&o&&i.input.validate(n.$inputEl)}n.detachCalendarEvents&&n.detachCalendarEvents(),n.$el&&n.$el.trigger("calendar:close"),n.$inputEl&&n.$inputEl.trigger("calendar:close"),n.emit("local::close calendarClose",n)},r.onClosed=function(){var n=this;n.opened=!1,n.closing=!1,n.inline||qr(function(){n.modal&&n.modal.el&&n.modal.destroy&&(n.params.routableModals||n.modal.destroy()),delete n.modal}),n.timePickerInstance&&(n.timePickerInstance.destroy&&n.timePickerInstance.destroy(),delete n.timePickerInstance),n.$el&&n.$el.trigger("calendar:closed"),n.$inputEl&&n.$inputEl.trigger("calendar:closed"),n.emit("local::closed calendarClosed",n)},r.open=function(){var n=this,i=n.app,s=n.opened,o=n.inline,l=n.$inputEl,u=n.params;if(!s){if(o){n.$el=T(n.render()),n.$el[0].f7Calendar=n,n.$wrapperEl=n.$el.find(".calendar-months-wrapper"),n.$months=n.$wrapperEl.find(".calendar-month"),n.$containerEl.append(n.$el),n.onOpen(),n.onOpened();return}var c=u.openIn;c==="auto"&&(c=n.isPopover()?"popover":"sheet");var d=n.render(),p={targetEl:l,scrollToEl:u.scrollToInput?l:void 0,content:d,backdrop:u.backdrop===!0||c==="popover"&&i.params.popover.backdrop!==!1&&u.backdrop!==!1,closeByBackdropClick:u.closeByBackdropClick,on:{open:function(){var m=this;n.modal=m,n.$el=c==="popover"?m.$el.find(".calendar"):m.$el,n.$wrapperEl=n.$el.find(".calendar-months-wrapper"),n.$months=n.$wrapperEl.find(".calendar-month"),n.$el[0].f7Calendar=n,c==="customModal"&&T(n.$el).find(".calendar-close").once("click",function(){n.close()}),n.onOpen()},opened:function(){n.onOpened()},close:function(){n.onClose()},closed:function(){n.onClosed()}}};if(c==="sheet"&&(p.push=u.sheetPush,p.swipeToClose=u.sheetSwipeToClose),u.routableModals&&n.view){var f;n.view.router.navigate({url:n.url,route:(f={path:n.url},f[c]=p,f)})}else n.modal=i[c].create(p),n.modal.open()}},r.close=function(){var n=this,i=n.opened,s=n.inline;if(!!i){if(s){n.onClose(),n.onClosed();return}n.params.routableModals&&n.view?n.view.router.back():n.modal.close()}},r.init=function(){var n=this;if(n.initInput(),n.inline){n.open(),n.emit("local::init calendarInit",n);return}!n.initialized&&n.params.value&&n.setValue(n.normalizeValues(n.params.value)),n.$inputEl&&n.attachInputEvents(),n.params.closeByOutsideClick&&n.attachHtmlEvents(),n.emit("local::init calendarInit",n)},r.destroy=function(){var n=this;if(!n.destroyed){var i=n.$el;n.emit("local::beforeDestroy calendarBeforeDestroy",n),i&&i.trigger("calendar:beforedestroy"),n.close(),n.$inputEl&&n.detachInputEvents(),n.params.closeByOutsideClick&&n.detachHtmlEvents(),n.timePickerInstance&&(n.timePickerInstance.destroy&&n.timePickerInstance.destroy(),delete n.timePickerInstance),i&&i.length&&delete n.$el[0].f7Calendar,$r(n),n.destroyed=!0}},I6(t,[{key:"view",get:function(){var n=this.$inputEl,i=this.app,s=this.params,o;return s.view?o=s.view:n&&(o=n.parents(".view").length&&n.parents(".view")[0].f7View),o||(o=i.views.main),o}}]),t}(rr),iN=N6,A6={name:"calendar",static:{Calendar:iN},create:function(){var t=this;t.calendar=Ir({defaultSelector:".calendar",constructor:iN,app:t,domProp:"f7Calendar"}),t.calendar.close=function(a){a===void 0&&(a=".calendar");var n=T(a);if(n.length!==0){var i=n[0].f7Calendar;!i||i&&!i.opened||i.close()}}},params:{calendar:{dateFormat:void 0,monthNames:"auto",monthNamesShort:"auto",dayNames:"auto",dayNamesShort:"auto",locale:void 0,firstDay:1,weekendDays:[0,6],multiple:!1,rangePicker:!1,rangePickerMinDays:1,rangePickerMaxDays:0,direction:"horizontal",minDate:null,maxDate:null,disabled:null,events:null,rangesClasses:null,touchMove:!0,animate:!0,closeOnSelect:!1,monthSelector:!0,monthPicker:!0,yearSelector:!0,yearPicker:!0,yearPickerMin:void 0,yearPickerMax:void 0,timePicker:!1,timePickerFormat:{hour:"numeric",minute:"numeric"},timePickerPlaceholder:"Select time",weekHeader:!0,value:null,containerEl:null,openIn:"auto",sheetPush:!1,sheetSwipeToClose:void 0,formatValue:null,inputEl:null,inputReadOnly:!0,closeByOutsideClick:!0,scrollToInput:!0,header:!1,headerPlaceholder:"Select date",toolbar:!0,toolbarCloseText:"Done",footer:!1,cssClass:null,routableModals:!1,view:null,url:"date/",backdrop:null,closeByBackdropClick:!0,renderWeekHeader:null,renderMonths:null,renderMonth:null,renderMonthSelector:null,renderYearSelector:null,renderHeader:null,renderFooter:null,renderToolbar:null,renderInline:null,renderPopover:null,renderSheet:null,render:null}}};function _6(e,t){var r=this,a=r.app,n=T(e),i=n.index(),s=r.cols[i];if(s.divider)return;s.$el=n,s.el=n[0],s.$itemsEl=s.$el.find(".picker-items"),s.items=s.$itemsEl.find(".picker-item");var o,l,u,c,d;function p(){d=Rv(function(){s.updateItems(void 0,void 0,0),p()})}s.replaceValues=function(z,U){s.detachEvents(),s.values=z,s.displayValues=U,s.$itemsEl.html(r.renderColumn(s,!0)),s.items=s.$itemsEl.find(".picker-item"),s.calcSize(),s.setValue(s.values[0],0,!0),s.attachEvents()},s.calcSize=function(){r.params.rotateEffect&&(s.$el.removeClass("picker-column-absolute"),s.width||s.$el.css({width:""}));var z=0,U=s.$el[0].offsetHeight;o=s.items[0].offsetHeight,l=o*s.items.length,u=U/2-l+o/2,c=U/2-o/2,s.width&&(z=s.width,parseInt(z,10)===z&&(z+="px"),s.$el.css({width:z})),r.params.rotateEffect&&(s.width||(s.items.each(function(j){var G=T(j).children("span");z=Math.max(z,G[0].offsetWidth)}),s.$el.css({width:z+2+"px"})),s.$el.addClass("picker-column-absolute"))},s.setValue=function(z,U,j){U===void 0&&(U="");var G=s.$itemsEl.find('.picker-item[data-picker-value="'+z+'"]').index();if(!(typeof G=="undefined"||G===-1)){var L=-G*o+c;s.$itemsEl.transition(U),s.$itemsEl.transform("translate3d(0,"+L+"px,0)"),r.params.updateValuesOnMomentum&&s.activeIndex&&s.activeIndex!==G&&(cancelAnimationFrame(d),s.$itemsEl.transitionEnd(function(){cancelAnimationFrame(d)}),p()),s.updateItems(G,L,U,j)}},s.updateItems=function(z,U,j,G){typeof U=="undefined"&&(U=Os(s.$itemsEl[0],"y")),typeof z=="undefined"&&(z=-Math.round((U-c)/o)),z<0&&(z=0),z>=s.items.length&&(z=s.items.length-1);var L=s.activeIndex;s.activeIndex=z,s.$itemsEl.find(".picker-item-selected").removeClass("picker-item-selected"),s.items.transition(j);var V=s.items.eq(z).addClass("picker-item-selected").transform("");r.params.rotateEffect&&s.items.each(function(H){var Y=T(H),K=Y.index()*o,Z=c-U,le=K-Z,de=le/o,ie=Math.ceil(s.height/o/2)+1,ue=-18*de;ue>180&&(ue=180),ue<-180&&(ue=-180),Math.abs(de)>ie?Y.addClass("picker-item-far"):Y.removeClass("picker-item-far"),Y.transform("translate3d(0, "+(-U+c)+"px, "+(r.needsOriginFix?-110:0)+"px) rotateX("+ue+"deg)")}),(G||typeof G=="undefined")&&(s.value=V.attr("data-picker-value"),s.displayValue=s.displayValues?s.displayValues[z]:s.value,L!==z&&(s.onChange&&s.onChange(r,s.value,s.displayValue),r.updateValue()))};var f=!0,h,m,g,v,b,y,w,x,k,C,E;function $(D){m||h||(D.preventDefault(),h=!0,g=D.type==="touchstart"?D.targetTouches[0].pageY:D.pageY,v=g,b=new Date().getTime(),f=!0,w=Os(s.$itemsEl[0],"y"),k=w)}function N(D){if(!!h){D.preventDefault(),f=!1,v=D.type==="touchmove"?D.targetTouches[0].pageY:D.pageY,m||(cancelAnimationFrame(d),m=!0,w=Os(s.$itemsEl[0],"y"),k=w,s.$itemsEl.transition(0));var z=v-g;k=w+z,x=void 0,k<u&&(k=u-Math.pow(u-k,.8),x="min"),k>c&&(k=c+Math.pow(k-c,.8),x="max"),s.$itemsEl.transform("translate3d(0,"+k+"px,0)"),s.updateItems(void 0,k,0,r.params.updateValuesOnTouchmove),E=k-C||k,C=k}}function I(){if(!h||!m){h=!1,m=!1;return}h=!1,m=!1,s.$itemsEl.transition(""),x&&(x==="min"?s.$itemsEl.transform("translate3d(0,"+u+"px,0)"):s.$itemsEl.transform("translate3d(0,"+c+"px,0)")),y=new Date().getTime();var D;y-b>300?D=k:D=k+E*r.params.momentumRatio,D=Math.max(Math.min(D,c),u);var z=Math.round(Math.abs((D-c)/o));r.params.freeMode||(D=-z*o+c),s.$itemsEl.transform("translate3d(0,"+parseInt(D,10)+"px,0)"),s.updateItems(z,D,"",!0),r.params.updateValuesOnMomentum&&(p(),s.$itemsEl.transitionEnd(function(){cancelAnimationFrame(d)})),setTimeout(function(){f=!0},100)}var S;function A(D){var z=D.deltaX,U=D.deltaY;Math.abs(z)>Math.abs(U)||(clearTimeout(S),D.preventDefault(),cancelAnimationFrame(d),w=Os(s.$itemsEl[0],"y"),s.$itemsEl.transition(0),k=w-U,x=void 0,k<u&&(k=u,x="min"),k>c&&(k=c,x="max"),s.$itemsEl.transform("translate3d(0,"+k+"px,0)"),s.updateItems(void 0,k,0,r.params.updateValuesOnMousewheel),S=setTimeout(function(){s.$itemsEl.transition(""),x&&(x==="min"?s.$itemsEl.transform("translate3d(0,"+u+"px,0)"):s.$itemsEl.transform("translate3d(0,"+c+"px,0)")),y=new Date().getTime();var j=k;j=Math.max(Math.min(j,c),u);var G=Math.round(Math.abs((j-c)/o));r.params.freeMode||(j=-G*o+c),s.$itemsEl.transform("translate3d(0,"+parseInt(j,10)+"px,0)"),s.updateItems(G,j,"",!0)},200))}function R(){if(!!f){cancelAnimationFrame(d);var D=T(this).attr("data-picker-value");s.setValue(D)}}var O=Ft().passiveListener?{passive:!1,capture:!1}:!1;s.attachEvents=function(){s.$el.on(a.touchEvents.start,$,O),a.on("touchmove:active",N),a.on("touchend:passive",I),r.params.mousewheel&&s.$el.on("wheel",A),s.items.on("click",R)},s.detachEvents=function(){s.$el.off(a.touchEvents.start,$,O),a.off("touchmove:active",N),a.off("touchend:passive",I),r.params.mousewheel&&s.$el.off("wheel",A),s.items.off("click",R)},s.init=function(){s.calcSize(),s.$itemsEl.transform("translate3d(0,"+c+"px,0)").transition(0),i===0&&s.$el.addClass("picker-column-first"),i===r.cols.length-1&&s.$el.addClass("picker-column-last"),t&&s.updateItems(0,c,0),s.attachEvents()},s.destroy=function(){s.detachEvents()},s.init()}function sN(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function M6(e,t,r){return t&&sN(e.prototype,t),r&&sN(e,r),e}function $w(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R6(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,g1(e,t)}function g1(e,t){return g1=Object.setPrototypeOf||function(a,n){return a.__proto__=n,a},g1(e,t)}var O6=function(e){R6(t,e);function t(a,n){var i;n===void 0&&(n={}),i=e.call(this,n,[a])||this;var s=$w(i),o=Ct(),l=De();s.params=se({},a.params.picker,n);var u;if(s.params.containerEl&&(u=T(s.params.containerEl),u.length===0))return s||$w(i);var c;s.params.inputEl&&(c=T(s.params.inputEl));var d=s.params.scrollToInput?c:void 0;if(s.params.scrollToEl){var p=T(s.params.scrollToEl);p.length>0&&(d=p)}se(s,{app:a,$containerEl:u,containerEl:u&&u[0],inline:u&&u.length>0,needsOriginFix:o.ios||l.navigator.userAgent.toLowerCase().indexOf("safari")>=0&&l.navigator.userAgent.toLowerCase().indexOf("chrome")<0&&!o.android,cols:[],$inputEl:c,inputEl:c&&c[0],$scrollToEl:d,initialized:!1,opened:!1,url:s.params.url});function f(){s.resizeCols()}function h(){s.open()}function m(y){y.preventDefault()}var g=null;function v(y){g=y.target}function b(y){if(!(s.destroyed||!s.params)){var w=T(y.target);s.isPopover()||!s.opened||s.closing||w.closest('[class*="backdrop"]').length||(c&&c.length>0?g===y.target&&w[0]!==c[0]&&w.closest(".sheet-modal").length===0&&s.close():T(y.target).closest(".sheet-modal").length===0&&s.close())}}return se(s,{attachResizeEvent:function(){a.on("resize",f)},detachResizeEvent:function(){a.off("resize",f)},attachInputEvents:function(){s.$inputEl.on("click",h),s.params.inputReadOnly&&(s.$inputEl.on("focus mousedown",m),s.$inputEl[0]&&(s.$inputEl[0].f7ValidateReadonly=!0))},detachInputEvents:function(){s.$inputEl.off("click",h),s.params.inputReadOnly&&(s.$inputEl.off("focus mousedown",m),s.$inputEl[0]&&delete s.$inputEl[0].f7ValidateReadonly)},attachHtmlEvents:function(){a.on("click",b),a.on("touchstart",v)},detachHtmlEvents:function(){a.off("click",b),a.off("touchstart",v)}}),s.init(),s||$w(i)}var r=t.prototype;return r.initInput=function(){var n=this;!n.$inputEl||n.params.inputReadOnly&&n.$inputEl.prop("readOnly",!0)},r.resizeCols=function(){var n=this;if(!!n.opened)for(var i=0;i<n.cols.length;i+=1)n.cols[i].divider||(n.cols[i].calcSize(),n.cols[i].setValue(n.cols[i].value,0,!1))},r.isPopover=function(){var n=this,i=n.app,s=n.modal,o=n.params,l=Ct();if(o.openIn==="sheet"||s&&s.type!=="popover")return!1;if(!n.inline&&n.inputEl){if(o.openIn==="popover")return!0;if(l.ios)return!!l.ipad;if(i.width>=768||l.desktop&&i.theme==="aurora")return!0}return!1},r.formatValue=function(){var n=this,i=n.value,s=n.displayValue;return n.params.formatValue?n.params.formatValue.call(n,i,s):i.join(" ")},r.setValue=function(n,i){var s=this,o=0;if(s.cols.length===0){s.value=n,s.updateValue(n);return}for(var l=0;l<s.cols.length;l+=1)s.cols[l]&&!s.cols[l].divider&&(s.cols[l].setValue(n[o],i),o+=1)},r.getValue=function(){var n=this;return n.value},r.updateValue=function(n){var i=this,s=n||[],o=[],l;if(i.cols.length===0)for(var u=i.params.cols.filter(function(p){return!p.divider}),c=0;c<u.length;c+=1)l=u[c],l.displayValues!==void 0&&l.values!==void 0&&l.values.indexOf(s[c])!==-1?o.push(l.displayValues[l.values.indexOf(s[c])]):o.push(s[c]);else for(var d=0;d<i.cols.length;d+=1)i.cols[d].divider||(s.push(i.cols[d].value),o.push(i.cols[d].displayValue));s.indexOf(void 0)>=0||(i.value=s,i.displayValue=o,i.emit("local::change pickerChange",i,i.value,i.displayValue),i.inputEl&&(i.$inputEl.val(i.formatValue()),i.$inputEl.trigger("change")))},r.initColumn=function(n,i){var s=this;_6.call(s,n,i)},r.destroyColumn=function(n){var i=this,s=T(n),o=s.index();i.cols[o]&&i.cols[o].destroy&&i.cols[o].destroy()},r.renderToolbar=function(){var n=this;return n.params.renderToolbar?n.params.renderToolbar.call(n,n):F("div",{class:"toolbar toolbar-top no-shadow"},F("div",{class:"toolbar-inner"},F("div",{class:"left"}),F("div",{class:"right"},F("a",{class:"link sheet-close popover-close"},n.params.toolbarCloseText))))},r.renderColumn=function(n,i){var s="picker-column "+(n.textAlign?"picker-column-"+n.textAlign:"")+" "+(n.cssClass||""),o,l;return n.divider?o=`
        <div class="`+s+' picker-column-divider">'+n.content+`</div>
      `:(l=n.values.map(function(u,c){return`
        <div class="picker-item" data-picker-value="`+u+`">
          <span>`+(n.displayValues?n.displayValues[c]:u)+`</span>
        </div>
      `}).join(""),o=`
        <div class="`+s+`">
          <div class="picker-items">`+l+`</div>
        </div>
      `),i?l.trim():o.trim()},r.renderInline=function(){var n=this,i=n.params,s=i.rotateEffect,o=i.cssClass,l=i.toolbar,u=F("div",{class:"picker picker-inline "+(s?"picker-3d":"")+" "+(o||"")},l&&n.renderToolbar(),F("div",{class:"picker-columns"},n.cols.map(function(c){return n.renderColumn(c)}),F("div",{class:"picker-center-highlight"})));return u},r.renderSheet=function(){var n=this,i=n.params,s=i.rotateEffect,o=i.cssClass,l=i.toolbar,u=F("div",{class:"sheet-modal picker picker-sheet "+(s?"picker-3d":"")+" "+(o||"")},l&&n.renderToolbar(),F("div",{class:"sheet-modal-inner picker-columns"},n.cols.map(function(c){return n.renderColumn(c)}),F("div",{class:"picker-center-highlight"})));return u},r.renderPopover=function(){var n=this,i=n.params,s=i.rotateEffect,o=i.cssClass,l=i.toolbar,u=F("div",{class:"popover picker-popover"},F("div",{class:"popover-inner"},F("div",{class:"picker "+(s?"picker-3d":"")+" "+(o||"")},l&&n.renderToolbar(),F("div",{class:"picker-columns"},n.cols.map(function(c){return n.renderColumn(c)}),F("div",{class:"picker-center-highlight"})))));return u},r.render=function(){var n=this;return n.params.render?n.params.render.call(n):n.inline?n.renderInline():n.isPopover()?n.renderPopover():n.renderSheet()},r.onOpen=function(){var n=this,i=n.initialized,s=n.$el,o=n.app,l=n.$inputEl,u=n.inline,c=n.value,d=n.params;n.opened=!0,n.closing=!1,n.opening=!0,n.attachResizeEvent(),s.find(".picker-column").each(function(p){var f=!0;(!i&&d.value||i&&c)&&(f=!1),n.initColumn(p,f)}),i?c&&n.setValue(c,0):c?n.setValue(c,0):d.value&&n.setValue(d.value,0),!u&&l&&l.length&&o.theme==="md"&&l.trigger("focus"),n.initialized=!0,s&&s.trigger("picker:open"),l&&l.trigger("picker:open"),n.emit("local::open pickerOpen",n)},r.onOpened=function(){var n=this;n.opening=!1,n.$el&&n.$el.trigger("picker:opened"),n.$inputEl&&n.$inputEl.trigger("picker:opened"),n.emit("local::opened pickerOpened",n)},r.onClose=function(){var n=this,i=n.app;if(n.opening=!1,n.closing=!0,n.detachResizeEvent(),n.cols.forEach(function(l){l.destroy&&l.destroy()}),n.$inputEl)if(i.theme==="md")n.$inputEl.trigger("blur");else{var s=n.$inputEl.attr("validate"),o=n.$inputEl.attr("required");s&&o&&i.input.validate(n.$inputEl)}n.$el&&n.$el.trigger("picker:close"),n.$inputEl&&n.$inputEl.trigger("picker:close"),n.emit("local::close pickerClose",n)},r.onClosed=function(){var n=this;n.opened=!1,n.closing=!1,n.inline||qr(function(){n.modal&&n.modal.el&&n.modal.destroy&&(n.params.routableModals||n.modal.destroy()),delete n.modal}),n.$el&&n.$el.trigger("picker:closed"),n.$inputEl&&n.$inputEl.trigger("picker:closed"),n.emit("local::closed pickerClosed",n)},r.open=function(){var n=this,i=n.app,s=n.opened,o=n.inline,l=n.$inputEl,u=n.$scrollToEl,c=n.params;if(!s){if(n.cols.length===0&&c.cols.length&&c.cols.forEach(function(m){n.cols.push(m)}),o){n.$el=T(n.render()),n.$el[0].f7Picker=n,n.$containerEl.append(n.$el),n.onOpen(),n.onOpened();return}var d=n.isPopover(),p=d?"popover":"sheet",f={targetEl:l,scrollToEl:u,content:n.render(),backdrop:typeof c.backdrop!="undefined"?c.backdrop:d,on:{open:function(){var g=this;n.modal=g,n.$el=d?g.$el.find(".picker"):g.$el,n.$el[0].f7Picker=n,n.onOpen()},opened:function(){n.onOpened()},close:function(){n.onClose()},closed:function(){n.onClosed()}}};if(p==="sheet"&&(f.push=c.sheetPush,f.swipeToClose=c.sheetSwipeToClose),c.routableModals&&n.view){var h;n.view.router.navigate({url:n.url,route:(h={path:n.url},h[p]=f,h)})}else n.modal=i[p].create(f),n.modal.open()}},r.close=function(){var n=this,i=n.opened,s=n.inline;if(!!i){if(s){n.onClose(),n.onClosed();return}n.params.routableModals&&n.view?n.view.router.back():n.modal.close()}},r.init=function(){var n=this;if(n.initInput(),n.inline){n.open(),n.emit("local::init pickerInit",n);return}!n.initialized&&n.params.value&&n.setValue(n.params.value),n.$inputEl&&n.attachInputEvents(),n.params.closeByOutsideClick&&n.attachHtmlEvents(),n.emit("local::init pickerInit",n)},r.destroy=function(){var n=this;if(!n.destroyed){var i=n.$el;n.emit("local::beforeDestroy pickerBeforeDestroy",n),i&&i.trigger("picker:beforedestroy"),n.close(),n.$inputEl&&n.detachInputEvents(),n.params.closeByOutsideClick&&n.detachHtmlEvents(),i&&i.length&&delete n.$el[0].f7Picker,$r(n),n.destroyed=!0}},M6(t,[{key:"view",get:function(){var n=this.app,i=this.params,s=this.$inputEl,o;return i.view?o=i.view:s&&(o=s.parents(".view").length&&s.parents(".view")[0].f7View),o||(o=n.views.main),o}}]),t}(rr),oN=O6,P6={name:"picker",static:{Picker:oN},create:function(){var t=this;t.picker=Ir({defaultSelector:".picker",constructor:oN,app:t,domProp:"f7Picker"}),t.picker.close=function(a){a===void 0&&(a=".picker");var n=T(a);if(n.length!==0){var i=n[0].f7Picker;!i||i&&!i.opened||i.close()}}},params:{picker:{updateValuesOnMomentum:!1,updateValuesOnTouchmove:!0,updateValuesOnMousewheel:!0,mousewheel:!0,rotateEffect:!1,momentumRatio:7,freeMode:!1,cols:[],containerEl:null,openIn:"auto",sheetPush:!1,sheetSwipeToClose:void 0,backdrop:void 0,formatValue:null,inputEl:null,inputReadOnly:!0,closeByOutsideClick:!0,scrollToInput:!0,scrollToEl:void 0,toolbar:!0,toolbarCloseText:"Done",cssClass:null,routableModals:!1,view:null,url:"select/",renderToolbar:null,render:null}}},D6={handle:function(t,r){var a=this,n=T(t),i=n[0].scrollTop,s=n[0].scrollHeight,o=n[0].offsetHeight,l=n[0].getAttribute("data-infinite-distance"),u=n.find(".virtual-list"),c,d=n.hasClass("infinite-scroll-top");if(l||(l=50),typeof l=="string"&&l.indexOf("%")>=0&&(l=parseInt(l,10)/100*o),l>o&&(l=o),d)i<l&&(n.trigger("infinite",r),a.emit("infinite",n[0],r));else if(i+o>=s-l){if(u.length>0&&(c=u.eq(-1)[0].f7VirtualList,c&&!c.reachEnd&&!c.params.updatableScroll))return;n.trigger("infinite",r),a.emit("infinite",n[0],r)}},create:function(t){var r=T(t),a=this;function n(i){a.infiniteScroll.handle(this,i)}r.each(function(i){i.f7InfiniteScrollHandler=n,i.addEventListener("scroll",i.f7InfiniteScrollHandler)})},destroy:function(t){var r=T(t);r.each(function(a){a.removeEventListener("scroll",a.f7InfiniteScrollHandler),delete a.f7InfiniteScrollHandler})}},F6={name:"infiniteScroll",create:function(){var t=this;En(t,{infiniteScroll:D6})},on:{tabMounted:function(t){var r=this,a=T(t),n=a.find(".infinite-scroll-content");a.is(".infinite-scroll-content")&&n.add(a),n.each(function(i){r.infiniteScroll.create(i)})},tabBeforeRemove:function(t){var r=T(t),a=this,n=r.find(".infinite-scroll-content");r.is(".infinite-scroll-content")&&n.add(r),n.each(function(i){a.infiniteScroll.destroy(i)})},pageInit:function(t){var r=this;t.$el.find(".infinite-scroll-content").each(function(a){r.infiniteScroll.create(a)})},pageBeforeRemove:function(t){var r=this;t.$el.find(".infinite-scroll-content").each(function(a){r.infiniteScroll.destroy(a)})}}};function Iw(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function L6(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,v1(e,t)}function v1(e,t){return v1=Object.setPrototypeOf||function(a,n){return a.__proto__=n,a},v1(e,t)}var z6=function(e){L6(t,e);function t(a,n){var i;i=e.call(this,{},[a])||this;var s=Iw(i),o=Ct(),l=Ft(),u=T(n),c=u.find(".ptr-preloader");s.$el=u,s.el=u[0],s.app=a,s.bottom=s.$el.hasClass("ptr-bottom"),s.useModulesParams({});var d=a.theme==="md",p=a.theme==="ios",f=a.theme==="aurora";s.done=function(){var me=d?c:u,$e=function Me(Oe){T(Oe.target).closest(c).length||(u.removeClass("ptr-transitioning ptr-pull-up ptr-pull-down ptr-closing"),u.trigger("ptr:done"),s.emit("local::done ptrDone",u[0]),me.off("transitionend",Me))};return me.on("transitionend",$e),u.removeClass("ptr-refreshing").addClass("ptr-transitioning ptr-closing"),s},s.refresh=function(){return u.hasClass("ptr-refreshing")||(u.addClass("ptr-transitioning ptr-refreshing"),u.trigger("ptr:refresh",s.done),s.emit("local::refresh ptrRefresh",u[0],s.done)),s},s.mousewheel=u.attr("data-ptr-mousewheel")==="true";var h,m,g,v={},b,y,w=!1,x=!1,k=!1,C=0,E,$,N,I,S,A,R=!1,O,D,z,U=u.parents(".page");if((U.find(".navbar").length>0||U.parents(".view").children(".navbars").length>0)&&(R=!0),U.hasClass("no-navbar")&&(R=!1),!s.bottom){var j=a.navbar.getElByPage(U[0]);if(j){var G=T(j),L=G.hasClass("navbar-large-transparent")||G.hasClass("navbar-large")&&G.hasClass("navbar-transparent"),V=G.hasClass("navbar-transparent")&&!G.hasClass("navbar-large");L?u.addClass("ptr-with-navbar-large-transparent"):V&&u.addClass("ptr-with-navbar-transparent")}}!R&&!s.bottom&&u.addClass("ptr-no-navbar"),u.attr("data-ptr-distance")?S=!0:d?I=66:p?I=44:f&&(I=38);function H(oe){oe===void 0&&(oe=0);var me=c.find(".preloader-inner-line"),$e=1/me.length;me.forEach(function(Me,Oe){var he=(oe-Oe*$e)/$e;Me.style.opacity=Math.max(Math.min(he,1),0)*.27})}function Y(){c.find(".preloader-inner-line").css("opacity","")}function K(oe){if(m)if(o.os==="android"){if("targetTouches"in oe&&oe.targetTouches.length>1)return}else return;u.hasClass("ptr-refreshing")||T(oe.target).closest(".sortable-handler, .ptr-ignore, .card-expandable.card-opened").length||(g=!1,A=!1,m=!0,b=void 0,N=void 0,oe.type==="touchstart"&&(h=oe.targetTouches[0].identifier),v.x=oe.type==="touchstart"?oe.targetTouches[0].pageX:oe.pageX,v.y=oe.type==="touchstart"?oe.targetTouches[0].pageY:oe.pageY)}function Z(oe){if(!!m){var me,$e,Me;if(oe.type==="touchmove"){if(h&&oe.touches)for(var Oe=0;Oe<oe.touches.length;Oe+=1)oe.touches[Oe].identifier===h&&(Me=oe.touches[Oe]);Me||(Me=oe.targetTouches[0]),me=Me.pageX,$e=Me.pageY}else me=oe.pageX,$e=oe.pageY;if(!(!me||!$e)){if(typeof b=="undefined"&&(b=!!(b||Math.abs($e-v.y)>Math.abs(me-v.x))),!b){m=!1;return}if($=u[0].scrollTop,!g){u.removeClass("ptr-transitioning"),p&&H(0);var he;if(O=u[0].scrollHeight,D=u[0].offsetHeight,s.bottom&&(z=O-D),$>O){m=!1;return}var Re=T(oe.target).closest(".ptr-watch-scroll");if(Re.length&&Re.each(function(ve){ve!==n&&ve.scrollHeight>ve.offsetHeight&&T(ve).css("overflow")==="auto"&&(!s.bottom&&ve.scrollTop>0||s.bottom&&ve.scrollTop<ve.scrollHeight-ve.offsetHeight)&&(he=!0)}),he){m=!1;return}S&&(I=u.attr("data-ptr-distance"),I.indexOf("%")>=0&&(I=O*parseInt(I,10)/100)),C=u.hasClass("ptr-refreshing")?I:0,O===D||o.os!=="ios"||d?x=!0:x=!1,k=!1}g=!0,y=$e-v.y,typeof N=="undefined"&&(s.bottom?$!==z:$!==0)&&(N=!0);var Ne=s.bottom?y<0&&$>=z||$>z:y>0&&$<=0||$<0;if(Ne){o.os==="ios"&&parseInt(o.osVersion.split(".")[0],10)>7&&(!s.bottom&&$===0&&!N&&(x=!0),s.bottom&&$===z&&!N&&(x=!0)),!x&&s.bottom&&!d&&(u.css("-webkit-overflow-scrolling","auto"),u.scrollTop(z),k=!0),x||k?(oe.cancelable&&oe.preventDefault(),E=(s.bottom?-1*Math.pow(Math.abs(y),.85):Math.pow(y,.85))+C,d?c.transform("translate3d(0,"+E+"px,0)").find(".ptr-arrow").transform("rotate("+(180*(Math.abs(y)/66)+100)+"deg)"):(s.bottom||p?u.children().transform("translate3d(0,"+E+"px,0)"):u.transform("translate3d(0,"+E+"px,0)"),p&&c.transform("translate3d(0,0px,0)"))):p&&!s.bottom&&c.transform("translate3d(0,"+$+"px,0)");var je;p&&!w&&(je=x||k?Math.pow(Math.abs(y),.85)/I:Math.abs(y)/(I*2),H(je)),(x||k)&&Math.pow(Math.abs(y),.85)>I||!x&&Math.abs(y)>=I*2?(w=!0,u.addClass("ptr-pull-up").removeClass("ptr-pull-down"),Y()):(w=!1,u.removeClass("ptr-pull-up").addClass("ptr-pull-down")),A||(u.trigger("ptr:pullstart"),s.emit("local::pullStart ptrPullStart",u[0]),A=!0),u.trigger("ptr:pullmove",{event:oe,scrollTop:$,translate:E,touchesDiff:y}),s.emit("local::pullMove ptrPullMove",u[0],{event:oe,scrollTop:$,translate:E,touchesDiff:y})}else A=!1,u.removeClass("ptr-pull-up ptr-pull-down"),w=!1}}}function le(oe){if(oe.type==="touchend"&&oe.changedTouches&&oe.changedTouches.length>0&&h&&oe.changedTouches[0].identifier!==h){m=!1,b=!1,g=!1,h=null;return}if(!m||!g){m=!1,g=!1;return}E&&(u.addClass("ptr-transitioning"),E=0),d?c.transform("").find(".ptr-arrow").transform(""):(c.transform(""),s.bottom||p?u.children().transform(""):u.transform("")),!x&&s.bottom&&!d&&u.css("-webkit-overflow-scrolling",""),w?(u.addClass("ptr-refreshing"),u.trigger("ptr:refresh",s.done),s.emit("local::refresh ptrRefresh",u[0],s.done)):u.removeClass("ptr-pull-down"),m=!1,g=!1,A&&(u.trigger("ptr:pullend"),s.emit("local::pullEnd ptrPullEnd",u[0]))}var de,ie,ue=!0,pe=0;function Se(){ue=!0,ie=!1,pe=0,E&&(u.addClass("ptr-transitioning"),E=0),d?c.transform("").find(".ptr-arrow").transform(""):(c.transform(""),s.bottom?u.children().transform(""):u.transform("")),w?(u.addClass("ptr-refreshing"),u.trigger("ptr:refresh",s.done),s.emit("local::refresh ptrRefresh",u[0],s.done)):u.removeClass("ptr-pull-down"),A&&(u.trigger("ptr:pullend"),s.emit("local::pullEnd ptrPullEnd",u[0]))}function ke(oe){if(!!ue){var me=oe.deltaX,$e=oe.deltaY;if(!(Math.abs(me)>Math.abs($e))&&!u.hasClass("ptr-refreshing")&&!T(oe.target).closest(".sortable-handler, .ptr-ignore, .card-expandable.card-opened").length){if(clearTimeout(de),$=u[0].scrollTop,!ie){u.removeClass("ptr-transitioning"),p&&H(0);var Me;if(O=u[0].scrollHeight,D=u[0].offsetHeight,s.bottom&&(z=O-D),$>O){ue=!1;return}var Oe=T(oe.target).closest(".ptr-watch-scroll");if(Oe.length&&Oe.each(function(Ne){Ne!==n&&Ne.scrollHeight>Ne.offsetHeight&&T(Ne).css("overflow")==="auto"&&(!s.bottom&&Ne.scrollTop>0||s.bottom&&Ne.scrollTop<Ne.scrollHeight-Ne.offsetHeight)&&(Me=!0)}),Me){ue=!1;return}S&&(I=u.attr("data-ptr-distance"),I.indexOf("%")>=0&&(I=O*parseInt(I,10)/100))}g=!0,pe-=$e,y=pe,typeof N=="undefined"&&(s.bottom?$!==z:$!==0)&&(N=!0);var he=s.bottom?y<0&&$>=z||$>z:y>0&&$<=0||$<0;if(he){oe.cancelable&&oe.preventDefault(),E=y,Math.abs(E)>I&&(E=I+Math.pow(Math.abs(E)-I,.7),s.bottom&&(E=-E)),d?c.transform("translate3d(0,"+E+"px,0)").find(".ptr-arrow").transform("rotate("+(180*(Math.abs(y)/66)+100)+"deg)"):s.bottom?u.children().transform("translate3d(0,"+E+"px,0)"):(u.transform("translate3d(0,"+E+"px,0)"),p&&c.transform("translate3d(0,"+-E+"px,0)"));var Re;p&&!w&&(Re=Math.abs(E)/I,H(Re)),Math.abs(E)>I?(w=!0,u.addClass("ptr-pull-up").removeClass("ptr-pull-down"),Y()):(w=!1,u.removeClass("ptr-pull-up").addClass("ptr-pull-down")),A||(u.trigger("ptr:pullstart"),s.emit("local::pullStart ptrPullStart",u[0]),A=!0),u.trigger("ptr:pullmove",{event:oe,scrollTop:$,translate:E,touchesDiff:y}),s.emit("local::pullMove ptrPullMove",u[0],{event:oe,scrollTop:$,translate:E,touchesDiff:y})}else A=!1,u.removeClass("ptr-pull-up ptr-pull-down"),w=!1;de=setTimeout(Se,300)}}}return!U.length||!u.length||(u[0].f7PullToRefresh=s,s.attachEvents=function(){var me=l.passiveListener?{passive:!0}:!1;u.on(a.touchEvents.start,K,me),a.on("touchmove:active",Z),a.on("touchend:passive",le),s.mousewheel&&!s.bottom&&u.on("wheel",ke)},s.detachEvents=function(){var me=l.passiveListener?{passive:!0}:!1;u.off(a.touchEvents.start,K,me),a.off("touchmove:active",Z),a.off("touchend:passive",le),s.mousewheel&&!s.bottom&&u.off("wheel",ke)},s.useModules(),s.init()),s||Iw(i)}var r=t.prototype;return r.init=function(){var n=this;n.attachEvents()},r.destroy=function(){var n=this;n.emit("local::beforeDestroy ptrBeforeDestroy",n),n.$el.trigger("ptr:beforedestroy"),delete n.el.f7PullToRefresh,n.detachEvents(),$r(n),n=null},t}(rr),lN=z6,B6={name:"pullToRefresh",create:function(){var t=this;t.ptr=se(Ir({defaultSelector:".ptr-content",constructor:lN,app:t,domProp:"f7PullToRefresh"}),{done:function(a){var n=t.ptr.get(a);if(n)return n.done()},refresh:function(a){var n=t.ptr.get(a);if(n)return n.refresh()}})},static:{PullToRefresh:lN},on:{tabMounted:function(t){var r=this,a=T(t),n=a.find(".ptr-content");a.is(".ptr-content")&&n.add(a),n.each(function(i){r.ptr.create(i)})},tabBeforeRemove:function(t){var r=T(t),a=this,n=r.find(".ptr-content");r.is(".ptr-content")&&n.add(r),n.each(function(i){a.ptr.destroy(i)})},pageInit:function(t){var r=this;t.$el.find(".ptr-content").each(function(a){r.ptr.create(a)})},pageBeforeRemove:function(t){var r=this;t.$el.find(".ptr-content").each(function(a){r.ptr.destroy(a)})}}},V6={destroy:function(t){var r=T(t).closest(".page");!r.length||r[0].f7LazyDestroy&&r[0].f7LazyDestroy()},create:function(t){var r=this,a=De(),n=Ft(),i=T(t).closest(".page").eq(0),s=i.find(".lazy");if(s.length===0&&!i.hasClass("lazy"))return;var o=r.params.lazy.placeholder;o!==!1&&s.each(function(g){T(g).attr("data-src")&&!T(g).attr("src")&&T(g).attr("src",o)});var l=[],u=!1;function c(g){l.indexOf(g)>=0&&l.splice(l.indexOf(g),1),u=!1,r.params.lazy.sequential&&l.length>0&&(u=!0,r.lazy.loadImage(l[0],c))}function d(g,v){g.forEach(function(b){if(b.isIntersecting){if(r.params.lazy.sequential&&u){l.indexOf(b.target)<0&&l.push(b.target);return}u=!0,r.lazy.loadImage(b.target,c),v.unobserve(b.target)}})}if(r.params.lazy.observer&&n.intersectionObserver){var p=i[0].f7LazyObserver;p||(p=new a.IntersectionObserver(d,{root:i[0]})),s.each(function(g){g.f7LazyObserverAdded||(g.f7LazyObserverAdded=!0,p.observe(g))}),i[0].f7LazyDestroy||(i[0].f7LazyDestroy=function(){p.disconnect(),delete i[0].f7LazyDestroy,delete i[0].f7LazyObserver});return}function f(){r.lazy.load(i,function(g){if(r.params.lazy.sequential&&u){l.indexOf(g)<0&&l.push(g);return}u=!0,r.lazy.loadImage(g,c)})}function h(){i[0].f7LazyAttached=!0,i.on("lazy",f),i.on("scroll",f,!0),i.find(".tab").on("tab:mounted tab:show",f),r.on("resize",f)}function m(){i[0].f7LazyAttached=!1,delete i[0].f7LazyAttached,i.off("lazy",f),i.off("scroll",f,!0),i.find(".tab").off("tab:mounted tab:show",f),r.off("resize",f)}i[0].f7LazyDestroy||(i[0].f7LazyDestroy=m),i[0].f7LazyAttached||h(),f()},isInViewport:function(t){var r=this,a=t.getBoundingClientRect(),n=r.params.lazy.threshold||0;return a.top>=0-n&&a.left>=0-n&&a.top<=r.height+n&&a.left<=r.width+n},loadImage:function(t,r){var a=this,n=De(),i=T(t),s=i.attr("data-background"),o=s||i.attr("data-src");function l(){i.removeClass("lazy").addClass("lazy-loaded"),s?i.css("background-image","url("+o+")"):o&&i.attr("src",o),r&&r(t),i.trigger("lazy:loaded"),a.emit("lazyLoaded",i[0])}if(!o){i.trigger("lazy:load"),a.emit("lazyLoad",i[0]),l();return}function u(){i.removeClass("lazy").addClass("lazy-loaded"),s?i.css("background-image","url("+(a.params.lazy.placeholder||"")+")"):i.attr("src",a.params.lazy.placeholder||""),r&&r(t),i.trigger("lazy:error"),a.emit("lazyError",i[0])}var c=new n.Image;c.onload=l,c.onerror=u,c.src=o,i.removeAttr("data-src").removeAttr("data-background"),i.trigger("lazy:load"),a.emit("lazyLoad",i[0])},load:function(t,r){var a=this,n=T(t);n.hasClass("page")||(n=n.parents(".page").eq(0)),n.length!==0&&n.find(".lazy").each(function(i){var s=T(i);s.parents(".tab:not(.tab-active)").length>0||a.lazy.isInViewport(i)&&(r?r(i):a.lazy.loadImage(i))})}},W6={name:"lazy",params:{lazy:{placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQMAAAAl21bKAAAAA1BMVEXCwsK592mkAAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",threshold:0,sequential:!0,observer:!0}},create:function(){var t=this;En(t,{lazy:V6})},on:{pageInit:function(t){var r=this;(t.$el.find(".lazy").length>0||t.$el.hasClass("lazy"))&&r.lazy.create(t.$el)},pageAfterIn:function(t){var r=this,a=Ft();r.params.lazy.observer&&a.intersectionObserver||(t.$el.find(".lazy").length>0||t.$el.hasClass("lazy"))&&r.lazy.create(t.$el)},pageBeforeRemove:function(t){var r=this;(t.$el.find(".lazy").length>0||t.$el.hasClass("lazy"))&&r.lazy.destroy(t.$el)},tabMounted:function(t){var r=this,a=T(t);(a.find(".lazy").length>0||a.hasClass("lazy"))&&r.lazy.create(a)},tabBeforeRemove:function(t){var r=this,a=Ft();if(!(r.params.lazy.observer&&a.intersectionObserver)){var n=T(t);(n.find(".lazy").length>0||n.hasClass("lazy"))&&r.lazy.destroy(n)}}}};function fg(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function H6(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,b1(e,t)}function b1(e,t){return b1=Object.setPrototypeOf||function(a,n){return a.__proto__=n,a},b1(e,t)}var U6=function(e){H6(t,e);function t(a,n){var i;n===void 0&&(n={}),i=e.call(this,n,[a])||this;var s=fg(i),o={};s.useModulesParams(o),s.params=se(o,n);var l=T(s.params.el);if(l.length===0)return fg(i);if(s.$el=l,s.el=l[0],s.$el[0].f7DataTable){var u=s.$el[0].f7DataTable;return s.destroy(),u||fg(i)}s.$el[0].f7DataTable=s,se(s,{collapsible:l.hasClass("data-table-collapsible"),$headerEl:l.find(".data-table-header"),$headerSelectedEl:l.find(".data-table-header-selected")});function c(p){if(!(p.detail&&p.detail.sentByF7DataTable)){var f=T(this),h=f[0].checked,m=f.parents("td,th").index();if(f.parents("thead").length>0)m===0&&l.find("tbody tr")[h?"addClass":"removeClass"]("data-table-row-selected"),l.find("tbody tr td:nth-child("+(m+1)+") input").prop("checked",h).trigger("change",{sentByF7DataTable:!0}),f.prop("indeterminate",!1);else{m===0&&f.parents("tr")[h?"addClass":"removeClass"]("data-table-row-selected");var g=l.find("tbody .checkbox-cell:nth-child("+(m+1)+') input[type="checkbox"]:checked').length,v=l.find("tbody tr").length,b=l.find("thead .checkbox-cell:nth-child("+(m+1)+') input[type="checkbox"]');h?g===v&&b.prop("checked",!0).trigger("change",{sentByF7DataTable:!0}):b.prop("checked",!1),b.prop("indeterminate",g>0&&g<v)}s.checkSelectedHeader()}}function d(){var p=T(this),f=p.hasClass("sortable-cell-active"),h=p.hasClass("sortable-desc")?"desc":"asc",m;f?(m=h==="desc"?"asc":"desc",p.removeClass("sortable-desc sortable-asc").addClass("sortable-"+m)):(l.find("thead .sortable-cell-active").removeClass("sortable-cell-active"),p.addClass("sortable-cell-active"),m=h),p.trigger("datatable:sort",m),s.emit("local::sort dataTableSort",s,m)}return s.attachEvents=function(){s.$el.on("change",'.checkbox-cell input[type="checkbox"]',c),s.$el.find("thead .sortable-cell").on("click",d)},s.detachEvents=function(){s.$el.off("change",'.checkbox-cell input[type="checkbox"]',c),s.$el.find("thead .sortable-cell").off("click",d)},s.useModules(),s.init(),s||fg(i)}var r=t.prototype;return r.setCollapsibleLabels=function(){var n=this;!n.collapsible||n.$el.find("tbody td:not(.checkbox-cell)").each(function(i){var s=T(i),o=s.index(),l=s.attr("data-collapsible-title");!l&&l!==""&&s.attr("data-collapsible-title",n.$el.find("thead th").eq(o).text())})},r.checkSelectedHeader=function(){var n=this;if(n.$headerEl.length>0&&n.$headerSelectedEl.length>0){var i=n.$el.find("tbody .checkbox-cell input:checked").length;n.$el[i>0?"addClass":"removeClass"]("data-table-has-checked"),n.$headerSelectedEl.find(".data-table-selected-count").text(i)}},r.init=function(){var n=this;n.attachEvents(),n.setCollapsibleLabels(),n.checkSelectedHeader()},r.destroy=function(){var n=this;n.$el.trigger("datatable:beforedestroy"),n.emit("local::beforeDestroy dataTableBeforeDestroy",n),n.attachEvents(),n.$el[0]&&(n.$el[0].f7DataTable=null,delete n.$el[0].f7DataTable),$r(n),n=null},t}(rr),uN=U6,j6={name:"dataTable",static:{DataTable:uN},create:function(){var t=this;t.dataTable=Ir({defaultSelector:".data-table",constructor:uN,app:t,domProp:"f7DataTable"})},on:{tabBeforeRemove:function(t){var r=this;T(t).find(".data-table-init").each(function(a){r.dataTable.destroy(a)})},tabMounted:function(t){var r=this;T(t).find(".data-table-init").each(function(a){r.dataTable.create({el:a})})},pageBeforeRemove:function(t){var r=this;t.$el.find(".data-table-init").each(function(a){r.dataTable.destroy(a)})},pageInit:function(t){var r=this;t.$el.find(".data-table-init").each(function(a){r.dataTable.create({el:a})})}},vnode:{"data-table-init":{insert:function(t){var r=this,a=t.elm;r.dataTable.create({el:a})},destroy:function(t){var r=this,a=t.elm;r.dataTable.destroy(a)}}}};function y1(){return y1=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},y1.apply(this,arguments)}var G6={morphOpen:function(t,r){var a=this,n=T(t),i=T(r);if(i.length!==0){i.transition(0).addClass("fab-morph-target-visible");var s={width:i[0].offsetWidth,height:i[0].offsetHeight,offset:i.offset(),borderRadius:i.css("border-radius"),zIndex:i.css("z-index")},o={width:n[0].offsetWidth,height:n[0].offsetHeight,offset:n.offset(),translateX:Os(n[0],"x"),translateY:Os(n[0],"y")};n[0].f7FabMorphData={$targetEl:i,target:s,fab:o};var l=o.offset.left+o.width/2-(s.offset.left+s.width/2)-o.translateX,u=o.offset.top+o.height/2-(s.offset.top+s.height/2)-o.translateY,c=s.width/o.width,d=s.height/o.height,p=Math.ceil(parseInt(s.borderRadius,10)/Math.max(c,d));p>0&&(p+=2),n[0].f7FabMorphResizeHandler=function(){n.transition(0).transform(""),i.transition(0),s.width=i[0].offsetWidth,s.height=i[0].offsetHeight,s.offset=i.offset(),o.offset=n.offset();var h=o.offset.left+o.width/2-(s.offset.left+s.width/2)-o.translateX,m=o.offset.top+o.height/2-(s.offset.top+s.height/2)-o.translateY,g=s.width/o.width,v=s.height/o.height;n.transform("translate3d("+-h+"px, "+-m+"px, 0) scale("+g+", "+v+")")},i.css("opacity",0).transform("scale("+1/c+", "+1/d+")"),n.addClass("fab-opened").css("z-index",s.zIndex-1).transform("translate3d("+-l+"px, "+-u+"px, 0)"),n.transitionEnd(function(){i.transition(""),aa(function(){i.css("opacity",1).transform("scale(1,1)"),n.transform("translate3d("+-l+"px, "+-u+"px, 0) scale("+c+", "+d+")").css("border-radius",p+"px").css("box-shadow","none").css("opacity","0")}),a.on("resize",n[0].f7FabMorphResizeHandler),i.parents(".page-content").length>0&&i.parents(".page-content").on("scroll",n[0].f7FabMorphResizeHandler)})}},morphClose:function(t){var r=this,a=T(t),n=a[0].f7FabMorphData;if(!!n){var i=n.$targetEl,s=n.target,o=n.fab;if(i.length!==0){var l=o.offset.left+o.width/2-(s.offset.left+s.width/2)-o.translateX,u=o.offset.top+o.height/2-(s.offset.top+s.height/2)-o.translateY,c=s.width/o.width,d=s.height/o.height;r.off("resize",a[0].f7FabMorphResizeHandler),i.parents(".page-content").length>0&&i.parents(".page-content").off("scroll",a[0].f7FabMorphResizeHandler),i.css("opacity",0).transform("scale("+1/c+", "+1/d+")"),a.transition("").css("box-shadow","").css("border-radius","").css("opacity","1").transform("translate3d("+-l+"px, "+-u+"px, 0)"),a.transitionEnd(function(){a.css("z-index","").removeClass("fab-opened").transform(""),aa(function(){a.transitionEnd(function(){i.removeClass("fab-morph-target-visible").css("opacity","").transform("").transition("")})})})}}},open:function(t,r){var a=this,n=T(t).eq(0),i=n.find(".fab-buttons");if(!!n.length&&!n.hasClass("fab-opened")&&!(!i.length&&!n.hasClass("fab-morph"))){if(a.fab.openedEl){if(a.fab.openedEl===n[0])return;a.fab.close(a.fab.openedEl)}a.fab.openedEl=n[0],n.hasClass("fab-morph")?a.fab.morphOpen(n,r||n.attr("data-morph-to")):n.addClass("fab-opened"),n.siblings(".fab-backdrop").addClass("backdrop-in"),n.trigger("fab:open")}},close:function(t){t===void 0&&(t=".fab-opened");var r=this,a=T(t).eq(0),n=a.find(".fab-buttons");!a.length||!a.hasClass("fab-opened")||!n.length&&!a.hasClass("fab-morph")||(r.fab.openedEl=null,a.hasClass("fab-morph")?r.fab.morphClose(a):a.removeClass("fab-opened"),a.siblings(".fab-backdrop").removeClass("backdrop-in"),a.trigger("fab:close"))},toggle:function(t){var r=this,a=T(t);a.hasClass("fab-opened")?r.fab.close(t):r.fab.open(t)}},q6={name:"fab",create:function(){var t=this;En(t,{fab:y1({openedEl:null},G6)})},clicks:{".fab > a":function(t){var r=this;r.fab.toggle(t.parents(".fab"))},".fab-open":function(t,r){r===void 0&&(r={});var a=this;a.fab.open(r.fab)},".fab-close":function(t,r){r===void 0&&(r={});var a=this;a.fab.close(r.fab)},".fab-backdrop":function(){var t=this;t.fab.close()}}},Tw=[{base:"A",letters:"A\u24B6\uFF21\xC0\xC1\xC2\u1EA6\u1EA4\u1EAA\u1EA8\xC3\u0100\u0102\u1EB0\u1EAE\u1EB4\u1EB2\u0226\u01E0\xC4\u01DE\u1EA2\xC5\u01FA\u01CD\u0200\u0202\u1EA0\u1EAC\u1EB6\u1E00\u0104\u023A\u2C6F"},{base:"AA",letters:"\uA732"},{base:"AE",letters:"\xC6\u01FC\u01E2"},{base:"AO",letters:"\uA734"},{base:"AU",letters:"\uA736"},{base:"AV",letters:"\uA738\uA73A"},{base:"AY",letters:"\uA73C"},{base:"B",letters:"B\u24B7\uFF22\u1E02\u1E04\u1E06\u0243\u0182\u0181"},{base:"C",letters:"C\u24B8\uFF23\u0106\u0108\u010A\u010C\xC7\u1E08\u0187\u023B\uA73E"},{base:"D",letters:"D\u24B9\uFF24\u1E0A\u010E\u1E0C\u1E10\u1E12\u1E0E\u0110\u018B\u018A\u0189\uA779"},{base:"DZ",letters:"\u01F1\u01C4"},{base:"Dz",letters:"\u01F2\u01C5"},{base:"E",letters:"E\u24BA\uFF25\xC8\xC9\xCA\u1EC0\u1EBE\u1EC4\u1EC2\u1EBC\u0112\u1E14\u1E16\u0114\u0116\xCB\u1EBA\u011A\u0204\u0206\u1EB8\u1EC6\u0228\u1E1C\u0118\u1E18\u1E1A\u0190\u018E"},{base:"F",letters:"F\u24BB\uFF26\u1E1E\u0191\uA77B"},{base:"G",letters:"G\u24BC\uFF27\u01F4\u011C\u1E20\u011E\u0120\u01E6\u0122\u01E4\u0193\uA7A0\uA77D\uA77E"},{base:"H",letters:"H\u24BD\uFF28\u0124\u1E22\u1E26\u021E\u1E24\u1E28\u1E2A\u0126\u2C67\u2C75\uA78D"},{base:"I",letters:"I\u24BE\uFF29\xCC\xCD\xCE\u0128\u012A\u012C\u0130\xCF\u1E2E\u1EC8\u01CF\u0208\u020A\u1ECA\u012E\u1E2C\u0197"},{base:"J",letters:"J\u24BF\uFF2A\u0134\u0248"},{base:"K",letters:"K\u24C0\uFF2B\u1E30\u01E8\u1E32\u0136\u1E34\u0198\u2C69\uA740\uA742\uA744\uA7A2"},{base:"L",letters:"L\u24C1\uFF2C\u013F\u0139\u013D\u1E36\u1E38\u013B\u1E3C\u1E3A\u0141\u023D\u2C62\u2C60\uA748\uA746\uA780"},{base:"LJ",letters:"\u01C7"},{base:"Lj",letters:"\u01C8"},{base:"M",letters:"M\u24C2\uFF2D\u1E3E\u1E40\u1E42\u2C6E\u019C"},{base:"N",letters:"N\u24C3\uFF2E\u01F8\u0143\xD1\u1E44\u0147\u1E46\u0145\u1E4A\u1E48\u0220\u019D\uA790\uA7A4"},{base:"NJ",letters:"\u01CA"},{base:"Nj",letters:"\u01CB"},{base:"O",letters:"O\u24C4\uFF2F\xD2\xD3\xD4\u1ED2\u1ED0\u1ED6\u1ED4\xD5\u1E4C\u022C\u1E4E\u014C\u1E50\u1E52\u014E\u022E\u0230\xD6\u022A\u1ECE\u0150\u01D1\u020C\u020E\u01A0\u1EDC\u1EDA\u1EE0\u1EDE\u1EE2\u1ECC\u1ED8\u01EA\u01EC\xD8\u01FE\u0186\u019F\uA74A\uA74C"},{base:"OI",letters:"\u01A2"},{base:"OO",letters:"\uA74E"},{base:"OU",letters:"\u0222"},{base:"OE",letters:"\x8C\u0152"},{base:"oe",letters:"\x9C\u0153"},{base:"P",letters:"P\u24C5\uFF30\u1E54\u1E56\u01A4\u2C63\uA750\uA752\uA754"},{base:"Q",letters:"Q\u24C6\uFF31\uA756\uA758\u024A"},{base:"R",letters:"R\u24C7\uFF32\u0154\u1E58\u0158\u0210\u0212\u1E5A\u1E5C\u0156\u1E5E\u024C\u2C64\uA75A\uA7A6\uA782"},{base:"S",letters:"S\u24C8\uFF33\u1E9E\u015A\u1E64\u015C\u1E60\u0160\u1E66\u1E62\u1E68\u0218\u015E\u2C7E\uA7A8\uA784"},{base:"T",letters:"T\u24C9\uFF34\u1E6A\u0164\u1E6C\u021A\u0162\u1E70\u1E6E\u0166\u01AC\u01AE\u023E\uA786"},{base:"TZ",letters:"\uA728"},{base:"U",letters:"U\u24CA\uFF35\xD9\xDA\xDB\u0168\u1E78\u016A\u1E7A\u016C\xDC\u01DB\u01D7\u01D5\u01D9\u1EE6\u016E\u0170\u01D3\u0214\u0216\u01AF\u1EEA\u1EE8\u1EEE\u1EEC\u1EF0\u1EE4\u1E72\u0172\u1E76\u1E74\u0244"},{base:"V",letters:"V\u24CB\uFF36\u1E7C\u1E7E\u01B2\uA75E\u0245"},{base:"VY",letters:"\uA760"},{base:"W",letters:"W\u24CC\uFF37\u1E80\u1E82\u0174\u1E86\u1E84\u1E88\u2C72"},{base:"X",letters:"X\u24CD\uFF38\u1E8A\u1E8C"},{base:"Y",letters:"Y\u24CE\uFF39\u1EF2\xDD\u0176\u1EF8\u0232\u1E8E\u0178\u1EF6\u1EF4\u01B3\u024E\u1EFE"},{base:"Z",letters:"Z\u24CF\uFF3A\u0179\u1E90\u017B\u017D\u1E92\u1E94\u01B5\u0224\u2C7F\u2C6B\uA762"},{base:"a",letters:"a\u24D0\uFF41\u1E9A\xE0\xE1\xE2\u1EA7\u1EA5\u1EAB\u1EA9\xE3\u0101\u0103\u1EB1\u1EAF\u1EB5\u1EB3\u0227\u01E1\xE4\u01DF\u1EA3\xE5\u01FB\u01CE\u0201\u0203\u1EA1\u1EAD\u1EB7\u1E01\u0105\u2C65\u0250"},{base:"aa",letters:"\uA733"},{base:"ae",letters:"\xE6\u01FD\u01E3"},{base:"ao",letters:"\uA735"},{base:"au",letters:"\uA737"},{base:"av",letters:"\uA739\uA73B"},{base:"ay",letters:"\uA73D"},{base:"b",letters:"b\u24D1\uFF42\u1E03\u1E05\u1E07\u0180\u0183\u0253"},{base:"c",letters:"c\u24D2\uFF43\u0107\u0109\u010B\u010D\xE7\u1E09\u0188\u023C\uA73F\u2184"},{base:"d",letters:"d\u24D3\uFF44\u1E0B\u010F\u1E0D\u1E11\u1E13\u1E0F\u0111\u018C\u0256\u0257\uA77A"},{base:"dz",letters:"\u01F3\u01C6"},{base:"e",letters:"e\u24D4\uFF45\xE8\xE9\xEA\u1EC1\u1EBF\u1EC5\u1EC3\u1EBD\u0113\u1E15\u1E17\u0115\u0117\xEB\u1EBB\u011B\u0205\u0207\u1EB9\u1EC7\u0229\u1E1D\u0119\u1E19\u1E1B\u0247\u025B\u01DD"},{base:"f",letters:"f\u24D5\uFF46\u1E1F\u0192\uA77C"},{base:"g",letters:"g\u24D6\uFF47\u01F5\u011D\u1E21\u011F\u0121\u01E7\u0123\u01E5\u0260\uA7A1\u1D79\uA77F"},{base:"h",letters:"h\u24D7\uFF48\u0125\u1E23\u1E27\u021F\u1E25\u1E29\u1E2B\u1E96\u0127\u2C68\u2C76\u0265"},{base:"hv",letters:"\u0195"},{base:"i",letters:"i\u24D8\uFF49\xEC\xED\xEE\u0129\u012B\u012D\xEF\u1E2F\u1EC9\u01D0\u0209\u020B\u1ECB\u012F\u1E2D\u0268\u0131"},{base:"j",letters:"j\u24D9\uFF4A\u0135\u01F0\u0249"},{base:"k",letters:"k\u24DA\uFF4B\u1E31\u01E9\u1E33\u0137\u1E35\u0199\u2C6A\uA741\uA743\uA745\uA7A3"},{base:"l",letters:"l\u24DB\uFF4C\u0140\u013A\u013E\u1E37\u1E39\u013C\u1E3D\u1E3B\u017F\u0142\u019A\u026B\u2C61\uA749\uA781\uA747"},{base:"lj",letters:"\u01C9"},{base:"m",letters:"m\u24DC\uFF4D\u1E3F\u1E41\u1E43\u0271\u026F"},{base:"n",letters:"n\u24DD\uFF4E\u01F9\u0144\xF1\u1E45\u0148\u1E47\u0146\u1E4B\u1E49\u019E\u0272\u0149\uA791\uA7A5"},{base:"nj",letters:"\u01CC"},{base:"o",letters:"o\u24DE\uFF4F\xF2\xF3\xF4\u1ED3\u1ED1\u1ED7\u1ED5\xF5\u1E4D\u022D\u1E4F\u014D\u1E51\u1E53\u014F\u022F\u0231\xF6\u022B\u1ECF\u0151\u01D2\u020D\u020F\u01A1\u1EDD\u1EDB\u1EE1\u1EDF\u1EE3\u1ECD\u1ED9\u01EB\u01ED\xF8\u01FF\u0254\uA74B\uA74D\u0275"},{base:"oi",letters:"\u01A3"},{base:"ou",letters:"\u0223"},{base:"oo",letters:"\uA74F"},{base:"p",letters:"p\u24DF\uFF50\u1E55\u1E57\u01A5\u1D7D\uA751\uA753\uA755"},{base:"q",letters:"q\u24E0\uFF51\u024B\uA757\uA759"},{base:"r",letters:"r\u24E1\uFF52\u0155\u1E59\u0159\u0211\u0213\u1E5B\u1E5D\u0157\u1E5F\u024D\u027D\uA75B\uA7A7\uA783"},{base:"s",letters:"s\u24E2\uFF53\xDF\u015B\u1E65\u015D\u1E61\u0161\u1E67\u1E63\u1E69\u0219\u015F\u023F\uA7A9\uA785\u1E9B"},{base:"t",letters:"t\u24E3\uFF54\u1E6B\u1E97\u0165\u1E6D\u021B\u0163\u1E71\u1E6F\u0167\u01AD\u0288\u2C66\uA787"},{base:"tz",letters:"\uA729"},{base:"u",letters:"u\u24E4\uFF55\xF9\xFA\xFB\u0169\u1E79\u016B\u1E7B\u016D\xFC\u01DC\u01D8\u01D6\u01DA\u1EE7\u016F\u0171\u01D4\u0215\u0217\u01B0\u1EEB\u1EE9\u1EEF\u1EED\u1EF1\u1EE5\u1E73\u0173\u1E77\u1E75\u0289"},{base:"v",letters:"v\u24E5\uFF56\u1E7D\u1E7F\u028B\uA75F\u028C"},{base:"vy",letters:"\uA761"},{base:"w",letters:"w\u24E6\uFF57\u1E81\u1E83\u0175\u1E87\u1E85\u1E98\u1E89\u2C73"},{base:"x",letters:"x\u24E7\uFF58\u1E8B\u1E8D"},{base:"y",letters:"y\u24E8\uFF59\u1EF3\xFD\u0177\u1EF9\u0233\u1E8F\xFF\u1EF7\u1E99\u1EF5\u01B4\u024F\u1EFF"},{base:"z",letters:"z\u24E9\uFF5A\u017A\u1E91\u017C\u017E\u1E93\u1E95\u01B6\u0225\u0240\u2C6C\uA763"}],iO={};for(var hg=0;hg<Tw.length;hg+=1)for(var cN=Tw[hg].letters,Nw=0;Nw<cN.length;Nw+=1)iO[cN[Nw]]=Tw[hg].base;function Aw(e){return e.replace(/[^\u0000-\u007E]/g,function(t){return iO[t]||t})}function mg(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function X6(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,w1(e,t)}function w1(e,t){return w1=Object.setPrototypeOf||function(a,n){return a.__proto__=n,a},w1(e,t)}var Y6=function(e){X6(t,e);function t(a,n){var i;n===void 0&&(n={}),i=e.call(this,n,[a])||this;var s=mg(i),o={el:void 0,inputEl:void 0,inputEvents:"change input compositionend",disableButton:!0,disableButtonEl:void 0,backdropEl:void 0,searchContainer:void 0,searchItem:"li",searchIn:void 0,searchGroup:".list-group",searchGroupTitle:".item-divider, .list-group-title",ignore:".searchbar-ignore",foundEl:".searchbar-found",notFoundEl:".searchbar-not-found",hideOnEnableEl:".searchbar-hide-on-enable",hideOnSearchEl:".searchbar-hide-on-search",backdrop:void 0,removeDiacritics:!0,customSearch:!1,hideDividers:!0,hideGroups:!0,disableOnBackdropClick:!0,expandable:!1,inline:!1};s.useModulesParams(o),s.params=se(o,n);var l=T(s.params.el);if(l.length===0)return s||mg(i);if(l[0].f7Searchbar)return l[0].f7Searchbar||mg(i);l[0].f7Searchbar=s;var u,c=l.parents(".navbar");if(l.parents(".page").length>0)u=l.parents(".page");else if(c.length>0&&(u=T(a.navbar.getPageByEl(c[0])),!u.length)){var d=l.parents(".view").find(".page-current");d[0]&&d[0].f7Page&&d[0].f7Page.navbarEl===c[0]&&(u=d)}var p;n.foundEl?p=T(n.foundEl):typeof s.params.foundEl=="string"&&u&&(p=u.find(s.params.foundEl));var f;n.notFoundEl?f=T(n.notFoundEl):typeof s.params.notFoundEl=="string"&&u&&(f=u.find(s.params.notFoundEl));var h;n.hideOnEnableEl?h=T(n.hideOnEnableEl):typeof s.params.hideOnEnableEl=="string"&&u&&(h=u.find(s.params.hideOnEnableEl));var m;n.hideOnSearchEl?m=T(n.hideOnSearchEl):typeof s.params.hideOnSearchEl=="string"&&u&&(m=u.find(s.params.hideOnSearchEl));var g=s.params.expandable||l.hasClass("searchbar-expandable"),v=s.params.inline||l.hasClass("searchbar-inline");typeof s.params.backdrop=="undefined"&&(v?s.params.backdrop=!1:s.params.backdrop=a.theme!=="aurora");var b;s.params.backdrop&&(s.params.backdropEl?b=T(s.params.backdropEl):u&&u.length>0?b=u.find(".searchbar-backdrop"):b=l.siblings(".searchbar-backdrop"),b.length===0&&(b=T('<div class="searchbar-backdrop"></div>'),u&&u.length?l.parents(u).length>0&&c&&l.parents(c).length===0?b.insertBefore(l):b.insertBefore(u.find(".page-content").eq(0)):b.insertBefore(l)));var y;s.params.searchContainer&&(y=T(s.params.searchContainer));var w;s.params.inputEl?w=T(s.params.inputEl):w=l.find('input[type="search"]').eq(0);var x;s.params.disableButton&&(s.params.disableButtonEl?x=T(s.params.disableButtonEl):x=l.find(".searchbar-disable-button")),se(s,{app:a,view:a.views.get(l.parents(".view")),$el:l,el:l[0],$backdropEl:b,backdropEl:b&&b[0],$searchContainer:y,searchContainer:y&&y[0],$inputEl:w,inputEl:w[0],$disableButtonEl:x,disableButtonEl:x&&x[0],disableButtonHasMargin:!1,$pageEl:u,pageEl:u&&u[0],$navbarEl:c,navbarEl:c&&c[0],$foundEl:p,foundEl:p&&p[0],$notFoundEl:f,notFoundEl:f&&f[0],$hideOnEnableEl:h,hideOnEnableEl:h&&h[0],$hideOnSearchEl:m,hideOnSearchEl:m&&m[0],previousQuery:"",query:"",isVirtualList:y&&y.hasClass("virtual-list"),virtualList:void 0,enabled:!1,expandable:g,inline:v});function k(R){R.preventDefault()}function C(R){s.enable(R),s.$el.addClass("searchbar-focused")}function E(){s.$el.removeClass("searchbar-focused"),a.theme==="aurora"&&(!x||!x.length||!s.params.disableButton)&&!s.query&&s.disable()}function $(){var R=s.$inputEl.val().trim();(s.$searchContainer&&s.$searchContainer.length>0&&(s.params.searchIn||s.isVirtualList||s.params.searchIn===s.params.searchItem)||s.params.customSearch)&&s.search(R,!0)}function N(R,O){s.$el.trigger("searchbar:clear",O),s.emit("local::clear searchbarClear",s,O)}function I(R){s.disable(R)}function S(){!s||s&&!s.$el||s.enabled&&(s.$el.removeClass("searchbar-enabled"),s.expandable&&s.$el.parents(".navbar").removeClass("with-searchbar-expandable-enabled with-searchbar-expandable-enabled-no-transition"))}function A(){!s||s&&!s.$el||s.enabled&&(s.$el.addClass("searchbar-enabled"),s.expandable&&s.$el.parents(".navbar").addClass("with-searchbar-expandable-enabled-no-transition"))}return s.attachEvents=function(){l.on("submit",k),s.params.disableButton&&s.$disableButtonEl.on("click",I),s.params.disableOnBackdropClick&&s.$backdropEl&&s.$backdropEl.on("click",I),s.expandable&&a.theme==="ios"&&s.view&&c.length&&s.$pageEl&&(s.$pageEl.on("page:beforeout",S),s.$pageEl.on("page:beforein",A)),s.$inputEl.on("focus",C),s.$inputEl.on("blur",E),s.$inputEl.on(s.params.inputEvents,$),s.$inputEl.on("input:clear",N)},s.detachEvents=function(){l.off("submit",k),s.params.disableButton&&s.$disableButtonEl.off("click",I),s.params.disableOnBackdropClick&&s.$backdropEl&&s.$backdropEl.off("click",I),s.expandable&&a.theme==="ios"&&s.view&&c.length&&s.$pageEl&&(s.$pageEl.off("page:beforeout",S),s.$pageEl.off("page:beforein",A)),s.$inputEl.off("focus",C),s.$inputEl.off("blur",E),s.$inputEl.off(s.params.inputEvents,$),s.$inputEl.off("input:clear",N)},s.useModules(),s.init(),s||mg(i)}var r=t.prototype;return r.clear=function(n){var i=this;if(!i.query&&n&&T(n.target).hasClass("searchbar-clear"))return i.disable(),i;var s=i.value;return i.$inputEl.val("").trigger("change").focus(),i.$el.trigger("searchbar:clear",s),i.emit("local::clear searchbarClear",i,s),i},r.setDisableButtonMargin=function(){var n=this;if(!n.expandable){var i=n.app;n.$disableButtonEl.transition(0).show(),n.$disableButtonEl.css("margin-"+(i.rtl?"left":"right"),-n.disableButtonEl.offsetWidth+"px"),n._clientLeft=n.$disableButtonEl[0].clientLeft,n.$disableButtonEl.transition(""),n.disableButtonHasMargin=!0}},r.enable=function(n){var i=this;if(i.enabled)return i;var s=i.app,o=nt(),l=Ct();i.enabled=!0;function u(){if(i.$backdropEl&&(i.$searchContainer&&i.$searchContainer.length||i.params.customSearch)&&!i.$el.hasClass("searchbar-enabled")&&!i.query&&i.backdropShow(),i.$el.addClass("searchbar-enabled"),(!i.$disableButtonEl||i.$disableButtonEl&&i.$disableButtonEl.length===0)&&i.$el.addClass("searchbar-enabled-no-disable-button"),!i.expandable&&i.$disableButtonEl&&i.$disableButtonEl.length>0&&s.theme!=="md"&&(i.disableButtonHasMargin||i.setDisableButtonMargin(),i.$disableButtonEl.css("margin-"+(s.rtl?"left":"right"),"0px")),i.expandable){var p=i.$el.parents(".navbar");if(p.hasClass("navbar-large")&&i.$pageEl){var f=i.$pageEl.find(".page-content"),h=p.find(".title-large");f.addClass("with-searchbar-expandable-enabled"),p.hasClass("navbar-large")&&p.hasClass("navbar-large-collapsed")&&h.length&&f.length&&(f.transition(0),f[0].scrollTop-=h[0].offsetHeight,setTimeout(function(){f.transition("")},200))}s.theme==="md"&&p.length?p.addClass("with-searchbar-expandable-enabled"):(p.addClass("with-searchbar-expandable-enabled"),p.hasClass("navbar-large")&&p.addClass("navbar-large-collapsed"))}i.$hideOnEnableEl&&i.$hideOnEnableEl.addClass("hidden-by-searchbar"),i.$el.trigger("searchbar:enable"),i.emit("local::enable searchbarEnable",i)}var c=!1;n===!0&&o.activeElement!==i.inputEl&&(c=!0);var d=l.ios&&s.theme==="ios";return d?i.expandable?(c&&i.$inputEl.focus(),u()):(c&&i.$inputEl.focus(),n&&(n.type==="focus"||n===!0)?qr(function(){u()},400):u()):(c&&i.$inputEl.focus(),s.theme==="md"&&i.expandable&&i.$el.parents(".page, .view, .navbar-inner, .navbar").scrollLeft(s.rtl?100:0),u()),i},r.disable=function(){var n=this;if(!n.enabled)return n;var i=n.app;if(n.$inputEl.val("").trigger("change"),n.$el.removeClass("searchbar-enabled searchbar-focused searchbar-enabled-no-disable-button"),n.expandable){var s=n.$el.parents(".navbar"),o=n.$pageEl&&n.$pageEl.find(".page-content");if(s.hasClass("navbar-large")&&o.length){var l=s.find(".title-large");if(n.$el.transitionEnd(function(){o.removeClass("with-searchbar-expandable-closing")}),s.hasClass("navbar-large")&&s.hasClass("navbar-large-collapsed")&&l.length){var u=o[0].scrollTop,c=l[0].offsetHeight;u>c&&(o.transition(0),o[0].scrollTop=u+c,setTimeout(function(){o.transition("")},200))}o.removeClass("with-searchbar-expandable-enabled").addClass("with-searchbar-expandable-closing")}i.theme==="md"&&s.length?(s.removeClass("with-searchbar-expandable-enabled with-searchbar-expandable-enabled-no-transition").addClass("with-searchbar-expandable-closing"),n.$el.transitionEnd(function(){s.removeClass("with-searchbar-expandable-closing")})):(s.removeClass("with-searchbar-expandable-enabled with-searchbar-expandable-enabled-no-transition").addClass("with-searchbar-expandable-closing"),n.$el.transitionEnd(function(){s.removeClass("with-searchbar-expandable-closing")}),n.$pageEl&&n.$pageEl.find(".page-content").trigger("scroll"))}return!n.expandable&&n.$disableButtonEl&&n.$disableButtonEl.length>0&&i.theme!=="md"&&n.$disableButtonEl.css("margin-"+(i.rtl?"left":"right"),-n.disableButtonEl.offsetWidth+"px"),n.$backdropEl&&(n.$searchContainer&&n.$searchContainer.length||n.params.customSearch)&&n.backdropHide(),n.enabled=!1,n.$inputEl.blur(),n.$hideOnEnableEl&&n.$hideOnEnableEl.removeClass("hidden-by-searchbar"),n.$el.trigger("searchbar:disable"),n.emit("local::disable searchbarDisable",n),n},r.toggle=function(){var n=this;return n.enabled?n.disable():n.enable(!0),n},r.backdropShow=function(){var n=this;return n.$backdropEl&&n.$backdropEl.addClass("searchbar-backdrop-in"),n},r.backdropHide=function(){var n=this;return n.$backdropEl&&n.$backdropEl.removeClass("searchbar-backdrop-in"),n},r.search=function(n,i){var s=this;if(s.previousQuery=s.query||"",n===s.previousQuery)return s;i||(s.enabled||s.enable(),s.$inputEl.val(n),s.$inputEl.trigger("input")),s.query=n,s.value=n;var o=s.$searchContainer,l=s.$el,u=s.$foundEl,c=s.$notFoundEl,d=s.$hideOnSearchEl,p=s.isVirtualList;if(n.length>0&&d?d.addClass("hidden-by-searchbar"):d&&d.removeClass("hidden-by-searchbar"),(o&&o.length&&l.hasClass("searchbar-enabled")||s.params.customSearch&&l.hasClass("searchbar-enabled"))&&(n.length===0?s.backdropShow():s.backdropHide()),s.params.customSearch)return l.trigger("searchbar:search",{query:n,previousQuery:s.previousQuery}),s.emit("local::search searchbarSearch",s,n,s.previousQuery),s;var f=[],h;if(p){if(s.virtualList=o[0].f7VirtualList,n.trim()==="")return s.virtualList.resetFilter(),c&&c.hide(),u&&u.show(),l.trigger("searchbar:search",{query:n,previousQuery:s.previousQuery}),s.emit("local::search searchbarSearch",s,n,s.previousQuery),s;if(h=s.params.removeDiacritics?Aw(n):n,s.virtualList.params.searchAll)f=s.virtualList.params.searchAll(h,s.virtualList.items)||[];else if(s.virtualList.params.searchByItem)for(var m=0;m<s.virtualList.items.length;m+=1)s.virtualList.params.searchByItem(h,s.virtualList.items[m],m)&&f.push(m)}else{var g;s.params.removeDiacritics?g=Aw(n.trim().toLowerCase()).split(" "):g=n.trim().toLowerCase().split(" "),o.find(s.params.searchItem).removeClass("hidden-by-searchbar").each(function(v){var b=T(v),y=[],w=s.params.searchIn?b.find(s.params.searchIn):b;s.params.searchIn===s.params.searchItem&&(w=b),w.each(function(C){var E=T(C).text().trim().toLowerCase();s.params.removeDiacritics&&(E=Aw(E)),y.push(E)}),y=y.join(" ");for(var x=0,k=0;k<g.length;k+=1)y.indexOf(g[k])>=0&&(x+=1);x!==g.length&&!(s.params.ignore&&b.is(s.params.ignore))?b.addClass("hidden-by-searchbar"):f.push(b[0])}),s.params.hideDividers&&o.find(s.params.searchGroupTitle).each(function(v){for(var b=T(v),y=b.nextAll(s.params.searchItem),w=!0,x=0;x<y.length;x+=1){var k=y.eq(x);if(k.is(s.params.searchGroupTitle))break;k.hasClass("hidden-by-searchbar")||(w=!1)}var C=s.params.ignore&&b.is(s.params.ignore);w&&!C?b.addClass("hidden-by-searchbar"):b.removeClass("hidden-by-searchbar")}),s.params.hideGroups&&o.find(s.params.searchGroup).each(function(v){var b=T(v),y=s.params.ignore&&b.is(s.params.ignore),w=b.find(s.params.searchItem).filter(function(x){return!T(x).hasClass("hidden-by-searchbar")});w.length===0&&!y?b.addClass("hidden-by-searchbar"):b.removeClass("hidden-by-searchbar")})}return f.length===0?(c&&c.show(),u&&u.hide()):(c&&c.hide(),u&&u.show()),p&&s.virtualList&&s.virtualList.filterItems(f),l.trigger("searchbar:search",{query:n,previousQuery:s.previousQuery,foundItems:f}),s.emit("local::search searchbarSearch",s,n,s.previousQuery,f),s},r.init=function(){var n=this;n.expandable&&n.$el&&n.$el.addClass("searchbar-expandable"),n.inline&&n.$el&&n.$el.addClass("searchbar-inline"),n.attachEvents()},r.destroy=function(){var n=this;n.emit("local::beforeDestroy searchbarBeforeDestroy",n),n.$el.trigger("searchbar:beforedestroy"),n.detachEvents(),n.$el[0]&&(n.$el[0].f7Searchbar=null,delete n.$el[0].f7Searchbar),$r(n)},t}(rr),dN=Y6,K6={name:"searchbar",static:{Searchbar:dN},create:function(){var t=this;t.searchbar=Ir({defaultSelector:".searchbar",constructor:dN,app:t,domProp:"f7Searchbar",addMethods:"clear enable disable toggle search".split(" ")})},on:{tabMounted:function(t){var r=this;T(t).find(".searchbar-init").each(function(a){var n=T(a);r.searchbar.create(se(n.dataset(),{el:a}))})},tabBeforeRemove:function(t){T(t).find(".searchbar-init").each(function(r){r.f7Searchbar&&r.f7Searchbar.destroy&&r.f7Searchbar.destroy()})},pageInit:function(t){var r=this;t.$el.find(".searchbar-init").each(function(a){var n=T(a);r.searchbar.create(se(n.dataset(),{el:a}))}),r.theme==="ios"&&t.view&&t.view.router.dynamicNavbar&&t.$navbarEl&&t.$navbarEl.length>0&&t.$navbarEl.find(".searchbar-init").each(function(a){var n=T(a);r.searchbar.create(se(n.dataset(),{el:a}))})},pageBeforeRemove:function(t){var r=this;t.$el.find(".searchbar-init").each(function(a){a.f7Searchbar&&a.f7Searchbar.destroy&&a.f7Searchbar.destroy()}),r.theme==="ios"&&t.view&&t.view.router.dynamicNavbar&&t.$navbarEl&&t.$navbarEl.length>0&&t.$navbarEl.find(".searchbar-init").each(function(a){a.f7Searchbar&&a.f7Searchbar.destroy&&a.f7Searchbar.destroy()})}},clicks:{".searchbar-clear":function(t,r){r===void 0&&(r={});var a=this,n=a.searchbar.get(r.searchbar);n&&n.clear()},".searchbar-enable":function(t,r){r===void 0&&(r={});var a=this,n=a.searchbar.get(r.searchbar);n&&n.enable(!0)},".searchbar-disable":function(t,r){r===void 0&&(r={});var a=this,n=a.searchbar.get(r.searchbar);n&&n.disable()},".searchbar-toggle":function(t,r){r===void 0&&(r={});var a=this,n=a.searchbar.get(r.searchbar);n&&n.toggle()}},vnode:{"searchbar-init":{insert:function(t){var r=this,a=t.elm,n=T(a);r.searchbar.create(se(n.dataset(),{el:a}))},destroy:function(t){var r=t.elm;r.f7Searchbar&&r.f7Searchbar.destroy&&r.f7Searchbar.destroy()}}}};function x1(){return x1=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},x1.apply(this,arguments)}function gg(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Z6(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,k1(e,t)}function k1(e,t){return k1=Object.setPrototypeOf||function(a,n){return a.__proto__=n,a},k1(e,t)}var Q6=function(e){Z6(t,e);function t(a,n){var i;n===void 0&&(n={}),i=e.call(this,n,[a])||this;var s=gg(i),o={autoLayout:!0,messages:[],newMessagesFirst:!1,scrollMessages:!0,scrollMessagesOnEdge:!0,firstMessageRule:void 0,lastMessageRule:void 0,tailMessageRule:void 0,sameNameMessageRule:void 0,sameHeaderMessageRule:void 0,sameFooterMessageRule:void 0,sameAvatarMessageRule:void 0,customClassMessageRule:void 0,renderMessage:void 0};s.useModulesParams(o),s.params=se(o,n);var l=T(n.el).eq(0);if(l.length===0)return s||gg(i);if(l[0].f7Messages)return l[0].f7Messages||gg(i);l[0].f7Messages=s;var u=l.closest(".page-content").eq(0);return se(s,{messages:s.params.messages,$el:l,el:l[0],$pageContentEl:u,pageContentEl:u[0]}),s.useModules(),s.init(),s||gg(i)}var r=t.prototype;return r.getMessageData=function(n){var i=T(n),s={name:i.find(".message-name").html(),header:i.find(".message-header").html(),textHeader:i.find(".message-text-header").html(),textFooter:i.find(".message-text-footer").html(),footer:i.find(".message-footer").html(),isTitle:i.hasClass("messages-title"),type:i.hasClass("message-sent")?"sent":"received",text:i.find(".message-text").html(),image:i.find(".message-image").html(),imageSrc:i.find(".message-image img").attr("src"),typing:i.hasClass("message-typing")};s.isTitle&&(s.text=i.html()),s.text&&s.textHeader&&(s.text=s.text.replace('<div class="message-text-header">'+s.textHeader+"</div>","")),s.text&&s.textFooter&&(s.text=s.text.replace('<div class="message-text-footer">'+s.textFooter+"</div>",""));var o=i.find(".message-avatar").css("background-image");return(o==="none"||o==="")&&(o=void 0),o&&typeof o=="string"?o=o.replace("url(","").replace(")","").replace(/"/g,"").replace(/'/g,""):o=void 0,s.avatar=o,s},r.getMessagesData=function(){var n=this,i=[];return n.$el.find(".message, .messages-title").each(function(s){i.push(n.getMessageData(s))}),i},r.renderMessage=function(n){var i=this,s=se({type:"sent",attrs:{}},n);return i.params.renderMessage?i.params.renderMessage.call(i,s):s.isTitle?'<div class="messages-title">'+s.text+"</div>":F("div",x1({class:"message message-"+s.type+" "+(s.isTyping?"message-typing":"")+" "+(s.cssClass||"")},s.attrs),s.avatar&&F("div",{class:"message-avatar",style:"background-image:url("+s.avatar+")"}),F("div",{class:"message-content"},s.name&&F("div",{class:"message-name"},s.name),s.header&&F("div",{class:"message-header"},s.header),F("div",{class:"message-bubble"},s.textHeader&&F("div",{class:"message-text-header"},s.textHeader),s.image&&F("div",{class:"message-image"},s.image),s.imageSrc&&!s.image&&F("div",{class:"message-image"},F("img",{src:s.imageSrc})),(s.text||s.isTyping)&&F("div",{class:"message-text"},s.text||"",s.isTyping&&F("div",{class:"message-typing-indicator"},F("div",null),F("div",null),F("div",null))),s.textFooter&&F("div",{class:"message-text-footer"},s.textFooter)),s.footer&&F("div",{class:"message-footer"},s.footer)))},r.renderMessages=function(n,i){n===void 0&&(n=this.messages),i===void 0&&(i=this.params.newMessagesFirst?"prepend":"append");var s=this,o=n.map(function(l){return s.renderMessage(l)}).join("");s.$el[i](o)},r.isFirstMessage=function(){var n,i=this;return i.params.firstMessageRule?(n=i.params).firstMessageRule.apply(n,arguments):!1},r.isLastMessage=function(){var n,i=this;return i.params.lastMessageRule?(n=i.params).lastMessageRule.apply(n,arguments):!1},r.isTailMessage=function(){var n,i=this;return i.params.tailMessageRule?(n=i.params).tailMessageRule.apply(n,arguments):!1},r.isSameNameMessage=function(){var n,i=this;return i.params.sameNameMessageRule?(n=i.params).sameNameMessageRule.apply(n,arguments):!1},r.isSameHeaderMessage=function(){var n,i=this;return i.params.sameHeaderMessageRule?(n=i.params).sameHeaderMessageRule.apply(n,arguments):!1},r.isSameFooterMessage=function(){var n,i=this;return i.params.sameFooterMessageRule?(n=i.params).sameFooterMessageRule.apply(n,arguments):!1},r.isSameAvatarMessage=function(){var n,i=this;return i.params.sameAvatarMessageRule?(n=i.params).sameAvatarMessageRule.apply(n,arguments):!1},r.isCustomClassMessage=function(){var n,i=this;if(i.params.customClassMessageRule)return(n=i.params).customClassMessageRule.apply(n,arguments)},r.layout=function(){var n=this;n.$el.find(".message, .messages-title").each(function(i,s){var o=T(i);n.messages||(n.messages=n.getMessagesData());var l=[],u=n.messages[s],c=n.messages[s-1],d=n.messages[s+1];n.isFirstMessage(u,c,d)&&l.push("message-first"),n.isLastMessage(u,c,d)&&l.push("message-last"),n.isTailMessage(u,c,d)&&l.push("message-tail"),n.isSameNameMessage(u,c,d)&&l.push("message-same-name"),n.isSameHeaderMessage(u,c,d)&&l.push("message-same-header"),n.isSameFooterMessage(u,c,d)&&l.push("message-same-footer"),n.isSameAvatarMessage(u,c,d)&&l.push("message-same-avatar");var p=n.isCustomClassMessage(u,c,d);p&&p.length&&(typeof p=="string"&&(p=p.split(" ")),p.forEach(function(f){l.push(f)})),o.removeClass("message-first message-last message-tail message-same-name message-same-header message-same-footer message-same-avatar"),l.forEach(function(f){o.addClass(f)})})},r.clear=function(){var n=this;n.messages=[],n.$el.html("")},r.removeMessage=function(n,i){i===void 0&&(i=!0);var s=this,o,l;return typeof n=="number"?(o=n,l=s.$el.find(".message, .messages-title").eq(o)):s.messages&&s.messages.indexOf(n)>=0?(o=s.messages.indexOf(n),l=s.$el.children().eq(o)):(l=T(n),o=l.index()),l.length===0||(l.remove(),s.messages.splice(o,1),s.params.autoLayout&&i&&s.layout()),s},r.removeMessages=function(n,i){i===void 0&&(i=!0);var s=this;if(Array.isArray(n)){var o=[];n.forEach(function(l){o.push(s.$el.find(".message, .messages-title").eq(l))}),o.forEach(function(l){s.removeMessage(l,!1)})}else T(n).each(function(l){s.removeMessage(l,!1)});return s.params.autoLayout&&i&&s.layout(),s},r.addMessage=function(){for(var n=this,i,s,o,l=arguments.length,u=new Array(l),c=0;c<l;c++)u[c]=arguments[c];return typeof u[1]=="boolean"?(i=u[0],s=u[1],o=u[2]):(i=u[0],o=u[1],s=u[2]),typeof s=="undefined"&&(s=!0),typeof o=="undefined"&&(o=n.params.newMessagesFirst?"prepend":"append"),n.addMessages([i],s,o)},r.setScrollData=function(){var n=this,i=n.pageContentEl.scrollHeight,s=n.pageContentEl.offsetHeight,o=n.pageContentEl.scrollTop;return n.scrollData={scrollHeightBefore:i,heightBefore:s,scrollBefore:o},{scrollHeightBefore:i,heightBefore:s,scrollBefore:o}},r.addMessages=function(){for(var n=this,i,s,o,l=arguments.length,u=new Array(l),c=0;c<l;c++)u[c]=arguments[c];typeof u[1]=="boolean"?(i=u[0],s=u[1],o=u[2]):(i=u[0],o=u[1],s=u[2]),typeof s=="undefined"&&(s=!0),typeof o=="undefined"&&(o=n.params.newMessagesFirst?"prepend":"append");var d=n.setScrollData(),p=d.scrollHeightBefore,f=d.scrollBefore,h="",m=n.messages.filter(function(v){return v.isTyping})[0];i.forEach(function(v){m?o==="append"?n.messages.splice(n.messages.indexOf(m),0,v):n.messages.splice(n.messages.indexOf(m)+1,0,v):n.messages[o==="append"?"push":"unshift"](v),h+=n.renderMessage(v)});var g=T(h);return s&&(o==="append"&&!n.params.newMessagesFirst&&g.addClass("message-appear-from-bottom"),o==="prepend"&&n.params.newMessagesFirst&&g.addClass("message-appear-from-top")),m?o==="append"?g.insertBefore(n.$el.find(".message-typing")):g.insertAfter(n.$el.find(".message-typing")):n.$el[o](g),n.params.autoLayout&&n.layout(),o==="prepend"&&!m&&(n.pageContentEl.scrollTop=f+(n.pageContentEl.scrollHeight-p)),n.params.scrollMessages&&(o==="append"&&!n.params.newMessagesFirst||o==="prepend"&&n.params.newMessagesFirst&&!m)&&n.scrollWithEdgeCheck(s),n},r.showTyping=function(n){n===void 0&&(n={});var i=this,s=i.messages.filter(function(o){return o.isTyping})[0];return s&&i.removeMessage(i.messages.indexOf(s)),i.addMessage(se({type:"received",isTyping:!0},n)),i},r.hideTyping=function(){var n=this,i,s;if(n.messages.forEach(function(l,u){l.isTyping&&(i=u)}),typeof i!="undefined"&&n.$el.find(".message").eq(i).hasClass("message-typing")&&(s=!0,n.removeMessage(i)),!s){var o=n.$el.find(".message-typing");o.length&&n.removeMessage(o)}return n},r.scrollWithEdgeCheck=function(n){var i=this,s=i.scrollData,o=s.scrollBefore,l=s.scrollHeightBefore,u=s.heightBefore;if(i.params.scrollMessagesOnEdge){var c=!1;i.params.newMessagesFirst&&o===0&&(c=!0),!i.params.newMessagesFirst&&o-(l-u)>=-10&&(c=!0),c&&i.scroll(n?void 0:0)}else i.scroll(n?void 0:0)},r.scroll=function(n,i){n===void 0&&(n=300);var s=this,o=s.pageContentEl.scrollTop,l;if(typeof i!="undefined")l=i;else if(l=s.params.newMessagesFirst?0:s.pageContentEl.scrollHeight-s.pageContentEl.offsetHeight,l===o)return s;return s.$pageContentEl.scrollTop(l,n),s},r.init=function(){var n=this;(!n.messages||n.messages.length===0)&&(n.messages=n.getMessagesData()),n.params.messages&&n.params.messages.length&&n.renderMessages(),n.params.autoLayout&&n.layout(),n.params.scrollMessages&&n.scroll(0)},r.destroy=function(){var n=this;n.emit("local::beforeDestroy messagesBeforeDestroy",n),n.$el.trigger("messages:beforedestroy"),n.$el[0]&&(n.$el[0].f7Messages=null,delete n.$el[0].f7Messages),$r(n)},t}(rr),pN=Q6,J6={name:"messages",static:{Messages:pN},create:function(){var t=this;t.messages=Ir({defaultSelector:".messages",constructor:pN,app:t,domProp:"f7Messages",addMethods:"renderMessages layout scroll clear removeMessage removeMessages addMessage addMessages".split(" ")})},on:{tabBeforeRemove:function(t){var r=this;T(t).find(".messages-init").each(function(a){r.messages.destroy(a)})},tabMounted:function(t){var r=this;T(t).find(".messages-init").each(function(a){r.messages.create({el:a})})},pageBeforeRemove:function(t){var r=this;t.$el.find(".messages-init").each(function(a){r.messages.destroy(a)})},pageInit:function(t){var r=this;t.$el.find(".messages-init").each(function(a){r.messages.create({el:a})})}},vnode:{"messages-init":{insert:function(t){var r=this,a=t.elm;r.messages.create({el:a})},destroy:function(t){var r=this,a=t.elm;r.messages.destroy(a)}}}};function vg(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function e5(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,E1(e,t)}function E1(e,t){return E1=Object.setPrototypeOf||function(a,n){return a.__proto__=n,a},E1(e,t)}var t5=function(e){e5(t,e);function t(a,n){var i;n===void 0&&(n={}),i=e.call(this,n,[a])||this;var s=vg(i),o={top:!1,topOffset:0,bottomOffset:0,attachments:[],renderAttachments:void 0,renderAttachment:void 0,maxHeight:null,resizePage:!0};s.useModulesParams(o),s.params=se(o,n);var l=T(s.params.el);if(l.length===0)return s||vg(i);if(l[0].f7Messagebar)return l[0].f7Messagebar||vg(i);l[0].f7Messagebar=s;var u=l.parents(".page").eq(0),c=u.find(".page-content").eq(0),d=l.find(".messagebar-area"),p;s.params.textareaEl?p=T(s.params.textareaEl):p=l.find("textarea");var f=l.find(".messagebar-attachments"),h=l.find(".messagebar-sheet");s.params.top&&l.addClass("messagebar-top"),se(s,{$el:l,el:l[0],$areaEl:d,areaEl:d[0],$textareaEl:p,textareaEl:p[0],$attachmentsEl:f,attachmentsEl:f[0],attachmentsVisible:f.hasClass("messagebar-attachments-visible"),$sheetEl:h,sheetEl:h[0],sheetVisible:h.hasClass("messagebar-sheet-visible"),$pageEl:u,pageEl:u[0],$pageContentEl:c,pageContentEl:c,top:l.hasClass("messagebar-top")||s.params.top,attachments:[]});function m(){s.params.resizePage&&s.resizePage()}function g(x){x.preventDefault()}function v(x){var k=T(this).index();T(x.target).closest(".messagebar-attachment-delete").length?(T(this).trigger("messagebar:attachmentdelete",k),s.emit("local::attachmentDelete messagebarAttachmentDelete",s,this,k)):(T(this).trigger("messagebar:attachmentclick",k),s.emit("local::attachmentClick messagebarAttachmentClick",s,this,k))}function b(){s.checkEmptyState(),s.$el.trigger("messagebar:change"),s.emit("local::change messagebarChange",s)}function y(){s.sheetHide(),s.$el.addClass("messagebar-focused"),s.$el.trigger("messagebar:focus"),s.emit("local::focus messagebarFocus",s)}function w(){s.$el.removeClass("messagebar-focused"),s.$el.trigger("messagebar:blur"),s.emit("local::blur messagebarBlur",s)}return s.attachEvents=function(){l.on("textarea:resize",m),l.on("submit",g),l.on("click",".messagebar-attachment",v),p.on("change input",b),p.on("focus",y),p.on("blur",w),a.on("resize",m)},s.detachEvents=function(){l.off("textarea:resize",m),l.off("submit",g),l.off("click",".messagebar-attachment",v),p.off("change input",b),p.off("focus",y),p.off("blur",w),a.off("resize",m)},s.useModules(),s.init(),s||vg(i)}var r=t.prototype;return r.focus=function(){var n=this;return n.$textareaEl.focus(),n},r.blur=function(){var n=this;return n.$textareaEl.blur(),n},r.clear=function(){var n=this;return n.$textareaEl.val("").trigger("change"),n},r.getValue=function(){var n=this;return n.$textareaEl.val().trim()},r.setValue=function(n){var i=this;return i.$textareaEl.val(n).trigger("change"),i},r.setPlaceholder=function(n){var i=this;return i.$textareaEl.attr("placeholder",n),i},r.resizePage=function(){var n=this,i=n.params,s=n.$el,o=n.top,l=n.$pageEl,u=n.$pageContentEl,c=n.$areaEl,d=n.$textareaEl,p=n.$sheetEl,f=n.$attachmentsEl,h=s[0].offsetHeight,m=i.maxHeight;if(!o){var g=parseInt(u.css("padding-bottom"),10),v=h+i.bottomOffset;if(v!==g&&u.length){var b=parseInt(u.css("padding-top"),10),y=u[0].scrollHeight,w=u[0].offsetHeight,x=u[0].scrollTop,k=x===y-w;m||(m=l[0].offsetHeight-b-p.outerHeight()-f.outerHeight()-parseInt(c.css("margin-top"),10)-parseInt(c.css("margin-bottom"),10)),d.css("max-height",m+"px"),u.css("padding-bottom",v+"px"),k&&u.scrollTop(u[0].scrollHeight-w),s.trigger("messagebar:resizepage"),n.emit("local::resizePage messagebarResizePage",n)}}},r.checkEmptyState=function(){var n=this,i=n.$el,s=n.$textareaEl,o=s.val().trim();o&&o.length?i.addClass("messagebar-with-value"):i.removeClass("messagebar-with-value")},r.attachmentsCreate=function(n){n===void 0&&(n="");var i=this,s=T('<div class="messagebar-attachments">'+n+"</div>");return s.insertBefore(i.$textareaEl),se(i,{$attachmentsEl:s,attachmentsEl:s[0]}),i},r.attachmentsShow=function(n){n===void 0&&(n="");var i=this;return i.$attachmentsEl=i.$el.find(".messagebar-attachments"),i.$attachmentsEl.length===0&&i.attachmentsCreate(n),i.$el.addClass("messagebar-attachments-visible"),i.attachmentsVisible=!0,i.params.resizePage&&i.resizePage(),i},r.attachmentsHide=function(){var n=this;return n.$el.removeClass("messagebar-attachments-visible"),n.attachmentsVisible=!1,n.params.resizePage&&n.resizePage(),n},r.attachmentsToggle=function(){var n=this;return n.attachmentsVisible?n.attachmentsHide():n.attachmentsShow(),n},r.renderAttachment=function(n){var i=this;return i.params.renderAttachment?i.params.renderAttachment.call(i,n):`
      <div class="messagebar-attachment">
        <img src="`+n+`">
        <span class="messagebar-attachment-delete"></span>
      </div>
    `},r.renderAttachments=function(){var n=this,i;n.params.renderAttachments?i=n.params.renderAttachments.call(n,n.attachments):i=""+n.attachments.map(function(s){return n.renderAttachment(s)}).join(""),n.$attachmentsEl.length===0?n.attachmentsCreate(i):n.$attachmentsEl.html(i)},r.sheetCreate=function(n){n===void 0&&(n="");var i=this,s=T('<div class="messagebar-sheet">'+n+"</div>");return i.$el.append(s),se(i,{$sheetEl:s,sheetEl:s[0]}),i},r.sheetShow=function(n){n===void 0&&(n="");var i=this;return i.$sheetEl=i.$el.find(".messagebar-sheet"),i.$sheetEl.length===0&&i.sheetCreate(n),i.$el.addClass("messagebar-sheet-visible"),i.sheetVisible=!0,i.params.resizePage&&i.resizePage(),i},r.sheetHide=function(){var n=this;return n.$el.removeClass("messagebar-sheet-visible"),n.sheetVisible=!1,n.params.resizePage&&n.resizePage(),n},r.sheetToggle=function(){var n=this;return n.sheetVisible?n.sheetHide():n.sheetShow(),n},r.init=function(){var n=this;return n.attachEvents(),n.checkEmptyState(),n},r.destroy=function(){var n=this;n.emit("local::beforeDestroy messagebarBeforeDestroy",n),n.$el.trigger("messagebar:beforedestroy"),n.detachEvents(),n.$el[0]&&(n.$el[0].f7Messagebar=null,delete n.$el[0].f7Messagebar),$r(n)},t}(rr),fN=t5,r5={name:"messagebar",static:{Messagebar:fN},create:function(){var t=this;t.messagebar=Ir({defaultSelector:".messagebar",constructor:fN,app:t,domProp:"f7Messagebar",addMethods:"clear getValue setValue setPlaceholder resizePage focus blur attachmentsCreate attachmentsShow attachmentsHide attachmentsToggle renderAttachments sheetCreate sheetShow sheetHide sheetToggle".split(" ")})},on:{tabBeforeRemove:function(t){var r=this;T(t).find(".messagebar-init").each(function(a){r.messagebar.destroy(a)})},tabMounted:function(t){var r=this;T(t).find(".messagebar-init").each(function(a){r.messagebar.create(se({el:a},T(a).dataset()))})},pageBeforeRemove:function(t){var r=this;t.$el.find(".messagebar-init").each(function(a){r.messagebar.destroy(a)})},pageInit:function(t){var r=this;t.$el.find(".messagebar-init").each(function(a){r.messagebar.create(se({el:a},T(a).dataset()))})}},vnode:{"messagebar-init":{insert:function(t){var r=this,a=t.elm;r.messagebar.create(se({el:a},T(a).dataset()))},destroy:function(t){var r=this,a=t.elm;r.messagebar.destroy(a)}}}},hN={addClass:eR,removeClass:tR,hasClass:nR,toggleClass:rR,attr:aR,removeAttr:iR,transform:sR,transition:oR,on:lR,off:uR,trigger:cR,transitionEnd:dR,outerWidth:pR,outerHeight:fR,styles:mR,offset:hR,css:gR,each:vR,html:yR,text:wR,is:xR,index:kR,eq:ER,append:CR,prepend:SR,next:$R,nextAll:IR,prev:TR,prevAll:NR,parent:AR,parents:_R,closest:MR,find:RR,children:OR,filter:bR,remove:PR};Object.keys(hN).forEach(function(e){Object.defineProperty(He.fn,e,{value:hN[e],writable:!0})});function n5(e){var t=e;Object.keys(t).forEach(function(r){try{t[r]=null}catch{}try{delete t[r]}catch{}})}function C1(e,t){return t===void 0&&(t=0),setTimeout(e,t)}function Gs(){return Date.now()}function a5(e){var t=De(),r;return t.getComputedStyle&&(r=t.getComputedStyle(e,null)),!r&&e.currentStyle&&(r=e.currentStyle),r||(r=e.style),r}function i5(e,t){t===void 0&&(t="x");var r=De(),a,n,i,s=a5(e);return r.WebKitCSSMatrix?(n=s.transform||s.webkitTransform,n.split(",").length>6&&(n=n.split(", ").map(function(o){return o.replace(",",".")}).join(", ")),i=new r.WebKitCSSMatrix(n==="none"?"":n)):(i=s.MozTransform||s.OTransform||s.MsTransform||s.msTransform||s.transform||s.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),a=i.toString().split(",")),t==="x"&&(r.WebKitCSSMatrix?n=i.m41:a.length===16?n=parseFloat(a[12]):n=parseFloat(a[4])),t==="y"&&(r.WebKitCSSMatrix?n=i.m42:a.length===16?n=parseFloat(a[13]):n=parseFloat(a[5])),n||0}function cf(e){return typeof e=="object"&&e!==null&&e.constructor&&Object.prototype.toString.call(e).slice(8,-1)==="Object"}function s5(e){return typeof window!="undefined"&&typeof window.HTMLElement!="undefined"?e instanceof HTMLElement:e&&(e.nodeType===1||e.nodeType===11)}function yr(){for(var e=Object(arguments.length<=0?void 0:arguments[0]),t=["__proto__","constructor","prototype"],r=1;r<arguments.length;r+=1){var a=r<0||arguments.length<=r?void 0:arguments[r];if(a!=null&&!s5(a))for(var n=Object.keys(Object(a)).filter(function(u){return t.indexOf(u)<0}),i=0,s=n.length;i<s;i+=1){var o=n[i],l=Object.getOwnPropertyDescriptor(a,o);l!==void 0&&l.enumerable&&(cf(e[o])&&cf(a[o])?a[o].__swiper__?e[o]=a[o]:yr(e[o],a[o]):!cf(e[o])&&cf(a[o])?(e[o]={},a[o].__swiper__?e[o]=a[o]:yr(e[o],a[o])):e[o]=a[o])}}return e}function o5(e,t){Object.keys(t).forEach(function(r){cf(t[r])&&Object.keys(t[r]).forEach(function(a){typeof t[r][a]=="function"&&(t[r][a]=t[r][a].bind(e))}),e[r]=t[r]})}var _w;function l5(){var e=De(),t=nt();return{touch:!!("ontouchstart"in e||e.DocumentTouch&&t instanceof e.DocumentTouch),pointerEvents:!!e.PointerEvent&&"maxTouchPoints"in e.navigator&&e.navigator.maxTouchPoints>=0,observer:function(){return"MutationObserver"in e||"WebkitMutationObserver"in e}(),passiveListener:function(){var a=!1;try{var n=Object.defineProperty({},"passive",{get:function(){a=!0}});e.addEventListener("testPassiveListener",null,n)}catch{}return a}(),gestures:function(){return"ongesturestart"in e}()}}function sO(){return _w||(_w=l5()),_w}var Mw;function u5(e){var t=e===void 0?{}:e,r=t.userAgent,a=sO(),n=De(),i=n.navigator.platform,s=r||n.navigator.userAgent,o={ios:!1,android:!1},l=n.screen.width,u=n.screen.height,c=s.match(/(Android);?[\s\/]+([\d.]+)?/),d=s.match(/(iPad).*OS\s([\d_]+)/),p=s.match(/(iPod)(.*OS\s([\d_]+))?/),f=!d&&s.match(/(iPhone\sOS|iOS)\s([\d_]+)/),h=i==="Win32",m=i==="MacIntel",g=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!d&&m&&a.touch&&g.indexOf(l+"x"+u)>=0&&(d=s.match(/(Version)\/([\d.]+)/),d||(d=[0,1,"13_0_0"]),m=!1),c&&!h&&(o.os="android",o.android=!0),(d||f||p)&&(o.os="ios",o.ios=!0),o}function c5(e){return e===void 0&&(e={}),Mw||(Mw=u5(e)),Mw}var Rw;function d5(){var e=De();function t(){var r=e.navigator.userAgent.toLowerCase();return r.indexOf("safari")>=0&&r.indexOf("chrome")<0&&r.indexOf("android")<0}return{isEdge:!!e.navigator.userAgent.match(/Edge/g),isSafari:t(),isWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(e.navigator.userAgent)}}function p5(){return Rw||(Rw=d5()),Rw}var f5=function(){var t=De();return typeof t.ResizeObserver!="undefined"},h5={name:"resize",create:function(){var t=this;yr(t,{resize:{observer:null,createObserver:function(){!t||t.destroyed||!t.initialized||(t.resize.observer=new ResizeObserver(function(a){var n=t.width,i=t.height,s=n,o=i;a.forEach(function(l){var u=l.contentBoxSize,c=l.contentRect,d=l.target;d&&d!==t.el||(s=c?c.width:(u[0]||u).inlineSize,o=c?c.height:(u[0]||u).blockSize)}),(s!==n||o!==i)&&t.resize.resizeHandler()}),t.resize.observer.observe(t.el))},removeObserver:function(){t.resize.observer&&t.resize.observer.unobserve&&t.el&&(t.resize.observer.unobserve(t.el),t.resize.observer=null)},resizeHandler:function(){!t||t.destroyed||!t.initialized||(t.emit("beforeResize"),t.emit("resize"))},orientationChangeHandler:function(){!t||t.destroyed||!t.initialized||t.emit("orientationchange")}}})},on:{init:function(t){var r=De();if(t.params.resizeObserver&&f5()){t.resize.createObserver();return}r.addEventListener("resize",t.resize.resizeHandler),r.addEventListener("orientationchange",t.resize.orientationChangeHandler)},destroy:function(t){var r=De();t.resize.removeObserver(),r.removeEventListener("resize",t.resize.resizeHandler),r.removeEventListener("orientationchange",t.resize.orientationChangeHandler)}}};function S1(){return S1=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},S1.apply(this,arguments)}var m5={attach:function(t,r){r===void 0&&(r={});var a=De(),n=this,i=a.MutationObserver||a.WebkitMutationObserver,s=new i(function(o){if(o.length===1){n.emit("observerUpdate",o[0]);return}var l=function(){n.emit("observerUpdate",o[0])};a.requestAnimationFrame?a.requestAnimationFrame(l):a.setTimeout(l,0)});s.observe(t,{attributes:typeof r.attributes=="undefined"?!0:r.attributes,childList:typeof r.childList=="undefined"?!0:r.childList,characterData:typeof r.characterData=="undefined"?!0:r.characterData}),n.observer.observers.push(s)},init:function(){var t=this;if(!(!t.support.observer||!t.params.observer)){if(t.params.observeParents)for(var r=t.$el.parents(),a=0;a<r.length;a+=1)t.observer.attach(r[a]);t.observer.attach(t.$el[0],{childList:t.params.observeSlideChildren}),t.observer.attach(t.$wrapperEl[0],{attributes:!1})}},destroy:function(){var t=this;t.observer.observers.forEach(function(r){r.disconnect()}),t.observer.observers=[]}},g5={name:"observer",params:{observer:!1,observeParents:!1,observeSlideChildren:!1},create:function(){var t=this;o5(t,{observer:S1({},m5,{observers:[]})})},on:{init:function(t){t.observer.init()},destroy:function(t){t.observer.destroy()}}},v5={useParams:function(t){var r=this;!r.modules||Object.keys(r.modules).forEach(function(a){var n=r.modules[a];n.params&&yr(t,n.params)})},useModules:function(t){t===void 0&&(t={});var r=this;!r.modules||Object.keys(r.modules).forEach(function(a){var n=r.modules[a],i=t[a]||{};n.on&&r.on&&Object.keys(n.on).forEach(function(s){r.on(s,n.on[s])}),n.create&&n.create.bind(r)(i)})}},b5={on:function(t,r,a){var n=this;if(typeof r!="function")return n;var i=a?"unshift":"push";return t.split(" ").forEach(function(s){n.eventsListeners[s]||(n.eventsListeners[s]=[]),n.eventsListeners[s][i](r)}),n},once:function(t,r,a){var n=this;if(typeof r!="function")return n;function i(){n.off(t,i),i.__emitterProxy&&delete i.__emitterProxy;for(var s=arguments.length,o=new Array(s),l=0;l<s;l++)o[l]=arguments[l];r.apply(n,o)}return i.__emitterProxy=r,n.on(t,i,a)},onAny:function(t,r){var a=this;if(typeof t!="function")return a;var n=r?"unshift":"push";return a.eventsAnyListeners.indexOf(t)<0&&a.eventsAnyListeners[n](t),a},offAny:function(t){var r=this;if(!r.eventsAnyListeners)return r;var a=r.eventsAnyListeners.indexOf(t);return a>=0&&r.eventsAnyListeners.splice(a,1),r},off:function(t,r){var a=this;return a.eventsListeners&&t.split(" ").forEach(function(n){typeof r=="undefined"?a.eventsListeners[n]=[]:a.eventsListeners[n]&&a.eventsListeners[n].forEach(function(i,s){(i===r||i.__emitterProxy&&i.__emitterProxy===r)&&a.eventsListeners[n].splice(s,1)})}),a},emit:function(){var t=this;if(!t.eventsListeners)return t;for(var r,a,n,i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];typeof s[0]=="string"||Array.isArray(s[0])?(r=s[0],a=s.slice(1,s.length),n=t):(r=s[0].events,a=s[0].data,n=s[0].context||t),a.unshift(n);var l=Array.isArray(r)?r:r.split(" ");return l.forEach(function(u){t.eventsAnyListeners&&t.eventsAnyListeners.length&&t.eventsAnyListeners.forEach(function(c){c.apply(n,[u].concat(a))}),t.eventsListeners&&t.eventsListeners[u]&&t.eventsListeners[u].forEach(function(c){c.apply(n,a)})}),t}};function y5(){var e=this,t,r,a=e.$el;typeof e.params.width!="undefined"&&e.params.width!==null?t=e.params.width:t=a[0].clientWidth,typeof e.params.height!="undefined"&&e.params.height!==null?r=e.params.height:r=a[0].clientHeight,!(t===0&&e.isHorizontal()||r===0&&e.isVertical())&&(t=t-parseInt(a.css("padding-left")||0,10)-parseInt(a.css("padding-right")||0,10),r=r-parseInt(a.css("padding-top")||0,10)-parseInt(a.css("padding-bottom")||0,10),Number.isNaN(t)&&(t=0),Number.isNaN(r)&&(r=0),yr(e,{width:t,height:r,size:e.isHorizontal()?t:r}))}function w5(){var e=this;function t(Ze){return e.isHorizontal()?Ze:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[Ze]}function r(Ze,qe){return parseFloat(Ze.getPropertyValue(t(qe))||0)}var a=e.params,n=e.$wrapperEl,i=e.size,s=e.rtlTranslate,o=e.wrongRTL,l=e.virtual&&a.virtual.enabled,u=l?e.virtual.slides.length:e.slides.length,c=n.children("."+e.params.slideClass),d=l?e.virtual.slides.length:c.length,p=[],f=[],h=[],m=a.slidesOffsetBefore;typeof m=="function"&&(m=a.slidesOffsetBefore.call(e));var g=a.slidesOffsetAfter;typeof g=="function"&&(g=a.slidesOffsetAfter.call(e));var v=e.snapGrid.length,b=e.slidesGrid.length,y=a.spaceBetween,w=-m,x=0,k=0;if(typeof i!="undefined"){typeof y=="string"&&y.indexOf("%")>=0&&(y=parseFloat(y.replace("%",""))/100*i),e.virtualSize=-y,s?c.css({marginLeft:"",marginBottom:"",marginTop:""}):c.css({marginRight:"",marginBottom:"",marginTop:""});var C;a.slidesPerColumn>1&&(Math.floor(d/a.slidesPerColumn)===d/e.params.slidesPerColumn?C=d:C=Math.ceil(d/a.slidesPerColumn)*a.slidesPerColumn,a.slidesPerView!=="auto"&&a.slidesPerColumnFill==="row"&&(C=Math.max(C,a.slidesPerView*a.slidesPerColumn)));for(var E,$=a.slidesPerColumn,N=C/$,I=Math.floor(d/a.slidesPerColumn),S=0;S<d;S+=1){E=0;var A=c.eq(S);if(a.slidesPerColumn>1){var R=void 0,O=void 0,D=void 0;if(a.slidesPerColumnFill==="row"&&a.slidesPerGroup>1){var z=Math.floor(S/(a.slidesPerGroup*a.slidesPerColumn)),U=S-a.slidesPerColumn*a.slidesPerGroup*z,j=z===0?a.slidesPerGroup:Math.min(Math.ceil((d-z*$*a.slidesPerGroup)/$),a.slidesPerGroup);D=Math.floor(U/j),O=U-D*j+z*a.slidesPerGroup,R=O+D*C/$,A.css({"-webkit-box-ordinal-group":R,"-moz-box-ordinal-group":R,"-ms-flex-order":R,"-webkit-order":R,order:R})}else a.slidesPerColumnFill==="column"?(O=Math.floor(S/$),D=S-O*$,(O>I||O===I&&D===$-1)&&(D+=1,D>=$&&(D=0,O+=1))):(D=Math.floor(S/N),O=S-D*N);A.css(t("margin-top"),D!==0?a.spaceBetween&&a.spaceBetween+"px":"")}if(A.css("display")!=="none"){if(a.slidesPerView==="auto"){var G=getComputedStyle(A[0]),L=A[0].style.transform,V=A[0].style.webkitTransform;if(L&&(A[0].style.transform="none"),V&&(A[0].style.webkitTransform="none"),a.roundLengths)E=e.isHorizontal()?A.outerWidth(!0):A.outerHeight(!0);else{var H=r(G,"width"),Y=r(G,"padding-left"),K=r(G,"padding-right"),Z=r(G,"margin-left"),le=r(G,"margin-right"),de=G.getPropertyValue("box-sizing");if(de&&de==="border-box")E=H+Z+le;else{var ie=A[0],ue=ie.clientWidth,pe=ie.offsetWidth;E=H+Y+K+Z+le+(pe-ue)}}L&&(A[0].style.transform=L),V&&(A[0].style.webkitTransform=V),a.roundLengths&&(E=Math.floor(E))}else E=(i-(a.slidesPerView-1)*y)/a.slidesPerView,a.roundLengths&&(E=Math.floor(E)),c[S]&&(c[S].style[t("width")]=E+"px");c[S]&&(c[S].swiperSlideSize=E),h.push(E),a.centeredSlides?(w=w+E/2+x/2+y,x===0&&S!==0&&(w=w-i/2-y),S===0&&(w=w-i/2-y),Math.abs(w)<1/1e3&&(w=0),a.roundLengths&&(w=Math.floor(w)),k%a.slidesPerGroup===0&&p.push(w),f.push(w)):(a.roundLengths&&(w=Math.floor(w)),(k-Math.min(e.params.slidesPerGroupSkip,k))%e.params.slidesPerGroup===0&&p.push(w),f.push(w),w=w+E+y),e.virtualSize+=E+y,x=E,k+=1}}e.virtualSize=Math.max(e.virtualSize,i)+g;var Se;if(s&&o&&(a.effect==="slide"||a.effect==="coverflow")&&n.css({width:e.virtualSize+a.spaceBetween+"px"}),a.setWrapperSize){var ke;n.css((ke={},ke[t("width")]=e.virtualSize+a.spaceBetween+"px",ke))}if(a.slidesPerColumn>1){var oe;if(e.virtualSize=(E+a.spaceBetween)*C,e.virtualSize=Math.ceil(e.virtualSize/a.slidesPerColumn)-a.spaceBetween,n.css((oe={},oe[t("width")]=e.virtualSize+a.spaceBetween+"px",oe)),a.centeredSlides){Se=[];for(var me=0;me<p.length;me+=1){var $e=p[me];a.roundLengths&&($e=Math.floor($e)),p[me]<e.virtualSize+p[0]&&Se.push($e)}p=Se}}if(!a.centeredSlides){Se=[];for(var Me=0;Me<p.length;Me+=1){var Oe=p[Me];a.roundLengths&&(Oe=Math.floor(Oe)),p[Me]<=e.virtualSize-i&&Se.push(Oe)}p=Se,Math.floor(e.virtualSize-i)-Math.floor(p[p.length-1])>1&&p.push(e.virtualSize-i)}if(p.length===0&&(p=[0]),a.spaceBetween!==0){var he,Re=e.isHorizontal()&&s?"marginLeft":t("marginRight");c.filter(function(Ze,qe){return a.cssMode?qe!==c.length-1:!0}).css((he={},he[Re]=y+"px",he))}if(a.centeredSlides&&a.centeredSlidesBounds){var Ne=0;h.forEach(function(Ze){Ne+=Ze+(a.spaceBetween?a.spaceBetween:0)}),Ne-=a.spaceBetween;var je=Ne-i;p=p.map(function(Ze){return Ze<0?-m:Ze>je?je+g:Ze})}if(a.centerInsufficientSlides){var ve=0;if(h.forEach(function(Ze){ve+=Ze+(a.spaceBetween?a.spaceBetween:0)}),ve-=a.spaceBetween,ve<i){var Ge=(i-ve)/2;p.forEach(function(Ze,qe){p[qe]=Ze-Ge}),f.forEach(function(Ze,qe){f[qe]=Ze+Ge})}}yr(e,{slides:c,snapGrid:p,slidesGrid:f,slidesSizesGrid:h}),d!==u&&e.emit("slidesLengthChange"),p.length!==v&&(e.params.watchOverflow&&e.checkOverflow(),e.emit("snapGridLengthChange")),f.length!==b&&e.emit("slidesGridLengthChange"),(a.watchSlidesProgress||a.watchSlidesVisibility)&&e.updateSlidesOffset()}}function x5(e){var t=this,r=[],a=t.virtual&&t.params.virtual.enabled,n=0,i;typeof e=="number"?t.setTransition(e):e===!0&&t.setTransition(t.params.speed);var s=function(c){return a?t.slides.filter(function(d){return parseInt(d.getAttribute("data-swiper-slide-index"),10)===c})[0]:t.slides.eq(c)[0]};if(t.params.slidesPerView!=="auto"&&t.params.slidesPerView>1)if(t.params.centeredSlides)t.visibleSlides.each(function(u){r.push(u)});else for(i=0;i<Math.ceil(t.params.slidesPerView);i+=1){var o=t.activeIndex+i;if(o>t.slides.length&&!a)break;r.push(s(o))}else r.push(s(t.activeIndex));for(i=0;i<r.length;i+=1)if(typeof r[i]!="undefined"){var l=r[i].offsetHeight;n=l>n?l:n}n&&t.$wrapperEl.css("height",n+"px")}function k5(){for(var e=this,t=e.slides,r=0;r<t.length;r+=1)t[r].swiperSlideOffset=e.isHorizontal()?t[r].offsetLeft:t[r].offsetTop}function E5(e){e===void 0&&(e=this&&this.translate||0);var t=this,r=t.params,a=t.slides,n=t.rtlTranslate;if(a.length!==0){typeof a[0].swiperSlideOffset=="undefined"&&t.updateSlidesOffset();var i=-e;n&&(i=e),a.removeClass(r.slideVisibleClass),t.visibleSlidesIndexes=[],t.visibleSlides=[];for(var s=0;s<a.length;s+=1){var o=a[s],l=(i+(r.centeredSlides?t.minTranslate():0)-o.swiperSlideOffset)/(o.swiperSlideSize+r.spaceBetween);if(r.watchSlidesVisibility||r.centeredSlides&&r.autoHeight){var u=-(i-o.swiperSlideOffset),c=u+t.slidesSizesGrid[s],d=u>=0&&u<t.size-1||c>1&&c<=t.size||u<=0&&c>=t.size;d&&(t.visibleSlides.push(o),t.visibleSlidesIndexes.push(s),a.eq(s).addClass(r.slideVisibleClass))}o.progress=n?-l:l}t.visibleSlides=He(t.visibleSlides)}}function C5(e){var t=this;if(typeof e=="undefined"){var r=t.rtlTranslate?-1:1;e=t&&t.translate&&t.translate*r||0}var a=t.params,n=t.maxTranslate()-t.minTranslate(),i=t.progress,s=t.isBeginning,o=t.isEnd,l=s,u=o;n===0?(i=0,s=!0,o=!0):(i=(e-t.minTranslate())/n,s=i<=0,o=i>=1),yr(t,{progress:i,isBeginning:s,isEnd:o}),(a.watchSlidesProgress||a.watchSlidesVisibility||a.centeredSlides&&a.autoHeight)&&t.updateSlidesProgress(e),s&&!l&&t.emit("reachBeginning toEdge"),o&&!u&&t.emit("reachEnd toEdge"),(l&&!s||u&&!o)&&t.emit("fromEdge"),t.emit("progress",i)}function S5(){var e=this,t=e.slides,r=e.params,a=e.$wrapperEl,n=e.activeIndex,i=e.realIndex,s=e.virtual&&r.virtual.enabled;t.removeClass(r.slideActiveClass+" "+r.slideNextClass+" "+r.slidePrevClass+" "+r.slideDuplicateActiveClass+" "+r.slideDuplicateNextClass+" "+r.slideDuplicatePrevClass);var o;s?o=e.$wrapperEl.find("."+r.slideClass+'[data-swiper-slide-index="'+n+'"]'):o=t.eq(n),o.addClass(r.slideActiveClass),r.loop&&(o.hasClass(r.slideDuplicateClass)?a.children("."+r.slideClass+":not(."+r.slideDuplicateClass+')[data-swiper-slide-index="'+i+'"]').addClass(r.slideDuplicateActiveClass):a.children("."+r.slideClass+"."+r.slideDuplicateClass+'[data-swiper-slide-index="'+i+'"]').addClass(r.slideDuplicateActiveClass));var l=o.nextAll("."+r.slideClass).eq(0).addClass(r.slideNextClass);r.loop&&l.length===0&&(l=t.eq(0),l.addClass(r.slideNextClass));var u=o.prevAll("."+r.slideClass).eq(0).addClass(r.slidePrevClass);r.loop&&u.length===0&&(u=t.eq(-1),u.addClass(r.slidePrevClass)),r.loop&&(l.hasClass(r.slideDuplicateClass)?a.children("."+r.slideClass+":not(."+r.slideDuplicateClass+')[data-swiper-slide-index="'+l.attr("data-swiper-slide-index")+'"]').addClass(r.slideDuplicateNextClass):a.children("."+r.slideClass+"."+r.slideDuplicateClass+'[data-swiper-slide-index="'+l.attr("data-swiper-slide-index")+'"]').addClass(r.slideDuplicateNextClass),u.hasClass(r.slideDuplicateClass)?a.children("."+r.slideClass+":not(."+r.slideDuplicateClass+')[data-swiper-slide-index="'+u.attr("data-swiper-slide-index")+'"]').addClass(r.slideDuplicatePrevClass):a.children("."+r.slideClass+"."+r.slideDuplicateClass+'[data-swiper-slide-index="'+u.attr("data-swiper-slide-index")+'"]').addClass(r.slideDuplicatePrevClass)),e.emitSlidesClasses()}function $5(e){var t=this,r=t.rtlTranslate?t.translate:-t.translate,a=t.slidesGrid,n=t.snapGrid,i=t.params,s=t.activeIndex,o=t.realIndex,l=t.snapIndex,u=e,c;if(typeof u=="undefined"){for(var d=0;d<a.length;d+=1)typeof a[d+1]!="undefined"?r>=a[d]&&r<a[d+1]-(a[d+1]-a[d])/2?u=d:r>=a[d]&&r<a[d+1]&&(u=d+1):r>=a[d]&&(u=d);i.normalizeSlideIndex&&(u<0||typeof u=="undefined")&&(u=0)}if(n.indexOf(r)>=0)c=n.indexOf(r);else{var p=Math.min(i.slidesPerGroupSkip,u);c=p+Math.floor((u-p)/i.slidesPerGroup)}if(c>=n.length&&(c=n.length-1),u===s){c!==l&&(t.snapIndex=c,t.emit("snapIndexChange"));return}var f=parseInt(t.slides.eq(u).attr("data-swiper-slide-index")||u,10);yr(t,{snapIndex:c,realIndex:f,previousIndex:s,activeIndex:u}),t.emit("activeIndexChange"),t.emit("snapIndexChange"),o!==f&&t.emit("realIndexChange"),(t.initialized||t.params.runCallbacksOnInit)&&t.emit("slideChange")}function I5(e){var t=this,r=t.params,a=He(e.target).closest("."+r.slideClass)[0],n=!1,i;if(a){for(var s=0;s<t.slides.length;s+=1)if(t.slides[s]===a){n=!0,i=s;break}}if(a&&n)t.clickedSlide=a,t.virtual&&t.params.virtual.enabled?t.clickedIndex=parseInt(He(a).attr("data-swiper-slide-index"),10):t.clickedIndex=i;else{t.clickedSlide=void 0,t.clickedIndex=void 0;return}r.slideToClickedSlide&&t.clickedIndex!==void 0&&t.clickedIndex!==t.activeIndex&&t.slideToClickedSlide()}var T5={updateSize:y5,updateSlides:w5,updateAutoHeight:x5,updateSlidesOffset:k5,updateSlidesProgress:E5,updateProgress:C5,updateSlidesClasses:S5,updateActiveIndex:$5,updateClickedSlide:I5};function N5(e){e===void 0&&(e=this.isHorizontal()?"x":"y");var t=this,r=t.params,a=t.rtlTranslate,n=t.translate,i=t.$wrapperEl;if(r.virtualTranslate)return a?-n:n;if(r.cssMode)return n;var s=i5(i[0],e);return a&&(s=-s),s||0}function A5(e,t){var r=this,a=r.rtlTranslate,n=r.params,i=r.$wrapperEl,s=r.wrapperEl,o=r.progress,l=0,u=0,c=0;r.isHorizontal()?l=a?-e:e:u=e,n.roundLengths&&(l=Math.floor(l),u=Math.floor(u)),n.cssMode?s[r.isHorizontal()?"scrollLeft":"scrollTop"]=r.isHorizontal()?-l:-u:n.virtualTranslate||i.transform("translate3d("+l+"px, "+u+"px, "+c+"px)"),r.previousTranslate=r.translate,r.translate=r.isHorizontal()?l:u;var d,p=r.maxTranslate()-r.minTranslate();p===0?d=0:d=(e-r.minTranslate())/p,d!==o&&r.updateProgress(e),r.emit("setTranslate",r.translate,t)}function _5(){return-this.snapGrid[0]}function M5(){return-this.snapGrid[this.snapGrid.length-1]}function R5(e,t,r,a,n){e===void 0&&(e=0),t===void 0&&(t=this.params.speed),r===void 0&&(r=!0),a===void 0&&(a=!0);var i=this,s=i.params,o=i.wrapperEl;if(i.animating&&s.preventInteractionOnTransition)return!1;var l=i.minTranslate(),u=i.maxTranslate(),c;if(a&&e>l?c=l:a&&e<u?c=u:c=e,i.updateProgress(c),s.cssMode){var d=i.isHorizontal();if(t===0)o[d?"scrollLeft":"scrollTop"]=-c;else if(o.scrollTo){var p;o.scrollTo((p={},p[d?"left":"top"]=-c,p.behavior="smooth",p))}else o[d?"scrollLeft":"scrollTop"]=-c;return!0}return t===0?(i.setTransition(0),i.setTranslate(c),r&&(i.emit("beforeTransitionStart",t,n),i.emit("transitionEnd"))):(i.setTransition(t),i.setTranslate(c),r&&(i.emit("beforeTransitionStart",t,n),i.emit("transitionStart")),i.animating||(i.animating=!0,i.onTranslateToWrapperTransitionEnd||(i.onTranslateToWrapperTransitionEnd=function(h){!i||i.destroyed||h.target===this&&(i.$wrapperEl[0].removeEventListener("transitionend",i.onTranslateToWrapperTransitionEnd),i.$wrapperEl[0].removeEventListener("webkitTransitionEnd",i.onTranslateToWrapperTransitionEnd),i.onTranslateToWrapperTransitionEnd=null,delete i.onTranslateToWrapperTransitionEnd,r&&i.emit("transitionEnd"))}),i.$wrapperEl[0].addEventListener("transitionend",i.onTranslateToWrapperTransitionEnd),i.$wrapperEl[0].addEventListener("webkitTransitionEnd",i.onTranslateToWrapperTransitionEnd))),!0}var O5={getTranslate:N5,setTranslate:A5,minTranslate:_5,maxTranslate:M5,translateTo:R5};function P5(e,t){var r=this;r.params.cssMode||r.$wrapperEl.transition(e),r.emit("setTransition",e,t)}function D5(e,t){e===void 0&&(e=!0);var r=this,a=r.activeIndex,n=r.params,i=r.previousIndex;if(!n.cssMode){n.autoHeight&&r.updateAutoHeight();var s=t;if(s||(a>i?s="next":a<i?s="prev":s="reset"),r.emit("transitionStart"),e&&a!==i){if(s==="reset"){r.emit("slideResetTransitionStart");return}r.emit("slideChangeTransitionStart"),s==="next"?r.emit("slideNextTransitionStart"):r.emit("slidePrevTransitionStart")}}}function F5(e,t){e===void 0&&(e=!0);var r=this,a=r.activeIndex,n=r.previousIndex,i=r.params;if(r.animating=!1,!i.cssMode){r.setTransition(0);var s=t;if(s||(a>n?s="next":a<n?s="prev":s="reset"),r.emit("transitionEnd"),e&&a!==n){if(s==="reset"){r.emit("slideResetTransitionEnd");return}r.emit("slideChangeTransitionEnd"),s==="next"?r.emit("slideNextTransitionEnd"):r.emit("slidePrevTransitionEnd")}}}var L5={setTransition:P5,transitionStart:D5,transitionEnd:F5};function z5(e,t,r,a,n){if(e===void 0&&(e=0),t===void 0&&(t=this.params.speed),r===void 0&&(r=!0),typeof e!="number"&&typeof e!="string")throw new Error("The 'index' argument cannot have type other than 'number' or 'string'. ["+typeof e+"] given.");if(typeof e=="string"){var i=parseInt(e,10),s=isFinite(i);if(!s)throw new Error("The passed-in 'index' (string) couldn't be converted to 'number'. ["+e+"] given.");e=i}var o=this,l=e;l<0&&(l=0);var u=o.params,c=o.snapGrid,d=o.slidesGrid,p=o.previousIndex,f=o.activeIndex,h=o.rtlTranslate,m=o.wrapperEl,g=o.enabled;if(o.animating&&u.preventInteractionOnTransition||!g&&!a&&!n)return!1;var v=Math.min(o.params.slidesPerGroupSkip,l),b=v+Math.floor((l-v)/o.params.slidesPerGroup);b>=c.length&&(b=c.length-1),(f||u.initialSlide||0)===(p||0)&&r&&o.emit("beforeSlideChangeStart");var y=-c[b];if(o.updateProgress(y),u.normalizeSlideIndex)for(var w=0;w<d.length;w+=1){var x=-Math.floor(y*100),k=Math.floor(d[w]*100),C=Math.floor(d[w+1]*100);typeof d[w+1]!="undefined"?x>=k&&x<C-(C-k)/2?l=w:x>=k&&x<C&&(l=w+1):x>=k&&(l=w)}if(o.initialized&&l!==f&&(!o.allowSlideNext&&y<o.translate&&y<o.minTranslate()||!o.allowSlidePrev&&y>o.translate&&y>o.maxTranslate()&&(f||0)!==l))return!1;var E;if(l>f?E="next":l<f?E="prev":E="reset",h&&-y===o.translate||!h&&y===o.translate)return o.updateActiveIndex(l),u.autoHeight&&o.updateAutoHeight(),o.updateSlidesClasses(),u.effect!=="slide"&&o.setTranslate(y),E!=="reset"&&(o.transitionStart(r,E),o.transitionEnd(r,E)),!1;if(u.cssMode){var $=o.isHorizontal(),N=-y;if(h&&(N=m.scrollWidth-m.offsetWidth-N),t===0)m[$?"scrollLeft":"scrollTop"]=N;else if(m.scrollTo){var I;m.scrollTo((I={},I[$?"left":"top"]=N,I.behavior="smooth",I))}else m[$?"scrollLeft":"scrollTop"]=N;return!0}return t===0?(o.setTransition(0),o.setTranslate(y),o.updateActiveIndex(l),o.updateSlidesClasses(),o.emit("beforeTransitionStart",t,a),o.transitionStart(r,E),o.transitionEnd(r,E)):(o.setTransition(t),o.setTranslate(y),o.updateActiveIndex(l),o.updateSlidesClasses(),o.emit("beforeTransitionStart",t,a),o.transitionStart(r,E),o.animating||(o.animating=!0,o.onSlideToWrapperTransitionEnd||(o.onSlideToWrapperTransitionEnd=function(A){!o||o.destroyed||A.target===this&&(o.$wrapperEl[0].removeEventListener("transitionend",o.onSlideToWrapperTransitionEnd),o.$wrapperEl[0].removeEventListener("webkitTransitionEnd",o.onSlideToWrapperTransitionEnd),o.onSlideToWrapperTransitionEnd=null,delete o.onSlideToWrapperTransitionEnd,o.transitionEnd(r,E))}),o.$wrapperEl[0].addEventListener("transitionend",o.onSlideToWrapperTransitionEnd),o.$wrapperEl[0].addEventListener("webkitTransitionEnd",o.onSlideToWrapperTransitionEnd))),!0}function B5(e,t,r,a){e===void 0&&(e=0),t===void 0&&(t=this.params.speed),r===void 0&&(r=!0);var n=this,i=e;return n.params.loop&&(i+=n.loopedSlides),n.slideTo(i,t,r,a)}function V5(e,t,r){e===void 0&&(e=this.params.speed),t===void 0&&(t=!0);var a=this,n=a.params,i=a.animating,s=a.enabled;if(!s)return a;var o=a.activeIndex<n.slidesPerGroupSkip?1:n.slidesPerGroup;if(n.loop){if(i&&n.loopPreventsSlide)return!1;a.loopFix(),a._clientLeft=a.$wrapperEl[0].clientLeft}return a.slideTo(a.activeIndex+o,e,t,r)}function W5(e,t,r){e===void 0&&(e=this.params.speed),t===void 0&&(t=!0);var a=this,n=a.params,i=a.animating,s=a.snapGrid,o=a.slidesGrid,l=a.rtlTranslate,u=a.enabled;if(!u)return a;if(n.loop){if(i&&n.loopPreventsSlide)return!1;a.loopFix(),a._clientLeft=a.$wrapperEl[0].clientLeft}var c=l?a.translate:-a.translate;function d(g){return g<0?-Math.floor(Math.abs(g)):Math.floor(g)}var p=d(c),f=s.map(function(g){return d(g)}),h=s[f.indexOf(p)-1];typeof h=="undefined"&&n.cssMode&&s.forEach(function(g){!h&&p>=g&&(h=g)});var m;return typeof h!="undefined"&&(m=o.indexOf(h),m<0&&(m=a.activeIndex-1)),a.slideTo(m,e,t,r)}function H5(e,t,r){e===void 0&&(e=this.params.speed),t===void 0&&(t=!0);var a=this;return a.slideTo(a.activeIndex,e,t,r)}function U5(e,t,r,a){e===void 0&&(e=this.params.speed),t===void 0&&(t=!0),a===void 0&&(a=.5);var n=this,i=n.activeIndex,s=Math.min(n.params.slidesPerGroupSkip,i),o=s+Math.floor((i-s)/n.params.slidesPerGroup),l=n.rtlTranslate?n.translate:-n.translate;if(l>=n.snapGrid[o]){var u=n.snapGrid[o],c=n.snapGrid[o+1];l-u>(c-u)*a&&(i+=n.params.slidesPerGroup)}else{var d=n.snapGrid[o-1],p=n.snapGrid[o];l-d<=(p-d)*a&&(i-=n.params.slidesPerGroup)}return i=Math.max(i,0),i=Math.min(i,n.slidesGrid.length-1),n.slideTo(i,e,t,r)}function j5(){var e=this,t=e.params,r=e.$wrapperEl,a=t.slidesPerView==="auto"?e.slidesPerViewDynamic():t.slidesPerView,n=e.clickedIndex,i;if(t.loop){if(e.animating)return;i=parseInt(He(e.clickedSlide).attr("data-swiper-slide-index"),10),t.centeredSlides?n<e.loopedSlides-a/2||n>e.slides.length-e.loopedSlides+a/2?(e.loopFix(),n=r.children("."+t.slideClass+'[data-swiper-slide-index="'+i+'"]:not(.'+t.slideDuplicateClass+")").eq(0).index(),C1(function(){e.slideTo(n)})):e.slideTo(n):n>e.slides.length-a?(e.loopFix(),n=r.children("."+t.slideClass+'[data-swiper-slide-index="'+i+'"]:not(.'+t.slideDuplicateClass+")").eq(0).index(),C1(function(){e.slideTo(n)})):e.slideTo(n)}else e.slideTo(n)}var G5={slideTo:z5,slideToLoop:B5,slideNext:V5,slidePrev:W5,slideReset:H5,slideToClosest:U5,slideToClickedSlide:j5};function q5(){var e=this,t=nt(),r=e.params,a=e.$wrapperEl;a.children("."+r.slideClass+"."+r.slideDuplicateClass).remove();var n=a.children("."+r.slideClass);if(r.loopFillGroupWithBlank){var i=r.slidesPerGroup-n.length%r.slidesPerGroup;if(i!==r.slidesPerGroup){for(var s=0;s<i;s+=1){var o=He(t.createElement("div")).addClass(r.slideClass+" "+r.slideBlankClass);a.append(o)}n=a.children("."+r.slideClass)}}r.slidesPerView==="auto"&&!r.loopedSlides&&(r.loopedSlides=n.length),e.loopedSlides=Math.ceil(parseFloat(r.loopedSlides||r.slidesPerView,10)),e.loopedSlides+=r.loopAdditionalSlides,e.loopedSlides>n.length&&(e.loopedSlides=n.length);var l=[],u=[];n.each(function(p,f){var h=He(p);f<e.loopedSlides&&u.push(p),f<n.length&&f>=n.length-e.loopedSlides&&l.push(p),h.attr("data-swiper-slide-index",f)});for(var c=0;c<u.length;c+=1)a.append(He(u[c].cloneNode(!0)).addClass(r.slideDuplicateClass));for(var d=l.length-1;d>=0;d-=1)a.prepend(He(l[d].cloneNode(!0)).addClass(r.slideDuplicateClass))}function X5(){var e=this;e.emit("beforeLoopFix");var t=e.activeIndex,r=e.slides,a=e.loopedSlides,n=e.allowSlidePrev,i=e.allowSlideNext,s=e.snapGrid,o=e.rtlTranslate,l;e.allowSlidePrev=!0,e.allowSlideNext=!0;var u=-s[t],c=u-e.getTranslate();if(t<a){l=r.length-a*3+t,l+=a;var d=e.slideTo(l,0,!1,!0);d&&c!==0&&e.setTranslate((o?-e.translate:e.translate)-c)}else if(t>=r.length-a){l=-r.length+t+a,l+=a;var p=e.slideTo(l,0,!1,!0);p&&c!==0&&e.setTranslate((o?-e.translate:e.translate)-c)}e.allowSlidePrev=n,e.allowSlideNext=i,e.emit("loopFix")}function Y5(){var e=this,t=e.$wrapperEl,r=e.params,a=e.slides;t.children("."+r.slideClass+"."+r.slideDuplicateClass+",."+r.slideClass+"."+r.slideBlankClass).remove(),a.removeAttr("data-swiper-slide-index")}var K5={loopCreate:q5,loopFix:X5,loopDestroy:Y5};function Z5(e){var t=this;if(!(t.support.touch||!t.params.simulateTouch||t.params.watchOverflow&&t.isLocked||t.params.cssMode)){var r=t.el;r.style.cursor="move",r.style.cursor=e?"-webkit-grabbing":"-webkit-grab",r.style.cursor=e?"-moz-grabbin":"-moz-grab",r.style.cursor=e?"grabbing":"grab"}}function Q5(){var e=this;e.support.touch||e.params.watchOverflow&&e.isLocked||e.params.cssMode||(e.el.style.cursor="")}var J5={setGrabCursor:Z5,unsetGrabCursor:Q5};function eG(e){var t=this,r=t.$wrapperEl,a=t.params;if(a.loop&&t.loopDestroy(),typeof e=="object"&&"length"in e)for(var n=0;n<e.length;n+=1)e[n]&&r.append(e[n]);else r.append(e);a.loop&&t.loopCreate(),a.observer&&t.support.observer||t.update()}function tG(e){var t=this,r=t.params,a=t.$wrapperEl,n=t.activeIndex;r.loop&&t.loopDestroy();var i=n+1;if(typeof e=="object"&&"length"in e){for(var s=0;s<e.length;s+=1)e[s]&&a.prepend(e[s]);i=n+e.length}else a.prepend(e);r.loop&&t.loopCreate(),r.observer&&t.support.observer||t.update(),t.slideTo(i,0,!1)}function rG(e,t){var r=this,a=r.$wrapperEl,n=r.params,i=r.activeIndex,s=i;n.loop&&(s-=r.loopedSlides,r.loopDestroy(),r.slides=a.children("."+n.slideClass));var o=r.slides.length;if(e<=0){r.prependSlide(t);return}if(e>=o){r.appendSlide(t);return}for(var l=s>e?s+1:s,u=[],c=o-1;c>=e;c-=1){var d=r.slides.eq(c);d.remove(),u.unshift(d)}if(typeof t=="object"&&"length"in t){for(var p=0;p<t.length;p+=1)t[p]&&a.append(t[p]);l=s>e?s+t.length:s}else a.append(t);for(var f=0;f<u.length;f+=1)a.append(u[f]);n.loop&&r.loopCreate(),n.observer&&r.support.observer||r.update(),n.loop?r.slideTo(l+r.loopedSlides,0,!1):r.slideTo(l,0,!1)}function nG(e){var t=this,r=t.params,a=t.$wrapperEl,n=t.activeIndex,i=n;r.loop&&(i-=t.loopedSlides,t.loopDestroy(),t.slides=a.children("."+r.slideClass));var s=i,o;if(typeof e=="object"&&"length"in e){for(var l=0;l<e.length;l+=1)o=e[l],t.slides[o]&&t.slides.eq(o).remove(),o<s&&(s-=1);s=Math.max(s,0)}else o=e,t.slides[o]&&t.slides.eq(o).remove(),o<s&&(s-=1),s=Math.max(s,0);r.loop&&t.loopCreate(),r.observer&&t.support.observer||t.update(),r.loop?t.slideTo(s+t.loopedSlides,0,!1):t.slideTo(s,0,!1)}function aG(){for(var e=this,t=[],r=0;r<e.slides.length;r+=1)t.push(r);e.removeSlide(t)}var iG={appendSlide:eG,prependSlide:tG,addSlide:rG,removeSlide:nG,removeAllSlides:aG};function sG(e,t){t===void 0&&(t=this);function r(a){if(!a||a===nt()||a===De())return null;a.assignedSlot&&(a=a.assignedSlot);var n=a.closest(e);return n||r(a.getRootNode().host)}return r(t)}function oG(e){var t=this,r=nt(),a=De(),n=t.touchEventsData,i=t.params,s=t.touches,o=t.enabled;if(!!o&&!(t.animating&&i.preventInteractionOnTransition)){var l=e;l.originalEvent&&(l=l.originalEvent);var u=He(l.target);if(!(i.touchEventsTarget==="wrapper"&&!u.closest(t.wrapperEl).length)&&(n.isTouchEvent=l.type==="touchstart",!(!n.isTouchEvent&&"which"in l&&l.which===3)&&!(!n.isTouchEvent&&"button"in l&&l.button>0)&&!(n.isTouched&&n.isMoved))){var c=!!i.noSwipingClass&&i.noSwipingClass!=="";c&&l.target&&l.target.shadowRoot&&e.path&&e.path[0]&&(u=He(e.path[0]));var d=i.noSwipingSelector?i.noSwipingSelector:"."+i.noSwipingClass,p=!!(l.target&&l.target.shadowRoot);if(i.noSwiping&&(p?sG(d,l.target):u.closest(d)[0])){t.allowClick=!0;return}if(!(i.swipeHandler&&!u.closest(i.swipeHandler)[0])){s.currentX=l.type==="touchstart"?l.targetTouches[0].pageX:l.pageX,s.currentY=l.type==="touchstart"?l.targetTouches[0].pageY:l.pageY;var f=s.currentX,h=s.currentY,m=i.edgeSwipeDetection||i.iOSEdgeSwipeDetection,g=i.edgeSwipeThreshold||i.iOSEdgeSwipeThreshold;if(m&&(f<=g||f>=a.innerWidth-g))if(m==="prevent")e.preventDefault();else return;if(yr(n,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),s.startX=f,s.startY=h,n.touchStartTime=Gs(),t.allowClick=!0,t.updateSize(),t.swipeDirection=void 0,i.threshold>0&&(n.allowThresholdMove=!1),l.type!=="touchstart"){var v=!0;u.is(n.focusableElements)&&(v=!1),r.activeElement&&He(r.activeElement).is(n.focusableElements)&&r.activeElement!==u[0]&&r.activeElement.blur();var b=v&&t.allowTouchMove&&i.touchStartPreventDefault;(i.touchStartForcePreventDefault||b)&&!u[0].isContentEditable&&l.preventDefault()}t.emit("touchStart",l)}}}}function lG(e){var t=nt(),r=this,a=r.touchEventsData,n=r.params,i=r.touches,s=r.rtlTranslate,o=r.enabled;if(!!o){var l=e;if(l.originalEvent&&(l=l.originalEvent),!a.isTouched){a.startMoving&&a.isScrolling&&r.emit("touchMoveOpposite",l);return}if(!(a.isTouchEvent&&l.type!=="touchmove")){var u=l.type==="touchmove"&&l.targetTouches&&(l.targetTouches[0]||l.changedTouches[0]),c=l.type==="touchmove"?u.pageX:l.pageX,d=l.type==="touchmove"?u.pageY:l.pageY;if(l.preventedByNestedSwiper){i.startX=c,i.startY=d;return}if(!r.allowTouchMove){r.allowClick=!1,a.isTouched&&(yr(i,{startX:c,startY:d,currentX:c,currentY:d}),a.touchStartTime=Gs());return}if(a.isTouchEvent&&n.touchReleaseOnEdges&&!n.loop){if(r.isVertical()){if(d<i.startY&&r.translate<=r.maxTranslate()||d>i.startY&&r.translate>=r.minTranslate()){a.isTouched=!1,a.isMoved=!1;return}}else if(c<i.startX&&r.translate<=r.maxTranslate()||c>i.startX&&r.translate>=r.minTranslate())return}if(a.isTouchEvent&&t.activeElement&&l.target===t.activeElement&&He(l.target).is(a.focusableElements)){a.isMoved=!0,r.allowClick=!1;return}if(a.allowTouchCallbacks&&r.emit("touchMove",l),!(l.targetTouches&&l.targetTouches.length>1)){i.currentX=c,i.currentY=d;var p=i.currentX-i.startX,f=i.currentY-i.startY;if(!(r.params.threshold&&Math.sqrt(Math.pow(p,2)+Math.pow(f,2))<r.params.threshold)){if(typeof a.isScrolling=="undefined"){var h;r.isHorizontal()&&i.currentY===i.startY||r.isVertical()&&i.currentX===i.startX?a.isScrolling=!1:p*p+f*f>=25&&(h=Math.atan2(Math.abs(f),Math.abs(p))*180/Math.PI,a.isScrolling=r.isHorizontal()?h>n.touchAngle:90-h>n.touchAngle)}if(a.isScrolling&&r.emit("touchMoveOpposite",l),typeof a.startMoving=="undefined"&&(i.currentX!==i.startX||i.currentY!==i.startY)&&(a.startMoving=!0),a.isScrolling){a.isTouched=!1;return}if(!!a.startMoving){r.allowClick=!1,!n.cssMode&&l.cancelable&&l.preventDefault(),n.touchMoveStopPropagation&&!n.nested&&l.stopPropagation(),a.isMoved||(n.loop&&r.loopFix(),a.startTranslate=r.getTranslate(),r.setTransition(0),r.animating&&r.$wrapperEl.trigger("webkitTransitionEnd transitionend"),a.allowMomentumBounce=!1,n.grabCursor&&(r.allowSlideNext===!0||r.allowSlidePrev===!0)&&r.setGrabCursor(!0),r.emit("sliderFirstMove",l)),r.emit("sliderMove",l),a.isMoved=!0;var m=r.isHorizontal()?p:f;i.diff=m,m*=n.touchRatio,s&&(m=-m),r.swipeDirection=m>0?"prev":"next",a.currentTranslate=m+a.startTranslate;var g=!0,v=n.resistanceRatio;if(n.touchReleaseOnEdges&&(v=0),m>0&&a.currentTranslate>r.minTranslate()?(g=!1,n.resistance&&(a.currentTranslate=r.minTranslate()-1+Math.pow(-r.minTranslate()+a.startTranslate+m,v))):m<0&&a.currentTranslate<r.maxTranslate()&&(g=!1,n.resistance&&(a.currentTranslate=r.maxTranslate()+1-Math.pow(r.maxTranslate()-a.startTranslate-m,v))),g&&(l.preventedByNestedSwiper=!0),!r.allowSlideNext&&r.swipeDirection==="next"&&a.currentTranslate<a.startTranslate&&(a.currentTranslate=a.startTranslate),!r.allowSlidePrev&&r.swipeDirection==="prev"&&a.currentTranslate>a.startTranslate&&(a.currentTranslate=a.startTranslate),!r.allowSlidePrev&&!r.allowSlideNext&&(a.currentTranslate=a.startTranslate),n.threshold>0)if(Math.abs(m)>n.threshold||a.allowThresholdMove){if(!a.allowThresholdMove){a.allowThresholdMove=!0,i.startX=i.currentX,i.startY=i.currentY,a.currentTranslate=a.startTranslate,i.diff=r.isHorizontal()?i.currentX-i.startX:i.currentY-i.startY;return}}else{a.currentTranslate=a.startTranslate;return}!n.followFinger||n.cssMode||((n.freeMode||n.watchSlidesProgress||n.watchSlidesVisibility)&&(r.updateActiveIndex(),r.updateSlidesClasses()),n.freeMode&&(a.velocities.length===0&&a.velocities.push({position:i[r.isHorizontal()?"startX":"startY"],time:a.touchStartTime}),a.velocities.push({position:i[r.isHorizontal()?"currentX":"currentY"],time:Gs()})),r.updateProgress(a.currentTranslate),r.setTranslate(a.currentTranslate))}}}}}}function uG(e){var t=this,r=t.touchEventsData,a=t.params,n=t.touches,i=t.rtlTranslate,s=t.$wrapperEl,o=t.slidesGrid,l=t.snapGrid,u=t.enabled;if(!!u){var c=e;if(c.originalEvent&&(c=c.originalEvent),r.allowTouchCallbacks&&t.emit("touchEnd",c),r.allowTouchCallbacks=!1,!r.isTouched){r.isMoved&&a.grabCursor&&t.setGrabCursor(!1),r.isMoved=!1,r.startMoving=!1;return}a.grabCursor&&r.isMoved&&r.isTouched&&(t.allowSlideNext===!0||t.allowSlidePrev===!0)&&t.setGrabCursor(!1);var d=Gs(),p=d-r.touchStartTime;if(t.allowClick&&(t.updateClickedSlide(c),t.emit("tap click",c),p<300&&d-r.lastClickTime<300&&t.emit("doubleTap doubleClick",c)),r.lastClickTime=Gs(),C1(function(){t.destroyed||(t.allowClick=!0)}),!r.isTouched||!r.isMoved||!t.swipeDirection||n.diff===0||r.currentTranslate===r.startTranslate){r.isTouched=!1,r.isMoved=!1,r.startMoving=!1;return}r.isTouched=!1,r.isMoved=!1,r.startMoving=!1;var f;if(a.followFinger?f=i?t.translate:-t.translate:f=-r.currentTranslate,!a.cssMode){if(a.freeMode){if(f<-t.minTranslate()){t.slideTo(t.activeIndex);return}if(f>-t.maxTranslate()){t.slides.length<l.length?t.slideTo(l.length-1):t.slideTo(t.slides.length-1);return}if(a.freeModeMomentum){if(r.velocities.length>1){var h=r.velocities.pop(),m=r.velocities.pop(),g=h.position-m.position,v=h.time-m.time;t.velocity=g/v,t.velocity/=2,Math.abs(t.velocity)<a.freeModeMinimumVelocity&&(t.velocity=0),(v>150||Gs()-h.time>300)&&(t.velocity=0)}else t.velocity=0;t.velocity*=a.freeModeMomentumVelocityRatio,r.velocities.length=0;var b=1e3*a.freeModeMomentumRatio,y=t.velocity*b,w=t.translate+y;i&&(w=-w);var x=!1,k,C=Math.abs(t.velocity)*20*a.freeModeMomentumBounceRatio,E;if(w<t.maxTranslate())a.freeModeMomentumBounce?(w+t.maxTranslate()<-C&&(w=t.maxTranslate()-C),k=t.maxTranslate(),x=!0,r.allowMomentumBounce=!0):w=t.maxTranslate(),a.loop&&a.centeredSlides&&(E=!0);else if(w>t.minTranslate())a.freeModeMomentumBounce?(w-t.minTranslate()>C&&(w=t.minTranslate()+C),k=t.minTranslate(),x=!0,r.allowMomentumBounce=!0):w=t.minTranslate(),a.loop&&a.centeredSlides&&(E=!0);else if(a.freeModeSticky){for(var $,N=0;N<l.length;N+=1)if(l[N]>-w){$=N;break}Math.abs(l[$]-w)<Math.abs(l[$-1]-w)||t.swipeDirection==="next"?w=l[$]:w=l[$-1],w=-w}if(E&&t.once("transitionEnd",function(){t.loopFix()}),t.velocity!==0){if(i?b=Math.abs((-w-t.translate)/t.velocity):b=Math.abs((w-t.translate)/t.velocity),a.freeModeSticky){var I=Math.abs((i?-w:w)-t.translate),S=t.slidesSizesGrid[t.activeIndex];I<S?b=a.speed:I<2*S?b=a.speed*1.5:b=a.speed*2.5}}else if(a.freeModeSticky){t.slideToClosest();return}a.freeModeMomentumBounce&&x?(t.updateProgress(k),t.setTransition(b),t.setTranslate(w),t.transitionStart(!0,t.swipeDirection),t.animating=!0,s.transitionEnd(function(){!t||t.destroyed||!r.allowMomentumBounce||(t.emit("momentumBounce"),t.setTransition(a.speed),setTimeout(function(){t.setTranslate(k),s.transitionEnd(function(){!t||t.destroyed||t.transitionEnd()})},0))})):t.velocity?(t.updateProgress(w),t.setTransition(b),t.setTranslate(w),t.transitionStart(!0,t.swipeDirection),t.animating||(t.animating=!0,s.transitionEnd(function(){!t||t.destroyed||t.transitionEnd()}))):(t.emit("_freeModeNoMomentumRelease"),t.updateProgress(w)),t.updateActiveIndex(),t.updateSlidesClasses()}else if(a.freeModeSticky){t.slideToClosest();return}else a.freeMode&&t.emit("_freeModeNoMomentumRelease");(!a.freeModeMomentum||p>=a.longSwipesMs)&&(t.updateProgress(),t.updateActiveIndex(),t.updateSlidesClasses());return}for(var A=0,R=t.slidesSizesGrid[0],O=0;O<o.length;O+=O<a.slidesPerGroupSkip?1:a.slidesPerGroup){var D=O<a.slidesPerGroupSkip-1?1:a.slidesPerGroup;typeof o[O+D]!="undefined"?f>=o[O]&&f<o[O+D]&&(A=O,R=o[O+D]-o[O]):f>=o[O]&&(A=O,R=o[o.length-1]-o[o.length-2])}var z=(f-o[A])/R,U=A<a.slidesPerGroupSkip-1?1:a.slidesPerGroup;if(p>a.longSwipesMs){if(!a.longSwipes){t.slideTo(t.activeIndex);return}t.swipeDirection==="next"&&(z>=a.longSwipesRatio?t.slideTo(A+U):t.slideTo(A)),t.swipeDirection==="prev"&&(z>1-a.longSwipesRatio?t.slideTo(A+U):t.slideTo(A))}else{if(!a.shortSwipes){t.slideTo(t.activeIndex);return}var j=t.navigation&&(c.target===t.navigation.nextEl||c.target===t.navigation.prevEl);j?c.target===t.navigation.nextEl?t.slideTo(A+U):t.slideTo(A):(t.swipeDirection==="next"&&t.slideTo(A+U),t.swipeDirection==="prev"&&t.slideTo(A))}}}}function $1(){var e=this,t=e.params,r=e.el;if(!(r&&r.offsetWidth===0)){t.breakpoints&&e.setBreakpoint();var a=e.allowSlideNext,n=e.allowSlidePrev,i=e.snapGrid;e.allowSlideNext=!0,e.allowSlidePrev=!0,e.updateSize(),e.updateSlides(),e.updateSlidesClasses(),(t.slidesPerView==="auto"||t.slidesPerView>1)&&e.isEnd&&!e.isBeginning&&!e.params.centeredSlides?e.slideTo(e.slides.length-1,0,!1,!0):e.slideTo(e.activeIndex,0,!1,!0),e.autoplay&&e.autoplay.running&&e.autoplay.paused&&e.autoplay.run(),e.allowSlidePrev=n,e.allowSlideNext=a,e.params.watchOverflow&&i!==e.snapGrid&&e.checkOverflow()}}function cG(e){var t=this;!t.enabled||t.allowClick||(t.params.preventClicks&&e.preventDefault(),t.params.preventClicksPropagation&&t.animating&&(e.stopPropagation(),e.stopImmediatePropagation()))}function dG(){var e=this,t=e.wrapperEl,r=e.rtlTranslate,a=e.enabled;if(!!a){e.previousTranslate=e.translate,e.isHorizontal()?r?e.translate=t.scrollWidth-t.offsetWidth-t.scrollLeft:e.translate=-t.scrollLeft:e.translate=-t.scrollTop,e.translate===-0&&(e.translate=0),e.updateActiveIndex(),e.updateSlidesClasses();var n,i=e.maxTranslate()-e.minTranslate();i===0?n=0:n=(e.translate-e.minTranslate())/i,n!==e.progress&&e.updateProgress(r?-e.translate:e.translate),e.emit("setTranslate",e.translate,!1)}}var mN=!1;function pG(){}function fG(){var e=this,t=nt(),r=e.params,a=e.touchEvents,n=e.el,i=e.wrapperEl,s=e.device,o=e.support;e.onTouchStart=oG.bind(e),e.onTouchMove=lG.bind(e),e.onTouchEnd=uG.bind(e),r.cssMode&&(e.onScroll=dG.bind(e)),e.onClick=cG.bind(e);var l=!!r.nested;if(!o.touch&&o.pointerEvents)n.addEventListener(a.start,e.onTouchStart,!1),t.addEventListener(a.move,e.onTouchMove,l),t.addEventListener(a.end,e.onTouchEnd,!1);else{if(o.touch){var u=a.start==="touchstart"&&o.passiveListener&&r.passiveListeners?{passive:!0,capture:!1}:!1;n.addEventListener(a.start,e.onTouchStart,u),n.addEventListener(a.move,e.onTouchMove,o.passiveListener?{passive:!1,capture:l}:l),n.addEventListener(a.end,e.onTouchEnd,u),a.cancel&&n.addEventListener(a.cancel,e.onTouchEnd,u),mN||(t.addEventListener("touchstart",pG),mN=!0)}(r.simulateTouch&&!s.ios&&!s.android||r.simulateTouch&&!o.touch&&s.ios)&&(n.addEventListener("mousedown",e.onTouchStart,!1),t.addEventListener("mousemove",e.onTouchMove,l),t.addEventListener("mouseup",e.onTouchEnd,!1))}(r.preventClicks||r.preventClicksPropagation)&&n.addEventListener("click",e.onClick,!0),r.cssMode&&i.addEventListener("scroll",e.onScroll),r.updateOnWindowResize?e.on(s.ios||s.android?"resize orientationchange observerUpdate":"resize observerUpdate",$1,!0):e.on("observerUpdate",$1,!0)}function hG(){var e=this,t=nt(),r=e.params,a=e.touchEvents,n=e.el,i=e.wrapperEl,s=e.device,o=e.support,l=!!r.nested;if(!o.touch&&o.pointerEvents)n.removeEventListener(a.start,e.onTouchStart,!1),t.removeEventListener(a.move,e.onTouchMove,l),t.removeEventListener(a.end,e.onTouchEnd,!1);else{if(o.touch){var u=a.start==="onTouchStart"&&o.passiveListener&&r.passiveListeners?{passive:!0,capture:!1}:!1;n.removeEventListener(a.start,e.onTouchStart,u),n.removeEventListener(a.move,e.onTouchMove,l),n.removeEventListener(a.end,e.onTouchEnd,u),a.cancel&&n.removeEventListener(a.cancel,e.onTouchEnd,u)}(r.simulateTouch&&!s.ios&&!s.android||r.simulateTouch&&!o.touch&&s.ios)&&(n.removeEventListener("mousedown",e.onTouchStart,!1),t.removeEventListener("mousemove",e.onTouchMove,l),t.removeEventListener("mouseup",e.onTouchEnd,!1))}(r.preventClicks||r.preventClicksPropagation)&&n.removeEventListener("click",e.onClick,!0),r.cssMode&&i.removeEventListener("scroll",e.onScroll),e.off(s.ios||s.android?"resize orientationchange observerUpdate":"resize observerUpdate",$1)}var mG={attachEvents:fG,detachEvents:hG};function gG(){var e=this,t=e.activeIndex,r=e.initialized,a=e.loopedSlides,n=a===void 0?0:a,i=e.params,s=e.$el,o=i.breakpoints;if(!(!o||o&&Object.keys(o).length===0)){var l=e.getBreakpoint(o,e.params.breakpointsBase,e.el);if(!(!l||e.currentBreakpoint===l)){var u=l in o?o[l]:void 0;u&&["slidesPerView","spaceBetween","slidesPerGroup","slidesPerGroupSkip","slidesPerColumn"].forEach(function(v){var b=u[v];typeof b!="undefined"&&(v==="slidesPerView"&&(b==="AUTO"||b==="auto")?u[v]="auto":v==="slidesPerView"?u[v]=parseFloat(b):u[v]=parseInt(b,10))});var c=u||e.originalParams,d=i.slidesPerColumn>1,p=c.slidesPerColumn>1,f=i.enabled;d&&!p?(s.removeClass(i.containerModifierClass+"multirow "+i.containerModifierClass+"multirow-column"),e.emitContainerClasses()):!d&&p&&(s.addClass(i.containerModifierClass+"multirow"),(c.slidesPerColumnFill&&c.slidesPerColumnFill==="column"||!c.slidesPerColumnFill&&i.slidesPerColumnFill==="column")&&s.addClass(i.containerModifierClass+"multirow-column"),e.emitContainerClasses());var h=c.direction&&c.direction!==i.direction,m=i.loop&&(c.slidesPerView!==i.slidesPerView||h);h&&r&&e.changeDirection(),yr(e.params,c);var g=e.params.enabled;yr(e,{allowTouchMove:e.params.allowTouchMove,allowSlideNext:e.params.allowSlideNext,allowSlidePrev:e.params.allowSlidePrev}),f&&!g?e.disable():!f&&g&&e.enable(),e.currentBreakpoint=l,e.emit("_beforeBreakpoint",c),m&&r&&(e.loopDestroy(),e.loopCreate(),e.updateSlides(),e.slideTo(t-n+e.loopedSlides,0,!1)),e.emit("breakpoint",c)}}}function vG(e,t,r){if(t===void 0&&(t="window"),!(!e||t==="container"&&!r)){var a=!1,n=De(),i=t==="window"?n.innerHeight:r.clientHeight,s=Object.keys(e).map(function(d){if(typeof d=="string"&&d.indexOf("@")===0){var p=parseFloat(d.substr(1)),f=i*p;return{value:f,point:d}}return{value:d,point:d}});s.sort(function(d,p){return parseInt(d.value,10)-parseInt(p.value,10)});for(var o=0;o<s.length;o+=1){var l=s[o],u=l.point,c=l.value;t==="window"?n.matchMedia("(min-width: "+c+"px)").matches&&(a=u):c<=r.clientWidth&&(a=u)}return a||"max"}}var bG={setBreakpoint:gG,getBreakpoint:vG};function yG(e,t){var r=[];return e.forEach(function(a){typeof a=="object"?Object.keys(a).forEach(function(n){a[n]&&r.push(t+n)}):typeof a=="string"&&r.push(t+a)}),r}function wG(){var e=this,t=e.classNames,r=e.params,a=e.rtl,n=e.$el,i=e.device,s=e.support,o=yG(["initialized",r.direction,{"pointer-events":s.pointerEvents&&!s.touch},{"free-mode":r.freeMode},{autoheight:r.autoHeight},{rtl:a},{multirow:r.slidesPerColumn>1},{"multirow-column":r.slidesPerColumn>1&&r.slidesPerColumnFill==="column"},{android:i.android},{ios:i.ios},{"css-mode":r.cssMode}],r.containerModifierClass);t.push.apply(t,o),n.addClass([].concat(t).join(" ")),e.emitContainerClasses()}function xG(){var e=this,t=e.$el,r=e.classNames;t.removeClass(r.join(" ")),e.emitContainerClasses()}var kG={addClasses:wG,removeClasses:xG};function EG(e,t,r,a,n,i){var s=De(),o;function l(){i&&i()}var u=He(e).parent("picture")[0];!u&&(!e.complete||!n)&&t?(o=new s.Image,o.onload=l,o.onerror=l,a&&(o.sizes=a),r&&(o.srcset=r),t&&(o.src=t)):l()}function CG(){var e=this;e.imagesToLoad=e.$el.find("img");function t(){typeof e=="undefined"||e===null||!e||e.destroyed||(e.imagesLoaded!==void 0&&(e.imagesLoaded+=1),e.imagesLoaded===e.imagesToLoad.length&&(e.params.updateOnImagesReady&&e.update(),e.emit("imagesReady")))}for(var r=0;r<e.imagesToLoad.length;r+=1){var a=e.imagesToLoad[r];e.loadImage(a,a.currentSrc||a.getAttribute("src"),a.srcset||a.getAttribute("srcset"),a.sizes||a.getAttribute("sizes"),!0,t)}}var SG={loadImage:EG,preloadImages:CG};function $G(){var e=this,t=e.params,r=e.isLocked,a=e.slides.length>0&&t.slidesOffsetBefore+t.spaceBetween*(e.slides.length-1)+e.slides[0].offsetWidth*e.slides.length;t.slidesOffsetBefore&&t.slidesOffsetAfter&&a?e.isLocked=a<=e.size:e.isLocked=e.snapGrid.length===1,e.allowSlideNext=!e.isLocked,e.allowSlidePrev=!e.isLocked,r!==e.isLocked&&e.emit(e.isLocked?"lock":"unlock"),r&&r!==e.isLocked&&(e.isEnd=!1,e.navigation&&e.navigation.update())}var IG={checkOverflow:$G},gN={init:!0,direction:"horizontal",touchEventsTarget:"container",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!1,nested:!1,createElements:!1,enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,freeMode:!1,freeModeMomentum:!0,freeModeMomentumRatio:1,freeModeMomentumBounce:!0,freeModeMomentumBounceRatio:1,freeModeMomentumVelocityRatio:1,freeModeSticky:!1,freeModeMinimumVelocity:.02,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerColumn:1,slidesPerColumnFill:"column",slidesPerGroup:1,slidesPerGroupSkip:0,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!1,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:0,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,watchSlidesVisibility:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,preloadImages:!0,updateOnImagesReady:!0,loop:!1,loopAdditionalSlides:0,loopedSlides:null,loopFillGroupWithBlank:!1,loopPreventsSlide:!0,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,containerModifierClass:"swiper-container-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-invisible-blank",slideActiveClass:"swiper-slide-active",slideDuplicateActiveClass:"swiper-slide-duplicate-active",slideVisibleClass:"swiper-slide-visible",slideDuplicateClass:"swiper-slide-duplicate",slideNextClass:"swiper-slide-next",slideDuplicateNextClass:"swiper-slide-duplicate-next",slidePrevClass:"swiper-slide-prev",slideDuplicatePrevClass:"swiper-slide-duplicate-prev",wrapperClass:"swiper-wrapper",runCallbacksOnInit:!0,_emitClasses:!1};function vN(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function TG(e,t,r){return t&&vN(e.prototype,t),r&&vN(e,r),e}var Ow={modular:v5,eventsEmitter:b5,update:T5,translate:O5,transition:L5,slide:G5,loop:K5,grabCursor:J5,manipulation:iG,events:mG,breakpoints:bG,checkOverflow:IG,classes:kG,images:SG},Pw={},JE=function(){function e(){for(var r,a,n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];if(i.length===1&&i[0].constructor&&Object.prototype.toString.call(i[0]).slice(8,-1)==="Object"?a=i[0]:(r=i[0],a=i[1]),a||(a={}),a=yr({},a),r&&!a.el&&(a.el=r),a.el&&He(a.el).length>1){var o=[];return He(a.el).each(function(c){var d=yr({},a,{el:c});o.push(new e(d))}),o}var l=this;l.__swiper__=!0,l.support=sO(),l.device=c5({userAgent:a.userAgent}),l.browser=p5(),l.eventsListeners={},l.eventsAnyListeners=[],typeof l.modules=="undefined"&&(l.modules={}),Object.keys(l.modules).forEach(function(c){var d=l.modules[c];if(d.params){var p=Object.keys(d.params)[0],f=d.params[p];if(typeof f!="object"||f===null||(["navigation","pagination","scrollbar"].indexOf(p)>=0&&a[p]===!0&&(a[p]={auto:!0}),!(p in a&&"enabled"in f)))return;a[p]===!0&&(a[p]={enabled:!0}),typeof a[p]=="object"&&!("enabled"in a[p])&&(a[p].enabled=!0),a[p]||(a[p]={enabled:!1})}});var u=yr({},gN);return l.useParams(u),l.params=yr({},u,Pw,a),l.originalParams=yr({},l.params),l.passedParams=yr({},a),l.params&&l.params.on&&Object.keys(l.params.on).forEach(function(c){l.on(c,l.params.on[c])}),l.params&&l.params.onAny&&l.onAny(l.params.onAny),l.$=He,yr(l,{enabled:l.params.enabled,el:r,classNames:[],slides:He(),slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal:function(){return l.params.direction==="horizontal"},isVertical:function(){return l.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,allowSlideNext:l.params.allowSlideNext,allowSlidePrev:l.params.allowSlidePrev,touchEvents:function(){var d=["touchstart","touchmove","touchend","touchcancel"],p=["mousedown","mousemove","mouseup"];return l.support.pointerEvents&&(p=["pointerdown","pointermove","pointerup"]),l.touchEventsTouch={start:d[0],move:d[1],end:d[2],cancel:d[3]},l.touchEventsDesktop={start:p[0],move:p[1],end:p[2]},l.support.touch||!l.params.simulateTouch?l.touchEventsTouch:l.touchEventsDesktop}(),touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:l.params.focusableElements,lastClickTime:Gs(),clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,isTouchEvent:void 0,startMoving:void 0},allowClick:!0,allowTouchMove:l.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),l.useModules(),l.emit("_swiper"),l.params.init&&l.init(),l}var t=e.prototype;return t.enable=function(){var a=this;a.enabled||(a.enabled=!0,a.params.grabCursor&&a.setGrabCursor(),a.emit("enable"))},t.disable=function(){var a=this;!a.enabled||(a.enabled=!1,a.params.grabCursor&&a.unsetGrabCursor(),a.emit("disable"))},t.setProgress=function(a,n){var i=this;a=Math.min(Math.max(a,0),1);var s=i.minTranslate(),o=i.maxTranslate(),l=(o-s)*a+s;i.translateTo(l,typeof n=="undefined"?0:n),i.updateActiveIndex(),i.updateSlidesClasses()},t.emitContainerClasses=function(){var a=this;if(!(!a.params._emitClasses||!a.el)){var n=a.el.className.split(" ").filter(function(i){return i.indexOf("swiper-container")===0||i.indexOf(a.params.containerModifierClass)===0});a.emit("_containerClasses",n.join(" "))}},t.getSlideClasses=function(a){var n=this;return a.className.split(" ").filter(function(i){return i.indexOf("swiper-slide")===0||i.indexOf(n.params.slideClass)===0}).join(" ")},t.emitSlidesClasses=function(){var a=this;if(!(!a.params._emitClasses||!a.el)){var n=[];a.slides.each(function(i){var s=a.getSlideClasses(i);n.push({slideEl:i,classNames:s}),a.emit("_slideClass",i,s)}),a.emit("_slideClasses",n)}},t.slidesPerViewDynamic=function(){var a=this,n=a.params,i=a.slides,s=a.slidesGrid,o=a.size,l=a.activeIndex,u=1;if(n.centeredSlides){for(var c=i[l].swiperSlideSize,d,p=l+1;p<i.length;p+=1)i[p]&&!d&&(c+=i[p].swiperSlideSize,u+=1,c>o&&(d=!0));for(var f=l-1;f>=0;f-=1)i[f]&&!d&&(c+=i[f].swiperSlideSize,u+=1,c>o&&(d=!0))}else for(var h=l+1;h<i.length;h+=1)s[h]-s[l]<o&&(u+=1);return u},t.update=function(){var a=this;if(!a||a.destroyed)return;var n=a.snapGrid,i=a.params;i.breakpoints&&a.setBreakpoint(),a.updateSize(),a.updateSlides(),a.updateProgress(),a.updateSlidesClasses();function s(){var l=a.rtlTranslate?a.translate*-1:a.translate,u=Math.min(Math.max(l,a.maxTranslate()),a.minTranslate());a.setTranslate(u),a.updateActiveIndex(),a.updateSlidesClasses()}var o;a.params.freeMode?(s(),a.params.autoHeight&&a.updateAutoHeight()):((a.params.slidesPerView==="auto"||a.params.slidesPerView>1)&&a.isEnd&&!a.params.centeredSlides?o=a.slideTo(a.slides.length-1,0,!1,!0):o=a.slideTo(a.activeIndex,0,!1,!0),o||s()),i.watchOverflow&&n!==a.snapGrid&&a.checkOverflow(),a.emit("update")},t.changeDirection=function(a,n){n===void 0&&(n=!0);var i=this,s=i.params.direction;return a||(a=s==="horizontal"?"vertical":"horizontal"),a===s||a!=="horizontal"&&a!=="vertical"||(i.$el.removeClass(""+i.params.containerModifierClass+s).addClass(""+i.params.containerModifierClass+a),i.emitContainerClasses(),i.params.direction=a,i.slides.each(function(o){a==="vertical"?o.style.width="":o.style.height=""}),i.emit("changeDirection"),n&&i.update()),i},t.mount=function(a){var n=this;if(n.mounted)return!0;var i=He(a||n.params.el);if(a=i[0],!a)return!1;a.swiper=n;var s=function(){return"."+(n.params.wrapperClass||"").trim().split(" ").join(".")},o=function(){if(a&&a.shadowRoot&&a.shadowRoot.querySelector){var p=He(a.shadowRoot.querySelector(s()));return p.children=function(f){return i.children(f)},p}return i.children(s())},l=o();if(l.length===0&&n.params.createElements){var u=nt(),c=u.createElement("div");l=He(c),c.className=n.params.wrapperClass,i.append(c),i.children("."+n.params.slideClass).each(function(d){l.append(d)})}return yr(n,{$el:i,el:a,$wrapperEl:l,wrapperEl:l[0],mounted:!0,rtl:a.dir.toLowerCase()==="rtl"||i.css("direction")==="rtl",rtlTranslate:n.params.direction==="horizontal"&&(a.dir.toLowerCase()==="rtl"||i.css("direction")==="rtl"),wrongRTL:l.css("display")==="-webkit-box"}),!0},t.init=function(a){var n=this;if(n.initialized)return n;var i=n.mount(a);return i===!1||(n.emit("beforeInit"),n.params.breakpoints&&n.setBreakpoint(),n.addClasses(),n.params.loop&&n.loopCreate(),n.updateSize(),n.updateSlides(),n.params.watchOverflow&&n.checkOverflow(),n.params.grabCursor&&n.enabled&&n.setGrabCursor(),n.params.preloadImages&&n.preloadImages(),n.params.loop?n.slideTo(n.params.initialSlide+n.loopedSlides,0,n.params.runCallbacksOnInit,!1,!0):n.slideTo(n.params.initialSlide,0,n.params.runCallbacksOnInit,!1,!0),n.attachEvents(),n.initialized=!0,n.emit("init"),n.emit("afterInit")),n},t.destroy=function(a,n){a===void 0&&(a=!0),n===void 0&&(n=!0);var i=this,s=i.params,o=i.$el,l=i.$wrapperEl,u=i.slides;return typeof i.params=="undefined"||i.destroyed||(i.emit("beforeDestroy"),i.initialized=!1,i.detachEvents(),s.loop&&i.loopDestroy(),n&&(i.removeClasses(),o.removeAttr("style"),l.removeAttr("style"),u&&u.length&&u.removeClass([s.slideVisibleClass,s.slideActiveClass,s.slideNextClass,s.slidePrevClass].join(" ")).removeAttr("style").removeAttr("data-swiper-slide-index")),i.emit("destroy"),Object.keys(i.eventsListeners).forEach(function(c){i.off(c)}),a!==!1&&(i.$el[0].swiper=null,n5(i)),i.destroyed=!0),null},e.extendDefaults=function(a){yr(Pw,a)},e.installModule=function(a){e.prototype.modules||(e.prototype.modules={});var n=a.name||Object.keys(e.prototype.modules).length+"_"+Gs();e.prototype.modules[n]=a},e.use=function(a){return Array.isArray(a)?(a.forEach(function(n){return e.installModule(n)}),e):(e.installModule(a),e)},TG(e,null,[{key:"extendedDefaults",get:function(){return Pw}},{key:"defaults",get:function(){return gN}}]),e}();Object.keys(Ow).forEach(function(e){Object.keys(Ow[e]).forEach(function(t){JE.prototype[t]=Ow[e][t]})});JE.use([h5,g5]);var bN=JE;function Xp(e){var t=this,r=T(e);if(r.length===0||r[0].swiper)return;var a,n={},i,s;r.hasClass("tabs-swipeable-wrap")&&(r.addClass("swiper-container").children(".tabs").addClass("swiper-wrapper").children(".tab").addClass("swiper-slide"),a=r.children(".tabs").children(".tab-active").index(),i=!0,s=r.find(".tabs-routable").length>0),r.attr("data-swiper")?n=JSON.parse(r.attr("data-swiper")):r[0].f7SwiperParams?n=r[0].f7SwiperParams:(n=r.dataset(),Object.keys(n).forEach(function(c){var d=n[c];if(typeof d=="string"&&d.indexOf("{")===0&&d.indexOf("}")>0)try{n[c]=JSON.parse(d)}catch{}})),typeof n.initialSlide=="undefined"&&typeof a!="undefined"&&(n.initialSlide=a);var o=t.swiper.create(r[0],n);function l(){o.update()}var u=r.parents(".tab").filter(function(c){return T(c).parent(".tabs").parent(".tabs-animated-wrap, .tabs-swipeable-wrap").length===0}).eq(0);r.parents(".popup, .login-screen, .sheet-modal, .popover").on("modal:open",l),r.parents(".panel").on("panel:open",l),u&&u.length&&u.on("tab:show",l),o.on("beforeDestroy",function(){r.parents(".popup, .login-screen, .sheet-modal, .popover").off("modal:open",l),r.parents(".panel").off("panel:open",l),u&&u.length&&u.off("tab:show",l)}),i&&o.on("slideChange",function(){if(s){var c=t.views.get(r.parents(".view"));c||(c=t.views.main);var d=c.router,p=d.findTabRouteUrl(o.slides.eq(o.activeIndex)[0]);p&&setTimeout(function(){d.navigate(p)},0)}else t.tab.show({tabEl:o.slides.eq(o.activeIndex)})})}var NG={name:"swiper",static:{Swiper:bN},create:function(){var t=this;t.swiper=Ir({defaultSelector:".swiper-container",constructor:bN,domProp:"swiper"})},on:{pageBeforeRemove:function(t){var r=this;t.$el.find(".swiper-init, .tabs-swipeable-wrap").each(function(a){r.swiper.destroy(a)})},pageMounted:function(t){var r=this;t.$el.find(".tabs-swipeable-wrap").each(function(a){Xp.call(r,a)})},pageInit:function(t){var r=this;t.$el.find(".swiper-init, .tabs-swipeable-wrap").each(function(a){Xp.call(r,a)})},pageReinit:function(t){var r=this;t.$el.find(".swiper-init, .tabs-swipeable-wrap").each(function(a){var n=r.swiper.get(a);n&&n.update&&n.update()})},tabMounted:function(t){var r=this;T(t).find(".swiper-init, .tabs-swipeable-wrap").each(function(a){Xp.call(r,a)})},tabShow:function(t){var r=this;T(t).find(".swiper-init, .tabs-swipeable-wrap").each(function(a){var n=r.swiper.get(a);n&&n.update&&n.update()})},tabBeforeRemove:function(t){var r=this;T(t).find(".swiper-init, .tabs-swipeable-wrap").each(function(a){r.swiper.destroy(a)})}},vnode:{"swiper-init":{insert:function(t){var r=this,a=t.elm;Xp.call(r,a)},destroy:function(t){var r=this,a=t.elm;r.swiper.destroy(a)}},"tabs-swipeable-wrap":{insert:function(t){var r=this,a=t.elm;Xp.call(r,a)},destroy:function(t){var r=this,a=t.elm;r.swiper.destroy(a)}}}};function yN(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function AG(e,t,r){return t&&yN(e.prototype,t),r&&yN(e,r),e}function _G(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function MG(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,I1(e,t)}function I1(e,t){return I1=Object.setPrototypeOf||function(a,n){return a.__proto__=n,a},I1(e,t)}var RG=function(e){MG(t,e);function t(a,n){var i;n===void 0&&(n={}),i=e.call(this,n,[a])||this;var s=_G(i);s.app=a;var o=se({on:{}},a.params.photoBrowser);return s.useModulesParams(o),s.params=se(o,n),se(s,{exposed:!1,opened:!1,activeIndex:s.params.swiper.initialSlide,url:s.params.url,swipeToClose:{allow:!0,isTouched:!1,diff:void 0,start:void 0,current:void 0,started:!1,activeSlide:void 0,timeStart:void 0}}),s.useModules(),s.init(),i}var r=t.prototype;return r.onSlideChange=function(n){var i=this;i.activeIndex=n.activeIndex;var s=n.activeIndex+1,o=i.params.virtualSlides?i.params.photos.length:n.slides.length;n.params.loop&&(o-=2,s-=n.loopedSlides,s<1&&(s=o+s),s>o&&(s-=o));var l=i.params.virtualSlides?n.$wrapperEl.find('.swiper-slide[data-swiper-slide-index="'+n.activeIndex+'"]'):n.slides.eq(n.activeIndex),u=i.params.virtualSlides?n.$wrapperEl.find('.swiper-slide[data-swiper-slide-index="'+n.previousIndex+'"]'):n.slides.eq(n.previousIndex),c=i.$el.find(".photo-browser-current"),d=i.$el.find(".photo-browser-total"),p;if(i.params.type==="page"&&i.params.navbar&&c.length===0&&i.app.theme==="ios"&&(p=i.app.navbar.getElByPage(i.$el),p&&(c=T(p).find(".photo-browser-current"),d=T(p).find(".photo-browser-total"))),c.length&&d.length&&(c.text(s),d.text(o),p||(p=c.parents(".navbar")[0]),p&&i.app.navbar.size(p)),i.captions.length>0){var f=n.params.loop?l.attr("data-swiper-slide-index"):i.activeIndex;i.$captionsContainerEl.find(".photo-browser-caption-active").removeClass("photo-browser-caption-active"),i.$captionsContainerEl.find('[data-caption-index="'+f+'"]').addClass("photo-browser-caption-active")}var h=u.find("video");h.length>0&&"pause"in h[0]&&h[0].pause()},r.onTouchStart=function(){var n=this,i=n.swipeToClose;!i.allow||(i.isTouched=!0)},r.onTouchMove=function(n){var i=this,s=i.swipeToClose;!s.isTouched||(s.started||(s.started=!0,s.start=n.type==="touchmove"?n.targetTouches[0].pageY:n.pageY,i.params.virtualSlides?s.activeSlide=i.swiper.$wrapperEl.children(".swiper-slide-active"):s.activeSlide=i.swiper.slides.eq(i.swiper.activeIndex),s.timeStart=sa()),n.preventDefault(),s.current=n.type==="touchmove"?n.targetTouches[0].pageY:n.pageY,s.diff=s.start-s.current,i.$el.transition(0).transform("translate3d(0,"+-s.diff+"px,0)"))},r.onTouchEnd=function(){var n=this,i=n.swipeToClose;if(i.isTouched=!1,!i.started){i.started=!1;return}i.started=!1,i.allow=!1;var s=Math.abs(i.diff),o=new Date().getTime()-i.timeStart;if(o<300&&s>20||o>=300&&s>100){qr(function(){n.$el&&(i.diff<0?n.$el.addClass("swipe-close-to-bottom"):n.$el.addClass("swipe-close-to-top")),n.emit("local::swipeToClose",n),n.$el.transform("").transition(""),n.close(),i.allow=!0});return}s!==0?n.$el.addClass("photo-browser-transitioning").transitionEnd(function(){i.allow=!0,n.$el.removeClass("photo-browser-transitioning")}):i.allow=!0,qr(function(){n.$el.transform("").transition("")})},r.renderNavbar=function(){var n=this;if(n.params.renderNavbar)return n.params.renderNavbar.call(n);var i=n.params.iconsColor;!n.params.iconsColor&&n.params.theme==="dark"&&(i="white");var s=(n.app.theme==="ios"||n.app.theme==="aurora")&&n.params.pageBackLinkText?n.params.pageBackLinkText:"",o=typeof n.params.navbarShowCount=="undefined"?n.params.photos.length>1:n.params.navbarShowCount,l=n.params.type!=="page";return F("div",{class:"navbar navbar-photo-browser "+(n.params.theme==="dark"?"navbar-photo-browser-dark":"")},F("div",{class:"navbar-bg"}),F("div",{class:"navbar-inner navbar-inner-centered-title sliding"},!l&&F("div",{class:"left"},F("a",{class:"link "+(s?"":"icon-only")+" back"},F("i",{class:"icon icon-back "+(i?"color-"+i:"")}),s&&F("span",null,s))),o&&F("div",{class:"title"},F("span",{class:"photo-browser-current"}),F("span",{class:"photo-browser-of"},n.params.navbarOfText),F("span",{class:"photo-browser-total"})),l&&F("div",{class:"right"},F("a",{class:"link popup-close","data-popup":".photo-browser-popup"},F("span",null,n.params.popupCloseLinkText)))))},r.renderToolbar=function(){var n=this;if(n.params.renderToolbar)return n.params.renderToolbar.call(n);var i=n.params.iconsColor;return!n.params.iconsColor&&n.params.theme==="dark"&&(i="white"),F("div",{class:"toolbar toolbar-bottom tabbar"},F("div",{class:"toolbar-inner"},F("a",{class:"link photo-browser-prev"},F("i",{class:"icon icon-back "+(i?"color-"+i:"")})),F("a",{class:"link photo-browser-next"},F("i",{class:"icon icon-forward "+(i?"color-"+i:"")}))))},r.renderCaption=function(n,i){var s=this;return s.params.renderCaption?s.params.renderCaption.call(s,n,i):F("div",{class:"photo-browser-caption","data-caption-index":i},n)},r.renderObject=function(n,i){var s=this;return s.params.renderObject?s.params.renderObject.call(s,n,i):F("div",{class:"photo-browser-slide photo-browser-object-slide swiper-slide","data-swiper-slide-index":i},n.html?n.html:n)},r.renderLazyPhoto=function(n,i){var s=this;return s.params.renderLazyPhoto?s.params.renderLazyPhoto.call(s,n,i):F("div",{class:"photo-browser-slide photo-browser-slide-lazy swiper-slide","data-swiper-slide-index":i},F("div",{class:"swiper-lazy-preloader"}),F("span",{class:"swiper-zoom-container"},F("img",{"data-src":n.url?n.url:n,class:"swiper-lazy"})))},r.renderPhoto=function(n,i){var s=this;return s.params.renderPhoto?s.params.renderPhoto.call(s,n,i):F("div",{class:"photo-browser-slide swiper-slide","data-swiper-slide-index":i},F("span",{class:"swiper-zoom-container"},F("img",{src:n.url?n.url:n})))},r.render=function(){var n=this;return n.params.render?n.params.render.call(n,n.params):F("div",{class:"photo-browser photo-browser-"+n.params.theme},F("div",{class:"view"},F("div",{class:"page photo-browser-page photo-browser-page-"+n.params.theme+" no-toolbar "+(n.params.navbar?"":"no-navbar"),"data-name":"photo-browser-page"},n.params.navbar&&n.renderNavbar(),n.params.toolbar&&n.renderToolbar(),F("div",{class:"photo-browser-captions photo-browser-captions-"+(n.params.captionsTheme||n.params.theme)},n.params.photos.map(function(i,s){return i.caption?n.renderCaption(i.caption,s):""})),F("div",{class:"photo-browser-swiper-container swiper-container"},F("div",{class:"photo-browser-swiper-wrapper swiper-wrapper"},!n.params.virtualSlides&&n.params.photos.map(function(i,s){return i.html||(typeof i=="string"||i instanceof String)&&i.indexOf("<")>=0&&i.indexOf(">")>=0?n.renderObject(i,s):n.params.swiper.lazy===!0||n.params.swiper.lazy&&n.params.swiper.lazy.enabled?n.renderLazyPhoto(i,s):n.renderPhoto(i,s)}))))))},r.renderStandalone=function(){var n=this;if(n.params.renderStandalone)return n.params.renderStandalone.call(n);var i='<div class="popup photo-browser-popup photo-browser-standalone popup-tablet-fullscreen">'+n.render()+"</div>";return i},r.renderPage=function(){var n=this;if(n.params.renderPage)return n.params.renderPage.call(n);var i=n.render();return i},r.renderPopup=function(){var n=this;if(n.params.renderPopup)return n.params.renderPopup.call(n);var i='<div class="popup photo-browser-popup">'+n.render()+"</div>";return i},r.onOpen=function(n,i){var s=this,o=s.app,l=T(i);l[0].f7PhotoBrowser=s,s.$el=l,s.el=l[0],s.openedIn=n,s.opened=!0,s.$swiperContainerEl=s.$el.find(".photo-browser-swiper-container"),s.$swiperWrapperEl=s.$el.find(".photo-browser-swiper-wrapper"),s.slides=s.$el.find(".photo-browser-slide"),s.$captionsContainerEl=s.$el.find(".photo-browser-captions"),s.captions=s.$el.find(".photo-browser-caption");var u,c=se({},s.params.swiper,{initialSlide:s.activeIndex,on:{click:function(f){clearTimeout(u),s.params.exposition&&(u=setTimeout(function(){s.expositionToggle()},350)),s.emit("local::tap",f),s.emit("local::click",f)},doubleClick:function(f){clearTimeout(u),s.emit("local::doubleTap",f),s.emit("local::doubleClick",f)},slideChange:function(){var f=this;s.onSlideChange(f);for(var h=arguments.length,m=new Array(h),g=0;g<h;g++)m[g]=arguments[g];s.emit.apply(s,["local::slideChange"].concat(m))},transitionStart:function(){for(var f=arguments.length,h=new Array(f),m=0;m<f;m++)h[m]=arguments[m];s.emit.apply(s,["local::transitionStart"].concat(h))},transitionEnd:function(){for(var f=arguments.length,h=new Array(f),m=0;m<f;m++)h[m]=arguments[m];s.emit.apply(s,["local::transitionEnd"].concat(h))},slideChangeTransitionStart:function(){var f=this;s.onSlideChange(f);for(var h=arguments.length,m=new Array(h),g=0;g<h;g++)m[g]=arguments[g];s.emit.apply(s,["local::slideChangeTransitionStart"].concat(m))},slideChangeTransitionEnd:function(){for(var f=arguments.length,h=new Array(f),m=0;m<f;m++)h[m]=arguments[m];s.emit.apply(s,["local::slideChangeTransitionEnd"].concat(h))},lazyImageLoad:function(){for(var f=arguments.length,h=new Array(f),m=0;m<f;m++)h[m]=arguments[m];s.emit.apply(s,["local::lazyImageLoad"].concat(h))},lazyImageReady:function(){for(var f=arguments.length,h=new Array(f),m=0;m<f;m++)h[m]=arguments[m];var g=h[0];T(g).removeClass("photo-browser-slide-lazy"),s.emit.apply(s,["local::lazyImageReady"].concat(h))}}});s.params.swipeToClose&&s.params.type!=="page"&&se(c.on,{touchStart:function(f,h){s.onTouchStart(h),s.emit("local::touchStart",h)},touchMoveOpposite:function(f,h){s.onTouchMove(h),s.emit("local::touchMoveOpposite",h)},touchEnd:function(f,h){s.onTouchEnd(h),s.emit("local::touchEnd",h)}}),s.params.virtualSlides&&se(c,{virtual:{slides:s.params.photos,renderSlide:function(f,h){return f.html||(typeof f=="string"||f instanceof String)&&f.indexOf("<")>=0&&f.indexOf(">")>=0?s.renderObject(f,h):s.params.swiper.lazy===!0||s.params.swiper.lazy&&s.params.swiper.lazy.enabled?s.renderLazyPhoto(f,h):s.renderPhoto(f,h)}}});var d=De();s.swiper=o.swiper?o.swiper.create(s.$swiperContainerEl,c):new d.Swiper(s.$swiperContainerEl,c),s.activeIndex===0&&s.onSlideChange(s.swiper),s.$el&&s.$el.trigger("photobrowser:open"),s.emit("local::open photoBrowserOpen",s)},r.onOpened=function(){var n=this;n.$el&&n.params.type==="standalone"&&n.$el.css("animation","none"),n.$el&&n.$el.trigger("photobrowser:opened"),n.emit("local::opened photoBrowserOpened",n)},r.onClose=function(){var n=this;n.destroyed||(n.swiper&&n.swiper.destroy&&(n.swiper.destroy(!0,!1),n.swiper=null,delete n.swiper),n.$el&&n.$el.trigger("photobrowser:close"),n.emit("local::close photoBrowserClose",n))},r.onClosed=function(){var n=this;n.destroyed||(n.opened=!1,n.$el=null,n.el=null,delete n.$el,delete n.el,n.$el&&n.$el.trigger("photobrowser:closed"),n.emit("local::closed photoBrowserClosed",n))},r.openPage=function(){var n=this;if(n.opened)return n;var i=n.renderPage();return n.view.router.navigate({url:n.url,route:{content:i,path:n.url,on:{pageBeforeIn:function(o,l){n.view.$el.addClass("with-photo-browser-page with-photo-browser-page-"+n.params.theme),n.onOpen("page",l.el)},pageAfterIn:function(o,l){n.onOpened("page",l.el)},pageBeforeOut:function(o,l){n.view.$el.removeClass("with-photo-browser-page with-photo-browser-page-exposed with-photo-browser-page-"+n.params.theme),n.onClose("page",l.el)},pageAfterOut:function(o,l){n.onClosed("page",l.el)}}}}),n},r.openStandalone=function(){var n=this;if(n.opened)return n;var i=n.renderStandalone(),s={backdrop:!1,content:i,on:{popupOpen:function(l){n.onOpen("popup",l.el)},popupOpened:function(l){n.onOpened("popup",l.el)},popupClose:function(l){n.onClose("popup",l.el)},popupClosed:function(l){n.onClosed("popup",l.el)}}};return n.params.routableModals&&n.view?n.view.router.navigate({url:n.url,route:{path:n.url,popup:s}}):n.modal=n.app.popup.create(s).open(),n},r.openPopup=function(){var n=this;if(n.opened)return n;var i=n.renderPopup(),s={content:i,push:n.params.popupPush,on:{popupOpen:function(l){n.onOpen("popup",l.el)},popupOpened:function(l){n.onOpened("popup",l.el)},popupClose:function(l){n.onClose("popup",l.el)},popupClosed:function(l){n.onClosed("popup",l.el)}}};return n.params.routableModals&&n.view?n.view.router.navigate({url:n.url,route:{path:n.url,popup:s}}):n.modal=n.app.popup.create(s).open(),n},r.expositionEnable=function(){var n=this;return n.params.type==="page"&&n.view.$el.addClass("with-photo-browser-page-exposed"),n.$el&&n.$el.addClass("photo-browser-exposed"),n.params.expositionHideCaptions&&n.$captionsContainerEl.addClass("photo-browser-captions-exposed"),n.exposed=!0,n},r.expositionDisable=function(){var n=this;return n.params.type==="page"&&n.view.$el.removeClass("with-photo-browser-page-exposed"),n.$el&&n.$el.removeClass("photo-browser-exposed"),n.params.expositionHideCaptions&&n.$captionsContainerEl.removeClass("photo-browser-captions-exposed"),n.exposed=!1,n},r.expositionToggle=function(){var n=this;return n.params.type==="page"&&n.view.$el.toggleClass("with-photo-browser-page-exposed"),n.$el&&n.$el.toggleClass("photo-browser-exposed"),n.params.expositionHideCaptions&&n.$captionsContainerEl.toggleClass("photo-browser-captions-exposed"),n.exposed=!n.exposed,n},r.open=function(n){var i=this,s=i.params.type;return i.opened?(i.swiper&&typeof n!="undefined"&&i.swiper.slideTo(parseInt(n,10)),i):(typeof n!="undefined"&&(i.activeIndex=n),s==="standalone"&&i.openStandalone(),s==="page"&&i.openPage(),s==="popup"&&i.openPopup(),i)},r.close=function(){var n=this;return n.opened&&(n.params.routableModals&&n.view||n.openedIn==="page"?n.view.router.back():(n.modal.once("modalClosed",function(){qr(function(){n.destroyed||(n.modal.destroy(),delete n.modal)})}),n.modal.close())),n},r.init=function(){},r.destroy=function(){var n=this;n.emit("local::beforeDestroy photoBrowserBeforeDestroy",n),n.$el&&(n.$el.trigger("photobrowser:beforedestroy"),n.$el[0].f7PhotoBrowser=null,delete n.$el[0].f7PhotoBrowser),$r(n),n.destroyed=!0,n=null},AG(t,[{key:"view",get:function(){var n=this.params,i=this.app;return n.view||i.views.main}}]),t}(rr),wN=RG,OG={name:"photoBrowser",params:{photoBrowser:{photos:[],exposition:!0,expositionHideCaptions:!1,type:"standalone",navbar:!0,toolbar:!0,theme:"light",captionsTheme:void 0,iconsColor:void 0,popupPush:!1,swipeToClose:!0,pageBackLinkText:"Back",popupCloseLinkText:"Close",navbarOfText:"of",navbarShowCount:void 0,view:void 0,url:"photos/",routableModals:!1,virtualSlides:!0,renderNavbar:void 0,renderToolbar:void 0,renderCaption:void 0,renderObject:void 0,renderLazyPhoto:void 0,renderPhoto:void 0,renderPage:void 0,renderPopup:void 0,renderStandalone:void 0,swiper:{initialSlide:0,spaceBetween:20,speed:300,loop:!1,preloadImages:!0,navigation:{nextEl:".photo-browser-next",prevEl:".photo-browser-prev"},zoom:{enabled:!0,maxRatio:3,minRatio:1},lazy:{enabled:!0}}}},create:function(){var t=this;t.photoBrowser=Ir({defaultSelector:".photo-browser-popup, .photo-browser-page",constructor:wN,app:t,domProp:"f7PhotoBrowser"})},static:{PhotoBrowser:wN}};function bg(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function PG(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,T1(e,t)}function T1(e,t){return T1=Object.setPrototypeOf||function(a,n){return a.__proto__=n,a},T1(e,t)}var DG=function(e){PG(t,e);function t(a,n){var i,s=se({on:{}},a.params.notification,n);i=e.call(this,a,s)||this;var o=bg(i);o.app=a,o.params=s;var l=o.params,u=l.icon,c=l.title,d=l.titleRightText,p=l.subtitle,f=l.text,h=l.closeButton,m=l.closeTimeout,g=l.cssClass,v=l.closeOnClick,b;if(o.params.el)b=T(o.params.el);else{var y=o.render({icon:u,title:c,titleRightText:d,subtitle:p,text:f,closeButton:h,cssClass:g});b=T(y)}if(b&&b.length>0&&b[0].f7Modal)return b[0].f7Modal||bg(i);if(b.length===0)return o.destroy()||bg(i);se(o,{$el:b,el:b[0],type:"notification"}),b[0].f7Modal=o,h&&b.find(".notification-close-button").on("click",function(){o.close()}),b.on("click",function(U){h&&T(U.target).closest(".notification-close-button").length||(o.emit("local::click notificationClick",o),v&&o.close())}),o.on("beforeDestroy",function(){b.off("click")});var w,x,k,C,E,$,N={};function I(U){w||(w=!0,x=!1,k=void 0,E=sa(),N.x=U.type==="touchstart"?U.targetTouches[0].pageX:U.pageX,N.y=U.type==="touchstart"?U.targetTouches[0].pageY:U.pageY)}function S(U){if(!!w){var j=U.type==="touchmove"?U.targetTouches[0].pageX:U.pageX,G=U.type==="touchmove"?U.targetTouches[0].pageY:U.pageY;if(typeof k=="undefined"&&(k=!!(k||Math.abs(G-N.y)<Math.abs(j-N.x))),k){w=!1;return}U.preventDefault(),x||(o.$el.removeClass("notification-transitioning"),o.$el.transition(0),$=o.$el[0].offsetHeight/2),x=!0,C=G-N.y;var L=C;C>0&&(L=Math.pow(C,.8)),o.$el.transform("translate3d(0, "+L+"px, 0)")}}function A(){if(!w||!x){w=!1,x=!1;return}if(w=!1,x=!1,C!==0){var U=sa()-E;o.$el.transition(""),o.$el.addClass("notification-transitioning"),o.$el.transform(""),(C<-10&&U<300||-C>=$/1)&&o.close()}}function R(){o.$el.on(a.touchEvents.start,I,{passive:!0}),a.on("touchmove:active",S),a.on("touchend:passive",A)}function O(){o.$el.off(a.touchEvents.start,I,{passive:!0}),a.off("touchmove:active",S),a.off("touchend:passive",A)}var D;function z(){D=qr(function(){if(w&&x){z();return}o.close()},m)}return o.on("open",function(){o.params.swipeToClose&&R(),T(".notification.modal-in").each(function(U){var j=a.notification.get(U);U!==o.el&&j&&j.close()}),m&&z()}),o.on("close beforeDestroy",function(){o.params.swipeToClose&&O(),clearTimeout(D)}),o||bg(i)}var r=t.prototype;return r.render=function(){var n=this;if(n.params.render)return n.params.render.call(n,n);var i=n.params,s=i.icon,o=i.title,l=i.titleRightText,u=i.subtitle,c=i.text,d=i.closeButton,p=i.cssClass;return F("div",{class:"notification "+(p||"")},F("div",{class:"notification-header"},s&&F("div",{class:"notification-icon"},s),o&&F("div",{class:"notification-title"},o),l&&F("div",{class:"notification-title-right-text"},l),d&&F("span",{class:"notification-close-button"})),F("div",{class:"notification-content"},u&&F("div",{class:"notification-subtitle"},u),c&&F("div",{class:"notification-text"},c)))},t}(_i),xN=DG,FG={name:"notification",static:{Notification:xN},create:function(){var t=this;t.notification=se({},cs({app:t,constructor:xN,defaultSelector:".notification.modal-in"}))},params:{notification:{icon:null,title:null,titleRightText:null,subtitle:null,text:null,closeButton:!1,closeTimeout:null,closeOnClick:!1,swipeToClose:!0,cssClass:null,render:null,containerEl:null}}};function kN(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function LG(e,t,r){return t&&kN(e.prototype,t),r&&kN(e,r),e}function EN(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zG(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,N1(e,t)}function N1(e,t){return N1=Object.setPrototypeOf||function(a,n){return a.__proto__=n,a},N1(e,t)}var BG=function(e){zG(t,e);function t(a,n){var i;n===void 0&&(n={}),i=e.call(this,n,[a])||this;var s=EN(i);s.app=a;var o=Ct(),l=se({on:{}},a.params.autocomplete);typeof l.searchbarDisableButton=="undefined"&&(l.searchbarDisableButton=a.theme!=="aurora"),s.useModulesParams(l),s.params=se(l,n);var u;s.params.openerEl&&(u=T(s.params.openerEl),u.length&&(u[0].f7Autocomplete=s));var c;s.params.inputEl&&(c=T(s.params.inputEl),c.length&&(c[0].f7Autocomplete=s));var d=Db(),p=n.url;!p&&u&&u.length&&(u.attr("href")?p=u.attr("href"):u.find("a").length>0&&(p=u.find("a").attr("href"))),(!p||p==="#"||p==="")&&(p=s.params.url);var f=s.params.multiple?"checkbox":"radio";se(s,{$openerEl:u,openerEl:u&&u[0],$inputEl:c,inputEl:c&&c[0],id:d,url:p,value:s.params.value||[],inputType:f,inputName:f+"-"+d,$modalEl:void 0,$dropdownEl:void 0});var h="";function m(){var E=s.$inputEl.val().trim();!s.params.source||s.params.source.call(s,E,function($){var N="",I=s.params.limit?Math.min(s.params.limit,$.length):$.length;s.items=$;var S;s.params.highlightMatches&&(E=E.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),S=new RegExp("("+E+")","i"));for(var A,R,O=0;O<I;O+=1){var D=typeof $[O]=="object"?$[O][s.params.valueProperty]:$[O],z=typeof $[O]=="object"?$[O][s.params.textProperty]:$[O];O===0&&(A=D,R=s.items[O]),N+=s.renderItem({value:D,text:s.params.highlightMatches?z.replace(S,"<b>$1</b>"):z},O)}if(N===""&&E===""&&s.params.dropdownPlaceholderText&&(N+=s.renderItem({placeholder:!0,text:s.params.dropdownPlaceholderText})),s.$dropdownEl.find("ul").html(N),s.params.typeahead){if(!A||!R||A.toLowerCase().indexOf(E.toLowerCase())!==0)return;if(h.toLowerCase()===E.toLowerCase()){s.value=[];return}if(h.toLowerCase().indexOf(E.toLowerCase())===0){h=E,s.value=[];return}c.val(A),c[0].setSelectionRange(E.length,A.length);var U=typeof s.value[0]=="object"?s.value[0][s.params.valueProperty]:s.value[0];(!U||A.toLowerCase()!==U.toLowerCase())&&(s.value=[R],s.emit("local::change autocompleteChange",[R]))}h=E})}function g(){var E=this,$=E.value,N=T(E).parents(".autocomplete-values").length>0,I,S,A;if(N){if(s.inputType==="checkbox"&&!E.checked){for(var R=0;R<s.value.length;R+=1)A=typeof s.value[R]=="string"?s.value[R]:s.value[R][s.params.valueProperty],(A===$||A*1===$*1)&&s.value.splice(R,1);s.updateValues(),s.emit("local::change autocompleteChange",s.value)}return}for(var O=0;O<s.items.length;O+=1)S=typeof s.items[O]=="object"?s.items[O][s.params.valueProperty]:s.items[O],(S===$||S*1===$*1)&&(I=s.items[O]);if(s.inputType==="radio")s.value=[I];else if(E.checked)s.value.push(I);else for(var D=0;D<s.value.length;D+=1)A=typeof s.value[D]=="object"?s.value[D][s.params.valueProperty]:s.value[D],(A===$||A*1===$*1)&&s.value.splice(D,1);s.updateValues(),(s.inputType==="radio"&&E.checked||s.inputType==="checkbox")&&s.emit("local::change autocompleteChange",s.value)}function v(E){var $=T(E.target);$.is(s.$inputEl[0])||s.$dropdownEl&&$.closest(s.$dropdownEl[0]).length||s.close()}function b(){s.open()}function y(){s.open()}function w(){s.$dropdownEl.find("label.active-state").length>0||setTimeout(function(){s.close()},0)}function x(){s.positionDropdown()}function k(E){if(!!s.opened){if(E.keyCode===27){E.preventDefault(),s.$inputEl.blur();return}if(E.keyCode===13){var $=s.$dropdownEl.find(".autocomplete-dropdown-selected label");if($.length){E.preventDefault(),$.trigger("click"),s.$inputEl.blur();return}s.params.typeahead&&(E.preventDefault(),s.$inputEl.blur());return}if(!(E.keyCode!==40&&E.keyCode!==38)){E.preventDefault();var N=s.$dropdownEl.find(".autocomplete-dropdown-selected"),I;N.length?(I=N[E.keyCode===40?"next":"prev"]("li"),I.length||(I=s.$dropdownEl.find("li").eq(E.keyCode===40?0:s.$dropdownEl.find("li").length-1))):I=s.$dropdownEl.find("li").eq(E.keyCode===40?0:s.$dropdownEl.find("li").length-1),!I.hasClass("autocomplete-dropdown-placeholder")&&(N.removeClass("autocomplete-dropdown-selected"),I.addClass("autocomplete-dropdown-selected"))}}}function C(){for(var E=T(this),$,N=0;N<s.items.length;N+=1){var I=typeof s.items[N]=="object"?s.items[N][s.params.valueProperty]:s.items[N],S=E.attr("data-value");(I===S||I*1===S*1)&&($=s.items[N])}s.params.updateInputValueOnSelect&&(s.$inputEl.val(typeof $=="object"?$[s.params.valueProperty]:$),s.$inputEl.trigger("input change")),s.value=[$],s.emit("local::change autocompleteChange",[$]),s.close()}return s.attachEvents=function(){s.params.openIn!=="dropdown"&&s.$openerEl&&s.$openerEl.on("click",b),s.params.openIn==="dropdown"&&s.$inputEl&&(s.$inputEl.on("focus",y),s.$inputEl.on(s.params.inputEvents,m),o.android?T("html").on("click",v):s.$inputEl.on("blur",w),s.$inputEl.on("keydown",k))},s.detachEvents=function(){s.params.openIn!=="dropdown"&&s.$openerEl&&s.$openerEl.off("click",b),s.params.openIn==="dropdown"&&s.$inputEl&&(s.$inputEl.off("focus",y),s.$inputEl.off(s.params.inputEvents,m),o.android?T("html").off("click",v):s.$inputEl.off("blur",w),s.$inputEl.off("keydown",k))},s.attachDropdownEvents=function(){s.$dropdownEl.on("click","label",C),a.on("resize",x)},s.detachDropdownEvents=function(){s.$dropdownEl.off("click","label",C),a.off("resize",x)},s.attachPageEvents=function(){s.$el.on("change",'input[type="radio"], input[type="checkbox"]',g),s.params.closeOnSelect&&!s.params.multiple&&s.$el.once("click",".list label",function(){qr(function(){s.close()})})},s.detachPageEvents=function(){s.$el.off("change",'input[type="radio"], input[type="checkbox"]',g)},s.useModules(),s.init(),s||EN(i)}var r=t.prototype;return r.positionDropdown=function(){var n,i=this,s=i.$inputEl,o=i.app,l=i.$dropdownEl,u=s.parents(".page-content");if(u.length!==0){var c=s.offset(),d=s[0].offsetWidth,p=s[0].offsetHeight,f=s.parents(".list"),h;f.parents().each(function(C){if(!h){var E=T(C);E.parent(u).length&&(h=E)}});var m=f.offset(),g=parseInt(u.css("padding-bottom"),10),v=f.length>0?m.left-u.offset().left:0,b=c.left-(f.length>0?m.left:0)-(o.rtl,0),y=c.top-(u.offset().top-u[0].scrollTop),w=u[0].scrollHeight-g-(y+u[0].scrollTop)-s[0].offsetHeight,x=o.rtl?"padding-right":"padding-left",k;f.length&&!i.params.expandInput&&(k=(o.rtl?f[0].offsetWidth-b-d:b)-(o.theme==="md"?16:15)),l.css({left:(f.length>0?v:b)+"px",top:y+u[0].scrollTop+p+"px",width:(f.length>0?f[0].offsetWidth:d)+"px"}),l.children(".autocomplete-dropdown-inner").css((n={maxHeight:w+"px"},n[x]=f.length>0&&!i.params.expandInput?k+"px":"",n))}},r.focus=function(){var n=this;n.$el.find("input[type=search]").focus()},r.source=function(n){var i=this;if(!!i.params.source){var s=i.$el;i.params.source.call(i,n,function(o){var l="",u=i.params.limit?Math.min(i.params.limit,o.length):o.length;i.items=o;for(var c=0;c<u;c+=1){for(var d=!1,p=typeof o[c]=="object"?o[c][i.params.valueProperty]:o[c],f=0;f<i.value.length;f+=1){var h=typeof i.value[f]=="object"?i.value[f][i.params.valueProperty]:i.value[f];(h===p||h*1===p*1)&&(d=!0)}l+=i.renderItem({value:p,text:typeof o[c]=="object"?o[c][i.params.textProperty]:o[c],inputType:i.inputType,id:i.id,inputName:i.inputName,selected:d},c)}s.find(".autocomplete-found ul").html(l),o.length===0?n.length!==0?(s.find(".autocomplete-not-found").show(),s.find(".autocomplete-found, .autocomplete-values").hide()):(s.find(".autocomplete-values").show(),s.find(".autocomplete-found, .autocomplete-not-found").hide()):(s.find(".autocomplete-found").show(),s.find(".autocomplete-not-found, .autocomplete-values").hide())})}},r.updateValues=function(){for(var n=this,i="",s=0;s<n.value.length;s+=1)i+=n.renderItem({value:typeof n.value[s]=="object"?n.value[s][n.params.valueProperty]:n.value[s],text:typeof n.value[s]=="object"?n.value[s][n.params.textProperty]:n.value[s],inputType:n.inputType,id:n.id,inputName:n.inputName+"-checked}",selected:!0},s);n.$el.find(".autocomplete-values ul").html(i)},r.preloaderHide=function(){var n=this;n.params.openIn==="dropdown"&&n.$dropdownEl?n.$dropdownEl.find(".autocomplete-preloader").removeClass("autocomplete-preloader-visible"):T(".autocomplete-preloader").removeClass("autocomplete-preloader-visible")},r.preloaderShow=function(){var n=this;n.params.openIn==="dropdown"&&n.$dropdownEl?n.$dropdownEl.find(".autocomplete-preloader").addClass("autocomplete-preloader-visible"):T(".autocomplete-preloader").addClass("autocomplete-preloader-visible")},r.renderPreloader=function(){var n=this,i={iosPreloaderContent:Jo,mdPreloaderContent:Qo,auroraPreloaderContent:el};return F("div",{class:"autocomplete-preloader preloader "+(n.params.preloaderColor?"color-"+n.params.preloaderColor:"")},i[n.app.theme+"PreloaderContent"]||"")},r.renderSearchbar=function(){var n=this;return n.params.renderSearchbar?n.params.renderSearchbar.call(n):F("form",{class:"searchbar"},F("div",{class:"searchbar-inner"},F("div",{class:"searchbar-input-wrap"},F("input",{type:"search",spellcheck:n.params.searchbarSpellcheck||"false",placeholder:n.params.searchbarPlaceholder}),F("i",{class:"searchbar-icon"}),F("span",{class:"input-clear-button"})),n.params.searchbarDisableButton&&F("span",{class:"searchbar-disable-button"},n.params.searchbarDisableText)))},r.renderItem=function(n,i){var s=this;if(s.params.renderItem)return s.params.renderItem.call(s,n,i);var o=n.value&&typeof n.value=="string"?n.value.replace(/"/g,"&quot;"):n.value;return s.params.openIn!=="dropdown"?F("li",null,F("label",{class:"item-"+n.inputType+" item-content"},F("input",{type:n.inputType,name:n.inputName,value:o,_checked:n.selected}),F("i",{class:"icon icon-"+n.inputType}),F("div",{class:"item-inner"},F("div",{class:"item-title"},n.text)))):n.placeholder?F("li",{class:"autocomplete-dropdown-placeholder"},F("label",{class:"item-content"},F("div",{class:"item-inner"},F("div",{class:"item-title"},n.text)))):F("li",null,F("label",{class:"item-radio item-content","data-value":o},F("div",{class:"item-inner"},F("div",{class:"item-title"},n.text))))},r.renderNavbar=function(){var n=this;if(n.params.renderNavbar)return n.params.renderNavbar.call(n);var i=n.params.pageTitle;typeof i=="undefined"&&n.$openerEl&&n.$openerEl.length&&(i=n.$openerEl.find(".item-title").text().trim());var s=n.params.openIn==="popup",o=s?n.params.preloader&&F("div",{class:"left"},n.renderPreloader()):F("div",{class:"left sliding"},F("a",{class:"link back"},F("i",{class:"icon icon-back"}),F("span",{class:"if-not-md"},n.params.pageBackLinkText))),l=s?F("div",{class:"right"},F("a",{class:"link popup-close","data-popup":".autocomplete-popup"},n.params.popupCloseLinkText)):n.params.preloader&&F("div",{class:"right"},n.renderPreloader());return F("div",{class:"navbar "+(n.params.navbarColorTheme?"color-"+n.params.navbarColorTheme:"")},F("div",{class:"navbar-bg"}),F("div",{class:"navbar-inner "+(n.params.navbarColorTheme?"color-"+n.params.navbarColorTheme:"")},o,i&&F("div",{class:"title sliding"},i),l,F("div",{class:"subnavbar sliding"},n.renderSearchbar())))},r.renderDropdown=function(){var n=this;return n.params.renderDropdown?n.params.renderDropdown.call(n,n.items):F("div",{class:"autocomplete-dropdown"},F("div",{class:"autocomplete-dropdown-inner"},F("div",{class:"list "+(n.params.expandInput?"":"no-safe-areas")},F("ul",null))),n.params.preloader&&n.renderPreloader())},r.renderPage=function(n){var i=this;return i.params.renderPage?i.params.renderPage.call(i,i.items):F("div",{class:"page page-with-subnavbar autocomplete-page","data-name":"autocomplete-page"},i.renderNavbar(n),F("div",{class:"searchbar-backdrop"}),F("div",{class:"page-content"},F("div",{class:"list autocomplete-list autocomplete-found autocomplete-list-"+i.id+" "+(i.params.formColorTheme?"color-"+i.params.formColorTheme:"")},F("ul",null)),F("div",{class:"list autocomplete-not-found"},F("ul",null,F("li",{class:"item-content"},F("div",{class:"item-inner"},F("div",{class:"item-title"},i.params.notFoundText))))),F("div",{class:"list autocomplete-values"},F("ul",null))))},r.renderPopup=function(){var n=this;return n.params.renderPopup?n.params.renderPopup.call(n,n.items):F("div",{class:"popup autocomplete-popup"},F("div",{class:"view"},n.renderPage(!0),";"))},r.onOpen=function(n,i){var s=this,o=s.app,l=T(i);if(s.$el=l,s.el=l[0],s.openedIn=n,s.opened=!0,s.params.openIn==="dropdown")s.attachDropdownEvents(),s.$dropdownEl.addClass("autocomplete-dropdown-in"),s.$inputEl.trigger("input");else{var u=l.find(".searchbar");s.params.openIn==="page"&&o.theme==="ios"&&u.length===0&&(u=T(o.navbar.getElByPage(l)).find(".searchbar")),s.searchbar=o.searchbar.create({el:u,backdropEl:l.find(".searchbar-backdrop"),customSearch:!0,on:{search:function(d,p){p.length===0&&s.searchbar.enabled?s.searchbar.backdropShow():s.searchbar.backdropHide(),s.source(p)}}}),s.attachPageEvents(),s.updateValues(),s.params.requestSourceOnOpen&&s.source("")}s.emit("local::open autocompleteOpen",s)},r.autoFocus=function(){var n=this;return n.searchbar&&n.searchbar.$inputEl&&n.searchbar.$inputEl.focus(),n},r.onOpened=function(){var n=this;n.params.openIn!=="dropdown"&&n.params.autoFocus&&n.autoFocus(),n.emit("local::opened autocompleteOpened",n)},r.onClose=function(){var n=this;n.destroyed||(n.searchbar&&n.searchbar.destroy&&(n.searchbar.destroy(),n.searchbar=null,delete n.searchbar),n.params.openIn==="dropdown"?(n.detachDropdownEvents(),n.$dropdownEl.removeClass("autocomplete-dropdown-in").remove(),n.$inputEl.parents(".item-content-dropdown-expanded").removeClass("item-content-dropdown-expanded")):n.detachPageEvents(),n.emit("local::close autocompleteClose",n))},r.onClosed=function(){var n=this;n.destroyed||(n.opened=!1,n.$el=null,n.el=null,delete n.$el,delete n.el,n.emit("local::closed autocompleteClosed",n))},r.openPage=function(){var n=this;if(n.opened)return n;var i=n.renderPage();return n.view.router.navigate({url:n.url,route:{content:i,path:n.url,on:{pageBeforeIn:function(o,l){n.onOpen("page",l.el)},pageAfterIn:function(o,l){n.onOpened("page",l.el)},pageBeforeOut:function(o,l){n.onClose("page",l.el)},pageAfterOut:function(o,l){n.onClosed("page",l.el)}},options:{animate:n.params.animate}}}),n},r.openPopup=function(){var n=this;if(n.opened)return n;var i=n.renderPopup(),s={content:i,animate:n.params.animate,push:n.params.popupPush,swipeToClose:n.params.popupSwipeToClose,on:{popupOpen:function(l){n.onOpen("popup",l.el)},popupOpened:function(l){n.onOpened("popup",l.el)},popupClose:function(l){n.onClose("popup",l.el)},popupClosed:function(l){n.onClosed("popup",l.el)}}};return n.params.routableModals&&n.view?n.view.router.navigate({url:n.url,route:{path:n.url,popup:s}}):n.modal=n.app.popup.create(s).open(n.params.animate),n},r.openDropdown=function(){var n=this;n.$dropdownEl||(n.$dropdownEl=T(n.renderDropdown()));var i=n.$inputEl.parents(".list");i.length&&n.$inputEl.parents(".item-content").length>0&&n.params.expandInput&&n.$inputEl.parents(".item-content").addClass("item-content-dropdown-expanded");var s=n.$inputEl.parents(".page-content");n.params.dropdownContainerEl?T(n.params.dropdownContainerEl).append(n.$dropdownEl):s.length===0?n.$dropdownEl.insertAfter(n.$inputEl):(n.positionDropdown(),s.append(n.$dropdownEl)),n.onOpen("dropdown",n.$dropdownEl),n.onOpened("dropdown",n.$dropdownEl)},r.open=function(){var n=this;if(n.opened)return n;var i=n.params.openIn;return n["open"+i.split("").map(function(s,o){return o===0?s.toUpperCase():s}).join("")](),n},r.close=function(){var n=this;return n.opened&&(n.params.openIn==="dropdown"?(n.onClose(),n.onClosed()):n.params.routableModals&&n.view||n.openedIn==="page"?n.view.router.back({animate:n.params.animate}):(n.modal.once("modalClosed",function(){qr(function(){n.destroyed||(n.modal.destroy(),delete n.modal)})}),n.modal.close())),n},r.init=function(){var n=this;n.attachEvents()},r.destroy=function(){var n=this;n.emit("local::beforeDestroy autocompleteBeforeDestroy",n),n.detachEvents(),n.$inputEl&&n.$inputEl[0]&&delete n.$inputEl[0].f7Autocomplete,n.$openerEl&&n.$openerEl[0]&&delete n.$openerEl[0].f7Autocomplete,$r(n),n.destroyed=!0},LG(t,[{key:"view",get:function(){var n=this,i=n.$openerEl,s=n.$inputEl,o=n.app,l;if(n.params.view)l=n.params.view;else if(i||s){var u=i||s;l=u.closest(".view").length&&u.closest(".view")[0].f7View}return l||(l=o.views.main),l}}]),t}(rr),CN=BG,VG={name:"autocomplete",params:{autocomplete:{openerEl:void 0,inputEl:void 0,view:void 0,dropdownContainerEl:void 0,dropdownPlaceholderText:void 0,typeahead:!1,highlightMatches:!0,expandInput:!1,updateInputValueOnSelect:!0,inputEvents:"input",value:void 0,multiple:!1,source:void 0,limit:void 0,valueProperty:"id",textProperty:"text",openIn:"page",pageBackLinkText:"Back",popupCloseLinkText:"Close",pageTitle:void 0,searchbarPlaceholder:"Search...",searchbarDisableText:"Cancel",searchbarDisableButton:void 0,searchbarSpellcheck:!1,popupPush:!1,popupSwipeToClose:void 0,animate:!0,autoFocus:!1,closeOnSelect:!1,notFoundText:"Nothing found",requestSourceOnOpen:!1,preloaderColor:void 0,preloader:!1,formColorTheme:void 0,navbarColorTheme:void 0,routableModals:!1,url:"select/",renderDropdown:void 0,renderPage:void 0,renderPopup:void 0,renderItem:void 0,renderSearchbar:void 0,renderNavbar:void 0}},static:{Autocomplete:CN},create:function(){var t=this;t.autocomplete=se(Ir({defaultSelector:void 0,constructor:CN,app:t,domProp:"f7Autocomplete"}),{open:function(a){var n=t.autocomplete.get(a);if(n&&n.open)return n.open()},close:function(a){var n=t.autocomplete.get(a);if(n&&n.close)return n.close()}})}};function Yp(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function WG(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,A1(e,t)}function A1(e,t){return A1=Object.setPrototypeOf||function(a,n){return a.__proto__=n,a},A1(e,t)}var HG=function(e){WG(t,e);function t(a,n){var i;n===void 0&&(n={}),i=e.call(this,n,[a])||this;var s=Yp(i),o=Ft(),l=se({},a.params.tooltip),u=nt();s.useModulesParams(l),s.params=se(l,n),typeof n.offset=="undefined"&&o.touch&&s.params.trigger==="hover"&&(s.params.offset=10);var c=s.params,d=c.targetEl,p=c.containerEl;if(!d&&!s.params.delegated)return s||Yp(i);var f=T(d);if(f.length===0&&!s.params.delegated)return s||Yp(i);if(f[0]&&f[0].f7Tooltip&&!s.params.delegated)return f[0].f7Tooltip||Yp(i);var h=T(p||a.$el).eq(0);h.length===0&&(h=a.$el);var m=T(s.render()).eq(0);se(s,{app:a,$targetEl:f,targetEl:f&&f[0],$containerEl:h,containerEl:h&&h[0],$el:m,el:m&&m[0],text:s.params.text||"",visible:!1,opened:!1}),f[0]&&(f[0].f7Tooltip=s);var g={},v;function b(){s.opened?s.hide():s.show(this)}function y(N){s.opened&&(T(N.target).closest(f).length||T(N.target).closest(s.$el).length)||s.hide()}function w(N){v||(v=!0,g.x=N.type==="touchstart"?N.targetTouches[0].pageX:N.pageX,g.y=N.type==="touchstart"?N.targetTouches[0].pageY:N.pageY,s.show(this))}function x(N){if(!!v){var I=N.type==="touchmove"?N.targetTouches[0].pageX:N.pageX,S=N.type==="touchmove"?N.targetTouches[0].pageY:N.pageY,A=Math.pow(Math.pow(I-g.x,2)+Math.pow(S-g.y,2),.5);A>50&&(v=!1,s.hide())}}function k(){!v||(v=!1,s.hide())}function C(){s.show(this)}function E(){s.hide()}function $(){m.hasClass("tooltip-in")||m.removeClass("tooltip-out").remove()}return s.attachEvents=function(){if(m.on("transitionend",$),s.params.trigger==="click"){s.params.delegated?T(u).on("click",s.params.targetEl,b):s.$targetEl.on("click",b),T("html").on("click",y);return}if(s.params.trigger!=="manual")if(o.touch){var I=o.passiveListener?{passive:!0}:!1;s.params.delegated?T(u).on(a.touchEvents.start,s.params.targetEl,w,I):s.$targetEl.on(a.touchEvents.start,w,I),a.on("touchmove",x),a.on("touchend:passive",k)}else s.params.delegated?(T(u).on(o.pointerEvents?"pointerenter":"mouseenter",s.params.targetEl,C,!0),T(u).on(o.pointerEvents?"pointerleave":"mouseleave",s.params.targetEl,E,!0)):(s.$targetEl.on(o.pointerEvents?"pointerenter":"mouseenter",C),s.$targetEl.on(o.pointerEvents?"pointerleave":"mouseleave",E))},s.detachEvents=function(){if(m.off("transitionend",$),s.params.trigger==="click"){s.params.delegated?T(u).on("click",s.params.targetEl,b):s.$targetEl.off("click",b),T("html").off("click",y);return}if(s.params.trigger!=="manual")if(o.touch){var I=o.passiveListener?{passive:!0}:!1;s.params.delegated?T(u).off(a.touchEvents.start,s.params.targetEl,w,I):s.$targetEl.off(a.touchEvents.start,w,I),a.off("touchmove",x),a.off("touchend:passive",k)}else s.params.delegated?(T(u).off(o.pointerEvents?"pointerenter":"mouseenter",s.params.targetEl,C,!0),T(u).off(o.pointerEvents?"pointerleave":"mouseleave",s.params.targetEl,E,!0)):(s.$targetEl.off(o.pointerEvents?"pointerenter":"mouseenter",C),s.$targetEl.off(o.pointerEvents?"pointerleave":"mouseleave",E))},s.useModules(),s.init(),s||Yp(i)}var r=t.prototype;return r.setTargetEl=function(n){var i=this;return i.detachEvents(),i.$targetEl=T(n),i.targetEl=i.$targetEl[0],i.attachEvents(),i},r.position=function(n){var i=this,s=i.$el,o=i.app,l=i.$containerEl,u=!!i.params.containerEl,c=i.params.offset||0;s.css({left:"",top:""});var d=T(n||i.targetEl),p=[s.width(),s.height()],f=p[0],h=p[1];s.css({left:"",top:""});var m,g,v,b,y=u&&l.length?l[0].getBoundingClientRect():o;if(d&&d.length>0){if(m=d.outerWidth(),g=d.outerHeight(),typeof m=="undefined"&&typeof g=="undefined"){var w=d[0].getBoundingClientRect();m=w.width,g=w.height}var x=d.offset();v=x.left-y.left,b=x.top-y.top;var k=d.parents(".page");k.length>0&&(b-=k[0].scrollTop)}var C=[0,0,0],E=C[0],$=C[1],N="top";h+c<b?$=b-h-c:h<y.height-b-g?(N="bottom",$=b+g+c):(N="middle",$=g/2+b-h/2,$<=0?$=8:$+h>=y.height&&($=y.height-h-8)),N==="top"||N==="bottom"?(E=m/2+v-f/2,E<8&&(E=8),E+f>y.width&&(E=y.width-f-8),E<0&&(E=0)):N==="middle"&&(E=v-f,(E<8||E+f>y.width)&&(E<8&&(E=v+m),E+f>y.width&&(E=y.width-f-8))),s.css({top:$+"px",left:E+"px"})},r.show=function(n){var i=this,s=i.$el,o=i.$targetEl,l=i.$containerEl;l[0]&&s[0]&&!l[0].contains(s[0])&&l.append(s),i.position(n);var u=T(n);return i.visible=!0,i.opened=!0,o.trigger("tooltip:show"),s.trigger("tooltip:show"),u.length&&u[0]!==o[0]&&u.trigger("tooltip:show"),i.emit("local::show tooltipShow",i),s.removeClass("tooltip-out").addClass("tooltip-in"),i},r.hide=function(){var n=this,i=n.$el,s=n.$targetEl;return n.visible=!1,n.opened=!1,s.trigger("tooltip:hide"),i.trigger("tooltip:hide"),n.emit("local::hide tooltipHide",n),i.addClass("tooltip-out").removeClass("tooltip-in"),n},r.render=function(){var n=this;if(n.params.render)return n.params.render.call(n,n);var i=n.params,s=i.cssClass,o=i.text;return(`
      <div class="tooltip `+(s||"")+`">
        <div class="tooltip-content">`+(o||"")+`</div>
      </div>
    `).trim()},r.setText=function(n){var i=this;return typeof n=="undefined"||(i.params.text=n,i.text=n,i.$el&&i.$el.children(".tooltip-content").html(n),i.opened&&i.position()),i},r.init=function(){var n=this;n.attachEvents()},r.destroy=function(){var n=this;!n.$targetEl||n.destroyed||(n.$targetEl.trigger("tooltip:beforedestroy"),n.emit("local::beforeDestroy tooltipBeforeDestroy",n),n.$el.remove(),n.$targetEl[0]&&delete n.$targetEl[0].f7Tooltip,n.detachEvents(),$r(n),n.destroyed=!0)},t}(rr),SN=HG,UG={name:"tooltip",static:{Tooltip:SN},create:function(){var t=this;t.tooltip=Ir({defaultSelector:".tooltip",constructor:SN,app:t,domProp:"f7Tooltip"}),t.tooltip.show=function(a){var n=T(a);if(n.length!==0){var i=n[0].f7Tooltip;if(!!i)return i.show(n[0]),i}},t.tooltip.hide=function(a){var n=T(a);if(n.length!==0){var i=n[0].f7Tooltip;if(!!i)return i.hide(),i}},t.tooltip.setText=function(a,n){var i=T(a);if(i.length!==0){var s=i[0].f7Tooltip;if(!!s)return s.setText(n),s}}},params:{tooltip:{targetEl:null,delegated:!1,text:null,cssClass:null,render:null,offset:0,trigger:"hover",containerEl:void 0}},on:{tabMounted:function(t){var r=this;T(t).find(".tooltip-init").each(function(a){var n=T(a).attr("data-tooltip");!n||r.tooltip.create({targetEl:a,text:n})})},tabBeforeRemove:function(t){T(t).find(".tooltip-init").each(function(r){r.f7Tooltip&&r.f7Tooltip.destroy()})},pageInit:function(t){var r=this;t.$el.find(".tooltip-init").each(function(a){var n=T(a).attr("data-tooltip");!n||r.tooltip.create({targetEl:a,text:n})}),r.theme==="ios"&&t.view&&t.view.router.dynamicNavbar&&t.$navbarEl&&t.$navbarEl.length>0&&t.$navbarEl.find(".tooltip-init").each(function(a){var n=T(a).attr("data-tooltip");!n||r.tooltip.create({targetEl:a,text:n})})},pageBeforeRemove:function(t){var r=this;t.$el.find(".tooltip-init").each(function(a){a.f7Tooltip&&a.f7Tooltip.destroy()}),r.theme==="ios"&&t.view&&t.view.router.dynamicNavbar&&t.$navbarEl&&t.$navbarEl.length>0&&t.$navbarEl.find(".tooltip-init").each(function(a){a.f7Tooltip&&a.f7Tooltip.destroy()})}},vnode:{"tooltip-init":{insert:function(t){var r=this,a=t.elm,n=T(a).attr("data-tooltip");!n||r.tooltip.create({targetEl:a,text:n})},update:function(t){var r=t.elm;!r.f7Tooltip||t&&t.data&&t.data.attrs&&t.data.attrs["data-tooltip"]&&r.f7Tooltip.setText(t.data.attrs["data-tooltip"])},destroy:function(t){var r=t.elm;r.f7Tooltip&&r.f7Tooltip.destroy()}}}},jG={name:"skeleton"},GG={open:function(t){t===void 0&&(t=".menu-item-dropdown");var r=this;if(!!t){var a=T(t).closest(".menu-item-dropdown");if(!!a.length){var n=a.closest(".menu").eq(0);if(n.length){var i=n.css("z-index"),s=n[0].style.zIndex;n.css("z-index",parseInt(i||0,10)+1),n[0].f7MenuZIndex=s}a.eq(0).addClass("menu-item-dropdown-opened").trigger("menu:opened"),r.emit("menuOpened",a.eq(0)[0])}}},close:function(t){t===void 0&&(t=".menu-item-dropdown-opened");var r=this;if(!!t){var a=T(t).closest(".menu-item-dropdown-opened");if(!!a.length){var n=a.closest(".menu").eq(0);if(n.length){var i=n[0].f7MenuZIndex;n.css("z-index",i),delete n[0].f7MenuZIndex}a.eq(0).removeClass("menu-item-dropdown-opened").trigger("menu:closed"),r.emit("menuClosed",a.eq(0)[0])}}}},qG={name:"menu",create:function(){var t=this;En(t,{menu:GG})},on:{click:function(t){var r=this,a=T(".menu-item-dropdown-opened");!a.length||a.each(function(n){T(t.target).closest(".menu-item-dropdown-opened").length||r.menu.close(n)})}},clicks:{".menu-item-dropdown":function(t,r,a){var n=this;if(t.hasClass("menu-item-dropdown-opened")){if(T(a.target).closest(".menu-dropdown").length)return;n.menu.close(t)}else n.menu.open(t)},".menu-close":function(){var t=this;t.menu.close()}}},XG={render:function(t){var r=t.params,a=r.sliderLabel,n=r.sliderValue,i=r.sliderValueEditable,s=r.alphaLabelText;return F("div",{class:"color-picker-module color-picker-module-alpha-slider"},F("div",{class:"color-picker-slider-wrap"},a&&F("div",{class:"color-picker-slider-label"},s),F("div",{class:"range-slider color-picker-slider color-picker-slider-alpha"}),n&&F("div",{class:"color-picker-slider-value"},i?F("input",{type:"number",step:"0.01",min:"0",max:"1",class:"color-picker-value-alpha"}):F("span",{class:"color-picker-value-alpha"}))))},init:function(t){t.alphaRangeSlider=t.app.range.create({el:t.$el.find(".color-picker-slider-alpha"),min:0,max:1,step:.01,value:1,on:{change:function(n,i){var s=Math.floor(i*100)/100;t.setValue({alpha:s})}}});function r(a){var n=t.value.alpha,i=parseFloat(a.target.value);if(Number.isNaN(i)){a.target.value=n;return}i=Math.max(0,Math.min(1,i)),t.setValue({alpha:i})}t.$el.on("change",".color-picker-module-alpha-slider input",r),t.destroyAlphaSliderEvents=function(){t.$el.off("change",".color-picker-module-alpha-slider input",r)}},update:function(t){var r=t.value,a=t.params,n=a.sliderValue,i=a.sliderValueEditable,s=r.alpha;t.alphaRangeSlider.value=s,t.alphaRangeSlider.layout(),n&&i?t.$el.find("input.color-picker-value-alpha").val(s):t.$el.find("span.color-picker-value-alpha").text(s)},destroy:function(t){t.alphaRangeSlider&&t.alphaRangeSlider.destroy&&t.alphaRangeSlider.destroy(),delete t.alphaRangeSlider,t.destroyAlphaSliderEvents&&t.destroyAlphaSliderEvents(),delete t.destroyAlphaSliderEvents}},YG={render:function(){return F("div",{class:"color-picker-module color-picker-module-current-color"},F("div",{class:"color-picker-current-color"}))},update:function(t){t.$el.find(".color-picker-module-current-color .color-picker-current-color").css("background-color",t.value.hex)}},KG={render:function(t){var r=t.params,a=r.hexLabel,n=r.hexLabelText,i=r.hexValueEditable;return F("div",{class:"color-picker-module color-picker-module-hex"},F("div",{class:"color-picker-hex-wrap"},a&&F("div",{class:"color-picker-hex-label"},n),F("div",{class:"color-picker-hex-value"},i?F("input",{type:"text",class:"color-picker-value-hex"}):F("span",{class:"color-picker-value-hex"}))))},init:function(t){function r(a){var n=t.value.hex,i=a.target.value.replace(/#/g,"");if(Number.isNaN(i)||!i||i.length!==3&&i.length!==6){a.target.value=n;return}var s=0,o=parseInt(i,16),l=parseInt("ffffff",16);o>l&&(i="fff"),o<s&&(i="000"),t.setValue({hex:i})}t.$el.on("change",".color-picker-module-hex input",r),t.destroyHexEvents=function(){t.$el.off("change",".color-picker-module-hex input",r)}},update:function(t){var r=t.value,a=t.params.hexValueEditable,n=r.hex;a?t.$el.find("input.color-picker-value-hex").val(n):t.$el.find("span.color-picker-value-hex").text(n)},destroy:function(t){t.destroyHexEvents&&t.destroyHexEvents(),delete t.destroyHexEvents}},ZG={render:function(t){var r=t.params,a=r.sliderLabel,n=r.sliderValue,i=r.sliderValueEditable,s=r.hueLabelText,o=r.saturationLabelText,l=r.brightnessLabelText;return F("div",{class:"color-picker-module color-picker-module-hsb-sliders"},F("div",{class:"color-picker-slider-wrap"},a&&F("div",{class:"color-picker-slider-label"},s),F("div",{class:"range-slider color-picker-slider color-picker-slider-hue"}),n&&F("div",{class:"color-picker-slider-value"},i?F("input",{type:"number",step:"0.1",min:"0",max:"360",class:"color-picker-value-hue","data-color-index":"0"}):F("span",{class:"color-picker-value-hue"}))),F("div",{class:"color-picker-slider-wrap"},a&&F("div",{class:"color-picker-slider-label"},o),F("div",{class:"range-slider color-picker-slider color-picker-slider-saturation"}),n&&F("div",{class:"color-picker-slider-value"},i?F("input",{type:"number",step:"0.1",min:"0",max:"100",class:"color-picker-value-saturation","data-color-index":"1"}):F("span",{class:"color-picker-value-saturation"}))),F("div",{class:"color-picker-slider-wrap"},a&&F("div",{class:"color-picker-slider-label"},l),F("div",{class:"range-slider color-picker-slider color-picker-slider-brightness"}),n&&F("div",{class:"color-picker-slider-value"},i?F("input",{type:"number",step:"0.1",min:"0",max:"100",class:"color-picker-value-brightness","data-color-index":"2"}):F("span",{class:"color-picker-value-brightness"}))))},init:function(t){t.hueRangeSlider=t.app.range.create({el:t.$el.find(".color-picker-slider-hue"),min:0,max:360,step:.1,value:0,on:{change:function(n,i){t.setValue({hue:i})}}}),t.saturationRangeSlider=t.app.range.create({el:t.$el.find(".color-picker-slider-saturation"),min:0,max:1,step:.001,value:0,on:{change:function(n,i){var s=Math.floor(i*1e3)/1e3;t.setValue({hsb:[t.value.hsb[0],s,t.value.hsb[2]]})}}}),t.brightnessRangeSlider=t.app.range.create({el:t.$el.find(".color-picker-slider-brightness"),min:0,max:1,step:.001,value:0,on:{change:function(n,i){var s=Math.floor(i*1e3)/1e3;t.setValue({hsb:[t.value.hsb[0],t.value.hsb[1],s]})}}});function r(a){var n=[].concat(t.value.hsb),i=parseInt(T(a.target).attr("data-color-index"),10),s=parseFloat(a.target.value);if(Number.isNaN(s)){a.target.value=n[i];return}i===0?s=Math.max(0,Math.min(360,s)):s=Math.max(0,Math.min(100,s))/100,n[i]=s,t.setValue({hsb:n})}t.$el.on("change",".color-picker-module-hsb-sliders input",r),t.destroyHsbSlidersEvents=function(){t.$el.off("change",".color-picker-module-hsb-sliders input",r)}},update:function(t){var r=t.app,a=t.value,n=t.params,i=n.sliderValue,s=n.sliderValueEditable,o=a.hsb,l=a.hue;t.hueRangeSlider.value=l,t.saturationRangeSlider.value=o[1],t.brightnessRangeSlider.value=o[2],t.hueRangeSlider.layout(),t.saturationRangeSlider.layout(),t.brightnessRangeSlider.layout();var u=es(o[0],o[1],1),c=es(o[0],0,1),d=es(o[0],1,1),p=o[2];t.hueRangeSlider.$el[0].style.setProperty("--f7-range-knob-color","hsl("+l+", 100%, 50%)"),t.saturationRangeSlider.$el[0].style.setProperty("--f7-range-knob-color","hsl("+u[0]+", "+u[1]*100+"%, "+u[2]*100+"%)"),t.brightnessRangeSlider.$el[0].style.setProperty("--f7-range-knob-color","rgb("+p*255+", "+p*255+", "+p*255+")"),t.saturationRangeSlider.$el.find(".range-bar").css("background-image","linear-gradient("+(r.rtl?"to left":"to right")+", hsl("+c[0]+", "+c[1]*100+"%, "+c[2]*100+"%), hsl("+d[0]+", "+d[1]*100+"%, "+d[2]*100+"%))"),i&&s?(t.$el.find("input.color-picker-value-hue").val(""+l),t.$el.find("input.color-picker-value-saturation").val(""+o[1]*1e3/10),t.$el.find("input.color-picker-value-brightness").val(""+o[2]*1e3/10)):i&&(t.$el.find("span.color-picker-value-hue").text(""+l),t.$el.find("span.color-picker-value-saturation").text(""+o[1]*1e3/10),t.$el.find("span.color-picker-value-brightness").text(""+o[2]*1e3/10))},destroy:function(t){t.hueRangeSlider&&t.hueRangeSlider.destroy&&t.hueRangeSlider.destroy(),t.saturationRangeSlider&&t.saturationRangeSlider.destroy&&t.saturationRangeSlider.destroy(),t.brightnessRangeSlider&&t.brightnessRangeSlider.destroy&&t.brightnessRangeSlider.destroy(),delete t.hueRangeSlider,delete t.saturationRangeSlider,delete t.brightnessRangeSlider,t.destroyHsbSlidersEvents&&t.destroyHsbSlidersEvents(),delete t.destroyHsbSlidersEvents}},QG={render:function(t){var r=t.params,a=r.sliderLabel,n=r.sliderValue,i=r.sliderValueEditable,s=r.hueLabelText;return F("div",{class:"color-picker-module color-picker-module-hue-slider"},F("div",{class:"color-picker-slider-wrap"},a&&F("div",{class:"color-picker-slider-label"},s),F("div",{class:"range-slider color-picker-slider color-picker-slider-hue"}),n&&F("div",{class:"color-picker-slider-value"},i?F("input",{type:"number",step:"0.1",min:"0",max:"360",class:"color-picker-value-hue"}):F("span",{class:"color-picker-value-hue"}))))},init:function(t){t.hueRangeSlider=t.app.range.create({el:t.$el.find(".color-picker-slider-hue"),min:0,max:360,step:.1,value:0,on:{change:function(a,n){t.setValue({hue:n})}}})},update:function(t){var r=t.value,a=t.params,n=a.sliderValue,i=a.sliderValueEditable,s=r.hue;t.hueRangeSlider.value=s,t.hueRangeSlider.layout(),t.hueRangeSlider.$el[0].style.setProperty("--f7-range-knob-color","hsl("+s+", 100%, 50%)"),n&&i?t.$el.find("input.color-picker-value-hue").val(""+s):n&&t.$el.find("span.color-picker-value-hue").text(""+s)},destroy:function(t){t.hueRangeSlider&&t.hueRangeSlider.destroy&&t.hueRangeSlider.destroy(),delete t.hueRangeSlider}},JG={render:function(t){var r=t.params,a=r.sliderLabel,n=r.sliderValue,i=r.sliderValueEditable,s=r.brightnessLabelText;return F("div",{class:"color-picker-module color-picker-module-brightness-slider"},F("div",{class:"color-picker-slider-wrap"},a&&F("div",{class:"color-picker-slider-label"},s),F("div",{class:"range-slider color-picker-slider color-picker-slider-brightness"}),n&&F("div",{class:"color-picker-slider-value"},i?F("input",{type:"number",step:"0.1",min:"0",max:"100",class:"color-picker-value-brightness"}):F("span",{class:"color-picker-value-brightness"}))))},init:function(t){t.brightnessRangeSlider=t.app.range.create({el:t.$el.find(".color-picker-slider-brightness"),min:0,max:1,step:.001,value:0,on:{change:function(a,n){var i=Math.floor(n*1e3)/1e3;t.setValue({hsb:[t.value.hsb[0],t.value.hsb[1],i]})}}})},update:function(t){var r=t.value,a=t.app,n=t.params,i=n.sliderValue,s=n.sliderValueEditable,o=r.hsb;t.brightnessRangeSlider.value=o[2],t.brightnessRangeSlider.layout();var l=es(o[0],o[1],o[2]),u=es(o[0],o[1],0),c=es(o[0],o[1],1);t.brightnessRangeSlider.$el[0].style.setProperty("--f7-range-knob-color","hsl("+l[0]+", "+l[1]*100+"%, "+l[2]*100+"%)"),t.brightnessRangeSlider.$el.find(".range-bar").css("background-image","linear-gradient("+(a.rtl?"to left":"to right")+", hsl("+u[0]+", "+u[1]*100+"%, "+u[2]*100+"%), hsl("+c[0]+", "+c[1]*100+"%, "+c[2]*100+"%))"),i&&s?t.$el.find("input.color-picker-value-brightness").val(""+o[2]*1e3/10):i&&t.$el.find("span.color-picker-value-brightness").text(""+o[2]*1e3/10)},destroy:function(t){t.brightnessRangeSlider&&t.brightnessRangeSlider.destroy&&t.brightnessRangeSlider.destroy(),delete t.brightnessRangeSlider}},eq={render:function(t){return F("div",{class:"color-picker-module color-picker-module-palette"},F("div",{class:"color-picker-palette"},t.params.palette.map(function(r){if(Array.isArray(r)){var a='<div class="color-picker-palette-row">';return a+=r.map(function(n){return`
                <div class="color-picker-palette-value" data-palette-color="`+n+'" style="background-color: '+n+`"></div>
              `}).join(""),a+="</div>",a}return F("div",{class:"color-picker-palette-value","data-palette-color":r,style:"background-color: "+r})})))},init:function(t){function r(a){var n=T(a.target).attr("data-palette-color");t.setValue({hex:n})}t.$el.on("click",".color-picker-module-palette .color-picker-palette-value",r),t.destroyPaletteEvents=function(){t.$el.off("click",".color-picker-module-hex input",r)}},destroy:function(t){t.destroyPaletteEvents&&t.destroyPaletteEvents(),delete t.destroyPaletteEvents}},tq={render:function(){return F("div",{class:"color-picker-module color-picker-module-initial-current-colors"},F("div",{class:"color-picker-initial-current-colors"},F("div",{class:"color-picker-initial-color"}),F("div",{class:"color-picker-current-color"})))},init:function(t){function r(){if(t.initialValue){var a=t.initialValue,n=a.hex,i=a.alpha;t.setValue({hex:n,alpha:i})}}t.$el.on("click",".color-picker-initial-color",r),t.destroyInitialCurrentEvents=function(){t.$el.off("click",".color-picker-initial-color",r)}},update:function(t){t.$el.find(".color-picker-module-initial-current-colors .color-picker-initial-color").css("background-color",t.initialValue.hex),t.$el.find(".color-picker-module-initial-current-colors .color-picker-current-color").css("background-color",t.value.hex)},destroy:function(t){t.destroyInitialCurrentEvents&&t.destroyInitialCurrentEvents(),delete t.destroyInitialCurrentEvents}},rq={render:function(t){var r=t.params,a=r.barLabel,n=r.barValue,i=r.barValueEditable,s=r.redLabelText,o=r.greenLabelText,l=r.blueLabelText;return F("div",{class:"color-picker-module color-picker-module-rgb-bars"},F("div",{class:"color-picker-bar-wrap"},a&&F("div",{class:"color-picker-bar-label"},s),F("div",{class:"range-slider color-picker-bar color-picker-bar-red"}),n&&F("div",{class:"color-picker-bar-value"},i?F("input",{type:"number",step:"1",min:"0",max:"255",class:"color-picker-value-bar-red","data-color-index":"0"}):F("span",{class:"color-picker-value-bar-red"}))),F("div",{class:"color-picker-bar-wrap"},a&&F("div",{class:"color-picker-bar-label"},o),F("div",{class:"range-slider color-picker-bar color-picker-bar-green"}),n&&F("div",{class:"color-picker-bar-value"},i?F("input",{type:"number",step:"1",min:"0",max:"255",class:"color-picker-value-bar-green","data-color-index":"1"}):F("span",{class:"color-picker-value-bar-green"}))),F("div",{class:"color-picker-bar-wrap"},a&&F("div",{class:"color-picker-bar-label"},l),F("div",{class:"range-slider color-picker-bar color-picker-bar-blue"}),n&&F("div",{class:"color-picker-bar-value"},i?F("input",{type:"number",step:"1",min:"0",max:"255",class:"color-picker-value-bar-blue","data-color-index":"2"}):F("span",{class:"color-picker-value-bar-blue"}))))},init:function(t){t.redBar=t.app.range.create({el:t.$el.find(".color-picker-bar-red"),min:0,max:255,step:1,value:0,vertical:!0,on:{change:function(n,i){t.setValue({rgb:[i,t.value.rgb[1],t.value.rgb[2]]})}}}),t.greenBar=t.app.range.create({el:t.$el.find(".color-picker-bar-green"),min:0,max:255,step:1,value:0,vertical:!0,on:{change:function(n,i){t.setValue({rgb:[t.value.rgb[0],i,t.value.rgb[2]]})}}}),t.blueBar=t.app.range.create({el:t.$el.find(".color-picker-bar-blue"),min:0,max:255,step:1,value:0,vertical:!0,on:{change:function(n,i){t.setValue({rgb:[t.value.rgb[0],t.value.rgb[1],i]})}}});function r(a){var n=[].concat(t.value.rgb),i=parseInt(T(a.target).attr("data-color-index"),10),s=parseInt(a.target.value,10);if(Number.isNaN(s)){a.target.value=n[i];return}s=Math.max(0,Math.min(255,s)),n[i]=s,t.setValue({rgb:n})}t.$el.on("change",".color-picker-module-rgb-bars input",r),t.destroyRgbBarsEvents=function(){t.$el.off("change",".color-picker-module-rgb-bars input",r)}},update:function(t){var r=t.value,a=t.redBar,n=t.greenBar,i=t.blueBar,s=t.params,o=s.barValue,l=s.barValueEditable,u=r.rgb;a.value=u[0],n.value=u[1],i.value=u[2],a.layout(),n.layout(),i.layout(),a.$el.find(".range-bar").css("background-image","linear-gradient(to top, rgb(0, "+u[1]+", "+u[2]+"), rgb(255, "+u[1]+", "+u[2]+"))"),n.$el.find(".range-bar").css("background-image","linear-gradient(to top, rgb("+u[0]+", 0, "+u[2]+"), rgb("+u[0]+", 255, "+u[2]+"))"),i.$el.find(".range-bar").css("background-image","linear-gradient(to top, rgb("+u[0]+", "+u[1]+", 0), rgb("+u[0]+", "+u[1]+", 255))"),o&&l?(t.$el.find("input.color-picker-value-bar-red").val(u[0]),t.$el.find("input.color-picker-value-bar-green").val(u[1]),t.$el.find("input.color-picker-value-bar-blue").val(u[2])):o&&(t.$el.find("span.color-picker-value-bar-red").text(u[0]),t.$el.find("span.color-picker-value-bar-green").text(u[1]),t.$el.find("span.color-picker-value-bar-blue").text(u[2]))},destroy:function(t){t.redBar&&t.redBar.destroy&&t.redBar.destroy(),t.greenBar&&t.greenBar.destroy&&t.greenBar.destroy(),t.blueBar&&t.blueBar.destroy&&t.blueBar.destroy(),delete t.redBar,delete t.greenBar,delete t.blueBar,t.destroyRgbBarsEvents&&t.destroyRgbBarsEvents(),delete t.destroyRgbBarsEvents}},nq={render:function(t){var r=t.params,a=r.sliderLabel,n=r.sliderValue,i=r.sliderValueEditable,s=r.redLabelText,o=r.greenLabelText,l=r.blueLabelText;return F("div",{class:"color-picker-module color-picker-module-rgb-sliders"},F("div",{class:"color-picker-slider-wrap"},a&&F("div",{class:"color-picker-slider-label"},s),F("div",{class:"range-slider color-picker-slider color-picker-slider-red"}),n&&F("div",{class:"color-picker-slider-value"},i?F("input",{type:"number",step:"1",min:"0",max:"255",class:"color-picker-value-red","data-color-index":"0"}):F("span",{class:"color-picker-value-red"}))),F("div",{class:"color-picker-slider-wrap"},a&&F("div",{class:"color-picker-slider-label"},o),F("div",{class:"range-slider color-picker-slider color-picker-slider-green"}),n&&F("div",{class:"color-picker-slider-value"},i?F("input",{type:"number",step:"1",min:"0",max:"255",class:"color-picker-value-green","data-color-index":"1"}):F("span",{class:"color-picker-value-green"}))),F("div",{class:"color-picker-slider-wrap"},a&&F("div",{class:"color-picker-slider-label"},l),F("div",{class:"range-slider color-picker-slider color-picker-slider-blue"}),n&&F("div",{class:"color-picker-slider-value"},i?F("input",{type:"number",step:"1",min:"0",max:"255",class:"color-picker-value-blue","data-color-index":"2"}):F("span",{class:"color-picker-value-blue"}))))},init:function(t){t.redRangeSlider=t.app.range.create({el:t.$el.find(".color-picker-slider-red"),min:0,max:255,step:1,value:0,on:{change:function(n,i){t.setValue({rgb:[i,t.value.rgb[1],t.value.rgb[2]]})}}}),t.greenRangeSlider=t.app.range.create({el:t.$el.find(".color-picker-slider-green"),min:0,max:255,step:1,value:0,on:{change:function(n,i){t.setValue({rgb:[t.value.rgb[0],i,t.value.rgb[2]]})}}}),t.blueRangeSlider=t.app.range.create({el:t.$el.find(".color-picker-slider-blue"),min:0,max:255,step:1,value:0,on:{change:function(n,i){t.setValue({rgb:[t.value.rgb[0],t.value.rgb[1],i]})}}});function r(a){var n=[].concat(t.value.rgb),i=parseInt(T(a.target).attr("data-color-index"),10),s=parseInt(a.target.value,10);if(Number.isNaN(s)){a.target.value=n[i];return}s=Math.max(0,Math.min(255,s)),n[i]=s,t.setValue({rgb:n})}t.$el.on("change",".color-picker-module-rgb-sliders input",r),t.destroyRgbSlidersEvents=function(){t.$el.off("change",".color-picker-module-rgb-sliders input",r)}},update:function(t){var r=t.app,a=t.value,n=t.redRangeSlider,i=t.greenRangeSlider,s=t.blueRangeSlider,o=t.params,l=o.sliderValue,u=o.sliderValueEditable,c=a.rgb;n.value=c[0],i.value=c[1],s.value=c[2],n.layout(),i.layout(),s.layout(),n.$el[0].style.setProperty("--f7-range-knob-color","rgb("+c[0]+", "+c[1]+", "+c[2]+")"),i.$el[0].style.setProperty("--f7-range-knob-color","rgb("+c[0]+", "+c[1]+", "+c[2]+")"),s.$el[0].style.setProperty("--f7-range-knob-color","rgb("+c[0]+", "+c[1]+", "+c[2]+")");var d=r.rtl?"to left":"to right";n.$el.find(".range-bar").css("background-image","linear-gradient("+d+", rgb(0, "+c[1]+", "+c[2]+"), rgb(255, "+c[1]+", "+c[2]+"))"),i.$el.find(".range-bar").css("background-image","linear-gradient("+d+", rgb("+c[0]+", 0, "+c[2]+"), rgb("+c[0]+", 255, "+c[2]+"))"),s.$el.find(".range-bar").css("background-image","linear-gradient("+d+", rgb("+c[0]+", "+c[1]+", 0), rgb("+c[0]+", "+c[1]+", 255))"),l&&u?(t.$el.find("input.color-picker-value-red").val(c[0]),t.$el.find("input.color-picker-value-green").val(c[1]),t.$el.find("input.color-picker-value-blue").val(c[2])):l&&(t.$el.find("span.color-picker-value-red").text(c[0]),t.$el.find("span.color-picker-value-green").text(c[1]),t.$el.find("span.color-picker-value-blue").text(c[2]))},destroy:function(t){t.redRangeSlider&&t.redRangeSlider.destroy&&t.redRangeSlider.destroy(),t.greenRangeSlider&&t.greenRangeSlider.destroy&&t.greenRangeSlider.destroy(),t.blueRangeSlider&&t.blueRangeSlider.destroy&&t.blueRangeSlider.destroy(),delete t.redRangeSlider,delete t.greenRangeSlider,delete t.blueRangeSlider,t.destroyRgbSlidersEvents&&t.destroyRgbSlidersEvents(),delete t.destroyRgbSlidersEvents}},aq={render:function(){return F("div",{class:"color-picker-module color-picker-module-sb-spectrum"},F("div",{class:"color-picker-sb-spectrum",style:"background-color: hsl(0, 100%, 50%)"},F("div",{class:"color-picker-sb-spectrum-handle"})))},init:function(t){var r=t.app,a,n,i,s,o,l,u,c,d,p=t.$el;function f(y,w){var x=(y-u.left)/u.width,k=(w-u.top)/u.height;x=Math.max(0,Math.min(1,x)),k=1-Math.max(0,Math.min(1,k)),t.setValue({hsb:[t.value.hue,x,k]})}function h(y){if(!(n||a)){i=y.type==="touchstart"?y.targetTouches[0].pageX:y.pageX,o=i,s=y.type==="touchstart"?y.targetTouches[0].pageY:y.pageY,l=s;var w=T(y.target);d=w.closest(".color-picker-sb-spectrum-handle").length>0,d||(c=w.closest(".color-picker-sb-spectrum").length>0),c&&(u=p.find(".color-picker-sb-spectrum")[0].getBoundingClientRect(),f(i,s)),(d||c)&&p.find(".color-picker-sb-spectrum-handle").addClass("color-picker-sb-spectrum-handle-pressed")}}function m(y){!(c||d)||(o=y.type==="touchmove"?y.targetTouches[0].pageX:y.pageX,l=y.type==="touchmove"?y.targetTouches[0].pageY:y.pageY,y.preventDefault(),n||(n=!0,d&&(u=p.find(".color-picker-sb-spectrum")[0].getBoundingClientRect())),(c||d)&&f(o,l))}function g(){n=!1,(c||d)&&p.find(".color-picker-sb-spectrum-handle").removeClass("color-picker-sb-spectrum-handle-pressed"),c=!1,d=!1}function v(){t.modules["sb-spectrum"].update(t)}var b=r.touchEvents.start==="touchstart"&&Ft().passiveListener?{passive:!0,capture:!1}:!1;t.$el.on(r.touchEvents.start,h,b),r.on("touchmove:active",m),r.on("touchend:passive",g),r.on("resize",v),t.destroySpectrumEvents=function(){t.$el.off(r.touchEvents.start,h,b),r.off("touchmove:active",m),r.off("touchend:passive",g),r.off("resize",v)}},update:function(t){var r=t.value,a=r.hsl,n=r.hsb,i=t.$el.find(".color-picker-sb-spectrum")[0].offsetWidth,s=t.$el.find(".color-picker-sb-spectrum")[0].offsetHeight;t.$el.find(".color-picker-sb-spectrum").css("background-color","hsl("+a[0]+", 100%, 50%)"),t.$el.find(".color-picker-sb-spectrum-handle").css("background-color","hsl("+a[0]+", "+a[1]*100+"%, "+a[2]*100+"%)").transform("translate("+i*n[1]+"px, "+s*(1-n[2])+"px)")},destroy:function(t){t.destroySpectrumEvents&&t.destroySpectrumEvents(),delete t.destroySpectrumEvents}},iq={render:function(){return F("div",{class:"color-picker-module color-picker-module-hs-spectrum"},F("div",{class:"color-picker-hs-spectrum"},F("div",{class:"color-picker-hs-spectrum-handle"})))},init:function(t){var r=t.app,a,n,i,s,o,l,u,c,d,p=t.$el;function f(y,w){var x=(y-u.left)/u.width*360,k=(w-u.top)/u.height;x=Math.max(0,Math.min(360,x)),k=1-Math.max(0,Math.min(1,k)),t.setValue({hsb:[x,k,t.value.hsb[2]]})}function h(y){if(!(n||a)){i=y.type==="touchstart"?y.targetTouches[0].pageX:y.pageX,o=i,s=y.type==="touchstart"?y.targetTouches[0].pageY:y.pageY,l=s;var w=T(y.target);d=w.closest(".color-picker-hs-spectrum-handle").length>0,d||(c=w.closest(".color-picker-hs-spectrum").length>0),c&&(u=p.find(".color-picker-hs-spectrum")[0].getBoundingClientRect(),f(i,s)),(d||c)&&p.find(".color-picker-hs-spectrum-handle").addClass("color-picker-hs-spectrum-handle-pressed")}}function m(y){!(c||d)||(o=y.type==="touchmove"?y.targetTouches[0].pageX:y.pageX,l=y.type==="touchmove"?y.targetTouches[0].pageY:y.pageY,y.preventDefault(),n||(n=!0,d&&(u=p.find(".color-picker-hs-spectrum")[0].getBoundingClientRect())),(c||d)&&f(o,l))}function g(){n=!1,(c||d)&&p.find(".color-picker-hs-spectrum-handle").removeClass("color-picker-hs-spectrum-handle-pressed"),c=!1,d=!1}function v(){t.modules["hs-spectrum"].update(t)}var b=r.touchEvents.start==="touchstart"&&Ft().passiveListener?{passive:!0,capture:!1}:!1;t.$el.on(r.touchEvents.start,h,b),r.on("touchmove:active",m),r.on("touchend:passive",g),r.on("resize",v),t.destroySpectrumEvents=function(){t.$el.off(r.touchEvents.start,h,b),r.off("touchmove:active",m),r.off("touchend:passive",g),r.off("resize",v)}},update:function(t){var r=t.value,a=r.hsb,n=t.$el.find(".color-picker-hs-spectrum")[0].offsetWidth,i=t.$el.find(".color-picker-hs-spectrum")[0].offsetHeight,s=es(a[0],a[1],1);t.$el.find(".color-picker-hs-spectrum-handle").css("background-color","hsl("+s[0]+", "+s[1]*100+"%, "+s[2]*100+"%)").transform("translate("+n*(a[0]/360)+"px, "+i*(1-a[1])+"px)")},destroy:function(t){t.destroySpectrumEvents&&t.destroySpectrumEvents(),delete t.destroySpectrumEvents}};function sq(){for(var e=256,t="",r=e;r>0;r-=1){var a=r*Math.PI/(e/2),n=360/e*r;t+='<circle cx="'+(150-Math.sin(a)*125)+'" cy="'+(150-Math.cos(a)*125)+'" r="25" fill="hsl('+n+', 100%, 50%)"></circle>'}return t}var oq={render:function(){return F("div",{class:"color-picker-module color-picker-module-wheel"},F("div",{class:"color-picker-wheel"},F("svg",{viewBox:"0 0 300 300",width:"300",height:"300"},sq()),F("div",{class:"color-picker-wheel-handle"}),F("div",{class:"color-picker-sb-spectrum",style:"background-color: hsl(0, 100%, 50%)"},F("div",{class:"color-picker-sb-spectrum-handle"}))))},init:function(t){var r=t.app,a,n,i,s,o,l,u,c,d,p,f,h,m=t.$el;function g(C,E){var $=u.left+u.width/2,N=u.top+u.height/2,I=Math.atan2(E-N,C-$),S=I*180/Math.PI+90;S<0&&(S+=360),S=360-S,t.setValue({hue:S})}function v(C,E){var $=(C-p.left)/p.width,N=(E-p.top)/p.height;$=Math.max(0,Math.min(1,$)),N=1-Math.max(0,Math.min(1,N)),t.setValue({hsb:[t.value.hue,$,N]})}function b(C){if(!(n||a)){i=C.type==="touchstart"?C.targetTouches[0].pageX:C.pageX,o=i,s=C.type==="touchstart"?C.targetTouches[0].pageY:C.pageY,l=s;var E=T(C.target);d=E.closest(".color-picker-wheel-handle").length>0,c=E.closest("circle").length>0,h=E.closest(".color-picker-sb-spectrum-handle").length>0,h||(f=E.closest(".color-picker-sb-spectrum").length>0),c&&(u=m.find(".color-picker-wheel")[0].getBoundingClientRect(),g(i,s)),f&&(p=m.find(".color-picker-sb-spectrum")[0].getBoundingClientRect(),v(i,s)),(h||f)&&m.find(".color-picker-sb-spectrum-handle").addClass("color-picker-sb-spectrum-handle-pressed")}}function y(C){!(c||d)&&!(f||h)||(o=C.type==="touchmove"?C.targetTouches[0].pageX:C.pageX,l=C.type==="touchmove"?C.targetTouches[0].pageY:C.pageY,C.preventDefault(),n||(n=!0,d&&(u=m.find(".color-picker-wheel")[0].getBoundingClientRect()),h&&(p=m.find(".color-picker-sb-spectrum")[0].getBoundingClientRect())),(c||d)&&g(o,l),(f||h)&&v(o,l))}function w(){n=!1,(f||h)&&m.find(".color-picker-sb-spectrum-handle").removeClass("color-picker-sb-spectrum-handle-pressed"),c=!1,d=!1,f=!1,h=!1}function x(){t.modules.wheel.update(t)}var k=r.touchEvents.start==="touchstart"&&Ft().passiveListener?{passive:!0,capture:!1}:!1;t.$el.on(r.touchEvents.start,b,k),r.on("touchmove:active",y),r.on("touchend:passive",w),r.on("resize",x),t.destroyWheelEvents=function(){t.$el.off(r.touchEvents.start,b,k),r.off("touchmove:active",y),r.off("touchend:passive",w),r.off("resize",x)}},update:function(t){var r=t.value,a=r.hsl,n=r.hsb,i=t.$el.find(".color-picker-sb-spectrum")[0].offsetWidth,s=t.$el.find(".color-picker-sb-spectrum")[0].offsetHeight,o=t.$el.find(".color-picker-wheel")[0].offsetWidth,l=o/2,u=r.hue*Math.PI/180,c=o/6,d=c/2,p=l-Math.sin(u)*(l-d)-d,f=l-Math.cos(u)*(l-d)-d;t.$el.find(".color-picker-wheel-handle").css("background-color","hsl("+a[0]+", 100%, 50%)").transform("translate("+p+"px, "+f+"px)"),t.$el.find(".color-picker-sb-spectrum").css("background-color","hsl("+a[0]+", 100%, 50%)"),t.$el.find(".color-picker-sb-spectrum-handle").css("background-color","hsl("+a[0]+", "+a[1]*100+"%, "+a[2]*100+"%)").transform("translate("+i*n[1]+"px, "+s*(1-n[2])+"px)")},destroy:function(t){t.destroyWheelEvents&&t.destroyWheelEvents(),delete t.destroyWheelEvents}};function $N(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function lq(e,t,r){return t&&$N(e.prototype,t),r&&$N(e,r),e}function Dw(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function uq(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,_1(e,t)}function _1(e,t){return _1=Object.setPrototypeOf||function(a,n){return a.__proto__=n,a},_1(e,t)}var cq=function(e){uq(t,e);function t(a,n){var i;n===void 0&&(n={}),i=e.call(this,n,[a])||this;var s=Dw(i);s.params=se({},a.params.colorPicker,n);var o;if(s.params.containerEl&&(o=T(s.params.containerEl),o.length===0))return s||Dw(i);var l;s.params.inputEl&&(l=T(s.params.inputEl));var u;s.params.targetEl&&(u=T(s.params.targetEl)),se(s,{app:a,$containerEl:o,containerEl:o&&o[0],inline:o&&o.length>0,$inputEl:l,inputEl:l&&l[0],$targetEl:u,targetEl:u&&u[0],initialized:!1,opened:!1,url:s.params.url,modules:{"alpha-slider":XG,"current-color":YG,hex:KG,"hsb-sliders":ZG,"hue-slider":QG,"brightness-slider":JG,palette:eq,"initial-current-colors":tq,"rgb-bars":rq,"rgb-sliders":nq,"sb-spectrum":aq,"hs-spectrum":iq,wheel:oq}});function c(){s.open()}function d(h){h.preventDefault()}function p(){s.open()}function f(h){if(!(s.destroyed||!s.params)&&s.params.openIn!=="page"){var m=T(h.target);!s.opened||s.closing||m.closest('[class*="backdrop"]').length||m.closest(".color-picker-popup, .color-picker-popover").length||(l&&l.length>0?m[0]!==l[0]&&m.closest(".sheet-modal").length===0&&s.close():T(h.target).closest(".sheet-modal").length===0&&s.close())}}return se(s,{attachInputEvents:function(){s.$inputEl.on("click",c),s.params.inputReadOnly&&(s.$inputEl.on("focus mousedown",d),s.$inputEl[0]&&(s.$inputEl[0].f7ValidateReadonly=!0))},detachInputEvents:function(){s.$inputEl.off("click",c),s.params.inputReadOnly&&(s.$inputEl.off("focus mousedown",d),s.$inputEl[0]&&delete s.$inputEl[0].f7ValidateReadonly)},attachTargetEvents:function(){s.$targetEl.on("click",p)},detachTargetEvents:function(){s.$targetEl.off("click",p)},attachHtmlEvents:function(){a.on("click",f)},detachHtmlEvents:function(){a.off("click",f)}}),s.init(),s||Dw(i)}var r=t.prototype;return r.attachEvents=function(){var n=this;n.centerModules=n.centerModules.bind(n),n.params.centerModules&&n.app.on("resize",n.centerModules)},r.detachEvents=function(){var n=this;n.params.centerModules&&n.app.off("resize",n.centerModules)},r.centerModules=function(){var n=this;if(!(!n.opened||!n.$el||n.inline)){var i=n.$el.find(".page-content");if(!!i.length){var s=i[0],o=s.scrollHeight,l=s.offsetHeight;o<=l?i.addClass("justify-content-center"):i.removeClass("justify-content-center")}}},r.initInput=function(){var n=this;!n.$inputEl||n.params.inputReadOnly&&n.$inputEl.prop("readOnly",!0)},r.getModalType=function(){var n=this,i=n.app,s=n.modal,o=n.params,l=o.openIn,u=o.openInPhone,c=Ct();return s&&s.type?s.type:l!=="auto"?l:n.inline?null:c.ios?c.ipad?"popover":u:i.width>=768||c.desktop&&i.theme==="aurora"?"popover":u},r.formatValue=function(){var n=this,i=n.value;return n.params.formatValue?n.params.formatValue.call(n,i):i.hex},r.normalizeHsValues=function(n){return[Math.floor(n[0]*10)/10,Math.floor(n[1]*1e3)/1e3,Math.floor(n[2]*1e3)/1e3]},r.setValue=function(n,i){n===void 0&&(n={}),i===void 0&&(i=!0);var s=this;if(typeof n!="undefined"){var o=s.value||{},l=o.hex,u=o.rgb,c=o.hsl,d=o.hsb,p=o.alpha,f=p===void 0?1:p,h=o.hue,m=o.rgba,g=o.hsla,v=s.value||!s.value&&!s.params.value,b;if(Object.keys(n).forEach(function(Y){if(!s.value||typeof s.value[Y]=="undefined"){b=!0;return}var K=n[Y];Array.isArray(K)?K.forEach(function(Z,le){Z!==s.value[Y][le]&&(b=!0)}):K!==s.value[Y]&&(b=!0)}),!!b){if(n.rgb||n.rgba){var y=n.rgb||n.rgba,w=y[0],x=y[1],k=y[2],C=y[3],E=C===void 0?f:C;u=[w,x,k],l=qi.apply(void 0,u),c=Ov.apply(void 0,u),d=lf.apply(void 0,c),c=s.normalizeHsValues(c),d=s.normalizeHsValues(d),h=d[0],f=E,m=[u[0],u[1],u[2],E],g=[c[0],c[1],c[2],E]}if(n.hsl||n.hsla){var $=n.hsl||n.hsla,N=$[0],I=$[1],S=$[2],A=$[3],R=A===void 0?f:A;c=[N,I,S],u=xc.apply(void 0,c),l=qi.apply(void 0,u),d=lf.apply(void 0,c),c=s.normalizeHsValues(c),d=s.normalizeHsValues(d),h=d[0],f=R,m=[u[0],u[1],u[2],R],g=[c[0],c[1],c[2],R]}if(n.hsb){var O=n.hsb,D=O[0],z=O[1],U=O[2],j=O[3],G=j===void 0?f:j;d=[D,z,U],c=es.apply(void 0,d),u=xc.apply(void 0,c),l=qi.apply(void 0,u),c=s.normalizeHsValues(c),d=s.normalizeHsValues(d),h=d[0],f=G,m=[u[0],u[1],u[2],G],g=[c[0],c[1],c[2],G]}if(n.hex&&(u=KE(n.hex),l=qi.apply(void 0,u),c=Ov.apply(void 0,u),d=lf.apply(void 0,c),c=s.normalizeHsValues(c),d=s.normalizeHsValues(d),h=d[0],m=[u[0],u[1],u[2],f],g=[c[0],c[1],c[2],f]),typeof n.alpha!="undefined"&&(f=n.alpha,typeof u!="undefined"&&(m=[u[0],u[1],u[2],f]),typeof c!="undefined"&&(g=[c[0],c[1],c[2],f])),typeof n.hue!="undefined"){var L=c;L[0];var V=L[1],H=L[2];c=[n.hue,V,H],d=lf.apply(void 0,c),u=xc.apply(void 0,c),l=qi.apply(void 0,u),c=s.normalizeHsValues(c),d=s.normalizeHsValues(d),h=d[0],m=[u[0],u[1],u[2],f],g=[c[0],c[1],c[2],f]}s.value={hex:l,alpha:f,hue:h,rgb:u,hsl:c,hsb:d,rgba:m,hsla:g},s.initialValue||(s.initialValue=se({},s.value)),s.updateValue(v),s.opened&&i&&s.updateModules()}}},r.getValue=function(){var n=this;return n.value},r.updateValue=function(n){n===void 0&&(n=!0);var i=this,s=i.$inputEl,o=i.value,l=i.$targetEl;if(l&&i.params.targetElSetBackgroundColor){var u=o.rgba;l.css("background-color","rgba("+u.join(", ")+")")}if(n&&i.emit("local::change colorPickerChange",i,o),s&&s.length){var c=i.formatValue(o);s&&s.length&&(s.val(c),n&&s.trigger("change"))}},r.updateModules=function(){var n=this,i=n.modules;n.params.modules.forEach(function(s){typeof s=="string"&&i[s]&&i[s].update?i[s].update(n):s&&s.update&&s.update(n)})},r.update=function(){var n=this;n.updateModules()},r.renderPicker=function(){var n=this,i=n.params,s=n.modules,o="";return i.modules.forEach(function(l){typeof l=="string"&&s[l]&&s[l].render?o+=s[l].render(n):l&&l.render&&(o+=l.render(n))}),o},r.renderNavbar=function(){var n=this;if(n.params.renderNavbar)return n.params.renderNavbar.call(n,n);var i=n.params,s=i.openIn,o=i.navbarTitleText,l=i.navbarBackLinkText,u=i.navbarCloseText;return F("div",{class:"navbar"},F("div",{class:"navbar-bg"}),F("div",{class:"navbar-inner sliding"},s==="page"&&F("div",{class:"left"},F("a",{class:"link back"},F("i",{class:"icon icon-back"}),F("span",{class:"if-not-md"},l))),F("div",{class:"title"},o),s!=="page"&&F("div",{class:"right"},F("a",{class:"link popup-close","data-popup":".color-picker-popup"},u))))},r.renderToolbar=function(){var n=this;return n.params.renderToolbar?n.params.renderToolbar.call(n,n):F("div",{class:"toolbar toolbar-top no-shadow"},F("div",{class:"toolbar-inner"},F("div",{class:"left"}),F("div",{class:"right"},F("a",{class:"link sheet-close popover-close","data-sheet":".color-picker-sheet-modal","data-popover":".color-picker-popover"},n.params.toolbarCloseText))))},r.renderInline=function(){var n=this,i=n.params,s=i.cssClass,o=i.groupedModules;return F("div",{class:"color-picker color-picker-inline "+(o?"color-picker-grouped-modules":"")+" "+(s||"")},n.renderPicker())},r.renderSheet=function(){var n=this,i=n.params,s=i.cssClass,o=i.toolbarSheet,l=i.groupedModules;return F("div",{class:"sheet-modal color-picker color-picker-sheet-modal "+(l?"color-picker-grouped-modules":"")+" "+(s||"")},o&&n.renderToolbar(),F("div",{class:"sheet-modal-inner"},F("div",{class:"page-content"},n.renderPicker())))},r.renderPopover=function(){var n=this,i=n.params,s=i.cssClass,o=i.toolbarPopover,l=i.groupedModules;return F("div",{class:"popover color-picker-popover "+(s||"")},F("div",{class:"popover-inner"},F("div",{class:"color-picker "+(l?"color-picker-grouped-modules":"")},o&&n.renderToolbar(),F("div",{class:"page-content"},n.renderPicker()))))},r.renderPopup=function(){var n=this,i=n.params,s=i.cssClass,o=i.navbarPopup,l=i.groupedModules;return F("div",{class:"popup color-picker-popup "+(s||"")},F("div",{class:"page"},o&&n.renderNavbar(),F("div",{class:"color-picker "+(l?"color-picker-grouped-modules":"")},F("div",{class:"page-content"},n.renderPicker()))))},r.renderPage=function(){var n=this,i=n.params,s=i.cssClass,o=i.groupedModules;return F("div",{class:"page color-picker-page "+(s||""),"data-name":"color-picker-page"},n.renderNavbar(),F("div",{class:"color-picker "+(o?"color-picker-grouped-modules":"")},F("div",{class:"page-content"},n.renderPicker())))},r.render=function(){var n=this,i=n.params;if(i.render)return i.render.call(n);if(n.inline)return n.renderInline();if(i.openIn==="page")return n.renderPage();var s=n.getModalType();if(s==="popover")return n.renderPopover();if(s==="sheet")return n.renderSheet();if(s==="popup")return n.renderPopup()},r.onOpen=function(){var n=this,i=n.initialized,s=n.$el,o=n.app,l=n.$inputEl,u=n.inline,c=n.value,d=n.params,p=n.modules;n.closing=!1,n.opened=!0,n.opening=!0,n.attachEvents(),d.modules.forEach(function(h){typeof h=="string"&&p[h]&&p[h].init?p[h].init(n):h&&h.init&&h.init(n)});var f=!c&&d.value;i?c&&(n.initialValue=se({},c),n.setValue(c,!1)):c?n.setValue(c):d.value?n.setValue(d.value,!1):d.value||n.setValue({hex:"#ff0000"},!1),f&&n.updateValue(),n.updateModules(),d.centerModules&&n.centerModules(),!u&&l&&l.length&&o.theme==="md"&&l.trigger("focus"),n.initialized=!0,s&&s.trigger("colorpicker:open"),l&&l.trigger("colorpicker:open"),n.emit("local::open colorPickerOpen",n)},r.onOpened=function(){var n=this;n.opening=!1,n.$el&&n.$el.trigger("colorpicker:opened"),n.$inputEl&&n.$inputEl.trigger("colorpicker:opened"),n.emit("local::opened colorPickerOpened",n)},r.onClose=function(){var n=this,i=n.app,s=n.params,o=n.modules;if(n.opening=!1,n.closing=!0,n.detachEvents(),n.$inputEl)if(i.theme==="md")n.$inputEl.trigger("blur");else{var l=n.$inputEl.attr("validate"),u=n.$inputEl.attr("required");l&&u&&i.input.validate(n.$inputEl)}s.modules.forEach(function(c){typeof c=="string"&&o[c]&&o[c].destroy?o[c].destroy(n):c&&c.destroy&&c.destroy(n)}),n.$el&&n.$el.trigger("colorpicker:close"),n.$inputEl&&n.$inputEl.trigger("colorpicker:close"),n.emit("local::close colorPickerClose",n)},r.onClosed=function(){var n=this;n.opened=!1,n.closing=!1,n.inline||qr(function(){n.modal&&n.modal.el&&n.modal.destroy&&(n.params.routableModals||n.modal.destroy()),delete n.modal}),n.$el&&n.$el.trigger("colorpicker:closed"),n.$inputEl&&n.$inputEl.trigger("colorpicker:closed"),n.emit("local::closed colorPickerClosed",n)},r.open=function(){var n=this,i=n.app,s=n.opened,o=n.inline,l=n.$inputEl,u=n.$targetEl,c=n.params;if(!s){if(o){n.$el=T(n.render()),n.$el[0].f7ColorPicker=n,n.$containerEl.append(n.$el),n.onOpen(),n.onOpened();return}var d=n.render();if(c.openIn==="page")n.view.router.navigate({url:n.url,route:{content:d,path:n.url,on:{pageBeforeIn:function(v,b){n.$el=b.$el.find(".color-picker"),n.$el[0].f7ColorPicker=n,n.onOpen()},pageAfterIn:function(){n.onOpened()},pageBeforeOut:function(){n.onClose()},pageAfterOut:function(){n.onClosed(),n.$el&&n.$el[0]&&(n.$el[0].f7ColorPicker=null,delete n.$el[0].f7ColorPicker)}}}});else{var p=n.getModalType(),f=c.backdrop;(f===null||typeof f=="undefined")&&(p==="popover"&&i.params.popover.backdrop!==!1&&(f=!0),p==="popup"&&(f=!0));var h={targetEl:u||l,scrollToEl:c.scrollToInput?u||l:void 0,content:d,backdrop:f,closeByBackdropClick:c.closeByBackdropClick,on:{open:function(){var v=this;n.modal=v,n.$el=p==="popover"||p==="popup"?v.$el.find(".color-picker"):v.$el,n.$el[0].f7ColorPicker=n,n.onOpen()},opened:function(){n.onOpened()},close:function(){n.onClose()},closed:function(){n.onClosed(),n.$el&&n.$el[0]&&(n.$el[0].f7ColorPicker=null,delete n.$el[0].f7ColorPicker)}}};if(p==="popup"&&(h.push=c.popupPush,h.swipeToClose=c.popupSwipeToClose),p==="sheet"&&(h.push=c.sheetPush,h.swipeToClose=c.sheetSwipeToClose),c.routableModals&&n.view){var m;n.view.router.navigate({url:n.url,route:(m={path:n.url},m[p]=h,m)})}else n.modal=i[p].create(h),n.modal.open()}}},r.close=function(){var n=this,i=n.opened,s=n.inline;if(!!i){if(s){n.onClose(),n.onClosed();return}n.params.routableModals&&n.view||n.params.openIn==="page"?n.view.router.back():n.modal.close()}},r.init=function(){var n=this;if(n.initInput(),n.inline){n.open(),n.emit("local::init colorPickerInit",n);return}!n.initialized&&n.params.value&&n.setValue(n.params.value),n.$inputEl&&n.attachInputEvents(),n.$targetEl&&n.attachTargetEvents(),n.params.closeByOutsideClick&&n.attachHtmlEvents(),n.emit("local::init colorPickerInit",n)},r.destroy=function(){var n=this;if(!n.destroyed){var i=n.$el;n.emit("local::beforeDestroy colorPickerBeforeDestroy",n),i&&i.trigger("colorpicker:beforedestroy"),n.close(),n.detachEvents(),n.$inputEl&&n.detachInputEvents(),n.$targetEl&&n.detachTargetEvents(),n.params.closeByOutsideClick&&n.detachHtmlEvents(),i&&i.length&&delete n.$el[0].f7ColorPicker,$r(n),n.destroyed=!0}},lq(t,[{key:"view",get:function(){var n=this.$inputEl,i=this.$targetEl,s=this.app,o=this.params,l;return o.view?l=o.view:(n&&(l=n.parents(".view").length&&n.parents(".view")[0].f7View),!l&&i&&(l=i.parents(".view").length&&i.parents(".view")[0].f7View)),l||(l=s.views.main),l}}]),t}(rr),IN=cq,dq={name:"colorPicker",static:{ColorPicker:IN},create:function(){var t=this;t.colorPicker=Ir({defaultSelector:".color-picker",constructor:IN,app:t,domProp:"f7ColorPicker"}),t.colorPicker.close=function(a){a===void 0&&(a=".color-picker");var n=T(a);if(n.length!==0){var i=n[0].f7ColorPicker;!i||i&&!i.opened||i.close()}}},params:{colorPicker:{value:null,modules:["wheel"],palette:[["#FFEBEE","#FFCDD2","#EF9A9A","#E57373","#EF5350","#F44336","#E53935","#D32F2F","#C62828","#B71C1C"],["#F3E5F5","#E1BEE7","#CE93D8","#BA68C8","#AB47BC","#9C27B0","#8E24AA","#7B1FA2","#6A1B9A","#4A148C"],["#E8EAF6","#C5CAE9","#9FA8DA","#7986CB","#5C6BC0","#3F51B5","#3949AB","#303F9F","#283593","#1A237E"],["#E1F5FE","#B3E5FC","#81D4FA","#4FC3F7","#29B6F6","#03A9F4","#039BE5","#0288D1","#0277BD","#01579B"],["#E0F2F1","#B2DFDB","#80CBC4","#4DB6AC","#26A69A","#009688","#00897B","#00796B","#00695C","#004D40"],["#F1F8E9","#DCEDC8","#C5E1A5","#AED581","#9CCC65","#8BC34A","#7CB342","#689F38","#558B2F","#33691E"],["#FFFDE7","#FFF9C4","#FFF59D","#FFF176","#FFEE58","#FFEB3B","#FDD835","#FBC02D","#F9A825","#F57F17"],["#FFF3E0","#FFE0B2","#FFCC80","#FFB74D","#FFA726","#FF9800","#FB8C00","#F57C00","#EF6C00","#E65100"]],groupedModules:!1,centerModules:!0,sliderLabel:!1,sliderValue:!1,sliderValueEdiable:!1,barLabel:!1,barValue:!1,barValueEdiable:!1,hexLabel:!1,hexValueEditable:!1,redLabelText:"R",greenLabelText:"G",blueLabelText:"B",hueLabelText:"H",saturationLabelText:"S",brightnessLabelText:"B",hexLabelText:"HEX",alphaLabelText:"A",containerEl:null,openIn:"popover",openInPhone:"popup",popupPush:!1,popupSwipeToClose:void 0,sheetPush:!1,sheetSwipeToClose:void 0,formatValue:null,targetEl:null,targetElSetBackgroundColor:!1,inputEl:null,inputReadOnly:!0,closeByOutsideClick:!0,scrollToInput:!0,toolbarSheet:!0,toolbarPopover:!1,toolbarCloseText:"Done",navbarPopup:!0,navbarCloseText:"Done",navbarTitleText:"Color",navbarBackLinkText:"Back",cssClass:null,routableModals:!1,view:null,url:"color/",backdrop:null,closeByBackdropClick:!0,renderToolbar:null,renderNavbar:null,renderInline:null,renderPopover:null,renderSheet:null,renderPopup:null,render:null}}},pq={open:function(t){var r=this,a=T(t).eq(0);if(!a.length)return;a.addClass("treeview-item-opened"),a.trigger("treeview:open"),r.emit("treeviewOpen",a[0]);function n(s){s?(a.removeClass("treeview-item-opened"),a.trigger("treeview:close"),r.emit("treeviewClose",a[0])):a[0].f7TreeviewChildrenLoaded=!0,a.find(".treeview-toggle").removeClass("treeview-toggle-hidden"),a.find(".treeview-preloader").remove()}if(a.hasClass("treeview-load-children")&&!a[0].f7TreeviewChildrenLoaded){var i={iosPreloaderContent:Jo,mdPreloaderContent:Qo,auroraPreloaderContent:el};a.trigger("treeview:loadchildren",n),r.emit("treeviewLoadChildren",a[0],n),a.find(".treeview-toggle").addClass("treeview-toggle-hidden"),a.find(".treeview-item-root").prepend('<div class="preloader treeview-preloader">'+i[r.theme+"PreloaderContent"]+"</div>")}},close:function(t){var r=this,a=T(t).eq(0);!a.length||(a.removeClass("treeview-item-opened"),a.trigger("treeview:close"),r.emit("treeviewClose",a[0]))},toggle:function(t){var r=this,a=T(t).eq(0);if(!!a.length){var n=a.hasClass("treeview-item-opened");r.treeview[n?"close":"open"](a)}}},fq={name:"treeview",create:function(){var t=this;En(t,{treeview:pq})},clicks:{".treeview-toggle":function(t,r,a){var n=this;if(!t.parents(".treeview-item-toggle").length){var i=t.parents(".treeview-item").eq(0);!i.length||(a.preventF7Router=!0,n.treeview.toggle(i[0]))}},".treeview-item-toggle":function(t,r,a){var n=this,i=t.closest(".treeview-item").eq(0);!i.length||(a.preventF7Router=!0,n.treeview.toggle(i[0]))}}};function Kp(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hq(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,M1(e,t)}function M1(e,t){return M1=Object.setPrototypeOf||function(a,n){return a.__proto__=n,a},M1(e,t)}var yg={bold:["bold","format_bold","bold"],italic:["italic","format_italic","italic"],underline:["underline","format_underlined","underline"],strikeThrough:["strikethrough","strikethrough_s","strikeThrough"],orderedList:["list_number","format_list_numbered","insertOrderedList"],unorderedList:["list_bullet","format_list_bulleted","insertUnorderedList"],link:["link","link","createLink"],image:["photo","image","insertImage"],paragraph:["paragraph",'<i class="icon">\xB6</i>',"formatBlock.P"],h1:['<i class="icon">H<sub>1</sub></i>','<i class="icon">H<sub>1</sub></i>',"formatBlock.H1"],h2:['<i class="icon">H<sub>2</sub></i>','<i class="icon">H<sub>2</sub></i>',"formatBlock.H2"],h3:['<i class="icon">H<sub>3</sub></i>','<i class="icon">H<sub>3</sub></i>',"formatBlock.H3"],alignLeft:["text_alignleft","format_align_left","justifyLeft"],alignCenter:["text_aligncenter","format_align_center","justifyCenter"],alignRight:["text_alignright","format_align_right","justifyRight"],alignJustify:["text_justify","format_align_justify","justifyFull"],subscript:["textformat_subscript",'<i class="icon">A<sub>1</sub></i>',"subscript"],superscript:["textformat_superscript",'<i class="icon">A<sup>1</sup></i>',"superscript"],indent:["increase_indent","format_indent_increase","indent"],outdent:["decrease_indent","format_indent_decrease","outdent"]},mq=function(e){hq(t,e);function t(a,n){var i;i=e.call(this,n,[a])||this;var s=Kp(i),o=nt(),l=Ct(),u=se({},a.params.textEditor);s.useModulesParams(u),s.params=se(u,n);var c=s.params.el;if(!c)return s||Kp(i);var d=T(c);if(d.length===0)return s||Kp(i);if(d[0].f7TextEditor)return d[0].f7TextEditor||Kp(i);var p=d.children(".text-editor-content");if(p.length||(d.append('<div class="text-editor-content" contenteditable></div>'),p=d.children(".text-editor-content")),se(s,{app:a,$el:d,el:d[0],$contentEl:p,contentEl:p[0]}),"value"in n&&(s.value=s.params.value),s.params.mode==="keyboard-toolbar"&&!(l.cordova||l.capacitor)&&!l.android&&(s.params.mode="popover"),typeof s.params.buttons=="string")try{s.params.buttons=JSON.parse(s.params.buttons)}catch{throw new Error('Framework7: TextEditor: wrong "buttons" parameter format')}return d[0].f7TextEditor=s,s.onButtonClick=s.onButtonClick.bind(s),s.onFocus=s.onFocus.bind(s),s.onBlur=s.onBlur.bind(s),s.onInput=s.onInput.bind(s),s.onPaste=s.onPaste.bind(s),s.onSelectionChange=s.onSelectionChange.bind(s),s.closeKeyboardToolbar=s.closeKeyboardToolbar.bind(s),s.attachEvents=function(){s.params.mode==="toolbar"&&s.$el.find(".text-editor-toolbar").on("click","button",s.onButtonClick),s.params.mode==="keyboard-toolbar"&&(s.$keyboardToolbarEl.on("click","button",s.onButtonClick),s.$el.parents(".page").on("page:beforeout",s.closeKeyboardToolbar)),s.params.mode==="popover"&&s.popover&&s.popover.$el.on("click","button",s.onButtonClick),s.$contentEl.on("paste",s.onPaste),s.$contentEl.on("focus",s.onFocus),s.$contentEl.on("blur",s.onBlur),s.$contentEl.on("input",s.onInput,!0),T(o).on("selectionchange",s.onSelectionChange)},s.detachEvents=function(){s.params.mode==="toolbar"&&s.$el.find(".text-editor-toolbar").off("click","button",s.onButtonClick),s.params.mode==="keyboard-toolbar"&&(s.$keyboardToolbarEl.off("click","button",s.onButtonClick),s.$el.parents(".page").off("page:beforeout",s.closeKeyboardToolbar)),s.params.mode==="popover"&&s.popover&&s.popover.$el.off("click","button",s.onButtonClick),s.$contentEl.off("paste",s.onPaste),s.$contentEl.off("focus",s.onFocus),s.$contentEl.off("blur",s.onBlur),s.$contentEl.off("input",s.onInput,!0),T(o).off("selectionchange",s.onSelectionChange)},s.useModules(),s.init(),s||Kp(i)}var r=t.prototype;return r.setValue=function(n){var i=this,s=i.value;return s===n||(i.value=n,i.$contentEl.html(n),i.$el.trigger("texteditor:change",i.value),i.emit("local::change textEditorChange",i,i.value)),i},r.getValue=function(){var n=this;return n.value},r.clearValue=function(){var n=this;return n.setValue(""),n.params.placeholder&&!n.$contentEl.html()&&n.insertPlaceholder(),n},r.createLink=function(){var n=this,i=De(),s=nt(),o=i.getSelection(),l=[],u;if(o&&o.anchorNode&&T(o.anchorNode).parents(n.$el).length){for(var c=o.anchorNode;c;)l.push(c),(!c.nextSibling||c===o.focusNode)&&(c=null),c&&(c=c.nextSibling);for(var d=[],p=T(l),f=0;f<p.length;f+=1){var h=p[f].children;if(h)for(var m=0;m<h.length;m+=1)T(h[m]).is("a")&&d.push(h[m])}u=p.closest("a").add(T(d))}if(u&&u.length)return u.each(function(b){var y=i.getSelection(),w=s.createRange();w.selectNodeContents(b),y.removeAllRanges(),y.addRange(w),s.execCommand("unlink",!1),y.removeAllRanges()}),n;var g=n.getSelectionRange();if(!g)return n;var v=n.app.dialog.prompt(n.params.linkUrlText,"",function(b){b&&b.trim().length&&(n.setSelectionRange(g),s.execCommand("createLink",!1,b.trim()),n.$el.trigger("texteditor:insertlink",{url:b.trim()}),n.emit("local:insertLink textEditorInsertLink",n,b.trim()))});return v.$el.find("input").focus(),n},r.insertImage=function(){var n=this,i=nt(),s=n.getSelectionRange();if(!s)return n;var o=n.app.dialog.prompt(n.params.imageUrlText,"",function(l){l&&l.trim().length&&(n.setSelectionRange(s),i.execCommand("insertImage",!1,l.trim()),n.$el.trigger("texteditor:insertimage",{url:l.trim()}),n.emit("local:insertImage textEditorInsertImage",n,l.trim()))});return o.$el.find("input").focus(),n},r.removePlaceholder=function(){var n=this;n.$contentEl.find(".text-editor-placeholder").remove()},r.insertPlaceholder=function(){var n=this;n.$contentEl.append('<div class="text-editor-placeholder">'+n.params.placeholder+"</div>")},r.onSelectionChange=function(){var n=this,i=De(),s=nt();if(n.params.mode!=="toolbar"){var o=i.getSelection(),l=T(o.anchorNode).parents(n.contentEl).length||o.anchorNode===n.contentEl;if(n.params.mode==="keyboard-toolbar"){l?n.openKeyboardToolbar():n.closeKeyboardToolbar();return}if(n.params.mode==="popover"){var u=T(o.anchorNode).parents(n.popover.el).length||o.anchorNode===n.popover.el;if(!l&&!u){n.closePopover();return}if(!o.isCollapsed&&o.rangeCount){var c=o.getRangeAt(0),d=c.getBoundingClientRect(),p=n.app.$el[0]||s.body;n.openPopover(d.x+(i.scrollX||0)-p.offsetLeft,d.y+(i.scrollY||0)-p.offsetTop,d.width,d.height)}else o.isCollapsed&&n.closePopover()}}},r.onPaste=function(n){var i=this,s=nt();if(i.params.clearFormattingOnPaste&&n.clipboardData&&n.clipboardData.getData){var o=n.clipboardData.getData("text/plain");n.preventDefault(),s.execCommand("insertText",!1,o)}},r.onInput=function(){var n=this,i=n.$contentEl.html();n.value=i,n.$el.trigger("texteditor:input"),n.emit("local:input textEditorInput",n,n.value),n.$el.trigger("texteditor:change",n.value),n.emit("local::change textEditorChange",n,n.value)},r.onFocus=function(){var n=this;n.removePlaceholder(),n.$contentEl.focus(),n.$el.trigger("texteditor:focus"),n.emit("local::focus textEditorFocus",n)},r.onBlur=function(){var n=this,i=De(),s=nt();if(n.params.placeholder&&n.$contentEl.html()===""&&n.insertPlaceholder(),n.params.mode==="popover"){var o=i.getSelection(),l=T(o.anchorNode).parents(n.contentEl).length||o.anchorNode===n.contentEl,u=s.activeElement&&n.popover&&T(s.activeElement).closest(n.popover.$el).length;!u&&!l&&n.closePopover()}if(n.params.mode==="keyboard-toolbar"){var c=i.getSelection(),d=T(c.anchorNode).parents(n.contentEl).length||c.anchorNode===n.contentEl;d||n.closeKeyboardToolbar()}n.$el.trigger("texteditor:blur"),n.emit("local::blur textEditorBlur",n)},r.onButtonClick=function(n){var i=this,s=De(),o=nt(),l=s.getSelection(),u=T(l.anchorNode).parents(i.contentEl).length||l.anchorNode===i.contentEl;if(!!u){var c=T(n.target).closest("button");c.parents("form").length&&n.preventDefault();var d=c.attr("data-button"),p=i.params.customButtons&&i.params.customButtons[d];if(!(!d||!(yg[d]||p))){if(c.trigger("texteditor:buttonclick",d),i.emit("local::buttonClick textEditorButtonClick",i,d),p){p.onClick&&p.onClick(i,c[0]);return}var f=yg[d][2];if(f==="createLink"){i.createLink();return}if(f==="insertImage"){i.insertImage();return}if(f.indexOf("formatBlock")===0){var h=f.split(".")[1],m=T(l.anchorNode);m.parents(h.toLowerCase()).length||m.is(h)?o.execCommand("formatBlock",!1,"div"):o.execCommand("formatBlock",!1,h);return}o.execCommand(f,!1)}}},r.getSelectionRange=function(){var n=De(),i=nt();if(n.getSelection){var s=n.getSelection();if(s.getRangeAt&&s.rangeCount)return s.getRangeAt(0)}else if(i.selection&&i.selection.createRange)return i.selection.createRange();return null},r.setSelectionRange=function(n){var i=De(),s=nt();if(n)if(i.getSelection){var o=i.getSelection();o.removeAllRanges(),o.addRange(n)}else s.selection&&n.select&&n.select()},r.renderButtons=function(){var n=this,i="";function s(o){var l=n.app.theme==="md"?"material-icons":"f7-icons";if(n.params.customButtons&&n.params.customButtons[o]){var u=n.params.customButtons[o];return'<button type="button" class="text-editor-button" data-button="'+o+'">'+(u.content||"")+"</button>"}if(!yg[o])return"";var c=yg[o][n.app.theme==="md"?1:0];return('<button type="button" class="text-editor-button" data-button="'+o+'">'+(c.indexOf("<")>=0?c:'<i class="'+l+'">'+c+"</i>")+"</button>").trim()}return n.params.buttons.forEach(function(o,l){Array.isArray(o)?(o.forEach(function(u){i+=s(u)}),l<n.params.buttons.length-1&&n.params.dividers&&(i+='<div class="text-editor-button-divider"></div>')):i+=s(o)}),i},r.createToolbar=function(){var n=this;n.$el.prepend('<div class="text-editor-toolbar">'+n.renderButtons()+"</div>")},r.createKeyboardToolbar=function(){var n=this;n.$keyboardToolbarEl=T('<div class="toolbar toolbar-bottom text-editor-keyboard-toolbar"><div class="toolbar-inner">'+n.renderButtons()+"</div></div>")},r.createPopover=function(){var n=this;n.popover=n.app.popover.create({content:`
        <div class="popover theme-dark text-editor-popover">
          <div class="popover-inner">`+n.renderButtons()+`</div>
        </div>
      `,closeByOutsideClick:!1,backdrop:!1})},r.openKeyboardToolbar=function(){var n=this;n.$keyboardToolbarEl.parent(n.app.$el).length||(n.$el.trigger("texteditor:keyboardopen"),n.emit("local::keyboardOpen textEditorKeyboardOpen",n),n.app.$el.append(n.$keyboardToolbarEl))},r.closeKeyboardToolbar=function(){var n=this;n.$keyboardToolbarEl.remove(),n.$el.trigger("texteditor:keyboardclose"),n.emit("local::keyboardClose textEditorKeyboardClose",n)},r.openPopover=function(n,i,s,o){var l=this;!l.popover||(Object.assign(l.popover.params,{targetX:n,targetY:i,targetWidth:s,targetHeight:o}),clearTimeout(l.popoverTimeout),l.popoverTimeout=setTimeout(function(){!l.popover||(l.popover.opened?l.popover.resize():(l.$el.trigger("texteditor:popoveropen"),l.emit("local::popoverOpen textEditorPopoverOpen",l),l.popover.open()))},400))},r.closePopover=function(){var n=this;clearTimeout(n.popoverTimeout),!(!n.popover||!n.popover.opened)&&(n.popoverTimeout=setTimeout(function(){!n.popover||(n.$el.trigger("texteditor:popoverclose"),n.emit("local::popoverClose textEditorPopoverClose",n),n.popover.close())},400))},r.init=function(){var n=this;return n.value?n.$contentEl.html(n.value):n.value=n.$contentEl.html(),n.params.placeholder&&n.value===""&&n.insertPlaceholder(),n.params.mode==="toolbar"?n.createToolbar():n.params.mode==="popover"?n.createPopover():n.params.mode==="keyboard-toolbar"&&n.createKeyboardToolbar(),n.attachEvents(),n.$el.trigger("texteditor:init"),n.emit("local::init textEditorInit",n),n},r.destroy=function(){var n=this;n.$el.trigger("texteditor:beforedestroy"),n.emit("local::beforeDestroy textEditorBeforeDestroy",n),n.detachEvents(),n.params.mode==="keyboard-toolbar"&&n.$keyboardToolbarEl&&n.$keyboardToolbarEl.remove(),n.popover&&(n.popover.close(!1),n.popover.destroy()),delete n.$el[0].f7TextEditor,$r(n),n=null},t}(rr),TN=mq,gq={name:"textEditor",params:{textEditor:{el:null,mode:"toolbar",value:void 0,customButtons:null,buttons:[["bold","italic","underline","strikeThrough"],["orderedList","unorderedList"],["link","image"],["paragraph","h1","h2","h3"],["alignLeft","alignCenter","alignRight","alignJustify"],["subscript","superscript"],["indent","outdent"]],dividers:!0,imageUrlText:"Insert image URL",linkUrlText:"Insert link URL",placeholder:null,clearFormattingOnPaste:!0}},create:function(){var t=this;t.textEditor=se(Ir({defaultSelector:".text-editor",constructor:TN,app:t,domProp:"f7TextEditor"}))},static:{TextEditor:TN},on:{tabMounted:function(t){var r=this;T(t).find(".text-editor-init").each(function(a){var n=T(a).dataset();r.textEditor.create(se({el:a},n||{}))})},tabBeforeRemove:function(t){T(t).find(".text-editor-init").each(function(r){r.f7TextEditor&&r.f7TextEditor.destroy()})},pageInit:function(t){var r=this;t.$el.find(".text-editor-init").each(function(a){var n=T(a).dataset();r.textEditor.create(se({el:a},n||{}))})},pageBeforeRemove:function(t){t.$el.find(".text-editor-init").each(function(r){r.f7TextEditor&&r.f7TextEditor.destroy()})}},vnode:{"text-editor-init":{insert:function(t){var r=this,a=t.elm,n=T(a).dataset();r.textEditor.create(se({el:a},n||{}))},destroy:function(t){var r=t.elm;r.f7TextEditor&&r.f7TextEditor.destroy()}}}},vq={name:"elevation"},bq={name:"typography"};to.use([LR,zR,BR,VR,WR,HR,XR,QE,YR,KR,ZR,QR,JR,eO,tO,rO,nO,aO,dj,mj,bj,xj,Cj,Ij,Aj,Rj,Oj,Dj,Lj,zj,Bj,Vj,Uj,qj,Xj,Kj,t6,n6,a6,l6,u6,c6,d6,h6,v6,w6,C6,$6,A6,P6,F6,B6,W6,j6,q6,K6,J6,r5,NG,OG,FG,VG,UG,jG,qG,dq,fq,gq,vq,bq]);to.use([LR,zR,BR,VR,WR,HR,XR,QE,YR,KR,ZR,QR,JR,eO,tO,rO,nO,aO]);function Fv(e){var t={};return Object.keys(e).forEach(function(r){typeof e[r]!="undefined"&&(t[r]=e[r])}),t}function Bt(e){return typeof e=="string"&&e!==""}function wg(e){return typeof e=="object"&&e!==null&&e.constructor&&e.constructor===Object}function oO(){return Date.now()}function ri(){for(var e=!0,t,r,a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];typeof n[0]=="boolean"?(e=n[0],t=n[1],n.splice(0,2),r=n):(t=n[0],n.splice(0,1),r=n);for(var s=0;s<r.length;s+=1){var o=n[s];if(o!=null)for(var l=Object.keys(Object(o)),u=0,c=l.length;u<c;u+=1){var d=l[u],p=Object.getOwnPropertyDescriptor(o,d);p!==void 0&&p.enumerable&&(e?wg(t[d])&&wg(o[d])?ri(t[d],o[d]):!wg(t[d])&&wg(o[d])?(t[d]={},ri(t[d],o[d])):t[d]=o[d]:t[d]=o[d])}}return t}function lO(){for(var e=[],t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return r.forEach(function(n){Array.isArray(n)?e.push.apply(e,lO.apply(void 0,n)):e.push(n)}),e}function an(){for(var e=[],t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];r.forEach(function(i){typeof i=="object"&&i.constructor===Object?Object.keys(i).forEach(function(s){i[s]&&e.push(s)}):i&&e.push(i)});var n=[];return e.forEach(function(i){n.indexOf(i)<0&&n.push(i)}),n.join(" ")}function eC(e){e===void 0&&(e={});var t={};if(!e)return t;var r=e.children;if(!r||r.length===0)return t;function a(i,s){t[i]||(t[i]=[]),t[i].push(s)}if(Array.isArray(r))r.forEach(function(i){if(!!i){var s=i.props&&i.props.slot||"default";a(s,i)}});else{var n="default";r.props&&r.props.slot&&(n=r.props.slot),a(n,r)}return t}function Je(e,t){for(var r=arguments.length,a=new Array(r>2?r-2:0),n=2;n<r;n++)a[n-2]=arguments[n];!t||!t.trim().length||typeof t!="string"||t.trim().split(" ").forEach(function(i){var s=(i||"").trim();if(!!s){s=s.charAt(0).toUpperCase()+s.slice(1);var o="on"+s;e[o]&&e[o].apply(e,a)}})}function Vn(e){e===void 0&&(e={});var t={};return Object.keys(e).forEach(function(r){(r.indexOf("data-")===0||r.indexOf("aria-")===0||r==="role")&&(t[r]=e[r])}),t}var R1=0,O1=0;function yq(){R1=0,O1=0}function NN(){return R1+=1,oO()+"_"+R1}function Zg(){return O1+=1,oO()+"_"+O1}var ye,Ma,wr={},Mn={views:[],tabs:[],modals:null},uO=function(){!ye||(wr.ios=ye.theme==="ios",wr.md=ye.theme==="md",wr.aurora=ye.theme==="aurora")},wq=function(){yq(),delete wr.ios,delete wr.md,delete wr.aurora,Mn.views=[],Mn.tabs=[],Mn.modals=null},xq=function(){Ma=new to.Events},AN=function(t,r,a){r===void 0&&(r={}),a===void 0&&(a=!0);var n=ri({},r,{el:t,init:a});if(typeof r.store!="undefined"&&(n.store=r.store),n.routes||(n.routes=[]),n.userAgent&&(n.theme==="auto"||!n.theme)){var i=to.getDevice({userAgent:n.userAgent},!0);wr.ios=!!i.ios,wr.aurora=i.desktop&&i.electron,wr.md=!wr.ios&&!wr.aurora}if(!(ye&&typeof window!="undefined")){typeof window=="undefined"&&wq();var s=new to(n);ye=s,uO(),s.initialized?(ye=s,Ma.emit("ready",ye)):s.on("init",function(){ye=s,Ma.emit("ready",ye)})}},yn=function(t){!t||(ye&&ye.initialized?t(ye):Ma.once("ready",t))},_N=function(t){for(var r=[],a=0;a<t.children.length;a+=1)r.push(t.children[a]);return r},kq=function(t,r){if(t.length!==r.length)return!1;var a=new Set([].concat(t,r));return a.size===t.length},Eq={proto:{pageComponentLoader:function(t){var r=t.routerEl,a=t.component,n=t.options,i=t.resolve,s=t.reject,o=this,l=o.id,u=r,c;if(Mn.views.forEach(function(m){(m.el&&m.el===r||m.routerId&&m.routerId===l)&&(c=m)}),!c){s();return}var d={component:a,id:Zg(),props:ri({f7route:n.route,f7router:o},n.route.params,n.props||{})},p,f=_N(u);function h(m){if(!(m!==c||p)){var g=_N(u);if(!kq(f,g)){Ma.off("viewRouterDidUpdate",h);var v=u.children[u.children.length-1];d.el=v,i(v),p=!0}}}Ma.on("viewRouterDidUpdate",h),c.pages.push(d),c.setPages(c.pages)},removePage:function(t){if(!!t){var r=this,a;if("length"in t&&t[0]?a=t[0].f7Page:a=t.f7Page,a&&a.route&&a.route.route&&a.route.route.keepAlive){r.app.$(t).remove();return}var n;Mn.views.forEach(function(o){o.el&&o.el===r.el&&(n=o)});var i;if("length"in t){if(t.length===0)return;i=t[0]}else i=t;if(!!i){var s;n.pages.forEach(function(o,l){o.el===i&&(s=!0,n.pages.splice(l,1),n.setPages(n.pages))}),s||i.parentNode.removeChild(i)}}},tabComponentLoader:function(t){var r=t===void 0?{}:t,a=r.tabEl,n=r.component,i=r.options,s=r.resolve,o=r.reject,l=this;a||o();var u;if(Mn.tabs.forEach(function(h){h.el&&h.el===a&&(u=h)}),!u){o();return}var c=Zg(),d={id:c,component:n,props:ri({f7route:i.route,f7router:l},i.route.route&&i.route.route.tab&&i.route.route.tab.options&&i.route.route.tab.options.props||{},i.route.params,i.props||{})},p;function f(h){if(!(h!==u||p)){Ma.off("tabRouterDidUpdate",f);var m=a.children[0];s(m),p=!0}}Ma.on("tabRouterDidUpdate",f),u.setTabContent(d)},removeTabContent:function(t){if(!!t){var r;if(Mn.tabs.forEach(function(a){a.el&&a.el===t&&(r=a)}),!r){t.innerHTML="";return}r.setTabContent(null)}},modalComponentLoader:function(t){var r=t===void 0?{}:t,a=r.component,n=r.options,i=r.resolve,s=r.reject,o=this,l=Mn.modals;if(!l){s();return}var u={component:a,id:Zg(),props:ri({f7route:n.route,f7router:o},n.route.params,n.props||{})},c;function d(){if(!c){Ma.off("modalsRouterDidUpdate",d);var p=l.el.children[l.el.children.length-1];u.el=p,i(p),c=!0}}Ma.on("modalsRouterDidUpdate",d),l.modals.push(u),l.setModals(l.modals)},removeModal:function(t){var r=Mn.modals;if(!!r){var a;r.modals.forEach(function(n){n.el===t&&(a=n)}),r.modals.splice(r.modals.indexOf(a),1),r.setModals(r.modals)}}}},P1={name:"reactPlugin",installed:!1,install:function(t){if(t===void 0&&(t={}),!P1.installed){P1.installed=!0,xq();var r=t,a=r.theme,n=r.userAgent;a==="md"&&(wr.md=!0),a==="ios"&&(wr.ios=!0),a==="aurora"&&(wr.aurora=!0);var i=typeof window=="undefined"?!!n:!0;if(i&&(!a||a==="auto")){var s=to.getDevice({userAgent:n},!0);wr.ios=!!s.ios,wr.aurora=s.desktop&&s.electron,wr.md=!wr.ios&&!wr.aurora}yn(function(){uO()}),to.Router.use(Eq)}}},Cq=P1;function Cn(e){var t,r=e.color,a=e.colorTheme,n=e.textColor,i=e.bgColor,s=e.borderColor,o=e.rippleColor,l=e.themeDark;return t={"theme-dark":l},t["color-"+r]=r,t["color-theme-"+a]=a,t["text-color-"+n]=n,t["bg-color-"+i]=i,t["border-color-"+s]=s,t["ripple-color-"+o]=o,t}function cO(e){var t=e.force,r=e.reloadCurrent,a=e.reloadPrevious,n=e.reloadAll,i=e.reloadDetail,s=e.animate,o=e.ignoreCache,l=e.routeTabId,u=e.view,c=e.transition,d=e.openIn,p;"animate"in e&&typeof s!="undefined"&&(p=s.toString());var f;return"reloadDetail"in e&&typeof i!="undefined"&&(f=i.toString()),{"data-force":t||void 0,"data-reload-current":r||void 0,"data-reload-all":n||void 0,"data-reload-previous":a||void 0,"data-reload-detail":f,"data-animate":p,"data-ignore-cache":o||void 0,"data-route-tab-id":l||void 0,"data-view":Bt(u)?u:void 0,"data-transition":Bt(c)?c:void 0,"data-open-in":Bt(d)?d:void 0}}function dO(e){var t=e.back,r=e.linkBack,a=e.external,n=e.preventRouter;return{back:t||r,external:a,"prevent-router":n}}function pO(e){var t=e.searchbarEnable,r=e.searchbarDisable,a=e.searchbarClear,n=e.searchbarToggle,i=e.panelOpen,s=e.panelClose,o=e.panelToggle,l=e.popupOpen,u=e.popupClose,c=e.actionsOpen,d=e.actionsClose,p=e.popoverOpen,f=e.popoverClose,h=e.loginScreenOpen,m=e.loginScreenClose,g=e.sheetOpen,v=e.sheetClose,b=e.sortableEnable,y=e.sortableDisable,w=e.sortableToggle,x=e.cardOpen,k=e.cardClose;return{"data-searchbar":Bt(t)&&t||Bt(r)&&r||Bt(a)&&a||Bt(n)&&n||void 0,"data-panel":Bt(i)&&i||Bt(s)&&s||Bt(o)&&o||void 0,"data-popup":Bt(l)&&l||Bt(u)&&u||void 0,"data-actions":Bt(c)&&c||Bt(d)&&d||void 0,"data-popover":Bt(p)&&p||Bt(f)&&f||void 0,"data-sheet":Bt(g)&&g||Bt(v)&&v||void 0,"data-login-screen":Bt(h)&&h||Bt(m)&&m||void 0,"data-sortable":Bt(b)&&b||Bt(y)&&y||Bt(w)&&w||void 0,"data-card":Bt(x)&&x||Bt(k)&&k||void 0}}function fO(e){var t=e.searchbarEnable,r=e.searchbarDisable,a=e.searchbarClear,n=e.searchbarToggle,i=e.panelOpen,s=e.panelClose,o=e.panelToggle,l=e.popupOpen,u=e.popupClose,c=e.actionsClose,d=e.actionsOpen,p=e.popoverOpen,f=e.popoverClose,h=e.loginScreenOpen,m=e.loginScreenClose,g=e.sheetOpen,v=e.sheetClose,b=e.sortableEnable,y=e.sortableDisable,w=e.sortableToggle,x=e.cardOpen,k=e.cardPreventOpen,C=e.cardClose,E=e.menuClose;return{"searchbar-enable":t||t==="","searchbar-disable":r||r==="","searchbar-clear":a||a==="","searchbar-toggle":n||n==="","panel-close":s||s==="","panel-open":i||i==="","panel-toggle":o||o==="","popup-close":u||u==="","popup-open":l||l==="","actions-close":c||c==="","actions-open":d||d==="","popover-close":f||f==="","popover-open":p||p==="","sheet-close":v||v==="","sheet-open":g||g==="","login-screen-close":m||m==="","login-screen-open":h||h==="","sortable-enable":b||b==="","sortable-disable":y||y==="","sortable-toggle":w||w==="","card-close":C||C==="","card-open":x||x==="","card-prevent-open":k||k==="","menu-close":E||E===""}}function Wr(e,t){return typeof window=="undefined"?_e.exports.useEffect(e,t):_e.exports.useLayoutEffect(e,t)}var Th=function(t,r){var a=_e.exports.useRef(t);Wr(function(){t!==a.current&&r&&r(t,a.current),a.current=t},[t])};function D1(){return D1=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},D1.apply(this,arguments)}var hO=_e.exports.forwardRef(function(e,t){var r=_e.exports.useState([]),a=r[0],n=r[1],i=_e.exports.useRef(null),s=_e.exports.useRef(null);_e.exports.useImperativeHandle(t,function(){return{el:i.current}});var o=function(){s.current={modals:a,el:i.current,setModals:function(d){n([].concat(d))}},Mn.modals=s.current},l=function(){!s.current||(Mn.modals=null,s.current=null)};return Wr(function(){return o(),l},[]),Wr(function(){!s.current||!ye||Ma.emit("modalsRouterDidUpdate",s.current)}),Ce.createElement("div",{ref:i,className:"framework7-modals"},a.map(function(u){var c=u.component,d=u.id,p=u.props;return Ce.createElement(c,D1({key:d},p))}))});hO.displayName="f7-routable-modals";var Sq=hO;function F1(){return F1=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},F1.apply(this,arguments)}function $q(e,t){if(e==null)return{};var r={},a=Object.keys(e),n,i;for(i=0;i<a.length;i++)n=a[i],!(t.indexOf(n)>=0)&&(r[n]=e[n]);return r}var mO=_e.exports.forwardRef(function(e,t){var r=e.className,a=e.style,n=e.children,i=$q(e,["className","style","children"]),s=Vn(e),o=i,l=_e.exports.useRef(null);_e.exports.useImperativeHandle(t,function(){return{el:l.current}});var u=an(r,"framework7-root",Cn(e));return(!ye||typeof window=="undefined")&&AN(l.current,o,!1),Wr(function(){var c=l.current&&l.current.parentNode;if(typeof document!="undefined"&&c&&c!==document.body&&c.parentNode===document.body&&(c.style.height="100%"),ye){ye.init(l.current);return}AN(l.current,o,!0)},[]),Ce.createElement("div",F1({id:"framework7-root",style:a,className:u,ref:l},s),n,Ce.createElement(Sq,null))});mO.displayName="f7-app";var Iq=mO,Nh=function(t,r){var a=_e.exports.useRef(null),n=r.tooltip,i=r.tooltipTrigger,s=function(){!t.current||!n||yn(function(){a.current=ye.tooltip.create({targetEl:t.current,text:n,trigger:i})})},o=function(){a.current&&a.current.destroy&&(a.current.destroy(),a.current=null)};_e.exports.useEffect(function(){return s(),o},[]),Th(n,function(l){if(!l&&a.current){a.current.destroy(),a.current=null;return}if(l&&!a.current&&ye){a.current=ye.tooltip.create({targetEl:t.current,text:l,trigger:i});return}!l||!a.current||a.current.setText(l)})};function L1(){return L1=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},L1.apply(this,arguments)}var gO=_e.exports.forwardRef(function(e,t){var r=e.className,a=e.id,n=e.style,i=e.children,s=Vn(e),o=_e.exports.useRef(null);_e.exports.useImperativeHandle(t,function(){return{el:o.current}}),Nh(o,e);var l=an(r,"badge",Cn(e));return Ce.createElement("span",L1({id:a,style:n,className:l,ref:o},s),i)});gO.displayName="f7-badge";var vO=gO;function z1(){return z1=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},z1.apply(this,arguments)}var bO=_e.exports.forwardRef(function(e,t){var r=e.className,a=e.id,n=e.style,i=e.children,s=e.large,o=e.medium,l=Vn(e),u=_e.exports.useRef(null);_e.exports.useImperativeHandle(t,function(){return{el:u.current}});var c=an(r,"block-title",{"block-title-large":s,"block-title-medium":o},Cn(e));return Ce.createElement("div",z1({id:a,style:n,className:c,ref:u},l),i)});bO.displayName="f7-block-title";var xg=bO,Lb=function(t,r){var a=function(l){t.current===l&&Je(r,"tabShow",l)},n=function(l){t.current===l&&Je(r,"tabHide",l)},i=function(){!t.current||yn(function(){ye.on("tabShow",a),ye.on("tabHide",n)})},s=function(){!ye||(ye.off("tabShow",a),ye.off("tabHide",n))};Wr(function(){return i(),s})};function B1(){return B1=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},B1.apply(this,arguments)}var yO=_e.exports.forwardRef(function(e,t){var r=e.className,a=e.inset,n=e.xsmallInset,i=e.smallInset,s=e.mediumInset,o=e.largeInset,l=e.xlargeInset,u=e.strong,c=e.accordionList,d=e.accordionOpposite,p=e.tabs,f=e.tab,h=e.tabActive,m=e.noHairlines,g=e.noHairlinesIos,v=e.noHairlinesMd,b=e.noHairlinesAurora,y=e.id,w=e.style,x=e.children,k=Vn(e),C=_e.exports.useRef(null);_e.exports.useImperativeHandle(t,function(){return{el:C.current}}),Lb(C,e);var E=an(r,"block",{inset:a,"xsmall-inset":n,"small-inset":i,"medium-inset":s,"large-inset":o,"xlarge-inset":l,"block-strong":u,"accordion-list":c,"accordion-opposite":d,tabs:p,tab:f,"tab-active":h,"no-hairlines":m,"no-hairlines-md":v,"no-hairlines-ios":g,"no-hairlines-aurora":b},Cn(e));return Ce.createElement("div",B1({id:y,style:w,className:E,ref:C},k),x)});yO.displayName="f7-block";var Tq=yO,wO=function(){var t=_e.exports.useState(ye?wr:null),r=t[0],a=t[1];return ye||yn(function(){a(wr)}),r};function V1(){return V1=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},V1.apply(this,arguments)}var xO=_e.exports.forwardRef(function(e,t){var r=wO(),a=e.className,n=e.id,i=e.style,s=e.children,o=e.material,l=e.f7,u=e.icon,c=e.md,d=e.ios,p=e.aurora,f=e.size,h=Vn(e),m=_e.exports.useRef(null);_e.exports.useImperativeHandle(t,function(){return{el:m.current}}),Nh(m,e);var g=function(){var w={icon:!0},x;if(r&&r.ios?x=d:r&&r.md?x=c:r&&r.aurora&&(x=p),x){var k=x.split(":"),C=k[0],E=k[1];(C==="material"||C==="f7")&&(w["material-icons"]=C==="material",w["f7-icons"]=C==="f7"),C==="icon"&&(w[E]=!0)}else w={icon:!0,"material-icons":o,"f7-icons":l},u&&(w[u]=!0);return an(a,w,Cn(e))},v=function(){var w=o||l;return c&&r&&r.md&&(c.indexOf("material:")>=0||c.indexOf("f7:")>=0)?w=c.split(":")[1]:d&&r&&r.ios&&(d.indexOf("material:")>=0||d.indexOf("f7:")>=0)?w=d.split(":")[1]:p&&r&&r.aurora&&(p.indexOf("material:")>=0||p.indexOf("f7:")>=0)&&(w=p.split(":")[1]),w},b=f;return(typeof f=="number"||parseFloat(f)===f*1)&&(b=f+"px"),Ce.createElement("i",V1({id:n,style:ri({fontSize:b,width:b,height:b},i),className:g(),ref:m},h),v(),s)});xO.displayName="f7-icon";var Nq=xO,Aq=function(t){t===void 0&&(t={});var r=t,a=r.icon,n=r.iconMaterial,i=r.iconF7,s=r.iconMd,o=r.iconIos,l=r.iconAurora,u=r.iconColor,c=r.iconSize,d=r.iconBadge,p=r.badgeColor,f=r.iconBadgeColor;return a||n||i||s||o||l?Ce.createElement(Nq,{material:n,f7:i,icon:a,md:s,ios:o,aurora:l,color:u,size:c},(d||d===0)&&Ce.createElement(vO,{color:p||f},d)):null},kO=function(t,r){var a=r===void 0?{}:r,n=a.routeProps;_e.exports.useEffect(function(){return t.current&&(t.current.f7RouteProps=n),function(){t.current&&t.current.f7RouteProps&&delete t.current.f7RouteProps}},[n])};function W1(){return W1=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},W1.apply(this,arguments)}var EO=_e.exports.forwardRef(function(e,t){var r=wO(),a=e.className,n=e.id,i=e.style,s=e.size,o=Vn(e),l=_e.exports.useRef(null);_e.exports.useImperativeHandle(t,function(){return{el:l.current}});var u={},c=s;c&&typeof c=="string"&&c.indexOf("px")>=0&&(c=c.replace("px","")),c&&(u.width=c+"px",u.height=c+"px",u["--f7-preloader-size"]=c+"px"),i&&ri(u,i||{});var d;r&&r.md?d=Ce.createElement("span",{className:"preloader-inner"},Ce.createElement("svg",{viewBox:"0 0 36 36"},Ce.createElement("circle",{cx:"18",cy:"18",r:"16"}))):r&&r.ios?d=Ce.createElement("span",{className:"preloader-inner"},Ce.createElement("span",{className:"preloader-inner-line"}),Ce.createElement("span",{className:"preloader-inner-line"}),Ce.createElement("span",{className:"preloader-inner-line"}),Ce.createElement("span",{className:"preloader-inner-line"}),Ce.createElement("span",{className:"preloader-inner-line"}),Ce.createElement("span",{className:"preloader-inner-line"}),Ce.createElement("span",{className:"preloader-inner-line"}),Ce.createElement("span",{className:"preloader-inner-line"})):r&&r.aurora?d=Ce.createElement("span",{className:"preloader-inner"},Ce.createElement("span",{className:"preloader-inner-circle"})):r||(d=Ce.createElement("span",{className:"preloader-inner"}));var p=an(a,"preloader",Cn(e));return Ce.createElement("span",W1({id:n,style:u,className:p,ref:l},o),d)});EO.displayName="f7-preloader";var H1=EO;function Lv(){return Lv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Lv.apply(this,arguments)}var CO=_e.exports.forwardRef(function(e,t){var r=e.className,a=e.id,n=e.style,i=e.children,s=e.text,o=e.type,l=e.href,u=l===void 0?"#":l,c=e.target,d=e.tabLink,p=e.tabLinkActive,f=e.round,h=e.roundIos,m=e.roundAurora,g=e.roundMd,v=e.fill,b=e.fillIos,y=e.fillAurora,w=e.fillMd,x=e.large,k=e.largeIos,C=e.largeAurora,E=e.largeMd,$=e.small,N=e.smallIos,I=e.smallAurora,S=e.smallMd,A=e.raised,R=e.raisedIos,O=e.raisedAurora,D=e.raisedMd,z=e.active,U=e.outline,j=e.outlineIos,G=e.outlineAurora,L=e.outlineMd,V=e.disabled,H=e.preloader,Y=e.preloaderSize,K=e.preloaderColor,Z=e.loading,le=Vn(e),de=_e.exports.useRef(null),ie=function($e){Je(e,"click",$e)};_e.exports.useImperativeHandle(t,function(){return{el:de.current}}),Nh(de,e),kO(de,e);var ue=function(){return an(r,"button",{"tab-link":d||d==="","tab-link-active":p,"button-round":f,"button-round-ios":h,"button-round-aurora":m,"button-round-md":g,"button-fill":v,"button-fill-ios":b,"button-fill-aurora":y,"button-fill-md":w,"button-large":x,"button-large-ios":k,"button-large-aurora":C,"button-large-md":E,"button-small":$,"button-small-ios":N,"button-small-aurora":I,"button-small-md":S,"button-raised":A,"button-raised-ios":R,"button-raised-aurora":O,"button-raised-md":D,"button-active":z,"button-outline":U,"button-outline-ios":j,"button-outline-aurora":G,"button-outline-md":L,"button-preloader":H,"button-loading":Z,disabled:V},Cn(e),dO(e),fO(e))},pe=o==="submit"||o==="reset"||o==="button"?"button":"a",Se=function(){var $e=u;return u===!0&&($e="#"),(u===!1||pe==="button")&&($e=void 0),ri({href:$e,target:c,type:o,"data-tab":Bt(d)&&d||void 0},cO(e),pO(e))},ke=Aq(e),oe;return s&&(oe=Ce.createElement("span",null,s)),H?Ce.createElement(pe,Lv({ref:de,id:a,style:n,className:ue()},Se(),le,{onClick:ie}),Ce.createElement(H1,{size:Y,color:K}),Ce.createElement("span",null,ke,oe,i)):Ce.createElement(pe,Lv({ref:de,id:a,style:n,className:ue()},Se(),le,{onClick:ie}),ke,oe,i)});CO.displayName="f7-button";var SO=CO;function U1(){return U1=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},U1.apply(this,arguments)}var $O=_e.exports.forwardRef(function(e,t){var r=_e.exports.useRef(null),a=e.className,n=e.id,i=e.style,s=e.init,o=s===void 0?!0:s,l=e.checked,u=e.defaultChecked,c=e.disabled,d=e.readonly,p=e.name,f=e.value,h=Vn(e),m=_e.exports.useRef(null),g=_e.exports.useRef(null),v=function($){Je(e,"change",$)};_e.exports.useImperativeHandle(t,function(){return{el:m.current,f7Toggle:function(){return r.current}}}),Nh(m,e),Th(l,function(E){!r.current||(r.current.checked=E)});var b=function($){Je(e,"toggleChange",$.checked)},y=function($){!r.current||r.current[$]("toggleChange",b)},w=function(){yn(function(){!o||!m.current||(r.current=ye.toggle.create({el:m.current}),y("on"))})},x=function(){r.current&&r.current.destroy&&r.current.$el&&r.current.destroy(),r.current=null};Wr(function(){return y("on"),g.current&&g.current.addEventListener("change",v),function(){y("off"),g.current&&g.current.removeEventListener("change",v)}}),Wr(function(){return w(),x},[]);var k=an("toggle",a,{disabled:c},Cn(e)),C=Ce.createElement("input",{ref:g,type:"checkbox",name:p,disabled:c,readOnly:d,checked:l,defaultChecked:u,value:f,onChange:function(){}});return Ce.createElement("label",U1({id:n,style:i,className:k,ref:m},h),C,Ce.createElement("span",{className:"toggle-icon"}))});$O.displayName="f7-toggle";var _q=$O;function j1(){return j1=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},j1.apply(this,arguments)}var IO=_e.exports.forwardRef(function(e,t){var r=_e.exports.useRef(null),a=e.className,n=e.id,i=e.style,s=e.children,o=e.init,l=o===void 0?!0:o,u=e.value,c=u===void 0?0:u,d=e.min,p=d===void 0?0:d,f=e.max,h=f===void 0?100:f,m=e.step,g=m===void 0?1:m,v=e.label,b=v===void 0?!1:v,y=e.dual,w=y===void 0?!1:y,x=e.vertical,k=x===void 0?!1:x,C=e.verticalReversed,E=C===void 0?!1:C,$=e.draggableBar,N=$===void 0?!0:$,I=e.formatLabel,S=e.scale,A=S===void 0?!1:S,R=e.scaleSteps,O=R===void 0?5:R,D=e.scaleSubSteps,z=D===void 0?0:D,U=e.formatScaleLabel,j=e.limitKnobPosition,G=j===void 0?void 0:j,L=e.name,V=e.input,H=e.inputId,Y=e.disabled,K=Vn(e),Z=_e.exports.useRef(null);_e.exports.useImperativeHandle(t,function(){return{el:Z.current,f7Range:function(){return r.current}}}),Th(c,function(ke){if(!!r.current){var oe=r.current.value;Array.isArray(ke)&&Array.isArray(oe)?(oe[0]!==ke[0]||oe[1]!==ke[1])&&r.current.setValue(ke):r.current.setValue(ke)}});var le=function(oe,me){Je(e,"rangeChange",me)},de=function(oe,me){Je(e,"rangeChanged",me)},ie=function(oe){!r.current||(r.current[oe]("change",le),r.current[oe]("changed",de))},ue=function(){yn(function(){!l||!Z.current||(r.current=ye.range.create(Fv({el:Z.current,value:c,min:p,max:h,step:g,label:b,dual:w,draggableBar:N,vertical:k,verticalReversed:E,formatLabel:I,scale:A,scaleSteps:O,scaleSubSteps:z,formatScaleLabel:U,limitKnobPosition:G})),ie("on"))})},pe=function(){r.current&&r.current.destroy&&r.current.destroy(),r.current=null};Wr(function(){return ie("on"),function(){ie("off")}}),Wr(function(){return ue(),pe},[]);var Se=an(a,"range-slider",{"range-slider-horizontal":!k,"range-slider-vertical":k,"range-slider-vertical-reversed":k&&E,disabled:Y},Cn(e));return Ce.createElement("div",j1({ref:Z,id:n,style:i,className:Se},K),V&&Ce.createElement("input",{type:"range",name:L,id:H}),s)});IO.displayName="f7-range";var Mq=IO,Rq=function(t,r,a,n){var i=function(){yn(function(){if(t){var l=ri({el:n()},r||{});a.current=ye.smartSelect.create(l)}})},s=function(){a.current&&a.current.destroy&&a.current.destroy(),a.current=null};_e.exports.useEffect(function(){return i(),s},[])},TO=Ce.createContext({listIsMedia:!1,listIsSimple:!1,listIsSortable:!1,listIsSortableOpposite:!1}),NO=function(t){var r=t.indeterminate,a=t.radio,n=t.checkbox,i=t.value,s=t.name,o=t.readonly,l=t.disabled,u=t.checked,c=t.defaultChecked,d=t.required,p=t.media,f=t.header,h=t.footer,m=t.title,g=t.subtitle,v=t.text,b=t.after,y=t.badge,w=t.badgeColor,x=t.radioIcon,k=t.swipeout,C=t.sortable,E=t.accordionItem,$=t.onChange,N=t.onClick,I=t.isMediaComputed,S=t.isSortableComputed,A=t.isSortableOppositeComputed,R=t.slots,O=_e.exports.useRef(null);_e.exports.useEffect(function(){O.current&&(O.current.indeterminate=!!r)},[r]);var D,z,U,j,G,L,V,H,Y,K,Z,le,de;if((a||n)&&(K=Ce.createElement("input",{ref:O,value:i,name:s,checked:u,defaultChecked:c,readOnly:o,disabled:l,required:d,type:a?"radio":"checkbox",onChange:$}),Z=Ce.createElement("i",{className:"icon icon-"+(a?"radio":"checkbox")})),p||R.media){var ie;p&&(ie=Ce.createElement("img",{src:p})),Y=Ce.createElement("div",{className:"item-media"},ie,R.media)}(f||R.header)&&(le=Ce.createElement("div",{className:"item-header"},f,R.header)),(h||R.footer)&&(de=Ce.createElement("div",{className:"item-footer"},h,R.footer)),(m||R.title||!I&&le||!I&&de)&&(D=Ce.createElement("div",{className:"item-title"},!I&&le,m,R.title,!I&&de)),(g||R.subtitle)&&(V=Ce.createElement("div",{className:"item-subtitle"},g,R.subtitle)),(v||R.text)&&(H=Ce.createElement("div",{className:"item-text"},v,R.text)),(b||y||R.after)&&(b&&(U=Ce.createElement("span",null,b)),y&&(j=Ce.createElement(vO,{color:w},y)),z=Ce.createElement("div",{className:"item-after"},R["after-start"],U,j,R.after,R["after-end"])),I?(L=Ce.createElement("div",{className:"item-title-row"},R["before-title"],D,R["after-title"],z),G=Ce.createElement("div",{className:"item-inner"},R["inner-start"],le,L,V,H,k||E?null:R.default,R.inner,de,R["inner-end"])):G=Ce.createElement("div",{className:"item-inner"},R["inner-start"],R["before-title"],D,R["after-title"],z,k||E?null:R.default,R.inner,R["inner-end"]);var ue=n||a?"label":"div",pe=an("item-content",{"item-checkbox":n,"item-radio":a,"item-radio-icon-start":a&&x==="start","item-radio-icon-end":a&&x==="end"},Cn(t));return Ce.createElement(ue,{className:pe,onClick:N},S&&C!==!1&&A&&Ce.createElement("div",{className:"sortable-handler"}),R["content-start"],K,Z,Y,G,R.content,R["content-end"])};NO.displayName="f7-list-item-content";var Oq=NO;function lc(){return lc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},lc.apply(this,arguments)}var AO=_e.exports.forwardRef(function(e,t){var r=e.className,a=e.id,n=e.style,i=e.children,s=e.title,o=e.link,l=e.target,u=e.tabLink,c=e.tabLinkActive,d=e.selected,p=e.mediaItem,f=e.mediaList,h=e.divider,m=e.groupTitle,g=e.swipeout,v=e.swipeoutOpened,b=e.sortable,y=e.sortableOpposite,w=e.accordionItem,x=e.accordionItemOpened,k=e.smartSelect,C=e.smartSelectParams,E=e.noChevron,$=e.chevronCenter,N=e.checkbox,I=e.radio,S=e.disabled,A=e.virtualListIndex,R=e.href,O=_e.exports.useContext(TO),D=O||{},z=D.listIsMedia,U=z===void 0?!1:z,j=D.listIsSortable,G=j===void 0?!1:j,L=D.listIsSortableOpposite,V=L===void 0?!1:L,H=D.listIsSimple,Y=H===void 0?!1:H,K=Vn(e),Z=_e.exports.useRef(null),le=_e.exports.useRef(null),de=_e.exports.useRef(null),ie=function(it){it.target.tagName.toLowerCase()!=="input"&&Je(e,"click",it)},ue=function(it){Z.current===it&&Je(e,"swipeoutOverswipeEnter")},pe=function(it){Z.current===it&&Je(e,"swipeoutOverswipeExit")},Se=function(it){Z.current===it&&Je(e,"swipeoutDeleted")},ke=function(it){Z.current===it&&Je(e,"swipeoutDelete")},oe=function(it){Z.current===it&&Je(e,"swipeoutClose")},me=function(it){Z.current===it&&Je(e,"swipeoutClosed")},$e=function(it){Z.current===it&&Je(e,"swipeoutOpen")},Me=function(it){Z.current===it&&Je(e,"swipeoutOpened")},Oe=function(it,An){Z.current===it&&Je(e,"swipeout",An)},he=function(it,An){Z.current===it&&Je(e,"accordionBeforeClose",An)},Re=function(it){Z.current===it&&Je(e,"accordionClose")},Ne=function(it){Z.current===it&&Je(e,"accordionClosed")},je=function(it,An){Z.current===it&&Je(e,"accordionBeforeOpen",An)},ve=function(it){Z.current===it&&Je(e,"accordionOpen")},Ge=function(it){Z.current===it&&Je(e,"accordionOpened")},Ze=function(it){Je(e,"change",it)};_e.exports.useImperativeHandle(t,function(){return{el:Z.current,f7SmartSelect:function(){return de.current}}}),Nh(Z,e),kO(le,e),Th(v,function(Tt){!g||!Z.current||!ye||(Tt?ye.swipeout.open(Z.current):ye.swipeout.close(Z.current))});var qe=function(){yn(function(){g&&(ye.on("swipeoutOpen",$e),ye.on("swipeoutOpened",Me),ye.on("swipeoutClose",oe),ye.on("swipeoutClosed",me),ye.on("swipeoutDelete",ke),ye.on("swipeoutDeleted",Se),ye.on("swipeoutOverswipeEnter",ue),ye.on("swipeoutOverswipeExit",pe),ye.on("swipeout",Oe)),w&&(ye.on("accordionBeforeOpen",je),ye.on("accordionOpen",ve),ye.on("accordionOpened",Ge),ye.on("accordionBeforeClose",he),ye.on("accordionClose",Re),ye.on("accordionClosed",Ne))})},Ae=function(){!ye||(ye.off("swipeoutOpen",$e),ye.off("swipeoutOpened",Me),ye.off("swipeoutClose",oe),ye.off("swipeoutClosed",me),ye.off("swipeoutDelete",ke),ye.off("swipeoutDeleted",Se),ye.off("swipeoutOverswipeEnter",ue),ye.off("swipeoutOverswipeExit",pe),ye.off("swipeout",Oe),ye.off("accordionBeforeOpen",je),ye.off("accordionOpen",ve),ye.off("accordionOpened",Ge),ye.off("accordionBeforeClose",he),ye.off("accordionClose",Re),ye.off("accordionClosed",Ne))};Rq(k,C,de,function(){return Z.current.querySelector("a.smart-select")}),Wr(function(){yn(function(){g&&v&&ye.swipeout.open(Z.current)})},[]),Wr(function(){return qe(),Ae});var rt=eC(e),pt,lr,ln=p||f||U,jn=b===!0||b===!1?b:G,un=jn&&(y||V);if(!Y&&(lr=Ce.createElement(Oq,lc({},e,{slots:rt,onChange:Ze,onClick:o||R||w||k?void 0:ie,isMediaComputed:ln,isSortableComputed:jn,isSortableOppositeComputed:un})),o||R||w||k)){var Gn=lc({href:o===!0?"":o||R,target:l,"data-tab":Bt(u)&&u||void 0},cO(e),pO(e)),Nr=an({"item-link":!0,"smart-select":k,"tab-link":u||u==="","tab-link-active":c,"item-selected":d},dO(e),fO(e));pt=Ce.createElement("a",lc({ref:le,className:Nr},Gn,{onClick:ie}),lr)}var Nn=an(r,{"item-divider":h,"list-group-title":m,"media-item":ln,swipeout:g,"accordion-item":w,"accordion-item-opened":x,disabled:S&&!(I||N),"no-chevron":E,"chevron-center":$,"disallow-sorting":b===!1},Cn(e));if(h||m)return Ce.createElement("li",{ref:Z,id:a,style:n,className:Nn,"data-virtual-list-index":A,onClick:ie},Ce.createElement("span",null,s,i));if(Y)return Ce.createElement("li",{ref:Z,id:a,style:n,className:Nn,"data-virtual-list-index":A,onClick:ie},s,i);var pa=o||R||k||w?pt:lr;return Ce.createElement("li",lc({ref:Z,id:a,style:n,className:Nn,"data-virtual-list-index":A},K),rt["root-start"],g?Ce.createElement("div",{className:"swipeout-content"},pa):pa,jn&&b!==!1&&!un&&Ce.createElement("div",{className:"sortable-handler"}),(g||w)&&rt.default,rt.root,rt["root-end"])});AO.displayName="f7-list-item";var MN=AO;function G1(){return G1=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},G1.apply(this,arguments)}var _O=_e.exports.forwardRef(function(e,t){var r=_e.exports.useRef(null),a=e.className,n=e.id,i=e.style,s=e.inset,o=e.xsmallInset,l=e.smallInset,u=e.mediumInset,c=e.largeInset,d=e.xlargeInset,p=e.mediaList,f=e.sortable,h=e.sortableTapHold,m=e.sortableEnabled,g=e.sortableMoveElements,v=e.sortableOpposite,b=e.accordionList,y=e.accordionOpposite,w=e.contactsList,x=e.simpleList,k=e.linksList,C=e.menuList,E=e.noHairlines,$=e.noHairlinesBetween,N=e.noHairlinesMd,I=e.noHairlinesBetweenMd,S=e.noHairlinesIos,A=e.noHairlinesBetweenIos,R=e.noHairlinesAurora,O=e.noHairlinesBetweenAurora,D=e.noChevron,z=e.chevronCenter,U=e.tab,j=e.tabActive,G=e.form,L=e.formStoreData,V=e.inlineLabels,H=e.virtualList,Y=e.virtualListParams,K=Vn(e),Z=_e.exports.useRef(null),le=function(Ae){Je(e,"submit",Ae)},de=function(Ae){Z.current===Ae&&Je(e,"sortableEnable")},ie=function(Ae){Z.current===Ae&&Je(e,"sortableDisable")},ue=function(Ae,rt,pt){Z.current===pt&&Je(e,"sortableSort",rt)},pe=function(Ae,rt){Z.current===rt&&Je(e,"sortableMove",Ae,rt)};_e.exports.useImperativeHandle(t,function(){return{el:Z.current,f7VirtualList:function(){return r.current}}}),Lb(Z,e);var Se=function(){yn(function(){ye.on("sortableEnable",de),ye.on("sortableDisable",ie),ye.on("sortableSort",ue),ye.on("sortableMove",pe)})},ke=function(){!ye||(ye.off("sortableEnable",de),ye.off("sortableDisable",ie),ye.off("sortableSort",ue),ye.off("sortableMove",pe))},oe=function(){yn(function(){if(!!H){var Ae=Y||{};!Ae.renderItem&&!Ae.renderExternal||(r.current=ye.virtualList.create(ri({el:Z.current,on:{itemBeforeInsert:function(pt,lr){var ln=this;Je(e,"virtualItemBeforeInsert",ln,pt,lr)},beforeClear:function(pt){var lr=this;Je(e,"virtualBeforeClear",lr,pt)},itemsBeforeInsert:function(pt){var lr=this;Je(e,"virtualItemsBeforeInsert",lr,pt)},itemsAfterInsert:function(pt){var lr=this;Je(e,"virtualItemsAfterInsert",lr,pt)}}},Ae)))}})},me=function(){!ye||!(H&&r.current)||(r.current.destroy&&r.current.destroy(),r.current=null)};Wr(function(){return oe(),me},[]),Wr(function(){return Se(),ke});var $e=eC(e),Me=$e.list,Oe=$e.default,he=[],Re=[],Ne=Me||[],je=lO(Oe),ve=!1;je.forEach(function(qe){if(typeof qe!="undefined"){var Ae=qe.type&&(qe.type.displayName||qe.type.name);!Ae&&typeof qe.type=="string"&&(Ae=qe.type),!Ae||Ae&&!(Ae==="li"||Ae.indexOf("f7-list-item")>=0||Ae.indexOf("f7-list-button")>=0||Ae.indexOf("f7-list-input")>=0)?ve?Re.push(qe):he.push(qe):Ae&&(ve=!0,Ne.push(qe))}});var Ge=G?"form":"div",Ze=an(a,"list",{inset:s,"xsmall-inset":o,"small-inset":l,"medium-inset":u,"large-inset":c,"xlarge-inset":d,"media-list":p,"simple-list":x,"links-list":k,"menu-list":C,sortable:f,"sortable-tap-hold":h,"sortable-enabled":m,"sortable-opposite":v,"accordion-list":b,"accordion-opposite":y,"contacts-list":w,"virtual-list":H,tab:U,"tab-active":j,"no-hairlines":E,"no-hairlines-md":N,"no-hairlines-ios":S,"no-hairlines-aurora":R,"no-hairlines-between":$,"no-hairlines-between-md":I,"no-hairlines-between-ios":A,"no-hairlines-between-aurora":O,"form-store-data":L,"inline-labels":V,"no-chevron":D,"chevron-center":z},Cn(e));return Ce.createElement(Ge,G1({id:n,ref:Z,style:i,className:Ze},K,{"data-sortable-move-elements":typeof g!="undefined"?g.toString():void 0,onSubmit:le}),Ce.createElement(TO.Provider,{value:{listIsMedia:p,listIsSimple:x,listIsSortable:f,listIsSortableOpposite:v}},$e["before-list"],he,Ne.length>0&&Ce.createElement("ul",null,Ne),$e["after-list"],Re))});_O.displayName="f7-list";var RN=_O;function q1(){return q1=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},q1.apply(this,arguments)}var MO=_e.exports.forwardRef(function(e,t){var r=e.className,a=e.id,n=e.style,i=e.children,s=e.tab,o=e.tabActive,l=e.ptr,u=e.ptrDistance,c=e.ptrPreloader,d=c===void 0?!0:c,p=e.ptrBottom,f=e.ptrMousewheel,h=e.infinite,m=e.infiniteTop,g=e.infiniteDistance,v=e.infinitePreloader,b=v===void 0?!0:v,y=e.hideBarsOnScroll,w=e.hideNavbarOnScroll,x=e.hideToolbarOnScroll,k=e.messagesContent,C=e.loginScreen,E=Vn(e),$=_e.exports.useRef(null),N=function(V){$.current===V&&Je(e,"ptrPullStart")},I=function(V){$.current===V&&Je(e,"ptrPullMove")},S=function(V){$.current===V&&Je(e,"ptrPullEnd")},A=function(V,H){$.current===V&&Je(e,"ptrRefresh",H)},R=function(V){$.current===V&&Je(e,"ptrDone")},O=function(V){$.current===V&&Je(e,"infinite")};_e.exports.useImperativeHandle(t,function(){return{el:$.current}}),Lb($,e);var D=function(){yn(function(){l&&(ye.on("ptrPullStart",N),ye.on("ptrPullMove",I),ye.on("ptrPullEnd",S),ye.on("ptrRefresh",A),ye.on("ptrDone",R)),h&&ye.on("infinite",O)})},z=function(){!ye||(ye.off("ptrPullStart",N),ye.off("ptrPullMove",I),ye.off("ptrPullEnd",S),ye.off("ptrRefresh",A),ye.off("ptrDone",R),ye.off("infinite",O))};Wr(function(){return D(),z});var U,j;l&&d&&(U=Ce.createElement("div",{className:"ptr-preloader"},Ce.createElement(H1,null),Ce.createElement("div",{className:"ptr-arrow"}))),h&&b&&(j=Ce.createElement(H1,{className:"infinite-scroll-preloader"}));var G=an(r,"page-content",{tab:s,"tab-active":o,"ptr-content":l,"ptr-bottom":p,"infinite-scroll-content":h,"infinite-scroll-top":m,"hide-bars-on-scroll":y,"hide-navbar-on-scroll":w,"hide-toolbar-on-scroll":x,"messages-content":k,"login-screen-content":C},Cn(e));return Ce.createElement("div",q1({id:a,style:n,className:G,"data-ptr-distance":u||void 0,"data-ptr-mousewheel":f||void 0,"data-infinite-distance":g||void 0,ref:$},E),p?null:U,m?j:null,i,m?null:j,p?U:null)});MO.displayName="f7-page-content";var Pq=MO;function zv(){return zv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},zv.apply(this,arguments)}var RO=_e.exports.forwardRef(function(e,t){var r=e.className,a=e.id,n=e.style,i=e.name,s=e.stacked,o=e.withSubnavbar,l=e.subnavbar,u=e.withNavbarLarge,c=e.navbarLarge,d=e.noNavbar,p=e.noToolbar,f=e.tabs,h=e.pageContent,m=h===void 0?!0:h,g=e.noSwipeback,v=e.ptr,b=e.ptrDistance,y=e.ptrPreloader,w=y===void 0?!0:y,x=e.ptrBottom,k=e.ptrMousewheel,C=e.infinite,E=e.infiniteTop,$=e.infiniteDistance,N=e.infinitePreloader,I=N===void 0?!0:N,S=e.hideBarsOnScroll,A=e.hideNavbarOnScroll,R=e.hideToolbarOnScroll,O=e.messagesContent,D=e.loginScreen,z=e.onPtrPullStart,U=e.onPtrPullMove,j=e.onPtrPullEnd,G=e.onPtrRefresh,L=e.onPtrDone,V=e.onInfinite,H=_e.exports.useRef(!1),Y=_e.exports.useRef(!1),K=_e.exports.useRef(!1),Z=_e.exports.useRef(!1),le=_e.exports.useRef(""),de=_e.exports.useRef(!1),ie=_e.exports.useRef(null),ue=_e.exports.useRef(!1),pe=_e.exports.useRef(!1),Se=Vn(e),ke=_e.exports.useRef(null),oe=function(Ee){ke.current===Ee.el&&Je(e,"pageMounted",Ee)},me=function(Ee){ke.current===Ee.el&&(typeof o=="undefined"&&typeof l=="undefined"&&(Ee.$navbarEl&&Ee.$navbarEl.length&&Ee.$navbarEl.find(".subnavbar").length||Ee.$el.children(".navbar").find(".subnavbar").length)&&(H.current=!0),typeof u=="undefined"&&typeof c=="undefined"&&Ee.$navbarEl&&Ee.$navbarEl.hasClass("navbar-large")&&(Y.current=!0),Je(e,"pageInit",Ee))},$e=function(Ee){ke.current===Ee.el&&Je(e,"pageReinit",Ee)},Me=function(Ee){ke.current===Ee.el&&(Ee.swipeBack||(Ee.from==="next"&&(le.current="page-next"),Ee.from==="previous"&&(le.current="page-previous")),Je(e,"pageBeforeIn",Ee))},Oe=function(Ee){ke.current===Ee.el&&Je(e,"pageBeforeOut",Ee)},he=function(Ee){ke.current===Ee.el&&(Ee.to==="next"&&(le.current="page-next"),Ee.to==="previous"&&(le.current="page-previous"),Je(e,"pageAfterOut",Ee))},Re=function(Ee){ke.current===Ee.el&&(le.current="page-current",Je(e,"pageAfterIn",Ee))},Ne=function(Ee){ke.current===Ee.el&&Je(e,"pageBeforeRemove",Ee)},je=function(Ee){ke.current===Ee.el&&Je(e,"pageBeforeUnmount",Ee)},ve=function(Ee){ke.current===Ee&&(de.current=!1)},Ge=function(Ee){ke.current===Ee&&(de.current=!0)},Ze=function(Ee,at){ke.current===Ee&&(le.current="page-"+at)},qe=function(Ee,at){ke.current===Ee&&(ie.current=at.role,ue.current=at.detailRoot)},Ae=function(Ee){ke.current===Ee&&(pe.current=!0)},rt=function(Ee){ke.current===Ee&&(pe.current=!1)},pt=function(Ee){ke.current===Ee&&(K.current=!0)},lr=function(Ee){ke.current===Ee&&(K.current=!1)},ln=function(Ee,at){ke.current===at&&(Z.current=!0)},jn=function(Ee,at){ke.current===at&&(Z.current=!1)},un=function(Ee){ke.current===Ee&&Je(e,"pageTabShow")},Gn=function(Ee){ke.current===Ee&&Je(e,"pageTabHide")};_e.exports.useImperativeHandle(t,function(){return{el:ke.current}});var Nr=function(){yn(function(){ye.on("pageMounted",oe),ye.on("pageInit",me),ye.on("pageReinit",$e),ye.on("pageBeforeIn",Me),ye.on("pageBeforeOut",Oe),ye.on("pageAfterOut",he),ye.on("pageAfterIn",Re),ye.on("pageBeforeRemove",Ne),ye.on("pageBeforeUnmount",je),ye.on("pageStack",ve),ye.on("pageUnstack",Ge),ye.on("pagePosition",Ze),ye.on("pageRole",qe),ye.on("pageMasterStack",Ae),ye.on("pageMasterUnstack",rt),ye.on("pageNavbarLargeCollapsed",pt),ye.on("pageNavbarLargeExpanded",lr),ye.on("cardOpened",ln),ye.on("cardClose",jn),ye.on("pageTabShow",un),ye.on("pageTabHide",Gn)})},Nn=function(){!ye||(ye.off("pageMounted",oe),ye.off("pageInit",me),ye.off("pageReinit",$e),ye.off("pageBeforeIn",Me),ye.off("pageBeforeOut",Oe),ye.off("pageAfterOut",he),ye.off("pageAfterIn",Re),ye.off("pageBeforeRemove",Ne),ye.off("pageBeforeUnmount",je),ye.off("pageStack",ve),ye.off("pageUnstack",Ge),ye.off("pagePosition",Ze),ye.off("pageRole",qe),ye.off("pageMasterStack",Ae),ye.off("pageMasterUnstack",rt),ye.off("pageNavbarLargeCollapsed",pt),ye.off("pageNavbarLargeExpanded",lr),ye.off("cardOpened",ln),ye.off("cardClose",jn),ye.off("pageTabShow",un),ye.off("pageTabHide",Gn))};Wr(function(){return Nr(),Nn});var pa=eC(e),Tt=[],it=[],An=pa.static,ir=pa.fixed,ur=pa.default,cr="navbar toolbar tabbar subnavbar searchbar messagebar fab list-index panel".split(" ").map(function(ge){return"f7-"+ge}),di,zu,Di=O;ur&&ur.forEach(function(ge){if(typeof ge!="undefined"){var Ee=!1,at=ge.type&&(ge.type.displayName||ge.type.name);if(!at){m&&it.push(ge);return}at==="f7-subnavbar"&&(di=!0),at==="f7-navbar"&&ge.props&&ge.props.large&&(zu=!0),typeof Di=="undefined"&&at==="f7-messages"&&(Di=!0),cr.indexOf(at)>=0&&(Ee=!0),m&&(Ee?Tt.push(ge):it.push(ge))}});var gs=typeof l=="undefined"&&typeof o=="undefined"?di||H.current:!1,pi=typeof c=="undefined"&&typeof u=="undefined"?zu||Y.current:!1,vs=an(r,"page",le.current,{stacked:s&&!de.current,tabs:f,"page-with-subnavbar":l||o||gs,"page-with-navbar-large":c||u||pi,"no-navbar":d,"no-toolbar":p,"no-swipeback":g,"page-master":ie.current==="master","page-master-detail":ie.current==="detail","page-master-detail-root":ue.current===!0,"page-master-stacked":pe.current===!0,"page-with-navbar-large-collapsed":K.current===!0,"page-with-card-opened":Z.current===!0,"login-screen-page":D},Cn(e));if(!m)return Ce.createElement("div",zv({id:a,style:n,className:vs,"data-name":i,ref:ke},Se),ir,An,ur);var fe=Ce.createElement(Pq,{ptr:v,ptrDistance:b,ptrPreloader:w,ptrBottom:x,ptrMousewheel:k,infinite:C,infiniteTop:E,infiniteDistance:$,infinitePreloader:I,hideBarsOnScroll:S,hideNavbarOnScroll:A,hideToolbarOnScroll:R,messagesContent:O||Di,loginScreen:D,onPtrPullStart:z,onPtrPullMove:U,onPtrPullEnd:j,onPtrRefresh:G,onPtrDone:L,onInfinite:V},An,it);return Ce.createElement("div",zv({id:a,style:n,className:vs,"data-name":i,ref:ke},Se),Tt,ir,fe)});RO.displayName="f7-page";var OO=RO;function X1(){return X1=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},X1.apply(this,arguments)}var PO=_e.exports.forwardRef(function(e,t){var r=_e.exports.useRef(null),a=e.className,n=e.id,i=e.style,s=e.init,o=s===void 0?!0:s,l=e.value,u=l===void 0?0:l,c=e.min,d=c===void 0?0:c,p=e.max,f=p===void 0?100:p,h=e.step,m=h===void 0?1:h,g=e.formatValue,v=e.name,b=e.inputId,y=e.input,w=y===void 0?!0:y,x=e.inputType,k=x===void 0?"text":x,C=e.inputReadonly,E=C===void 0?!1:C,$=e.autorepeat,N=$===void 0?!1:$,I=e.autorepeatDynamic,S=I===void 0?!1:I,A=e.wraps,R=A===void 0?!1:A,O=e.manualInputMode,D=O===void 0?!1:O,z=e.decimalPoint,U=z===void 0?4:z,j=e.buttonsEndInputMode,G=j===void 0?!0:j,L=e.disabled,V=e.buttonsOnly,H=e.round,Y=e.roundMd,K=e.roundIos,Z=e.roundAurora,le=e.fill,de=e.fillMd,ie=e.fillIos,ue=e.fillAurora,pe=e.large,Se=e.largeMd,ke=e.largeIos,oe=e.largeAurora,me=e.small,$e=e.smallMd,Me=e.smallIos,Oe=e.smallAurora,he=e.raised,Re=e.raisedMd,Ne=e.raisedIos,je=e.raisedAurora,ve=Vn(e),Ge=_e.exports.useRef(null),Ze=function(){!r.current||r.current.increment()},qe=function(){!r.current||r.current.decrement()},Ae=function(ur){r.current&&r.current.setValue&&r.current.setValue(ur)},rt=function(){if(r.current&&r.current.getValue)return r.current.getValue()},pt=function(ur){Je(e,"input",ur,r.current)},lr=function(ur){Je(e,"change",ur,r.current)},ln=function(ur){Je(e,"stepperMinusClick",ur,r.current)},jn=function(ur){Je(e,"stepperPlusClick",ur,r.current)};_e.exports.useImperativeHandle(t,function(){return{el:Ge.current,f7Stepper:function(){return r.current},increment:Ze,decrement:qe,setValue:Ae,getValue:rt}}),Th(u,function(ir){!r.current||r.current.setValue(ir)});var un=function(ur,cr){Je(e,"stepperChange",cr)},Gn=function(ur){!r.current||r.current[ur]("change",un)},Nr=function(){yn(function(){!o||!Ge.current||(r.current=ye.stepper.create(Fv({el:Ge.current,min:d,max:f,value:u,step:m,formatValue:g,autorepeat:N,autorepeatDynamic:S,wraps:R,manualInputMode:D,decimalPoint:U,buttonsEndInputMode:G})),Gn("on"))})},Nn=function(){r.current&&r.current.destroy&&r.current.destroy(),r.current=null};Wr(function(){return Gn("on"),function(){Gn("off")}}),Wr(function(){return Nr(),Nn},[]);var pa,Tt;if(w&&!V){var it=Ce.createElement("input",{name:v,id:b,type:k,min:k==="number"?d:void 0,max:k==="number"?f:void 0,step:k==="number"?m:void 0,onInput:pt,onChange:lr,value:u,readOnly:E});pa=Ce.createElement("div",{className:"stepper-input-wrap"},it)}!w&&!V&&(Tt=Ce.createElement("div",{className:"stepper-value"},u));var An=an(a,"stepper",{disabled:L,"stepper-round":H,"stepper-round-ios":K,"stepper-round-md":Y,"stepper-round-aurora":Z,"stepper-fill":le,"stepper-fill-ios":ie,"stepper-fill-md":de,"stepper-fill-aurora":ue,"stepper-large":pe,"stepper-large-ios":ke,"stepper-large-md":Se,"stepper-large-aurora":oe,"stepper-small":me,"stepper-small-ios":Me,"stepper-small-md":$e,"stepper-small-aurora":Oe,"stepper-raised":he,"stepper-raised-ios":Ne,"stepper-raised-md":Re,"stepper-raised-aurora":je},Cn(e));return Ce.createElement("div",X1({ref:Ge,id:n,style:i,className:An},ve),Ce.createElement("div",{className:"stepper-button-minus",onClick:ln}),pa,Tt,Ce.createElement("div",{className:"stepper-button-plus",onClick:jn}))});PO.displayName="f7-stepper";var Dq=PO,Fq=Ce.createContext({route:null,router:null}),Lq=function(t,r,a){var n=_e.exports.lazy(t);return Ce.createElement(_e.exports.Suspense,{fallback:null,key:a},Ce.createElement(n,r))};function Y1(){return Y1=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Y1.apply(this,arguments)}var zq=function(t,r){var a,n=t.getInitialUrl(),i=n.initialUrl,s=t.findMatchingRoute(i),o={};s&&s.route&&s.route.options&&(o=s.route.options.props);var l=function(c){return c.master===!0?!0:typeof c.master=="function"?c.master(t.app):!1};return s&&s.route&&(s.route.component||s.route.asyncComponent)&&!l(s.route)&&(a={component:s.route.component||s.route.asyncComponent,initialComponent:r,id:Zg(),isAsync:!!s.route.asyncComponent,props:Y1({f7route:s,f7router:t},o,s.params)}),{initialPage:a,initialRoute:s}};function uc(){return uc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},uc.apply(this,arguments)}var DO=_e.exports.forwardRef(function(e,t){var r=e.className,a=e.id,n=e.style,i=e.children,s=e.init,o=s===void 0?!0:s,l=e.main,u=e.tab,c=e.tabActive,d=e.url,p=e.browserHistoryInitialMatch,f=p===void 0?!0:p,h=Ce.Children.toArray(i),m=h.filter(function(V){return V.props&&V.props.initialPage})[0],g=h.filter(function(V){return!V.props||!V.props.initialPage}),v=Vn(e),b=_e.exports.useRef(null),y=_e.exports.useRef(null),w=_e.exports.useRef(null),x,k,C=function(H){Je(e,"viewInit",H),o||(w.current.instance=H,b.current=w.current.instance)};if(ye&&!b.current&&o){var E=NN();if(b.current=ye.views.create(y.current,uc({routerId:E,init:!1},Fv(e),{browserHistoryInitialMatch:f,on:{init:C}})),w.current={routerId:E,instance:b.current},Mn.views.push(w.current),b.current&&b.current.router&&(d||l)){var $=zq(b.current.router,m);x=$.initialPage,k=$.initialRoute,k&&k.route&&k.route.masterRoute&&(x=void 0,k=void 0)}}var N=_e.exports.useState(x?[x]:[]),I=N[0],S=N[1],A=function(H,Y){Je(e,"viewResize",Y)},R=function(H){var Y=H;Je(e,"swipeBackMove",Y)},O=function(H){var Y=H;Je(e,"swipeBackBeforeChange",Y)},D=function(H){var Y=H;Je(e,"swipeBackAfterChange",Y)},z=function(H){var Y=H;Je(e,"swipeBackBeforeReset",Y)},U=function(H){var Y=H;Je(e,"swipeBackAfterReset",Y)};_e.exports.useImperativeHandle(t,function(){return{el:y.current,f7View:function(){return b.current}}});var j=function(){yn(function(){if(b.current)w.current.el=y.current,w.current.pages=I,w.current.setPages=function(Y){S([].concat(Y))},x&&x.isAsync&&!x.initialComponent?x.component().then(function(){setTimeout(function(){b.current.init(y.current),x&&(x.el=b.current.router.currentPageEl,k&&k.route&&k.route.keepAlive&&(k.route.keepAliveData={pageEl:x.el}))},100)}):(b.current.init(y.current),x&&(x.el=b.current.router.currentPageEl,k&&k.route&&k.route.keepAlive&&(k.route.keepAliveData={pageEl:x.el})));else{var H=NN();w.current={el:y.current,routerId:H,pages:I,instance:b.current,setPages:function(K){S([].concat(K))}},Mn.views.push(w.current),w.current.instance=ye.views.create(y.current,uc({routerId:H},Fv(e),{browserHistoryInitialMatch:f,on:{init:C}})),b.current=w.current.instance}!o||(b.current.on("resize",A),b.current.on("swipebackMove",R),b.current.on("swipebackBeforeChange",O),b.current.on("swipebackAfterChange",D),b.current.on("swipebackBeforeReset",z),b.current.on("swipebackAfterReset",U))})},G=function(){b.current&&(b.current.off("resize",A),b.current.off("swipebackMove",R),b.current.off("swipebackBeforeChange",O),b.current.off("swipebackAfterChange",D),b.current.off("swipebackBeforeReset",z),b.current.off("swipebackAfterReset",U),b.current.destroy&&b.current.destroy(),b.current=null),Mn.views.splice(Mn.views.indexOf(w.current),1),w.current=null};Wr(function(){return j(),G},[]),Wr(function(){w.current&&ye&&Ma.emit("viewRouterDidUpdate",w.current)}),Lb(y,e);var L=an(r,"view",{"view-main":l,"tab-active":c,tab:u},Cn(e));return Ce.createElement("div",uc({id:a,style:n,className:L,ref:y},v),g,I.map(function(V){var H=V.component,Y=V.id,K=V.props,Z=V.isAsync,le=V.initialComponent;return Ce.createElement(Fq.Provider,{key:Y,value:{router:K.f7router,route:K.f7route}},le?Ce.cloneElement(le,uc({},K)):Z?Lq(H,K):Ce.createElement(H,K))}))});DO.displayName="f7-view";var Bq=DO;var ks={f7:null,handleSplashscreen:function(){var e=ks.f7;!window.navigator.splashscreen||e.device.electron||setTimeout(()=>{window.navigator.splashscreen.hide()},2e3)},handleAndroidBackButton:function(){var e=ks.f7;const t=e.$;e.device.electron||document.addEventListener("backbutton",function(r){if(t(".actions-modal.modal-in").length)return e.actions.close(".actions-modal.modal-in"),r.preventDefault(),!1;if(t(".dialog.modal-in").length)return e.dialog.close(".dialog.modal-in"),r.preventDefault(),!1;if(t(".sheet-modal.modal-in").length)return e.sheet.close(".sheet-modal.modal-in"),r.preventDefault(),!1;if(t(".popover.modal-in").length)return e.popover.close(".popover.modal-in"),r.preventDefault(),!1;if(t(".popup.modal-in").length){if(t(".popup.modal-in>.view").length){const n=e.views.get(".popup.modal-in>.view");if(n&&n.router&&n.router.history.length>1)return n.router.back(),r.preventDefault(),!1}return e.popup.close(".popup.modal-in"),r.preventDefault(),!1}if(t(".login-screen.modal-in").length)return e.loginScreen.close(".login-screen.modal-in"),r.preventDefault(),!1;if(t(".page-current .searchbar-enabled").length)return e.searchbar.disable(".page-current .searchbar-enabled"),r.preventDefault(),!1;if(t(".page-current .card-expandable.card-opened").length)return e.card.close(".page-current .card-expandable.card-opened"),r.preventDefault(),!1;const a=e.views.current;if(a&&a.router&&a.router.history.length>1)return a.router.back(),r.preventDefault(),!1;if(t(".panel.panel-in").length)return e.panel.close(".panel.panel-in"),r.preventDefault(),!1},!1)},handleKeyboard:function(){var e=ks.f7;if(!(!window.Keyboard||!window.Keyboard.shrinkView||e.device.electron)){var t=e.$;window.Keyboard.shrinkView(!1),window.Keyboard.disableScrollingInShrinkView(!0),window.Keyboard.hideFormAccessoryBar(!0),window.addEventListener("keyboardWillShow",()=>{e.input.scrollIntoView(document.activeElement,0,!0,!0)}),window.addEventListener("keyboardDidShow",()=>{e.input.scrollIntoView(document.activeElement,0,!0,!0)}),window.addEventListener("keyboardDidHide",()=>{document.activeElement&&t(document.activeElement).parents(".messagebar").length||window.Keyboard.hideFormAccessoryBar(!1)}),window.addEventListener("keyboardHeightWillChange",r=>{var a=r.keyboardHeight;a>0?(document.body.style.height=`calc(100% - ${a}px)`,t("html").addClass("device-with-keyboard")):(document.body.style.height="",t("html").removeClass("device-with-keyboard"))}),t(document).on("touchstart","input, textarea, select",function(r){var a=r.target.nodeName.toLowerCase(),n=r.target.type,i=["datetime-local","time","date","datetime"];a==="select"||i.indexOf(n)>=0?window.Keyboard.hideFormAccessoryBar(!1):window.Keyboard.hideFormAccessoryBar(!0)},!0)}},init:function(e){ks.f7=e,document.addEventListener("deviceready",()=>{ks.handleAndroidBackButton(),ks.handleSplashscreen(),ks.handleKeyboard()})}},Vq=Object.defineProperty,Wq=(e=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(e,{get:(t,r)=>(typeof require!="undefined"?require:t)[r]}):e)(function(e){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')}),tC=(e,t)=>{for(var r in t)Vq(e,r,{get:t[r],enumerable:!0})},Hq={};tC(Hq,{Abs:()=>ad,Acos:()=>id,Acosh:()=>sd,AdadeltaOptimizer:()=>Yy,AdagradOptimizer:()=>Ky,AdamOptimizer:()=>Zy,AdamaxOptimizer:()=>Qy,Add:()=>vo,AddN:()=>Ol,All:()=>od,Any:()=>ld,ArgMax:()=>Pl,ArgMin:()=>_h,Asin:()=>ud,Asinh:()=>cd,Atan:()=>dd,Atan2:()=>fd,Atanh:()=>pd,AvgPool:()=>Dl,AvgPool3D:()=>Mh,AvgPool3DGrad:()=>Hb,AvgPoolGrad:()=>Wb,BackendWasm:()=>N4,BatchMatMul:()=>Fl,BatchToSpaceND:()=>hd,Bincount:()=>Ub,BroadcastArgs:()=>jb,BroadcastTo:()=>JO,Callback:()=>oL,CallbackList:()=>dF,Cast:()=>Ll,Ceil:()=>zl,ClipByValue:()=>bo,Complex:()=>Gb,ComplexAbs:()=>Rh,Concat:()=>md,Conv2D:()=>Bl,Conv2DBackpropFilter:()=>qb,Conv2DBackpropInput:()=>Vl,Conv3D:()=>Oh,Conv3DBackpropFilterV2:()=>Xb,Conv3DBackpropInputV2:()=>Yb,Cos:()=>Wl,Cosh:()=>Hl,CropAndResize:()=>vd,Cumprod:()=>gd,Cumsum:()=>Ul,CustomCallback:()=>fF,DataStorage:()=>zb,DenseBincount:()=>Kb,DepthToSpace:()=>bd,DepthwiseConv2dNative:()=>jl,DepthwiseConv2dNativeBackpropFilter:()=>Zb,DepthwiseConv2dNativeBackpropInput:()=>Qb,Diag:()=>Jb,Dilation2D:()=>Ph,Dilation2DBackpropFilter:()=>Uv,Dilation2DBackpropInput:()=>Hv,ENV:()=>oC,EarlyStopping:()=>lL,Einsum:()=>ey,Elu:()=>ql,EluGrad:()=>ty,Environment:()=>ZO,Equal:()=>wd,Erf:()=>yd,Exp:()=>Xl,ExpandDims:()=>xd,Expm1:()=>kd,FFT:()=>ry,Fill:()=>Dh,FlipLeftRight:()=>Ed,Floor:()=>Yl,FloorDiv:()=>Kl,FromPixels:()=>jv,FusedBatchNorm:()=>Zl,FusedConv2D:()=>dl,FusedDepthwiseConv2D:()=>pl,GPGPUContext:()=>ov,GatherNd:()=>Sd,GatherV2:()=>Cd,GraphModel:()=>W$,Greater:()=>$d,GreaterEqual:()=>Ql,History:()=>pF,IFFT:()=>ny,Identity:()=>Jl,Imag:()=>ay,InputSpec:()=>kr,IsFinite:()=>Id,IsInf:()=>Td,IsNan:()=>Nd,KernelBackend:()=>Ah,LRN:()=>zh,LRNGrad:()=>sy,LayerVariable:()=>aF,LayersModel:()=>as,LeakyRelu:()=>eu,Less:()=>Ad,LessEqual:()=>_d,LinSpace:()=>iy,Log:()=>tu,Log1p:()=>Md,LogSoftmax:()=>eP,LogicalAnd:()=>Rd,LogicalNot:()=>Fh,LogicalOr:()=>Lh,LowerBound:()=>L8,MathBackendWebGL:()=>E0,Max:()=>ru,MaxPool:()=>au,MaxPool3D:()=>Bh,MaxPool3DGrad:()=>ly,MaxPoolGrad:()=>oy,MaxPoolWithArgmax:()=>uy,Maximum:()=>nu,Mean:()=>iu,Min:()=>su,Minimum:()=>ou,MirrorPad:()=>lu,Mod:()=>Od,MomentumOptimizer:()=>Jy,Multinomial:()=>cy,Multiply:()=>uu,Neg:()=>Pd,NonMaxSuppressionV3:()=>Fd,NonMaxSuppressionV4:()=>Ld,NonMaxSuppressionV5:()=>zd,NotEqual:()=>Dd,OP_SCOPE_SUFFIX:()=>cP,OneHot:()=>cu,OnesLike:()=>Bd,Optimizer:()=>hs,OptimizerConstructors:()=>Es,Pack:()=>Vd,PadV2:()=>du,Pool:()=>z8,Pow:()=>pu,Prelu:()=>fu,Prod:()=>hu,RMSPropOptimizer:()=>e0,RNN:()=>Pi,Range:()=>Vh,Rank:()=>J1,Real:()=>dy,RealDiv:()=>Gl,Reciprocal:()=>Wd,Reduction:()=>fn,Relu:()=>mu,Relu6:()=>vu,Reshape:()=>Hd,ResizeBilinear:()=>gu,ResizeBilinearGrad:()=>fy,ResizeNearestNeighbor:()=>Wh,ResizeNearestNeighborGrad:()=>py,Reverse:()=>bu,RotateWithOffset:()=>ip,Round:()=>yu,Rsqrt:()=>wu,SGDOptimizer:()=>hm,ScatterNd:()=>Ud,SearchSorted:()=>hy,Select:()=>jd,Selu:()=>Gd,Sequential:()=>Vc,Sigmoid:()=>ku,Sign:()=>Yd,Sin:()=>xu,Sinh:()=>Xd,Slice:()=>qd,Softmax:()=>Su,Softplus:()=>Kd,SpaceToBatchND:()=>Zd,SparseFillEmptyRows:()=>Hh,SparseReshape:()=>Jd,SparseSegmentMean:()=>Uh,SparseSegmentSum:()=>jh,SparseToDense:()=>my,SplitV:()=>Qd,Sqrt:()=>Eu,Square:()=>Gh,SquaredDifference:()=>$u,Step:()=>wo,StridedSlice:()=>ep,StringNGrams:()=>gy,StringSplit:()=>vy,StringToHashBucketFast:()=>by,Sub:()=>Iu,Sum:()=>Cu,SymbolicTensor:()=>ti,Tan:()=>Tu,Tanh:()=>Nu,Tensor:()=>ht,TensorBuffer:()=>_r,Tile:()=>yo,TopK:()=>tp,Transform:()=>rp,Transpose:()=>ts,Unique:()=>yy,Unpack:()=>np,UnsortedSegmentSum:()=>qh,UpperBound:()=>B8,Variable:()=>fl,ZerosLike:()=>ap,_FusedMatMul:()=>cl,abs:()=>xr,acos:()=>EC,acosh:()=>CC,add:()=>xe,addN:()=>GP,all:()=>Cy,any:()=>lh,argMax:()=>gl,argMin:()=>SC,asin:()=>$C,asinh:()=>IC,atan:()=>TC,atan2:()=>NC,atanh:()=>AC,avgPool:()=>ps,avgPool3d:()=>MC,backend:()=>TP,backend_util:()=>B,basicLSTMCell:()=>OK,batchNorm:()=>ao,batchNorm2d:()=>KP,batchNorm3d:()=>ZP,batchNorm4d:()=>QP,batchToSpaceND:()=>rm,bincount:()=>RC,booleanMaskAsync:()=>BQ,broadcastArgs:()=>JP,broadcastTo:()=>Sc,broadcast_util:()=>sp,browser:()=>em,buffer:()=>gt,callbacks:()=>goe,cast:()=>Te,ceil:()=>OC,clipByValue:()=>sn,clone:()=>rs,complex:()=>os,concat:()=>Ot,concat1d:()=>eD,concat2d:()=>tD,concat3d:()=>rD,concat4d:()=>nD,constraints:()=>oF,conv1d:()=>Sy,conv2d:()=>wn,conv2dTranspose:()=>$y,conv3d:()=>DC,conv3dTranspose:()=>iD,copyRegisteredKernels:()=>U8,cos:()=>nm,cosh:()=>Iy,cosineWindow:()=>cS,cumprod:()=>uh,cumsum:()=>Ty,customGrad:()=>Ii,data:()=>ML,denseBincount:()=>sD,deprecationWarn:()=>IP,depthToSpace:()=>FC,depthwiseConv2d:()=>Au,deregisterOp:()=>yoe,device_util:()=>Zh,diag:()=>d9,dilation2d:()=>LC,disableDeprecationWarnings:()=>gY,dispose:()=>lt,disposeVariables:()=>vY,div:()=>Ve,divNoNan:()=>zC,dot:()=>oD,dropout:()=>AD,einsum:()=>lD,elu:()=>op,enableDebugMode:()=>mY,enableProdMode:()=>hY,enclosingPowerOfTwo:()=>_D,engine:()=>gi,env:()=>ce,equal:()=>oa,erf:()=>BC,euclideanNorm:()=>HC,exp:()=>xn,expandDims:()=>pn,expm1:()=>UC,eye:()=>jC,fft:()=>pm,fill:()=>Ea,findBackend:()=>CY,findBackendFactory:()=>SY,floor:()=>lp,floorDiv:()=>Ey,forceHalfFloat:()=>Kz,fused:()=>io,gather:()=>yl,gatherND:()=>ND,gather_util:()=>vC,getBackend:()=>kY,getGradient:()=>Z1,getKernel:()=>Gv,getKernelsForBackend:()=>qv,getThreadsCount:()=>ETe,gpgpu_util:()=>Tz,grad:()=>Y9,grads:()=>K9,greater:()=>Wn,greaterEqual:()=>Eo,ifft:()=>Lc,imag:()=>Jh,image:()=>ta,inTopKAsync:()=>KQ,initializers:()=>lF,input:()=>IF,io:()=>rn,irfft:()=>Wy,isFinite:()=>fD,isInf:()=>hD,isNaN:()=>GC,keep:()=>zr,kernel_impls:()=>Oi,layers:()=>uF,leakyRelu:()=>im,less:()=>Ny,lessEqual:()=>Co,linalg:()=>VD,linspace:()=>mD,loadGraphModel:()=>kle,loadGraphModelSync:()=>Ele,loadLayersModel:()=>$ie,localResponseNormalization:()=>qC,log:()=>la,log1p:()=>sm,logSigmoid:()=>vD,logSoftmax:()=>_y,logSumExp:()=>XC,logicalAnd:()=>Va,logicalNot:()=>om,logicalOr:()=>My,logicalXor:()=>bD,losses:()=>Mee,lowerBound:()=>yD,matMul:()=>ft,math:()=>$P,max:()=>Fa,maxPool:()=>Dr,maxPool3d:()=>KC,maxPoolWithArgmax:()=>wD,maximum:()=>Ri,mean:()=>Qt,memory:()=>Kv,meshgrid:()=>hZ,metrics:()=>aL,min:()=>ch,minimum:()=>up,mirrorPad:()=>ZC,mod:()=>QC,model:()=>Cie,models:()=>iL,moments:()=>Ry,movingAverage:()=>WQ,mul:()=>ee,multiRNNCell:()=>wZ,multinomial:()=>xD,neg:()=>Gt,nextFrame:()=>fS,norm:()=>am,notEqual:()=>wl,oneHot:()=>Pc,ones:()=>ea,onesLike:()=>ua,op:()=>J,outerProduct:()=>SZ,pad:()=>ui,pad1d:()=>TZ,pad2d:()=>AZ,pad3d:()=>MZ,pad4d:()=>OZ,pool:()=>kD,pow:()=>ls,prelu:()=>um,print:()=>wP,prod:()=>Oy,profile:()=>bY,rand:()=>WZ,randomGamma:()=>GZ,randomNormal:()=>ED,randomUniform:()=>cp,range:()=>Fc,ready:()=>xY,real:()=>Dc,reciprocal:()=>tS,registerBackend:()=>ky,registerCallbackConstructor:()=>Iie,registerGradient:()=>tP,registerKernel:()=>Xh,registerOp:()=>boe,regularizers:()=>sL,relu:()=>At,relu6:()=>Py,removeBackend:()=>EY,reshape:()=>re,reverse:()=>ca,reverse1d:()=>eQ,reverse2d:()=>rQ,reverse3d:()=>aQ,reverse4d:()=>sQ,rfft:()=>fm,round:()=>Dy,rsqrt:()=>Fy,scalar:()=>et,scatterND:()=>TD,scatter_util:()=>bC,searchSorted:()=>YC,selu:()=>Ly,separableConv2d:()=>cm,sequential:()=>Sie,serialization:()=>Ie,setBackend:()=>wY,setPlatform:()=>$Y,setThreadsCount:()=>kTe,setWasmPath:()=>wTe,setWasmPaths:()=>xTe,setWebGLContext:()=>Q3,setdiff1dAsync:()=>CD,sigmoid:()=>Da,sign:()=>rS,signal:()=>_ee,sin:()=>zy,sinh:()=>By,slice:()=>bt,slice1d:()=>Vy,slice2d:()=>nS,slice3d:()=>dm,slice4d:()=>dh,slice_util:()=>Mr,softmax:()=>So,softplus:()=>_u,spaceToBatchND:()=>lm,sparse:()=>ff,sparseToDense:()=>uS,spectral:()=>Aee,split:()=>Pn,sqrt:()=>Yr,square:()=>Rt,squaredDifference:()=>Hy,squeeze:()=>Ti,stack:()=>Vr,step:()=>dp,stridedSlice:()=>aS,string:()=>ev,sub:()=>Fe,sum:()=>Ue,sumOutType:()=>xy,tan:()=>iS,tanh:()=>vl,tensor:()=>ka,tensor1d:()=>Nt,tensor2d:()=>ns,tensor3d:()=>gC,tensor4d:()=>xl,tensor5d:()=>_Q,tensor6d:()=>MQ,tensor_util:()=>ni,test_util:()=>HP,tidy:()=>te,tile:()=>Jn,time:()=>yY,topk:()=>sS,train:()=>Lo,transpose:()=>ct,truncatedNormal:()=>Uy,unique:()=>Qv,unregisterGradient:()=>H8,unregisterKernel:()=>W8,unsortedSegmentSum:()=>oS,unstack:()=>hr,upcastType:()=>Ca,upperBound:()=>SD,util:()=>_,valueAndGrad:()=>Z9,valueAndGrads:()=>Q9,variable:()=>$D,variableGrads:()=>gD,version:()=>OTe,version_converter:()=>Sle,version_core:()=>rK,version_layers:()=>PS,version_wasm:()=>CTe,version_webgl:()=>Bve,webgl:()=>Vve,webgl_util:()=>Z3,where:()=>on,whereAsync:()=>lS,zeros:()=>Jt,zerosLike:()=>xt});var Uq=Object.create,rC=Object.defineProperty,jq=Object.getOwnPropertyDescriptor,Gq=Object.getOwnPropertyNames,qq=Object.getPrototypeOf,Xq=Object.prototype.hasOwnProperty,zt=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),ut=(e,t)=>{for(var r in t)rC(e,r,{get:t[r],enumerable:!0})},Yq=(e,t,r,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of Gq(t))!Xq.call(e,n)&&n!==r&&rC(e,n,{get:()=>t[n],enumerable:!(a=jq(t,n))||a.enumerable});return e},Ml=(e,t,r)=>(r=e!=null?Uq(qq(e)):{},Yq(t||!e||!e.__esModule?rC(r,"default",{value:e,enumerable:!0}):r,e)),Kq=zt((e,t)=>{t.exports=a;var r=null;try{r=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function a(S,A,R){this.low=S|0,this.high=A|0,this.unsigned=!!R}a.prototype.__isLong__,Object.defineProperty(a.prototype,"__isLong__",{value:!0});function n(S){return(S&&S.__isLong__)===!0}a.isLong=n;var i={},s={};function o(S,A){var R,O,D;return A?(S>>>=0,(D=0<=S&&S<256)&&(O=s[S],O)?O:(R=u(S,(S|0)<0?-1:0,!0),D&&(s[S]=R),R)):(S|=0,(D=-128<=S&&S<128)&&(O=i[S],O)?O:(R=u(S,S<0?-1:0,!1),D&&(i[S]=R),R))}a.fromInt=o;function l(S,A){if(isNaN(S))return A?w:y;if(A){if(S<0)return w;if(S>=g)return $}else{if(S<=-v)return N;if(S+1>=v)return E}return S<0?l(-S,A).neg():u(S%m|0,S/m|0,A)}a.fromNumber=l;function u(S,A,R){return new a(S,A,R)}a.fromBits=u;var c=Math.pow;function d(S,A,R){if(S.length===0)throw Error("empty string");if(S==="NaN"||S==="Infinity"||S==="+Infinity"||S==="-Infinity")return y;if(typeof A=="number"?(R=A,A=!1):A=!!A,R=R||10,R<2||36<R)throw RangeError("radix");var O;if((O=S.indexOf("-"))>0)throw Error("interior hyphen");if(O===0)return d(S.substring(1),A,R).neg();for(var D=l(c(R,8)),z=y,U=0;U<S.length;U+=8){var j=Math.min(8,S.length-U),G=parseInt(S.substring(U,U+j),R);if(j<8){var L=l(c(R,j));z=z.mul(L).add(l(G))}else z=z.mul(D),z=z.add(l(G))}return z.unsigned=A,z}a.fromString=d;function p(S,A){return typeof S=="number"?l(S,A):typeof S=="string"?d(S,A):u(S.low,S.high,typeof A=="boolean"?A:S.unsigned)}a.fromValue=p;var f=1<<16,h=1<<24,m=f*f,g=m*m,v=g/2,b=o(h),y=o(0);a.ZERO=y;var w=o(0,!0);a.UZERO=w;var x=o(1);a.ONE=x;var k=o(1,!0);a.UONE=k;var C=o(-1);a.NEG_ONE=C;var E=u(-1,2147483647,!1);a.MAX_VALUE=E;var $=u(-1,-1,!0);a.MAX_UNSIGNED_VALUE=$;var N=u(0,-2147483648,!1);a.MIN_VALUE=N;var I=a.prototype;I.toInt=function(){return this.unsigned?this.low>>>0:this.low},I.toNumber=function(){return this.unsigned?(this.high>>>0)*m+(this.low>>>0):this.high*m+(this.low>>>0)},I.toString=function(S){if(S=S||10,S<2||36<S)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(N)){var A=l(S),R=this.div(A),O=R.mul(A).sub(this);return R.toString(S)+O.toInt().toString(S)}else return"-"+this.neg().toString(S);for(var D=l(c(S,6),this.unsigned),z=this,U="";;){var j=z.div(D),G=z.sub(j.mul(D)).toInt()>>>0,L=G.toString(S);if(z=j,z.isZero())return L+U;for(;L.length<6;)L="0"+L;U=""+L+U}},I.getHighBits=function(){return this.high},I.getHighBitsUnsigned=function(){return this.high>>>0},I.getLowBits=function(){return this.low},I.getLowBitsUnsigned=function(){return this.low>>>0},I.getNumBitsAbs=function(){if(this.isNegative())return this.eq(N)?64:this.neg().getNumBitsAbs();for(var S=this.high!=0?this.high:this.low,A=31;A>0&&(S&1<<A)==0;A--);return this.high!=0?A+33:A+1},I.isZero=function(){return this.high===0&&this.low===0},I.eqz=I.isZero,I.isNegative=function(){return!this.unsigned&&this.high<0},I.isPositive=function(){return this.unsigned||this.high>=0},I.isOdd=function(){return(this.low&1)===1},I.isEven=function(){return(this.low&1)===0},I.equals=function(S){return n(S)||(S=p(S)),this.unsigned!==S.unsigned&&this.high>>>31===1&&S.high>>>31===1?!1:this.high===S.high&&this.low===S.low},I.eq=I.equals,I.notEquals=function(S){return!this.eq(S)},I.neq=I.notEquals,I.ne=I.notEquals,I.lessThan=function(S){return this.comp(S)<0},I.lt=I.lessThan,I.lessThanOrEqual=function(S){return this.comp(S)<=0},I.lte=I.lessThanOrEqual,I.le=I.lessThanOrEqual,I.greaterThan=function(S){return this.comp(S)>0},I.gt=I.greaterThan,I.greaterThanOrEqual=function(S){return this.comp(S)>=0},I.gte=I.greaterThanOrEqual,I.ge=I.greaterThanOrEqual,I.compare=function(S){if(n(S)||(S=p(S)),this.eq(S))return 0;var A=this.isNegative(),R=S.isNegative();return A&&!R?-1:!A&&R?1:this.unsigned?S.high>>>0>this.high>>>0||S.high===this.high&&S.low>>>0>this.low>>>0?-1:1:this.sub(S).isNegative()?-1:1},I.comp=I.compare,I.negate=function(){return!this.unsigned&&this.eq(N)?N:this.not().add(x)},I.neg=I.negate,I.add=function(S){n(S)||(S=p(S));var A=this.high>>>16,R=this.high&65535,O=this.low>>>16,D=this.low&65535,z=S.high>>>16,U=S.high&65535,j=S.low>>>16,G=S.low&65535,L=0,V=0,H=0,Y=0;return Y+=D+G,H+=Y>>>16,Y&=65535,H+=O+j,V+=H>>>16,H&=65535,V+=R+U,L+=V>>>16,V&=65535,L+=A+z,L&=65535,u(H<<16|Y,L<<16|V,this.unsigned)},I.subtract=function(S){return n(S)||(S=p(S)),this.add(S.neg())},I.sub=I.subtract,I.multiply=function(S){if(this.isZero())return y;if(n(S)||(S=p(S)),r){var A=r.mul(this.low,this.high,S.low,S.high);return u(A,r.get_high(),this.unsigned)}if(S.isZero())return y;if(this.eq(N))return S.isOdd()?N:y;if(S.eq(N))return this.isOdd()?N:y;if(this.isNegative())return S.isNegative()?this.neg().mul(S.neg()):this.neg().mul(S).neg();if(S.isNegative())return this.mul(S.neg()).neg();if(this.lt(b)&&S.lt(b))return l(this.toNumber()*S.toNumber(),this.unsigned);var R=this.high>>>16,O=this.high&65535,D=this.low>>>16,z=this.low&65535,U=S.high>>>16,j=S.high&65535,G=S.low>>>16,L=S.low&65535,V=0,H=0,Y=0,K=0;return K+=z*L,Y+=K>>>16,K&=65535,Y+=D*L,H+=Y>>>16,Y&=65535,Y+=z*G,H+=Y>>>16,Y&=65535,H+=O*L,V+=H>>>16,H&=65535,H+=D*G,V+=H>>>16,H&=65535,H+=z*j,V+=H>>>16,H&=65535,V+=R*L+O*G+D*j+z*U,V&=65535,u(Y<<16|K,V<<16|H,this.unsigned)},I.mul=I.multiply,I.divide=function(S){if(n(S)||(S=p(S)),S.isZero())throw Error("division by zero");if(r){if(!this.unsigned&&this.high===-2147483648&&S.low===-1&&S.high===-1)return this;var A=(this.unsigned?r.div_u:r.div_s)(this.low,this.high,S.low,S.high);return u(A,r.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?w:y;var R,O,D;if(this.unsigned){if(S.unsigned||(S=S.toUnsigned()),S.gt(this))return w;if(S.gt(this.shru(1)))return k;D=w}else{if(this.eq(N)){if(S.eq(x)||S.eq(C))return N;if(S.eq(N))return x;var z=this.shr(1);return R=z.div(S).shl(1),R.eq(y)?S.isNegative()?x:C:(O=this.sub(S.mul(R)),D=R.add(O.div(S)),D)}else if(S.eq(N))return this.unsigned?w:y;if(this.isNegative())return S.isNegative()?this.neg().div(S.neg()):this.neg().div(S).neg();if(S.isNegative())return this.div(S.neg()).neg();D=y}for(O=this;O.gte(S);){R=Math.max(1,Math.floor(O.toNumber()/S.toNumber()));for(var U=Math.ceil(Math.log(R)/Math.LN2),j=U<=48?1:c(2,U-48),G=l(R),L=G.mul(S);L.isNegative()||L.gt(O);)R-=j,G=l(R,this.unsigned),L=G.mul(S);G.isZero()&&(G=x),D=D.add(G),O=O.sub(L)}return D},I.div=I.divide,I.modulo=function(S){if(n(S)||(S=p(S)),r){var A=(this.unsigned?r.rem_u:r.rem_s)(this.low,this.high,S.low,S.high);return u(A,r.get_high(),this.unsigned)}return this.sub(this.div(S).mul(S))},I.mod=I.modulo,I.rem=I.modulo,I.not=function(){return u(~this.low,~this.high,this.unsigned)},I.and=function(S){return n(S)||(S=p(S)),u(this.low&S.low,this.high&S.high,this.unsigned)},I.or=function(S){return n(S)||(S=p(S)),u(this.low|S.low,this.high|S.high,this.unsigned)},I.xor=function(S){return n(S)||(S=p(S)),u(this.low^S.low,this.high^S.high,this.unsigned)},I.shiftLeft=function(S){return n(S)&&(S=S.toInt()),(S&=63)===0?this:S<32?u(this.low<<S,this.high<<S|this.low>>>32-S,this.unsigned):u(0,this.low<<S-32,this.unsigned)},I.shl=I.shiftLeft,I.shiftRight=function(S){return n(S)&&(S=S.toInt()),(S&=63)===0?this:S<32?u(this.low>>>S|this.high<<32-S,this.high>>S,this.unsigned):u(this.high>>S-32,this.high>=0?0:-1,this.unsigned)},I.shr=I.shiftRight,I.shiftRightUnsigned=function(S){if(n(S)&&(S=S.toInt()),S&=63,S===0)return this;var A=this.high;if(S<32){var R=this.low;return u(R>>>S|A<<32-S,A>>>S,this.unsigned)}else return S===32?u(A,0,this.unsigned):u(A>>>S-32,0,this.unsigned)},I.shru=I.shiftRightUnsigned,I.shr_u=I.shiftRightUnsigned,I.toSigned=function(){return this.unsigned?u(this.low,this.high,!1):this},I.toUnsigned=function(){return this.unsigned?this:u(this.low,this.high,!0)},I.toBytes=function(S){return S?this.toBytesLE():this.toBytesBE()},I.toBytesLE=function(){var S=this.high,A=this.low;return[A&255,A>>>8&255,A>>>16&255,A>>>24,S&255,S>>>8&255,S>>>16&255,S>>>24]},I.toBytesBE=function(){var S=this.high,A=this.low;return[S>>>24,S>>>16&255,S>>>8&255,S&255,A>>>24,A>>>16&255,A>>>8&255,A&255]},a.fromBytes=function(S,A,R){return R?a.fromBytesLE(S,A):a.fromBytesBE(S,A)},a.fromBytesLE=function(S,A){return new a(S[0]|S[1]<<8|S[2]<<16|S[3]<<24,S[4]|S[5]<<8|S[6]<<16|S[7]<<24,A)},a.fromBytesBE=function(S,A){return new a(S[4]<<24|S[5]<<16|S[6]<<8|S[7],S[0]<<24|S[1]<<16|S[2]<<8|S[3],A)}}),Zq=zt(()=>{}),Qq=zt(()=>{}),Jq=zt((e,t)=>{(function(r,a,n){function i(u){var c=this,d=l();c.next=function(){var p=2091639*c.s0+c.c*23283064365386963e-26;return c.s0=c.s1,c.s1=c.s2,c.s2=p-(c.c=p|0)},c.c=1,c.s0=d(" "),c.s1=d(" "),c.s2=d(" "),c.s0-=d(u),c.s0<0&&(c.s0+=1),c.s1-=d(u),c.s1<0&&(c.s1+=1),c.s2-=d(u),c.s2<0&&(c.s2+=1),d=null}function s(u,c){return c.c=u.c,c.s0=u.s0,c.s1=u.s1,c.s2=u.s2,c}function o(u,c){var d=new i(u),p=c&&c.state,f=d.next;return f.int32=function(){return d.next()*4294967296|0},f.double=function(){return f()+(f()*2097152|0)*11102230246251565e-32},f.quick=f,p&&(typeof p=="object"&&s(p,d),f.state=function(){return s(d,{})}),f}function l(){var u=4022871197,c=function(d){d=d.toString();for(var p=0;p<d.length;p++){u+=d.charCodeAt(p);var f=.02519603282416938*u;u=f>>>0,f-=u,f*=u,u=f>>>0,f-=u,u+=f*4294967296}return(u>>>0)*23283064365386963e-26};return c}a&&a.exports?a.exports=o:n&&n.amd?n(function(){return o}):this.alea=o})(e,typeof t=="object"&&t,typeof define=="function"&&define)}),e8=zt((e,t)=>{(function(r,a,n){function i(l){var u=this,c="";u.x=0,u.y=0,u.z=0,u.w=0,u.next=function(){var p=u.x^u.x<<11;return u.x=u.y,u.y=u.z,u.z=u.w,u.w^=u.w>>>19^p^p>>>8},l===(l|0)?u.x=l:c+=l;for(var d=0;d<c.length+64;d++)u.x^=c.charCodeAt(d)|0,u.next()}function s(l,u){return u.x=l.x,u.y=l.y,u.z=l.z,u.w=l.w,u}function o(l,u){var c=new i(l),d=u&&u.state,p=function(){return(c.next()>>>0)/4294967296};return p.double=function(){do var f=c.next()>>>11,h=(c.next()>>>0)/4294967296,m=(f+h)/(1<<21);while(m===0);return m},p.int32=c.next,p.quick=p,d&&(typeof d=="object"&&s(d,c),p.state=function(){return s(c,{})}),p}a&&a.exports?a.exports=o:n&&n.amd?n(function(){return o}):this.xor128=o})(e,typeof t=="object"&&t,typeof define=="function"&&define)}),t8=zt((e,t)=>{(function(r,a,n){function i(l){var u=this,c="";u.next=function(){var p=u.x^u.x>>>2;return u.x=u.y,u.y=u.z,u.z=u.w,u.w=u.v,(u.d=u.d+362437|0)+(u.v=u.v^u.v<<4^(p^p<<1))|0},u.x=0,u.y=0,u.z=0,u.w=0,u.v=0,l===(l|0)?u.x=l:c+=l;for(var d=0;d<c.length+64;d++)u.x^=c.charCodeAt(d)|0,d==c.length&&(u.d=u.x<<10^u.x>>>4),u.next()}function s(l,u){return u.x=l.x,u.y=l.y,u.z=l.z,u.w=l.w,u.v=l.v,u.d=l.d,u}function o(l,u){var c=new i(l),d=u&&u.state,p=function(){return(c.next()>>>0)/4294967296};return p.double=function(){do var f=c.next()>>>11,h=(c.next()>>>0)/4294967296,m=(f+h)/(1<<21);while(m===0);return m},p.int32=c.next,p.quick=p,d&&(typeof d=="object"&&s(d,c),p.state=function(){return s(c,{})}),p}a&&a.exports?a.exports=o:n&&n.amd?n(function(){return o}):this.xorwow=o})(e,typeof t=="object"&&t,typeof define=="function"&&define)}),r8=zt((e,t)=>{(function(r,a,n){function i(l){var u=this;u.next=function(){var d=u.x,p=u.i,f,h;return f=d[p],f^=f>>>7,h=f^f<<24,f=d[p+1&7],h^=f^f>>>10,f=d[p+3&7],h^=f^f>>>3,f=d[p+4&7],h^=f^f<<7,f=d[p+7&7],f=f^f<<13,h^=f^f<<9,d[p]=h,u.i=p+1&7,h};function c(d,p){var f,h=[];if(p===(p|0))h[0]=p;else for(p=""+p,f=0;f<p.length;++f)h[f&7]=h[f&7]<<15^p.charCodeAt(f)+h[f+1&7]<<13;for(;h.length<8;)h.push(0);for(f=0;f<8&&h[f]===0;++f);for(f==8?h[7]=-1:h[f],d.x=h,d.i=0,f=256;f>0;--f)d.next()}c(u,l)}function s(l,u){return u.x=l.x.slice(),u.i=l.i,u}function o(l,u){l==null&&(l=+new Date);var c=new i(l),d=u&&u.state,p=function(){return(c.next()>>>0)/4294967296};return p.double=function(){do var f=c.next()>>>11,h=(c.next()>>>0)/4294967296,m=(f+h)/(1<<21);while(m===0);return m},p.int32=c.next,p.quick=p,d&&(d.x&&s(d,c),p.state=function(){return s(c,{})}),p}a&&a.exports?a.exports=o:n&&n.amd?n(function(){return o}):this.xorshift7=o})(e,typeof t=="object"&&t,typeof define=="function"&&define)}),n8=zt((e,t)=>{(function(r,a,n){function i(l){var u=this;u.next=function(){var d=u.w,p=u.X,f=u.i,h,m;return u.w=d=d+1640531527|0,m=p[f+34&127],h=p[f=f+1&127],m^=m<<13,h^=h<<17,m^=m>>>15,h^=h>>>12,m=p[f]=m^h,u.i=f,m+(d^d>>>16)|0};function c(d,p){var f,h,m,g,v,b=[],y=128;for(p===(p|0)?(h=p,p=null):(p=p+"\0",h=0,y=Math.max(y,p.length)),m=0,g=-32;g<y;++g)p&&(h^=p.charCodeAt((g+32)%p.length)),g===0&&(v=h),h^=h<<10,h^=h>>>15,h^=h<<4,h^=h>>>13,g>=0&&(v=v+1640531527|0,f=b[g&127]^=h+v,m=f==0?m+1:0);for(m>=128&&(b[(p&&p.length||0)&127]=-1),m=127,g=4*128;g>0;--g)h=b[m+34&127],f=b[m=m+1&127],h^=h<<13,f^=f<<17,h^=h>>>15,f^=f>>>12,b[m]=h^f;d.w=v,d.X=b,d.i=m}c(u,l)}function s(l,u){return u.i=l.i,u.w=l.w,u.X=l.X.slice(),u}function o(l,u){l==null&&(l=+new Date);var c=new i(l),d=u&&u.state,p=function(){return(c.next()>>>0)/4294967296};return p.double=function(){do var f=c.next()>>>11,h=(c.next()>>>0)/4294967296,m=(f+h)/(1<<21);while(m===0);return m},p.int32=c.next,p.quick=p,d&&(d.X&&s(d,c),p.state=function(){return s(c,{})}),p}a&&a.exports?a.exports=o:n&&n.amd?n(function(){return o}):this.xor4096=o})(e,typeof t=="object"&&t,typeof define=="function"&&define)}),a8=zt((e,t)=>{(function(r,a,n){function i(l){var u=this,c="";u.next=function(){var p=u.b,f=u.c,h=u.d,m=u.a;return p=p<<25^p>>>7^f,f=f-h|0,h=h<<24^h>>>8^m,m=m-p|0,u.b=p=p<<20^p>>>12^f,u.c=f=f-h|0,u.d=h<<16^f>>>16^m,u.a=m-p|0},u.a=0,u.b=0,u.c=-1640531527,u.d=1367130551,l===Math.floor(l)?(u.a=l/4294967296|0,u.b=l|0):c+=l;for(var d=0;d<c.length+20;d++)u.b^=c.charCodeAt(d)|0,u.next()}function s(l,u){return u.a=l.a,u.b=l.b,u.c=l.c,u.d=l.d,u}function o(l,u){var c=new i(l),d=u&&u.state,p=function(){return(c.next()>>>0)/4294967296};return p.double=function(){do var f=c.next()>>>11,h=(c.next()>>>0)/4294967296,m=(f+h)/(1<<21);while(m===0);return m},p.int32=c.next,p.quick=p,d&&(typeof d=="object"&&s(d,c),p.state=function(){return s(c,{})}),p}a&&a.exports?a.exports=o:n&&n.amd?n(function(){return o}):this.tychei=o})(e,typeof t=="object"&&t,typeof define=="function"&&define)}),FO=zt(()=>{}),i8=zt((e,t)=>{(function(r,a){var n=this,i=256,s=6,o=52,l="random",u=a.pow(i,s),c=a.pow(2,o),d=c*2,p=i-1,f;function h(x,k,C){var E=[];k=k==!0?{entropy:!0}:k||{};var $=b(v(k.entropy?[x,w(r)]:x==null?y():x,3),E),N=new m(E),I=function(){for(var S=N.g(s),A=u,R=0;S<c;)S=(S+R)*i,A*=i,R=N.g(1);for(;S>=d;)S/=2,A/=2,R>>>=1;return(S+R)/A};return I.int32=function(){return N.g(4)|0},I.quick=function(){return N.g(4)/4294967296},I.double=I,b(w(N.S),r),(k.pass||C||function(S,A,R,O){return O&&(O.S&&g(O,N),S.state=function(){return g(N,{})}),R?(a[l]=S,A):S})(I,$,"global"in k?k.global:this==a,k.state)}a["seed"+l]=h;function m(x){var k,C=x.length,E=this,$=0,N=E.i=E.j=0,I=E.S=[];for(C||(x=[C++]);$<i;)I[$]=$++;for($=0;$<i;$++)I[$]=I[N=p&N+x[$%C]+(k=I[$])],I[N]=k;(E.g=function(S){for(var A,R=0,O=E.i,D=E.j,z=E.S;S--;)A=z[O=p&O+1],R=R*i+z[p&(z[O]=z[D=p&D+A])+(z[D]=A)];return E.i=O,E.j=D,R})(i)}function g(x,k){return k.i=x.i,k.j=x.j,k.S=x.S.slice(),k}function v(x,k){var C=[],E=typeof x,$;if(k&&E=="object")for($ in x)try{C.push(v(x[$],k-1))}catch{}return C.length?C:E=="string"?x:x+"\0"}function b(x,k){for(var C=x+"",E,$=0;$<C.length;)k[p&$]=p&(E^=k[p&$]*19)+C.charCodeAt($++);return w(k)}function y(){try{var x;return f&&(x=f.randomBytes)?x=x(i):(x=new Uint8Array(i),(n.crypto||n.msCrypto).getRandomValues(x)),w(x)}catch{var k=n.navigator,C=k&&k.plugins;return[+new Date,n,C,n.screen,w(r)]}}function w(x){return String.fromCharCode.apply(0,x)}if(b(a.random(),r),typeof t=="object"&&t.exports){t.exports=h;try{f=FO()}catch{}}else typeof define=="function"&&define.amd&&define(function(){return h})})([],Math)}),LO=zt((e,t)=>{var r=Jq(),a=e8(),n=t8(),i=r8(),s=n8(),o=a8(),l=i8();l.alea=r,l.xor128=a,l.xorwow=n,l.xorshift7=i,l.xor4096=s,l.tychei=o,t.exports=l}),s8=zt((e,t)=>{(function(r,a,n){function i(u){var c=this,d=l();c.next=function(){var p=2091639*c.s0+c.c*23283064365386963e-26;return c.s0=c.s1,c.s1=c.s2,c.s2=p-(c.c=p|0)},c.c=1,c.s0=d(" "),c.s1=d(" "),c.s2=d(" "),c.s0-=d(u),c.s0<0&&(c.s0+=1),c.s1-=d(u),c.s1<0&&(c.s1+=1),c.s2-=d(u),c.s2<0&&(c.s2+=1),d=null}function s(u,c){return c.c=u.c,c.s0=u.s0,c.s1=u.s1,c.s2=u.s2,c}function o(u,c){var d=new i(u),p=c&&c.state,f=d.next;return f.int32=function(){return d.next()*4294967296|0},f.double=function(){return f()+(f()*2097152|0)*11102230246251565e-32},f.quick=f,p&&(typeof p=="object"&&s(p,d),f.state=function(){return s(d,{})}),f}function l(){var u=4022871197,c=function(d){d=String(d);for(var p=0;p<d.length;p++){u+=d.charCodeAt(p);var f=.02519603282416938*u;u=f>>>0,f-=u,f*=u,u=f>>>0,f-=u,u+=f*4294967296}return(u>>>0)*23283064365386963e-26};return c}a&&a.exports?a.exports=o:n&&n.amd?n(function(){return o}):this.alea=o})(e,typeof t=="object"&&t,typeof define=="function"&&define)}),o8=zt((e,t)=>{(function(r,a,n){function i(l){var u=this,c="";u.x=0,u.y=0,u.z=0,u.w=0,u.next=function(){var p=u.x^u.x<<11;return u.x=u.y,u.y=u.z,u.z=u.w,u.w^=u.w>>>19^p^p>>>8},l===(l|0)?u.x=l:c+=l;for(var d=0;d<c.length+64;d++)u.x^=c.charCodeAt(d)|0,u.next()}function s(l,u){return u.x=l.x,u.y=l.y,u.z=l.z,u.w=l.w,u}function o(l,u){var c=new i(l),d=u&&u.state,p=function(){return(c.next()>>>0)/4294967296};return p.double=function(){do var f=c.next()>>>11,h=(c.next()>>>0)/4294967296,m=(f+h)/(1<<21);while(m===0);return m},p.int32=c.next,p.quick=p,d&&(typeof d=="object"&&s(d,c),p.state=function(){return s(c,{})}),p}a&&a.exports?a.exports=o:n&&n.amd?n(function(){return o}):this.xor128=o})(e,typeof t=="object"&&t,typeof define=="function"&&define)}),l8=zt((e,t)=>{(function(r,a,n){function i(l){var u=this,c="";u.next=function(){var p=u.x^u.x>>>2;return u.x=u.y,u.y=u.z,u.z=u.w,u.w=u.v,(u.d=u.d+362437|0)+(u.v=u.v^u.v<<4^(p^p<<1))|0},u.x=0,u.y=0,u.z=0,u.w=0,u.v=0,l===(l|0)?u.x=l:c+=l;for(var d=0;d<c.length+64;d++)u.x^=c.charCodeAt(d)|0,d==c.length&&(u.d=u.x<<10^u.x>>>4),u.next()}function s(l,u){return u.x=l.x,u.y=l.y,u.z=l.z,u.w=l.w,u.v=l.v,u.d=l.d,u}function o(l,u){var c=new i(l),d=u&&u.state,p=function(){return(c.next()>>>0)/4294967296};return p.double=function(){do var f=c.next()>>>11,h=(c.next()>>>0)/4294967296,m=(f+h)/(1<<21);while(m===0);return m},p.int32=c.next,p.quick=p,d&&(typeof d=="object"&&s(d,c),p.state=function(){return s(c,{})}),p}a&&a.exports?a.exports=o:n&&n.amd?n(function(){return o}):this.xorwow=o})(e,typeof t=="object"&&t,typeof define=="function"&&define)}),u8=zt((e,t)=>{(function(r,a,n){function i(l){var u=this;u.next=function(){var d=u.x,p=u.i,f,h;return f=d[p],f^=f>>>7,h=f^f<<24,f=d[p+1&7],h^=f^f>>>10,f=d[p+3&7],h^=f^f>>>3,f=d[p+4&7],h^=f^f<<7,f=d[p+7&7],f=f^f<<13,h^=f^f<<9,d[p]=h,u.i=p+1&7,h};function c(d,p){var f,h=[];if(p===(p|0))h[0]=p;else for(p=""+p,f=0;f<p.length;++f)h[f&7]=h[f&7]<<15^p.charCodeAt(f)+h[f+1&7]<<13;for(;h.length<8;)h.push(0);for(f=0;f<8&&h[f]===0;++f);for(f==8?h[7]=-1:h[f],d.x=h,d.i=0,f=256;f>0;--f)d.next()}c(u,l)}function s(l,u){return u.x=l.x.slice(),u.i=l.i,u}function o(l,u){l==null&&(l=+new Date);var c=new i(l),d=u&&u.state,p=function(){return(c.next()>>>0)/4294967296};return p.double=function(){do var f=c.next()>>>11,h=(c.next()>>>0)/4294967296,m=(f+h)/(1<<21);while(m===0);return m},p.int32=c.next,p.quick=p,d&&(d.x&&s(d,c),p.state=function(){return s(c,{})}),p}a&&a.exports?a.exports=o:n&&n.amd?n(function(){return o}):this.xorshift7=o})(e,typeof t=="object"&&t,typeof define=="function"&&define)}),c8=zt((e,t)=>{(function(r,a,n){function i(l){var u=this;u.next=function(){var d=u.w,p=u.X,f=u.i,h,m;return u.w=d=d+1640531527|0,m=p[f+34&127],h=p[f=f+1&127],m^=m<<13,h^=h<<17,m^=m>>>15,h^=h>>>12,m=p[f]=m^h,u.i=f,m+(d^d>>>16)|0};function c(d,p){var f,h,m,g,v,b=[],y=128;for(p===(p|0)?(h=p,p=null):(p=p+"\0",h=0,y=Math.max(y,p.length)),m=0,g=-32;g<y;++g)p&&(h^=p.charCodeAt((g+32)%p.length)),g===0&&(v=h),h^=h<<10,h^=h>>>15,h^=h<<4,h^=h>>>13,g>=0&&(v=v+1640531527|0,f=b[g&127]^=h+v,m=f==0?m+1:0);for(m>=128&&(b[(p&&p.length||0)&127]=-1),m=127,g=4*128;g>0;--g)h=b[m+34&127],f=b[m=m+1&127],h^=h<<13,f^=f<<17,h^=h>>>15,f^=f>>>12,b[m]=h^f;d.w=v,d.X=b,d.i=m}c(u,l)}function s(l,u){return u.i=l.i,u.w=l.w,u.X=l.X.slice(),u}function o(l,u){l==null&&(l=+new Date);var c=new i(l),d=u&&u.state,p=function(){return(c.next()>>>0)/4294967296};return p.double=function(){do var f=c.next()>>>11,h=(c.next()>>>0)/4294967296,m=(f+h)/(1<<21);while(m===0);return m},p.int32=c.next,p.quick=p,d&&(d.X&&s(d,c),p.state=function(){return s(c,{})}),p}a&&a.exports?a.exports=o:n&&n.amd?n(function(){return o}):this.xor4096=o})(e,typeof t=="object"&&t,typeof define=="function"&&define)}),d8=zt((e,t)=>{(function(r,a,n){function i(l){var u=this,c="";u.next=function(){var p=u.b,f=u.c,h=u.d,m=u.a;return p=p<<25^p>>>7^f,f=f-h|0,h=h<<24^h>>>8^m,m=m-p|0,u.b=p=p<<20^p>>>12^f,u.c=f=f-h|0,u.d=h<<16^f>>>16^m,u.a=m-p|0},u.a=0,u.b=0,u.c=-1640531527,u.d=1367130551,l===Math.floor(l)?(u.a=l/4294967296|0,u.b=l|0):c+=l;for(var d=0;d<c.length+20;d++)u.b^=c.charCodeAt(d)|0,u.next()}function s(l,u){return u.a=l.a,u.b=l.b,u.c=l.c,u.d=l.d,u}function o(l,u){var c=new i(l),d=u&&u.state,p=function(){return(c.next()>>>0)/4294967296};return p.double=function(){do var f=c.next()>>>11,h=(c.next()>>>0)/4294967296,m=(f+h)/(1<<21);while(m===0);return m},p.int32=c.next,p.quick=p,d&&(typeof d=="object"&&s(d,c),p.state=function(){return s(c,{})}),p}a&&a.exports?a.exports=o:n&&n.amd?n(function(){return o}):this.tychei=o})(e,typeof t=="object"&&t,typeof define=="function"&&define)}),p8=zt((e,t)=>{(function(r,a,n){var i=256,s=6,o=52,l="random",u=n.pow(i,s),c=n.pow(2,o),d=c*2,p=i-1,f;function h(x,k,C){var E=[];k=k==!0?{entropy:!0}:k||{};var $=b(v(k.entropy?[x,w(a)]:x==null?y():x,3),E),N=new m(E),I=function(){for(var S=N.g(s),A=u,R=0;S<c;)S=(S+R)*i,A*=i,R=N.g(1);for(;S>=d;)S/=2,A/=2,R>>>=1;return(S+R)/A};return I.int32=function(){return N.g(4)|0},I.quick=function(){return N.g(4)/4294967296},I.double=I,b(w(N.S),a),(k.pass||C||function(S,A,R,O){return O&&(O.S&&g(O,N),S.state=function(){return g(N,{})}),R?(n[l]=S,A):S})(I,$,"global"in k?k.global:this==n,k.state)}function m(x){var k,C=x.length,E=this,$=0,N=E.i=E.j=0,I=E.S=[];for(C||(x=[C++]);$<i;)I[$]=$++;for($=0;$<i;$++)I[$]=I[N=p&N+x[$%C]+(k=I[$])],I[N]=k;(E.g=function(S){for(var A,R=0,O=E.i,D=E.j,z=E.S;S--;)A=z[O=p&O+1],R=R*i+z[p&(z[O]=z[D=p&D+A])+(z[D]=A)];return E.i=O,E.j=D,R})(i)}function g(x,k){return k.i=x.i,k.j=x.j,k.S=x.S.slice(),k}function v(x,k){var C=[],E=typeof x,$;if(k&&E=="object")for($ in x)try{C.push(v(x[$],k-1))}catch{}return C.length?C:E=="string"?x:x+"\0"}function b(x,k){for(var C=x+"",E,$=0;$<C.length;)k[p&$]=p&(E^=k[p&$]*19)+C.charCodeAt($++);return w(k)}function y(){try{var x;return f&&(x=f.randomBytes)?x=x(i):(x=new Uint8Array(i),(r.crypto||r.msCrypto).getRandomValues(x)),w(x)}catch{var k=r.navigator,C=k&&k.plugins;return[+new Date,r,C,r.screen,w(a)]}}function w(x){return String.fromCharCode.apply(0,x)}if(b(n.random(),a),typeof t=="object"&&t.exports){t.exports=h;try{f=FO()}catch{}}else typeof define=="function"&&define.amd?define(function(){return h}):n["seed"+l]=h})(typeof self!="undefined"?self:e,[],Math)}),zO=zt((e,t)=>{var r=s8(),a=o8(),n=l8(),i=u8(),s=c8(),o=d8(),l=p8();l.alea=r,l.xor128=a,l.xorwow=n,l.xorshift7=i,l.xor4096=s,l.tychei=o,t.exports=l}),BO=zt(()=>{}),nC=zt(()=>{}),Bv=zt(()=>{}),f8=zt(()=>{}),h8=zt(()=>{}),m8=zt(()=>{}),g8=zt((e,t)=>{var r=(()=>{var a=typeof document!="undefined"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename!="undefined"&&(a=a||__filename),function(n){n=n||{};function i(){return j.buffer!=me&&Re(j.buffer),$e}function s(){return j.buffer!=me&&Re(j.buffer),Me}function o(){return j.buffer!=me&&Re(j.buffer),Oe}function l(){return j.buffer!=me&&Re(j.buffer),he}var u=typeof n!="undefined"?n:{},c,d;u.ready=new Promise(function(P,X){c=P,d=X});var p;typeof process!="undefined"&&process.listeners&&(p={uncaughtException:process.listeners("uncaughtException"),unhandledRejection:process.listeners("unhandledRejection")});var f=Object.assign({},u),h=(P,X)=>{throw X},m=typeof window=="object",g=typeof importScripts=="function",v=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",b=u.ENVIRONMENT_IS_PTHREAD||!1,y="";function w(P){return u.locateFile?u.locateFile(P,y):y+P}var x,k,C;function E(P){P instanceof Ip||O("exiting due to exception: "+P)}var $,N,I;if(v){g?y=Bv().dirname(y)+"/":y=__dirname+"/",I=()=>{N||($=nC(),N=Bv())},x=function(X,ne){return I(),X=N.normalize(X),$.readFileSync(X,ne?void 0:"utf8")},C=X=>{var ne=x(X,!0);return ne.buffer||(ne=new Uint8Array(ne)),ne},k=(X,ne,be)=>{I(),X=N.normalize(X),$.readFile(X,function(Le,Ke){Le?be(Le):ne(Ke.buffer)})},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),process.on("uncaughtException",function(X){if(!(X instanceof Ip))throw X}),process.on("unhandledRejection",function(X){throw X}),h=(X,ne)=>{if(Ae())throw process.exitCode=X,ne;E(ne),process.exit(X)},u.inspect=function(){return"[Emscripten Module object]"};let P;try{P=f8()}catch(X){throw console.error('The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?'),X}global.Worker=P.Worker}else(m||g)&&(g?y=self.location.href:typeof document!="undefined"&&document.currentScript&&(y=document.currentScript.src),typeof a!="undefined"&&a&&(y=a),y.indexOf("blob:")!==0?y=y.substr(0,y.replace(/[?#].*/,"").lastIndexOf("/")+1):y="",v||(x=P=>{var X=new XMLHttpRequest;return X.open("GET",P,!1),X.send(null),X.responseText},g&&(C=P=>{var X=new XMLHttpRequest;return X.open("GET",P,!1),X.responseType="arraybuffer",X.send(null),new Uint8Array(X.response)}),k=(P,X,ne)=>{var be=new XMLHttpRequest;be.open("GET",P,!0),be.responseType="arraybuffer",be.onload=()=>{if(be.status==200||be.status==0&&be.response){X(be.response);return}ne()},be.onerror=ne,be.send(null)}));v&&typeof performance=="undefined"&&(global.performance=h8().performance);var S=console.log.bind(console),A=console.warn.bind(console);v&&(I(),S=P=>$.writeSync(1,P+`
`),A=P=>$.writeSync(2,P+`
`));var R=u.print||S,O=u.printErr||A;Object.assign(u,f),f=null,u.arguments&&u.arguments,u.thisProgram&&u.thisProgram,u.quit&&(h=u.quit);function D(P){D.shown||(D.shown={}),D.shown[P]||(D.shown[P]=1,O(P))}var z;u.wasmBinary&&(z=u.wasmBinary);var U=u.noExitRuntime||!0;typeof WebAssembly!="object"&&it("no native wasm support detected");var j,G,L=!1,V;function H(P){var X=u["_"+P];return X}function Y(P,X,ne,be,Le){var Ke={string:function(fa){var Vu=0;if(fa!=null&&fa!==0){var dT=(fa.length<<2)+1;Vu=Bu(dT),pe(fa,Vu,dT)}return Vu},array:function(fa){var Vu=Bu(fa.length);return ke(fa,Vu),Vu}};function Qe(fa){return X==="string"?ie(fa):X==="boolean"?Boolean(fa):fa}var st=H(P),br=[],zi=0;if(be)for(var Bi=0;Bi<be.length;Bi++){var cT=Ke[ne[Bi]];cT?(zi===0&&(zi=z0()),br[Bi]=cT(be[Bi])):br[Bi]=be[Bi]}var V0=st.apply(null,br);function JV(fa){return zi!==0&&Bm(zi),Qe(fa)}return V0=JV(V0),V0}function K(P,X,ne,be){ne=ne||[];var Le=ne.every(function(Qe){return Qe==="number"}),Ke=X!=="string";return Ke&&Le&&!be?H(P):function(){return Y(P,X,ne,arguments)}}function Z(P){var X=new TextDecoder(P);this.decode=ne=>(ne.buffer instanceof SharedArrayBuffer&&(ne=new Uint8Array(ne)),X.decode.call(X,ne))}var le=typeof TextDecoder!="undefined"?new Z("utf8"):void 0;function de(P,X,ne){for(var be=X+ne,Le=X;P[Le]&&!(Le>=be);)++Le;if(Le-X>16&&P.subarray&&le)return le.decode(P.subarray(X,Le));for(var Ke="";X<Le;){var Qe=P[X++];if(!(Qe&128)){Ke+=String.fromCharCode(Qe);continue}var st=P[X++]&63;if((Qe&224)==192){Ke+=String.fromCharCode((Qe&31)<<6|st);continue}var br=P[X++]&63;if((Qe&240)==224?Qe=(Qe&15)<<12|st<<6|br:Qe=(Qe&7)<<18|st<<12|br<<6|P[X++]&63,Qe<65536)Ke+=String.fromCharCode(Qe);else{var zi=Qe-65536;Ke+=String.fromCharCode(55296|zi>>10,56320|zi&1023)}}return Ke}function ie(P,X){return P?de(s(),P,X):""}function ue(P,X,ne,be){if(!(be>0))return 0;for(var Le=ne,Ke=ne+be-1,Qe=0;Qe<P.length;++Qe){var st=P.charCodeAt(Qe);if(st>=55296&&st<=57343){var br=P.charCodeAt(++Qe);st=65536+((st&1023)<<10)|br&1023}if(st<=127){if(ne>=Ke)break;X[ne++]=st}else if(st<=2047){if(ne+1>=Ke)break;X[ne++]=192|st>>6,X[ne++]=128|st&63}else if(st<=65535){if(ne+2>=Ke)break;X[ne++]=224|st>>12,X[ne++]=128|st>>6&63,X[ne++]=128|st&63}else{if(ne+3>=Ke)break;X[ne++]=240|st>>18,X[ne++]=128|st>>12&63,X[ne++]=128|st>>6&63,X[ne++]=128|st&63}}return X[ne]=0,ne-Le}function pe(P,X,ne){return ue(P,s(),X,ne)}function Se(P){for(var X=0,ne=0;ne<P.length;++ne){var be=P.charCodeAt(ne);be>=55296&&be<=57343&&(be=65536+((be&1023)<<10)|P.charCodeAt(++ne)&1023),be<=127?++X:be<=2047?X+=2:be<=65535?X+=3:X+=4}return X}typeof TextDecoder!="undefined"&&new Z("utf-16le");function ke(P,X){i().set(P,X)}function oe(P,X){return P%X>0&&(P+=X-P%X),P}var me,$e,Me,Oe,he;b&&(me=u.buffer);function Re(P){me=P,u.HEAP8=$e=new Int8Array(P),u.HEAP16=new Int16Array(P),u.HEAP32=Oe=new Int32Array(P),u.HEAPU8=Me=new Uint8Array(P),u.HEAPU16=new Uint16Array(P),u.HEAPU32=new Uint32Array(P),u.HEAPF32=new Float32Array(P),u.HEAPF64=he=new Float64Array(P)}var Ne=u.INITIAL_MEMORY||16777216;if(b)j=u.wasmMemory,me=u.buffer;else if(u.wasmMemory)j=u.wasmMemory;else if(j=new WebAssembly.Memory({initial:Ne/65536,maximum:32768,shared:!0}),!(j.buffer instanceof SharedArrayBuffer))throw O("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),v&&console.log("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and also use a recent version)"),Error("bad memory");j&&(me=j.buffer),Ne=me.byteLength,Re(me);var je,ve=[],Ge=[],Ze=[],qe=0;function Ae(){return U||qe>0}function rt(){if(u.preRun)for(typeof u.preRun=="function"&&(u.preRun=[u.preRun]);u.preRun.length;)jn(u.preRun.shift());pi(ve)}function pt(){!b&&pi(Ge)}function lr(){b||We.terminateAllThreads()}function ln(){if(!b){if(u.postRun)for(typeof u.postRun=="function"&&(u.postRun=[u.postRun]);u.postRun.length;)Gn(u.postRun.shift());pi(Ze)}}function jn(P){ve.unshift(P)}function un(P){Ge.unshift(P)}function Gn(P){Ze.unshift(P)}var Nr=0,Nn=null;function pa(P){Nr++,u.monitorRunDependencies&&u.monitorRunDependencies(Nr)}function Tt(P){if(Nr--,u.monitorRunDependencies&&u.monitorRunDependencies(Nr),Nr==0&&Nn){var X=Nn;Nn=null,X()}}u.preloadedImages={},u.preloadedAudios={};function it(P){b?postMessage({cmd:"onAbort",arg:P}):u.onAbort&&u.onAbort(P),P="Aborted("+P+")",O(P),L=!0,V=1,P+=". Build with -s ASSERTIONS=1 for more info.";var X=new WebAssembly.RuntimeError(P);throw d(X),X}var An="data:application/octet-stream;base64,";function ir(P){return P.startsWith(An)}function ur(P){return P.startsWith("file://")}var cr;cr="tfjs-backend-wasm-threaded-simd.wasm",ir(cr)||(cr=w(cr));function di(P){try{if(P==cr&&z)return new Uint8Array(z);if(C)return C(P);throw"both async and sync fetching of the wasm failed"}catch(X){it(X)}}function zu(){if(!z&&(m||g)){if(typeof fetch=="function"&&!ur(cr))return fetch(cr,{credentials:"same-origin"}).then(function(P){if(!P.ok)throw"failed to load wasm binary file at '"+cr+"'";return P.arrayBuffer()}).catch(function(){return di(cr)});if(k)return new Promise(function(P,X){k(cr,function(ne){P(new Uint8Array(ne))},X)})}return Promise.resolve().then(function(){return di(cr)})}function Di(){var P={env:tT,wasi_snapshot_preview1:tT};function X(Qe,st){var br=Qe.exports;if(u.asm=br,Dm(u.asm.emscripten_tls_init),je=u.asm.__indirect_function_table,un(u.asm.__wasm_call_ctors),G=st,!b){var zi=We.unusedWorkers.length;We.unusedWorkers.forEach(function(Bi){We.loadWasmModuleToWorker(Bi,function(){--zi||Tt()})})}}b||pa();function ne(Qe){X(Qe.instance,Qe.module)}function be(Qe){return zu().then(function(st){return WebAssembly.instantiate(st,P)}).then(function(st){return st}).then(Qe,function(st){O("failed to asynchronously prepare wasm: "+st),it(st)})}function Le(){return!z&&typeof WebAssembly.instantiateStreaming=="function"&&!ir(cr)&&!ur(cr)&&typeof fetch=="function"?fetch(cr,{credentials:"same-origin"}).then(function(Qe){var st=WebAssembly.instantiateStreaming(Qe,P);return st.then(ne,function(br){return O("wasm streaming compile failed: "+br),O("falling back to ArrayBuffer instantiation"),be(ne)})}):be(ne)}if(u.instantiateWasm)try{var Ke=u.instantiateWasm(P,X);return Ke}catch(Qe){return O("Module.instantiateWasm callback failed with error: "+Qe),!1}return Le().catch(d),{}}var gs={};function pi(P){for(;P.length>0;){var X=P.shift();if(typeof X=="function"){X(u);continue}var ne=X.func;typeof ne=="number"?X.arg===void 0?qa(ne)():qa(ne)(X.arg):ne(X.arg===void 0?null:X.arg)}}function vs(P){var X=z0(),ne=P();return Bm(X),ne}function fe(P){o()[P>>2]=0;var X=We.pthreads[P];delete We.pthreads[P],X.worker.terminate(),L0(P),We.runningWorkers.splice(We.runningWorkers.indexOf(X.worker),1),X.worker.pthread=void 0}function ge(P){var X=We.pthreads[P];X.worker.postMessage({cmd:"cancel"})}function Ee(P){var X=We.pthreads[P];if(X){o()[P>>2]=0;var ne=X.worker;We.returnWorkerToPool(ne)}}function at(P){KV(P)}function qt(P){if(P instanceof Ip||P=="unwind")return V;h(1,P)}var We={unusedWorkers:[],runningWorkers:[],tlsInitFunctions:[],init:function(){b?We.initWorker():We.initMainThread()},initMainThread:function(){for(var P=8,X=0;X<P;++X)We.allocateUnusedWorker()},initWorker:function(){U=!1},pthreads:{},setExitStatus:function(P){V=P},terminateAllThreads:function(){for(var P in We.pthreads){var X=We.pthreads[P];X&&X.worker&&We.returnWorkerToPool(X.worker)}for(var ne=0;ne<We.unusedWorkers.length;++ne){var be=We.unusedWorkers[ne];be.terminate()}We.unusedWorkers=[]},returnWorkerToPool:function(P){We.runWithoutMainThreadQueuedCalls(function(){delete We.pthreads[P.pthread.threadInfoStruct],We.unusedWorkers.push(P),We.runningWorkers.splice(We.runningWorkers.indexOf(P),1),L0(P.pthread.threadInfoStruct),P.pthread=void 0})},runWithoutMainThreadQueuedCalls:function(P){o()[uT>>2]=0;try{P()}finally{o()[uT>>2]=1}},receiveObjectTransfer:function(P){},threadInit:function(){for(var P in We.tlsInitFunctions)We.tlsInitFunctions[P]()},loadWasmModuleToWorker:function(P,X){P.onmessage=ne=>{var be=ne.data,Le=be.cmd;if(P.pthread&&(We.currentProxiedOperationCallerThread=P.pthread.threadInfoStruct),be.targetThread&&be.targetThread!=zm()){var Ke=We.pthreads[be.targetThread];Ke?Ke.worker.postMessage(be,be.transferList):O('Internal error! Worker sent a message "'+Le+'" to target pthread '+be.targetThread+", but that thread no longer exists!"),We.currentProxiedOperationCallerThread=void 0;return}Le==="processQueuedMainThreadWork"?aT():Le==="spawnThread"?qI(be):Le==="cleanupThread"?Ee(be.thread):Le==="killThread"?fe(be.thread):Le==="cancelThread"?ge(be.thread):Le==="loaded"?(P.loaded=!0,X&&X(P),P.runPthread&&(P.runPthread(),delete P.runPthread)):Le==="print"?R("Thread "+be.threadId+": "+be.text):Le==="printErr"?O("Thread "+be.threadId+": "+be.text):Le==="alert"?alert("Thread "+be.threadId+": "+be.text):be.target==="setimmediate"?P.postMessage(be):Le==="onAbort"?u.onAbort&&u.onAbort(be.arg):O("worker sent an unknown command "+Le),We.currentProxiedOperationCallerThread=void 0},P.onerror=ne=>{var be="worker sent an error!";throw O(be+" "+ne.filename+":"+ne.lineno+": "+ne.message),ne},v&&(P.on("message",function(ne){P.onmessage({data:ne})}),P.on("error",function(ne){P.onerror(ne)}),P.on("detachedExit",function(){})),P.postMessage({cmd:"load",urlOrBlob:u.mainScriptUrlOrBlob||a,wasmMemory:j,wasmModule:G})},allocateUnusedWorker:function(){var P=w("tfjs-backend-wasm-threaded-simd.worker.js");We.unusedWorkers.push(new Worker(P))},getNewWorker:function(){return We.unusedWorkers.length==0&&(We.allocateUnusedWorker(),We.loadWasmModuleToWorker(We.unusedWorkers[0])),We.unusedWorkers.pop()}};function wt(){var P=zm(),X=o()[P+44>>2],ne=o()[P+48>>2],be=X-ne;lT(X,be),Bm(X)}u.establishStackSpace=wt;function vt(P){if(b)return $p(1,0,P);try{at(P)}catch(X){qt(X)}}var vr=[];function qa(P){var X=vr[P];return X||(P>=vr.length&&(vr.length=P+1),vr[P]=X=je.get(P)),X}function Fi(P,X){return qa(P)(X)}u.invokeEntryPoint=Fi;function Dm(P,X,ne){We.tlsInitFunctions.push(P)}var Li;v?Li=()=>{var P=process.hrtime();return P[0]*1e3+P[1]/1e6}:b?Li=()=>performance.now()-u.__performance_now_clock_drift:Li=()=>performance.now();var R0=!0;function _n(P){return o()[nT()>>2]=P,P}function bs(P,X){var ne;if(P===0)ne=Date.now();else if((P===1||P===4)&&R0)ne=Li();else return _n(28),-1;return o()[X>>2]=ne/1e3|0,o()[X+4>>2]=ne%1e3*1e3*1e3|0,0}function Fm(P,X){return bs(P,X)}function xV(P){iT(P,!g,1,!m),We.threadInit()}function kV(P){b?postMessage({cmd:"cleanupThread",thread:P}):Ee(P)}function qI(P){var X=We.getNewWorker();if(!X)return 6;We.runningWorkers.push(X);var ne=We.pthreads[P.pthread_ptr]={worker:X,threadInfoStruct:P.pthread_ptr};X.pthread=ne;var be={cmd:"run",start_routine:P.startRoutine,arg:P.arg,threadInfoStruct:P.pthread_ptr};return X.runPthread=()=>{be.time=performance.now(),X.postMessage(be,P.transferList)},X.loaded&&(X.runPthread(),delete X.runPthread),0}function EV(P,X,ne,be){if(typeof SharedArrayBuffer=="undefined")return O("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var Le=[],Ke=0;if(b&&(Le.length===0||Ke))return sT(687865856,P,X,ne,be);var Qe={startRoutine:ne,pthread_ptr:P,arg:be,transferList:Le};return b?(Qe.cmd="spawnThread",postMessage(Qe,Le),0):qI(Qe)}function CV(){return 2097152}function SV(P,X){if(P==X)postMessage({cmd:"processQueuedMainThreadWork"});else if(b)postMessage({targetThread:P,cmd:"processThreadQueue"});else{var ne=We.pthreads[P],be=ne&&ne.worker;if(!be)return;be.postMessage({cmd:"processThreadQueue"})}return 1}function $V(){it("")}function IV(){v||g||D("Blocking on the main thread is very dangerous, see https://emscripten.org/docs/porting/pthreads.html#blocking-on-the-main-browser-thread")}function XI(){return 2147483648}function TV(P,X,ne){s().copyWithin(P,X,X+ne)}function NV(){return v?m8().cpus().length:navigator.hardwareConcurrency}function $p(P,X){var ne=arguments.length-2,be=arguments;return vs(function(){for(var Le=ne,Ke=Bu(Le*8),Qe=Ke>>3,st=0;st<ne;st++){var br=be[2+st];l()[Qe+st]=br}return oT(P,Le,Ke,X)})}var O0=[];function AV(P,X,ne){O0.length=X;for(var be=ne>>3,Le=0;Le<X;Le++)O0[Le]=l()[be+Le];var Ke=P<0,Qe=Ke?gs[-P-1]:YV[P];return Qe.apply(null,O0)}function _V(P){try{return j.grow(P-me.byteLength+65535>>>16),Re(j.buffer),1}catch{}}function MV(P){var X=s().length;if(P=P>>>0,P<=X)return!1;var ne=XI();if(P>ne)return!1;for(var be=1;be<=4;be*=2){var Le=X*(1+.2/be);Le=Math.min(Le,P+100663296);var Ke=Math.min(ne,oe(Math.max(P,Le),65536)),Qe=_V(Ke);if(Qe)return!0}return!1}var yt={inEventHandler:0,removeAllEventListeners:function(){for(var P=yt.eventHandlers.length-1;P>=0;--P)yt._removeHandler(P);yt.eventHandlers=[],yt.deferredCalls=[]},registerRemoveEventListeners:function(){yt.removeEventListenersRegistered||(yt.removeEventListenersRegistered=!0)},deferredCalls:[],deferCall:function(P,X,ne){function be(Qe,st){if(Qe.length!=st.length)return!1;for(var br in Qe)if(Qe[br]!=st[br])return!1;return!0}for(var Le in yt.deferredCalls){var Ke=yt.deferredCalls[Le];if(Ke.targetFunction==P&&be(Ke.argsList,ne))return}yt.deferredCalls.push({targetFunction:P,precedence:X,argsList:ne}),yt.deferredCalls.sort(function(Qe,st){return Qe.precedence<st.precedence})},removeDeferredCalls:function(P){for(var X=0;X<yt.deferredCalls.length;++X)yt.deferredCalls[X].targetFunction==P&&(yt.deferredCalls.splice(X,1),--X)},canPerformEventHandlerRequests:function(){return yt.inEventHandler&&yt.currentEventHandler.allowsDeferredCalls},runDeferredCalls:function(){if(yt.canPerformEventHandlerRequests())for(var P=0;P<yt.deferredCalls.length;++P){var X=yt.deferredCalls[P];yt.deferredCalls.splice(P,1),--P,X.targetFunction.apply(null,X.argsList)}},eventHandlers:[],removeAllHandlersOnTarget:function(P,X){for(var ne=0;ne<yt.eventHandlers.length;++ne)yt.eventHandlers[ne].target==P&&(!X||X==yt.eventHandlers[ne].eventTypeString)&&yt._removeHandler(ne--)},_removeHandler:function(P){var X=yt.eventHandlers[P];X.target.removeEventListener(X.eventTypeString,X.eventListenerFunc,X.useCapture),yt.eventHandlers.splice(P,1)},registerOrRemoveHandler:function(P){var X=function(be){++yt.inEventHandler,yt.currentEventHandler=P,yt.runDeferredCalls(),P.handlerFunc(be),yt.runDeferredCalls(),--yt.inEventHandler};if(P.callbackfunc)P.eventListenerFunc=X,P.target.addEventListener(P.eventTypeString,X,P.useCapture),yt.eventHandlers.push(P),yt.registerRemoveEventListeners();else for(var ne=0;ne<yt.eventHandlers.length;++ne)yt.eventHandlers[ne].target==P.target&&yt.eventHandlers[ne].eventTypeString==P.eventTypeString&&yt._removeHandler(ne--)},queueEventHandlerOnThread_iiii:function(P,X,ne,be,Le){vs(function(){var Ke=Bu(12);o()[Ke>>2]=ne,o()[Ke+4>>2]=be,o()[Ke+8>>2]=Le,F0(P,637534208,X,be,Ke)})},getTargetThreadForEventCallback:function(P){switch(P){case 1:return 0;case 2:return We.currentProxiedOperationCallerThread;default:return P}},getNodeNameForTarget:function(P){return P?P==window?"#window":P==screen?"#screen":P&&P.nodeName?P.nodeName:"":""},fullscreenEnabled:function(){return document.fullscreenEnabled||document.webkitFullscreenEnabled}};function RV(P){var X=Se(P)+1,ne=D0(X);return pe(P,ne,X),ne}function OV(P,X,ne,be){vs(function(){var Le=Bu(12),Ke=0;X&&(Ke=RV(X)),o()[Le>>2]=Ke,o()[Le+4>>2]=ne,o()[Le+8>>2]=be,F0(P,657457152,0,Ke,Le)})}function PV(P,X,ne,be){X=X?ie(X):"",OV(P,X,ne,be)}function DV(P){return P>2?ie(P):P}var FV=[0,typeof document!="undefined"?document:0,typeof window!="undefined"?window:0];function LV(P){P=DV(P);var X=FV[P]||(typeof document!="undefined"?document.querySelector(P):void 0);return X}function P0(P){return LV(P)}function YI(P,X,ne){var be=P0(P);if(!be)return-4;if(be.canvasSharedPtr&&(o()[be.canvasSharedPtr>>2]=X,o()[be.canvasSharedPtr+4>>2]=ne),be.offscreenCanvas||!be.controlTransferredOffscreen){be.offscreenCanvas&&(be=be.offscreenCanvas);var Le=!1;if(be.GLctxObject&&be.GLctxObject.GLctx){var Ke=be.GLctxObject.GLctx.getParameter(2978);Le=Ke[0]===0&&Ke[1]===0&&Ke[2]===be.width&&Ke[3]===be.height}be.width=X,be.height=ne,Le&&be.GLctxObject.GLctx.viewport(0,0,X,ne)}else if(be.canvasSharedPtr){var Qe=o()[be.canvasSharedPtr+8>>2];return PV(Qe,P,X,ne),1}else return-4;return 0}function KI(P,X,ne){return b?$p(2,1,P,X,ne):YI(P,X,ne)}function zV(P,X,ne){var be=P0(P);return be?YI(P,X,ne):KI(P,X,ne)}function BV(){throw"unwind"}function VV(P){var X=P.getExtension("ANGLE_instanced_arrays");if(X)return P.vertexAttribDivisor=function(ne,be){X.vertexAttribDivisorANGLE(ne,be)},P.drawArraysInstanced=function(ne,be,Le,Ke){X.drawArraysInstancedANGLE(ne,be,Le,Ke)},P.drawElementsInstanced=function(ne,be,Le,Ke,Qe){X.drawElementsInstancedANGLE(ne,be,Le,Ke,Qe)},1}function WV(P){var X=P.getExtension("OES_vertex_array_object");if(X)return P.createVertexArray=function(){return X.createVertexArrayOES()},P.deleteVertexArray=function(ne){X.deleteVertexArrayOES(ne)},P.bindVertexArray=function(ne){X.bindVertexArrayOES(ne)},P.isVertexArray=function(ne){return X.isVertexArrayOES(ne)},1}function HV(P){var X=P.getExtension("WEBGL_draw_buffers");if(X)return P.drawBuffers=function(ne,be){X.drawBuffersWEBGL(ne,be)},1}function UV(P){return!!(P.multiDrawWebgl=P.getExtension("WEBGL_multi_draw"))}var dr={counter:1,buffers:[],programs:[],framebuffers:[],renderbuffers:[],textures:[],shaders:[],vaos:[],contexts:{},offscreenCanvases:{},queries:[],stringCache:{},unpackAlignment:4,recordError:function(P){dr.lastError||(dr.lastError=P)},getNewId:function(P){for(var X=dr.counter++,ne=P.length;ne<X;ne++)P[ne]=null;return X},getSource:function(P,X,ne,be){for(var Le="",Ke=0;Ke<X;++Ke){var Qe=be?o()[be+Ke*4>>2]:-1;Le+=ie(o()[ne+Ke*4>>2],Qe<0?void 0:Qe)}return Le},createContext:function(P,X){P.getContextSafariWebGL2Fixed||(P.getContextSafariWebGL2Fixed=P.getContext,P.getContext=function(Le,Ke){var Qe=P.getContextSafariWebGL2Fixed(Le,Ke);return Le=="webgl"==Qe instanceof WebGLRenderingContext?Qe:null});var ne=P.getContext("webgl",X);if(!ne)return 0;var be=dr.registerContext(ne,X);return be},registerContext:function(P,X){var ne=D0(8);o()[ne+4>>2]=zm();var be={handle:ne,attributes:X,version:X.majorVersion,GLctx:P};return P.canvas&&(P.canvas.GLctxObject=be),dr.contexts[ne]=be,(typeof X.enableExtensionsByDefault=="undefined"||X.enableExtensionsByDefault)&&dr.initExtensions(be),ne},makeContextCurrent:function(P){return dr.currentContext=dr.contexts[P],u.ctx=eT=dr.currentContext&&dr.currentContext.GLctx,!(P&&!eT)},getContext:function(P){return dr.contexts[P]},deleteContext:function(P){dr.currentContext===dr.contexts[P]&&(dr.currentContext=null),typeof yt=="object"&&yt.removeAllHandlersOnTarget(dr.contexts[P].GLctx.canvas),dr.contexts[P]&&dr.contexts[P].GLctx.canvas&&(dr.contexts[P].GLctx.canvas.GLctxObject=void 0),rT(dr.contexts[P].handle),dr.contexts[P]=null},initExtensions:function(P){if(P||(P=dr.currentContext),!P.initExtensionsDone){P.initExtensionsDone=!0;var X=P.GLctx;VV(X),WV(X),HV(X),X.disjointTimerQueryExt=X.getExtension("EXT_disjoint_timer_query"),UV(X);var ne=X.getSupportedExtensions()||[];ne.forEach(function(be){!be.includes("lose_context")&&!be.includes("debug")&&X.getExtension(be)})}}},jV=["default","low-power","high-performance"];function GV(P,X){var ne=X>>2,be=o()[ne+6],Le={alpha:!!o()[ne+0],depth:!!o()[ne+1],stencil:!!o()[ne+2],antialias:!!o()[ne+3],premultipliedAlpha:!!o()[ne+4],preserveDrawingBuffer:!!o()[ne+5],powerPreference:jV[be],failIfMajorPerformanceCaveat:!!o()[ne+7],majorVersion:o()[ne+8],minorVersion:o()[ne+9],enableExtensionsByDefault:o()[ne+10],explicitSwapControl:o()[ne+11],proxyContextToMainThread:o()[ne+12],renderViaOffscreenBackBuffer:o()[ne+13]},Ke=P0(P);if(!Ke||Le.explicitSwapControl)return 0;var Qe=dr.createContext(Ke,Le);return Qe}function qV(P,X){return GV(P,X)}var Lm={mappings:{},buffers:[null,[],[]],printChar:function(P,X){var ne=Lm.buffers[P];X===0||X===10?((P===1?R:O)(de(ne,0)),ne.length=0):ne.push(X)},varargs:void 0,get:function(){Lm.varargs+=4;var P=o()[Lm.varargs-4>>2];return P},getStr:function(P){var X=ie(P);return X},get64:function(P,X){return P}};function ZI(P){return b?$p(3,1,P):0}function QI(P,X,ne,be,Le){if(b)return $p(4,1,P,X,ne,be,Le)}function JI(P,X,ne,be){if(b)return $p(5,1,P,X,ne,be);for(var Le=0,Ke=0;Ke<ne;Ke++){var Qe=o()[X>>2],st=o()[X+4>>2];X+=8;for(var br=0;br<st;br++)Lm.printChar(P,s()[Qe+br]);Le+=st}return o()[be>>2]=Le,0}function XV(P){}We.init();var eT,YV=[null,vt,KI,ZI,QI,JI],tT={__clock_gettime:Fm,__emscripten_init_main_thread_js:xV,__emscripten_thread_cleanup:kV,__pthread_create_js:EV,_emscripten_default_pthread_stack_size:CV,_emscripten_notify_thread_queue:SV,abort:$V,emscripten_check_blocking_allowed:IV,emscripten_get_heap_max:XI,emscripten_get_now:Li,emscripten_memcpy_big:TV,emscripten_num_logical_cores:NV,emscripten_receive_on_main_thread_js:AV,emscripten_resize_heap:MV,emscripten_set_canvas_element_size:zV,emscripten_unwind_to_js_event_loop:BV,emscripten_webgl_create_context:qV,exit:at,fd_close:ZI,fd_seek:QI,fd_write:JI,memory:j||u.wasmMemory,setTempRet0:XV};Di(),u.___wasm_call_ctors=function(){return(u.___wasm_call_ctors=u.asm.__wasm_call_ctors).apply(null,arguments)},u._init=function(){return(u._init=u.asm.init).apply(null,arguments)},u._init_with_threads_count=function(){return(u._init_with_threads_count=u.asm.init_with_threads_count).apply(null,arguments)},u._get_threads_count=function(){return(u._get_threads_count=u.asm.get_threads_count).apply(null,arguments)},u._register_tensor=function(){return(u._register_tensor=u.asm.register_tensor).apply(null,arguments)},u._dispose_data=function(){return(u._dispose_data=u.asm.dispose_data).apply(null,arguments)},u._dispose=function(){return(u._dispose=u.asm.dispose).apply(null,arguments)},u._Abs=function(){return(u._Abs=u.asm.Abs).apply(null,arguments)},u._Add=function(){return(u._Add=u.asm.Add).apply(null,arguments)},u._AddN=function(){return(u._AddN=u.asm.AddN).apply(null,arguments)},u._All=function(){return(u._All=u.asm.All).apply(null,arguments)},u._Any=function(){return(u._Any=u.asm.Any).apply(null,arguments)},u._ArgMax=function(){return(u._ArgMax=u.asm.ArgMax).apply(null,arguments)},u._AvgPool=function(){return(u._AvgPool=u.asm.AvgPool).apply(null,arguments)},u._BatchMatMul=function(){return(u._BatchMatMul=u.asm.BatchMatMul).apply(null,arguments)},u._Ceil=function(){return(u._Ceil=u.asm.Ceil).apply(null,arguments)},u._ClipByValue=function(){return(u._ClipByValue=u.asm.ClipByValue).apply(null,arguments)},u._Conv2D=function(){return(u._Conv2D=u.asm.Conv2D).apply(null,arguments)},u._Conv2DBackpropInput=function(){return(u._Conv2DBackpropInput=u.asm.Conv2DBackpropInput).apply(null,arguments)},u._Cos=function(){return(u._Cos=u.asm.Cos).apply(null,arguments)},u._Cosh=function(){return(u._Cosh=u.asm.Cosh).apply(null,arguments)},u._CropAndResize=function(){return(u._CropAndResize=u.asm.CropAndResize).apply(null,arguments)},u._Cumprod=function(){return(u._Cumprod=u.asm.Cumprod).apply(null,arguments)},u._Cumsum=function(){return(u._Cumsum=u.asm.Cumsum).apply(null,arguments)},u._DepthToSpace=function(){return(u._DepthToSpace=u.asm.DepthToSpace).apply(null,arguments)},u._DepthwiseConv2dNative=function(){return(u._DepthwiseConv2dNative=u.asm.DepthwiseConv2dNative).apply(null,arguments)},u._Elu=function(){return(u._Elu=u.asm.Elu).apply(null,arguments)},u._Equal=function(){return(u._Equal=u.asm.Equal).apply(null,arguments)},u._Exp=function(){return(u._Exp=u.asm.Exp).apply(null,arguments)},u._FlipLeftRight=function(){return(u._FlipLeftRight=u.asm.FlipLeftRight).apply(null,arguments)},u._Floor=function(){return(u._Floor=u.asm.Floor).apply(null,arguments)},u._FloorDiv=function(){return(u._FloorDiv=u.asm.FloorDiv).apply(null,arguments)},u._FusedBatchNorm=function(){return(u._FusedBatchNorm=u.asm.FusedBatchNorm).apply(null,arguments)},u._FusedConv2D=function(){return(u._FusedConv2D=u.asm.FusedConv2D).apply(null,arguments)},u._FusedDepthwiseConv2D=function(){return(u._FusedDepthwiseConv2D=u.asm.FusedDepthwiseConv2D).apply(null,arguments)},u._Gather=function(){return(u._Gather=u.asm.Gather).apply(null,arguments)},u._GatherNd=function(){return(u._GatherNd=u.asm.GatherNd).apply(null,arguments)},u._Greater=function(){return(u._Greater=u.asm.Greater).apply(null,arguments)},u._GreaterEqual=function(){return(u._GreaterEqual=u.asm.GreaterEqual).apply(null,arguments)},u._LeakyRelu=function(){return(u._LeakyRelu=u.asm.LeakyRelu).apply(null,arguments)},u._Less=function(){return(u._Less=u.asm.Less).apply(null,arguments)},u._LessEqual=function(){return(u._LessEqual=u.asm.LessEqual).apply(null,arguments)},u._Log=function(){return(u._Log=u.asm.Log).apply(null,arguments)},u._LogicalAnd=function(){return(u._LogicalAnd=u.asm.LogicalAnd).apply(null,arguments)},u._Max=function(){return(u._Max=u.asm.Max).apply(null,arguments)},u._MaxPool=function(){return(u._MaxPool=u.asm.MaxPool).apply(null,arguments)},u._Maximum=function(){return(u._Maximum=u.asm.Maximum).apply(null,arguments)},u._Mean=function(){return(u._Mean=u.asm.Mean).apply(null,arguments)},u._Min=function(){return(u._Min=u.asm.Min).apply(null,arguments)},u._Minimum=function(){return(u._Minimum=u.asm.Minimum).apply(null,arguments)},u._MirrorPad=function(){return(u._MirrorPad=u.asm.MirrorPad).apply(null,arguments)},u._Multiply=function(){return(u._Multiply=u.asm.Multiply).apply(null,arguments)},u._Neg=function(){return(u._Neg=u.asm.Neg).apply(null,arguments)},u._NonMaxSuppressionV3=function(){return(u._NonMaxSuppressionV3=u.asm.NonMaxSuppressionV3).apply(null,arguments)},u._NonMaxSuppressionV4=function(){return(u._NonMaxSuppressionV4=u.asm.NonMaxSuppressionV4).apply(null,arguments)},u._NonMaxSuppressionV5=function(){return(u._NonMaxSuppressionV5=u.asm.NonMaxSuppressionV5).apply(null,arguments)},u._NotEqual=function(){return(u._NotEqual=u.asm.NotEqual).apply(null,arguments)},u._OneHot=function(){return(u._OneHot=u.asm.OneHot).apply(null,arguments)},u._PadV2=function(){return(u._PadV2=u.asm.PadV2).apply(null,arguments)},u._Pow=function(){return(u._Pow=u.asm.Pow).apply(null,arguments)},u._Prelu=function(){return(u._Prelu=u.asm.Prelu).apply(null,arguments)},u._Prod=function(){return(u._Prod=u.asm.Prod).apply(null,arguments)},u._RealDiv=function(){return(u._RealDiv=u.asm.RealDiv).apply(null,arguments)},u._Relu=function(){return(u._Relu=u.asm.Relu).apply(null,arguments)},u._Relu6=function(){return(u._Relu6=u.asm.Relu6).apply(null,arguments)},u._ResizeBilinear=function(){return(u._ResizeBilinear=u.asm.ResizeBilinear).apply(null,arguments)},u._Reverse=function(){return(u._Reverse=u.asm.Reverse).apply(null,arguments)},u._RotateWithOffset=function(){return(u._RotateWithOffset=u.asm.RotateWithOffset).apply(null,arguments)},u._Round=function(){return(u._Round=u.asm.Round).apply(null,arguments)},u._Rsqrt=function(){return(u._Rsqrt=u.asm.Rsqrt).apply(null,arguments)},u._ScatterNd=function(){return(u._ScatterNd=u.asm.ScatterNd).apply(null,arguments)},u._SelectV2=function(){return(u._SelectV2=u.asm.SelectV2).apply(null,arguments)},u._Sigmoid=function(){return(u._Sigmoid=u.asm.Sigmoid).apply(null,arguments)},u._Sin=function(){return(u._Sin=u.asm.Sin).apply(null,arguments)},u._Softmax=function(){return(u._Softmax=u.asm.Softmax).apply(null,arguments)},u._SparseFillEmptyRows=function(){return(u._SparseFillEmptyRows=u.asm.SparseFillEmptyRows).apply(null,arguments)},u._SparseReshape=function(){return(u._SparseReshape=u.asm.SparseReshape).apply(null,arguments)},u._SparseSegmentReduction=function(){return(u._SparseSegmentReduction=u.asm.SparseSegmentReduction).apply(null,arguments)},u._Sqrt=function(){return(u._Sqrt=u.asm.Sqrt).apply(null,arguments)},u._Square=function(){return(u._Square=u.asm.Square).apply(null,arguments)},u._SquaredDifference=function(){return(u._SquaredDifference=u.asm.SquaredDifference).apply(null,arguments)},u._Step=function(){return(u._Step=u.asm.Step).apply(null,arguments)},u._StridedSlice=function(){return(u._StridedSlice=u.asm.StridedSlice).apply(null,arguments)},u._Sub=function(){return(u._Sub=u.asm.Sub).apply(null,arguments)},u._Sum=function(){return(u._Sum=u.asm.Sum).apply(null,arguments)},u._Tan=function(){return(u._Tan=u.asm.Tan).apply(null,arguments)},u._Tanh=function(){return(u._Tanh=u.asm.Tanh).apply(null,arguments)},u._Tile=function(){return(u._Tile=u.asm.Tile).apply(null,arguments)},u._TopK=function(){return(u._TopK=u.asm.TopK).apply(null,arguments)},u._Transform=function(){return(u._Transform=u.asm.Transform).apply(null,arguments)},u._Transpose=function(){return(u._Transpose=u.asm.Transpose).apply(null,arguments)},u.__FusedMatMul=function(){return(u.__FusedMatMul=u.asm._FusedMatMul).apply(null,arguments)};var D0=u._malloc=function(){return(D0=u._malloc=u.asm.malloc).apply(null,arguments)},rT=u._free=function(){return(rT=u._free=u.asm.free).apply(null,arguments)};u._emscripten_tls_init=function(){return(u._emscripten_tls_init=u.asm.emscripten_tls_init).apply(null,arguments)};var nT=u.___errno_location=function(){return(nT=u.___errno_location=u.asm.__errno_location).apply(null,arguments)},zm=u._pthread_self=function(){return(zm=u._pthread_self=u.asm.pthread_self).apply(null,arguments)},aT=u._emscripten_main_thread_process_queued_calls=function(){return(aT=u._emscripten_main_thread_process_queued_calls=u.asm.emscripten_main_thread_process_queued_calls).apply(null,arguments)};u.__emscripten_thread_crashed=function(){return(u.__emscripten_thread_crashed=u.asm._emscripten_thread_crashed).apply(null,arguments)};var iT=u.__emscripten_thread_init=function(){return(iT=u.__emscripten_thread_init=u.asm._emscripten_thread_init).apply(null,arguments)};u._emscripten_current_thread_process_queued_calls=function(){return(u._emscripten_current_thread_process_queued_calls=u.asm.emscripten_current_thread_process_queued_calls).apply(null,arguments)},u._emscripten_main_browser_thread_id=function(){return(u._emscripten_main_browser_thread_id=u.asm.emscripten_main_browser_thread_id).apply(null,arguments)},u._emscripten_sync_run_in_main_thread_2=function(){return(u._emscripten_sync_run_in_main_thread_2=u.asm.emscripten_sync_run_in_main_thread_2).apply(null,arguments)};var sT=u._emscripten_sync_run_in_main_thread_4=function(){return(sT=u._emscripten_sync_run_in_main_thread_4=u.asm.emscripten_sync_run_in_main_thread_4).apply(null,arguments)},oT=u._emscripten_run_in_main_runtime_thread_js=function(){return(oT=u._emscripten_run_in_main_runtime_thread_js=u.asm.emscripten_run_in_main_runtime_thread_js).apply(null,arguments)},F0=u._emscripten_dispatch_to_thread_=function(){return(F0=u._emscripten_dispatch_to_thread_=u.asm.emscripten_dispatch_to_thread_).apply(null,arguments)},L0=u.__emscripten_thread_free_data=function(){return(L0=u.__emscripten_thread_free_data=u.asm._emscripten_thread_free_data).apply(null,arguments)};u.__emscripten_thread_exit=function(){return(u.__emscripten_thread_exit=u.asm._emscripten_thread_exit).apply(null,arguments)},u._memalign=function(){return(u._memalign=u.asm.memalign).apply(null,arguments)};var lT=u._emscripten_stack_set_limits=function(){return(lT=u._emscripten_stack_set_limits=u.asm.emscripten_stack_set_limits).apply(null,arguments)},z0=u.stackSave=function(){return(z0=u.stackSave=u.asm.stackSave).apply(null,arguments)},Bm=u.stackRestore=function(){return(Bm=u.stackRestore=u.asm.stackRestore).apply(null,arguments)},Bu=u.stackAlloc=function(){return(Bu=u.stackAlloc=u.asm.stackAlloc).apply(null,arguments)};u.dynCall_iijjiiii=function(){return(u.dynCall_iijjiiii=u.asm.dynCall_iijjiiii).apply(null,arguments)},u.dynCall_jiji=function(){return(u.dynCall_jiji=u.asm.dynCall_jiji).apply(null,arguments)};var uT=u.__emscripten_allow_main_runtime_queued_calls=21464;u.cwrap=K,u.keepRuntimeAlive=Ae,u.PThread=We,u.PThread=We,u.wasmMemory=j,u.ExitStatus=Ip;var Vm;function Ip(P){this.name="ExitStatus",this.message="Program terminated with exit("+P+")",this.status=P}Nn=function P(){Vm||B0(),Vm||(Nn=P)};function B0(P){if(Nr>0)return;if(b){c(u),pt(),postMessage({cmd:"loaded"});return}if(rt(),Nr>0)return;function X(){Vm||(Vm=!0,u.calledRun=!0,!L&&(pt(),c(u),u.onRuntimeInitialized&&u.onRuntimeInitialized(),ln()))}u.setStatus?(u.setStatus("Running..."),setTimeout(function(){setTimeout(function(){u.setStatus("")},1),X()},1)):X()}u.run=B0;function KV(P,X){if(V=P,!X&&b)throw vt(P),"unwind";Ae()||lr(),ZV(P)}function ZV(P){V=P,Ae()||(We.terminateAllThreads(),u.onExit&&u.onExit(P),L=!0),h(P,new Ip(P))}if(u.preInit)for(typeof u.preInit=="function"&&(u.preInit=[u.preInit]);u.preInit.length>0;)u.preInit.pop()();B0();var Wm;p&&(Wm={uncaughtException:process.listeners("uncaughtException").filter(function(P){return!p.uncaughtException.indexOf(P)>-1}),unhandledRejection:process.listeners("unhandledRejection").filter(function(P){return!p.unhandledRejection.indexOf(P)>-1})});var Hm;if(typeof WasmBackendModule!="undefined")Hm=WasmBackendModule;else if(typeof n!="undefined")Hm=n;else throw new Error("Could not find wasm module in post.js");if(Wm){var QV=Hm._dispose;Hm._dispose=function(){QV(),Wm.uncaughtException.forEach(function(P){process.removeListener("uncaughtException",P)}),Wm.unhandledRejection.forEach(function(P){process.removeListener("unhandledRejection",P)})}}return n.ready}})();typeof e=="object"&&typeof t=="object"?t.exports=r:typeof define=="function"&&define.amd?define([],function(){return r}):typeof e=="object"&&(e.WasmBackendModuleThreadedSimd=r)}),v8=zt((e,t)=>{var r=(()=>{var a=typeof document!="undefined"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename!="undefined"&&(a=a||__filename),function(n){n=n||{};var i=typeof n!="undefined"?n:{},s,o;i.ready=new Promise(function(fe,ge){s=fe,o=ge});var l;typeof process!="undefined"&&process.listeners&&(l={uncaughtException:process.listeners("uncaughtException"),unhandledRejection:process.listeners("unhandledRejection")});var u=Object.assign({},i),c=typeof window=="object",d=typeof importScripts=="function",p=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",f="";function h(fe){return i.locateFile?i.locateFile(fe,f):f+fe}var m,g,v,b,y,w;p?(d?f=Bv().dirname(f)+"/":f=__dirname+"/",w=()=>{y||(b=nC(),y=Bv())},m=function(fe,ge){return w(),fe=y.normalize(fe),b.readFileSync(fe,ge?void 0:"utf8")},v=fe=>{var ge=m(fe,!0);return ge.buffer||(ge=new Uint8Array(ge)),ge},g=(fe,ge,Ee)=>{w(),fe=y.normalize(fe),b.readFile(fe,function(at,qt){at?Ee(at):ge(qt.buffer)})},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),process.on("uncaughtException",function(fe){if(!(fe instanceof zu))throw fe}),process.on("unhandledRejection",function(fe){throw fe}),i.inspect=function(){return"[Emscripten Module object]"}):(c||d)&&(d?f=self.location.href:typeof document!="undefined"&&document.currentScript&&(f=document.currentScript.src),a&&(f=a),f.indexOf("blob:")!==0?f=f.substr(0,f.replace(/[?#].*/,"").lastIndexOf("/")+1):f="",m=fe=>{var ge=new XMLHttpRequest;return ge.open("GET",fe,!1),ge.send(null),ge.responseText},d&&(v=fe=>{var ge=new XMLHttpRequest;return ge.open("GET",fe,!1),ge.responseType="arraybuffer",ge.send(null),new Uint8Array(ge.response)}),g=(fe,ge,Ee)=>{var at=new XMLHttpRequest;at.open("GET",fe,!0),at.responseType="arraybuffer",at.onload=()=>{if(at.status==200||at.status==0&&at.response){ge(at.response);return}Ee()},at.onerror=Ee,at.send(null)});var x=i.print||console.log.bind(console),k=i.printErr||console.warn.bind(console);Object.assign(i,u),u=null,i.arguments&&i.arguments,i.thisProgram&&i.thisProgram,i.quit&&i.quit;var C;i.wasmBinary&&(C=i.wasmBinary),i.noExitRuntime,typeof WebAssembly!="object"&&he("no native wasm support detected");var E,$=!1;function N(fe){var ge=i["_"+fe];return ge}function I(fe,ge,Ee,at,qt){var We={string:function(_n){var bs=0;if(_n!=null&&_n!==0){var Fm=(_n.length<<2)+1;bs=cr(Fm),z(_n,bs,Fm)}return bs},array:function(_n){var bs=cr(_n.length);return U(_n,bs),bs}};function wt(_n){return ge==="string"?O(_n):ge==="boolean"?Boolean(_n):_n}var vt=N(fe),vr=[],qa=0;if(at)for(var Fi=0;Fi<at.length;Fi++){var Dm=We[Ee[Fi]];Dm?(qa===0&&(qa=ir()),vr[Fi]=Dm(at[Fi])):vr[Fi]=at[Fi]}var Li=vt.apply(null,vr);function R0(_n){return qa!==0&&ur(qa),wt(_n)}return Li=R0(Li),Li}function S(fe,ge,Ee,at){Ee=Ee||[];var qt=Ee.every(function(wt){return wt==="number"}),We=ge!=="string";return We&&qt&&!at?N(fe):function(){return I(fe,ge,Ee,arguments)}}var A=typeof TextDecoder!="undefined"?new TextDecoder("utf8"):void 0;function R(fe,ge,Ee){for(var at=ge+Ee,qt=ge;fe[qt]&&!(qt>=at);)++qt;if(qt-ge>16&&fe.subarray&&A)return A.decode(fe.subarray(ge,qt));for(var We="";ge<qt;){var wt=fe[ge++];if(!(wt&128)){We+=String.fromCharCode(wt);continue}var vt=fe[ge++]&63;if((wt&224)==192){We+=String.fromCharCode((wt&31)<<6|vt);continue}var vr=fe[ge++]&63;if((wt&240)==224?wt=(wt&15)<<12|vt<<6|vr:wt=(wt&7)<<18|vt<<12|vr<<6|fe[ge++]&63,wt<65536)We+=String.fromCharCode(wt);else{var qa=wt-65536;We+=String.fromCharCode(55296|qa>>10,56320|qa&1023)}}return We}function O(fe,ge){return fe?R(V,fe,ge):""}function D(fe,ge,Ee,at){if(!(at>0))return 0;for(var qt=Ee,We=Ee+at-1,wt=0;wt<fe.length;++wt){var vt=fe.charCodeAt(wt);if(vt>=55296&&vt<=57343){var vr=fe.charCodeAt(++wt);vt=65536+((vt&1023)<<10)|vr&1023}if(vt<=127){if(Ee>=We)break;ge[Ee++]=vt}else if(vt<=2047){if(Ee+1>=We)break;ge[Ee++]=192|vt>>6,ge[Ee++]=128|vt&63}else if(vt<=65535){if(Ee+2>=We)break;ge[Ee++]=224|vt>>12,ge[Ee++]=128|vt>>6&63,ge[Ee++]=128|vt&63}else{if(Ee+3>=We)break;ge[Ee++]=240|vt>>18,ge[Ee++]=128|vt>>12&63,ge[Ee++]=128|vt>>6&63,ge[Ee++]=128|vt&63}}return ge[Ee]=0,Ee-qt}function z(fe,ge,Ee){return D(fe,V,ge,Ee)}typeof TextDecoder!="undefined"&&new TextDecoder("utf-16le");function U(fe,ge){L.set(fe,ge)}function j(fe,ge){return fe%ge>0&&(fe+=ge-fe%ge),fe}var G,L,V,H;function Y(fe){G=fe,i.HEAP8=L=new Int8Array(fe),i.HEAP16=new Int16Array(fe),i.HEAP32=H=new Int32Array(fe),i.HEAPU8=V=new Uint8Array(fe),i.HEAPU16=new Uint16Array(fe),i.HEAPU32=new Uint32Array(fe),i.HEAPF32=new Float32Array(fe),i.HEAPF64=new Float64Array(fe)}i.INITIAL_MEMORY;var K,Z=[],le=[],de=[];function ie(){if(i.preRun)for(typeof i.preRun=="function"&&(i.preRun=[i.preRun]);i.preRun.length;)Se(i.preRun.shift());Ae(Z)}function ue(){Ae(le)}function pe(){if(i.postRun)for(typeof i.postRun=="function"&&(i.postRun=[i.postRun]);i.postRun.length;)oe(i.postRun.shift());Ae(de)}function Se(fe){Z.unshift(fe)}function ke(fe){le.unshift(fe)}function oe(fe){de.unshift(fe)}var me=0,$e=null;function Me(fe){me++,i.monitorRunDependencies&&i.monitorRunDependencies(me)}function Oe(fe){if(me--,i.monitorRunDependencies&&i.monitorRunDependencies(me),me==0&&$e){var ge=$e;$e=null,ge()}}i.preloadedImages={},i.preloadedAudios={};function he(fe){i.onAbort&&i.onAbort(fe),fe="Aborted("+fe+")",k(fe),$=!0,fe+=". Build with -s ASSERTIONS=1 for more info.";var ge=new WebAssembly.RuntimeError(fe);throw o(ge),ge}var Re="data:application/octet-stream;base64,";function Ne(fe){return fe.startsWith(Re)}function je(fe){return fe.startsWith("file://")}var ve;ve="tfjs-backend-wasm.wasm",Ne(ve)||(ve=h(ve));function Ge(fe){try{if(fe==ve&&C)return new Uint8Array(C);if(v)return v(fe);throw"both async and sync fetching of the wasm failed"}catch(ge){he(ge)}}function Ze(){if(!C&&(c||d)){if(typeof fetch=="function"&&!je(ve))return fetch(ve,{credentials:"same-origin"}).then(function(fe){if(!fe.ok)throw"failed to load wasm binary file at '"+ve+"'";return fe.arrayBuffer()}).catch(function(){return Ge(ve)});if(g)return new Promise(function(fe,ge){g(ve,function(Ee){fe(new Uint8Array(Ee))},ge)})}return Promise.resolve().then(function(){return Ge(ve)})}function qe(){var fe={env:An,wasi_snapshot_preview1:An};function ge(wt,vt){var vr=wt.exports;i.asm=vr,E=i.asm.memory,Y(E.buffer),K=i.asm.__indirect_function_table,ke(i.asm.__wasm_call_ctors),Oe()}Me();function Ee(wt){ge(wt.instance)}function at(wt){return Ze().then(function(vt){return WebAssembly.instantiate(vt,fe)}).then(function(vt){return vt}).then(wt,function(vt){k("failed to asynchronously prepare wasm: "+vt),he(vt)})}function qt(){return!C&&typeof WebAssembly.instantiateStreaming=="function"&&!Ne(ve)&&!je(ve)&&typeof fetch=="function"?fetch(ve,{credentials:"same-origin"}).then(function(wt){var vt=WebAssembly.instantiateStreaming(wt,fe);return vt.then(Ee,function(vr){return k("wasm streaming compile failed: "+vr),k("falling back to ArrayBuffer instantiation"),at(Ee)})}):at(Ee)}if(i.instantiateWasm)try{var We=i.instantiateWasm(fe,ge);return We}catch(wt){return k("Module.instantiateWasm callback failed with error: "+wt),!1}return qt().catch(o),{}}function Ae(fe){for(;fe.length>0;){var ge=fe.shift();if(typeof ge=="function"){ge(i);continue}var Ee=ge.func;typeof Ee=="number"?ge.arg===void 0?pt(Ee)():pt(Ee)(ge.arg):Ee(ge.arg===void 0?null:ge.arg)}}var rt=[];function pt(fe){var ge=rt[fe];return ge||(fe>=rt.length&&(rt.length=fe+1),rt[fe]=ge=K.get(fe)),ge}function lr(){he("")}function ln(){return 2147483648}function jn(fe,ge,Ee){V.copyWithin(fe,ge,ge+Ee)}function un(fe){try{return E.grow(fe-G.byteLength+65535>>>16),Y(E.buffer),1}catch{}}function Gn(fe){var ge=V.length;fe=fe>>>0;var Ee=ln();if(fe>Ee)return!1;for(var at=1;at<=4;at*=2){var qt=ge*(1+.2/at);qt=Math.min(qt,fe+100663296);var We=Math.min(Ee,j(Math.max(fe,qt),65536)),wt=un(We);if(wt)return!0}return!1}var Nr={mappings:{},buffers:[null,[],[]],printChar:function(fe,ge){var Ee=Nr.buffers[fe];ge===0||ge===10?((fe===1?x:k)(R(Ee,0)),Ee.length=0):Ee.push(ge)},varargs:void 0,get:function(){Nr.varargs+=4;var fe=H[Nr.varargs-4>>2];return fe},getStr:function(fe){var ge=O(fe);return ge},get64:function(fe,ge){return fe}};function Nn(fe){return 0}function pa(fe,ge,Ee,at,qt){}function Tt(fe,ge,Ee,at){for(var qt=0,We=0;We<Ee;We++){var wt=H[ge>>2],vt=H[ge+4>>2];ge+=8;for(var vr=0;vr<vt;vr++)Nr.printChar(fe,V[wt+vr]);qt+=vt}return H[at>>2]=qt,0}function it(fe){}var An={abort:lr,emscripten_get_heap_max:ln,emscripten_memcpy_big:jn,emscripten_resize_heap:Gn,fd_close:Nn,fd_seek:pa,fd_write:Tt,setTempRet0:it};qe(),i.___wasm_call_ctors=function(){return(i.___wasm_call_ctors=i.asm.__wasm_call_ctors).apply(null,arguments)},i._init=function(){return(i._init=i.asm.init).apply(null,arguments)},i._init_with_threads_count=function(){return(i._init_with_threads_count=i.asm.init_with_threads_count).apply(null,arguments)},i._get_threads_count=function(){return(i._get_threads_count=i.asm.get_threads_count).apply(null,arguments)},i._register_tensor=function(){return(i._register_tensor=i.asm.register_tensor).apply(null,arguments)},i._dispose_data=function(){return(i._dispose_data=i.asm.dispose_data).apply(null,arguments)},i._dispose=function(){return(i._dispose=i.asm.dispose).apply(null,arguments)},i._Abs=function(){return(i._Abs=i.asm.Abs).apply(null,arguments)},i._Add=function(){return(i._Add=i.asm.Add).apply(null,arguments)},i._AddN=function(){return(i._AddN=i.asm.AddN).apply(null,arguments)},i._All=function(){return(i._All=i.asm.All).apply(null,arguments)},i._Any=function(){return(i._Any=i.asm.Any).apply(null,arguments)},i._ArgMax=function(){return(i._ArgMax=i.asm.ArgMax).apply(null,arguments)},i._AvgPool=function(){return(i._AvgPool=i.asm.AvgPool).apply(null,arguments)},i._BatchMatMul=function(){return(i._BatchMatMul=i.asm.BatchMatMul).apply(null,arguments)},i._Ceil=function(){return(i._Ceil=i.asm.Ceil).apply(null,arguments)},i._ClipByValue=function(){return(i._ClipByValue=i.asm.ClipByValue).apply(null,arguments)},i._Conv2D=function(){return(i._Conv2D=i.asm.Conv2D).apply(null,arguments)},i._Conv2DBackpropInput=function(){return(i._Conv2DBackpropInput=i.asm.Conv2DBackpropInput).apply(null,arguments)},i._Cos=function(){return(i._Cos=i.asm.Cos).apply(null,arguments)},i._Cosh=function(){return(i._Cosh=i.asm.Cosh).apply(null,arguments)},i._CropAndResize=function(){return(i._CropAndResize=i.asm.CropAndResize).apply(null,arguments)},i._Cumprod=function(){return(i._Cumprod=i.asm.Cumprod).apply(null,arguments)},i._Cumsum=function(){return(i._Cumsum=i.asm.Cumsum).apply(null,arguments)},i._DepthToSpace=function(){return(i._DepthToSpace=i.asm.DepthToSpace).apply(null,arguments)},i._DepthwiseConv2dNative=function(){return(i._DepthwiseConv2dNative=i.asm.DepthwiseConv2dNative).apply(null,arguments)},i._Elu=function(){return(i._Elu=i.asm.Elu).apply(null,arguments)},i._Equal=function(){return(i._Equal=i.asm.Equal).apply(null,arguments)},i._Exp=function(){return(i._Exp=i.asm.Exp).apply(null,arguments)},i._FlipLeftRight=function(){return(i._FlipLeftRight=i.asm.FlipLeftRight).apply(null,arguments)},i._Floor=function(){return(i._Floor=i.asm.Floor).apply(null,arguments)},i._FloorDiv=function(){return(i._FloorDiv=i.asm.FloorDiv).apply(null,arguments)},i._FusedBatchNorm=function(){return(i._FusedBatchNorm=i.asm.FusedBatchNorm).apply(null,arguments)},i._FusedConv2D=function(){return(i._FusedConv2D=i.asm.FusedConv2D).apply(null,arguments)},i._FusedDepthwiseConv2D=function(){return(i._FusedDepthwiseConv2D=i.asm.FusedDepthwiseConv2D).apply(null,arguments)},i._Gather=function(){return(i._Gather=i.asm.Gather).apply(null,arguments)},i._GatherNd=function(){return(i._GatherNd=i.asm.GatherNd).apply(null,arguments)},i._Greater=function(){return(i._Greater=i.asm.Greater).apply(null,arguments)},i._GreaterEqual=function(){return(i._GreaterEqual=i.asm.GreaterEqual).apply(null,arguments)},i._LeakyRelu=function(){return(i._LeakyRelu=i.asm.LeakyRelu).apply(null,arguments)},i._Less=function(){return(i._Less=i.asm.Less).apply(null,arguments)},i._LessEqual=function(){return(i._LessEqual=i.asm.LessEqual).apply(null,arguments)},i._Log=function(){return(i._Log=i.asm.Log).apply(null,arguments)},i._LogicalAnd=function(){return(i._LogicalAnd=i.asm.LogicalAnd).apply(null,arguments)},i._Max=function(){return(i._Max=i.asm.Max).apply(null,arguments)},i._MaxPool=function(){return(i._MaxPool=i.asm.MaxPool).apply(null,arguments)},i._Maximum=function(){return(i._Maximum=i.asm.Maximum).apply(null,arguments)},i._Mean=function(){return(i._Mean=i.asm.Mean).apply(null,arguments)},i._Min=function(){return(i._Min=i.asm.Min).apply(null,arguments)},i._Minimum=function(){return(i._Minimum=i.asm.Minimum).apply(null,arguments)},i._MirrorPad=function(){return(i._MirrorPad=i.asm.MirrorPad).apply(null,arguments)},i._Multiply=function(){return(i._Multiply=i.asm.Multiply).apply(null,arguments)},i._Neg=function(){return(i._Neg=i.asm.Neg).apply(null,arguments)},i._NonMaxSuppressionV3=function(){return(i._NonMaxSuppressionV3=i.asm.NonMaxSuppressionV3).apply(null,arguments)},i._NonMaxSuppressionV4=function(){return(i._NonMaxSuppressionV4=i.asm.NonMaxSuppressionV4).apply(null,arguments)},i._NonMaxSuppressionV5=function(){return(i._NonMaxSuppressionV5=i.asm.NonMaxSuppressionV5).apply(null,arguments)},i._NotEqual=function(){return(i._NotEqual=i.asm.NotEqual).apply(null,arguments)},i._OneHot=function(){return(i._OneHot=i.asm.OneHot).apply(null,arguments)},i._PadV2=function(){return(i._PadV2=i.asm.PadV2).apply(null,arguments)},i._Pow=function(){return(i._Pow=i.asm.Pow).apply(null,arguments)},i._Prelu=function(){return(i._Prelu=i.asm.Prelu).apply(null,arguments)},i._Prod=function(){return(i._Prod=i.asm.Prod).apply(null,arguments)},i._RealDiv=function(){return(i._RealDiv=i.asm.RealDiv).apply(null,arguments)},i._Relu=function(){return(i._Relu=i.asm.Relu).apply(null,arguments)},i._Relu6=function(){return(i._Relu6=i.asm.Relu6).apply(null,arguments)},i._ResizeBilinear=function(){return(i._ResizeBilinear=i.asm.ResizeBilinear).apply(null,arguments)},i._Reverse=function(){return(i._Reverse=i.asm.Reverse).apply(null,arguments)},i._RotateWithOffset=function(){return(i._RotateWithOffset=i.asm.RotateWithOffset).apply(null,arguments)},i._Round=function(){return(i._Round=i.asm.Round).apply(null,arguments)},i._Rsqrt=function(){return(i._Rsqrt=i.asm.Rsqrt).apply(null,arguments)},i._ScatterNd=function(){return(i._ScatterNd=i.asm.ScatterNd).apply(null,arguments)},i._SelectV2=function(){return(i._SelectV2=i.asm.SelectV2).apply(null,arguments)},i._Sigmoid=function(){return(i._Sigmoid=i.asm.Sigmoid).apply(null,arguments)},i._Sin=function(){return(i._Sin=i.asm.Sin).apply(null,arguments)},i._Softmax=function(){return(i._Softmax=i.asm.Softmax).apply(null,arguments)},i._SparseFillEmptyRows=function(){return(i._SparseFillEmptyRows=i.asm.SparseFillEmptyRows).apply(null,arguments)},i._SparseReshape=function(){return(i._SparseReshape=i.asm.SparseReshape).apply(null,arguments)},i._SparseSegmentReduction=function(){return(i._SparseSegmentReduction=i.asm.SparseSegmentReduction).apply(null,arguments)},i._Sqrt=function(){return(i._Sqrt=i.asm.Sqrt).apply(null,arguments)},i._Square=function(){return(i._Square=i.asm.Square).apply(null,arguments)},i._SquaredDifference=function(){return(i._SquaredDifference=i.asm.SquaredDifference).apply(null,arguments)},i._Step=function(){return(i._Step=i.asm.Step).apply(null,arguments)},i._StridedSlice=function(){return(i._StridedSlice=i.asm.StridedSlice).apply(null,arguments)},i._Sub=function(){return(i._Sub=i.asm.Sub).apply(null,arguments)},i._Sum=function(){return(i._Sum=i.asm.Sum).apply(null,arguments)},i._Tan=function(){return(i._Tan=i.asm.Tan).apply(null,arguments)},i._Tanh=function(){return(i._Tanh=i.asm.Tanh).apply(null,arguments)},i._Tile=function(){return(i._Tile=i.asm.Tile).apply(null,arguments)},i._TopK=function(){return(i._TopK=i.asm.TopK).apply(null,arguments)},i._Transform=function(){return(i._Transform=i.asm.Transform).apply(null,arguments)},i._Transpose=function(){return(i._Transpose=i.asm.Transpose).apply(null,arguments)},i.__FusedMatMul=function(){return(i.__FusedMatMul=i.asm._FusedMatMul).apply(null,arguments)},i._malloc=function(){return(i._malloc=i.asm.malloc).apply(null,arguments)},i._free=function(){return(i._free=i.asm.free).apply(null,arguments)},i.___errno_location=function(){return(i.___errno_location=i.asm.__errno_location).apply(null,arguments)},i._emscripten_main_thread_process_queued_calls=function(){return(i._emscripten_main_thread_process_queued_calls=i.asm.emscripten_main_thread_process_queued_calls).apply(null,arguments)};var ir=i.stackSave=function(){return(ir=i.stackSave=i.asm.stackSave).apply(null,arguments)},ur=i.stackRestore=function(){return(ur=i.stackRestore=i.asm.stackRestore).apply(null,arguments)},cr=i.stackAlloc=function(){return(cr=i.stackAlloc=i.asm.stackAlloc).apply(null,arguments)};i.dynCall_iijjiiii=function(){return(i.dynCall_iijjiiii=i.asm.dynCall_iijjiiii).apply(null,arguments)},i.dynCall_jiji=function(){return(i.dynCall_jiji=i.asm.dynCall_jiji).apply(null,arguments)},i.cwrap=S;var di;function zu(fe){this.name="ExitStatus",this.message="Program terminated with exit("+fe+")",this.status=fe}$e=function fe(){di||Di(),di||($e=fe)};function Di(fe){if(me>0||(ie(),me>0))return;function ge(){di||(di=!0,i.calledRun=!0,!$&&(ue(),s(i),i.onRuntimeInitialized&&i.onRuntimeInitialized(),pe()))}i.setStatus?(i.setStatus("Running..."),setTimeout(function(){setTimeout(function(){i.setStatus("")},1),ge()},1)):ge()}if(i.run=Di,i.preInit)for(typeof i.preInit=="function"&&(i.preInit=[i.preInit]);i.preInit.length>0;)i.preInit.pop()();Di();var gs;l&&(gs={uncaughtException:process.listeners("uncaughtException").filter(function(fe){return!l.uncaughtException.indexOf(fe)>-1}),unhandledRejection:process.listeners("unhandledRejection").filter(function(fe){return!l.unhandledRejection.indexOf(fe)>-1})});var pi;if(typeof n!="undefined")pi=n;else if(typeof WasmBackendModuleThreadedSimd!="undefined")pi=WasmBackendModuleThreadedSimd;else throw new Error("Could not find wasm module in post.js");if(gs){var vs=pi._dispose;pi._dispose=function(){vs(),gs.uncaughtException.forEach(function(fe){process.removeListener("uncaughtException",fe)}),gs.unhandledRejection.forEach(function(fe){process.removeListener("unhandledRejection",fe)})}}return n.ready}})();typeof e=="object"&&typeof t=="object"?t.exports=r:typeof define=="function"&&define.amd?define([],function(){return r}):typeof e=="object"&&(e.WasmBackendModule=r)}),zb=class{constructor(e,t){this.backend=e,this.dataMover=t,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,t){this.dataIdsCount++,this.data.set(e,t)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}},Ah=class{refCount(e){return ha("refCount")}incRef(e){return ha("incRef")}timerAvailable(){return!0}time(e){return ha("time")}read(e){return ha("read")}readSync(e){return ha("readSync")}readToGPU(e,t){return ha("readToGPU")}numDataIds(){return ha("numDataIds")}disposeData(e,t){return ha("disposeData")}write(e,t,r){return ha("write")}move(e,t,r,a,n){return ha("move")}memory(){return ha("memory")}floatPrecision(){return ha("floatPrecision")}epsilon(){return this.floatPrecision()===32?1e-7:1e-4}dispose(){return ha("dispose")}};function ha(e){throw new Error(`'${e}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}function VO(e){let t=e.length,r=0;for(;t>0;)r=Math.random()*t|0,t--,Vv(e,t,r)}function b8(e,t){if(e.length!==t.length)throw new Error(`Array sizes must match to be shuffled together First array length was ${e.length}Second array length was ${t.length}`);let r=e.length,a=0;for(;r>0;)a=Math.random()*r|0,r--,Vv(e,r,a),Vv(t,r,a)}function nh(e,t,r){return Math.max(e,Math.min(t,r))}function y8(e){return e%2===0?e:e+1}function Vv(e,t,r){let a=e[t];e[t]=e[r],e[r]=a}function w8(e){let t=0;for(let r=0;r<e.length;r++)t+=e[r];return t}function x8(e,t){let r=Math.random();return t*r+(1-r)*e}function k8(e,t){let r=0;for(let a=0;a<e.length;a++){let n=Number(e[a])-Number(t[a]);r+=n*n}return r}function q(e,t){if(!e)throw new Error(typeof t=="string"?t:t())}function Sn(e,t,r=""){q(go(e,t),()=>r+` Shapes ${e} and ${t} must match`)}function Rl(e){q(e!=null,()=>"The input to the tensor constructor must be a non-null value.")}function ul(e,t=[],r=!1){if(t==null&&(t=[]),Array.isArray(e)||tn(e)&&!r)for(let a=0;a<e.length;++a)ul(e[a],t,r);else t.push(e);return t}function Wt(e){if(e.length===0)return 1;let t=e[0];for(let r=1;r<e.length;r++)t*=e[r];return t}function E8(e){return e.length===0}function go(e,t){if(e===t)return!0;if(e==null||t==null||e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function Mc(e){return e%1===0}function C8(e){if(Math.tanh!=null)return Math.tanh(e);if(e===1/0)return 1;if(e===-1/0)return-1;{let t=Math.exp(2*e);return(t-1)/(t+1)}}function S8(e){let t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function $8(e){let t=new Uint32Array(e);for(let r=0;r<e;++r)t[r]=r;return VO(t),t}function Df(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function I8(e,t=a=>0,r){return new Promise((a,n)=>{let i=0,s=()=>{if(e()){a();return}i++;let o=t(i);if(r!=null&&i>=r){n();return}setTimeout(s,o)};s()})}function T8(e,t){let r=1,a=-1;for(let i=0;i<e.length;++i)if(e[i]>=0)r*=e[i];else if(e[i]===-1){if(a!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${a} and dim ${i}`);a=i}else if(e[i]<0)throw Error(`Shapes can not be < 0. Found ${e[i]} at dim ${i}`);if(a===-1){if(t>0&&t!==r)throw Error(`Size(${t}) must match the product of shape ${e}`);return e}if(r===0)throw Error(`Cannot infer the missing size in [${e}] when there are 0 elements`);if(t%r!==0)throw Error(`The implicit shape can't be a fractional number. Got ${t} / ${r}`);let n=e.slice();return n[a]=t/r,n}function Ua(e,t){let r=t.length;return e=e==null?t.map((a,n)=>n):[].concat(e),q(e.every(a=>a>=-r&&a<r),()=>`All values in axis param must be in range [-${r}, ${r}) but got axis ${e}`),q(e.every(a=>Mc(a)),()=>`All values in axis param must be integers but got axis ${e}`),e.map(a=>a<0?r+a:a)}function WO(e,t){let r=[],a=[],n=t!=null&&Array.isArray(t)&&t.length===0,i=t==null||n?null:Ua(t,e).sort(),s=0;for(let o=0;o<e.length;++o){if(i!=null){if(i[s]===o&&e[o]!==1)throw new Error(`Can't squeeze axis ${o} since its dim '${e[o]}' is not 1`);(i[s]==null||i[s]>o)&&e[o]===1&&(r.push(e[o]),a.push(o)),i[s]<=o&&s++}e[o]!==1&&(r.push(e[o]),a.push(o))}return{newShape:r,keptDims:a}}function HO(e,t){let r=null;if(e==null||e==="float32")r=new Float32Array(t);else if(e==="int32")r=new Int32Array(t);else if(e==="bool")r=new Uint8Array(t);else throw new Error(`Unknown data type ${e}`);return r}function UO(e,t){let r=null;if(e==null||e==="float32")r=new Float32Array(t);else if(e==="int32")r=new Int32Array(t);else if(e==="bool")r=new Uint8Array(t);else if(e==="string")r=new Array(t);else throw new Error(`Unknown data type ${e}`);return r}function jO(e,t){for(let r=0;r<e.length;r++){let a=e[r];if(isNaN(a)||!isFinite(a))throw Error(`A tensor of type ${t} being uploaded contains ${a}.`)}}function GO(e){return e==="bool"||e==="complex64"||e==="float32"||e==="int32"||e==="string"}function N8(e,t){return!(t==="complex64"||t==="float32"&&e!=="complex64"||t==="int32"&&e!=="float32"&&e!=="complex64"||t==="bool"&&e==="bool")}function tn(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray}function K1(e){if(e==="float32"||e==="int32")return 4;if(e==="complex64")return 8;if(e==="bool")return 1;throw new Error(`Unknown dtype ${e}`)}function qO(e){if(e==null)return 0;let t=0;return e.forEach(r=>t+=r.length),t}function Ps(e){return typeof e=="string"||e instanceof String}function XO(e){return typeof e=="boolean"}function YO(e){return typeof e=="number"}function Bb(e){return Array.isArray(e)?Bb(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray?"int32":YO(e)?"float32":Ps(e)?"string":XO(e)?"bool":"float32"}function ro(e){return!!(e&&e.constructor&&e.call&&e.apply)}function Wv(e,t){for(let r=t;r<e;++r)if(e%r===0)return r;return e}function nd(e){let t=e.length;if(t<2)return[];let r=new Array(t-1);r[t-2]=e[t-1];for(let a=t-3;a>=0;--a)r[a]=r[a+1]*e[a+1];return r}function KO(e,t,r,a=!1){let n=new Array;if(t.length===1){let i=t[0]*(a?2:1);for(let s=0;s<i;s++)n[s]=r[e+s]}else{let i=t[0],s=t.slice(1),o=s.reduce((l,u)=>l*u)*(a?2:1);for(let l=0;l<i;l++)n[l]=KO(e+l*o,s,r,a)}return n}function kc(e,t,r=!1){if(e.length===0)return t[0];let a=e.reduce((n,i)=>n*i)*(r?2:1);if(a===0)return[];if(a!==t.length)throw new Error(`[${e}] does not match the input size ${t.length}${r?" for a complex tensor":""}.`);return KO(0,e,t,r)}function aC(e,t){let r=Vb(e,t);for(let a=0;a<r.length;a++)r[a]=1;return r}function Vb(e,t){if(t==null||t==="float32"||t==="complex64")return new Float32Array(e);if(t==="int32")return new Int32Array(e);if(t==="bool")return new Uint8Array(e);throw new Error(`Unknown data type ${t}`)}function A8(e,t){let r=e.reduce((a,n)=>a*n,1);if(t==null||t==="float32")return kc(e,new Float32Array(r));if(t==="int32")return kc(e,new Int32Array(r));if(t==="bool")return kc(e,new Uint8Array(r));throw new Error(`Unknown data type ${t}`)}function iC(e){e.forEach(t=>{q(Number.isInteger(t)&&t>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${e}].`)})}function _8(e,t,r){if(t===0)return 0;if(t===1)return e[0];let a=e[e.length-1];for(let n=0;n<e.length-1;++n)a+=r[n]*e[n];return a}function M8(e,t,r){if(t===0)return[];if(t===1)return[e];let a=new Array(t);for(let n=0;n<a.length-1;++n)a[n]=Math.floor(e/r[n]),e-=a[n]*r[n];return a[a.length-1]=e,a}function sC(e){return e&&e.then&&typeof e.then=="function"}var ON="tfjsflags",ZO=class{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=R8,this.populateURLFlags()}setPlatform(e,t){this.platform!=null&&(ce().getBool("IS_TEST")||ce().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${e}.`)),this.platformName=e,this.platform=t}registerFlag(e,t,r){if(this.flagRegistry[e]={evaluationFn:t,setHook:r},this.urlFlags[e]!=null){let a=this.urlFlags[e];ce().getBool("IS_TEST")||ce().getBool("PROD")||console.warn(`Setting feature override from URL ${e}: ${a}.`),this.set(e,a)}}async getAsync(e){return e in this.flags?this.flags[e]:(this.flags[e]=await this.evaluateFlag(e),this.flags[e])}get(e){if(e in this.flags)return this.flags[e];let t=this.evaluateFlag(e);if(sC(t))throw new Error(`Flag ${e} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[e]=t,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,t){if(this.flagRegistry[e]==null)throw new Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=t,this.flagRegistry[e].setHook!=null&&this.flagRegistry[e].setHook(t)}evaluateFlag(e){if(this.flagRegistry[e]==null)throw new Error(`Cannot evaluate flag '${e}': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global=="undefined"||typeof this.global.location=="undefined"||typeof this.global.location.search=="undefined")return;let e=this.getQueryParams(this.global.location.search);ON in e&&e[ON].split(",").forEach(t=>{let[r,a]=t.split(":");this.urlFlags[r]=P8(r,a)})}};function R8(e){let t={};return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(r,...a)=>(O8(t,a[0],a[1]),a.join("="))),t}function O8(e,t,r){e[decodeURIComponent(t)]=decodeURIComponent(r||"")}function P8(e,t){if(t=t.toLowerCase(),t==="true"||t==="false")return t==="true";if(`${+t}`===t)return+t;throw new Error(`Could not parse value flag value ${t} for flag ${e}.`)}function ce(){return oC}var oC=null;function D8(e){oC=e}var Fw;function QO(){if(Fw==null){let e;if(typeof window!="undefined")e=window;else if(typeof global!="undefined")e=global;else if(typeof process!="undefined")e=process;else if(typeof self!="undefined")e=self;else throw new Error("Could not find a global object");Fw=e}return Fw}function F8(){let e=QO();return e._tfGlobals==null&&(e._tfGlobals=new Map),e._tfGlobals}function lC(e,t){let r=F8();if(r.has(e))return r.get(e);{let a=t();return r.set(e,a),r.get(e)}}var ad="Abs",id="Acos",sd="Acosh",vo="Add",Ol="AddN",od="All",ld="Any",Pl="ArgMax",_h="ArgMin",ud="Asin",cd="Asinh",dd="Atan",pd="Atanh",fd="Atan2",Dl="AvgPool",Wb="AvgPoolGrad",Mh="AvgPool3D",Hb="AvgPool3DGrad",Fl="BatchMatMul",hd="BatchToSpaceND",Ub="Bincount",JO="BroadcastTo",jb="BroadcastArgs",Ll="Cast",zl="Ceil",bo="ClipByValue",Gb="Complex",Rh="ComplexAbs",md="Concat",Bl="Conv2D",qb="Conv2DBackpropFilter",Vl="Conv2DBackpropInput",Oh="Conv3D",Xb="Conv3DBackpropFilterV2",Yb="Conv3DBackpropInputV2",Wl="Cos",Hl="Cosh",gd="Cumprod",Ul="Cumsum",vd="CropAndResize",Kb="DenseBincount",bd="DepthToSpace",jl="DepthwiseConv2dNative",Zb="DepthwiseConv2dNativeBackpropFilter",Qb="DepthwiseConv2dNativeBackpropInput",Jb="Diag",Ph="Dilation2D",Hv="Dilation2DBackpropInput",Uv="Dilation2DBackpropFilter",Gl="RealDiv",ey="Einsum",ql="Elu",ty="EluGrad",yd="Erf",wd="Equal",Xl="Exp",xd="ExpandDims",kd="Expm1",ry="FFT",Dh="Fill",Ed="FlipLeftRight",Yl="Floor",Kl="FloorDiv",Zl="FusedBatchNorm",Cd="GatherV2",Sd="GatherNd",$d="Greater",Ql="GreaterEqual",Jl="Identity",ny="IFFT",ay="Imag",Id="IsFinite",Td="IsInf",Nd="IsNan",eu="LeakyRelu",Ad="Less",_d="LessEqual",iy="LinSpace",tu="Log",Md="Log1p",Rd="LogicalAnd",Fh="LogicalNot",Lh="LogicalOr",eP="LogSoftmax",L8="LowerBound",zh="LRN",sy="LRNGrad",ru="Max",nu="Maximum",au="MaxPool",oy="MaxPoolGrad",Bh="MaxPool3D",ly="MaxPool3DGrad",uy="MaxPoolWithArgmax",iu="Mean",su="Min",ou="Minimum",lu="MirrorPad",Od="Mod",cy="Multinomial",uu="Multiply",Pd="Neg",Dd="NotEqual",Fd="NonMaxSuppressionV3",Ld="NonMaxSuppressionV4",zd="NonMaxSuppressionV5",Bd="OnesLike",cu="OneHot",Vd="Pack",du="PadV2",z8="Pool",pu="Pow",fu="Prelu",hu="Prod",Vh="Range",dy="Real",Wd="Reciprocal",mu="Relu",Hd="Reshape",Wh="ResizeNearestNeighbor",py="ResizeNearestNeighborGrad",gu="ResizeBilinear",fy="ResizeBilinearGrad",vu="Relu6",bu="Reverse",yu="Round",wu="Rsqrt",Ud="ScatterNd",hy="SearchSorted",jd="Select",Gd="Selu",qd="Slice",xu="Sin",Xd="Sinh",Yd="Sign",ku="Sigmoid",Kd="Softplus",Eu="Sqrt",Cu="Sum",Zd="SpaceToBatchND",Qd="SplitV",Su="Softmax",Hh="SparseFillEmptyRows",Jd="SparseReshape",Uh="SparseSegmentMean",jh="SparseSegmentSum",my="SparseToDense",$u="SquaredDifference",Gh="Square",ep="StridedSlice",gy="StringNGrams",vy="StringSplit",by="StringToHashBucketFast",Iu="Sub",Tu="Tan",Nu="Tanh",yo="Tile",tp="TopK",rp="Transform",ts="Transpose",yy="Unique",np="Unpack",qh="UnsortedSegmentSum",B8="UpperBound",ap="ZerosLike",wo="Step",jv="FromPixels",ip="RotateWithOffset",cl="_FusedMatMul",dl="FusedConv2D",pl="FusedDepthwiseConv2D";function Ns(...e){ce().getBool("IS_TEST")||ce().getBool("PROD")||console.warn(...e)}function V8(...e){ce().getBool("IS_TEST")||ce().getBool("PROD")||console.log(...e)}var Rc=lC("kernelRegistry",()=>new Map),ah=lC("gradRegistry",()=>new Map);function Gv(e,t){let r=uC(e,t);return Rc.get(r)}function Z1(e){return ah.get(e)}function qv(e){let t=Rc.entries(),r=[];for(;;){let{done:a,value:n}=t.next();if(a)break;let[i,s]=n,[o]=i.split("_");o===e&&r.push(s)}return r}function Xh(e){let{kernelName:t,backendName:r}=e,a=uC(t,r);Rc.has(a)&&Ns(`The kernel '${t}' for backend '${r}' is already registered`),Rc.set(a,e)}function tP(e){let{kernelName:t}=e;ah.has(t)&&ce().getBool("DEBUG")&&Ns(`Overriding the gradient for '${t}'`),ah.set(t,e)}function W8(e,t){let r=uC(e,t);if(!Rc.has(r))throw new Error(`The kernel '${e}' for backend '${t}' is not registered`);Rc.delete(r)}function H8(e){if(!ah.has(e))throw new Error(`The gradient '${e}' for backend is not registered`);ah.delete(e)}function U8(e,t){qv(e).forEach(r=>{let a=Object.assign({},r,{backendName:t});Xh(a)})}function uC(e,t){return`${t}_${e}`}var _={};ut(_,{arraysEqual:()=>go,assert:()=>q,assertNonNegativeIntegerDimensions:()=>iC,assertNonNull:()=>Rl,assertShapesMatch:()=>Sn,bytesFromStringArray:()=>qO,bytesPerElement:()=>K1,checkConversionForErrors:()=>jO,clamp:()=>nh,computeStrides:()=>nd,createScalarValue:()=>K8,createShuffledIndices:()=>$8,decodeString:()=>Xv,distSquared:()=>k8,encodeString:()=>Kh,fetch:()=>Q8,fingerPrint64:()=>Y8,flatten:()=>ul,getArrayFromDType:()=>UO,getTypedArrayFromDType:()=>HO,hasEncodingLoss:()=>N8,hexToLong:()=>Yh,indexToLoc:()=>M8,inferDtype:()=>Bb,inferFromImplicitShape:()=>T8,isBoolean:()=>XO,isFunction:()=>ro,isInt:()=>Mc,isNumber:()=>YO,isPromise:()=>sC,isScalarShape:()=>E8,isString:()=>Ps,isTypedArray:()=>tn,isValidDtype:()=>GO,locToIndex:()=>_8,makeOnesTypedArray:()=>aC,makeZerosNestedTypedArray:()=>A8,makeZerosTypedArray:()=>Vb,nearestDivisor:()=>Wv,nearestLargerEven:()=>y8,now:()=>ih,parseAxisParam:()=>Ua,randUniform:()=>x8,repeatedTry:()=>I8,rightPad:()=>Df,shuffle:()=>VO,shuffleCombo:()=>b8,sizeFromShape:()=>Wt,sizeToSquarishShape:()=>S8,squeezeShape:()=>WO,sum:()=>w8,swap:()=>Vv,tanh:()=>C8,toNestedArray:()=>kc,toTypedArray:()=>wy});var PN=Ml(Kq()),zo=PN.default||PN;function Yh(e){return zo.fromString(e,!0,16)}var rP=Yh("c3a5c85c97cb3127"),Fo=Yh("b492b66fbe98f273"),dn=Yh("9ae16a3b2f90404f");function Q1(e){return e.xor(e.shru(47))}function nP(e,t,r){let a=e.slice(t,t+r);return zo.fromBytes(Array.from(a),!0,!0)}function Vt(e,t){return nP(e,t,8)}function DN(e,t){return nP(e,t,4)}function Fr(e,t){return t===0?e:e.shru(t).or(e.shl(64-t))}function qs(e,t,r=Yh("9ddfea08eb382d69")){let a=e.xor(t).mul(r);a=a.xor(a.shru(47));let n=t.xor(a).mul(r);return n=n.xor(n.shru(47)),n=n.mul(r),n}function j8(e,t,r,a,n,i){n=n.add(e),i=Fr(i.add(n).add(a),21);let s=n;return n=n.add(t),n=n.add(r),i=i.add(Fr(n,44)),[n.add(a),i.add(s)]}function kg(e,t,r,a){return j8(Vt(e,t),Vt(e,t+8),Vt(e,t+16),Vt(e,t+24),r,a)}function G8(e,t=e.length){if(t>=8){let r=dn.add(t*2),a=Vt(e,0).add(dn),n=Vt(e,t-8),i=Fr(n,37).mul(r).add(a),s=Fr(a,25).add(n).mul(r);return qs(i,s,r)}if(t>=4){let r=dn.add(t*2),a=DN(e,0);return qs(a.shl(3).add(t),DN(e,t-4),r)}if(t>0){let r=e[0],a=e[t>>1],n=e[t-1],i=r+(a<<8),s=t+(n<<2);return Q1(dn.mul(i).xor(rP.mul(s))).mul(dn)}return dn}function q8(e,t=e.length){let r=dn.add(t*2),a=Vt(e,0).mul(Fo),n=Vt(e,8),i=Vt(e,t-8).mul(r),s=Vt(e,t-16).mul(dn);return qs(Fr(a.add(n),43).add(Fr(i,30)).add(s),a.add(Fr(n.add(dn),18)).add(i),r)}function X8(e,t=e.length){let r=dn.add(t*2),a=Vt(e,0).mul(dn),n=Vt(e,8),i=Vt(e,t-8).mul(r),s=Vt(e,t-16).mul(dn),o=Fr(a.add(n),43).add(Fr(i,30)).add(s),l=qs(o,a.add(Fr(n.add(dn),18)).add(i),r),u=Vt(e,16).mul(r),c=Vt(e,24),d=o.add(Vt(e,t-32)).mul(r),p=l.add(Vt(e,t-24)).mul(r);return qs(Fr(u.add(c),43).add(Fr(d,30)).add(p),u.add(Fr(c.add(a),18)).add(d),r)}function Y8(e,t=e.length){let r=zo.fromNumber(81,!0);if(t<=32)return t<=16?G8(e,t):q8(e,t);if(t<=64)return X8(e,t);let a=r,n=r.mul(Fo).add(113),i=Q1(n.mul(dn).add(113)).mul(dn),s=[zo.UZERO,zo.UZERO],o=[zo.UZERO,zo.UZERO];a=a.mul(dn).add(Vt(e,0));let l=0,u=(t-1>>6)*64,c=u+(t-1&63)-63;do a=Fr(a.add(n).add(s[0]).add(Vt(e,l+8)),37).mul(Fo),n=Fr(n.add(s[1]).add(Vt(e,l+48)),42).mul(Fo),a=a.xor(o[1]),n=n.add(s[0]).add(Vt(e,l+40)),i=Fr(i.add(o[0]),33).mul(Fo),s=kg(e,l,s[1].mul(Fo),a.add(o[0])),o=kg(e,l+32,i.add(o[1]),n.add(Vt(e,l+16))),[i,a]=[a,i],l+=64;while(l!==u);let d=Fo.add(i.and(255).shl(1));return l=c,o[0]=o[0].add(t-1&63),s[0]=s[0].add(o[0]),o[0]=o[0].add(s[0]),a=Fr(a.add(n).add(s[0]).add(Vt(e,l+8)),37).mul(d),n=Fr(n.add(s[1]).add(Vt(e,l+48)),42).mul(d),a=a.xor(o[1].mul(9)),n=n.add(s[0].mul(9).add(Vt(e,l+40))),i=Fr(i.add(o[0]),33).mul(d),s=kg(e,l,s[1].mul(d),a.add(o[0])),o=kg(e,l+32,i.add(o[1]),n.add(Vt(e,l+16))),[i,a]=[a,i],qs(qs(s[0],o[0],d).add(Q1(n).mul(rP)).add(i),qs(s[1],o[1],d).add(a),d)}function K8(e,t){return t==="string"?Kh(e):wy([e],t)}function Z8(e,t){return e instanceof Float32Array&&t==="float32"||e instanceof Int32Array&&t==="int32"||e instanceof Uint8Array&&t==="bool"}function wy(e,t){if(t==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=ul(e)),ce().getBool("DEBUG")&&jO(e,t),Z8(e,t))return e;if(t==null||t==="float32"||t==="complex64")return new Float32Array(e);if(t==="int32")return new Int32Array(e);if(t==="bool"){let r=new Uint8Array(e.length);for(let a=0;a<r.length;++a)Math.round(e[a])!==0&&(r[a]=1);return r}else throw new Error(`Unknown data type ${t}`)}function ih(){return ce().platform.now()}function Q8(e,t){return ce().platform.fetch(e,t)}function Kh(e,t="utf-8"){return t=t||"utf-8",ce().platform.encode(e,t)}function Xv(e,t="utf-8"){return t=t||"utf-8",ce().platform.decode(e,t)}var J8=class{constructor(e,t){this.backendTimer=e,this.logger=t,t==null&&(this.logger=new tX)}profileKernel(e,t,r){let a,n=()=>{a=r()},i,s=ih();if(this.backendTimer.timerAvailable())i=this.backendTimer.time(n);else{n();for(let o of a)o.dataSync();i=Promise.resolve({kernelMs:ih()-s})}if(ce().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let o=0;o<a.length;o++){let l=a[o];l.data().then(u=>{eX(u,l.dtype,e)})}return{kernelName:e,outputs:a,inputs:t,timeMs:i.then(o=>o.kernelMs),extraInfo:i.then(o=>o.getExtraProfileInfo!=null?o.getExtraProfileInfo():"")}}logKernelProfile(e){let{kernelName:t,outputs:r,timeMs:a,inputs:n,extraInfo:i}=e;r.forEach(s=>{Promise.all([s.data(),a,i]).then(o=>{this.logger.logKernelProfile(t,s,o[0],o[1],n,o[2])})})}};function eX(e,t,r){if(t!=="float32")return!1;for(let a=0;a<e.length;a++){let n=e[a];if(isNaN(n)||!isFinite(n))return console.warn(`Found ${n} in the result of '${r}'`),!0}return!1}var tX=class{logKernelProfile(e,t,r,a,n,i){let s=typeof a=="number"?Df(`${a}ms`,9):a.error,o=Df(e,25),l=t.rank,u=t.size,c=Df(t.shape.toString(),14),d="";for(let p in n){let f=n[p];if(f!=null){let h=f.shape||t.shape,m=h.length;d+=`${p}: ${m}D ${m>0?h:""} `}}console.log(`%c${o}	%c${s}	%c${l}D ${c}	%c${u}	%c${d}	%c${i}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}};function rX(e,t,r){let a={},n={};for(let l=0;l<t.length;l++)a[t[l].id]=!0;for(let l=0;l<e.length;l++){let u=e[l],c=u.inputs;for(let d in c){let p=c[d],f=!1;for(let h=0;h<t.length;h++)if(a[p.id]){u.outputs.forEach(m=>a[m.id]=!0),f=!0,n[u.id]=!0;break}if(f)break}}let i={};i[r.id]=!0;let s={};for(let l=e.length-1;l>=0;l--){let u=e[l],c=u.inputs;for(let d=0;d<u.outputs.length;d++)if(i[u.outputs[d].id]){for(let p in c)i[c[p].id]=!0,s[u.id]=!0;break}}let o=[];for(let l=0;l<e.length;l++){let u=e[l];if(n[u.id]&&s[u.id]){let c={};for(let p in u.inputs){let f=u.inputs[p];a[f.id]&&(c[p]=f)}let d=Object.assign({},u);d.inputs=c,d.outputs=u.outputs,o.push(d)}}return o}function nX(e,t,r,a){for(let n=t.length-1;n>=0;n--){let i=t[n],s=[];if(i.outputs.forEach(l=>{let u=e[l.id];u!=null?s.push(u):s.push(null)}),i.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${i.kernelName}.`);let o=i.gradient(s);for(let l in i.inputs){if(!(l in o))throw new Error(`Cannot backprop through input ${l}. Available gradients found: ${Object.keys(o)}.`);let u=r(()=>o[l]());if(u.dtype!=="float32")throw new Error(`Error in gradient for op ${i.kernelName}. The gradient of input ${l} must have 'float32' dtype, but has '${u.dtype}'`);let c=i.inputs[l];if(!go(u.shape,c.shape))throw new Error(`Error in gradient for op ${i.kernelName}. The gradient of input '${l}' has shape '${u.shape}', which does not match the shape of the input '${c.shape}'`);if(e[c.id]==null)e[c.id]=u;else{let d=e[c.id];e[c.id]=a(d,u),d.dispose()}}}}var FN=20,Zp=3,Lw=7;function aX(e,t,r,a){let n=nd(t),i=iX(e,t,r,n),s=t.length,o=Qg(e,t,r,n,i),l=["Tensor"];return a&&(l.push(`  dtype: ${r}`),l.push(`  rank: ${s}`),l.push(`  shape: [${t}]`),l.push("  values:")),l.push(o.map(u=>"    "+u).join(`
`)),l.join(`
`)}function iX(e,t,r,a){let n=Wt(t),i=a[a.length-1],s=new Array(i).fill(0),o=t.length,l=r==="complex64"?pf(e):e;if(o>1)for(let u=0;u<n/i;u++){let c=u*i;for(let d=0;d<i;d++)s[d]=Math.max(s[d],df(l[c+d],0,r).length)}return s}function df(e,t,r){let a;return Array.isArray(e)?a=`${parseFloat(e[0].toFixed(Lw))} + ${parseFloat(e[1].toFixed(Lw))}j`:Ps(e)?a=`'${e}'`:r==="bool"?a=aP(e):a=parseFloat(e.toFixed(Lw)).toString(),Df(a,t)}function aP(e){return e===0?"false":"true"}function Qg(e,t,r,a,n,i=!0){let s=r==="complex64"?2:1,o=t[0],l=t.length;if(l===0){if(r==="complex64"){let m=pf(e);return[df(m[0],0,r)]}return r==="bool"?[aP(e[0])]:[e[0].toString()]}if(l===1){if(o>FN){let g=Zp*s,v=Array.from(e.slice(0,g)),b=Array.from(e.slice((o-Zp)*s,o*s));return r==="complex64"&&(v=pf(v),b=pf(b)),["["+v.map((y,w)=>df(y,n[w],r)).join(", ")+", ..., "+b.map((y,w)=>df(y,n[o-Zp+w],r)).join(", ")+"]"]}let m=r==="complex64"?pf(e):Array.from(e);return["["+m.map((g,v)=>df(g,n[v],r)).join(", ")+"]"]}let u=t.slice(1),c=a.slice(1),d=a[0]*s,p=[];if(o>FN){for(let m=0;m<Zp;m++){let g=m*d,v=g+d;p.push(...Qg(e.slice(g,v),u,r,c,n,!1))}p.push("...");for(let m=o-Zp;m<o;m++){let g=m*d,v=g+d;p.push(...Qg(e.slice(g,v),u,r,c,n,m===o-1))}}else for(let m=0;m<o;m++){let g=m*d,v=g+d;p.push(...Qg(e.slice(g,v),u,r,c,n,m===o-1))}let f=l===2?",":"";p[0]="["+p[0]+f;for(let m=1;m<p.length-1;m++)p[m]=" "+p[m]+f;let h=`,
`;for(let m=2;m<l;m++)h+=`
`;return p[p.length-1]=" "+p[p.length-1]+"]"+(i?"":h),p}function pf(e){let t=[];for(let r=0;r<e.length;r+=2)t.push([e[r],e[r+1]]);return t}var _r=class{constructor(e,t,r){if(this.dtype=t,this.shape=e.slice(),this.size=Wt(e),r!=null){let a=r.length;q(a===this.size,()=>`Length of values '${a}' does not match the size inferred by the shape '${this.size}'.`)}if(t==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||UO(t,this.size),this.strides=nd(e)}set(e,...t){t.length===0&&(t=[0]),q(t.length===this.rank,()=>`The number of provided coordinates (${t.length}) must match the rank (${this.rank})`);let r=this.locToIndex(t);this.values[r]=e}get(...e){e.length===0&&(e=[0]);let t=0;for(let a of e){if(a<0||a>=this.shape[t]){let n=`Requested out of range element at ${e}.   Buffer shape=${this.shape}`;throw new Error(n)}t++}let r=e[e.length-1];for(let a=0;a<e.length-1;++a)r+=this.strides[a]*e[a];return this.values[r]}locToIndex(e){if(this.rank===0)return 0;if(this.rank===1)return e[0];let t=e[e.length-1];for(let r=0;r<e.length-1;++r)t+=this.strides[r]*e[r];return t}indexToLoc(e){if(this.rank===0)return[];if(this.rank===1)return[e];let t=new Array(this.shape.length);for(let r=0;r<t.length-1;++r)t[r]=Math.floor(e/this.strides[r]),e-=t[r]*this.strides[r];return t[t.length-1]=e,t}get rank(){return this.shape.length}toTensor(){return Za().makeTensor(this.values,this.shape,this.dtype)}},Za=null,Zu=null;function sX(e){Za=e}function oX(e){Zu=e}var ht=class{constructor(e,t,r,a){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=t||"float32",this.size=Wt(e),this.strides=nd(e),this.dataId=r,this.id=a,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){let e=await this.data();return Zu.buffer(this.shape,this.dtype,e)}bufferSync(){return Zu.buffer(this.shape,this.dtype,this.dataSync())}async array(){let e=await this.data();return kc(this.shape,e,this.dtype==="complex64")}arraySync(){return kc(this.shape,this.dataSync(),this.dtype==="complex64")}async data(){this.throwIfDisposed();let e=Za().read(this.dataId);if(this.dtype==="string"){let t=await e;try{return t.map(r=>Xv(r))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),Za().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();let e=Za().readSync(this.dataId);if(this.dtype==="string")try{return e.map(t=>Xv(t))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();let e=await Za().read(this.dataId);return this.dtype==="string"?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(Za().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(e=!1){return Zu.print(this,e)}clone(){return this.throwIfDisposed(),Zu.clone(this)}toString(e=!1){let t=this.dataSync();return aX(t,this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),Zu.cast(this,e)}variable(e=!0,t,r){return this.throwIfDisposed(),Za().makeVariable(this,e,t,r)}};Object.defineProperty(ht,Symbol.hasInstance,{value:e=>!!e&&e.data!=null&&e.dataSync!=null&&e.throwIfDisposed!=null});function we(){return lC("Tensor",()=>ht)}we();var fl=class extends ht{constructor(e,t,r,a){super(e.shape,e.dtype,e.dataId,a),this.trainable=t,this.name=r}assign(e){if(e.dtype!==this.dtype)throw new Error(`dtype of the new value (${e.dtype}) and previous value (${this.dtype}) must match`);if(!go(e.shape,this.shape))throw new Error(`shape of the new value (${e.shape}) and previous value (${this.shape}) must match`);Za().disposeTensor(this),this.dataId=e.dataId,Za().incRef(this,null)}dispose(){Za().disposeVariable(this),this.isDisposedInternal=!0}};Object.defineProperty(fl,Symbol.hasInstance,{value:e=>e instanceof ht&&e.assign!=null&&e.assign instanceof Function});var ni={};ut(ni,{assertTypesMatch:()=>iP,getTensorsInContainer:()=>cC,isTensorInList:()=>uX,makeTypesMatch:()=>nr});var J1;(function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"})(J1||(J1={}));var ek;(function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"})(ek||(ek={}));var tk;(function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"})(tk||(tk={}));var rk;(function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"})(rk||(rk={}));var nk;(function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"})(nk||(nk={}));var lX={float32:rk,int32:ek,bool:tk,complex64:nk};function Ca(e,t){if(e==="string"||t==="string"){if(e==="string"&&t==="string")return"string";throw new Error(`Can not upcast ${e} with ${t}`)}return lX[e][t]}function xy(e){return Ca(e,"int32")}function nr(e,t){if(e.dtype===t.dtype)return[e,t];let r=Ca(e.dtype,t.dtype);return[e.cast(r),t.cast(r)]}function iP(e,t){q(e.dtype===t.dtype,()=>`The dtypes of the first(${e.dtype}) and second(${t.dtype}) input must match`)}function uX(e,t){return t.some(r=>r.id===e.id)}function cC(e){let t=[];return sP(e,t,new Set),t}function sP(e,t,r){if(e==null)return;if(e instanceof ht){t.push(e);return}if(!cX(e))return;let a=e;for(let n in a){let i=a[n];r.has(i)||(r.add(i),sP(i,t,r))}}function cX(e){return Array.isArray(e)||typeof e=="object"}function zw(e){return e.kernelName!=null}var LN=class{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(e=>e.name)))}}}dispose(){for(let e in this.registeredVariables)this.registeredVariables[e].dispose()}},sh=class{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new LN}async ready(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;let e=this.getSortedBackends();for(let t=0;t<e.length;t++){let r=e[t];if(await this.initializeBackend(r).success){await this.setBackend(r);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){let{name:e,asyncInit:t}=this.initializeBackendsAndReturnBest();if(t)throw new Error(`The highest priority backend '${e}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry))if(e in this.registryFactory){let{asyncInit:t}=this.initializeBackend(e);if(t)return null}else return null;return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,t,r=1){return e in this.registryFactory?(Ns(`${e} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[e]={factory:t,priority:r},!0)}async setBackend(e){if(this.registryFactory[e]==null)throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,this.registry[e]==null){this.backendInstance=null;let{success:t,asyncInit:r}=this.initializeBackend(e);if(!(r?await t:t))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new J8(this.backendInstance),!0}setupRegisteredKernels(){qv(this.backendName).forEach(e=>{e.setupFunc!=null&&e.setupFunc(this.backendInstance)})}disposeRegisteredKernels(e){qv(e).forEach(t=>{t.disposeFunc!=null&&t.disposeFunc(this.registry[e])})}initializeBackend(e){let t=this.registryFactory[e];if(t==null)throw new Error(`Cannot initialize backend ${e}, no registration found.`);try{let r=t.factory();if(r&&!(r instanceof Ah)&&typeof r.then=="function"){let a=++this.pendingBackendInitId,n=r.then(i=>a<this.pendingBackendInitId?!1:(this.registry[e]=i,this.pendingBackendInit=null,!0)).catch(i=>(a<this.pendingBackendInitId||(this.pendingBackendInit=null,Ns(`Initialization of backend ${e} failed`),Ns(i.stack||i.message)),!1));return this.pendingBackendInit=n,{success:n,asyncInit:!0}}else return this.registry[e]=r,{success:!0,asyncInit:!1}}catch(r){return Ns(`Initialization of backend ${e} failed`),Ns(r.stack||r.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(`${e} backend not found in registry`);this.backendName===e&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,t)=>this.registryFactory[t].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){let e=this.getSortedBackends();for(let t=0;t<e.length;t++){let r=e[t],{success:a,asyncInit:n}=this.initializeBackend(r);if(n||a)return{name:r,asyncInit:n}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,t){let r=this.state.tensorInfo.get(t),a=r.backend,n=this.readSync(t),i=a.refCount(t);a.disposeData(t,!0),r.backend=e,e.move(t,n,r.shape,r.dtype,i),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,t){let r=null;if(t==null){if(typeof e!="function")throw new Error("Please provide a function to tidy()");t=e}else{if(typeof e!="string"&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof t!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=e}let a;return this.scopedRun(()=>this.startScope(r),()=>this.endScope(a),()=>(a=t(),a instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),a))}scopedRun(e,t,r){e();try{let a=r();return t(),a}catch(a){throw t(),a}}nextTensorId(){return sh.nextTensorId++}nextVariableId(){return sh.nextVariableId++}clone(e){let t=Q.runKernel(Jl,{x:e}),r={x:e},a=i=>({x:()=>{let s="float32",o={x:i},l={dtype:s};return Q.runKernel(Ll,o,l)}}),n=[];return this.addTapeNode(this.state.activeScope.name,r,[t],a,n,{}),t}runKernel(e,t,r){if(this.backendName==null&&this.backend,Gv(e,this.backendName)==null)throw new Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:t,attrs:r})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,t,r){let a=this.backend.numDataIds(),n=0;r.forEach(o=>{n+=o.dtype==="complex64"?3:1});let i=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],s=a-t-n-i;if(s>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${s} data ids) after running '${e}'`)}runKernelFunc(e){let t,r=[],a=this.isTapeOn(),n=this.state.numBytes,i=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let s;this.backendName==null&&this.backend;let o,l=zw(e)?e.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(zw(e)){let{kernelName:f,inputs:h,attrs:m}=e;this.backendName==null&&this.backend;let g=Gv(f,this.backendName);q(g!=null,()=>`Cannot find registered kernel '${f}' for backend '${this.backendName}'`),s=()=>{let v=this.backend.numDataIds();o=g.kernelFunc({inputs:h,attrs:m,backend:this.backend});let b=Array.isArray(o)?o:[o];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(f,v,b);let y=b.map(w=>w.rank!=null?w:this.makeTensorFromTensorInfo(w));if(a){let w=this.getTensorsForGradient(f,h,y);r=this.saveTensorsForBackwardMode(w)}return y}}else{let{forwardFunc:f}=e,h=m=>{!a||(r=m.map(g=>this.keep(this.clone(g))))};s=()=>{let m=this.backend.numDataIds();o=this.tidy(()=>f(this.backend,h));let g=Array.isArray(o)?o:[o];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(l,m,g),g}}let{inputs:u,attrs:c}=e,d=zw(e)?null:e.backwardsFunc,p;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?t=s():(p=this.profiler.profileKernel(l,u,()=>s()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(p),t=p.outputs)}),a&&this.addTapeNode(l,u,t,d,r,c),this.state.profiling&&this.state.activeProfile.kernels.push({name:l,bytesAdded:this.state.numBytes-n,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-i,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(u).map(f=>u[f]!=null?u[f].shape:null),outputShapes:t.map(f=>f.shape),kernelTimeMs:p.timeMs,extraInfo:p.extraInfo}),Array.isArray(o)?t:t[0]}saveTensorsForBackwardMode(e){return e.map(t=>this.keep(this.clone(t)))}getTensorsForGradient(e,t,r){let a=Z1(e);if(a!=null){let n=a.inputsToSave||[],i=a.outputsToSave||[],s;a.saveAllInputs?(q(Array.isArray(t),()=>"saveAllInputs is true, expected inputs to be an array."),s=Object.keys(t).map(l=>t[l])):s=n.map(l=>t[l]);let o=r.filter((l,u)=>i[u]);return s.concat(o)}return[]}makeTensor(e,t,r,a){if(e==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",a=a||this.backend;let n=e;r==="string"&&Ps(e[0])&&(n=e.map(o=>Kh(o)));let i=a.write(n,t,r),s=new ht(t,r,i,this.nextTensorId());if(this.trackTensor(s,a),r==="string"){let o=this.state.tensorInfo.get(i),l=qO(n);this.state.numBytes+=l-o.bytes,o.bytes=l}return s}makeTensorFromDataId(e,t,r,a){r=r||"float32";let n={dataId:e,shape:t,dtype:r};return this.makeTensorFromTensorInfo(n,a)}makeTensorFromTensorInfo(e,t){let{dataId:r,shape:a,dtype:n}=e,i=new ht(a,n,r,this.nextTensorId());return this.trackTensor(i,t),i}makeVariable(e,t=!0,r,a){r=r||this.nextVariableId().toString(),a!=null&&a!==e.dtype&&(e=e.cast(a));let n=new fl(e,t,r,this.nextTensorId());if(this.state.registeredVariables[n.name]!=null)throw new Error(`Variable with name ${n.name} was already registered`);return this.state.registeredVariables[n.name]=n,this.incRef(n,this.backend),n}trackTensor(e,t){this.state.numTensors++,e.dtype==="string"&&this.state.numStringTensors++;let r=0;e.dtype!=="complex64"&&e.dtype!=="string"&&(r=e.size*K1(e.dtype)),this.state.numBytes+=r,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:r})),e instanceof fl||this.track(e)}incRef(e,t){this.trackTensor(e,t),this.backend.incRef(e.dataId)}removeDataId(e,t){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===t&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;let t=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,e.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=t.bytes),e.dtype!=="complex64"&&e.dtype!=="string"){let r=e.size*K1(e.dtype);this.state.numBytes-=r}t.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,t.backend)}disposeVariables(){for(let e in this.state.registeredVariables){let t=this.state.registeredVariables[e];this.disposeVariable(t)}}disposeVariable(e){this.disposeTensor(e),this.state.registeredVariables[e.name]!=null&&delete this.state.registeredVariables[e.name]}memory(){let e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,e.reasons==null&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;let t=this.state.numBytes,r=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(a=>a.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-t,this.state.activeProfile.newTensors=this.state.numTensors-r;for(let a of this.state.activeProfile.kernels)a.kernelTimeMs=await a.kernelTimeMs,a.extraInfo=await a.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(e,t,r,a,n,i){let s={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:r,saved:n},o=Z1(e);o!=null&&(a=o.gradFunc),a!=null&&(s.gradient=l=>(l=l.map((u,c)=>{if(u==null){let d=r[c],p=Vb(d.size,d.dtype);return this.makeTensor(p,d.shape,d.dtype)}return u}),a(l.length>1?l:l[0],n,i))),this.state.activeTape.push(s)}keep(e){return e.kept=!0,e}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){let t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t}endScope(e){let t=cC(e),r=new Set(t.map(n=>n.id));for(let n=0;n<this.state.activeScope.track.length;n++){let i=this.state.activeScope.track[n];!i.kept&&!r.has(i.id)&&i.dispose()}let a=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],t.forEach(n=>{!n.kept&&n.scopeId===a.id&&this.track(n)})}gradients(e,t,r,a=!1){if(q(t.length>0,()=>"gradients() received an empty list of xs."),r!=null&&r.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${r.dtype}'`);let n=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));q(n instanceof ht,()=>"The result y returned by f() must be a tensor.");let i=rX(this.state.activeTape,t,n);if(!a&&i.length===0&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{let s={};s[n.id]=r==null?dX(n.shape):r,nX(s,i,l=>this.tidy(l),pX);let o=t.map(l=>s[l.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(l=>{for(let u of l.saved)u.dispose()}),this.state.activeTape=null),{value:n,grads:o}})}customGrad(e){return q(ro(e),()=>"The f passed in customGrad(f) must be a function."),(...t)=>{q(t.every(s=>s instanceof ht),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let r,a={};t.forEach((s,o)=>{a[o]=s});let n=(s,o)=>(r=e(...t,o),q(r.value instanceof ht,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),q(ro(r.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),r.value),i=(s,o)=>{let l=r.gradFunc(s,o),u=Array.isArray(l)?l:[l];q(u.length===t.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),q(u.every(d=>d instanceof ht),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");let c={};return u.forEach((d,p)=>{c[p]=()=>d}),c};return this.runKernelFunc({forwardFunc:n,backwardsFunc:i,inputs:a})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,t){return this.state.tensorInfo.get(e).backend.readToGPU(e,t)}async time(e){let t=ih(),r=await this.backend.time(e);return r.wallMs=ih()-t,r}track(e){return this.state.activeScope!=null&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new LN;for(let e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}};sh.nextTensorId=0;sh.nextVariableId=0;function dX(e){let t=aC(Wt(e),"float32");return Q.makeTensor(t,e,"float32")}function oP(){let e=QO();if(e._tfengine==null){let t=new ZO(e);e._tfengine=new sh(t)}return D8(e._tfengine.ENV),sX(()=>e._tfengine),e._tfengine}var Q=oP();function pX(e,t){let r={a:e,b:t};return Q.runKernel(vo,r)}var Zh={};ut(Zh,{isBrowser:()=>lP,isMobile:()=>mX,mockIsMobile:()=>hX});function fX(){return typeof navigator!="undefined"&&navigator!=null}var ak;function hX(e){ak=e}function mX(e){if(ak!==void 0)return ak;if(e||fX()){if(e||(e=navigator),e.product==="ReactNative")return!0;let t=e.userAgent||e.vendor||(typeof window!="undefined"?window.opera:"");if(!t){let r=e;return r.userAgentData&&r.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}return!1}function lP(){return typeof window!="undefined"&&window.document!=null||typeof WorkerGlobalScope!="undefined"}var Ba=ce();Ba.registerFlag("DEBUG",()=>!1,e=>{e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});Ba.registerFlag("IS_BROWSER",()=>lP());Ba.registerFlag("IS_NODE",()=>typeof process!="undefined"&&typeof process.versions!="undefined"&&typeof process.versions.node!="undefined");Ba.registerFlag("IS_CHROME",()=>typeof navigator!="undefined"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));Ba.registerFlag("PROD",()=>!1);Ba.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>Ba.getBool("DEBUG"));Ba.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);Ba.registerFlag("IS_TEST",()=>!1);Ba.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>!0);Ba.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);Ba.registerFlag("ENGINE_COMPILE_ONLY",()=>!1);function $i(e,t){let r=e;if(tn(e))return t==="string"?[]:[e.length];if(!Array.isArray(e))return[];let a=[];for(;Array.isArray(r)||tn(r)&&t!=="string";)a.push(r.length),r=r[0];return Array.isArray(e)&&ce().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&uP(e,a,[]),a}function uP(e,t,r){if(r=r||[],!Array.isArray(e)&&!tn(e)){q(t.length===0,()=>`Element arr[${r.join("][")}] is a primitive, but should be an array/TypedArray of ${t[0]} elements`);return}q(t.length>0,()=>`Element arr[${r.join("][")}] should be a primitive, but is an array of ${e.length} elements`),q(e.length===t[0],()=>`Element arr[${r.join("][")}] should have ${t[0]} elements, but has ${e.length} elements`);let a=t.slice(1);for(let n=0;n<e.length;++n)uP(e[n],a,r.concat(n))}function zN(e,t,r,a){if(e!=="string_or_numeric"){if(e==null)throw new Error("Expected dtype cannot be null.");if(e!=="numeric"&&e!==t||e==="numeric"&&t==="string")throw new Error(`Argument '${r}' passed to '${a}' must be ${e} tensor, but got ${t} tensor`)}}function W(e,t,r,a="numeric"){if(e instanceof ht)return zN(a,e.dtype,t,r),e;let n=Bb(e);if(n!=="string"&&["bool","int32","float32"].indexOf(a)>=0&&(n=a),zN(a,n,t,r),e==null||!tn(e)&&!Array.isArray(e)&&typeof e!="number"&&typeof e!="boolean"&&typeof e!="string"){let o=e==null?"null":e.constructor.name;throw new Error(`Argument '${t}' passed to '${r}' must be a Tensor or TensorLike, but got '${o}'`)}let i=$i(e,n);!tn(e)&&!Array.isArray(e)&&(e=[e]);let s=n!=="string"?wy(e,n):ul(e,[],!0);return Q.makeTensor(s,i,n)}function oh(e,t,r,a="numeric"){if(!Array.isArray(e))throw new Error(`Argument ${t} passed to ${r} must be a \`Tensor[]\` or \`TensorLike[]\``);return e.map((n,i)=>W(n,`${t}[${i}]`,r,a))}var cP="__op";function J(e){let t=Object.keys(e);if(t.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${t.length} keys.`);let r=t[0],a=e[r];r.endsWith("_")&&(r=r.substring(0,r.length-1)),r=r+cP;let n=(...i)=>{Q.startScope(r);try{let s=a(...i);return sC(s)&&console.error("Cannot return a Promise inside of tidy."),Q.endScope(s),s}catch(s){throw Q.endScope(null),s}};return Object.defineProperty(n,"name",{value:r,configurable:!0}),n}function gX(e,t){let r=W(e,"real","complex"),a=W(t,"imag","complex");Sn(r.shape,a.shape,`real and imag shapes, ${r.shape} and ${a.shape}, must match in call to tf.complex().`);let n={real:r,imag:a};return Q.runKernel(Gb,n)}var os=J({complex_:gX});function xo(e,t,r,a){if(a==null&&(a=Bb(e)),a==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!tn(e)&&!Array.isArray(e)&&typeof e!="number"&&typeof e!="boolean"&&typeof e!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(t!=null){iC(t);let n=Wt(t),i=Wt(r);q(n===i,()=>`Based on the provided shape, [${t}], the tensor should have ${n} values but has ${i}`);for(let s=0;s<r.length;++s){let o=r[s],l=s===r.length-1?o!==Wt(t.slice(s)):!0;q(r[s]===t[s]||!l,()=>`Error creating a new Tensor. Inferred shape (${r}) does not match the provided shape (${t}). `)}}return!tn(e)&&!Array.isArray(e)&&(e=[e]),t=t||r,e=a!=="string"?wy(e,a):ul(e,[],!0),Q.makeTensor(e,t,a)}function ka(e,t,r){let a=$i(e,r);return xo(e,t,a,r)}var ik={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8},Yv=4;async function vX(e,t){let r=[],a=[],n=Array.isArray(e)?e.map(s=>s.name):Object.keys(e);for(let s=0;s<n.length;++s){let o=n[s],l=Array.isArray(e)?e[s].tensor:e[o];if(l.dtype!=="float32"&&l.dtype!=="int32"&&l.dtype!=="bool"&&l.dtype!=="string"&&l.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${o}': ${l.dtype}`);let u={name:o,shape:l.shape,dtype:l.dtype};if(l.dtype==="string"){let c=new Promise(async d=>{let p=await l.bytes(),f=p.reduce((g,v)=>g+v.length,0)+Yv*p.length,h=new Uint8Array(f),m=0;for(let g=0;g<p.length;g++){let v=p[g],b=new Uint8Array(new Uint32Array([v.length]).buffer);h.set(b,m),m+=Yv,h.set(v,m),m+=v.length}d(h)});a.push(c)}else a.push(l.data());t!=null&&(u.group=t),r.push(u)}let i=await Promise.all(a);return{data:bX(i),specs:r}}function dP(e,t){let r={},a,n=0;for(let i of t){let s=i.name,o=i.dtype,l=i.shape,u=Wt(l),c;if("quantization"in i){let d=i.quantization;if(d.dtype==="uint8"||d.dtype==="uint16"){if(!("min"in d&&"scale"in d))throw new Error(`Weight ${i.name} with quantization ${d.dtype} doesn't have corresponding metadata min and scale.`)}else if(d.dtype==="float16"){if(o!=="float32")throw new Error(`Weight ${i.name} is quantized with ${d.dtype} which only supports weights of type float32 not ${o}.`)}else throw new Error(`Weight ${i.name} has unknown quantization dtype ${d.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);let p=ik[d.dtype],f=e.slice(n,n+u*p),h=d.dtype==="uint8"?new Uint8Array(f):new Uint16Array(f);if(o==="float32")if(d.dtype==="uint8"||d.dtype==="uint16"){c=new Float32Array(h.length);for(let m=0;m<h.length;m++){let g=h[m];c[m]=g*d.scale+d.min}}else if(d.dtype==="float16")a===void 0&&(a=CX()),c=a(h);else throw new Error(`Unsupported quantization type ${d.dtype} for weight type float32.`);else if(o==="int32"){if(d.dtype!=="uint8"&&d.dtype!=="uint16")throw new Error(`Unsupported quantization type ${d.dtype} for weight type int32.`);c=new Int32Array(h.length);for(let m=0;m<h.length;m++){let g=h[m];c[m]=Math.round(g*d.scale+d.min)}}else throw new Error(`Unsupported dtype in weight '${s}': ${o}`);n+=u*p}else if(o==="string"){let d=Wt(i.shape);c=[];for(let p=0;p<d;p++){let f=new Uint32Array(e.slice(n,n+Yv))[0];n+=Yv;let h=new Uint8Array(e.slice(n,n+f));c.push(h),n+=f}}else{let d=ik[o],p=e.slice(n,n+u*d);if(o==="float32")c=new Float32Array(p);else if(o==="int32")c=new Int32Array(p);else if(o==="bool")c=new Uint8Array(p);else if(o==="complex64"){c=new Float32Array(p);let f=new Float32Array(c.length/2),h=new Float32Array(c.length/2);for(let v=0;v<f.length;v++)f[v]=c[v*2],h[v]=c[v*2+1];let m=ka(f,l,"float32"),g=ka(h,l,"float32");r[s]=os(m,g),m.dispose(),g.dispose()}else throw new Error(`Unsupported dtype in weight '${s}': ${o}`);n+=u*d}o!=="complex64"&&(r[s]=ka(c,l,o))}return r}function bX(e){if(e===null)throw new Error(`Invalid input value: ${JSON.stringify(e)}`);let t=0,r=[];e.forEach(i=>{if(t+=i.byteLength,r.push(i.byteLength===i.buffer.byteLength?i:new i.constructor(i)),!(i instanceof Float32Array||i instanceof Int32Array||i instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${i.constructor.name}`)});let a=new Uint8Array(t),n=0;return r.forEach(i=>{a.set(new Uint8Array(i.buffer),n),n+=i.byteLength}),a.buffer}var dC=typeof Buffer!="undefined"&&(typeof Blob=="undefined"||typeof atob=="undefined"||typeof btoa=="undefined");function BN(e){return dC?Buffer.byteLength(e):new Blob([e]).size}function yX(e){if(dC)return Buffer.from(e).toString("base64");let t=new Uint8Array(e),r="";for(let a=0,n=t.length;a<n;a++)r+=String.fromCharCode(t[a]);return btoa(r)}function wX(e){if(dC){let a=Buffer.from(e,"base64");return a.buffer.slice(a.byteOffset,a.byteOffset+a.byteLength)}let t=atob(e),r=new Uint8Array(t.length);for(let a=0;a<t.length;++a)r.set([t.charCodeAt(a)],a);return r.buffer}function pC(e){if(e.length===1)return e[0];let t=0;e.forEach(n=>{t+=n.byteLength});let r=new Uint8Array(t),a=0;return e.forEach(n=>{r.set(new Uint8Array(n),a),a+=n.byteLength}),r.buffer}function VN(e){let t="/";for(e=e.trim();e.endsWith(t);)e=e.slice(0,e.length-1);let r=e.split(t);return r[r.length-1]}function pP(e,t){let r={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:t};return e.signature!=null&&(r.signature=e.signature),e.userDefinedMetadata!=null&&(r.userDefinedMetadata=e.userDefinedMetadata),e.modelInitializer!=null&&(r.modelInitializer=e.modelInitializer),e.trainingConfig!=null&&(r.trainingConfig=e.trainingConfig),r}async function fC(e,t){let r={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy};if(e.trainingConfig!=null&&(r.trainingConfig=e.trainingConfig),e.weightsManifest!=null){let[a,n]=await t(e.weightsManifest);r.weightSpecs=a,r.weightData=n}return e.signature!=null&&(r.signature=e.signature),e.userDefinedMetadata!=null&&(r.userDefinedMetadata=e.userDefinedMetadata),e.modelInitializer!=null&&(r.modelInitializer=e.modelInitializer),r}function Qh(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:e.modelTopology==null?0:BN(JSON.stringify(e.modelTopology)),weightSpecsBytes:e.weightSpecs==null?0:BN(JSON.stringify(e.weightSpecs)),weightDataBytes:e.weightData==null?0:e.weightData.byteLength}}function xX(){let e=r=>{let a=r<<13,n=0;for(;(a&8388608)===0;)n-=8388608,a<<=1;return a&=-8388609,n+=947912704,a|n},t=new Uint32Array(2048);t[0]=0;for(let r=1;r<1024;r++)t[r]=e(r);for(let r=1024;r<2048;r++)t[r]=939524096+(r-1024<<13);return t}function kX(){let e=new Uint32Array(64);e[0]=0,e[31]=1199570944,e[32]=2147483648,e[63]=3347054592;for(let t=1;t<31;t++)e[t]=t<<23;for(let t=33;t<63;t++)e[t]=2147483648+(t-32<<23);return e}function EX(){let e=new Uint32Array(64);for(let t=0;t<64;t++)e[t]=1024;return e[0]=e[32]=0,e}function CX(){let e=xX(),t=kX(),r=EX();return a=>{let n=new ArrayBuffer(4*a.length),i=new Uint32Array(n);for(let s=0;s<a.length;s++){let o=a[s],l=e[r[o>>10]+(o&1023)]+t[o>>10];i[s]=l}return new Float32Array(n)}}var sr=class{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return sr.instance==null&&(sr.instance=new sr),sr.instance}static registerSaveRouter(e){sr.getInstance().saveRouters.push(e)}static registerLoadRouter(e){sr.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return sr.getHandlers(e,"save")}static getLoadHandlers(e,t){return sr.getHandlers(e,"load",t)}static getHandlers(e,t,r){let a=[];return(t==="load"?sr.getInstance().loadRouters:sr.getInstance().saveRouters).forEach(n=>{let i=n(e,r);i!==null&&a.push(i)}),a}},SX=e=>sr.registerSaveRouter(e),$X=e=>sr.registerLoadRouter(e),IX=e=>sr.getSaveHandlers(e),TX=(e,t)=>sr.getLoadHandlers(e,t),sk="tensorflowjs",ok=1,Xo="models_store",Ds="model_info_store";function fP(){if(!ce().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");let e=typeof window=="undefined"?self:window,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(t==null)throw new Error("The current browser does not appear to support IndexedDB.");return t}function lk(e){let t=e.result;t.createObjectStore(Xo,{keyPath:"modelPath"}),t.createObjectStore(Ds,{keyPath:"modelPath"})}var hl=class{constructor(e){if(this.indexedDB=fP(),e==null||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,t){return new Promise((r,a)=>{let n=this.indexedDB.open(sk,ok);n.onupgradeneeded=()=>lk(n),n.onsuccess=()=>{let i=n.result;if(t==null){let s=i.transaction(Xo,"readonly"),o=s.objectStore(Xo).get(this.modelPath);o.onsuccess=()=>{if(o.result==null)return i.close(),a(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));r(o.result.modelArtifacts)},o.onerror=l=>(i.close(),a(o.error)),s.oncomplete=()=>i.close()}else{let s=Qh(t),o=i.transaction(Ds,"readwrite"),l=o.objectStore(Ds),u=l.put({modelPath:this.modelPath,modelArtifactsInfo:s}),c;u.onsuccess=()=>{c=i.transaction(Xo,"readwrite");let d=c.objectStore(Xo).put({modelPath:this.modelPath,modelArtifacts:t,modelArtifactsInfo:s});d.onsuccess=()=>r({modelArtifactsInfo:s}),d.onerror=p=>{l=o.objectStore(Ds);let f=l.delete(this.modelPath);f.onsuccess=()=>(i.close(),a(d.error)),f.onerror=h=>(i.close(),a(d.error))}},u.onerror=d=>(i.close(),a(u.error)),o.oncomplete=()=>{c==null?i.close():c.oncomplete=()=>i.close()}}},n.onerror=i=>a(n.error)})}};hl.URL_SCHEME="indexeddb://";var hP=e=>ce().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(hl.URL_SCHEME)?NX(e.slice(hl.URL_SCHEME.length)):null;sr.registerSaveRouter(hP);sr.registerLoadRouter(hP);function NX(e){return new hl(e)}function AX(e){return e.startsWith(hl.URL_SCHEME)?e.slice(hl.URL_SCHEME.length):e}var _X=class{constructor(){this.indexedDB=fP()}async listModels(){return new Promise((e,t)=>{let r=this.indexedDB.open(sk,ok);r.onupgradeneeded=()=>lk(r),r.onsuccess=()=>{let a=r.result,n=a.transaction(Ds,"readonly"),i=n.objectStore(Ds).getAll();i.onsuccess=()=>{let s={};for(let o of i.result)s[o.modelPath]=o.modelArtifactsInfo;e(s)},i.onerror=s=>(a.close(),t(i.error)),n.oncomplete=()=>a.close()},r.onerror=a=>t(r.error)})}async removeModel(e){return e=AX(e),new Promise((t,r)=>{let a=this.indexedDB.open(sk,ok);a.onupgradeneeded=()=>lk(a),a.onsuccess=()=>{let n=a.result,i=n.transaction(Ds,"readwrite"),s=i.objectStore(Ds),o=s.get(e),l;o.onsuccess=()=>{if(o.result==null)return n.close(),r(new Error(`Cannot find model with path '${e}' in IndexedDB.`));{let u=s.delete(e),c=()=>{l=n.transaction(Xo,"readwrite");let d=l.objectStore(Xo).delete(e);d.onsuccess=()=>t(o.result.modelArtifactsInfo),d.onerror=p=>r(o.error)};u.onsuccess=c,u.onerror=d=>(c(),n.close(),r(o.error))}},o.onerror=u=>(n.close(),r(o.error)),i.oncomplete=()=>{l==null?n.close():l.oncomplete=()=>n.close()}},a.onerror=n=>r(a.error)})}},Xi="/",Qu="tensorflowjs_models",mP="info",MX="model_topology",RX="weight_specs",OX="weight_data",PX="model_metadata";function gP(e){return{info:[Qu,e,mP].join(Xi),topology:[Qu,e,MX].join(Xi),weightSpecs:[Qu,e,RX].join(Xi),weightData:[Qu,e,OX].join(Xi),modelMetadata:[Qu,e,PX].join(Xi)}}function vP(e){for(let t of Object.values(e))window.localStorage.removeItem(t)}function DX(e){let t=e.split(Xi);if(t.length<3)throw new Error(`Invalid key format: ${e}`);return t.slice(1,t.length-1).join(Xi)}function FX(e){return e.startsWith(ml.URL_SCHEME)?e.slice(ml.URL_SCHEME.length):e}var ml=class{constructor(e){if(!ce().getBool("IS_BROWSER")||typeof window=="undefined"||typeof window.localStorage=="undefined")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,e==null||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=gP(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{let t=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),a=Qh(e);try{this.LS.setItem(this.keys.info,JSON.stringify(a)),this.LS.setItem(this.keys.topology,t),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,yX(e.weightData));let n={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:e.signature!=null?e.signature:void 0,userDefinedMetadata:e.userDefinedMetadata!=null?e.userDefinedMetadata:void 0,modelInitializer:e.modelInitializer!=null?e.modelInitializer:void 0,trainingConfig:e.trainingConfig!=null?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(n)),{modelArtifactsInfo:a}}catch{throw vP(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${a.modelTopologyBytes}, weightSpecsBytes=${a.weightSpecsBytes}, weightDataBytes=${a.weightDataBytes}.`)}}}async load(){let e=JSON.parse(this.LS.getItem(this.keys.info));if(e==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(e.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");let t={},r=JSON.parse(this.LS.getItem(this.keys.topology));if(r==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);t.modelTopology=r;let a=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(a==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);t.weightSpecs=a;let n=this.LS.getItem(this.keys.modelMetadata);if(n!=null){let s=JSON.parse(n);t.format=s.format,t.generatedBy=s.generatedBy,t.convertedBy=s.convertedBy,s.signature!=null&&(t.signature=s.signature),s.userDefinedMetadata!=null&&(t.userDefinedMetadata=s.userDefinedMetadata),s.modelInitializer!=null&&(t.modelInitializer=s.modelInitializer),s.trainingConfig!=null&&(t.trainingConfig=s.trainingConfig)}let i=this.LS.getItem(this.keys.weightData);if(i==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return t.weightData=wX(i),t}};ml.URL_SCHEME="localstorage://";var bP=e=>ce().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(ml.URL_SCHEME)?LX(e.slice(ml.URL_SCHEME.length)):null;sr.registerSaveRouter(bP);sr.registerLoadRouter(bP);function LX(e){return new ml(e)}var zX=class{constructor(){q(ce().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),q(typeof window=="undefined"||typeof window.localStorage!="undefined",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){let e={},t=Qu+Xi,r=Xi+mP;for(let a=0;a<this.LS.length;++a){let n=this.LS.key(a);if(n.startsWith(t)&&n.endsWith(r)){let i=DX(n);e[i]=JSON.parse(this.LS.getItem(n))}}return e}async removeModel(e){e=FX(e);let t=gP(e);if(this.LS.getItem(t.info)==null)throw new Error(`Cannot find model at path '${e}'`);let r=JSON.parse(this.LS.getItem(t.info));return vP(t),r}},Ec="://",va=class{constructor(){this.managers={}}static getInstance(){return va.instance==null&&(va.instance=new va),va.instance}static registerManager(e,t){q(e!=null,()=>"scheme must not be undefined or null."),e.endsWith(Ec)&&(e=e.slice(0,e.indexOf(Ec))),q(e.length>0,()=>"scheme must not be an empty string.");let r=va.getInstance();q(r.managers[e]==null,()=>`A model store manager is already registered for scheme '${e}'.`),r.managers[e]=t}static getManager(e){let t=this.getInstance().managers[e];if(t==null)throw new Error(`Cannot find model manager for scheme '${e}'`);return t}static getSchemes(){return Object.keys(this.getInstance().managers)}};function Jg(e){if(e.indexOf(Ec)===-1)throw new Error(`The url string provided does not contain a scheme. Supported schemes are: ${va.getSchemes().join(",")}`);return{scheme:e.split(Ec)[0],path:e.split(Ec)[1]}}async function yP(e,t,r=!1){q(e!==t,()=>`Old path and new path are the same: '${e}'`);let a=sr.getLoadHandlers(e);q(a.length>0,()=>`Copying failed because no load handler is found for source URL ${e}.`),q(a.length<2,()=>`Copying failed because more than one (${a.length}) load handlers for source URL ${e}.`);let n=a[0],i=sr.getSaveHandlers(t);q(i.length>0,()=>`Copying failed because no save handler is found for destination URL ${t}.`),q(i.length<2,()=>`Copying failed because more than one (${a.length}) save handlers for destination URL ${t}.`);let s=i[0],o=Jg(e).scheme,l=Jg(e).path,u=o===Jg(e).scheme,c=await n.load();r&&u&&await va.getManager(o).removeModel(l);let d=await s.save(c);return r&&!u&&await va.getManager(o).removeModel(l),d.modelArtifactsInfo}async function BX(){let e=va.getSchemes(),t={};for(let r of e){let a=await va.getManager(r).listModels();for(let n in a){let i=r+Ec+n;t[i]=a[n]}}return t}async function VX(e){let t=Jg(e);return va.getManager(t.scheme).removeModel(t.path)}async function WX(e,t){return yP(e,t,!1)}async function HX(e,t){return yP(e,t,!0)}var UX=class{fetch(e,t){return fetch(e,t)}now(){return performance.now()}encode(e,t){if(t!=="utf-8"&&t!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${t}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,t){return new TextDecoder(t).decode(e)}};if(ce().get("IS_BROWSER")){ce().setPlatform("browser",new UX);try{va.registerManager(ml.URL_SCHEME,new zX)}catch{}try{va.registerManager(hl.URL_SCHEME,new _X)}catch{}}var jX={importFetch:()=>Zq()},Bw,GX=class{constructor(){this.util=Qq(),this.textEncoder=new this.util.TextEncoder}fetch(e,t){return ce().global.fetch!=null?ce().global.fetch(e,t):(Bw==null&&(Bw=jX.importFetch()),Bw(e,t))}now(){let e=process.hrtime();return e[0]*1e3+e[1]/1e6}encode(e,t){if(t!=="utf-8"&&t!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${t}`);return this.textEncoder.encode(e)}decode(e,t){return e.length===0?"":new this.util.TextDecoder(t).decode(e)}};ce().get("IS_NODE")&&!ce().get("IS_BROWSER")&&ce().setPlatform("node",new GX);function gt(e,t="float32",r){return t=t||"float32",iC(e),new _r(e,t,r)}function qX(e,t){let r=W(e,"x","cast");if(!GO(t))throw new Error(`Failed to cast to unknown dtype ${t}`);if(t==="string"&&r.dtype!=="string"||t!=="string"&&r.dtype==="string")throw new Error("Only strings can be casted to strings");let a={x:r},n={dtype:t};return Q.runKernel(Ll,a,n)}var Te=J({cast_:qX});function XX(e){let t={x:W(e,"x","clone","string_or_numeric")};return Q.runKernel(Jl,t)}var rs=J({clone_:XX});function wP(e,t=!1){console.log(e.toString(t))}oP();var YX={buffer:gt,cast:Te,clone:rs,print:wP};oX(YX);var rn={};ut(rn,{browserFiles:()=>rY,browserHTTPRequest:()=>oY,concatenateArrayBuffers:()=>pC,copyModel:()=>WX,decodeWeights:()=>dP,encodeWeights:()=>vX,fromMemory:()=>uY,fromMemorySync:()=>SP,getLoadHandlers:()=>TX,getModelArtifactsForJSON:()=>fC,getModelArtifactsInfoForJSON:()=>Qh,getSaveHandlers:()=>IX,http:()=>mC,isHTTPScheme:()=>uk,listModels:()=>BX,loadWeights:()=>nY,moveModel:()=>HX,registerLoadRouter:()=>$X,registerSaveRouter:()=>SX,removeModel:()=>VX,weightsLoaderFactory:()=>kP,withSaveHandler:()=>cY,withSaveHandlerSync:()=>dY});var KX="model",ZX=".json",QX=".weights.bin";function WN(e){return new Promise(t=>setTimeout(t)).then(e)}var Oc=class{constructor(e){if(!ce().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(Oc.URL_SCHEME)&&(e=e.slice(Oc.URL_SCHEME.length)),(e==null||e.length===0)&&(e=KX),this.modelJsonFileName=e+ZX,this.weightDataFileName=e+QX}async save(e){if(typeof document=="undefined")throw new Error("Browser downloads are not supported in this environment since `document` is not present");let t=window.URL.createObjectURL(new Blob([e.weightData],{type:"application/octet-stream"}));if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{let r=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],a=pP(e,r),n=window.URL.createObjectURL(new Blob([JSON.stringify(a)],{type:"application/json"})),i=this.modelJsonAnchor==null?document.createElement("a"):this.modelJsonAnchor;if(i.download=this.modelJsonFileName,i.href=n,await WN(()=>i.dispatchEvent(new MouseEvent("click"))),e.weightData!=null){let s=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor;s.download=this.weightDataFileName,s.href=t,await WN(()=>s.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:Qh(e)}}}};Oc.URL_SCHEME="downloads://";var JX=class{constructor(e){if(e==null||e.length<1)throw new Error(`When calling browserFiles, at least 1 file is required, but received ${e}`);this.jsonFile=e[0],this.weightsFiles=e.slice(1)}async load(){return new Promise((e,t)=>{let r=new FileReader;r.onload=a=>{let n=JSON.parse(a.target.result),i=n.modelTopology;if(i==null){t(new Error(`modelTopology field is missing from file ${this.jsonFile.name}`));return}if(n.weightsManifest==null){t(new Error(`weightManifest field is missing from file ${this.jsonFile.name}`));return}if(this.weightsFiles.length===0){e({modelTopology:i});return}let s=fC(n,o=>this.loadWeights(o));e(s)},r.onerror=a=>t(`Failed to read model topology and weights manifest JSON from file '${this.jsonFile.name}'. BrowserFiles supports loading Keras-style tf.Model artifacts only.`),r.readAsText(this.jsonFile)})}loadWeights(e){let t=[],r=[];for(let i of e)t.push(...i.weights),r.push(...i.paths);let a=this.checkManifestAndWeightFiles(e),n=r.map(i=>this.loadWeightsFile(i,a[i]));return Promise.all(n).then(i=>[t,pC(i)])}loadWeightsFile(e,t){return new Promise((r,a)=>{let n=new FileReader;n.onload=i=>{let s=i.target.result;r(s)},n.onerror=i=>a(`Failed to weights data from file of path '${e}'.`),n.readAsArrayBuffer(t)})}checkManifestAndWeightFiles(e){let t=[],r=this.weightsFiles.map(n=>VN(n.name)),a={};for(let n of e)n.paths.forEach(i=>{let s=VN(i);if(t.indexOf(s)!==-1)throw new Error(`Duplicate file basename found in weights manifest: '${s}'`);if(t.push(s),r.indexOf(s)===-1)throw new Error(`Weight file with basename '${s}' is not provided.`);a[i]=this.weightsFiles[r.indexOf(s)]});if(t.length!==this.weightsFiles.length)throw new Error(`Mismatch in the number of files in weights manifest (${t.length}) and the number of weight files provided (${this.weightsFiles.length}).`);return a}},eY=e=>ce().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Oc.URL_SCHEME)?tY(e.slice(Oc.URL_SCHEME.length)):null;sr.registerSaveRouter(eY);function tY(e="model"){return new Oc(e)}function rY(e){return new JX(e)}function HN(e,t,r,a){s(e),r=r==null?0:r,a=a==null?1:a,o(r,a);let n=0,i=l=>(l.then(u=>{let c=r+ ++n/e.length*(a-r);return t(c),u}),l);function s(l){q(l!=null&&Array.isArray(l)&&l.length>0,()=>"promises must be a none empty array")}function o(l,u){q(l>=0&&l<=1,()=>`Progress fraction must be in range [0, 1], but got startFraction ${l}`),q(u>=0&&u<=1,()=>`Progress fraction must be in range [0, 1], but got endFraction ${u}`),q(u>=l,()=>`startFraction must be no more than endFraction, but got startFraction ${l} and endFraction ${u}`)}return Promise.all(e.map(i))}async function xP(e,t){t==null&&(t={});let r=t.fetchFunc==null?ce().platform.fetch:t.fetchFunc,a=e.map(u=>r(u,t.requestInit,{isBinary:!0})),n=0,i=.5,s=(t.onProgress==null?await Promise.all(a):await HN(a,t.onProgress,n,i)).map(u=>u.arrayBuffer()),o=.5,l=1;return t.onProgress==null?await Promise.all(s):await HN(s,t.onProgress,o,l)}async function nY(e,t="",r,a){return kP(n=>xP(n,{requestInit:a}))(e,t,r)}function kP(e){return async(t,r="",a)=>{let n=t.map(()=>!1),i={},s=a!=null?a.map(()=>!1):[],o=[];if(t.forEach((f,h)=>{let m=0;f.weights.forEach(g=>{let v="quantization"in g?g.quantization.dtype:g.dtype,b=ik[v]*Wt(g.shape),y=()=>{n[h]=!0,i[h]==null&&(i[h]=[]),i[h].push({manifestEntry:g,groupOffset:m,sizeBytes:b})};a!=null?a.forEach((w,x)=>{w===g.name&&(y(),s[x]=!0)}):y(),o.push(g.name),m+=b})}),!s.every(f=>f)){let f=a.filter((h,m)=>!s[m]);throw new Error(`Could not find weights in manifest with names: ${f.join(", ")}. 
Manifest JSON has weights with names: ${o.join(", ")}.`)}let l=n.reduce((f,h,m)=>(h&&f.push(m),f),[]),u=[];l.forEach(f=>{t[f].paths.forEach(h=>{let m=r+(r.endsWith("/")?"":"/")+h;u.push(m)})});let c=await e(u),d={},p=0;return l.forEach(f=>{let h=t[f].paths.length,m=0;for(let y=0;y<h;y++)m+=c[p+y].byteLength;let g=new ArrayBuffer(m),v=new Uint8Array(g),b=0;for(let y=0;y<h;y++){let w=new Uint8Array(c[p+y]);v.set(w,b),b+=w.byteLength}i[f].forEach(y=>{let w=g.slice(y.groupOffset,y.groupOffset+y.sizeBytes),x=dP(w,[y.manifestEntry]);for(let k in x)d[k]=x[k]}),p+=h}),d}}var aY="application/octet-stream",iY="application/json",hC=class{constructor(e,t){if(this.DEFAULT_METHOD="POST",t==null&&(t={}),this.weightPathPrefix=t.weightPathPrefix,this.onProgress=t.onProgress,this.weightUrlConverter=t.weightUrlConverter,t.fetchFunc!=null?(q(typeof t.fetchFunc=="function",()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=t.fetchFunc):this.fetch=ce().platform.fetch,q(e!=null&&e.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(e)&&q(e.length===2,()=>`URL paths for http must have a length of 2, (actual length is ${e.length}).`),this.path=e,t.requestInit!=null&&t.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=t.requestInit||{}}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");let t=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);t.body=new FormData;let r=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],a=pP(e,r);t.body.append("model.json",new Blob([JSON.stringify(a)],{type:iY}),"model.json"),e.weightData!=null&&t.body.append("model.weights.bin",new Blob([e.weightData],{type:aY}),"model.weights.bin");let n=await this.fetch(this.path,t);if(n.ok)return{modelArtifactsInfo:Qh(e),responses:[n]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${n.status}.`)}async load(){let e=await this.fetch(this.path,this.requestInit);if(!e.ok)throw new Error(`Request to ${this.path} failed with status code ${e.status}. Please verify this URL points to the model JSON of the model to load.`);let t;try{t=await e.json()}catch{let i=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?i+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":i+=" Please make sure the server is serving valid JSON for this request.",new Error(i)}let r=t.modelTopology,a=t.weightsManifest;if(r==null&&a==null)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return fC(t,n=>this.loadWeights(n))}async loadWeights(e){let t=Array.isArray(this.path)?this.path[1]:this.path,[r,a]=sY(t),n=this.weightPathPrefix||r,i=[];for(let u of e)i.push(...u.weights);let s=[],o=[];for(let u of e)for(let c of u.paths)this.weightUrlConverter!=null?o.push(this.weightUrlConverter(c)):s.push(n+c+a);this.weightUrlConverter&&s.push(...await Promise.all(o));let l=await xP(s,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress});return[i,pC(l)]}};hC.URL_SCHEME_REGEX=/^https?:\/\//;function sY(e){let t=e.lastIndexOf("/"),r=e.lastIndexOf("?"),a=e.substring(0,t),n=r>t?e.substring(r):"";return[a+"/",n]}function uk(e){return e.match(hC.URL_SCHEME_REGEX)!=null}var EP=(e,t)=>{if(typeof fetch=="undefined"&&(t==null||t.fetchFunc==null))return null;{let r=!0;if(Array.isArray(e)?r=e.every(a=>uk(a)):r=uk(e),r)return mC(e,t)}return null};sr.registerSaveRouter(EP);sr.registerLoadRouter(EP);function mC(e,t){return new hC(e,t)}function oY(e,t){return mC(e,t)}var Vw=class{constructor(e){this.modelArtifacts=e}load(){return this.modelArtifacts}},CP=class{constructor(e){this.saveHandler=e}save(e){return this.saveHandler(e)}},lY=class{constructor(e){e.load&&(this.load=()=>Promise.resolve(e.load())),e.save&&(this.save=t=>Promise.resolve(e.save(t)))}};function uY(e,t,r,a){let n=arguments;return new lY(SP(...n))}function SP(e,t,r,a){return arguments.length===1?e.modelTopology!=null||e.weightSpecs!=null?new Vw(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new Vw({modelTopology:e})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new Vw({modelTopology:e,weightSpecs:t,weightData:r,trainingConfig:a}))}function cY(e){return new CP(e)}function dY(e){return new CP(e)}var $P={};ut($P,{confusionMatrix:()=>MY});function pY(e,t,r=!1,a=!1){let n=W(e,"a","matMul"),i=W(t,"b","matMul");[n,i]=nr(n,i);let s={a:n,b:i},o={transposeA:r,transposeB:a};return Q.runKernel(Fl,s,o)}var ft=J({matMul_:pY});function fY(e,t,r=1,a=0){if(t<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${t}`);let n={indices:W(e,"indices","oneHot","int32")},i={depth:t,onValue:r,offValue:a};return Q.runKernel(cu,n,i)}var Pc=J({oneHot_:fY});function hY(){ce().set("PROD",!0)}function mY(){ce().set("DEBUG",!0)}function gY(){ce().set("DEPRECATION_WARNINGS_ENABLED",!1),console.warn("TensorFlow.js deprecation warnings have been disabled.")}function IP(e){ce().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function vY(){Q.disposeVariables()}function gi(){return Q}function Kv(){return Q.memory()}function bY(e){return Q.profile(e)}function te(e,t){return Q.tidy(e,t)}function lt(e){cC(e).forEach(t=>t.dispose())}function zr(e){return Q.keep(e)}function yY(e){return Q.time(e)}function wY(e){return Q.setBackend(e)}function xY(){return Q.ready()}function kY(){return Q.backendName}function EY(e){Q.removeBackend(e)}function CY(e){return Q.findBackend(e)}function SY(e){return Q.findBackendFactory(e)}function ky(e,t,r=1){return Q.registerBackend(e,t,r)}function TP(){return Q.backend}function $Y(e,t){ce().setPlatform(e,t)}function IY(e){let t={input:W(e,"input","imag")};return Q.runKernel(ay,t)}var Jh=J({imag_:IY});function TY(e){let t={x:W(e,"x","neg")};return Q.runKernel(Pd,t)}var Gt=J({neg_:TY});function NY(e){let t={input:W(e,"input","real")};return Q.runKernel(dy,t)}var Dc=J({real_:NY});function AY(e,t,r){let a=W(e,"x","transpose");if(t==null&&(t=a.shape.map((s,o)=>o).reverse()),q(a.rank===t.length,()=>`Error in transpose: rank of input ${a.rank} must match length of perm ${t}.`),t.forEach(s=>{q(s>=0&&s<a.rank,()=>`All entries in 'perm' must be between 0 and ${a.rank-1} but got ${t}`)}),a.rank<=1)return a.clone();let n={x:a},i={perm:t};return a.dtype==="complex64"?te(()=>{let s=Dc(a),o=Jh(a);return s=Q.runKernel(ts,{x:s},i),o=Q.runKernel(ts,{x:o},i),r&&(o=Gt(o)),os(s,o)}):Q.runKernel(ts,n,i)}var ct=J({transpose_:AY});function _Y(e,t,r){let a=W(e,"labels","confusionMatrix"),n=W(t,"predictions","confusionMatrix");q(r==null||r>0&&Number.isInteger(r),()=>`If provided, numClasses must be a positive integer, but got ${r}`),q(a.rank===1,()=>`Expected the rank of labels to be 1, but got ${a.rank}`),q(n.rank===1,()=>`Expected the rank of predictions to be 1, but got ${n.rank}`),q(a.shape[0]===n.shape[0],()=>`Mismatch in the number of examples: ${a.shape[0]} vs. ${n.shape[0]}. Labels and predictions should have the same number of elements.`),q(r>0&&Number.isInteger(r),()=>`numClasses is required to be a positive integer, but got ${r}`);let i=Pc(Te(a,"int32"),r),s=Pc(Te(n,"int32"),r),o=ct(i),l=ft(o,s);return Te(l,"int32")}var MY=J({confusionMatrix_:_Y}),sp={};ut(sp,{assertAndGetBroadcastShape:()=>Pt,getBroadcastDims:()=>NP,getReductionAxes:()=>Sr});function NP(e,t){let r=e.length,a=[];for(let n=0;n<r;n++){let i=r-1-n,s=e[i]||1;(t[t.length-1-n]||1)>1&&s===1&&a.unshift(i)}return a}function Sr(e,t){let r=[];for(let a=0;a<t.length;a++){let n=e[e.length-a-1],i=t.length-a-1,s=t[i];(n==null||n===1&&s>1)&&r.unshift(i)}return r}function Pt(e,t){let r=[],a=Math.max(e.length,t.length);for(let n=0;n<a;n++){let i=e[e.length-n-1];i==null&&(i=1);let s=t[t.length-n-1];if(s==null&&(s=1),i===1)r.unshift(s);else if(s===1)r.unshift(i);else if(i!==s){let o=`Operands could not be broadcast together with shapes ${e} and ${t}.`;throw Error(o)}else r.unshift(i)}return r}var em={};ut(em,{fromPixels:()=>zY,fromPixelsAsync:()=>FY,toPixels:()=>LY});function gC(e,t,r){if(Rl(e),t!=null&&t.length!==3)throw new Error("tensor3d() requires shape to have three numbers");let a=$i(e,r);if(a.length!==3&&a.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(a.length===1&&t==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return xo(e,t,a,r)}var Oo;function AP(e,t=3){if(t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(e==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let r=!1,a=!1,n=!1,i=!1,s=!1,o=!1;if(e.data instanceof Uint8Array)r=!0;else if(typeof ImageData!="undefined"&&e instanceof ImageData)a=!0;else if(typeof HTMLVideoElement!="undefined"&&e instanceof HTMLVideoElement)n=!0;else if(typeof HTMLImageElement!="undefined"&&e instanceof HTMLImageElement)i=!0;else if(e.getContext!=null)s=!0;else if(typeof ImageBitmap!="undefined"&&e instanceof ImageBitmap)o=!0;else throw new Error(`pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was ${e.constructor.name}`);if(n&&n&&e.readyState<2)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.");if(Gv(jv,Q.backendName)!=null){let p={pixels:e},f={numChannels:t};return Q.runKernel(jv,p,f)}let[l,u]=n?[e.videoWidth,e.videoHeight]:[e.width,e.height],c;if(s)c=e.getContext("2d").getImageData(0,0,l,u).data;else if(a||r)c=e.data;else if(i||n||o){if(Oo==null)if(typeof document=="undefined")if(typeof OffscreenCanvas!="undefined"&&typeof OffscreenCanvasRenderingContext2D!="undefined")Oo=new OffscreenCanvas(1,1).getContext("2d");else throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");else Oo=document.createElement("canvas").getContext("2d");Oo.canvas.width=l,Oo.canvas.height=u,Oo.drawImage(e,0,0,l,u),c=Oo.getImageData(0,0,l,u).data}let d;if(t===4)d=new Int32Array(c);else{let p=l*u;d=new Int32Array(p*t);for(let f=0;f<p;f++)for(let h=0;h<t;++h)d[f*t+h]=c[f*4+h]}return gC(d,[u,l,t],"int32")}function RY(e){return e!=null&&e.data instanceof Uint8Array}function OY(){return typeof window!="undefined"&&typeof ImageBitmap!="undefined"&&window.hasOwnProperty("createImageBitmap")}function PY(e){return e!=null&&e.width!==0&&e.height!==0}function DY(e){return OY()&&!(e instanceof ImageBitmap)&&PY(e)&&!RY(e)}async function FY(e,t=3){let r=null;if(ce().getBool("WRAP_TO_IMAGEBITMAP")&&DY(e)){let a;try{a=await createImageBitmap(e,{premultiplyAlpha:"none"})}catch{a=null}a!=null&&a.width===e.width&&a.height===e.height?r=a:r=e}else r=e;return AP(r,t)}async function LY(e,t){let r=W(e,"img","toPixels");if(!(e instanceof ht)){let u=r;r=Te(u,"int32"),u.dispose()}if(r.rank!==2&&r.rank!==3)throw new Error(`toPixels only supports rank 2 or 3 tensors, got rank ${r.rank}.`);let[a,n]=r.shape.slice(0,2),i=r.rank===2?1:r.shape[2];if(i>4||i===2)throw new Error(`toPixels only supports depth of size 1, 3 or 4 but got ${i}`);if(r.dtype!=="float32"&&r.dtype!=="int32")throw new Error(`Unsupported type for toPixels: ${r.dtype}. Please use float32 or int32 tensors.`);let s=await r.data(),o=r.dtype==="float32"?255:1,l=new Uint8ClampedArray(n*a*4);for(let u=0;u<a*n;++u){let c=[0,0,0,255];for(let p=0;p<i;p++){let f=s[u*i+p];if(r.dtype==="float32"){if(f<0||f>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${f}.`)}else if(r.dtype==="int32"&&(f<0||f>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${f}.`);i===1?(c[0]=f*o,c[1]=f*o,c[2]=f*o):c[p]=f*o}let d=u*4;l[d+0]=Math.round(c[0]),l[d+1]=Math.round(c[1]),l[d+2]=Math.round(c[2]),l[d+3]=Math.round(c[3])}if(t!=null){t.width=n,t.height=a;let u=t.getContext("2d"),c=new ImageData(l,n,a);u.putImageData(c,0,0)}return r!==e&&r.dispose(),l}var zY=J({fromPixels_:AP}),vC={};ut(vC,{prepareAndValidate:()=>_P});function _P(e,t){let r=e.shape.length,a=t.shape.length;if(r<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${r}.`);if(a<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${a}.`);if(t.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${t.dtype}.`);if(t.shape[a-1]>r)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${t.shape[a-1]} vs. ${r}`);if(Wt(e.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${e.shape}.`);let n=t.shape,i=n[n.length-1],s=1;for(let d=0;d<n.length-1;++d)s*=n[d];let o=e.shape,l=n.slice();l.pop();let u=1;for(let d=i;d<r;++d)u*=o[d],l.push(o[d]);let c=[...nd(e.shape).map(d=>d/u),1].slice(0,i);return[l,s,u,c]}var bC={};ut(bC,{calculateShapes:()=>MP,validateInput:()=>wC,validateUpdateShape:()=>yC});function yC(e,t,r){let a=t.rank>1?t.shape[t.rank-1]:1,n=t.rank>1?t.rank-1:1,i=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${r.shape}, indices.shape: ${t.shape}, shape: ${e}, sliceDim: ${a}, and batchDim: ${n}.`;if(r.rank<n)throw new Error(i+` update.rank < ${n}. `);if(e.length<a+(r.rank-n))throw new Error(i+` Output shape length < ${a+(r.rank-n)}`);if(r.rank!==n+e.length-a)throw new Error(i+` update.rank != ${n+e.length-a}`);for(let s=0;s<n;++s)if(r.shape[s]!==t.shape[s])throw new Error(i+` updates.shape[${s}] (${r.shape[s]}) != indices.shape[${s}] (${t.shape[s]}).`);for(let s=0;s<r.rank-n;++s)if(r.shape[s+n]!==e[s+a])throw new Error(i+` updates.shape[${s+n}] (${r.shape[s+n]}) != shape[${s+n}] (${e[s+n]})`)}function wC(e,t,r){if(t.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${e.rank}.`);if(t.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${t.dtype}`);if(r.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${r}`);if(r.length===0){if(t.size===0)throw new Error(`Indices specified for empty output. indices shape: ${t.shape}`);if(e.size===0)throw new Error(`Updates specified for empty output. updates shape: ${e.shape}`)}yC(r,t,e)}function MP(e,t,r){let a=t.shape.length,n=a>1?t.shape[a-1]:1,i=r.length,s=1;for(let d=n;d<i;++d)s*=r[d];let o=n<1?1:n,l=Wt(t.shape)/o,u=[...nd(r.slice(0,n)),1],c=Wt(r);return{sliceRank:n,numUpdates:l,sliceSize:s,strides:u,outputSize:c}}var Mr={};ut(Mr,{assertParamsValid:()=>VY,computeFlatOffset:()=>GY,computeOutShape:()=>HY,getNormalizedAxes:()=>UY,isSliceContinous:()=>jY,maskToAxes:()=>WY,parseSliceParams:()=>VP,sliceInfo:()=>qY,startForAxis:()=>zP,startIndicesWithElidedDims:()=>DP,stopForAxis:()=>BP,stopIndicesWithElidedDims:()=>FP,stridesForAxis:()=>LP,stridesWithElidedDims:()=>RP});var ck=-2,BY=-1;function VY(e,t,r){let a=e.shape.length;q(a===t.length,()=>`Error in slice${a}D: Length of begin ${t} must match the rank of the array (${a}).`),q(a===r.length,()=>`Error in slice${a}D: Length of size ${r} must match the rank of the array (${a}).`);for(let n=0;n<a;++n)q(t[n]+r[n]<=e.shape[n],()=>`Error in slice${a}D: begin[${n}] + size[${n}] (${t[n]+r[n]}) would overflow input.shape[${n}] (${e.shape[n]})`)}function WY(e){let t=[],r=0;for(;e>0;)e&1&&t.push(r),e/=2,r++;return t}function HY(e,t,r){let a=[];for(let n=0;n<e.length;n++)a[n]=Math.ceil((t[n]-e[n])/r[n]);return a}function RP(e,t,r,a){let n=[...e];for(let i=n.length;i<a.length;i++)n.push(1);for(let i=0;i<r;i++)i===0?n[t]=1:(n.splice(t,0,1),n.pop());return n}function OP(e,t,r){return r<=e?r:r-(t-1)}function PP(e,t){let r=[];for(let a=0;a<e;a++)r.push(t+a);return r}function UY(e,t,r,a,n,i,s,o,l){let u=e.length,c=new Array(u),d=new Array(u),p=new Array(u);if(t.length&&r>0){let f=t[0],h=r+1;c=DP(s,f,h,a,e),d=FP(o,f,h,n,e),p=RP(i,f,h,e)}else for(let f=0;f<u;f++)c[f]=zP(s,a,i,e,f,l),d[f]=BP(o,n,i,e,f,l),p[f]=LP(i,f,l);return{begin:c,end:d,strides:p}}function DP(e,t,r,a,n){let i=[...n],s=PP(r,t);for(let o=0;o<i.length;o++)if(s.indexOf(o)>-1)i[o]=0;else{let l=OP(t,r,o),u=a[l];e&1<<l&&(u=0),i[o]=u}return i}function FP(e,t,r,a,n){let i=[...n],s=PP(r,t);for(let o=0;o<i.length;o++)if(s.indexOf(o)>-1)i[o]=Number.MAX_SAFE_INTEGER;else{let l=OP(t,r,o),u=a[l];e&1<<l&&(u=Number.MAX_SAFE_INTEGER),i[o]=u}for(let o=0;o<i.length;o++){let l=n[o];i[o]<0&&(i[o]+=l),i[o]=nh(0,i[o],n[o])}return i}function LP(e,t,r){let a=e[t];return(r&1<<t||a==null)&&(a=1),a}function zP(e,t,r,a,n,i){let s=t[n],o=r[n]||1;(e&1<<n||i&1<<n||s==null)&&(o>0?s=Number.MIN_SAFE_INTEGER:s=Number.MAX_SAFE_INTEGER);let l=a[n];return s<0&&(s+=l),s=nh(0,s,l-1),s}function BP(e,t,r,a,n,i){let s=t[n],o=r[n]||1;(e&1<<n||i&1<<n||s==null)&&(o>0?s=Number.MAX_SAFE_INTEGER:s=Number.MIN_SAFE_INTEGER);let l=a[n];return s<0&&(s+=l),o>0?s=nh(0,s,l):s=nh(-1,s,l-1),s}function jY(e,t,r){let a=r.length;for(let n=0;n<r.length;n++)if(r[n]>1){a=n;break}for(let n=a+1;n<r.length;n++)if(t[n]>0||r[n]!==e[n])return!1;return!0}function GY(e,t){let r=e.length>0?e[e.length-1]:1;for(let a=0;a<e.length-1;a++)r+=e[a]*t[a];return r}function VP(e,t,r){let a,n=e.shape.length;typeof t=="number"?a=[t,...new Array(n-1).fill(0)]:t.length<n?a=t.concat(new Array(n-t.length).fill(0)):a=t.slice(),a.forEach(s=>{q(s!==-1,()=>"slice() does not support negative begin indexing.")});let i;return r==null?i=new Array(n).fill(-1):typeof r=="number"?i=[r,...new Array(n-1).fill(-1)]:r.length<n?i=r.concat(new Array(n-r.length).fill(-1)):i=r,i=i.map((s,o)=>s>=0?s:(q(s===-1,()=>`Negative size values should be exactly -1 but got ${s} for the slice() size at index ${o}.`),e.shape[o]-a[o])),[a,i]}function qY(e,t,r,a,n,i,s,o,l){let u;if(a==null?(u=new Array(t.length),u.fill(1)):u=a,s!=null&&(s&s-1)!==0)throw new Error("Multiple ellipses in slice is not allowed.");let c=!1,d={dims:u.length,numAddAxisAfterEllipsis:0,begin:t.slice(),end:r.slice(),strides:u.slice(),beginMask:n,endMask:i,ellipsisMask:s,newAxisMask:o,shrinkAxisMask:l};for(let b=0;b<d.dims;b++)c&&(1<<b&o)!==0&&d.numAddAxisAfterEllipsis++,1<<b&s&&(c=!0);c||(d.ellipsisMask|=1<<d.dims,d.dims++);let p={dims:e.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};XY(d,p);let f=!0,h=!0,m=!0,g=[],v=[];for(let b=0;b<e.length;++b){if(p.strides[b]===0)throw Error(`strides[${b}] must be non-zero`);let y=!!(p.shrinkAxisMask&1<<b),w=e[b];if(w===-1){g.push(y?1:-1);continue}let x=[p.beginMask&1<<b,p.endMask&1<<b],k=[p.strides[b]>0?0:-1,p.strides[b]>0?w:w-1];if(y&&p.strides[b]<=0)throw Error("only stride 1 allowed on non-range indexing.");m=m&&p.strides[b]===1;let C=!!(p.beginMask&1<<b&&p.endMask&1<<b);if(p.beginValid&&p.endValid){if(y){let I=p.begin[b]<0?w+p.begin[b]:p.begin[b];if(p.begin[b]=I,p.end[b]=p.begin[b]+1,I<0||I>=w)throw Error(`slice index ${p.begin[b]} of dimension ${b} out of bounds.`)}else p.begin[b]=UN(p.begin[b],0,p.strides[b],w,x,k),p.end[b]=UN(p.end[b],1,p.strides[b],w,x,k);let N=p.strides[b]===1&&p.begin[b]===0&&p.end[b]===w;f=f&&N,h=h&&(b===0&&p.strides[b]===1||N)}else f=f&&p.strides[b]===1&&C,h=h&&(b===0&&p.strides[b]===1||C);let E,$=!1;if(p.beginValid&&p.endValid?(E=p.end[b]-p.begin[b],$=!0):y?(E=1,$=!0):C&&w>=0&&(p.strides[b]<0?E=-w:E=w,$=!0),$){let N;E===0||E<0!=p.strides[b]<0?N=0:N=Math.trunc(E/p.strides[b])+(E%p.strides[b]!==0?1:0),g.push(N)}else g.push(-1)}for(let b=0;b<p.finalShapeGatherIndices.length;++b){let y=p.finalShapeGatherIndices[b];y>=0?v.push(g[y]):y===ck&&v.push(1)}return{finalShapeSparse:v.filter((b,y)=>p.finalShapeGatherIndices[y]!==ck),finalShape:v,isIdentity:f,sliceDim0:h,isSimpleSlice:m,begin:p.begin,end:p.end,strides:p.strides}}function XY(e,t){t.beginMask=0,t.endMask=0,t.shrinkAxisMask=0;let r=0;t.beginValid=e.begin!=null,t.endValid=e.end!=null,t.begin=new Array(t.dims),t.end=new Array(t.dims),t.strides=new Array(t.dims),t.finalShapeGatherIndices=[],t.finalShapeGatherIndicesSparse=[],t.inputShapeGatherIndicesSparse=new Array(t.dims);for(let a=0;a<e.dims;a++)if(1<<a&e.ellipsisMask){let n=Math.min(t.dims-(e.dims-a)+1+e.numAddAxisAfterEllipsis,t.dims);for(;r<n;r++)t.begin[r]=0,t.end[r]=0,t.strides[r]=1,t.beginMask|=1<<r,t.endMask|=1<<r,t.finalShapeGatherIndices.push(r),t.finalShapeGatherIndicesSparse.push(-1),t.inputShapeGatherIndicesSparse[r]=a}else if(1<<a&e.newAxisMask)t.finalShapeGatherIndices.push(ck),t.finalShapeGatherIndicesSparse.push(-1);else{if(r===t.begin.length)throw Error(`Index out of range using input dim ${r}; input has only ${t.dims} dims, ${t.begin.length}.`);e.begin!=null&&(t.begin[r]=e.begin[a]),e.end!=null&&(t.end[r]=e.end[a]),t.strides[r]=e.strides[a],e.beginMask&1<<a&&(t.beginMask|=1<<r),e.endMask&1<<a&&(t.endMask|=1<<r),e.shrinkAxisMask&1<<a?(t.finalShapeGatherIndices.push(BY),t.finalShapeGatherIndicesSparse.push(-1),t.shrinkAxisMask|=1<<r):(t.finalShapeGatherIndices.push(r),t.finalShapeGatherIndicesSparse.push(a)),t.inputShapeGatherIndicesSparse[r]=a,r++}}function UN(e,t,r,a,n,i){if(n[t])return r>0?i[t]:i[t+1&1];{let s=e<0?a+e:e;return s<i[0]?i[0]:s>i[1]?i[1]:s}}var Ie={};ut(Ie,{Serializable:()=>WP,SerializationMap:()=>Bo,registerClass:()=>ko});var WP=class{getClassName(){return this.constructor.className}static fromConfig(e,t){return new e(t)}},Bo=class{constructor(){this.classNameMap={}}static getMap(){return Bo.instance==null&&(Bo.instance=new Bo),Bo.instance}static register(e){Bo.getMap().classNameMap[e.className]=[e,e.fromConfig]}};function ko(e){q(e.className!=null,()=>"Class being registered does not have the static className property defined."),q(typeof e.className=="string",()=>"className is required to be a string, but got type "+typeof e.className),q(e.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),Bo.register(e)}var HP={};ut(HP,{TEST_EPSILON_FLOAT16:()=>UP,encodeStrings:()=>jP,expectArrayBuffersEqual:()=>tK,expectArraysClose:()=>KY,expectArraysEqual:()=>QY,expectNumbersClose:()=>JY,expectPromiseToFail:()=>ZY,expectValuesInRange:()=>eK,testEpsilon:()=>xC});var YY=.001,UP=.1;function KY(e,t,r){return r==null&&(r=xC()),dk(e,t,(a,n)=>kC(a,n,r))}function xC(){return Q.backend.floatPrecision()===32?YY:UP}function dk(e,t,r){let a=!0;if((tn(e)||tn(t))&&(a=!1),tn(e)&&tn(t)&&(a=!0),a){let s=e.constructor.name,o=t.constructor.name;if(s!==o)throw new Error(`Arrays are of different type. Actual: ${s}. Expected: ${o}`)}if(Array.isArray(e)&&Array.isArray(t)){let s=$i(e),o=$i(t);if(!go(s,o))throw new Error(`Arrays have different shapes. Actual: [${s}]. Expected: [${o}]`)}let n=tn(e)?e:ul(e),i=tn(t)?t:ul(t);if(n.length!==i.length)throw new Error(`Arrays have different lengths actual: ${n.length} vs expected: ${i.length}.
Actual:   ${n}.
Expected: ${i}.`);for(let s=0;s<i.length;++s){let o=n[s],l=i[s];if(!r(o,l))throw new Error(`Arrays differ: actual[${s}] = ${o}, expected[${s}] = ${l}.
Actual:   ${n}.
Expected: ${i}.`)}}function ZY(e,t){e().then(()=>t.fail(),()=>t())}function QY(e,t){let r=typeof t=="string"||typeof t=="number"||typeof t=="boolean"?[t]:t;return Ps(e)||Ps(e[0])||Ps(t)||Ps(t[0])?dk(e,r,(a,n)=>a==n):dk(e,t,(a,n)=>kC(a,n,0))}function JY(e,t,r){if(r==null&&(r=xC()),!kC(e,t,r))throw new Error(`Numbers differ: actual === ${e}, expected === ${t}`)}function kC(e,t,r){return!isFinite(e)&&!isFinite(t)?!0:!(isNaN(e)||isNaN(t)||Math.abs(e-t)>r)}function eK(e,t,r){for(let a=0;a<e.length;a++)if(e[a]<t||e[a]>r)throw new Error(`Value out of range:${e[a]} low: ${t}, high: ${r}`)}function tK(e,t){let r=new Float32Array(e),a=new Float32Array(t);if(r.length!==a.length)throw new Error(`Expected ArrayBuffer to be of length ${a.length}, but it was ${r.length}`);for(let n=0;n<a.length;n++)if(r[n]!==a[n])throw new Error(`Expected ArrayBuffer value at ${n} to be ${a[n]} but got ${r[n]} instead`)}function jP(e){for(let t=0;t<e.length;t++){let r=e[t];Array.isArray(r)?jP(r):e[t]=Kh(r)}return e}var rK="3.18.0";function nK(e,t){let r=W(e,"a","add"),a=W(t,"b","add");[r,a]=nr(r,a);let n={a:r,b:a};return Q.runKernel(vo,n)}var xe=J({add_:nK});function aK(e,t){let r=W(e,"a","floorDiv"),a=W(t,"b","floorDiv");[r,a]=nr(r,a);let n={a:r,b:a};return Q.runKernel(Kl,n)}var Ey=J({floorDiv_:aK});function iK(e,t){let r=W(e,"a","div"),a=W(t,"b","div");if([r,a]=nr(r,a),r.dtype==="int32"&&a.dtype==="int32")return Ey(r,a);let n={a:r,b:a},i={};return Q.runKernel(Gl,n,i)}var Ve=J({div_:iK});function sK(e,t){let r=W(e,"a","mul"),a=W(t,"b","mul");[r,a]=nr(r,a);let n={a:r,b:a};return Q.runKernel(uu,n)}var ee=J({mul_:sK});function oK(e){let t=W(e,"x","abs");if(t.dtype==="complex64"){let r={x:t};return Q.runKernel(Rh,r)}else{let r={x:t};return Q.runKernel(ad,r)}}var xr=J({abs_:oK});function lK(e){let t={x:W(e,"x","acos")};return Q.runKernel(id,t)}var EC=J({acos_:lK});function uK(e){let t={x:W(e,"x","acosh")};return Q.runKernel(sd,t)}var CC=J({acosh_:uK});function cK(e){q(Array.isArray(e),()=>"The argument passed to tf.addN() must be a list of tensors"),q(e.length>=1,()=>`Must pass at least one tensor to tf.addN(), but got ${e.length}`);let t=e.map((n,i)=>W(n,`tensors${i}`,"addN")),r=t[0];t.forEach(n=>{if(n.dtype!==r.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),t.forEach(n=>{if(!go(n.shape,r.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});let a=t;return Q.runKernel(Ol,a)}var GP=J({addN_:cK});function dK(e,t=null,r=!1){let a={x:W(e,"x","all","bool")},n={axis:t,keepDims:r};return Q.runKernel(od,a,n)}var Cy=J({all_:dK});function pK(e,t=null,r=!1){let a={x:W(e,"x","any","bool")},n={axis:t,keepDims:r};return Q.runKernel(ld,a,n)}var lh=J({any_:pK});function fK(e,t=0){let r={x:W(e,"x","argMax")},a={axis:t};return Q.runKernel(Pl,r,a)}var gl=J({argMax_:fK});function hK(e,t=0){let r={x:W(e,"x","argMin")},a={axis:t};return Q.runKernel(_h,r,a)}var SC=J({argMin_:hK});function mK(e){let t={x:W(e,"x","asin")};return Q.runKernel(ud,t)}var $C=J({asin_:mK});function gK(e){let t={x:W(e,"x","asinh")};return Q.runKernel(cd,t)}var IC=J({asinh_:gK});function vK(e){let t={x:W(e,"x","atan")};return Q.runKernel(dd,t)}var TC=J({atan_:vK});function bK(e,t){let r=W(e,"a","atan2"),a=W(t,"b","atan2");[r,a]=nr(r,a);let n={a:r,b:a};return Q.runKernel(fd,n)}var NC=J({atan2_:bK});function yK(e){let t={x:W(e,"x","atanh")};return Q.runKernel(pd,t)}var AC=J({atanh_:yK});function wK(e,t,r,a,n="NHWC",i){let s=e[3],o=[...t,s],l=YP(n);return tm(e,o,r,i,a,null,null,l)}function qP(e,t,r,a,n,i,s="channelsLast"){let[o,l]=Zv(t),u;if(s==="channelsLast")u=[o,l,e[3],e[3]];else if(s==="channelsFirst")u=[o,l,e[1],e[1]];else throw new Error(`Unknown dataFormat ${s}`);return tm(e,u,r,a,n,i,!1,s)}function xK(e,t,r,a,n,i,s="NDHWC"){let[o,l,u]=pk(t),c,d;if(s==="NDHWC")d="channelsLast",c=[o,l,u,e[4],e[4]];else if(s==="NCDHW")d="channelsFirst",c=[o,l,u,e[1],e[1]];else throw new Error(`Unknown dataFormat ${s}`);return XP(e,c,r,a,n,!1,d,i)}function tm(e,t,r,a,n,i,s=!1,o="channelsLast"){let[l,u,c,d]=[-1,-1,-1,-1];if(o==="channelsLast")[l,u,c,d]=e;else if(o==="channelsFirst")[l,d,u,c]=e;else throw new Error(`Unknown dataFormat ${o}`);let[p,f,,h]=t,[m,g]=Zv(r),[v,b]=Zv(a),y=Cc(p,v),w=Cc(f,b),{padInfo:x,outHeight:k,outWidth:C}=CK(n,u,c,m,g,y,w,i,o),E=s?h*d:h,$;return o==="channelsFirst"?$=[l,E,k,C]:o==="channelsLast"&&($=[l,k,C,E]),{batchSize:l,dataFormat:o,inHeight:u,inWidth:c,inChannels:d,outHeight:k,outWidth:C,outChannels:E,padInfo:x,strideHeight:m,strideWidth:g,filterHeight:p,filterWidth:f,effectiveFilterHeight:y,effectiveFilterWidth:w,dilationHeight:v,dilationWidth:b,inShape:e,outShape:$,filterShape:t}}function XP(e,t,r,a,n,i=!1,s="channelsLast",o){let[l,u,c,d,p]=[-1,-1,-1,-1,-1];if(s==="channelsLast")[l,u,c,d,p]=e;else if(s==="channelsFirst")[l,p,u,c,d]=e;else throw new Error(`Unknown dataFormat ${s}`);let[f,h,m,,g]=t,[v,b,y]=pk(r),[w,x,k]=pk(a),C=Cc(f,w),E=Cc(h,x),$=Cc(m,k),{padInfo:N,outDepth:I,outHeight:S,outWidth:A}=SK(n,u,c,d,v,b,y,C,E,$,o),R=i?g*p:g,O;return s==="channelsFirst"?O=[l,R,I,S,A]:s==="channelsLast"&&(O=[l,I,S,A,R]),{batchSize:l,dataFormat:s,inDepth:u,inHeight:c,inWidth:d,inChannels:p,outDepth:I,outHeight:S,outWidth:A,outChannels:R,padInfo:N,strideDepth:v,strideHeight:b,strideWidth:y,filterDepth:f,filterHeight:h,filterWidth:m,effectiveFilterDepth:C,effectiveFilterHeight:E,effectiveFilterWidth:$,dilationDepth:w,dilationHeight:x,dilationWidth:k,inShape:e,outShape:O,filterShape:t}}function kK(e,t,r,a,n){a==null&&(a=_C(e,t,r));let i=e[0],s=e[1],o=tl((i-t+2*a)/r+1,n),l=tl((s-t+2*a)/r+1,n);return[o,l]}function EK(e,t,r,a,n,i){n==null&&(n=_C(e,t,a));let s=e[0],o=e[1],l=e[2],u=tl((s-t+2*n)/a+1,i),c=tl((o-t+2*n)/a+1,i),d=tl((l-t+2*n)/a+1,i);return[u,c,d,r]}function _C(e,t,r,a=1){let n=Cc(t,a);return Math.floor((e[0]*(r-1)-r+n)/2)}function Zv(e){return typeof e=="number"?[e,e,e]:e.length===2?[e[0],e[1],1]:e}function pk(e){return typeof e=="number"?[e,e,e]:e}function Cc(e,t){return t<=1?e:e+(e-1)*(t-1)}function CK(e,t,r,a,n,i,s,o,l){let u,c,d;if(typeof e=="number"){u={top:e,bottom:e,left:e,right:e,type:e===0?"VALID":"NUMBER"};let p=kK([t,r],i,a,e,o);c=p[0],d=p[1]}else if(e==="same"){c=Math.ceil(t/a),d=Math.ceil(r/n);let p=Math.max(0,(c-1)*a+i-t),f=Math.max(0,(d-1)*n+s-r),h=Math.floor(p/2),m=p-h,g=Math.floor(f/2),v=f-g;u={top:h,bottom:m,left:g,right:v,type:"SAME"}}else if(e==="valid")u={top:0,bottom:0,left:0,right:0,type:"VALID"},c=Math.ceil((t-i+1)/a),d=Math.ceil((r-s+1)/n);else if(typeof e=="object"){let p=l==="channelsLast"?e[1][0]:e[2][0],f=l==="channelsLast"?e[1][1]:e[2][1],h=l==="channelsLast"?e[2][0]:e[3][0],m=l==="channelsLast"?e[2][1]:e[3][1];u={top:p,bottom:f,left:h,right:m,type:p===0&&f===0&&h===0&&m===0?"VALID":"EXPLICIT"},c=tl((t-i+p+f)/a+1,o),d=tl((r-s+h+m)/n+1,o)}else throw Error(`Unknown padding parameter: ${e}`);return{padInfo:u,outHeight:c,outWidth:d}}function SK(e,t,r,a,n,i,s,o,l,u,c){let d,p,f,h;if(typeof e=="number"){d={top:e,bottom:e,left:e,right:e,front:e,back:e,type:e===0?"VALID":"NUMBER"};let m=EK([t,r,a,1],o,1,n,e,c);p=m[0],f=m[1],h=m[2]}else if(e==="same"){p=Math.ceil(t/n),f=Math.ceil(r/i),h=Math.ceil(a/s);let m=(p-1)*n+o-t,g=(f-1)*i+l-r,v=(h-1)*s+u-a,b=Math.floor(m/2),y=m-b,w=Math.floor(g/2),x=g-w,k=Math.floor(v/2),C=v-k;d={top:w,bottom:x,left:k,right:C,front:b,back:y,type:"SAME"}}else if(e==="valid")d={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},p=Math.ceil((t-o+1)/n),f=Math.ceil((r-l+1)/i),h=Math.ceil((a-u+1)/s);else throw Error(`Unknown padding parameter: ${e}`);return{padInfo:d,outDepth:p,outHeight:f,outWidth:h}}function tl(e,t){if(!t)return Math.trunc(e);switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error(`Unknown roundingMode ${t}`)}}function no(e){let[t,r,a]=Zv(e);return t===1&&r===1&&a===1}function Mi(e,t){return no(e)||no(t)}function YP(e){if(e==="NHWC")return"channelsLast";if(e==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${e}`)}function $n(e,t,r){if(r!=null){if(typeof t=="string")throw Error(`Error in ${e}: pad must be an integer when using dimRoundingMode ${r} but got pad ${t}.`);if(typeof t=="number")q(Mc(t),()=>`Error in ${e}: pad must be an integer when using dimRoundingMode ${r} but got pad ${t}.`);else if(typeof t=="object")t.forEach(a=>{a.forEach(n=>{q(Mc(n),()=>`Error in ${e}: pad must be an integer when using dimRoundingMode ${r} but got pad ${n}.`)})});else throw Error(`Error in ${e}: Unknown padding parameter: ${t}`)}}function $K(e,t){let r={x:W(e,"x","reshape","string_or_numeric")},a={shape:t};return Q.runKernel(Hd,r,a)}var re=J({reshape_:$K});function IK(e,t,r,a,n){let i=W(e,"x","avgPool","float32"),s=1;q(Mi(r,s),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${r} and dilations '${s}'`);let o=i,l=!1;i.rank===3&&(l=!0,o=re(i,[1,i.shape[0],i.shape[1],i.shape[2]])),q(o.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${o.rank}.`),$n("avgPool",a,n);let u={x:o},c={filterSize:t,strides:r,pad:a,dimRoundingMode:n},d=Q.runKernel(Dl,u,c);return d=Te(d,i.dtype),l?re(d,[d.shape[1],d.shape[2],d.shape[3]]):d}var ps=J({avgPool_:IK});function TK(e,t,r,a,n,i="NDHWC"){let s=W(e,"x","avgPool3d","float32"),o=s,l=!1;s.rank===4&&(l=!0,o=re(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),q(o.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${o.rank}.`),q(i==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${i}`),$n("avgPool3d",a,n);let u={x:o},c={filterSize:t,strides:r,pad:a,dimRoundingMode:n,dataFormat:i},d=Q.runKernel(Mh,u,c);return d=Te(d,o.dtype),l?re(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}var MC=J({avgPool3d_:TK});function NK(e,t=0){q(e.length>=1,()=>"Pass at least one tensor to concat");let r=oh(e,"tensors","concat","string_or_numeric");if(r[0].dtype==="complex64"&&r.forEach(i=>{if(i.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${i.dtype}. `)}),r.length===1)return rs(r[0]);let a=r,n={axis:t};return Q.runKernel(md,a,n)}var Ot=J({concat_:NK});function AK(e){let t={x:W(e,"x","sigmoid","float32")};return Q.runKernel(ku,t)}var Da=J({sigmoid_:AK});function _K(e,t,r){let a=W(e,"x","slice","string_or_numeric");if(a.rank===0)throw new Error("Slicing scalar is not possible");let n={x:a},i={begin:t,size:r};return Q.runKernel(qd,n,i)}var bt=J({slice_:_K});function MK(e){let t={x:W(e,"x","tanh","float32")};return Q.runKernel(Nu,t)}var vl=J({tanh_:MK});function RK(e,t,r,a,n,i){let s=W(e,"forgetBias","basicLSTMCell"),o=W(t,"lstmKernel","basicLSTMCell"),l=W(r,"lstmBias","basicLSTMCell"),u=W(a,"data","basicLSTMCell"),c=W(n,"c","basicLSTMCell"),d=W(i,"h","basicLSTMCell"),p=Ot([u,d],1),f=ft(p,o),h=xe(f,l),m=h.shape[0],g=h.shape[1]/4,v=[m,g],b=bt(h,[0,0],v),y=bt(h,[0,g],v),w=bt(h,[0,g*2],v),x=bt(h,[0,g*3],v),k=xe(ee(Da(b),vl(y)),ee(c,Da(xe(s,w)))),C=ee(vl(k),Da(x));return[k,C]}var OK=J({basicLSTMCell_:RK});function PK(e,t,r){let a=W(e,"x","batchToSpaceND"),n=t.reduce((o,l)=>o*l);q(a.rank>=1+t.length,()=>`input rank is ${a.rank} but should be > than blockShape.length ${t.length}`),q(r.length===t.length,()=>`crops.length is ${r.length} but should be equal to blockShape.length  ${t.length}`),q(a.shape[0]%n===0,()=>`input tensor batch is ${a.shape[0]} but is not divisible by the product of the elements of blockShape ${t.join(" * ")} === ${n}`);let i={x:a},s={blockShape:t,crops:r};return Q.runKernel(hd,i,s)}var rm=J({batchToSpaceND_:PK});function DK(e){let t;return e.rank===0||e.rank===1?t=re(e,[1,1,1,e.size]):e.rank===2?t=re(e,[1,1,e.shape[0],e.shape[1]]):e.rank===3?t=re(e,[1,e.shape[0],e.shape[1],e.shape[2]]):t=e,t}function FK(e,t,r,a,n,i){i==null&&(i=.001);let s=W(e,"x","batchNorm"),o=W(t,"mean","batchNorm"),l=W(r,"variance","batchNorm"),u;n!=null&&(u=W(n,"scale","batchNorm"));let c;a!=null&&(c=W(a,"offset","batchNorm")),q(o.rank===l.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),q(c==null||o.rank===c.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),q(u==null||o.rank===u.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let d={x:DK(s),scale:u,offset:c,mean:o,variance:l},p={varianceEpsilon:i},f=Q.runKernel(Zl,d,p);return re(f,s.shape)}var ao=J({batchNorm_:FK});function LK(e,t,r,a,n,i){let s=W(e,"x","batchNorm"),o=W(t,"mean","batchNorm"),l=W(r,"variance","batchNorm"),u;n!=null&&(u=W(n,"scale","batchNorm"));let c;return a!=null&&(c=W(a,"offset","batchNorm")),q(s.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${s.rank}.`),q(o.rank===2||o.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${o.rank}.`),q(l.rank===2||l.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${l.rank}.`),u!=null&&q(u.rank===2||u.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${u.rank}.`),c!=null&&q(c.rank===2||c.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${c.rank}.`),ao(s,o,l,c,u,i)}var KP=J({batchNorm2d_:LK});function zK(e,t,r,a,n,i){let s=W(e,"x","batchNorm"),o=W(t,"mean","batchNorm"),l=W(r,"variance","batchNorm"),u;n!=null&&(u=W(n,"scale","batchNorm"));let c;return a!=null&&(c=W(a,"offset","batchNorm")),q(s.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${s.rank}.`),q(o.rank===3||o.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${o.rank}.`),q(l.rank===3||l.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${l.rank}.`),u!=null&&q(u.rank===3||u.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${u.rank}.`),c!=null&&q(c.rank===3||c.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${c.rank}.`),ao(s,o,l,c,u,i)}var ZP=J({batchNorm3d_:zK});function BK(e,t,r,a,n,i){let s=W(e,"x","batchNorm"),o=W(t,"mean","batchNorm"),l=W(r,"variance","batchNorm"),u;n!=null&&(u=W(n,"scale","batchNorm"));let c;return a!=null&&(c=W(a,"offset","batchNorm")),q(s.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${s.rank}.`),q(o.rank===4||o.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${o.rank}.`),q(l.rank===4||l.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${l.rank}.`),u!=null&&q(u.rank===4||u.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${u.rank}.`),c!=null&&q(c.rank===4||c.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${c.rank}.`),ao(s,o,l,c,u,i)}var QP=J({batchNorm4d_:BK});function VK(e,t,r){let a=W(e,"x","bincount"),n=W(t,"weights","bincount");q(a.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${a.dtype}`),q(r>=0,()=>`size must be non-negative, but got ${r}.`),q(n.size===a.size||n.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${a.shape}, weights shape: ${n.shape}.`);let i={x:a,weights:n},s={size:r};return Q.runKernel(Ub,i,s)}var RC=J({bincount_:VK});function WK(e,t){let r=W(e,"s0","broadcastArgs","int32"),a=W(t,"s1","broadcastArgs","int32");if(r.rank!==1)throw new Error(`broadcastArgs(): first input must be a vector (rank=1). Has rank ${r.rank}`);if(a.rank!==1)throw new Error(`broadcastArgs(): second input must be a vector (rank=1). Has rank ${a.rank}`);let n={s0:r,s1:a};return Q.runKernel(jb,n)}var JP=J({broadcastArgs_:WK});function HK(e,t){let r=W(e,"broadcastTo","x"),a=r.shape;if(t.some(l=>!(l>0)||l%1!==0))throw new Error(`broadcastTo(): Invalid broadcast shape [${t}].`);if(t.length<r.rank)throw new Error(`broadcastTo(): shape.length=${t.length} < input.rank=${r.rank}.`);if(t.length>r.rank){let l=r.shape.slice();for(;l.length<t.length;)l.unshift(1);r=re(r,l)}let n=r.shape,i=Array.from(t);for(let l=t.length-1;l>=0;l--)if(n[l]===t[l])i[l]=1;else if(r.shape[l]!==1)throw new Error(`broadcastTo(): [${a}] cannot be broadcast to [${t}].`);if(i.map((l,u)=>l>1?u:-1).filter(l=>l>=0).length===0)return rs(r);let s={x:r},o={reps:i};return Q.runKernel(yo,s,o)}var Sc=J({broadcastTo_:HK});function UK(e){let t={x:W(e,"x","ceil","float32")};return Q.runKernel(zl,t)}var OC=J({ceil_:UK});function jK(e,t,r){let a=W(e,"x","clipByValue");q(t<=r,()=>`Error in clip: min (${t}) must be less than or equal to max (${r}).`);let n={x:a},i={clipValueMin:t,clipValueMax:r};return Q.runKernel(bo,n,i)}var sn=J({clipByValue_:jK});function GK(e){return Ot(e,0)}var eD=J({concat1d_:GK});function qK(e,t){return Ot(e,t)}var tD=J({concat2d_:qK});function XK(e,t){return Ot(e,t)}var rD=J({concat3d_:XK});function YK(e,t){return Ot(e,t)}var nD=J({concat4d_:YK});function KK(e,t,r,a,n="NHWC",i=[1,1],s){let o=W(e,"x","conv2d","float32"),l=W(t,"filter","conv2d","float32"),u=o,c=!1;o.rank===3&&(c=!0,u=re(o,[1,o.shape[0],o.shape[1],o.shape[2]])),q(u.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${u.rank}.`),q(l.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${l.rank}.`),$n("conv2d",a,s);let d=n==="NHWC"?u.shape[3]:u.shape[1];q(d===l.shape[2],()=>`Error in conv2d: depth of input (${d}) must match input depth for filter ${l.shape[2]}.`),q(Mi(r,i),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${r} and dilations '${i}'`);let p={x:u,filter:l},f={strides:r,pad:a,dataFormat:n,dilations:i,dimRoundingMode:s},h=Q.runKernel(Bl,p,f);return c?re(h,[h.shape[1],h.shape[2],h.shape[3]]):h}var wn=J({conv2d_:KK});function ZK(e,t,r,a,n="NWC",i=1,s){let o=W(e,"x","conv1d"),l=W(t,"filter","conv1d"),u=o,c=!1;o.rank===2&&(c=!0,u=re(o,[1,o.shape[0],o.shape[1]])),q(u.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${u.rank}.`),q(l.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${l.rank}.`),$n("conv1d",a,s),q(u.shape[2]===l.shape[1],()=>`Error in conv1d: depth of input (${u.shape[2]}) must match input depth for filter ${l.shape[1]}.`),q(Mi(r,i),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${r} and dilation '${i}'`),q(n==="NWC",()=>`Error in conv1d: got dataFormat of ${n} but only NWC is currently supported.`);let d=re(l,[1,l.shape[0],l.shape[1],l.shape[2]]),p=re(u,[u.shape[0],1,u.shape[1],u.shape[2]]),f=wn(p,d,[1,r],a,"NHWC",[1,i],s);return c?re(f,[f.shape[2],f.shape[3]]):re(f,[f.shape[0],f.shape[2],f.shape[3]])}var Sy=J({conv1d_:ZK});function QK(e,t,r,a,n,i="NHWC",s){q(e.length===t.rank,()=>`Length of inShape (${e.length}) and rank of dy (${t.rank}) must match`);let o=e,l=t,u=!1;t.rank===3&&(u=!0,l=re(t,[1,t.shape[0],t.shape[1],t.shape[2]]),o=[1,e[0],e[1],e[2]]),q(o.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${o.length}.`),q(l.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${l.rank}`),q(r.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${r.rank}`);let c=i==="NHWC"?o[3]:o[1],d=i==="NHWC"?l.shape[3]:l.shape[1];q(c===r.shape[2],()=>`Error in conv2dDerInput: depth of input (${c}) must match input depth for filter ${r.shape[2]}.`),q(d===r.shape[3],()=>`Error in conv2dDerInput: depth of output (${d}) must match output depth for filter ${r.shape[3]}.`),$n("conv2dDerInput",n,s);let p={dy:l,filter:r},f={strides:a,pad:n,dataFormat:i,dimRoundingMode:s,inputShape:o},h=Q.runKernel(Vl,p,f);return u?re(h,[h.shape[1],h.shape[2],h.shape[3]]):h}var PC=J({conv2DBackpropInput_:QK});function JK(e,t,r,a,n,i){let s=W(e,"x","conv2dTranspose"),o=W(t,"filter","conv2dTranspose");return PC(r,s,o,a,n,"NHWC",i)}var $y=J({conv2dTranspose_:JK});function e9(e,t,r,a,n="NDHWC",i=[1,1,1]){let s=W(e,"x","conv3d"),o=W(t,"filter","conv3d"),l=s,u=!1;s.rank===4&&(u=!0,l=re(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),q(l.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${l.rank}.`),q(o.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${o.rank}.`),q(l.shape[4]===o.shape[3],()=>`Error in conv3d: depth of input (${l.shape[4]}) must match input depth for filter ${o.shape[3]}.`),q(Mi(r,i),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${r} and dilations '${i}'`),q(n==="NDHWC",()=>`Error in conv3d: got dataFormat of ${n} but only NDHWC is currently supported.`);let c={x:l,filter:o},d={strides:r,pad:a,dataFormat:n,dilations:i},p=Q.runKernel(Oh,c,d);return u?re(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}var DC=J({conv3d_:e9});function t9(e,t,r,a,n){q(e.length===t.rank,()=>`Length of inShape (${e.length}) and rank of dy (${t.rank}) must match`);let i=e,s=t,o=!1;t.rank===4&&(o=!0,s=re(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]),i=[1,e[0],e[1],e[2],e[3]]);let l=i[4],u=s.shape[4];q(i.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${i.length}.`),q(s.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${s.rank}`),q(r.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${r.rank}`),q(l===r.shape[3],()=>`Error in conv3dDerInput: depth of input (${l}) must match input depth for filter ${r.shape[3]}.`),q(u===r.shape[4],()=>`Error in conv3dDerInput: depth of output (${u}) must match output depth for filter ${r.shape[4]}.`);let c={dy:s,filter:r},d={pad:n,strides:a,inputShape:i},p=Q.runKernel(Yb,c,d);return o?re(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}var aD=J({conv3DBackpropInput_:t9});function r9(e,t,r,a,n){let i=W(e,"x","conv3dTranspose"),s=W(t,"filter","conv3dTranspose");return aD(r,i,s,a,n)}var iD=J({conv3dTranspose_:r9});function n9(e){let t={x:W(e,"x","cos","float32")};return Q.runKernel(Wl,t)}var nm=J({cos_:n9});function a9(e){let t={x:W(e,"x","cosh","float32")};return Q.runKernel(Hl,t)}var Iy=J({cosh_:a9});function i9(e,t=0,r=!1,a=!1){let n={x:W(e,"x","cumprod")},i={axis:t,exclusive:r,reverse:a};return Q.runKernel(gd,n,i)}var uh=J({cumprod_:i9});function s9(e,t=0,r=!1,a=!1){let n={x:W(e,"x","cumsum")},i={axis:t,exclusive:r,reverse:a};return Q.runKernel(Ul,n,i)}var Ty=J({cumsum_:s9});function o9(e,t,r,a=!1){let n=W(e,"x","denseBincount"),i=W(t,"weights","denseBincount");q(n.dtype==="int32",()=>`Error in denseBincount: input dtype must be int32, but got ${n.dtype}`),q(n.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${n.rank}.`),q(r>=0,()=>`size must be non-negative, but got ${r}.`),q(i.size===n.size||i.size===0,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${n.shape}, weights shape: ${i.shape}.`);let s={x:n,weights:i},o={size:r,binaryOutput:a};return Q.runKernel(Kb,s,o)}var sD=J({denseBincount_:o9});function l9(e,t,r="NHWC"){let a=W(e,"x","depthToSpace","float32"),n=r==="NHWC"?a.shape[1]:a.shape[2],i=r==="NHWC"?a.shape[2]:a.shape[3],s=r==="NHWC"?a.shape[3]:a.shape[1];q(t>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${t}`),q(n*t>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${n} and ${t}  for depthToSpace with input shape
    ${a.shape}`),q(i*t>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${i} and ${t} for depthToSpace with input shape
        ${a.shape}`),q(s%(t*t)===0,()=>`Dimension size must be evenly divisible by ${t*t} but is ${s} for depthToSpace with input shape ${a.shape}`);let o={x:a},l={blockSize:t,dataFormat:r};return Q.runKernel(bd,o,l)}var FC=J({depthToSpace_:l9});function u9(e,t,r,a,n="NHWC",i=[1,1],s){let o=W(e,"x","depthwiseConv2d","float32"),l=W(t,"filter","depthwiseConv2d","float32"),u=o,c=!1;o.rank===3&&(c=!0,u=re(o,[1,o.shape[0],o.shape[1],o.shape[2]])),q(u.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${u.rank}.`),q(l.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${l.rank}.`),q(u.shape[3]===l.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${u.shape[3]}) must match the inChannels dimension in filter ${l.shape[2]}.`),$n("depthwiseConv2d",a,s);let d={x:u,filter:l},p={strides:r,pad:a,dataFormat:n,dilations:i,dimRoundingMode:s},f=Q.runKernel(jl,d,p);return c?re(f,[f.shape[1],f.shape[2],f.shape[3]]):f}var Au=J({depthwiseConv2d_:u9});function c9(e){let t={x:W(e,"x","diag")};return Q.runKernel(Jb,t)}var d9=J({diag_:c9});function p9(e,t,r,a,n=[1,1],i="NHWC"){let s=W(e,"x","dilation2d"),o=W(t,"filter","dilation2d");q(s.rank===3||s.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${s.rank}.`),q(o.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${o.rank}.`),q(i==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${i}`);let l=s,u=!1;s.rank===3&&(l=re(s,[1,s.shape[0],s.shape[1],s.shape[2]]),u=!0);let c={x:l,filter:o},d={strides:r,pad:a,dilations:n},p=Q.runKernel(Ph,c,d);return u?re(p,[p.shape[1],p.shape[2],p.shape[3]]):p}var LC=J({dilation2d_:p9});function f9(e,t){let r=W(e,"a","equal","string_or_numeric"),a=W(t,"b","equal","string_or_numeric");[r,a]=nr(r,a),Pt(r.shape,a.shape);let n={a:r,b:a};return Q.runKernel(wd,n)}var oa=J({equal_:f9});function h9(e,t,r){let a=W(t,"a","where"),n=W(r,"b","where"),i=W(e,"condition","where","bool"),s=Pt(Pt(i.shape,a.shape),n.shape),o=Sc(i,s),l=Sc(a,s),u=Sc(n,s),c={condition:o,t:l,e:u};return Q.runKernel(jd,c)}var on=J({where_:h9});function m9(e){let t={x:W(e,"x","zerosLike")};return Q.runKernel(ap,t)}var xt=J({zerosLike_:m9});function g9(e,t){let r=W(e,"a","div"),a=W(t,"b","div");[r,a]=nr(r,a);let n=Ve(r,a),i=xt(n),s=oa(a,i);return on(s,i,n)}var zC=J({divNoNan_:g9});function v9(e,t){let r=W(e,"t1","dot"),a=W(t,"t2","dot");q((r.rank===1||r.rank===2)&&(a.rank===1||a.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${r.rank} and ${a.rank}.`);let n=r.rank===1?r.size:r.shape[1],i=a.rank===1?a.size:a.shape[0];if(q(n===i,()=>`Error in dot: inner dimensions of inputs must match, but got ${n} and ${i}.`),r.rank===1&&a.rank===1){let s=re(r,[1,-1]),o=re(a,[-1,1]),l=ft(s,o);return re(l,[])}else if(r.rank===1&&a.rank===2){let s=re(r,[1,-1]),o=re(a,[a.shape[0],a.shape[1]]),l=ft(s,o);return re(l,[l.size])}else if(r.rank===2&&a.rank===1){let s=re(a,[-1,1]),o=ft(r,s);return re(o,[o.size])}else{let s=re(a,[a.shape[0],a.shape[1]]);return ft(r,s)}}var oD=J({dot_:v9});function b9(e,...t){let r=t.map((n,i)=>W(n,`tensors${i}`,"einsum")),a={equation:e};return Q.runKernel(ey,r,a)}var lD=J({einsum_:b9});function y9(e){let t={x:W(e,"x","elu","float32")};return Q.runKernel(ql,t)}var op=J({elu_:y9});function w9(e){let t=W(e,"x","erf");q(t.dtype==="int32"||t.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),t.dtype==="int32"&&(t=Te(t,"float32"));let r={x:t};return Q.runKernel(yd,r)}var BC=J({erf_:w9});function VC(e,t){for(let r=0;r<e.length;++r)if(e[e.length-r-1]!==t-1-r)return!1;return!0}function uD(e,t,r){let a=e.length+t.length,n=[],i=0,s=0;for(let o=0;o<a;o++)r.indexOf(o)===-1?n.push(e[i++]):n.push(t[s++]);return n}function cD(e,t){let r=[],a=e.length;for(let i=0;i<a;i++)t.indexOf(i)===-1&&r.push(e[i]);let n=t.map(i=>e[i]);return[r,n]}function bl(e,t){let r=t.map(a=>1);return uD(e,r,t)}function x9(e,t,r){q(VC(t,r),()=>`${e} supports only inner-most axes for now. Got axes ${t} and rank-${r} input.`)}function dD(e,t){if(VC(e,t))return null;let r=[];for(let a=0;a<t;++a)e.indexOf(a)===-1&&r.push(a);return e.forEach(a=>r.push(a)),r}function WC(e){return e.map((t,r)=>[r,t]).sort((t,r)=>t[1]-r[1]).map(t=>t[0])}function k9(e,t){let r=[];for(let a=t-e;a<t;++a)r.push(a);return r}function E9(e,t=null,r=!1){let a={x:W(e,"x","max")},n={reductionIndices:t,keepDims:r};return Q.runKernel(ru,a,n)}var Fa=J({max_:E9});function C9(e,t=null,r=!1){let a={x:W(e,"x","min")},n={axis:t,keepDims:r};return Q.runKernel(su,a,n)}var ch=J({min_:C9});function S9(e,t){let r=W(e,"base","pow"),a=W(t,"exp","pow");[r,a]=nr(r,a);let n={a:r,b:a};return Q.runKernel(pu,n)}var ls=J({pow_:S9});function et(e,t){if((tn(e)&&t!=="string"||Array.isArray(e))&&t!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(t==="string"&&tn(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return xo(e,[],[],t)}function $9(e){let t={x:W(e,"x","sqrt","float32")};return Q.runKernel(Eu,t)}var Yr=J({sqrt_:$9});function I9(e){let t=W(e,"x","square"),r={};return Q.runKernel("Square",{x:t},r)}var Rt=J({square_:I9});function T9(e,t=null,r=!1){let a=W(e,"x","sum");a.dtype==="bool"&&(a=Te(a,"int32"));let n={x:a},i={axis:t,keepDims:r};return Q.runKernel(Cu,n,i)}var Ue=J({sum_:T9});function N9(e,t="euclidean",r=null,a=!1){e=W(e,"x","norm");let n=pD(e,t,r),i=n.shape;if(a){let s=Ua(r,e.shape);i=bl(n.shape,s)}return re(n,i)}function pD(e,t,r=null){if(e.rank===0)return xr(e);if(e.rank!==1&&r===null)return pD(re(e,[-1]),t,r);if(e.rank===1||typeof r=="number"||Array.isArray(r)&&r.length===1){if(t===1)return Ue(xr(e),r);if(t===1/0)return Fa(xr(e),r);if(t===-1/0)return ch(xr(e),r);if(t==="euclidean"||t===2)return Yr(Ue(ls(xr(e),et(2,"int32")),r));throw new Error(`Error in norm: invalid ord value: ${t}`)}if(Array.isArray(r)&&r.length===2){if(t===1)return Fa(Ue(xr(e),r[0]),r[1]-1);if(t===1/0)return Fa(Ue(xr(e),r[1]),r[0]);if(t===-1/0)return ch(Ue(xr(e),r[1]),r[0]);if(t==="fro"||t==="euclidean")return Yr(Ue(Rt(e),r));throw new Error(`Error in norm: invalid ord value: ${t}`)}throw new Error(`Error in norm: invalid axis: ${r}`)}var am=J({norm_:N9});function A9(e,t=null,r=!1){return am(e,"euclidean",t,r)}var HC=J({euclideanNorm_:A9});function _9(e){let t={x:W(e,"x","exp")};return Q.runKernel(Xl,t)}var xn=J({exp_:_9});function M9(e,t=0){let r=W(e,"x","expandDims","string_or_numeric");q(t<=r.rank,()=>"Axis must be <= rank of the tensor");let a={input:r},n={dim:t};return Q.runKernel(xd,a,n)}var pn=J({expandDims_:M9});function R9(e){let t={x:W(e,"x","expm1")};return Q.runKernel(kd,t)}var UC=J({expm1_:R9});function O9(e,t){let r=W(e,"x","tile","string_or_numeric");q(r.rank===t.length,()=>`Error in transpose: rank of input ${r.rank} must match length of reps ${t}.`);let a={x:r},n={reps:t};return Q.runKernel(yo,a,n)}var Jn=J({tile_:O9});function P9(e,t,r,a="float32"){t==null&&(t=e);let n=gt([e,t],a),i=e<=t?e:t;for(let o=0;o<i;++o)n.set(1,o,o);let s=re(n.toTensor(),[e,t]);if(r==null)return s;if(r.length===1)return Jn(pn(s,0),[r[0],1,1]);if(r.length===2)return Jn(pn(pn(s,0),0),[r[0],r[1],1,1]);if(r.length===3)return Jn(pn(pn(pn(s,0),0),0),[r[0],r[1],r[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${r.length}D.`)}var jC=J({eye_:P9});function Ea(e,t,r){let a={shape:e,value:t,dtype:r};return Q.runKernel(Dh,{},a)}function D9(e){let t={x:W(e,"x","floor","float32")};return Q.runKernel(Yl,t)}var lp=J({floor_:D9});function F9(e,t,r=0,a=0){let n=W(e,"x","gather"),i=W(t,"indices","gather","int32"),s={x:n,indices:i},o={axis:r,batchDims:a};return Q.runKernel(Cd,s,o)}var yl=J({gather_:F9});function L9(e,t){let r=W(e,"a","greater","string_or_numeric"),a=W(t,"b","greater","string_or_numeric");[r,a]=nr(r,a),Pt(r.shape,a.shape);let n={a:r,b:a};return Q.runKernel($d,n)}var Wn=J({greater_:L9});function z9(e,t){let r=W(e,"a","greaterEqual","string_or_numeric"),a=W(t,"b","greaterEqual","string_or_numeric");[r,a]=nr(r,a),Pt(r.shape,a.shape);let n={a:r,b:a};return Q.runKernel(Ql,n)}var Eo=J({greaterEqual_:z9});function B9(e){let t={x:W(e,"x","isFinite")};return Q.runKernel(Id,t)}var fD=J({isFinite_:B9});function V9(e){let t={x:W(e,"x","isInf")};return Q.runKernel(Td,t)}var hD=J({isInf_:V9});function W9(e){let t={x:W(e,"x","isNaN")};return Q.runKernel(Nd,t)}var GC=J({isNaN_:W9});function H9(e,t=.2){let r={x:W(e,"x","leakyRelu")},a={alpha:t};return Q.runKernel(eu,r,a)}var im=J({leakyRelu_:H9});function U9(e,t){let r=W(e,"a","less","string_or_numeric"),a=W(t,"b","less","string_or_numeric");[r,a]=nr(r,a),Pt(r.shape,a.shape);let n={a:r,b:a};return Q.runKernel(Ad,n)}var Ny=J({less_:U9});function j9(e,t){let r=W(e,"a","lessEqual","string_or_numeric"),a=W(t,"b","lessEqual","string_or_numeric");[r,a]=nr(r,a),Pt(r.shape,a.shape);let n={a:r,b:a};return Q.runKernel(_d,n)}var Co=J({lessEqual_:j9});function mD(e,t,r){if(r<=0)throw new Error("The number of values should be positive.");let a={start:e,stop:t,num:r};return Q.runKernel(iy,{},a)}function G9(e,t=5,r=1,a=1,n=.5){let i=W(e,"x","localResponseNormalization");q(i.rank===4||i.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${i.rank}.`),q(Mc(t),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${t}.`);let s=i,o=!1;i.rank===3&&(o=!0,s=re(i,[1,i.shape[0],i.shape[1],i.shape[2]]));let l={x:s},u={depthRadius:t,bias:r,alpha:a,beta:n},c=Q.runKernel(zh,l,u);return o?re(c,[c.shape[1],c.shape[2],c.shape[3]]):c}var qC=J({localResponseNormalization_:G9});function q9(e){let t={x:W(e,"x","log","float32")};return Q.runKernel(tu,t)}var la=J({log_:q9});function X9(e){let t={x:W(e,"x","log1p")};return Q.runKernel(Md,t)}var sm=J({log1p_:X9});function Y9(e){return q(ro(e),()=>"The f passed in grad(f) must be a function"),(t,r)=>{let a=W(t,"x","tf.grad","string_or_numeric"),n=r!=null?W(r,"dy","tf.grad"):null;return Q.tidy(()=>{let{value:i,grads:s}=Q.gradients(()=>e(a),[a],n);return n!=null&&Sn(i.shape,n.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),Ay(s),s[0]})}}function K9(e){return q(ro(e),()=>"The f passed in grads(f) must be a function"),(t,r)=>{q(Array.isArray(t),()=>"The args passed in grads(f)(args) must be an array of `Tensor`s or `TensorLike`s");let a=oh(t,"args","tf.grads","string_or_numeric"),n=r!=null?W(r,"dy","tf.grads"):null;return Q.tidy(()=>{let{value:i,grads:s}=Q.gradients(()=>e(...a),a,n);return n!=null&&Sn(i.shape,n.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),Ay(s),s})}}function Z9(e){return q(ro(e),()=>"The f passed in valueAndGrad(f) must be a function"),(t,r)=>{q(t instanceof ht,()=>"The x passed in valueAndGrad(f)(x) must be a tensor"),q(r==null||r instanceof ht,()=>"The dy passed in valueAndGrad(f)(x, dy) must be a tensor");let{grads:a,value:n}=Q.gradients(()=>e(t),[t],r);return Ay(a),{grad:a[0],value:n}}}function Q9(e){return q(ro(e),()=>"The f passed in valueAndGrads(f) must be a function"),(t,r)=>{q(Array.isArray(t)&&t.every(n=>n instanceof ht),()=>"The args passed in valueAndGrads(f)(args) must be array of tensors"),q(r==null||r instanceof ht,()=>"The dy passed in valueAndGrads(f)(args, dy) must be a tensor");let a=Q.gradients(()=>e(...t),t,r);return r!=null&&Sn(a.value.shape,r.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),Ay(a.grads),a}}function gD(e,t){q(ro(e),()=>"The f passed in variableGrads(f) must be a function"),q(t==null||Array.isArray(t)&&t.every(u=>u instanceof fl),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");let r=t!=null;if(!r){t=[];for(let u in Q.registeredVariables)t.push(Q.registeredVariables[u])}let a=r?t.filter(u=>!u.trainable):null,n=t.length;t=t.filter(u=>u.trainable),q(t.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${n} variables is trainable.`);let i=!0,{value:s,grads:o}=Q.gradients(e,t,null,i);q(o.some(u=>u!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),q(s.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${s.rank} tensor`);let l={};return t.forEach((u,c)=>{o[c]!=null&&(l[u.name]=o[c])}),a!=null&&a.forEach(u=>l[u.name]=null),{value:s,grads:l}}function Ii(e){return Q.customGrad(e)}function Ay(e){if(e.filter(t=>t==null).length>0)throw new Error(`Cannot compute gradient of y=f(x) with respect to x. Make sure that
    the f you passed encloses all operations that lead from x to y.`)}function J9(e){let t={x:W(e,"x","softplus")};return Q.runKernel(Kd,t)}var _u=J({softplus_:J9});function eZ(e){let t=W(e,"x","logSigmoid");return Ii(r=>({value:Gt(_u(Gt(r))),gradFunc:a=>ee(a,Da(Gt(r)))}))(t)}var vD=J({logSigmoid_:eZ});function tZ(e,t){let r=W(e,"a","sub"),a=W(t,"b","sub");[r,a]=nr(r,a);let n={a:r,b:a};return Q.runKernel(Iu,n)}var Fe=J({sub_:tZ});function rZ(e,t=-1){let r=W(e,"logits","logSoftmax");if(t===-1&&(t=r.rank-1),t!==r.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${r.rank} and axis was ${t}`);return Ii((a,n)=>{let i=Fa(a,t,!0),s=Fe(a,i),o=Fe(Te(s,"float32"),la(Ue(xn(s),t,!0)));return n([o]),{value:o,gradFunc:(l,u)=>{let[c]=u,d=!0,p=xn(c);return Fe(l,ee(Ue(l,t,d),p))}}})(r)}var _y=J({logSoftmax_:rZ});function nZ(e,t=null,r=!1){let a=W(e,"x","logSumExp"),n=Ua(t,a.shape),i=Fa(a,n,!0),s=Fe(a,i),o=xn(s),l=Ue(o,n),u=la(l),c=xe(re(i,u.shape),u);if(r){let d=bl(c.shape,n);return re(c,d)}return c}var XC=J({logSumExp_:nZ});function aZ(e,t){let r=W(e,"a","logicalAnd","bool"),a=W(t,"b","logicalAnd","bool");Pt(r.shape,a.shape);let n={a:r,b:a};return Q.runKernel(Rd,n)}var Va=J({logicalAnd_:aZ});function iZ(e){let t={x:W(e,"x","logicalNot","bool")};return Q.runKernel(Fh,t)}var om=J({logicalNot_:iZ});function sZ(e,t){let r=W(e,"a","logicalOr","bool"),a=W(t,"b","logicalOr","bool");Pt(r.shape,a.shape);let n={a:r,b:a};return Q.runKernel(Lh,n)}var My=J({logicalOr_:sZ});function oZ(e,t){let r=W(e,"a","logicalXor","bool"),a=W(t,"b","logicalXor","bool");return Pt(r.shape,a.shape),Va(My(e,t),om(Va(e,t)))}var bD=J({logicalXor_:oZ}),Eg=2147483648;function lZ(e,t,r="left"){let a=W(e,"sortedSequence","searchSorted"),n=W(t,"values","searchSorted"),i=a.shape[a.shape.length-1],s=n.shape[n.shape.length-1],o=re(a,[-1,i]),l=re(n,[-1,s]);if(o.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(o.shape[0]!==l.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if(Wt(l.shape)>=Eg)throw new Error(`values tensor size must less than ${Eg}`);if(o.shape[1]>=Eg)throw new Error(`trailing dim_size must less than ${Eg} for int32 output type, was ${o.shape[1]}`);let u={sortedSequence:o,values:l},c={side:r};return Q.runKernel(hy,u,c)}var YC=J({searchSorted_:lZ});function yD(e,t){return YC(e,t,"left")}function uZ(e,t,r,a,n){let i=W(e,"x","maxPool"),s=1,o=i,l=!1;i.rank===3&&(l=!0,o=re(i,[1,i.shape[0],i.shape[1],i.shape[2]])),q(o.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${o.rank}.`),q(Mi(r,s),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${r} and dilations '${s}'`),$n("maxPool",a,n);let u={x:o},c={filterSize:t,strides:r,pad:a,dimRoundingMode:n},d=Q.runKernel(au,u,c);return l?re(d,[d.shape[1],d.shape[2],d.shape[3]]):d}var Dr=J({maxPool_:uZ});function cZ(e,t=[1,1,1],r,a,n,i="NDHWC"){let s=W(e,"x","maxPool3d"),o=s,l=!1;s.rank===4&&(l=!0,o=re(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),q(o.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${o.rank}.`),q(i==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${i}`),$n("maxPool3d",a,n);let u={x:o},c={filterSize:t,strides:r,pad:a,dimRoundingMode:n,dataFormat:i},d=Q.runKernel(Bh,u,c);return l?re(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}var KC=J({maxPool3d_:cZ});function dZ(e,t,r,a,n=!1){let i={x:W(e,"x","maxPoolWithArgmax")},s={filterSize:t,strides:r,pad:a,includeBatchInIndex:n},o=Q.runKernel(uy,i,s);return{result:o[0],indexes:o[1]}}var wD=J({maxPoolWithArgmax_:dZ});function pZ(e,t){let r=W(e,"a","maximum"),a=W(t,"b","maximum");[r,a]=nr(r,a),r.dtype==="bool"&&(r=Te(r,"int32"),a=Te(a,"int32")),Pt(r.shape,a.shape);let n={a:r,b:a};return Q.runKernel(nu,n)}var Ri=J({maximum_:pZ});function fZ(e,t=null,r=!1){let a={x:W(e,"x","mean")},n={axis:t,keepDims:r};return Q.runKernel(iu,a,n)}var Qt=J({mean_:fZ});function Jt(e,t="float32"){if(t==="complex64"){let a=Jt(e,"float32"),n=Jt(e,"float32");return os(a,n)}let r=Vb(Wt(e),t);return Q.makeTensor(r,e,t)}function ea(e,t="float32"){if(t==="complex64"){let a=ea(e,"float32"),n=Jt(e,"float32");return os(a,n)}let r=aC(Wt(e),t);return Q.makeTensor(r,e,t)}function hZ(e,t,{indexing:r="xy"}={}){if(r!=="xy"&&r!=="ij")throw new TypeError(`${r} is not a valid third argument to meshgrid`);if(e===void 0)return[];let a=W(e,"x","meshgrid",e instanceof ht?e.dtype:"float32");if(t===void 0)return[a];let n=W(t,"y","meshgrid",t instanceof ht?t.dtype:"float32"),i=Wt(a.shape),s=Wt(n.shape);return r==="xy"?(a=re(a,[1,-1]),n=re(n,[-1,1]),[ft(ea([s,1],a.dtype),a),ft(n,ea([1,i],n.dtype))]):(a=re(a,[-1,1]),n=re(n,[1,-1]),[ft(a,ea([1,s],a.dtype)),ft(ea([i,1],n.dtype),n)])}function mZ(e,t){let r=W(e,"a","minimum"),a=W(t,"b","minimum");[r,a]=nr(r,a),r.dtype==="bool"&&(r=Te(r,"int32"),a=Te(a,"int32")),Pt(r.shape,a.shape);let n={a:r,b:a};return Q.runKernel(ou,n)}var up=J({minimum_:mZ});function gZ(e,t,r){q(r==="reflect"||r==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${r}.`);let a=W(e,"x","mirrorPad");if(a.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");q(t.length===a.rank,()=>`Padding doesn't match input. Must be ${a.rank}. Got ${t.length}.`);let n=r==="reflect"?1:0;for(let o=0;o<a.rank;o++)q(t[o].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),q(t[o][0]>=0&&t[o][0]<=a.shape[o]-n&&t[o][1]>=0&&t[o][1]<=a.shape[o]-n,()=>`Padding in dimension ${o} cannot be greater than or equal to ${a.shape[o]-n} or less than 0 for input of shape ${a.shape}`);let i={paddings:t,mode:r},s={x:a};return Q.runKernel(lu,s,i)}var ZC=J({mirrorPad_:gZ});function vZ(e,t){let r=W(e,"a","mod"),a=W(t,"b","mod");[r,a]=nr(r,a);let n={a:r,b:a};return Q.runKernel(Od,n)}var QC=J({mod_:vZ});function bZ(e,t=null,r=!1){e=W(e,"x","moments");let a=Ua(t,e.shape),n=Qt(e,a,r),i=n.shape;r||(i=bl(n.shape,a));let s=Rt(Fe(Te(e,"float32"),re(n,i))),o=Qt(s,a,r);return{mean:n,variance:o}}var Ry=J({moments_:bZ});function yZ(e,t,r,a){let n=W(t,"data","multiRNNCell"),i=oh(r,"c","multiRNNCell"),s=oh(a,"h","multiRNNCell"),o=n,l=[];for(let d=0;d<e.length;d++){let p=e[d](o,i[d],s[d]);l.push(p[0]),l.push(p[1]),o=p[1]}let u=[],c=[];for(let d=0;d<l.length;d+=2)u.push(l[d]),c.push(l[d+1]);return[u,c]}var wZ=J({multiRNNCell_:yZ});function xZ(e,t,r,a=!1){let n=W(e,"logits","multinomial"),i=n.size,s=n.rank;if(i<2)throw new Error(`Error in multinomial: you need at least 2 outcomes, but got ${i}.`);if(s>2)throw new Error(`Rank of probabilities must be 1 or 2, but is ${s}`);r=r||Math.random();let o={logits:s===1?re(n,[1,-1]):n},l={numSamples:t,seed:r,normalized:a},u=Q.runKernel(cy,o,l);return s===1?re(u,[u.size]):u}var xD=J({multinomial_:xZ});function kZ(e,t){let r=W(e,"a","notEqual","string_or_numeric"),a=W(t,"b","notEqual","string_or_numeric");[r,a]=nr(r,a),Pt(r.shape,a.shape);let n={a:r,b:a};return Q.runKernel(Dd,n)}var wl=J({notEqual_:kZ});function EZ(e){let t={x:W(e,"x","onesLike")};return Q.runKernel(Bd,t)}var ua=J({onesLike_:EZ});function CZ(e,t){let r=W(e,"v1","outerProduct"),a=W(t,"v2","outerProduct");q(r.rank===1&&a.rank===1,()=>`Error in outerProduct: inputs must be rank 1, but got ranks ${r.rank} and ${a.rank}.`);let n=re(r,[-1,1]),i=re(a,[1,-1]);return ft(n,i)}var SZ=J({outerProduct_:CZ});function $Z(e,t,r=0){let a=W(e,"x","pad");if(a.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");let n={paddings:t,constantValue:r},i={x:a};return Q.runKernel(du,i,n)}var ui=J({pad_:$Z});function IZ(e,t,r=0){return q(t.length===2,()=>"Invalid number of paddings. Must be length of 2."),ui(e,[t],r)}var TZ=J({pad1d_:IZ});function NZ(e,t,r=0){return q(t.length===2&&t[0].length===2&&t[1].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),ui(e,t,r)}var AZ=J({pad2d_:NZ});function _Z(e,t,r=0){return q(t.length===3&&t[0].length===2&&t[1].length===2&&t[2].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),ui(e,t,r)}var MZ=J({pad3d_:_Z});function RZ(e,t,r=0){return q(t.length===4&&t[0].length===2&&t[1].length===2&&t[2].length===2&&t[3].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),ui(e,t,r)}var OZ=J({pad4d_:RZ});function PZ(e,t,r){let a=W(e,"x","spaceToBatchND");q(a.rank>=1+t.length,()=>`input rank ${a.rank} should be > than [blockShape] ${t.length}`),q(r.length===t.length,()=>`paddings.shape[0] ${r.length} must be equal to [blockShape] ${t.length}`),q(a.shape.reduce((s,o,l)=>l>0&&l<=t.length?s&&(o+r[l-1][0]+r[l-1][1])%t[l-1]===0:s,!0),()=>`input spatial dimensions ${a.shape.slice(1)} with paddings ${r.toString()} must be divisible by blockShapes ${t.toString()}`);let n={x:a},i={blockShape:t,paddings:r};return Q.runKernel(Zd,n,i)}var lm=J({spaceToBatchND_:PZ});function DZ(e,t,r,a,n,i,s){n==null&&(n=[1,1]),i==null&&(i=1),a===0&&(a="valid");let o=W(e,"x","maxPool"),l=o,u=!1;o.rank===3&&(u=!0,l=re(o,[1,o.shape[0],o.shape[1],o.shape[2]])),q(Mi(i,n),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${i} and dilations '${n}'`);let c=qP(l.shape,t,i,n,a),d=[c.dilationHeight,c.dilationWidth],p;a==="same"?p=LZ([c.filterHeight,c.filterWidth],d):p=[[0,0],[0,0]];let f=d[0]===1&&d[1]===1,[h,m]=FZ([c.inHeight,c.inWidth],d,p),g=f?a:"valid",v=f?l:lm(l,d,h),b=(r==="avg"?()=>ps(v,t,i,g,s):()=>Dr(v,t,i,g,s))(),y=f?b:rm(b,d,m);return u?re(y,[y.shape[1],y.shape[2],y.shape[3]]):y}function FZ(e,t,r){let a=r.map(c=>c[0]),n=r.map(c=>c[1]),i=e.concat(a,n),s=t.map((c,d)=>(c-i[d]%c)%c),o=n.map((c,d)=>c+s[d]),l=t.map((c,d)=>[a[d],o[d]]),u=t.map((c,d)=>[0,s[d]]);return[l,u]}function LZ(e,t){let r=e.map((i,s)=>i+(i-1)*(t[s]-1)).map(i=>i-1),a=r.map(i=>Math.floor(i/2)),n=r.map((i,s)=>i-a[s]);return r.map((i,s)=>[a[s],n[s]])}var kD=J({pool_:DZ});function zZ(e,t){let r=W(e,"x","prelu"),a=W(t,"alpha","prelu"),n={x:r,alpha:a};return Q.runKernel(fu,n)}var um=J({prelu_:zZ});function BZ(e,t=null,r=!1){let a=W(e,"x","prod");a.dtype==="bool"&&(a=Te(a,"int32"));let n={x:a},i={axis:t,keepDims:r};return Q.runKernel(hu,n,i)}var Oy=J({prod_:BZ});function VZ(e,t,r){let a=Wt(e),n=null;if(r==null||r==="float32")n=new Float32Array(a);else if(r==="int32")n=new Int32Array(a);else if(r==="bool")n=new Uint8Array(a);else throw new Error(`Unknown data type ${r}`);for(let i=0;i<a;i++)n[i]=t();return Q.makeTensor(n,e,r)}var WZ=J({rand_:VZ}),JC=Ml(LO()),eS=class{constructor(e,t,r,a,n){this.mean=e,this.stdDev=t,this.dtype=r,this.nextVal=NaN,this.truncated=a,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);let i=n||Math.random();this.random=JC.alea(i.toString())}nextValue(){if(!isNaN(this.nextVal)){let a=this.nextVal;return this.nextVal=NaN,a}let e,t,r=!1;for(;!r;){let a,n,i;do a=2*this.random()-1,n=2*this.random()-1,i=a*a+n*n;while(i>=1||i===0);let s=Math.sqrt(-2*Math.log(i)/i);e=this.mean+this.stdDev*a*s,t=this.mean+this.stdDev*n*s,(!this.truncated||this.isValidTruncated(e))&&(r=!0)}return(!this.truncated||this.isValidTruncated(t))&&(this.nextVal=this.convertValue(t)),this.convertValue(e)}convertValue(e){return this.dtype==null||this.dtype==="float32"?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}},HZ=class{constructor(e,t,r,a){this.alpha=e,this.beta=1/t,this.dtype=r;let n=a||Math.random();this.randu=JC.alea(n.toString()),this.randn=new eS(0,1,r,!1,this.randu()),e<1?this.d=e+2/3:this.d=e-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let e,t,r,a,n,i;for(;;){do a=this.randn.nextValue(),i=1+this.c*a;while(i<=0);if(i*=i*i,e=a*a,t=1-.331*e*e,r=.5*e+this.d*(1-i+Math.log(i)),n=this.randu(),n<t||Math.log(n)<r)break}return i=1/this.beta*this.d*i,this.alpha<1&&(i*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(i)}convertValue(e){return this.dtype==="float32"?e:Math.round(e)}},UZ=class{constructor(e=0,t=1,r,a){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=e,this.range=t-e,this.dtype=r,a==null&&(a=Math.random()),typeof a=="number"&&(a=a.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${e} - ${t} <= 1 and dtype is not float`);this.random=JC.alea(a)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}};function jZ(e,t,r=1,a="float32",n){if(r==null&&(r=1),a==null&&(a="float32"),a!=="float32"&&a!=="int32")throw new Error(`Unsupported data type ${a}`);let i=new HZ(t,r,a,n),s=gt(e,a);for(let o=0;o<s.values.length;o++)s.values[o]=i.nextValue();return s.toTensor()}var GZ=J({randomGamma_:jZ});function qZ(e,t=0,r=1,a,n){if(a!=null&&a==="bool")throw new Error(`Unsupported data type ${a}`);let i=new eS(t,r,a,!1,n),s=gt(e,a);for(let o=0;o<s.values.length;o++)s.values[o]=i.nextValue();return s.toTensor()}var ED=J({randomNormal_:qZ});function XZ(e,t=0,r=1,a="float32",n){let i=gt(e,a),s=new UZ(t,r,null,n);for(let o=0;o<i.values.length;o++)i.values[o]=s.nextValue();return i.toTensor()}var cp=J({randomUniform_:XZ});function Fc(e,t,r=1,a="float32"){if(r===0)throw new Error("Cannot have a step of zero");let n={start:e,stop:t,step:r,dtype:a};return Q.runKernel(Vh,{},n)}function YZ(e){let t={x:W(e,"x","reciprocal")};return Q.runKernel(Wd,t)}var tS=J({reciprocal_:YZ});function KZ(e){let t={x:W(e,"x","relu")};return Q.runKernel(mu,t)}var At=J({relu_:KZ});function ZZ(e){let t={x:W(e,"x","relu6")};return Q.runKernel(vu,t)}var Py=J({relu6_:ZZ});function QZ(e,t){let r={x:W(e,"x","reverse")},a={dims:t};return Q.runKernel(bu,r,a)}var ca=J({reverse_:QZ});function JZ(e){let t=W(e,"x","reverse");return q(t.rank===1,()=>`Error in reverse1D: x must be rank 1 but got rank ${t.rank}.`),ca(t,0)}var eQ=J({reverse1d_:JZ});function tQ(e,t){let r=W(e,"x","reverse");return q(r.rank===2,()=>`Error in reverse2D: x must be rank 2 but got rank ${r.rank}.`),ca(r,t)}var rQ=J({reverse2d_:tQ});function nQ(e,t){let r=W(e,"x","reverse");return q(r.rank===3,()=>`Error in reverse3D: x must be rank 3 but got rank ${r.rank}.`),ca(r,t)}var aQ=J({reverse3d_:nQ});function iQ(e,t){let r=W(e,"x","reverse");return q(r.rank===4,()=>`Error in reverse4D: x must be rank 4 but got rank ${r.rank}.`),ca(r,t)}var sQ=J({reverse4d_:iQ});function oQ(e){let t={x:W(e,"x","round")};return Q.runKernel(yu,t)}var Dy=J({round_:oQ});function lQ(e){let t={x:W(e,"x","rsqrt","float32")};return Q.runKernel(wu,t)}var Fy=J({rsqrt_:lQ});function uQ(e){let t={x:W(e,"x","selu")};return Q.runKernel(Gd,t)}var Ly=J({selu_:uQ});function cQ(e,t,r,a,n,i=[1,1],s="NHWC"){let o=W(e,"x","separableConv2d"),l=W(t,"depthwiseFilter","separableConv2d"),u=W(r,"pointwiseFilter","separableConv2d"),c=o,d=!1;if(o.rank===3&&(d=!0,c=re(o,[1,o.shape[0],o.shape[1],o.shape[2]])),s==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");q(c.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${c.rank}.`),q(l.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${l.rank}.`),q(u.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${l.rank}.`),q(u.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${u.shape[0]}.`),q(u.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${u.shape[1]}.`);let p=l.shape[2],f=l.shape[3];q(u.shape[2]===p*f,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${p*f}, but got ${u.shape[2]}.`);let h=Au(c,l,a,n,s,i),m=wn(h,u,1,"valid",s);return d?re(m,[m.shape[1],m.shape[2],m.shape[3]]):m}var cm=J({separableConv2d_:cQ});async function dQ(e,t){let r=W(e,"x","setdiff1d"),a=W(t,"y","setdiff1d");q(r.dtype===a.dtype,()=>`x and y should have the same dtype, but got x (${r.dtype}) and y (${a.dtype}).`),q(r.rank===1,()=>`x should be 1D tensor, but got x (${r.shape}).`),q(a.rank===1,()=>`y should be 1D tensor, but got y (${a.shape}).`);let n=await r.data(),i=await a.data(),s=new Set(i),o=0;for(let c=0;c<n.length;c++)s.has(n[c])||o++;let l=new _r([o],r.dtype),u=new _r([o],"int32");for(let c=0,d=0;c<n.length;c++)s.has(n[c])||(l.values[d]=n[c],u.values[d]=c,d++);return[l.toTensor(),u.toTensor()]}var CD=dQ;function pQ(e){let t={x:W(e,"x","sign")};return Q.runKernel(Yd,t)}var rS=J({sign_:pQ});function fQ(e){let t={x:W(e,"x","sin","float32")};return Q.runKernel(xu,t)}var zy=J({sin_:fQ});function hQ(e){let t={x:W(e,"x","sinh")};return Q.runKernel(Xd,t)}var By=J({sinh_:hQ});function mQ(e,t,r){let a=W(e,"x","slice1d");return q(a.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${a.rank} tensor`),bt(a,[t],[r])}var Vy=J({slice1d_:mQ});function gQ(e,t,r){let a=W(e,"x","slice2d");return q(a.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${a.rank} tensor`),bt(a,t,r)}var nS=J({slice2d_:gQ});function vQ(e,t,r){let a=W(e,"x","slice3d");return q(a.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${a.rank} tensor`),bt(a,t,r)}var dm=J({slice3d_:vQ});function bQ(e,t,r){let a=W(e,"x","slice4d");return q(a.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${a.rank} tensor`),bt(a,t,r)}var dh=J({slice4d_:bQ});function yQ(e,t=-1){let r=W(e,"logits","softmax","float32");if(t===-1&&(t=r.rank-1),t!==r.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${r.rank} and dim was ${t}`);let a={logits:r},n={dim:t};return Q.runKernel(Su,a,n)}var So=J({softmax_:yQ});function wQ(e){q(e.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${e.dtype}.`);let t={input:e};return Q.runKernel(ry,t)}var pm=J({fft_:wQ});function xQ(e){q(e.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${e.dtype}.`);let t={input:e};return Q.runKernel(ny,t)}var Lc=J({ifft_:xQ});function kQ(e){let t=e.shape[e.shape.length-1],r=e.size/t,a;if(t<=2){let n=re(e,[r,t]);a=Lc(n)}else{let n=[r,2*(t-1)],i=re(Dc(e),[r,t]),s=re(Jh(e),[r,t]),o=ca(bt(i,[0,1],[r,t-2]),1),l=ee(ca(bt(s,[0,1],[r,t-2]),1),et(-1)),u=Ot([i,o],1),c=Ot([s,l],1),d=re(os(u,c),[n[0],n[1]]);a=Lc(d)}if(a=Dc(a),e.rank===3&&e.shape[0]!==0){let n=a,i=e.shape[0];a=re(a,[i,a.shape[0]/i,a.shape[1]]),n.dispose()}return a}var Wy=J({irfft_:kQ});function EQ(e,t,r=0){let a={x:W(e,"x","split")},n={numOrSizeSplits:t,axis:r};return Q.runKernel(Qd,a,n)}var Pn=J({split_:EQ});function CQ(e,t){q(e.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${e.dtype}`);let r=e.shape[e.shape.length-1],a=e.size/r,n;if(t!=null&&t<r){let h=e.shape.map(g=>0),m=e.shape.map(g=>g);m[e.shape.length-1]=t,n=bt(e,h,m),r=t}else if(t!=null&&t>r){let h=e.shape.map(m=>m);h[e.shape.length-1]=t-r,n=Ot([e,Jt(h)],e.shape.length-1),r=t}else n=e;let i=xt(n),s=re(os(n,i),[a,r]),o=pm(s),l=Math.floor(r/2)+1,u=Dc(o),c=Jh(o),d=Pn(u,[l,r-l],u.shape.length-1),p=Pn(c,[l,r-l],c.shape.length-1),f=n.shape.slice();return f[n.shape.length-1]=l,re(os(d[0],p[0]),f)}var fm=J({rfft_:CQ});function SQ(e,t){let r=W(e,"a","squaredDifference"),a=W(t,"b","squaredDifference");[r,a]=nr(r,a),Pt(r.shape,a.shape);let n={a:r,b:a},i={};return Q.runKernel($u,n,i)}var Hy=J({squaredDifference_:SQ});function $Q(e,t){let r=W(e,"x","squeeze");return re(r,WO(r.shape,t).newShape)}var Ti=J({squeeze_:$Q});function IQ(e,t=0){let r=oh(e,"tensors","stack","string_or_numeric");q(r.length>=1,()=>"Pass at least one tensor to tf.stack"),r.length>0&&q(t<=r[0].rank,()=>"Axis must be <= rank of the tensor");let a=r,n={axis:t};return Q.runKernel(Vd,a,n)}var Vr=J({stack_:IQ});function TQ(e,t=0){let r={x:W(e,"x","step")},a={alpha:t};return Q.runKernel(wo,r,a)}var dp=J({step_:TQ});function NQ(e,t,r,a,n=0,i=0,s=0,o=0,l=0){let u={x:W(e,"x","stridedSlice","string_or_numeric")},c={begin:t,end:r,strides:a,beginMask:n,endMask:i,ellipsisMask:s,newAxisMask:o,shrinkAxisMask:l};return Q.runKernel(ep,u,c)}var aS=J({stridedSlice_:NQ});function AQ(e){let t={x:W(e,"x","tan","float32")};return Q.runKernel(Tu,t)}var iS=J({tan_:AQ});function Nt(e,t){Rl(e);let r=$i(e,t);if(r.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return xo(e,null,r,t)}function ns(e,t,r){if(Rl(e),t!=null&&t.length!==2)throw new Error("tensor2d() requires shape to have two numbers");let a=$i(e,r);if(a.length!==2&&a.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(a.length===1&&t==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return xo(e,t,a,r)}function xl(e,t,r){if(Rl(e),t!=null&&t.length!==4)throw new Error("tensor4d() requires shape to have four numbers");let a=$i(e,r);if(a.length!==4&&a.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(a.length===1&&t==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return xo(e,t,a,r)}function _Q(e,t,r){if(Rl(e),t!=null&&t.length!==5)throw new Error("tensor5d() requires shape to have five numbers");let a=$i(e,r);if(a.length!==5&&a.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(a.length===1&&t==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return xo(e,t,a,r)}function MQ(e,t,r){if(Rl(e),t!=null&&t.length!==6)throw new Error("tensor6d() requires shape to have six numbers");let a=$i(e,r);if(a.length!==6&&a.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(a.length===1&&t==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return t=t||a,xo(e,t,a,r)}function RQ(e,t=1,r=!0){let a=W(e,"x","topk");if(a.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");let n=a.shape[a.shape.length-1];if(t<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${t}`);if(t>n)throw new Error(`'k' passed to topk() must be <= the last dimension (${n}) but got ${t}`);let i={x:a},s={k:t,sorted:r},[o,l]=Q.runKernel(tp,i,s);return{values:o,indices:l}}var sS=J({topk_:RQ});function OQ(e,t=0,r=1,a,n){if(a!=null&&a==="bool")throw new Error("Unsupported data type $ { dtype }");let i=new eS(t,r,a,!0,n),s=gt(e,a);for(let o=0;o<s.values.length;o++)s.values[o]=i.nextValue();return s.toTensor()}var Uy=J({truncatedNormal_:OQ});function PQ(e,t=0){let r=W(e,"x","unique","string_or_numeric");q(r.rank>0,()=>"The input tensor must be at least 1D");let a={x:r},n={axis:t},[i,s]=Q.runKernel(yy,a,n);return{values:i,indices:s}}var Qv=J({unique_:PQ});function DQ(e,t,r){let a=W(e,"x","unsortedSegmentSum"),n=W(t,"segmentIds","unsortedSegmentSum","int32");q(Mc(r),()=>"numSegments must be of dtype int");let i={x:a,segmentIds:n},s={numSegments:r};return Q.runKernel(qh,i,s)}var oS=J({unsortedSegmentSum_:DQ});function FQ(e,t=0){let r=W(e,"x","unstack","string_or_numeric");q(t>=-r.shape.length&&t<r.shape.length,()=>`Axis = ${t} is not in [-${r.shape.length}, ${r.shape.length})`);let a={value:r},n={axis:t};return Q.runKernel(np,a,n)}var hr=J({unstack_:FQ});function SD(e,t){return YC(e,t,"right")}function $D(e,t=!0,r,a){return Q.makeVariable(e,t,r,a)}function ID(e,t){let r=[];for(let i=0;i<t.length;i++)t[i]&&r.push(i);let a=gt(e,"int32"),n=gt([r.length,e.length],"int32");for(let i=0;i<r.length;i++){let s=a.indexToLoc(r[i]),o=i*e.length;n.values.set(s,o)}return n.toTensor()}async function LQ(e){let t=W(e,"condition","whereAsync","bool"),r=await t.data(),a=ID(t.shape,r);return e!==t&&t.dispose(),a}var lS=LQ;async function zQ(e,t,r){let a=W(e,"tensor","boolMask"),n=W(t,"mask","boolMask","bool"),i=r==null?0:r,s=n.rank,o=a.shape;q(s>0,()=>"mask cannot be scalar"),Sn(o.slice(i,i+s),n.shape,"mask's shape must match the first K dimensions of tensor's shape,");let l=1;for(let m=i;m<i+s;m++)l*=o[m];let u=o.slice(0,i).concat([l],o.slice(i+s)),c=re(a,u),d=re(n,[-1]),p=await lS(d),f=Ti(p,[1]),h=yl(c,f,i);return e!==a&&a.dispose(),t!==n&&n.dispose(),f.dispose(),c.dispose(),d.dispose(),p.dispose(),h}var BQ=zQ;function VQ(e,t,r,a,n=!0){let i=W(e,"v","movingAverage"),s=W(t,"x","movingAverage"),o=W(r,"decay","movingAverage");iP(i,s),q(go(i.shape,s.shape),()=>"Shape mismatch in v and x");let l=et(1),u=Fe(l,o),c=ee(Fe(s,i),u);if(n){q(a!=null,()=>"When using zeroDebias: true, step is required.");let d=W(a,"step","movingAverage");c=Ve(c,Fe(l,ls(o,d)))}return xe(i,c)}var WQ=J({movingAverage_:VQ});function HQ(e,t,r){let a=W(e,"indices","scatterND","int32"),n=W(t,"updates","scatterND");wC(n,a,r);let i={indices:a,updates:n},s={shape:r};return Q.runKernel(Ud,i,s)}var TD=J({scatterND_:HQ});function UQ(e,t,r,a){if(e.dtype!=="int32")throw new Error(`tf.sparseToDense() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.rank>2)throw new Error(`sparseIndices should be a scalar, vector, or matrix, but got shape ${e.shape}.`);let n=e.rank>0?e.shape[0]:1,i=e.rank>1?e.shape[1]:1;if(r.length!==i)throw new Error(`outputShape has incorrect number of elements:, ${r.length}, should be: ${i}.`);let s=t.size;if(!(t.rank===0||t.rank===1&&s===n))throw new Error(`sparseValues has incorrect shape ${t.shape}, should be [] or [${n}]`);if(t.dtype!==a.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}function jQ(e,t,r,a=0){let n=W(e,"sparseIndices","sparseToDense","int32"),i=W(t,"sparseValues","sparseToDense","string_or_numeric"),s=W(a,"defaultValue","sparseToDense",i.dtype);UQ(n,i,r,s);let o={sparseIndices:n,sparseValues:i,defaultValue:s},l={outputShape:r};return Q.runKernel(my,o,l)}var uS=J({sparseToDense_:jQ});function GQ(e,t){let r=W(t,"indices","gatherND","int32"),a={params:W(e,"x","gatherND","string_or_numeric"),indices:r};return Q.runKernel(Sd,a)}var ND=J({gatherND_:GQ});function qQ(e,t){if(t==null)return e.shape.slice();if(go(e.shape,t))return t;if(e.shape.length===t.length){let r=[];for(let a=0;a<e.shape.length;a++)t[a]==null&&e.shape[a]!=null?r.push(e.shape[a]):r.push(t[a]);return r}return t}function XQ(e,t,r,a){let n=W(e,"x","dropout");if(q(n.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${n.dtype} tensor instead.`),q(t>=0&&t<1,()=>`rate must be a float in the range [0, 1), but got ${t}.`),t===0)return e instanceof ht?n.clone():n;let i=qQ(n,r),s=1-t,o=Ve(lp(xe(cp(i,0,1,"float32",a),s)),s);return ee(n,o)}var AD=J({dropout_:XQ});function _D(e){return Math.floor(Math.pow(2,Math.ceil(Math.log(e)/Math.log(2))))}function cS(e,t,r){let a=1-e%2,n=new Float32Array(e);for(let i=0;i<e;++i){let s=2*Math.PI*i/(e+a-1);n[i]=t-r*Math.cos(s)}return Nt(n,"float32")}async function YQ(e,t,r=1){let a=W(e,"predictions","inTopK"),n=W(t,"targets","inTopK");q(a.rank>1,()=>`inTopK() expects the predictions to be of rank 2 or higher, but got ${a.rank}`),q(a.rank-1===n.rank,()=>`predictions rank should be 1 larger than targets rank, but got predictions rank ${a.rank} and targets rank ${n.rank}`),Sn(a.shape.slice(0,a.shape.length-1),n.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");let i=a.shape[a.shape.length-1];q(r>0&&r<=i,()=>`'k' passed to inTopK() must be > 0 && <= the predictions last dimension (${i}), but got ${r}`);let s=await a.data(),o=await n.data(),[l,u]=[s.length/i,i],c=HO("bool",l);for(let d=0;d<l;d++){let p=d*u,f=s.subarray(p,p+u),h=[];for(let m=0;m<f.length;m++)h.push({value:f[m],index:m});h.sort((m,g)=>g.value-m.value),c[d]=0;for(let m=0;m<r;m++)if(h[m].index===o[d]){c[d]=1;break}}return e!==a&&a.dispose(),t!==n&&n.dispose(),ka(c,n.shape,"bool")}var KQ=YQ,io={};ut(io,{conv2d:()=>JQ,depthwiseConv2d:()=>nJ,matMul:()=>iJ});function ZQ(e,t,r,a,n,i="NHWC",s){let o=e;e.rank===3&&(o=re(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let l=t;l.rank===3&&(l=re(t,[1,t.shape[0],t.shape[1],t.shape[2]])),q(o.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${o.shape}.`),q(l.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${l.shape}.`),q(r.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${r}.`);let u=i==="NHWC"?o.shape[3]:o.shape[1],c=i==="NHWC"?l.shape[3]:l.shape[1];q(u===r[2],()=>`Error in conv2dDerFilter: depth of input ${u}) must match input depth in filter (${r[2]}.`),q(c===r[3],()=>`Error in conv2dDerFilter: depth of dy (${c}) must match output depth for filter (${r[3]}).`),$n("conv2dDerFilter",n,s);let d={x:o,dy:l},p={strides:a,pad:n,dataFormat:i,dimRoundingMode:s,filterShape:r};return Q.runKernel(qb,d,p)}var dS=J({conv2DBackpropFilter_:ZQ});function jy(e,t,r){if(r==null||r==="linear")return e;if(r==="relu")return ee(e,dp(t));throw new Error(`Cannot compute gradient for fused activation ${r}.`)}function Gy(e,t){let r=t,a=Sr(e.shape,t.shape);return a.length>0&&(r=Ue(r,a)),re(r,e.shape)}function qy(e,t,r,a){if(t==="linear")return e;if(t==="relu")return At(e);if(t==="elu")return op(e);if(t==="relu6")return Py(e);if(t==="prelu")return um(e,r);if(t==="leakyrelu")return im(e,a);if(t==="sigmoid")return Da(e);throw new Error(`Unknown fused activation ${t}.`)}var Xy=(e,t)=>!(e>0)||t==="linear";function QQ({x:e,filter:t,strides:r,pad:a,dataFormat:n="NHWC",dilations:i=[1,1],dimRoundingMode:s,bias:o,activation:l="linear",preluActivationWeights:u,leakyreluAlpha:c}){if(l=l||"linear",Xy(Q.state.gradientDepth,l)===!1){q(n==="NHWC",()=>`Error in fused conv2d: got dataFormat of ${n} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let k=wn(e,t,r,a,n,i,s);return o!=null&&(k=xe(k,o)),qy(k,l,u,c)}let d=W(e,"x","conv2d","float32"),p=W(t,"filter","conv2d","float32"),f=d,h=!1;d.rank===3&&(h=!0,f=re(d,[1,d.shape[0],d.shape[1],d.shape[2]])),q(f.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${f.rank}.`),q(p.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${p.rank}.`),$n("fused conv2d",a,s);let m=n==="NHWC"?f.shape[3]:f.shape[1];q(p.shape[2]===m,()=>`Error in conv2d: depth of input (${m}) must match input depth for filter ${p.shape[2]}.`),q(Mi(r,i),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${r} and dilations '${i}'`);let g=tm(f.shape,p.shape,r,i,a,s),v;o!=null&&(v=W(o,"bias","fused conv2d"),[v]=nr(v,d),n==="NHWC"?Pt(g.outShape,v.shape):(q(v.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${v.shape.length}.`),q(v.shape.length===0||v.shape[0]===g.outChannels||v.shape[0]===1,()=>`Error in fused conv2d: bias shape (${v.shape}) is not compatible with the number of output channels (${g.outChannels})`)));let b;if(u!=null){let k=u.shape;if(q(k.length<=1||k.length===3,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${k.length}.`),k.length===1)q(k[0]===1||k[0]===g.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${k}) is not compatible with the number of output channels (${g.outChannels}).`);else if(k.length===3)try{Pt(k,g.outShape)}catch{let E=`Error in fused conv2d: PReLU activation weights (${k}) is not compatible with the output shape of the conv2d (${g.outShape}).`;throw Error(E)}b=W(u,"prelu weights","fused conv2d")}let y=(k,C)=>{q(n==="NHWC",()=>`Error in gradient of fused conv2D: got dataFormat of ${n} but only NHWC is currently supported.`);let[E,$,N,I]=C,S=jy(k,N,l);q(no(i),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${i}'`);let A=PC($.shape,S,E,r,a),R=dS($,S,E.shape,r,a),O=[A,R];if(I!=null){let D=Gy(I,S);O.push(D)}return O},w={x:f,filter:p,bias:v,preluActivationWeights:b},x={strides:r,pad:a,dataFormat:n,dilations:i,dimRoundingMode:s,activation:l,leakyreluAlpha:c};return o==null?Ii((k,C,E)=>{let $=Q.runKernel(dl,w,x);return E([C,k,$]),h&&($=re($,[$.shape[1],$.shape[2],$.shape[3]])),{value:$,gradFunc:y}})(f,p):Ii((k,C,E,$)=>{let N=Q.runKernel(dl,w,x);return $([C,k,N,E]),h&&(N=re(N,[N.shape[1],N.shape[2],N.shape[3]])),{value:N,gradFunc:y}})(f,p,v)}var JQ=J({fusedConv2d_:QQ});function eJ(e,t,r,a,n,i=[1,1],s){let o=e;e.rank===3&&(o=re(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let l=t;l.rank===3&&(l=re(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let u={x:o,dy:l},c={strides:a,pad:n,dimRoundingMode:s,dilations:i,filterShape:r};return Q.runKernel(Zb,u,c)}var MD=J({depthwiseConv2dNativeBackpropFilter_:eJ});function tJ(e,t,r,a,n,i=[1,1],s){let o=t,l=!1;t.rank===3&&(l=!0,o=re(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let u={dy:o,filter:r},c={strides:a,pad:n,dimRoundingMode:s,dilations:i,inputShape:e},d=Q.runKernel(Qb,u,c);return l?re(d,[d.shape[1],d.shape[2],d.shape[3]]):d}var RD=J({depthwiseConv2dNativeBackpropInput_:tJ});function rJ({x:e,filter:t,strides:r,pad:a,dataFormat:n="NHWC",dilations:i=[1,1],dimRoundingMode:s,bias:o,activation:l="linear",preluActivationWeights:u,leakyreluAlpha:c}){if(Xy(Q.state.gradientDepth,l)===!1){let x=Au(e,t,r,a,n,i,s);return o!=null&&(x=xe(x,o)),qy(x,l,u,c)}let d=W(e,"x","depthwiseConv2d","float32"),p=W(t,"filter","depthwiseConv2d","float32"),f=d,h=!1;d.rank===3&&(h=!0,f=re(d,[1,d.shape[0],d.shape[1],d.shape[2]])),q(f.rank===4,()=>`Error in fused depthwiseConv2d: input must be rank 4, but got rank ${f.rank}.`),q(p.rank===4,()=>`Error in fused depthwiseConv2d: filter must be rank 4, but got rank ${p.rank}.`),q(f.shape[3]===p.shape[2],()=>`Error in fused depthwiseConv2d: number of input channels (${f.shape[3]}) must match the inChannels dimension in filter ${p.shape[2]}.`),i==null&&(i=[1,1]),q(Mi(r,i),()=>`Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ${r} and dilations '${i}'`),$n("fused depthwiseConv2d",a,s);let m=tm(f.shape,p.shape,r,i,a,s,!0),g;o!=null&&(g=W(o,"bias","fused conv2d"),[g]=nr(g,d),Pt(m.outShape,g.shape));let v;u!=null&&(v=W(u,"prelu weights","fused depthwiseConv2d"));let b=(x,k)=>{q(no(i),()=>`Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '${i}'`);let[C,E,$,N]=k,I=jy(x,$,l),S=RD(E.shape,I,C,r,a,i,s),A=MD(E,I,C.shape,r,a,i,s);if(N!=null){let R=Gy(g,I);return[S,A,R]}return[S,A]},y={x:f,filter:p,bias:g,preluActivationWeights:v},w={strides:r,pad:a,dataFormat:n,dilations:i,dimRoundingMode:s,activation:l,leakyreluAlpha:c};return o==null?Ii((x,k,C)=>{let E=Q.runKernel(pl,y,w);return C([k,x,E]),h&&(E=re(E,[E.shape[1],E.shape[2],E.shape[3]])),{value:E,gradFunc:b}})(f,p):Ii((x,k,C,E)=>{let $=Q.runKernel(pl,y,w);return E([k,x,$,C]),h&&($=re($,[$.shape[1],$.shape[2],$.shape[3]])),{value:$,gradFunc:b}})(f,p,g)}var nJ=J({fusedDepthwiseConv2d_:rJ});function aJ({a:e,b:t,transposeA:r=!1,transposeB:a=!1,bias:n,activation:i="linear",preluActivationWeights:s,leakyreluAlpha:o}){if(Xy(Q.state.gradientDepth,i)===!1){let N=ft(e,t,r,a);return n!=null&&(N=xe(N,n)),qy(N,i,s,o)}let l=W(e,"a","fused matMul"),u=W(t,"b","fused matMul");[l,u]=nr(l,u);let c=r?l.shape[l.rank-2]:l.shape[l.rank-1],d=a?u.shape[u.rank-1]:u.shape[u.rank-2],p=r?l.shape[l.rank-1]:l.shape[l.rank-2],f=a?u.shape[u.rank-2]:u.shape[u.rank-1],h=l.shape.slice(0,-2),m=u.shape.slice(0,-2),g=Wt(h),v=Wt(m);q(c===d,()=>`Error in fused matMul: inner shapes (${c}) and (${d}) of Tensors with shapes ${l.shape} and ${u.shape} and transposeA=${r} and transposeB=${a} must match.`);let b=Pt(l.shape.slice(0,-2),u.shape.slice(0,-2)).concat([p,f]),y=r?re(l,[g,c,p]):re(l,[g,p,c]),w=a?re(u,[v,f,d]):re(u,[v,d,f]),x;n!=null&&(x=W(n,"bias","fused matMul"),[x]=nr(x,l),Pt(b,x.shape));let k;s!=null&&(k=W(s,"prelu weights","fused matMul"));let C=(N,I)=>{let[S,A,R,O]=I,D=jy(re(N,R.shape),R,i),z,U;if(!r&&!a?(z=ft(D,A,!1,!0),U=ft(S,D,!0,!1)):!r&&a?(z=ft(D,A,!1,!1),U=ft(D,S,!0,!1)):r&&!a?(z=ft(A,D,!1,!0),U=ft(S,D,!1,!1)):(z=ft(A,D,!0,!0),U=ft(D,S,!0,!0)),n!=null){let j=Gy(O,D);return[z,U,j]}else return[z,U]},E={a:y,b:w,bias:x,preluActivationWeights:k},$={transposeA:r,transposeB:a,activation:i,leakyreluAlpha:o};return n==null?Ii((N,I,S)=>{let A=Q.runKernel(cl,E,$);return S([N,I,A]),{value:re(A,b),gradFunc:C}})(y,w):Ii((N,I,S,A)=>{let R=Q.runKernel(cl,E,$);return A([N,I,R,S]),{value:re(R,b),gradFunc:C}})(y,w,x)}var iJ=J({fusedMatMul_:aJ});function sJ(e){return cS(e,.54,.46)}var oJ=J({hammingWindow_:sJ});function lJ(e){return cS(e,.5,.5)}var OD=J({hannWindow_:lJ});function uJ(e,t,r,a=!1,n=0){let i=0,s=[];for(;i+t<=e.size;)s.push(bt(e,i,t)),i+=r;if(a)for(;i<e.size;){let o=i+t-e.size,l=Ot([bt(e,i,t-o),Ea([o],n)]);s.push(l),i+=r}return s.length===0?ns([],[0,t]):re(Ot(s),[s.length,t])}var PD=J({frame_:uJ});function cJ(e,t,r,a,n=OD){a==null&&(a=_D(t));let i=PD(e,t,r),s=ee(i,n(t));return fm(s,a)}var dJ=J({stft_:cJ});function pJ(e,t,r,a,n="bilinear",i=0){let s=W(e,"image","cropAndResize"),o=W(t,"boxes","cropAndResize","float32"),l=W(r,"boxInd","cropAndResize","int32"),u=o.shape[0];q(s.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${s.rank}.`),q(o.rank===2&&o.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${u},4] but had shape ${o.shape}.`),q(l.rank===1&&l.shape[0]===u,()=>`Error in cropAndResize: boxInd must be have size [${u}] but had shape ${o.shape}.`),q(a.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${a.length}.`),q(a[0]>=1&&a[1]>=1,()=>`cropSize must be atleast [1,1], but was ${a}`),q(n==="bilinear"||n==="nearest",()=>`method must be bilinear or nearest, but was ${n}`);let c={image:s,boxes:o,boxInd:l},d={method:n,extrapolationValue:i,cropSize:a};return Q.runKernel(vd,c,d)}var fJ=J({cropAndResize_:pJ});function hJ(e){let t=W(e,"image","flipLeftRight","float32");q(t.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${t.rank}.`);let r={image:t};return Q.runKernel(Ed,r,{})}var mJ=J({flipLeftRight_:hJ});function gJ(e){let t=W(e,"image","grayscaleToRGB"),r=t.rank-1,a=t.shape[r];q(t.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${t.rank}.`),q(a===1,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${a}.`);let n=new Array(t.rank);return n.fill(1,0,r),n[r]=3,Jn(t,n)}var vJ=J({grayscaleToRGB_:gJ});function bJ(e,t,r=0,a=.5){let n=W(e,"image","rotateWithOffset","float32");q(n.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${n.rank}.`);let i={image:n},s={radians:t,fillValue:r,center:a};return Q.runKernel(ip,i,s)}var yJ=J({rotateWithOffset_:bJ});function pp(e,t,r,a,n,i){a==null&&(a=.5),n==null&&(n=Number.NEGATIVE_INFINITY),i==null&&(i=0);let s=e.shape[0];return r=Math.min(r,s),q(0<=a&&a<=1,()=>`iouThreshold must be in [0, 1], but was '${a}'`),q(e.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${e.rank}'`),q(e.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${e.shape[1]}`),q(t.rank===1,()=>"scores must be a 1D tensor"),q(t.shape[0]===s,()=>`scores has incompatible shape with boxes. Expected ${s}, but was ${t.shape[0]}`),q(0<=i&&i<=1,()=>`softNmsSigma must be in [0, 1], but was '${i}'`),{maxOutputSize:r,iouThreshold:a,scoreThreshold:n,softNmsSigma:i}}function wJ(e,t,r,a=.5,n=Number.NEGATIVE_INFINITY){let i=W(e,"boxes","nonMaxSuppression","float32"),s=W(t,"scores","nonMaxSuppression","float32"),o=pp(i,s,r,a,n);r=o.maxOutputSize,a=o.iouThreshold,n=o.scoreThreshold;let l={maxOutputSize:r,iouThreshold:a,scoreThreshold:n};return Q.runKernel(Fd,{boxes:i,scores:s},l)}var xJ=J({nonMaxSuppression_:wJ});function kJ(e,t,r){let a=EJ(e,t,r),n=a<0?-(a+1):a;e.splice(n,0,t)}function EJ(e,t,r){return SJ(e,t,r||CJ)}function CJ(e,t){return e>t?1:e<t?-1:0}function SJ(e,t,r){let a=0,n=e.length,i=0,s=!1;for(;a<n;){i=a+(n-a>>>1);let o=r(t,e[i]);o>0?a=i+1:(n=i,s=!o)}return s?a:-a-1}function DD(e,t,r,a,n){return pS(e,t,r,a,n,0)}function FD(e,t,r,a,n,i){return pS(e,t,r,a,n,0,!1,i,!0)}function LD(e,t,r,a,n,i){return pS(e,t,r,a,n,i,!0)}function pS(e,t,r,a,n,i,s=!1,o=!1,l=!1){let u=[];for(let g=0;g<t.length;g++)t[g]>n&&u.push({score:t[g],boxIndex:g,suppressBeginIndex:0});u.sort(jN);let c=i>0?-.5/i:0,d=[],p=[];for(;d.length<r&&u.length>0;){let g=u.pop(),{score:v,boxIndex:b,suppressBeginIndex:y}=g;if(v<n)break;let w=!1;for(let x=d.length-1;x>=y;--x){let k=$J(e,b,d[x]);if(k>=a){w=!0;break}if(g.score=g.score*IJ(a,c,k),g.score<=n)break}g.suppressBeginIndex=d.length,w||(g.score===v?(d.push(b),p.push(g.score)):g.score>n&&kJ(u,g,jN))}let f=d.length,h=r-f;o&&h>0&&(d.push(...new Array(h).fill(0)),p.push(...new Array(h).fill(0)));let m={selectedIndices:d};return s&&(m.selectedScores=p),l&&(m.validOutputs=f),m}function $J(e,t,r){let a=e.subarray(t*4,t*4+4),n=e.subarray(r*4,r*4+4),i=Math.min(a[0],a[2]),s=Math.min(a[1],a[3]),o=Math.max(a[0],a[2]),l=Math.max(a[1],a[3]),u=Math.min(n[0],n[2]),c=Math.min(n[1],n[3]),d=Math.max(n[0],n[2]),p=Math.max(n[1],n[3]),f=(o-i)*(l-s),h=(d-u)*(p-c);if(f<=0||h<=0)return 0;let m=Math.max(i,u),g=Math.max(s,c),v=Math.min(o,d),b=Math.min(l,p),y=Math.max(v-m,0)*Math.max(b-g,0);return y/(f+h-y)}function IJ(e,t,r){let a=Math.exp(t*r*r);return r<=e?a:0}function jN(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}async function TJ(e,t,r,a=.5,n=Number.NEGATIVE_INFINITY){let i=W(e,"boxes","nonMaxSuppressionAsync"),s=W(t,"scores","nonMaxSuppressionAsync"),o=pp(i,s,r,a,n);r=o.maxOutputSize,a=o.iouThreshold,n=o.scoreThreshold;let l=await Promise.all([i.data(),s.data()]),u=l[0],c=l[1],{selectedIndices:d}=DD(u,c,r,a,n);return i!==e&&i.dispose(),s!==t&&s.dispose(),Nt(d,"int32")}var NJ=TJ;function AJ(e,t,r,a=.5,n=Number.NEGATIVE_INFINITY,i=0){let s=W(e,"boxes","nonMaxSuppression"),o=W(t,"scores","nonMaxSuppression"),l=pp(s,o,r,a,n,i);r=l.maxOutputSize,a=l.iouThreshold,n=l.scoreThreshold,i=l.softNmsSigma;let u={boxes:s,scores:o},c={maxOutputSize:r,iouThreshold:a,scoreThreshold:n,softNmsSigma:i},d=Q.runKernel(zd,u,c);return{selectedIndices:d[0],selectedScores:d[1]}}var _J=J({nonMaxSuppressionWithScore_:AJ});async function MJ(e,t,r,a=.5,n=Number.NEGATIVE_INFINITY,i=0){let s=W(e,"boxes","nonMaxSuppressionAsync"),o=W(t,"scores","nonMaxSuppressionAsync"),l=pp(s,o,r,a,n,i);r=l.maxOutputSize,a=l.iouThreshold,n=l.scoreThreshold,i=l.softNmsSigma;let u=await Promise.all([s.data(),o.data()]),c=u[0],d=u[1],{selectedIndices:p,selectedScores:f}=LD(c,d,r,a,n,i);return s!==e&&s.dispose(),o!==t&&o.dispose(),{selectedIndices:Nt(p,"int32"),selectedScores:Nt(f)}}var RJ=MJ;function OJ(e,t,r,a=.5,n=Number.NEGATIVE_INFINITY,i=!1){let s=W(e,"boxes","nonMaxSuppression"),o=W(t,"scores","nonMaxSuppression"),l=pp(s,o,r,a,n,null),u=l.maxOutputSize,c=l.iouThreshold,d=l.scoreThreshold,p={boxes:s,scores:o},f={maxOutputSize:u,iouThreshold:c,scoreThreshold:d,padToMaxOutputSize:i},h=Q.runKernel(Ld,p,f);return{selectedIndices:h[0],validOutputs:h[1]}}var PJ=J({nonMaxSuppressionPadded_:OJ});async function DJ(e,t,r,a=.5,n=Number.NEGATIVE_INFINITY,i=!1){let s=W(e,"boxes","nonMaxSuppressionAsync"),o=W(t,"scores","nonMaxSuppressionAsync"),l=pp(s,o,r,a,n,null),u=l.maxOutputSize,c=l.iouThreshold,d=l.scoreThreshold,[p,f]=await Promise.all([s.data(),o.data()]),{selectedIndices:h,validOutputs:m}=FD(p,f,u,c,d,i);return s!==e&&s.dispose(),o!==t&&o.dispose(),{selectedIndices:Nt(h,"int32"),validOutputs:et(m,"int32")}}var FJ=DJ;function LJ(e,t,r=!1,a=!1){let n=W(e,"images","resizeBilinear");q(n.rank===3||n.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${n.rank}.`),q(t.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${t}.`),q(a===!1||r===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let i=n,s=!1;n.rank===3&&(s=!0,i=re(n,[1,n.shape[0],n.shape[1],n.shape[2]]));let o={images:i},l={alignCorners:r,halfPixelCenters:a,size:t},u=Q.runKernel(gu,o,l);return s?re(u,[u.shape[1],u.shape[2],u.shape[3]]):u}var zD=J({resizeBilinear_:LJ});function zJ(e,t,r=!1,a=!1){let n=W(e,"images","resizeNearestNeighbor");q(n.rank===3||n.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${n.rank}.`),q(t.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${t}.`),q(n.dtype==="float32"||n.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),q(a===!1||r===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let i=n,s=!1;n.rank===3&&(s=!0,i=re(n,[1,n.shape[0],n.shape[1],n.shape[2]]));let o={images:i},l={alignCorners:r,halfPixelCenters:a,size:t},u=Q.runKernel(Wh,o,l);return s?re(u,[u.shape[1],u.shape[2],u.shape[3]]):u}var BD=J({resizeNearestNeighbor_:zJ});function BJ(e,t="binary",r=!1,a=.5){let n=W(e,"image","threshold"),i=.2989,s=.587,o=.114,l=n.shape[0]*n.shape[1],u=ee(Nt([a]),255),c,d,p,f;if(q(n.rank===3,()=>`Error in threshold: image must be rank 3,but got rank ${n.rank}.`),q(n.shape[2]===3||n.shape[2]===1,()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${n.shape[2]}.`),q(n.dtype==="int32"||n.dtype==="float32",()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${n.dtype}.`),q(t==="otsu"||t==="binary",()=>`Method must be binary or otsu, but was ${t}`),n.shape[2]===3){[c,d,p]=Pn(n,[1,1,1],-1);let m=ee(c,i),g=ee(d,s),v=ee(p,o);f=xe(xe(m,g),v)}else f=e;if(t==="otsu"){let m=RC(Te(Dy(f),"int32"),ka([]),256);u=VJ(m,l)}let h=r?Co(f,u):Wn(f,u);return Te(ee(h,255),"int32")}function VJ(e,t){let r=Nt([-1]),a=Nt([0]),n=Nt([0]),i,s,o,l,u,c;for(let d=0;d<e.size-1;d++){i=bt(e,0,d+1),s=bt(e,d+1),u=Ve(Ue(i),t),c=Ve(Ue(s),t);let p=Ue(ee(i,Fc(0,i.size)));o=Ve(p,Ue(i));let f=Ea(s.shape,i.size),h=xe(Fc(0,s.size),f),m=ee(s,h);l=Ve(Ue(m),Ue(s));let g=Fe(o,l),v=Fe(o,l),b=ee(u,c);n=ee(ee(b,g),v);let y=Wn(n,a);a=on(y,n,a),r=on(y,Nt([d]),r)}return r}var WJ=J({threshold_:BJ});function HJ(e,t,r="nearest",a="constant",n=0,i){let s=W(e,"image","transform","float32"),o=W(t,"transforms","transform","float32");q(s.rank===4,()=>`Error in transform: image must be rank 4,but got rank ${s.rank}.`),q(o.rank===2&&(o.shape[0]===s.shape[0]||o.shape[0]===1)&&o.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),q(i==null||i.length===2,()=>`Error in transform: outputShape must be [height, width] or null, but got ${i}.`);let l={image:s,transforms:o},u={interpolation:r,fillMode:a,fillValue:n,outputShape:i};return Q.runKernel(rp,l,u)}var UJ=J({transform_:HJ});function jJ(e,t,r){q(t%1===0,()=>`bandPart(): numLower must be an integer, got ${t}.`),q(r%1===0,()=>`bandPart(): numUpper must be an integer, got ${r}.`);let a=W(e,"a","bandPart");q(a.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${a.rank}.`);let n=a.shape,[i,s]=a.shape.slice(-2);if(!(t<=i))throw new Error(`bandPart(): numLower (${t}) must not be greater than the number of rows (${i}).`);if(!(r<=s))throw new Error(`bandPart(): numUpper (${r}) must not be greater than the number of columns (${s}).`);t<0&&(t=i),r<0&&(r=s);let o=re(Fc(0,i,1,"int32"),[-1,1]),l=Fc(0,s,1,"int32"),u=Fe(o,l),c=Va(Co(u,et(+t,"int32")),Eo(u,et(-r,"int32"))),d=Jt([i,s],a.dtype);return re(Vr(hr(re(a,[-1,i,s])).map(p=>on(c,p,d))),n)}var GJ=J({bandPart_:jJ});function qJ(e){let t;if(Array.isArray(e)){t=!1,q(e!=null&&e.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");let n=e[0].shape[0];for(let i=1;i<e.length;++i)q(e[i].shape[0]===n,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${e[i].shape[0]} vs. ${n})`)}else t=!0,e=Pn(e,e.shape[0],0).map(n=>Ti(n,[0]));q(e.length<=e[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${e.length}) exceeds number of dimensions (${e[0].shape[0]}).`);let r=[],a=e;for(let n=0;n<e.length;++n)r.push(Q.tidy(()=>{let i=a[n];if(n>0)for(let s=0;s<n;++s){let o=ee(Ue(ee(r[s],i)),r[s]);i=Fe(i,o)}return Ve(i,am(i,"euclidean"))}));return t?Vr(r,0):r}var XJ=J({gramSchmidt_:qJ});function YJ(e,t=!1){if(q(e.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${e.rank}`),e.rank===2)return GN(e,t);{let r=e.shape.slice(0,e.shape.length-2).reduce((l,u)=>l*u),a=hr(re(e,[r,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),n=[],i=[];a.forEach(l=>{let[u,c]=GN(l,t);n.push(u),i.push(c)});let s=re(Vr(n,0),e.shape),o=re(Vr(i,0),e.shape);return[s,o]}}function GN(e,t=!1){return Q.tidy(()=>{q(e.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${e.shape.length}D Tensor.`);let r=e.shape[0],a=e.shape[1],n=jC(r),i=rs(e),s=ns([[1]],[1,1]),o=rs(s),l=r>=a?a:r;for(let u=0;u<l;++u){let c=i,d=o,p=n;[o,i,n]=Q.tidy(()=>{let f=bt(i,[u,u],[r-u,1]),h=am(f),m=bt(i,[u,u],[1,1]),g=on(Wn(m,0),ns([[-1]]),ns([[1]])),v=Fe(m,ee(g,h)),b=Ve(f,v);b.shape[0]===1?o=rs(s):o=Ot([s,bt(b,[1,0],[b.shape[0]-1,b.shape[1]])],0);let y=Gt(Ve(ft(g,v),h)),w=bt(i,[u,0],[r-u,a]),x=ee(y,o),k=ct(o);if(u===0)i=Fe(w,ft(x,ft(k,w)));else{let $=Fe(w,ft(x,ft(k,w)));i=Ot([bt(i,[0,0],[u,a]),$],0)}let C=ct(x),E=bt(n,[0,u],[r,n.shape[1]-u]);if(u===0)n=Fe(E,ft(ft(E,o),C));else{let $=Fe(E,ft(ft(E,o),C));n=Ot([bt(n,[0,0],[r,u]),$],1)}return[o,i,n]}),lt([c,d,p])}return!t&&r>a&&(n=bt(n,[0,0],[r,a]),i=bt(i,[0,0],[a,a])),[n,i]})}var KJ=J({qr_:YJ}),fn;(function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(fn||(fn={}));function ZJ(e,t,r=fn.SUM_BY_NONZERO_WEIGHTS){let a=W(e,"losses","computeWeightedLoss"),n=null;t!=null&&(n=W(t,"weights","computeWeightedLoss"));let i=n==null?a:ee(a,n);if(r===fn.NONE)return i;if(r===fn.SUM)return Ue(i);if(r===fn.MEAN){if(n==null)return Qt(i);{let s=a.size/n.size,o=Ve(Ue(i),Ue(n));return s>1?Ve(o,et(s)):o}}if(r===fn.SUM_BY_NONZERO_WEIGHTS){if(n==null)return Ve(Ue(i),et(a.size));{let s=ee(n,ea(a.shape)),o=Te(Ue(wl(s,et(0))),"float32");return Ve(Ue(i),o)}}throw Error(`Unknown reduction: ${r}`)}var fs=J({computeWeightedLoss_:ZJ});function QJ(e,t,r,a=fn.SUM_BY_NONZERO_WEIGHTS){let n=W(e,"labels","absoluteDifference"),i=W(t,"predictions","absoluteDifference"),s=null;r!=null&&(s=W(r,"weights","absoluteDifference")),Sn(n.shape,i.shape,"Error in absoluteDifference: ");let o=xr(Fe(n,i));return fs(o,s,a)}var JJ=J({absoluteDifference_:QJ});function eee(e,t,r,a,n=fn.SUM_BY_NONZERO_WEIGHTS){let i=W(e,"labels","cosineDistance"),s=W(t,"predictions","cosineDistance"),o=null;a!=null&&(o=W(a,"weights","cosineDistance")),Sn(i.shape,s.shape,"Error in cosineDistance: ");let l=et(1),u=Fe(l,Ue(ee(i,s),r,!0));return fs(u,o,n)}var tee=J({cosineDistance_:eee});function ree(e,t,r,a=fn.SUM_BY_NONZERO_WEIGHTS){let n=W(e,"labels","hingeLoss"),i=W(t,"predictions","hingeLoss"),s=null;r!=null&&(s=W(r,"weights","hingeLoss")),Sn(n.shape,i.shape,"Error in hingeLoss: ");let o=et(1);n=Fe(ee(et(2),n),o);let l=At(Fe(o,ee(n,i)));return fs(l,s,a)}var nee=J({hingeLoss_:ree});function aee(e,t,r,a=1,n=fn.SUM_BY_NONZERO_WEIGHTS){let i=W(e,"labels","huberLoss"),s=W(t,"predictions","huberLoss"),o=null;r!=null&&(o=W(r,"weights","huberLoss")),Sn(i.shape,s.shape,"Error in huberLoss: ");let l=et(a),u=xr(Fe(s,i)),c=up(u,l),d=Fe(u,c),p=xe(ee(et(.5),Rt(c)),ee(l,d));return fs(p,o,n)}var iee=J({huberLoss_:aee});function see(e,t,r,a=1e-7,n=fn.SUM_BY_NONZERO_WEIGHTS){let i=W(e,"labels","logLoss"),s=W(t,"predictions","logLoss"),o=null;r!=null&&(o=W(r,"weights","logLoss")),Sn(i.shape,s.shape,"Error in logLoss: ");let l=et(1),u=et(a),c=Gt(ee(i,la(xe(s,u)))),d=ee(Fe(l,i),la(xe(Fe(l,s),u))),p=Fe(c,d);return fs(p,o,n)}var oee=J({logLoss_:see});function lee(e,t,r,a=fn.SUM_BY_NONZERO_WEIGHTS){let n=W(e,"labels","meanSquaredError"),i=W(t,"predictions","meanSquaredError"),s=null;r!=null&&(s=W(r,"weights","meanSquaredError")),Sn(n.shape,i.shape,"Error in meanSquaredError: ");let o=Hy(n,i);return fs(o,s,a)}var uee=J({meanSquaredError_:lee});function cee(e,t){let r=W(e,"labels","sigmoidCrossEntropyWithLogits"),a=W(t,"logits","sigmoidCrossEntropyWithLogits");Sn(r.shape,a.shape,"Error in sigmoidCrossEntropyWithLogits: ");let n=At(a),i=ee(a,r),s=sm(xn(Gt(xr(a))));return xe(Fe(n,i),s)}function dee(e,t,r,a=0,n=fn.SUM_BY_NONZERO_WEIGHTS){let i=W(e,"multiClassLabels","sigmoidCrossEntropy"),s=W(t,"logits","sigmoidCrossEntropy"),o=null;if(r!=null&&(o=W(r,"weights","sigmoidCrossEntropy")),Sn(i.shape,s.shape,"Error in sigmoidCrossEntropy: "),a>0){let u=et(a),c=et(1),d=et(.5);i=xe(ee(i,Fe(c,u)),ee(d,u))}let l=cee(i,s);return fs(l,o,n)}var pee=J({sigmoidCrossEntropy_:dee});function fee(e,t,r=-1){if(r===-1&&(r=t.rank-1),r!==t.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${t.rank} and dim was ${r}`);return Ii((a,n,i)=>{let s=XC(n,[r],!0),o=Fe(Te(n,"float32"),s);i([a,o]);let l=Gt(ee(o,a));return{value:Ue(l,[r]),gradFunc:(u,c)=>{let[d,p]=c,f=bl(u.shape,[r]);return[ee(re(u,f),Fe(Te(d,"float32"),xn(p))),ee(re(u,f),Fe(xn(p),Te(d,"float32")))]}}})(e,t)}function hee(e,t,r,a=0,n=fn.SUM_BY_NONZERO_WEIGHTS){let i=W(e,"onehotLabels","softmaxCrossEntropy"),s=W(t,"logits","softmaxCrossEntropy"),o=null;if(r!=null&&(o=W(r,"weights","softmaxCrossEntropy")),Sn(i.shape,s.shape,"Error in softmaxCrossEntropy: "),a>0){let u=et(a),c=et(1),d=et(i.shape[1]);i=xe(ee(i,Fe(c,u)),Ve(u,d))}let l=fee(i,s);return fs(l,o,n)}var mee=J({softmaxCrossEntropy_:hee});function gee(e,t,r,a){let n=W(e,"indices","sparseFillEmptyRows","int32"),i=W(t,"values","sparseFillEmptyRows"),s=W(r,"denseShape","sparseFillEmptyRows","int32"),o=W(a,"defaultValue","sparseFillEmptyRows",i.dtype);if(n.rank!==2)throw new Error(`Indices should be Tensor2D but received shape
        ${n.shape}`);if(i.rank!==1)throw new Error(`Values should be Tensor1D but received shape ${i.shape}`);if(s.rank!==1)throw new Error(`Dense shape should be Tensor1D but received shape ${s.shape}`);if(o.rank!==0)throw new Error(`Default value should be a scalar but received shape ${o.shape}`);let l={indices:n,values:i,denseShape:s,defaultValue:o},u=Q.runKernel(Hh,l);return{outputIndices:u[0],outputValues:u[1],emptyRowIndicator:u[2],reverseIndexMap:u[3]}}var vee=J({sparseFillEmptyRows_:gee});function bee(e,t,r){let a=W(e,"inputIndices","sparseReshape","int32"),n=W(t,"inputShape","sparseReshape","int32"),i=W(r,"newShape","sparseReshape","int32");if(a.rank!==2)throw new Error(`Input indices should be Tensor2D but received shape
        ${a.shape}`);if(n.rank!==1)throw new Error(`Input shape should be Tensor1D but received shape ${n.shape}`);if(i.rank!==1)throw new Error(`New shape should be Tensor1D but received shape ${i.shape}`);let s={inputIndices:a,inputShape:n,newShape:i},o=Q.runKernel(Jd,s);return{outputIndices:o[0],outputShape:o[1]}}var yee=J({sparseReshape_:bee});function wee(e,t,r){let a=W(e,"data","sparseSegmentMean"),n=W(t,"indices","sparseSegmentMean","int32"),i=W(r,"segmentIds","sparseSegmentMean","int32");if(a.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(n.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
          ${n.shape}`);if(i.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
          ${i.shape}`);let s={data:a,indices:n,segmentIds:i};return Q.runKernel(Uh,s)}var xee=J({sparseSegmentMean_:wee});function kee(e,t,r){let a=W(e,"data","sparseSegmentSum"),n=W(t,"indices","sparseSegmentSum","int32"),i=W(r,"segmentIds","sparseSegmentSum","int32");if(a.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(n.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
         ${n.shape}`);if(i.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
         ${i.shape}`);let s={data:a,indices:n,segmentIds:i};return Q.runKernel(jh,s)}var Eee=J({sparseSegmentSum_:kee});function Cee(e,t,r,a,n,i,s,o){let l=W(e,"data","stringNGrams","string");if(l.dtype!=="string")throw new Error("Data must be of datatype string");if(l.shape.length!==1)throw new Error(`Data must be a vector, saw: ${l.shape}`);let u=W(t,"dataSplits","stringNGrams");if(u.dtype!=="int32")throw new Error("Data splits must be of datatype int32");let c={separator:r,nGramWidths:a,leftPad:n,rightPad:i,padWidth:s,preserveShortSequences:o},d={data:l,dataSplits:u},p=Q.runKernel(gy,d,c);return{nGrams:p[0],nGramsSplits:p[1]}}var See=J({stringNGrams_:Cee});function $ee(e,t,r=!0){let a=W(e,"input","stringSplit","string"),n=W(t,"delimiter","stringSplit","string");if(a.rank!==1)throw new Error(`Input should be Tensor1D but received shape ${a.shape}`);if(n.rank!==0)throw new Error(`Delimiter should be a scalar but received shape ${n.shape}`);let i={skipEmpty:r},s={input:a,delimiter:n},o=Q.runKernel(vy,s,i);return{indices:o[0],values:o[1],shape:o[2]}}var Iee=J({stringSplit_:$ee});function Tee(e,t){let r=W(e,"input","stringToHashBucketFast","string"),a={numBuckets:t};if(t<=0)throw new Error("Number of buckets must be at least 1");let n={input:r};return Q.runKernel(by,n,a)}var Nee=J({stringToHashBucketFast_:Tee}),Aee={fft:pm,ifft:Lc,rfft:fm,irfft:Wy},_ee={hammingWindow:oJ,hannWindow:OD,frame:PD,stft:dJ},ta={flipLeftRight:mJ,grayscaleToRGB:vJ,resizeNearestNeighbor:BD,resizeBilinear:zD,rotateWithOffset:yJ,cropAndResize:fJ,nonMaxSuppression:xJ,nonMaxSuppressionAsync:NJ,nonMaxSuppressionWithScore:_J,nonMaxSuppressionWithScoreAsync:RJ,nonMaxSuppressionPadded:PJ,nonMaxSuppressionPaddedAsync:FJ,threshold:WJ,transform:UJ},VD={bandPart:GJ,gramSchmidt:XJ,qr:KJ},Mee={absoluteDifference:JJ,computeWeightedLoss:fs,cosineDistance:tee,hingeLoss:nee,huberLoss:iee,logLoss:oee,meanSquaredError:uee,sigmoidCrossEntropy:pee,softmaxCrossEntropy:mee},ff={sparseFillEmptyRows:vee,sparseReshape:yee,sparseSegmentMean:xee,sparseSegmentSum:Eee},ev={stringNGrams:See,stringSplit:Iee,stringToHashBucketFast:Nee},hs=class extends WP{minimize(e,t=!1,r){let{value:a,grads:n}=this.computeGradients(e,r);if(r!=null){let i=r.map(s=>({name:s.name,tensor:n[s.name]}));this.applyGradients(i)}else this.applyGradients(n);return lt(n),t?a:(a.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,t){return gD(e,t)}dispose(){this.iterations_!=null&&lt(this.iterations_)}async saveIterations(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:et(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}};Object.defineProperty(hs,Symbol.hasInstance,{value:e=>e.minimize!=null&&e.computeGradients!=null&&e.applyGradients!=null});var Yy=class extends hs{constructor(e,t,r=null){super(),this.learningRate=e,this.rho=t,this.epsilon=r,this.accumulatedGrads=[],this.accumulatedUpdates=[],r==null&&(this.epsilon=Q.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map(t=>t.name):Object.keys(e)).forEach((t,r)=>{let a=Q.registeredVariables[t],n=!1;this.accumulatedGrads[r]==null&&(this.accumulatedGrads[r]={originalName:`${t}/accum_grad`,variable:te(()=>xt(a).variable(n))}),this.accumulatedUpdates[r]==null&&(this.accumulatedUpdates[r]={originalName:`${t}/accum_var`,variable:te(()=>xt(a).variable(n))});let i=Array.isArray(e)?e[r].tensor:e[t];if(i==null)return;let s=this.accumulatedGrads[r].variable,o=this.accumulatedUpdates[r].variable;te(()=>{let l=xe(ee(s,this.rho),ee(Rt(i),1-this.rho)),u=ee(Ve(Yr(xe(o,this.epsilon)),Yr(xe(s,this.epsilon))),i),c=xe(ee(o,this.rho),ee(Rt(u),1-this.rho));s.assign(l),o.assign(c);let d=xe(ee(u,-this.learningRate),a);a.assign(d)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(lt(this.accumulatedGrads.map(e=>e.variable)),lt(this.accumulatedUpdates.map(e=>e.variable)))}async getWeights(){let e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(e){e=await this.extractIterations(e);let t=e.length/2,r=!1;this.accumulatedGrads=e.slice(0,t).map(a=>({originalName:a.name,variable:a.tensor.variable(r)})),this.accumulatedUpdates=e.slice(t,t*2).map(a=>({originalName:a.name,variable:a.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,t){return new e(t.learningRate,t.rho,t.epsilon)}};Yy.className="Adadelta";ko(Yy);var Ky=class extends hs{constructor(e,t=.1){super(),this.learningRate=e,this.initialAccumulatorValue=t,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map(t=>t.name):Object.keys(e)).forEach((t,r)=>{let a=Q.registeredVariables[t];this.accumulatedGrads[r]==null&&(this.accumulatedGrads[r]={originalName:`${t}/accumulator`,variable:te(()=>Ea(a.shape,this.initialAccumulatorValue).variable(!1))});let n=Array.isArray(e)?e[r].tensor:e[t];if(n==null)return;let i=this.accumulatedGrads[r].variable;te(()=>{let s=xe(i,Rt(n));i.assign(s);let o=xe(ee(Ve(n,Yr(xe(s,Q.backend.epsilon()))),-this.learningRate),a);a.assign(o)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&lt(this.accumulatedGrads.map(e=>e.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);let t=!1;this.accumulatedGrads=e.map(r=>({originalName:r.name,variable:r.tensor.variable(t)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,t){return new e(t.learningRate,t.initialAccumulatorValue)}};Ky.className="Adagrad";ko(Ky);var Zy=class extends hs{constructor(e,t,r,a=null){super(),this.learningRate=e,this.beta1=t,this.beta2=r,this.epsilon=a,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],te(()=>{this.accBeta1=et(t).variable(),this.accBeta2=et(r).variable()}),a==null&&(this.epsilon=Q.backend.epsilon())}applyGradients(e){let t=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);te(()=>{let r=Fe(1,this.accBeta1),a=Fe(1,this.accBeta2);t.forEach((n,i)=>{let s=Q.registeredVariables[n],o=!1;this.accumulatedFirstMoment[i]==null&&(this.accumulatedFirstMoment[i]={originalName:`${n}/m`,variable:te(()=>xt(s).variable(o))}),this.accumulatedSecondMoment[i]==null&&(this.accumulatedSecondMoment[i]={originalName:`${n}/v`,variable:te(()=>xt(s).variable(o))});let l=Array.isArray(e)?e[i].tensor:e[n];if(l==null)return;let u=this.accumulatedFirstMoment[i].variable,c=this.accumulatedSecondMoment[i].variable,d=xe(ee(u,this.beta1),ee(l,1-this.beta1)),p=xe(ee(c,this.beta2),ee(Rt(l),1-this.beta2)),f=Ve(d,r),h=Ve(p,a);u.assign(d),c.assign(p);let m=xe(ee(Ve(f,xe(Yr(h),this.epsilon)),-this.learningRate),s);s.assign(m)}),this.accBeta1.assign(ee(this.accBeta1,this.beta1)),this.accBeta2.assign(ee(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&lt(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedSecondMoment!=null&&lt(this.accumulatedSecondMoment.map(e=>e.variable))}async getWeights(){let e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(e){e=await this.extractIterations(e),te(()=>{this.accBeta1.assign(ls(this.beta1,this.iterations_+1)),this.accBeta2.assign(ls(this.beta2,this.iterations_+1))});let t=e.length/2,r=!1;this.accumulatedFirstMoment=e.slice(0,t).map(a=>({originalName:a.name,variable:a.tensor.variable(r)})),this.accumulatedSecondMoment=e.slice(t,t*2).map(a=>({originalName:a.name,variable:a.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)}};Zy.className="Adam";ko(Zy);var Qy=class extends hs{constructor(e,t,r,a=null,n=0){super(),this.learningRate=e,this.beta1=t,this.beta2=r,this.epsilon=a,this.decay=n,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],te(()=>{this.iteration=et(0).variable(),this.accBeta1=et(t).variable()}),a==null&&(this.epsilon=Q.backend.epsilon())}applyGradients(e){let t=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);te(()=>{let r=Fe(1,this.accBeta1),a=Ve(-this.learningRate,xe(ee(this.iteration,this.decay),1));t.forEach((n,i)=>{let s=Q.registeredVariables[n],o=!1;this.accumulatedFirstMoment[i]==null&&(this.accumulatedFirstMoment[i]={originalName:`${n}/m`,variable:xt(s).variable(o)}),this.accumulatedWeightedInfNorm[i]==null&&(this.accumulatedWeightedInfNorm[i]={originalName:`${n}/v`,variable:xt(s).variable(o)});let l=Array.isArray(e)?e[i].tensor:e[n];if(l==null)return;let u=this.accumulatedFirstMoment[i].variable,c=this.accumulatedWeightedInfNorm[i].variable,d=xe(ee(u,this.beta1),ee(l,1-this.beta1)),p=ee(c,this.beta2),f=xr(l),h=Ri(p,f);u.assign(d),c.assign(h);let m=xe(ee(Ve(a,r),Ve(d,xe(h,this.epsilon))),s);s.assign(m)}),this.iteration.assign(xe(this.iteration,1)),this.accBeta1.assign(ee(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&lt(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedWeightedInfNorm!=null&&lt(this.accumulatedWeightedInfNorm.map(e=>e.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon,t.decay)}};Qy.className="Adamax";ko(Qy);var hm=class extends hs{constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){(Array.isArray(e)?e.map(t=>t.name):Object.keys(e)).forEach((t,r)=>{let a=Array.isArray(e)?e[r].tensor:e[t];if(a==null)return;let n=Q.registeredVariables[t];te(()=>{let i=xe(ee(this.c,a),n);n.assign(i)})}),this.incrementIterations()}setLearningRate(e){this.learningRate=e,this.c!=null&&this.c.dispose(),this.c=zr(et(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(e=await this.extractIterations(e),e.length!==0)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,t){return new e(t.learningRate)}};hm.className="SGD";ko(hm);var Jy=class extends hm{constructor(e,t,r=!1){super(e),this.learningRate=e,this.momentum=t,this.useNesterov=r,this.accumulations=[],this.m=et(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map(t=>t.name):Object.keys(e)).forEach((t,r)=>{let a=Q.registeredVariables[t];this.accumulations[r]==null&&(this.accumulations[r]={originalName:`${t}/momentum`,variable:te(()=>xt(a).variable(!1))});let n=this.accumulations[r].variable,i=Array.isArray(e)?e[r].tensor:e[t];i!=null&&te(()=>{let s,o=xe(ee(this.m,n),i);this.useNesterov?s=xe(ee(this.c,xe(i,ee(o,this.m))),a):s=xe(ee(this.c,o),a),n.assign(o),a.assign(s)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&lt(this.accumulations.map(e=>e.variable))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);let t=!1;this.accumulations=e.map(r=>({originalName:r.name,variable:r.tensor.variable(t)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)}};Jy.className="Momentum";ko(Jy);var e0=class extends hs{constructor(e,t=.9,r=0,a=null,n=!1){if(super(),this.learningRate=e,this.decay=t,this.momentum=r,this.epsilon=a,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=n,a==null&&(this.epsilon=Q.backend.epsilon()),e==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map(t=>t.name):Object.keys(e)).forEach((t,r)=>{let a=Q.registeredVariables[t],n=!1;this.accumulatedMeanSquares[r]==null&&(this.accumulatedMeanSquares[r]={originalName:`${t}/rms`,variable:te(()=>xt(a).variable(n))}),this.accumulatedMoments[r]==null&&(this.accumulatedMoments[r]={originalName:`${t}/momentum`,variable:te(()=>xt(a).variable(n))}),this.accumulatedMeanGrads[r]==null&&this.centered&&(this.accumulatedMeanGrads[r]={originalName:`${t}/mg`,variable:te(()=>xt(a).variable(n))});let i=Array.isArray(e)?e[r].tensor:e[t];if(i==null)return;let s=this.accumulatedMeanSquares[r].variable,o=this.accumulatedMoments[r].variable;te(()=>{let l=xe(ee(s,this.decay),ee(Rt(i),1-this.decay));if(this.centered){let u=this.accumulatedMeanGrads[r].variable,c=xe(ee(u,this.decay),ee(i,1-this.decay)),d=Ve(ee(i,this.learningRate),Yr(Fe(l,xe(Rt(c),this.epsilon)))),p=xe(ee(o,this.momentum),d);s.assign(l),u.assign(c),o.assign(p);let f=Fe(a,p);a.assign(f)}else{let u=xe(ee(s,this.decay),ee(Rt(i),1-this.decay)),c=xe(ee(o,this.momentum),Ve(ee(i,this.learningRate),Yr(xe(u,this.epsilon))));s.assign(u),o.assign(c);let d=Fe(a,c);a.assign(d)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&lt(this.accumulatedMeanSquares.map(e=>e.variable)),this.accumulatedMeanGrads!=null&&this.centered&&lt(this.accumulatedMeanGrads.map(e=>e.variable)),this.accumulatedMoments!=null&&lt(this.accumulatedMoments.map(e=>e.variable))}async getWeights(){let e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(e){e=await this.extractIterations(e);let t=this.centered?e.length/3:e.length/2,r=!1;this.accumulatedMeanSquares=e.slice(0,t).map(a=>({originalName:a.name,variable:a.tensor.variable(r)})),this.accumulatedMoments=e.slice(t,t*2).map(a=>({originalName:a.name,variable:a.tensor.variable(r)})),this.centered&&(this.accumulatedMeanGrads=e.slice(t*2,t*3).map(a=>({originalName:a.name,variable:a.tensor.variable(r)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,t){return new e(t.learningRate,t.decay,t.momentum,t.epsilon,t.centered)}};e0.className="RMSProp";ko(e0);var Es=class{static sgd(e){return new hm(e)}static momentum(e,t,r=!1){return new Jy(e,t,r)}static rmsprop(e,t=.9,r=0,a=null,n=!1){return new e0(e,t,r,a,n)}static adam(e=.001,t=.9,r=.999,a=null){return new Zy(e,t,r,a)}static adadelta(e=.001,t=.95,r=null){return new Yy(e,t,r)}static adamax(e=.002,t=.9,r=.999,a=null,n=0){return new Qy(e,t,r,a,n)}static adagrad(e,t=.1){return new Ky(e,t)}},Lo={sgd:Es.sgd,momentum:Es.momentum,adadelta:Es.adadelta,adagrad:Es.adagrad,rmsprop:Es.rmsprop,adamax:Es.adamax,adam:Es.adam},Ree=(()=>typeof requestAnimationFrame!="undefined"?requestAnimationFrame:typeof setImmediate!="undefined"?setImmediate:e=>e())();function fS(){return new Promise(e=>Ree(()=>e()))}var B={};ut(B,{ERF_A1:()=>Uee,ERF_A2:()=>jee,ERF_A3:()=>Gee,ERF_A4:()=>qee,ERF_A5:()=>Xee,ERF_P:()=>Hee,PARALLELIZE_THRESHOLD:()=>hS,SELU_SCALE:()=>HD,SELU_SCALEALPHA:()=>WD,applyActivation:()=>qy,assertAndGetBroadcastShape:()=>Pt,assertAxesAreInnerMostDims:()=>x9,assertParamsConsistent:()=>Oee,assignToTypedArray:()=>ete,axesAreInnerMostDims:()=>VC,calculateShapes:()=>MP,checkEinsumDimSizes:()=>ste,checkPadOnDimRoundingMode:()=>$n,combineLocations:()=>uD,complexWithEvenIndex:()=>Zee,complexWithOddIndex:()=>Qee,computeConv2DInfo:()=>tm,computeConv3DInfo:()=>XP,computeDefaultPad:()=>_C,computeDilation2DInfo:()=>wK,computeOptimalWindowSize:()=>Dee,computeOutAndReduceShapes:()=>cD,computeOutShape:()=>Pee,computePool2DInfo:()=>qP,computePool3DInfo:()=>xK,convertConv2DDataFormat:()=>YP,decodeEinsumEquation:()=>ate,eitherStridesOrDilationsAreOne:()=>Mi,expandShapeToKeepDim:()=>bl,exponent:()=>rte,exponents:()=>tte,fromStringArrayToUint8:()=>Ite,fromUint8ToStringArray:()=>$te,getAxesPermutation:()=>dD,getBroadcastDims:()=>NP,getComplexWithIndex:()=>Jee,getEinsumComputePath:()=>ote,getEinsumPermutation:()=>ite,getFusedBiasGradient:()=>Gy,getFusedDyActivation:()=>jy,getImageCenter:()=>Fee,getInnerMostAxes:()=>k9,getPermuted:()=>zee,getReductionAxes:()=>Sr,getReshaped:()=>Lee,getReshapedPermuted:()=>Bee,getSliceBeginCoords:()=>Vee,getSliceSize:()=>Wee,getSparseFillEmptyRowsIndicesDenseShapeMismatch:()=>dte,getSparseFillEmptyRowsNegativeIndexErrorMessage:()=>pte,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:()=>fte,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:()=>gte,getSparseReshapeInputOutputMismatchErrorMessage:()=>bte,getSparseReshapeInputOutputMultipleErrorMessage:()=>vte,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:()=>hte,getSparseReshapeNegativeOutputDimErrorMessage:()=>mte,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:()=>kte,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:()=>yte,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:()=>wte,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:()=>xte,getUndoAxesPermutation:()=>WC,isIdentityPermutation:()=>lte,log:()=>V8,mergeRealAndImagArrays:()=>Yee,prepareAndValidate:()=>_P,prepareSplitSize:()=>cte,segment_util:()=>UD,shouldFuse:()=>Xy,slice_util:()=>Mr,splitRealAndImagArrays:()=>Kee,tupleValuesAreOne:()=>no,upcastType:()=>Ca,validateInput:()=>wC,validateUpdateShape:()=>yC,warn:()=>Ns});function Oee(e,t){let r=e[0].length;e.forEach((n,i)=>{q(n.length===r,()=>`Error in concat${r}D: rank of tensors[${i}] must be the same as the rank of the rest (${r})`)}),q(t>=0&&t<r,()=>`Error in concat${r}D: axis must be between 0 and ${r-1}.`);let a=e[0];e.forEach((n,i)=>{for(let s=0;s<r;s++)q(s===t||n[s]===a[s],()=>`Error in concat${r}D: Shape of tensors[${i}] (${n}) does not match the shape of the rest (${a}) along the non-concatenated axis ${i}.`)})}function Pee(e,t){let r=e[0].slice();for(let a=1;a<e.length;a++)r[t]+=e[a][t];return r}var hS=30;function Dee(e){return e<=hS?e:Wv(e,Math.floor(Math.sqrt(e)))}function Fee(e,t,r){let a=r*(typeof e=="number"?e:e[0]),n=t*(typeof e=="number"?e:e[1]);return[a,n]}function Lee(e,t,r,a=!0){let n=[];if(a)n=n.concat(t.slice(0)),n.push(e[0]/r),n=n.concat(e.slice(1));else{n=n.concat(e[0]);let i=t.length;for(let s=0;s<i;++s)n=n.concat([e[s+1]/t[s],t[s]]);n=n.concat(e.slice(i+1))}return n}function zee(e,t,r=!0){let a=[];if(r){a.push(t);for(let n=t+1;n<e;++n)n<=2*t?(a.push(n),a.push(n-(t+1))):a.push(n)}else{let n=[],i=[];for(let s=1;s<e;++s)s>=t*2+1||s%2===1?i.push(s):n.push(s);a.push(...n),a.push(0),a.push(...i)}return a}function Bee(e,t,r,a=!0){let n=[];a?n.push(e[0]/r):n.push(e[0]*r);for(let i=1;i<e.length;++i)i<=t.length?a?n.push(t[i-1]*e[i]):n.push(e[i]/t[i-1]):n.push(e[i]);return n}function Vee(e,t){let r=[0];for(let a=0;a<t;++a)r.push(e[a][0]);return r}function Wee(e,t,r){let a=e.slice(0,1);for(let n=0;n<r;++n)a.push(e[n+1]-t[n][0]-t[n][1]);return a}var WD=1.7580993408473768,HD=1.0507009873554805,Hee=.3275911,Uee=.254829592,jee=-.284496736,Gee=1.421413741,qee=-1.453152027,Xee=1.061405429;function Yee(e,t){if(e.length!==t.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${e.length}, imag: ${t.length}.`);let r=new Float32Array(e.length*2);for(let a=0;a<r.length;a+=2)r[a]=e[a/2],r[a+1]=t[a/2];return r}function Kee(e){let t=new Float32Array(e.length/2),r=new Float32Array(e.length/2);for(let a=0;a<e.length;a+=2)t[a/2]=e[a],r[a/2]=e[a+1];return{real:t,imag:r}}function Zee(e){let t=Math.ceil(e.length/4),r=new Float32Array(t),a=new Float32Array(t);for(let n=0;n<e.length;n+=4)r[Math.floor(n/4)]=e[n],a[Math.floor(n/4)]=e[n+1];return{real:r,imag:a}}function Qee(e){let t=Math.floor(e.length/4),r=new Float32Array(t),a=new Float32Array(t);for(let n=2;n<e.length;n+=4)r[Math.floor(n/4)]=e[n],a[Math.floor(n/4)]=e[n+1];return{real:r,imag:a}}function Jee(e,t){let r=e[t*2],a=e[t*2+1];return{real:r,imag:a}}function ete(e,t,r,a){e[a*2]=t,e[a*2+1]=r}function tte(e,t){let r=new Float32Array(e/2),a=new Float32Array(e/2);for(let n=0;n<Math.ceil(e/2);n++){let i=(t?2:-2)*Math.PI*(n/e);r[n]=Math.cos(i),a[n]=Math.sin(i)}return{real:r,imag:a}}function rte(e,t,r){let a=(r?2:-2)*Math.PI*(e/t),n=Math.cos(a),i=Math.sin(a);return{real:n,imag:i}}var Ww="->",nte=/->/g,qN=",",XN="...";function ate(e,t){e=e.replace(/\s/g,"");let r=(e.length-e.replace(nte,"").length)/Ww.length;if(r<1)throw new Error("Equations without an arrow are not supported.");if(r>1)throw new Error(`Equation must contain exactly one arrow ("${Ww}").`);let[a,n]=e.split(Ww);q(a.indexOf(XN)===-1,()=>`The ellipsis notation ("${XN}") is not supported yet.`);let i=a.split(qN),s=i.length;if(t!==s)throw new Error(`Expected ${s} input tensors, received ${t}`);if(s>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");let o=[];for(let p=0;p<n.length;++p){let f=n[p];if(!i.some(h=>h.indexOf(f)!==-1))throw new Error(`Output subscripts contain the label ${f} not present in the input subscripts.`);o.indexOf(f)===-1&&o.push(f)}for(let p=0;p<a.length;++p){let f=a[p];o.indexOf(f)===-1&&f!==qN&&o.push(f)}let l=new Array(i.length);for(let p=0;p<s;++p){if(new Set(i[p].split("")).size!==i[p].length)throw new Error(`Found duplicate axes in input component ${i[p]}. Support for duplicate axes in input is not implemented yet.`);l[p]=[];for(let f=0;f<i[p].length;++f)l[p].push(o.indexOf(i[p][f]))}let u=o.length,c=n.length,d=[];for(let p=c;p<u;++p)d.push(p);return{allDims:o,summedDims:d,idDims:l}}function ite(e,t){let r=new Array(e);r.fill(-1);for(let n=0;n<t.length;++n)r[t[n]]=n;let a=[];for(let n=0;n<e;++n)r[n]===-1&&a.push(n);return r=r.filter(n=>n!==-1),{permutationIndices:r,expandDims:a}}function ste(e,t,r){let a=new Array(e);for(let n=0;n<r.length;++n){let i=r[n].shape;for(let s=0;s<t[n].length;++s)a[t[n][s]]===void 0?a[t[n][s]]=i[s]:q(a[t[n][s]]===i[s],()=>`Expected dimension ${a[t[n][s]]} at axis ${s} of input shaped ${JSON.stringify(i)}, but got dimension ${i[s]}`)}}function ote(e,t){let r=e,a=[],n=0;e.length===0&&r.push(-1),n=e.length+1;for(let s=0;s<n;++s)a.push([]);let i=[];for(let s=0;s<r.length;++s){let o=r[s],l=ute(t,o);for(let u of l)i.indexOf(u)===-1&&(a[s].push(u),i.push(u))}return{path:r,steps:a}}function lte(e){return e.every((t,r)=>t===r)}function ute(e,t){let r=[];for(let a=0;a<e.length;++a)(e[a].length===0||e[a].indexOf(t)!==-1||t===-1)&&r.push(a);return r}function cte(e,t,r=0){let a=[];if(typeof t=="number")q(e.shape[r]%t===0,()=>"Number of splits must evenly divide the axis."),a=new Array(t).fill(e.shape[r]/t);else{let n=t.reduce((s,o)=>(o===-1&&(s+=1),s),0);q(n<=1,()=>"There should be only one negative value in split array.");let i=t.indexOf(-1);if(i!==-1){let s=t.reduce((o,l)=>l>0?o+l:o);t[i]=e.shape[r]-s}q(e.shape[r]===t.reduce((s,o)=>s+o),()=>"The sum of sizes must match the size of the axis dimension."),a=t}return a}function dte(e){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${e}`}function pte(e,t){return`indices(${e}, 0) is invalid: ${t} < 0`}function fte(e,t,r){return`indices(${e}, 0) is invalid: ${t} >= ${r}`}function hte(e,t){return`only one output dimension may be -1, not both ${e} and ${t}`}function mte(e,t){return`size ${e} must be non-negative, not ${t}`}function gte(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function vte(e,t){let r=Wt(e),a=Wt(t);return`Input to reshape is a SparseTensor with ${r}
  dense values, but the requested shape requires a multiple of ${a}. inputShape=${e} outputShape= ${t}`}function bte(e,t){let r=Wt(e),a=Wt(t);return`Input to reshape is a tensor with ${r} dense values, but the requested shape has ${a}. inputShape=${e} outputShape=${t}`}function yte(){return"segment ids must be >= 0"}function wte(){return"segment ids are not increasing"}function xte(e,t){return`Segment id ${e} out of range [0, ${t}), possibly because segmentIds input is not sorted.`}function kte(e,t,r){return`Bad: indices[${e}] == ${t} out of range [0, ${r})`}var UD={};ut(UD,{collectGatherOpShapeInfo:()=>Ste,computeOutShape:()=>Cte,segOpComputeOptimalWindowSize:()=>Ete});function Ete(e,t){let r=!1,a;for(e<=hS?(a=e,r=!0):a=Wv(e,Math.floor(Math.sqrt(e)));!r;)a>t||a===e?r=!0:a=Wv(e,a+1);return a}function Cte(e,t,r){let a=[],n=e.length;for(let i=0;i<n;i++)i!==t?a.push(e[i]):a.push(r);return a}function Ste(e,t,r,a){let n=t.shape.length,i=e.shape.length;if(a!==0&&(a<-n||a>n))throw new Error(`Expect batchDims in the range of [-${n}, ${n}], but got ${a}`);if(a<0&&(a+=n),a>i)throw new Error(`batchDims (${a}) must be less than rank(x) (
    ${i}).`);if(r<a)throw new Error(`batchDims (${a}) must be less than or equal to axis (${r}).`);for(let d=0;d<a;++d)if(e.shape[d]!==t.shape[d])throw new Error(`x.shape[${d}]: ${e.shape[d]} should be equal to indices.shape[${d}]: ${t.shape[d]}.`);let s=e.shape[r],o=[],l=1,u=1,c=1;for(let d=0;d<a;++d)o.push(e.shape[d]),l*=e.shape[d];for(let d=a;d<r;d++)o.push(e.shape[d]),u*=e.shape[d];for(let d=a;d<n;d++)o.push(t.shape[d]);for(let d=r+1;d<i;d++)o.push(e.shape[d]),c*=e.shape[d];return{batchSize:l,sliceSize:c,outerSize:u,dimSize:s,outputShape:o}}function $te(e){try{return e.map(t=>Xv(t))}catch(t){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${t}`)}}function Ite(e){return e.map(t=>Kh(t))}var Oi={};ut(Oi,{nonMaxSuppressionV3Impl:()=>DD,nonMaxSuppressionV4Impl:()=>FD,nonMaxSuppressionV5Impl:()=>LD,whereImpl:()=>ID});var jD={kernelName:ad,inputsToSave:["x"],gradFunc:(e,t)=>{let[r]=t;return{x:()=>ee(e,dp(Te(r,"float32"),-1))}}},Tte={kernelName:id,inputsToSave:["x"],gradFunc:(e,t)=>{let[r]=t;return{x:()=>{let a=Rt(Te(r,"float32")),n=Yr(Fe(et(1),a));return Gt(Ve(e,n))}}}},Nte={kernelName:sd,inputsToSave:["x"],gradFunc:(e,t)=>{let[r]=t;return{x:()=>{let a=Yr(Fe(Rt(Te(r,"float32")),1));return Ve(e,a)}}}},Ate={kernelName:vo,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[r,a]=t,n=Pt(r.shape,a.shape);return{a:()=>{let i=e,s=Sr(r.shape,n);return s.length>0&&(i=Ue(i,s)),re(i,r.shape)},b:()=>{let i=e,s=Sr(a.shape,n);return s.length>0&&(i=Ue(i,s)),re(i,a.shape)}}}},_te={kernelName:Ol,saveAllInputs:!0,gradFunc:(e,t)=>{let r={};return t.forEach((a,n)=>{r[n]=()=>e.clone()}),r}},Mte={kernelName:Pl,inputsToSave:["x"],gradFunc:(e,t)=>{let[r]=t;return{x:()=>xt(r)}}},Rte={kernelName:_h,inputsToSave:["x"],gradFunc:(e,t)=>{let[r]=t;return{x:()=>xt(r)}}},Ote={kernelName:ud,inputsToSave:["x"],gradFunc:(e,t)=>{let[r]=t;return{x:()=>Ve(e,Yr(Fe(et(1),Rt(Te(r,"float32")))))}}},Pte={kernelName:cd,inputsToSave:["x"],gradFunc:(e,t)=>{let[r]=t;return{x:()=>{let a=Yr(xe(et(1),Rt(Te(r,"float32"))));return Ve(e,a)}}}},Dte={kernelName:fd,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[r,a]=t,n=Pt(r.shape,a.shape);return{a:()=>{let i=xe(Rt(r),Rt(a)),s=ee(e,Ve(a,i)),o=Sr(r.shape,n);return o.length>0&&(s=Ue(s,o)),re(s,r.shape)},b:()=>{let i=xe(Rt(r),Rt(a)),s=Gt(ee(e,Ve(r,i))),o=Sr(a.shape,n);return o.length>0&&(s=Ue(s,o)),re(s,a.shape)}}}},Fte={kernelName:dd,inputsToSave:["x"],gradFunc:(e,t)=>{let[r]=t;return{x:()=>Ve(e,xe(Rt(Te(r,"float32")),1))}}},Lte={kernelName:pd,inputsToSave:["x"],gradFunc:(e,t)=>{let[r]=t;return{x:()=>Ve(e,Fe(et(1),Rt(Te(r,"float32"))))}}};function zte(e,t,r,a,n,i){let s=W(e,"dy","avgPool3dGrad"),o=W(t,"input","avgPool3dGrad"),l=s,u=o,c=!1;o.rank===4&&(c=!0,l=re(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]]),u=re(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),q(l.rank===5,()=>`Error in avgPool3dGrad: dy must be rank 5 but got rank ${l.rank}.`),q(u.rank===5,()=>`Error in avgPool3dGrad: input must be rank 5 but got rank ${u.rank}.`),$n("avgPool3dGrad",n,i);let d={dy:l,input:u},p={filterSize:r,strides:a,pad:n,dimRoundingMode:i},f=Q.runKernel(Hb,d,p);return c?re(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}var Bte=J({avgPool3dGrad_:zte}),Vte={kernelName:Mh,inputsToSave:["x"],gradFunc:(e,t,r)=>{let[a]=t,{filterSize:n,strides:i,pad:s,dimRoundingMode:o}=r;return{x:()=>Bte(e,a,n,i,s,o)}}};function Wte(e,t,r,a,n){let i=W(e,"dy","avgPoolGrad"),s=W(t,"input","avgPoolGrad");q(s.rank===i.rank,()=>`Rank of input (${s.rank}) does not match rank of dy (${i.rank})`);let o=s,l=i,u=!1;s.rank===3&&(u=!0,o=re(s,[1,s.shape[0],s.shape[1],s.shape[2]]),l=re(i,[1,i.shape[0],i.shape[1],i.shape[2]])),q(l.rank===4,()=>`Error in avgPoolGrad: dy must be rank 4 but got rank ${l.rank}.`),q(o.rank===4,()=>`Error in avgPoolGrad: input must be rank 4 but got rank ${o.rank}.`);let c={dy:l,input:o},d={filterSize:r,strides:a,pad:n},p=Q.runKernel(Wb,c,d);return u?re(p,[p.shape[1],p.shape[2],p.shape[3]]):p}var Hte=J({avgPoolGrad_:Wte}),Ute={kernelName:Dl,inputsToSave:["x"],gradFunc:(e,t,r)=>{let[a]=t,{filterSize:n,strides:i,pad:s}=r;return{x:()=>Hte(e,a,n,i,s)}}},jte={kernelName:Fl,inputsToSave:["a","b"],gradFunc:(e,t,r)=>{let[a,n]=t,{transposeA:i,transposeB:s}=r;return!i&&!s?{a:()=>ft(e,n,!1,!0),b:()=>ft(a,e,!0,!1)}:!i&&s?{a:()=>ft(e,n,!1,!1),b:()=>ft(e,a,!0,!1)}:i&&!s?{a:()=>ft(n,e,!1,!0),b:()=>ft(a,e,!1,!1)}:{a:()=>ft(n,e,!0,!0),b:()=>ft(e,a,!0,!0)}}},Gte={kernelName:hd,gradFunc:(e,t,r)=>{let{blockShape:a,crops:n}=r;return{x:()=>lm(e,a,n)}}},qte={kernelName:JO,gradFunc:(e,t,r)=>{let a=r,n=a.inputShape,i=a.shape,s=Array.from(i);for(let l=n.length-1;l>=0;l--)if(n[l]===i[l])s[l]=1;else if(n[l]!==1)throw new Error(`broadcastTo(): [${n}] cannot be broadcast to [${i}].`);let o=[];for(let l=0;l<s.length;l++)s[l]>1&&o.push(l);return{x:()=>Ue(e,o,!0)}}},Xte={kernelName:Ll,gradFunc:e=>({x:()=>e.clone()})},Yte={kernelName:zl,gradFunc:e=>({x:()=>xt(e)})},Kte={kernelName:bo,inputsToSave:["x"],gradFunc:(e,t,r)=>{let[a]=t,{clipValueMin:n,clipValueMax:i}=r;return{x:()=>on(Va(Eo(a,n),Co(a,i)),e,xt(e))}}},Zte={kernelName:Rh,inputsToSave:["x"],gradFunc:jD.gradFunc},Qte={kernelName:md,saveAllInputs:!0,gradFunc:(e,t,r)=>{let a=t.map(o=>o.shape),{axis:n}=r,i=Ua(n,t[0].shape)[0],s=a.map(o=>o[i]);return Pn(e,s,i).map(o=>()=>o)}},Jte={kernelName:Bl,inputsToSave:["x","filter"],gradFunc:(e,t,r)=>{let[a,n]=t,{dilations:i,strides:s,pad:o,dataFormat:l}=r;return q(no(i),()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${i}'`),{x:()=>PC(a.shape,e,n,s,o,l),filter:()=>dS(a,e,n.shape,s,o,l)}}},ere={kernelName:Vl,inputsToSave:["dy","filter"],gradFunc:(e,t,r)=>{let[a,n]=t,{strides:i,pad:s,dataFormat:o,dimRoundingMode:l}=r;return{dy:()=>wn(e,n,i,s,o,1,l),filter:()=>dS(e,a,n.shape,i,s,o,l)}}};function tre(e,t,r,a,n){let i=e;e.rank===4&&(i=re(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]));let s=t;s.rank===4&&(s=re(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]])),q(i.rank===5,()=>`Error in conv3dDerFilter: input must be rank 5, but got shape ${i.shape}.`),q(s.rank===5,()=>`Error in conv3dDerFilter: dy must be rank 5, but got shape ${s.shape}.`),q(r.length===5,()=>`Error in conv3dDerFilter: filterShape must be length 5, but got ${r}.`),q(i.shape[4]===r[3],()=>`Error in conv3dDerFilter: depth of input ${i.shape[4]}) must match input depth in filter (${r[3]}.`),q(s.shape[4]===r[4],()=>`Error in conv3dDerFilter: depth of dy (${s.shape[4]}) must match output depth for filter (${r[4]}).`);let o={x:i,dy:s},l={strides:a,pad:n,filterShape:r};return Q.runKernel(Xb,o,l)}var rre=J({conv3DBackpropFilter_:tre}),nre={kernelName:Oh,inputsToSave:["x","filter"],gradFunc:(e,t,r)=>{let{dilations:a,strides:n,pad:i}=r;q(no(a),()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${a}'`);let[s,o]=t;return{x:()=>aD(s.shape,e,o,n,i),filter:()=>rre(s,e,o.shape,n,i)}}},are={kernelName:Wl,inputsToSave:["x"],gradFunc:(e,t)=>{let[r]=t;return{x:()=>ee(Gt(zy(Te(r,"float32"))),e)}}},ire={kernelName:Hl,inputsToSave:["x"],gradFunc:(e,t)=>{let[r]=t;return{x:()=>ee(By(Te(r,"float32")),e)}}},sre={kernelName:Ul,inputsToSave:["x"],gradFunc:(e,t,r)=>{let[a]=t,{axis:n,exclusive:i,reverse:s}=r;return{x:()=>{let o=dD([n],a.rank),l=Ty(e,n,i,!s);return o!=null&&(l=ct(l,o)),l}}}},ore={kernelName:jl,inputsToSave:["x","filter"],gradFunc:(e,t,r)=>{let{dilations:a,strides:n,pad:i,dimRoundingMode:s}=r,o=a==null?[1,1]:a;q(no(o),()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${o}'`);let[l,u]=t;return q(l.rank===4,()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${l.rank}.`),q(u.rank===4,()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${u.rank}.`),q(l.shape[3]===u.shape[2],()=>`Error in gradient of depthwiseConv2d: number of input channels (${l.shape[3]}) must match the inChannels dimension in filter ${u.shape[2]}.`),q(Mi(n,o),()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${n} and dilations '${o}'.`),$n("depthwiseConv2d",i,s),{x:()=>RD(l.shape,e,u,n,i,o,s),filter:()=>MD(l,e,u.shape,n,i,o,s)}}},lre={kernelName:Ph,inputsToSave:["x","filter"],gradFunc:(e,t,r)=>{let[a,n]=t,i={x:a,filter:n,dy:e},s={x:a,filter:n,dy:e};return{x:()=>Q.runKernel(Hv,i,r),filter:()=>Q.runKernel(Uv,s,r)}}},ure={kernelName:ql,outputsToSave:[!0],gradFunc:(e,t)=>{let[r]=t,a={dy:e,y:r};return{x:()=>Q.runKernel(ty,a)}}},cre={kernelName:yd,inputsToSave:["x"],gradFunc:(e,t)=>{let[r]=t,a=ee(xn(Gt(Rt(r))),2/Math.sqrt(Math.PI));return{x:()=>ee(e,a)}}},dre={kernelName:Xl,outputsToSave:[!0],gradFunc:(e,t)=>{let[r]=t;return{x:()=>ee(e,r)}}},pre={kernelName:xd,inputsToSave:["input"],gradFunc:(e,t)=>{let[r]=t;return{input:()=>re(e,r.shape)}}},fre={kernelName:kd,inputsToSave:["x"],gradFunc:(e,t)=>{let[r]=t;return{x:()=>ee(e,xn(r))}}},hre={kernelName:Yl,gradFunc:e=>({x:()=>xt(e)})},mre={kernelName:Kl,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[r,a]=t,n=Pt(r.shape,a.shape);return{a:()=>{let i=Ve(e,Te(a,"float32")),s=Sr(r.shape,n);return s.length>0?re(Ue(i,s),r.shape):i},b:()=>{let i=ee(e,Te(r,"float32")),s=Sr(a.shape,n);s.length>0&&(i=re(Ue(i,s),a.shape));let o=Rt(a);return Gt(Ve(i,Te(o,"float32")))}}}},gre={kernelName:Zl,inputsToSave:["x","mean","variance","scale"],gradFunc:(e,t,r)=>{let{varianceEpsilon:a}=r,[n,i,s,o]=t,l=o==null?et(1):o,u=Sr(i.shape,n.shape),c=[];if(i.rank===1){for(let m=0;m<n.shape.length-1;++m)c.push(n.shape[m]);c.push(1)}let d=Fe(n,i),p=ee(e,l),f=Fy(xe(s,et(a))),h=ee(ee(ee(f,f),f),et(-.5));return{x:()=>i.rank===1?re(ee(ee(e,Jn(re(f,[1,1,1,i.shape[0]]),c)),l),n.shape):re(ee(ee(e,f),l),n.shape),mean:()=>{let m=ee(ee(f,et(-1)),p);return i.rank===1&&(m=Ue(m,u)),re(m,i.shape)},variance:()=>{let m=ee(ee(h,d),p);return i.rank===1&&(m=Ue(m,u)),re(m,i.shape)},scale:()=>{let m=ee(d,f),g=ee(e,m);return i.rank===1&&(g=Ue(g,u)),re(g,i.shape)},offset:()=>{let m=e;return i.rank===1&&(m=Ue(m,u)),re(m,i.shape)}}}},vre={kernelName:Cd,inputsToSave:["x","indices"],gradFunc:(e,t,r)=>{let[a,n]=t,{axis:i}=r,s=Ua(i,a.shape)[0];return{x:()=>{let o=a.shape,l=n.size,u=o.slice(0,s),c=u.length,d=o.slice(i,o.length).slice(1),p=d.length,f=YN(0,c),h=YN(c+1,c+1+p),m=KN([u,[l],d]),g=re(e,m),v=re(n,[l]),b=KN([[c],f,h]),y=ct(g,b),w=oS(y,v,a.shape[s]),x=WC(b);return w=ct(w,x),w},indices:()=>n}}};function YN(e,t){let r=[];for(let a=e;a<t;++a)r.push(a);return r}function KN(e){let t=[];for(let r=0;r<e.length;++r)for(let a=0;a<e[r].length;++a)t.push(e[r][a]);return t}var bre={kernelName:Ql,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[r,a]=t;return{a:()=>xt(r),b:()=>xt(a)}}},yre={kernelName:Jl,gradFunc:e=>({x:()=>Te(e,"float32")})},wre={kernelName:Id,gradFunc:e=>({x:()=>xt(e)})},xre={kernelName:Td,gradFunc:e=>({x:()=>xt(e)})},kre={kernelName:Nd,gradFunc:e=>({x:()=>xt(e)})},Ere={kernelName:eu,inputsToSave:["x"],gradFunc:(e,t,r)=>{let[a]=t,{alpha:n}=r,i=Wn(a,0);return{x:()=>on(i,e,ee(e,n))}}},Cre={kernelName:Md,inputsToSave:["x"],gradFunc:(e,t)=>{let[r]=t;return{x:()=>Ve(e,xe(r,1))}}},Sre={kernelName:tu,inputsToSave:["x"],gradFunc:(e,t)=>{let[r]=t;return{x:()=>Ve(e,Te(r,"float32"))}}},$re={kernelName:eP,inputsToSave:[],outputsToSave:[!0],gradFunc:(e,t,r)=>{let[a]=t,{axis:n}=r;return{logits:()=>{let i=xn(a);return Fe(e,ee(Ue(e,n,!0),i))}}}};function Ire(e,t,r,a=5,n=1,i=1,s=.5){let o={x:e,y:t,dy:r},l={depthRadius:a,bias:n,alpha:i,beta:s};return Q.runKernel(sy,o,l)}var Tre=J({localResponseNormalizationBackprop_:Ire}),Nre={kernelName:zh,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,r)=>{let[a,n]=t,{depthRadius:i,bias:s,alpha:o,beta:l}=r;return{x:()=>Tre(a,n,e,i,s,o,l)}}};function GD(e,t,r,a){return t.rank<r.rank&&(t=re(t,bl(t.shape,a))),e.rank<r.rank&&(e=re(e,bl(e.shape,a))),{x:()=>ee(e,Te(oa(r,t),e.dtype))}}var ZN={kernelName:ru,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,r)=>{let a=r,{reductionIndices:n}=a,i=t[0],s=t[1],o=Ua(n,i.shape),l=GD(e,s,i,o);return{x:()=>l.x()}}},Are={kernelName:nu,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[r,a]=t;return{a:()=>ee(e,Te(Eo(r,a),"float32")),b:()=>ee(e,Te(Ny(r,a),"float32"))}}};function _re(e,t,r,a,n,i,s){let o=W(e,"dy","maxPool3dGrad"),l=W(t,"input","maxPool3dGrad"),u=W(r,"output","maxPool3dGrad"),c=o,d=l,p=u,f=!1;l.rank===4&&(f=!0,c=re(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]]),d=re(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]]),p=re(u,[1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]])),q(c.rank===5,()=>`Error in maxPool3dGrad: dy must be rank 5 but got rank ${c.rank}.`),q(d.rank===5,()=>`Error in maxPool3dGrad: input must be rank 5 but got rank ${d.rank}.`),q(p.rank===5,()=>`Error in maxPool3dGrad: output must be rank 5 but got rank ${p.rank}.`),$n("maxPool3dGrad",i,s);let h={dy:c,input:d,output:p},m={filterSize:a,strides:n,pad:i,dimRoundingMode:s},g=Q.runKernel(ly,h,m);return f?re(g,[g.shape[1],g.shape[2],g.shape[3],g.shape[4]]):g}var Mre=J({maxPool3dGrad_:_re}),Rre={kernelName:Bh,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,r)=>{let[a,n]=t,{filterSize:i,strides:s,pad:o,dimRoundingMode:l}=r;return{x:()=>Mre(e,a,n,i,s,o,l)}}};function Ore(e,t,r,a,n,i,s){let o=W(e,"dy","maxPoolGrad"),l=W(t,"input","maxPoolGrad"),u=W(r,"output","maxPoolGrad");q(l.rank===o.rank,()=>`Rank of input (${l.rank}) does not match rank of dy (${o.rank})`),q(o.rank===4,()=>`Error in maxPoolGrad: dy must be rank 4 but got rank ${o.rank}.`),q(l.rank===4,()=>`Error in maxPoolGrad: input must be rank 4 but got rank ${l.rank}.`),$n("maxPoolGrad",i,s);let c={dy:o,input:l,output:u},d={filterSize:a,strides:n,pad:i,dimRoundingMode:s};return Q.runKernel(oy,c,d)}var Pre=J({maxPoolGrad_:Ore}),Dre={kernelName:au,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,r)=>{let[a,n]=t,{filterSize:i,strides:s,pad:o}=r;return{x:()=>Pre(e,a,n,i,s,o)}}},Fre={kernelName:iu,inputsToSave:["x"],gradFunc:(e,t,r)=>{let[a]=t,{axis:n}=r,i=Ua(n,a.shape),s=cD(a.shape,i)[1],o=Wt(s);return{x:()=>{let l=a.shape.slice();i.forEach(c=>{l[c]=1});let u=re(e,l);return Ve(ee(u,ea(a.shape,"float32")),o)}}}},Lre={kernelName:su,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,r)=>{let a=r,{axis:n}=a,[i,s]=t,o=Ua(n,i.shape),l=GD(e,s,i,o);return{x:()=>l.x()}}},zre={kernelName:ou,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[r,a]=t;return{a:()=>ee(e,Te(Co(r,a),"float32")),b:()=>ee(e,Te(Wn(r,a),"float32"))}}},Bre={kernelName:lu,inputsToSave:["x"],gradFunc:(e,t,r)=>{let a=t[0],{paddings:n}=r,i=n.map(s=>s[0]);return{x:()=>bt(e,i,a.shape)}}},Vre={kernelName:Od,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[r,a]=t,n=Pt(r.shape,a.shape);return{a:()=>{let i=Sr(r.shape,n);return i.length>0?re(Ue(e,i),r.shape):e},b:()=>{let i=ee(e,Gt(lp(Ve(r,a)))),s=Sr(a.shape,n);return s.length>0?re(Ue(i,s),a.shape):i}}}},Wre={kernelName:uu,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[r,a]=t,n=Pt(r.shape,a.shape);return{a:()=>{let i=ee(e,Te(a,"float32")),s=Sr(r.shape,n);return s.length>0?re(Ue(i,s),r.shape):i},b:()=>{let i=ee(e,Te(r,"float32")),s=Sr(a.shape,n);return s.length>0?re(Ue(i,s),a.shape):i}}}},Hre={kernelName:Pd,gradFunc:e=>({x:()=>Gt(e)})},Ure={kernelName:cu,inputsToSave:["indices"],gradFunc:(e,t)=>{let r=t[0];return{indices:()=>Jt(r.shape,"float32")}}},jre={kernelName:Bd,gradFunc:e=>({x:()=>xt(e)})},Gre={kernelName:Vd,saveAllInputs:!0,gradFunc:(e,t,r)=>{let{axis:a}=r;return hr(e,a).map(n=>()=>n)}},QN={kernelName:du,inputsToSave:["x"],gradFunc:(e,t,r)=>{let a=t[0],{paddings:n}=r,i=n.map(s=>s[0]);return{x:()=>bt(e,i,a.shape)}}},qre={kernelName:pu,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(e,t)=>{let[r,a,n]=t,i=r,s=a,o=Pt(i.shape,s.shape);return{a:()=>{let l=Te(s,"float32"),u=ee(e,ee(l,ls(i,Fe(l,et(1))))),c=Sr(i.shape,o);return c.length>0&&(u=Ue(u,c)),re(u,i.shape)},b:()=>{let l=Wn(i,0),u=on(l,la(i),xt(i)),c=ee(e,ee(n,u)),d=Sr(s.shape,o);return d.length>0&&(c=Ue(c,d)),re(c,s.shape)}}}},Xre={kernelName:fu,inputsToSave:["x","alpha"],gradFunc:(e,t)=>{let[r,a]=t,n=Wn(r,0);return{x:()=>on(n,e,ee(e,a)),alpha:()=>{let i=on(n,xt(e),ee(e,r)),s=Sr(a.shape,e.shape);return s.length>0&&(i=Ue(i,s)),re(i,a.shape)}}}};function Yre(e,t,r){let a=e.shape.slice();a[r]=1;let n=re(t,a),i=uh(e,r,!0,!1),s=uh(e,r,!0,!0),o=ee(i,s);return ee(n,o)}function Kre(e,t,r){let a=e.shape.length,n=a-r.length,i=B.getAxesPermutation(r,a),s=e;i!=null&&(s=ct(e,i));let o=s.shape.slice(),l=o.splice(a-r.length,r.length).reduce((d,p)=>d*p,1);o.push(l);let u=s.reshape(o),c=Yre(u,t,n);if(c=c.reshape(s.shape),i!=null){let d=B.getUndoAxesPermutation(i);c=ct(c,d)}return c}var Zre={kernelName:hu,inputsToSave:["x"],gradFunc:(e,t,r)=>{let[a]=t,{axis:n}=r,i=[];return n==null?i=a.shape.map((s,o)=>o):typeof n=="number"?i=[n]:i=n,{x:()=>Kre(a,e,i)}}},Qre={kernelName:Gl,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[r,a]=t,n=Pt(r.shape,a.shape);return{a:()=>{let i=Ve(e,Te(a,"float32")),s=Sr(r.shape,n);return s.length>0?re(Ue(i,s),r.shape):i},b:()=>{let i=ee(e,Te(r,"float32")),s=Sr(a.shape,n);s.length>0&&(i=re(Ue(i,s),a.shape));let o=Rt(a);return Gt(Ve(i,Te(o,"float32")))}}}},Jre={kernelName:Wd,inputsToSave:["x"],gradFunc:(e,t)=>{let[r]=t;return{x:()=>Ve(e,Gt(Rt(r)))}}},ene={kernelName:vu,inputsToSave:["x"],gradFunc:(e,t)=>{let[r]=t,a=ee(Co(r,6),dp(r));return{x:()=>ee(e,Te(a,"float32"))}}},tne={kernelName:mu,inputsToSave:["x"],gradFunc:(e,t)=>{let[r]=t;return{x:()=>ee(e,Te(dp(r),"float32"))}}},rne={kernelName:Hd,inputsToSave:["x"],gradFunc:(e,t)=>{let[r]=t;return{x:()=>re(e,r.shape)}}},nne={kernelName:gu,inputsToSave:["images"],gradFunc:(e,t,r)=>{let[a]=t,n={dy:e,images:a};return{images:()=>Q.runKernel(fy,n,r)}}},ane={kernelName:Wh,inputsToSave:["images"],gradFunc:(e,t,r)=>{let[a]=t,n={dy:e,images:a};return{images:()=>Q.runKernel(py,n,r)}}},ine={kernelName:bu,gradFunc:(e,t,r)=>{let{dims:a}=r,n=Ua(a,e.shape);return{x:()=>ca(e,n)}}},sne={kernelName:yu,gradFunc:e=>({x:()=>xt(e)})},one={kernelName:wu,inputsToSave:["x"],gradFunc:(e,t)=>{let[r]=t;return{x:()=>Gt(Ve(e,ee(ls(r,1.5),2)))}}},lne={kernelName:jd,inputsToSave:["condition"],gradFunc:(e,t)=>{let[r]=t;return{condition:()=>Te(xt(r),"float32"),t:()=>ee(e,Te(r,e.dtype)),e:()=>ee(e,Te(om(r),e.dtype))}}},une={kernelName:Gd,inputsToSave:["x"],gradFunc:(e,t)=>{let[r]=t;return{x:()=>{let a=Wn(r,et(0)),n=et(WD),i=et(HD),s=ee(e,i),o=ee(ee(e,n),xn(Te(r,"float32")));return on(a,s,o)}}}},cne={kernelName:ku,outputsToSave:[!0],gradFunc:(e,t)=>{let[r]=t;return{x:()=>ee(e,ee(r,Fe(et(1),r)))}}},dne={kernelName:Yd,gradFunc:e=>({x:()=>xt(e)})},pne={kernelName:xu,inputsToSave:["x"],gradFunc:(e,t)=>{let[r]=t;return{x:()=>ee(nm(Te(r,"float32")),e)}}},fne={kernelName:Xd,inputsToSave:["x"],gradFunc:(e,t)=>{let[r]=t;return{x:()=>ee(Iy(Te(r,"float32")),e)}}},hne={kernelName:qd,inputsToSave:["x"],gradFunc:(e,t,r)=>{let[a]=t,{begin:n,size:i}=r,s=a.shape,[o,l]=VP(a,n,i),u=[];for(let c=0;c<e.rank;c++)u.push([o[c],s[c]-o[c]-l[c]]);return{x:()=>ui(e,u)}}},mne={kernelName:Su,outputsToSave:[!0],gradFunc:(e,t,r)=>{let[a]=t,{dim:n}=r,i=!0,s=ee(e,a);return{logits:()=>Fe(s,ee(Ue(s,[n],i),a))}}},gne={kernelName:Kd,inputsToSave:["x"],gradFunc:(e,t)=>{let[r]=t;return{x:()=>ee(e,Da(r))}}},JN={kernelName:Zd,gradFunc:(e,t,r)=>{let{blockShape:a,paddings:n}=r;return{x:()=>rm(e,a,n)}}},eA={kernelName:Qd,gradFunc:(e,t,r)=>{let{axis:a}=r;return{x:()=>Ot(e,a)}}},vne={kernelName:Eu,inputsToSave:["x"],gradFunc:(e,t)=>{let[r]=t;return{x:()=>Ve(e,ee(Yr(Te(r,"float32")),2))}}},bne={kernelName:Gh,inputsToSave:["x"],gradFunc:(e,t)=>{let[r]=t;return{x:()=>ee(e,ee(Te(r,"float32"),2))}}},yne={kernelName:$u,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[r,a]=t,n=et(2);return{a:()=>ee(e,ee(n,Fe(r,a))),b:()=>ee(e,ee(n,Fe(a,r)))}}},wne={kernelName:wo,gradFunc:e=>({x:()=>xt(e)})},xne={kernelName:Iu,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[r,a]=t,n=Pt(r.shape,a.shape);return{a:()=>{let i=e,s=Sr(r.shape,n);return s.length>0&&(i=Ue(i,s)),re(i,r.shape)},b:()=>{let i=e,s=Sr(a.shape,n);return s.length>0&&(i=Ue(i,s)),re(Gt(i),a.shape)}}}},kne={kernelName:Cu,inputsToSave:["x"],gradFunc:(e,t,r)=>{let[a]=t,n=a.shape.slice(),{axis:i}=r;Ua(i,a.shape).forEach(l=>{n[l]=1});let s=re(e,n),o=ee(s,ea(a.shape,"float32"));return{x:()=>o}}},Ene={kernelName:Tu,inputsToSave:["x"],gradFunc:(e,t)=>{let[r]=t;return{x:()=>Ve(e,Rt(nm(r)))}}},Cne={kernelName:Nu,outputsToSave:[!0],gradFunc:(e,t)=>{let[r]=t;return{x:()=>ee(Fe(et(1),Rt(r)),e)}}},Sne={kernelName:yo,inputsToSave:["x"],gradFunc:(e,t,r)=>{let[a]=t,{reps:n}=r;return{x:()=>{let i=xt(a);if(a.rank===1)for(let s=0;s<n[0];++s)i=xe(i,bt(e,[s*a.shape[0]],[a.shape[0]]));else if(a.rank===2)for(let s=0;s<n[0];++s)for(let o=0;o<n[1];++o)i=xe(i,bt(e,[s*a.shape[0],o*a.shape[1]],[a.shape[0],a.shape[1]]));else if(a.rank===3)for(let s=0;s<n[0];++s)for(let o=0;o<n[1];++o)for(let l=0;l<n[2];++l)i=xe(i,bt(e,[s*a.shape[0],o*a.shape[1],l*a.shape[2]],[a.shape[0],a.shape[1],a.shape[2]]));else if(a.rank===4)for(let s=0;s<n[0];++s)for(let o=0;o<n[1];++o)for(let l=0;l<n[2];++l)for(let u=0;u<n[3];++u)i=xe(i,bt(e,[s*a.shape[0],o*a.shape[1],l*a.shape[2],u*a.shape[3]],[a.shape[0],a.shape[1],a.shape[2],a.shape[3]]));else throw new Error(`Gradient for tile operation is not implemented for rank-${a.rank} tensors yet.`);return i}}}},$ne={kernelName:ts,gradFunc:(e,t,r)=>{let a=r,{perm:n}=a,i=WC(n);return{x:()=>ct(e,i)}}},Ine={kernelName:np,gradFunc:(e,t,r)=>{let a=r,{axis:n}=a;return{value:()=>Vr(e,n)}}},Tne={kernelName:qh,inputsToSave:["segmentIds"],gradFunc:(e,t)=>{let[r]=t;return{x:()=>Nne(e,r)}}};function Nne(e,t){let r=Ri(t,xt(t)),a=yl(e,r),n=Eo(t,et(0,"int32")),i=a.rank-n.rank;for(let o=0;o<i;++o)n=pn(n,o+1);n=Va(n,ea(a.shape,"bool"));let s=xt(a);return on(n,a,s)}var Ane={kernelName:ap,gradFunc:e=>({x:()=>xt(e)})},_ne=[jD,Tte,Nte,Ate,_te,Mte,Rte,Ote,Pte,Dte,Fte,Lte,Vte,Ute,jte,Gte,qte,Xte,Yte,Kte,Zte,Qte,ere,Jte,nre,are,ire,sre,ore,lre,Qre,ure,cre,dre,pre,fre,mre,hre,gre,vre,bre,yre,wre,xre,kre,Ere,Cre,Sre,$re,Nre,ZN,ZN,Are,Rre,Dre,Fre,Lre,zre,Bre,Vre,Wre,Hre,Ure,jre,Gre,QN,QN,qre,Xre,Zre,Jre,ene,tne,rne,nne,ane,ine,sne,one,lne,une,cne,dne,pne,fne,hne,mne,gne,JN,JN,eA,eA,vne,yne,bne,wne,xne,kne,Ene,Cne,Sne,$ne,Ine,Tne,Ane];for(let e of _ne)tP(e);we().prototype.abs=function(){return this.throwIfDisposed(),xr(this)};we().prototype.acos=function(){return this.throwIfDisposed(),EC(this)};we().prototype.acosh=function(){return this.throwIfDisposed(),CC(this)};we().prototype.add=function(e){return this.throwIfDisposed(),xe(this,e)};we().prototype.all=function(e,t){return this.throwIfDisposed(),Cy(this,e,t)};we().prototype.any=function(e,t){return this.throwIfDisposed(),lh(this,e,t)};we().prototype.argMax=function(e){return this.throwIfDisposed(),gl(this,e)};we().prototype.argMin=function(e){return this.throwIfDisposed(),SC(this,e)};we().prototype.asScalar=function(){return this.throwIfDisposed(),q(this.size===1,()=>"The array must have only 1 element."),re(this,[])};we().prototype.asType=function(e){return this.throwIfDisposed(),Te(this,e)};we().prototype.as1D=function(){return this.throwIfDisposed(),re(this,[this.size])};we().prototype.as2D=function(e,t){return this.throwIfDisposed(),re(this,[e,t])};we().prototype.as3D=function(e,t,r){return this.throwIfDisposed(),re(this,[e,t,r])};we().prototype.as4D=function(e,t,r,a){return this.throwIfDisposed(),re(this,[e,t,r,a])};we().prototype.as5D=function(e,t,r,a,n){return this.throwIfDisposed(),re(this,[e,t,r,a,n])};we().prototype.asin=function(){return this.throwIfDisposed(),$C(this)};we().prototype.asinh=function(){return this.throwIfDisposed(),IC(this)};we().prototype.atan=function(){return this.throwIfDisposed(),TC(this)};we().prototype.atan2=function(e){return this.throwIfDisposed(),NC(this,e)};we().prototype.atanh=function(){return this.throwIfDisposed(),AC(this)};we().prototype.avgPool=function(e,t,r,a){return this.throwIfDisposed(),ps(this,e,t,r,a)};we().prototype.batchToSpaceND=function(e,t){return this.throwIfDisposed(),rm(this,e,t)};we().prototype.batchNorm=function(e,t,r,a,n){return this.throwIfDisposed(),ao(this,e,t,r,a,n)};we().prototype.broadcastTo=function(e){return this.throwIfDisposed(),Sc(this,e)};we().prototype.cast=function(e){return this.throwIfDisposed(),Te(this,e)};we().prototype.ceil=function(){return this.throwIfDisposed(),OC(this)};we().prototype.clipByValue=function(e,t){return this.throwIfDisposed(),sn(this,e,t)};we().prototype.concat=function(e,t){return this.throwIfDisposed(),e instanceof ht&&(e=[e]),Ot([this,...e],t)};we().prototype.conv1d=function(e,t,r,a,n,i){return this.throwIfDisposed(),Sy(this,e,t,r,a,n,i)};we().prototype.conv2dTranspose=function(e,t,r,a,n){return this.throwIfDisposed(),$y(this,e,t,r,a,n)};we().prototype.conv2d=function(e,t,r,a,n,i){return this.throwIfDisposed(),wn(this,e,t,r,a,n,i)};we().prototype.cos=function(){return this.throwIfDisposed(),nm(this)};we().prototype.cosh=function(){return this.throwIfDisposed(),Iy(this)};we().prototype.cumprod=function(e,t,r){return this.throwIfDisposed(),uh(this,e,t,r)};we().prototype.cumsum=function(e,t,r){return this.throwIfDisposed(),Ty(this,e,t,r)};we().prototype.depthToSpace=function(e,t){return this.throwIfDisposed(),FC(this,e,t)};we().prototype.depthwiseConv2d=function(e,t,r,a,n,i){return this.throwIfDisposed(),Au(this,e,t,r,a,n,i)};we().prototype.dilation2d=function(e,t,r,a,n){return this.throwIfDisposed(),LC(this,e,t,r,a,n)};we().prototype.divNoNan=function(e){return this.throwIfDisposed(),zC(this,e)};we().prototype.div=function(e){return this.throwIfDisposed(),Ve(this,e)};we().prototype.dot=function(e){return this.throwIfDisposed(),oD(this,e)};we().prototype.elu=function(){return this.throwIfDisposed(),op(this)};we().prototype.equal=function(e){return this.throwIfDisposed(),oa(this,e)};we().prototype.erf=function(){return this.throwIfDisposed(),BC(this)};we().prototype.euclideanNorm=function(e,t){return this.throwIfDisposed(),HC(this,e,t)};we().prototype.exp=function(){return this.throwIfDisposed(),xn(this)};we().prototype.expandDims=function(e){return this.throwIfDisposed(),pn(this,e)};we().prototype.expm1=function(){return this.throwIfDisposed(),UC(this)};we().prototype.fft=function(){return this.throwIfDisposed(),pm(this)};we().prototype.flatten=function(){return this.throwIfDisposed(),re(this,[this.size])};we().prototype.floor=function(){return this.throwIfDisposed(),lp(this)};we().prototype.floorDiv=function(e){return this.throwIfDisposed(),Ey(this,e)};we().prototype.gather=function(e,t){return this.throwIfDisposed(),yl(this,e,t)};we().prototype.greaterEqual=function(e){return this.throwIfDisposed(),Eo(this,e)};we().prototype.greater=function(e){return this.throwIfDisposed(),Wn(this,e)};we().prototype.ifft=function(){return this.throwIfDisposed(),Lc(this)};we().prototype.irfft=function(){return this.throwIfDisposed(),Wy(this)};we().prototype.isFinite=function(){return this.throwIfDisposed(),fD(this)};we().prototype.isInf=function(){return this.throwIfDisposed(),hD(this)};we().prototype.isNaN=function(){return this.throwIfDisposed(),GC(this)};we().prototype.leakyRelu=function(e){return this.throwIfDisposed(),im(this,e)};we().prototype.lessEqual=function(e){return this.throwIfDisposed(),Co(this,e)};we().prototype.less=function(e){return this.throwIfDisposed(),Ny(this,e)};we().prototype.localResponseNormalization=function(e,t,r,a){return this.throwIfDisposed(),qC(this,e,t,r,a)};we().prototype.logSigmoid=function(){return this.throwIfDisposed(),vD(this)};we().prototype.logSoftmax=function(e){return this.throwIfDisposed(),_y(this,e)};we().prototype.logSumExp=function(e,t){return this.throwIfDisposed(),XC(this,e,t)};we().prototype.log=function(){return this.throwIfDisposed(),la(this)};we().prototype.log1p=function(){return this.throwIfDisposed(),sm(this)};we().prototype.logicalAnd=function(e){return this.throwIfDisposed(),Va(this,e)};we().prototype.logicalNot=function(){return this.throwIfDisposed(),om(this)};we().prototype.logicalOr=function(e){return this.throwIfDisposed(),My(this,e)};we().prototype.logicalXor=function(e){return this.throwIfDisposed(),bD(this,e)};we().prototype.matMul=function(e,t,r){return this.throwIfDisposed(),ft(this,e,t,r)};we().prototype.maxPool=function(e,t,r,a){return this.throwIfDisposed(),Dr(this,e,t,r,a)};we().prototype.max=function(e,t){return this.throwIfDisposed(),Fa(this,e,t)};we().prototype.maximum=function(e){return this.throwIfDisposed(),Ri(this,e)};we().prototype.mean=function(e,t){return this.throwIfDisposed(),Qt(this,e,t)};we().prototype.min=function(e,t){return this.throwIfDisposed(),ch(this,e,t)};we().prototype.minimum=function(e){return this.throwIfDisposed(),up(this,e)};we().prototype.mirrorPad=function(e,t){return this.throwIfDisposed(),ZC(this,e,t)};we().prototype.mod=function(e){return this.throwIfDisposed(),QC(this,e)};we().prototype.mul=function(e){return this.throwIfDisposed(),ee(this,e)};we().prototype.neg=function(){return this.throwIfDisposed(),Gt(this)};we().prototype.norm=function(e,t,r){return this.throwIfDisposed(),am(this,e,t,r)};we().prototype.notEqual=function(e){return this.throwIfDisposed(),wl(this,e)};we().prototype.oneHot=function(e,t=1,r=0){return this.throwIfDisposed(),Pc(this,e,t,r)};we().prototype.onesLike=function(){return this.throwIfDisposed(),ua(this)};we().prototype.pad=function(e,t){return this.throwIfDisposed(),ui(this,e,t)};we().prototype.pool=function(e,t,r,a,n,i){return this.throwIfDisposed(),kD(this,e,t,r,a,n,i)};we().prototype.pow=function(e){return this.throwIfDisposed(),ls(this,e)};we().prototype.prelu=function(e){return this.throwIfDisposed(),um(this,e)};we().prototype.prod=function(e,t){return this.throwIfDisposed(),Oy(this,e,t)};we().prototype.reciprocal=function(){return this.throwIfDisposed(),tS(this)};we().prototype.relu=function(){return this.throwIfDisposed(),At(this)};we().prototype.relu6=function(){return this.throwIfDisposed(),Py(this)};we().prototype.reshapeAs=function(e){return this.throwIfDisposed(),re(this,e.shape)};we().prototype.reshape=function(e){return this.throwIfDisposed(),re(this,e)};we().prototype.resizeBilinear=function(e,t,r){return this.throwIfDisposed(),zD(this,e,t,r)};we().prototype.resizeNearestNeighbor=function(e,t,r){return this.throwIfDisposed(),BD(this,e,t,r)};we().prototype.reverse=function(e){return this.throwIfDisposed(),ca(this,e)};we().prototype.rfft=function(){return this.throwIfDisposed(),fm(this)};we().prototype.round=function(){return this.throwIfDisposed(),Dy(this)};we().prototype.rsqrt=function(){return this.throwIfDisposed(),Fy(this)};we().prototype.selu=function(){return this.throwIfDisposed(),Ly(this)};we().prototype.separableConv2d=function(e,t,r,a,n,i){return this.throwIfDisposed(),cm(this,e,t,r,a,n,i)};we().prototype.sigmoid=function(){return this.throwIfDisposed(),Da(this)};we().prototype.sign=function(){return this.throwIfDisposed(),rS(this)};we().prototype.sin=function(){return this.throwIfDisposed(),zy(this)};we().prototype.sinh=function(){return this.throwIfDisposed(),By(this)};we().prototype.slice=function(e,t){return this.throwIfDisposed(),bt(this,e,t)};we().prototype.softmax=function(e){return this.throwIfDisposed(),So(this,e)};we().prototype.softplus=function(){return this.throwIfDisposed(),_u(this)};we().prototype.spaceToBatchND=function(e,t){return this.throwIfDisposed(),lm(this,e,t)};we().prototype.split=function(e,t){return this.throwIfDisposed(),Pn(this,e,t)};we().prototype.sqrt=function(){return this.throwIfDisposed(),Yr(this)};we().prototype.square=function(){return this.throwIfDisposed(),Rt(this)};we().prototype.squaredDifference=function(e){return this.throwIfDisposed(),Hy(this,e)};we().prototype.squeeze=function(e){return this.throwIfDisposed(),Ti(this,e)};we().prototype.stack=function(e,t){this.throwIfDisposed();let r=e instanceof ht?[this,e]:[this,...e];return Vr(r,t)};we().prototype.step=function(e){return this.throwIfDisposed(),dp(this,e)};we().prototype.stridedSlice=function(e,t,r,a,n,i,s,o){return this.throwIfDisposed(),aS(this,e,t,r,a,n,i,s,o)};we().prototype.sub=function(e){return this.throwIfDisposed(),Fe(this,e)};we().prototype.sum=function(e,t){return this.throwIfDisposed(),Ue(this,e,t)};we().prototype.tan=function(){return this.throwIfDisposed(),iS(this)};we().prototype.tanh=function(){return this.throwIfDisposed(),vl(this)};we().prototype.tile=function(e){return this.throwIfDisposed(),Jn(this,e)};we().prototype.toBool=function(){return this.throwIfDisposed(),Te(this,"bool")};we().prototype.toFloat=function(){return this.throwIfDisposed(),Te(this,"float32")};we().prototype.toInt=function(){return this.throwIfDisposed(),Te(this,"int32")};we().prototype.topk=function(e,t){return this.throwIfDisposed(),sS(this,e,t)};we().prototype.transpose=function(e){return this.throwIfDisposed(),ct(this,e)};we().prototype.unique=function(e){return this.throwIfDisposed(),Qv(this,e)};we().prototype.unsortedSegmentSum=function(e,t){return this.throwIfDisposed(),oS(this,e,t)};we().prototype.unstack=function(e){return this.throwIfDisposed(),hr(this,e)};we().prototype.where=function(e,t){return this.throwIfDisposed(),on(e,this,t)};we().prototype.zerosLike=function(){return this.throwIfDisposed(),xt(this)};var Hi=class extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Hi.prototype)}},ei=class extends Error{constructor(e){super(e),Object.setPrototypeOf(this,ei.prototype)}},ae=class extends Error{constructor(e){super(e),Object.setPrototypeOf(this,ae.prototype)}},dt=class extends Error{constructor(e){super(e),Object.setPrototypeOf(this,dt.prototype)}},qD=class extends Error{constructor(e){super(e),Object.setPrototypeOf(this,qD.prototype)}},XD=class{constructor(e){this.maxEntries=e||100,this.cache=new Map}get(e){let t;return this.cache.has(e)&&(t=this.cache.get(e),this.cache.delete(e),this.cache.set(e,t)),t}put(e,t){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxEntries){let r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(e,t)}getMaxEntries(){return this.maxEntries}setMaxEntries(e){if(e<0)throw new Error(`The maxEntries of LRU caches must be at least 0, but got ${e}.`);if(this.maxEntries>e)for(let t=0;t<this.maxEntries-e;t++){let r=this.cache.keys().next().value;this.cache.delete(r)}this.maxEntries=e}};function kl(e,t){if(Array.isArray(e)){let r=[];for(let a=0;a<t;a++)r=r.concat(e);return r}else{let r=new Array(t);return r.fill(e),r}}function vi(e,t){if(!e)throw new qD(t)}function tA(e,t){let r=0;for(let a of e)a===t&&r++;return r}function Rn(e){return e.length===1?e[0]:e}function jt(e){return Array.isArray(e)?e:[e]}function Ui(e){let t=e.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return t[0]!=="_"?t:"private"+t}function Vo(e){return e.length<=1||e.indexOf("_")===-1?e:e.replace(/[_]+(\w|$)/g,(t,r)=>r.toUpperCase())}var Ia={};function mS(e){if(e==null)return null;let t={};return t.className=e.getClassName(),t.config=e.getConfig(),t}function fk(e){if(!(e==null||typeof e!="object"))if(Array.isArray(e))e.forEach(t=>fk(t));else{let t=Object.keys(e);for(let r of t){let a=e[r];a!=null&&typeof a=="object"&&(!Array.isArray(a)&&a.type==="ndarray"&&typeof a.value=="number"?e[r]=a.value:fk(a))}}}function mm(e,t={},r={},a="object",n=!1){if(typeof e=="string"){let i=e,s;if(i in r)s=r[i];else if(i in Ia)s=Ia[i];else if(s=t[i],s==null)throw new ae(`Unknown ${a}: ${e}. This may be due to one of the following reasons:
1. The ${a} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${a} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);return s}else{let i=e;if(i.className==null||i.config==null)throw new ae(`${a}: Improper config format: ${JSON.stringify(i)}.
'className' and 'config' must set.`);let s=i.className,o,l;if(s in r?[o,l]=r[s]:s in Ia?[o,l]=Ia.className:s in t&&([o,l]=t[s]),o==null)throw new ae(`Unknown ${a}: ${s}. This may be due to one of the following reasons:
1. The ${a} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${a} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);if(l!=null){let u={};for(let f of Object.keys(Ia))u[f]=Ia[f];for(let f of Object.keys(r))u[f]=r[f];let c=i.config;c.customObjects=u;let d=Object.assign({},Ia);for(let f of Object.keys(r))Ia[f]=r[f];fk(i.config);let p=l(o,i.config,r,n);return Ia=Object.assign({},d),p}else{let u=Object.assign({},Ia);for(let d of Object.keys(r))Ia[d]=r[d];let c=new o(i.config);return Ia=Object.assign({},u),c}}}function Mne(e,t){return e<t?-1:e>t?1:0}function Cg(e,t){return-1*Mne(e,t)}function Xs(e){if(e==null)return e;let t=[];for(let r of e)t.indexOf(r)===-1&&t.push(r);return t}function Rne(e){if(e==null)throw new ae(`Invalid value in obj: ${JSON.stringify(e)}`);for(let t in e)if(e.hasOwnProperty(t))return!1;return!0}function Mu(e,t,r){if(r!=null&&e.indexOf(r)<0)throw new ae(`${r} is not a valid ${t}.  Valid values are ${e} or null/undefined.`)}function gS(e,t,r=0,a=1/0){return vi(r>=0),vi(a>=r),Array.isArray(e)&&e.length>=r&&e.length<=a&&e.every(n=>typeof n===t)}function Br(e,t){Array.isArray(e)?(_.assert(e.length>0,()=>`${t} is unexpectedly an empty array.`),e.forEach((r,a)=>Br(r,`element ${a+1} of ${t}`))):_.assert(Number.isInteger(e)&&e>0,()=>`Expected ${t} to be a positive integer, but got ${YD(e)}.`)}function YD(e){return e===null?"null":Array.isArray(e)?"["+e.map(t=>YD(t)).join(",")+"]":typeof e=="string"?`"${e}"`:`${e}`}function One(e,t,r){let a=r!=null?r():_.now(),n;return(...i)=>{let s=r!=null?r():_.now();return s-a<t||(a=s,n=e(...i)),n}}function KD(e){return e==="relu"?"relu":e==="linear"?"linear":e==="elu"?"elu":null}var Pne=0;function ZD(){return Pne++}var Sg={};function t0(e=""){return e in Sg||(Sg[e]=0),Sg[e]+=1,e+Sg[e].toString()}var Dne=["channelsFirst","channelsLast"],Fne=["nearest","bilinear"],Lne=["valid","same","causal"],zne=["max","avg"],Bne=["sum","mul","concat","ave"],Uu=new Map;function gr(e){Mu(Dne,"DataFormat",e)}function Vne(e){Mu(Fne,"InterpolationFormat",e)}function $a(e){Mu(Lne,"PaddingMode",e)}function QD(e){Mu(zne,"PoolMode",e)}var Ff=[],rA="/";function rl(e,t){Ff.push(e);try{let r=t();return Ff.pop(),r}catch(r){throw Ff.pop(),r}}function Wne(){return Ff.length===0?"":Ff.join(rA)+rA}function JD(e){if(!tF(e))throw new Error("Not a valid tensor name: '"+e+"'");return Wne()+e}function eF(e){if(!tF(e))throw new Error("Not a valid tensor name: '"+e+"'");Uu.has(e)||Uu.set(e,0);let t=Uu.get(e);if(Uu.set(e,Uu.get(e)+1),t>0){let r=`${e}_${t}`;return Uu.set(r,1),r}else return e}var Hne=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function tF(e){return!!e.match(Hne)}function Une(e){return e===parseInt(e.toString(),10)}function Ys(e,t,r){t==null&&(t=0),r==null&&(r=e.length);let a=1;for(let n=t;n<r;++n)a*=e[n];return a}function zc(e){if(e.length===0)return Number.NaN;let t=Number.POSITIVE_INFINITY;for(let r=0;r<e.length;r++){let a=e[r];a<t&&(t=a)}return t}function so(e){if(e.length===0)return Number.NaN;let t=Number.NEGATIVE_INFINITY;for(let r=0;r<e.length;r++){let a=e[r];a>t&&(t=a)}return t}function si(e,t){if(t<e)throw new ae(`end (${t}) < begin (${e}) is forbidden.`);let r=[];for(let a=e;a<t;++a)r.push(a);return r}var Hw;function Ar(){return Hw==null&&(Hw=TP().epsilon()),Hw}function oi(){return"channelsLast"}function r0(e,t){return Te(e,t)}function gm(e,t=-1){let r=e.shape.slice();return t<0&&(t=r.length+t+1),r.splice(t,0,1),re(e,r)}function jne(e,t){return te(()=>{if(e.shape.length!==2)throw new ae(`repeat() expects a rank-2 tensor, but received a rank-${e.shape.length} tensor.`);let r=gm(e,1);return hk(r,[1,t,1])})}function Gne(e){let t=[Ys(e.shape)];return re(e,t)}function qne(e){if(e.rank<=1)throw new ae(`batchFlatten requires a minimum rank of 2. Got rank: ${e.rank}.`);let t=[e.shape[0],Ys(e.shape,1)];return re(e,t)}function nl(e,t,r){return te(()=>{switch(e.rank){case 1:return Vy(e,t,r);case 2:return nS(e,[t,0],[r,e.shape[1]]);case 3:return dm(e,[t,0,0],[r,e.shape[1],e.shape[2]]);case 4:return dh(e,[t,0,0,0],[r,e.shape[1],e.shape[2],e.shape[3]]);case 5:return bt(e,[t,0,0,0,0],[r,e.shape[1],e.shape[2],e.shape[3],e.shape[4]]);case 6:return bt(e,[t,0,0,0,0,0],[r,e.shape[1],e.shape[2],e.shape[3],e.shape[4],e.shape[5]]);default:throw new ae(`sliceAlongFirstAxis() received an unsupported tensor rank: ${e.rank}`)}})}function Uw(e,t,r){return te(()=>{switch(e.rank){case 1:return Vy(e,t,r);case 2:return nS(e,[0,t],[e.shape[0],r]);case 3:return dm(e,[0,0,t],[e.shape[0],e.shape[1],r]);case 4:return dh(e,[0,0,0,t],[e.shape[0],e.shape[1],e.shape[2],r]);default:throw new ae(`sliceAlongLastAxis() received an unsupported tensor rank: ${e.rank}`)}})}function $g(e,t,r,a){return te(()=>{switch(e.rank){case 1:return Vy(e,t,r);case 2:switch(a){case 1:return nl(e,t,r);case 2:return Uw(e,t,r);default:throw new ae(`The axis is not within the rank of the tensor ${a}`)}case 3:switch(a){case 1:return nl(e,t,r);case 2:return dm(e,[0,t,0],[e.shape[0],r,e.shape[2]]);case 3:return Uw(e,t,r);default:throw new ae(`The axis is not within the rank of the tensor ${a}`)}case 4:switch(a){case 1:return nl(e,t,r);case 2:return dh(e,[0,t,0,0],[e.shape[0],r,e.shape[2],e.shape[3]]);case 3:return dh(e,[0,0,t,0],[e.shape[0],e.shape[1],r,e.shape[3]]);case 4:return Uw(e,t,r);default:throw new ae(`The axis is not within the rank of the tensor ${a}`)}default:throw new ae(`sliceAlongLastAxis() received an unsupported tensor rank: ${e.rank}`)}})}function vS(e,t=-1){let r;return t<0&&(r=e[0].rank,r!==0?t=r:t=0),t===e[0].rank&&(t=-1),Ot(e,t)}function nA(e,t){switch(e.rank){case 1:return eD([e,t]);case 2:return tD([e,t],0);case 3:return rD([e,t],0);case 4:return nD([e,t],0);default:throw new ae(`concatAlongFirstAxis() received an unsupported tensor rank: ${e.rank}`)}}function hk(e,t){if(Array.isArray(t)||(t=[t]),e.rank!==t.length)throw new ae(`The length of input n (${t.length}) does not match the number of dimensions in input x (${e.rank})`);return Jn(e,t)}function n0(e,t=0,r=1,a,n){return ED(e,t,r,a,n)}function Si(e,t,r,a){if(e.rank<2||t.rank<2)throw new dt(`dot requires both inputs to be rank >= 2 but got x shape = ${e.shape} and y shape = ${t.shape}`);if(t.rank>=3){let n=e.shape.slice(-1)[0],i=t.shape.slice(-2)[0];if(n!==i)throw new dt(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${e.shape} and  y shape = ${t.shape}`)}if(e.rank===2&&t.rank===2)return io.matMul({a:e,b:t,transposeA:!1,transposeB:!1,bias:a?mk(e.rank,a,oi()):null,activation:r});{let n=e.shape.slice(),i=n.pop();e=re(e,[-1,i]);let s=t.shape.slice(),o=s.pop(),l=s.pop(),u=[...s,o],c=Array.from({length:t.rank},(h,m)=>m===0?t.rank-2:m<=t.rank-2?m-1:m);t=re(ct(t,c),[l,-1]);let d=[...n,...u],p=!1,f=!1;return re(io.matMul({a:e,b:t,transposeA:p,transposeB:f,bias:a?mk(e.rank,a,oi()):null,activation:r}),d)}}function rF(e,t,r){return te(()=>(Array.isArray(t)?t=Nt(t,"int32"):t=Te(t,"int32"),yl(e,t,r)))}function vm(e){return ee(e,e)}function mk(e,t,r){let a=t.shape;if(t.rank!==1&&t.rank!==e)throw new ae(`Unexpected bias dimensions: ${t.rank}; expected it to be 1 or ${e}`);if(e===5){if(r==="channelsFirst")return a.length===1?re(t,[1,a[0],1,1,1]):re(t,[1,a[3],a[0],a[1],a[2]]);if(r==="channelsLast")return a.length===1?re(t,[1,1,1,1,a[0]]):re(t,[1].concat(a))}else if(e===4){if(r==="channelsFirst")return a.length===1?re(t,[1,a[0],1,1]):re(t,[1,a[2],a[0],a[1]]);if(r==="channelsLast")return a.length===1?re(t,[1,1,1,a[0]]):re(t,[1].concat(a))}else if(e===3){if(r==="channelsFirst")return a.length===1?re(t,[1,a[0],1]):re(t,[1,a[1],a[0]]);if(r==="channelsLast")return a.length===1?re(t,[1,1,a[0]]):re(t,[1].concat(a))}else if(e<3)return t;throw new ae(`Unsupported input rank by biasAdd: ${t.rank}`)}function ci(e,t,r){return te(()=>(r==null&&(r=oi()),gr(r),xe(e,mk(e.rank,t,r))))}function Xne(e,t=1){if(t!==1)throw new dt(`Support for alpha values other than 1 (${t}) is not implemented yet.`);return op(e)}function Yne(e){return te(()=>Ve(e,xe(xr(e),1)))}function nF(e,t,r,a){return te(()=>AD(e,t,r,a))}function Kne(e){return te(()=>{let t=xe(.5,ee(.2,e));return sn(t,0,1)})}function bm(e,t,r=!1){return r?e():t()}var Zne=["fanIn","fanOut","fanAvg"],Qne=["normal","uniform","truncatedNormal"];function Jne(e){Mu(Zne,"FanMode",e)}function eae(e){Mu(Qne,"Distribution",e)}var ja=class extends Ie.Serializable{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}},bS=class extends ja{apply(e,t){return Jt(e,t)}};bS.className="Zeros";Ie.registerClass(bS);var a0=class extends ja{apply(e,t){return ea(e,t)}};a0.className="Ones";Ie.registerClass(a0);var yS=class extends ja{constructor(e){if(super(),typeof e!="object")throw new ae(`Expected argument of type ConstantConfig but got ${e}`);if(e.value===void 0)throw new ae(`config must have value set but got ${e}`);this.value=e.value}apply(e,t){return te(()=>ee(et(this.value),ea(e,t)))}getConfig(){return{value:this.value}}};yS.className="Constant";Ie.registerClass(yS);var wS=class extends ja{constructor(e){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=e.minval||this.DEFAULT_MINVAL,this.maxval=e.maxval||this.DEFAULT_MAXVAL,this.seed=e.seed}apply(e,t){return cp(e,this.minval,this.maxval,t)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}};wS.className="RandomUniform";Ie.registerClass(wS);var xS=class extends ja{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,t){if(t=t||"float32",t!=="float32"&&t!=="int32")throw new dt(`randomNormal does not support dType ${t}.`);return n0(e,this.mean,this.stddev,t,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}};xS.className="RandomNormal";Ie.registerClass(xS);var kS=class extends ja{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,t){if(t=t||"float32",t!=="float32"&&t!=="int32")throw new dt(`truncatedNormal does not support dType ${t}.`);return Uy(e,this.mean,this.stddev,t,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}};kS.className="TruncatedNormal";Ie.registerClass(kS);var ES=class extends ja{constructor(e){super(),this.gain=e.gain!=null?e.gain:1}apply(e,t){return te(()=>{if(e.length!==2||e[0]!==e[1])throw new ae("Identity matrix initializer can only be used for 2D square matrices.");return ee(this.gain,jC(e[0]))})}getConfig(){return{gain:this.gain}}};ES.className="Identity";Ie.registerClass(ES);function tae(e,t="channelsLast"){let r,a;if(gr(t),e.length===2)r=e[0],a=e[1];else if([3,4,5].indexOf(e.length)!==-1){if(t==="channelsFirst"){let n=Ys(e,2);r=e[1]*n,a=e[0]*n}else if(t==="channelsLast"){let n=Ys(e,0,e.length-2);r=e[e.length-2]*n,a=e[e.length-1]*n}}else{let n=Ys(e);r=Math.sqrt(n),a=Math.sqrt(n)}return[r,a]}var Fn=class extends ja{constructor(e){if(super(),e.scale<0)throw new ae(`scale must be a positive float. Got: ${e.scale}`);this.scale=e.scale==null?1:e.scale,this.mode=e.mode==null?"fanIn":e.mode,Jne(this.mode),this.distribution=e.distribution==null?"normal":e.distribution,eae(this.distribution),this.seed=e.seed}apply(e,t){let r=tae(e),a=r[0],n=r[1],i=this.scale;if(this.mode==="fanIn"?i/=Math.max(1,a):this.mode==="fanOut"?i/=Math.max(1,n):i/=Math.max(1,(a+n)/2),this.distribution==="normal"){let s=Math.sqrt(i);if(t=t||"float32",t!=="float32"&&t!=="int32")throw new dt(`${this.getClassName()} does not support dType ${t}.`);return Uy(e,0,s,t,this.seed)}else{let s=Math.sqrt(3*i);return cp(e,-s,s,t)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}};Fn.className="VarianceScaling";Ie.registerClass(Fn);var i0=class extends Fn{constructor(e){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return Fn.className}};i0.className="GlorotUniform";Ie.registerClass(i0);var s0=class extends Fn{constructor(e){super({scale:1,mode:"fanAvg",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return Fn.className}};s0.className="GlorotNormal";Ie.registerClass(s0);var o0=class extends Fn{constructor(e){super({scale:2,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return Fn.className}};o0.className="HeNormal";Ie.registerClass(o0);var l0=class extends Fn{constructor(e){super({scale:2,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return Fn.className}};l0.className="HeUniform";Ie.registerClass(l0);var u0=class extends Fn{constructor(e){super({scale:1,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return Fn.className}};u0.className="LeCunNormal";Ie.registerClass(u0);var c0=class extends Fn{constructor(e){super({scale:1,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return Fn.className}};c0.className="LeCunNormal";Ie.registerClass(c0);var CS=class extends ja{constructor(e){if(super(),this.DEFAULT_GAIN=1,this.gain=e.gain==null?this.DEFAULT_GAIN:e.gain,this.seed=e.seed,this.seed!=null)throw new dt("Random seed is not implemented for Orthogonal Initializer yet.")}apply(e,t){return te(()=>{if(e.length<2)throw new dt("Shape must be at least 2D.");e[0]*e[1]>2e3&&console.warn(`Orthogonal initializer is being called on a matrix with more than 2000 (${e[0]*e[1]}) elements: Slowness may result.`);let r=e[0]>e[1]?[e[1],e[0]]:e,a=n0(r,0,1,"float32"),n=VD.gramSchmidt(a);return e[0]>e[1]&&(n=ct(n)),ee(this.gain,n)})}getConfig(){return{gain:this.gain,seed:this.seed}}};CS.className="Orthogonal";Ie.registerClass(CS);var aA={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function iA(e,t={}){return mm(e,Ie.SerializationMap.getMap().classNameMap,t,"initializer")}function er(e){return mS(e)}function Kt(e){if(typeof e=="string"){let t=e in aA?aA[e]:e;if(t==="GlorotNormal")return new s0;if(t==="GlorotUniform")return new i0;if(t==="HeNormal")return new o0;if(t==="HeUniform")return new l0;if(t==="LeCunNormal")return new u0;if(t==="LeCunUniform")return new c0;{let r={};return r.className=t,r.config={},iA(r)}}else return e instanceof ja?e:iA(e)}function gk(e){return Array.isArray(e)&&Array.isArray(e[0])}function Jv(e){return e.length===0?[]:Array.isArray(e[0])?e:[e]}function mt(e){let t;if(Array.isArray(e)){if(e.length!==1)throw new ae(`Expected Tensor length to be 1; got ${e.length}`);t=e[0]}else t=e;return t}function _t(e){if(Array.isArray(e)&&Array.isArray(e[0])){if(e.length===1)return e=e,e[0];throw new ae(`Expected exactly 1 Shape; got ${e.length}`)}else return e}function eb(e){let t=0;for(let r of e)r.shape.length===0?t+=1:t+=r.shape.reduce((a,n)=>a*n);return t}var sA="Variable",aF=class{constructor(e,t="float32",r=sA,a=!0,n=null){this.dtype=t==null?"float32":t,this.shape=e.shape,this.id=ZD(),r=r==null?sA:r,this.originalName=JD(r),this.name=eF(this.originalName),this.trainable_=a,this.constraint=n,this.val=$D(e,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(e){return this.assertNotDisposed(),rae(this.val,e),this.val.id!==e.id&&(this.val.assign(e),this.constraint!=null&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(e){this.trainable_=e,this.val.trainable=e}};function rae(e,t){if(e.shape.toString()!==t.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(e.shape)+" vs. "+JSON.stringify(t.shape))}function vk(e){return e.map(t=>t.read())}function SS(e){e.forEach(t=>{t[0].write(t[1])})}var kr=class{constructor(e){this.dtype=e.dtype,this.shape=e.shape,e.shape!=null?this.ndim=e.shape.length:this.ndim=e.ndim,this.maxNDim=e.maxNDim,this.minNDim=e.minNDim,this.axes=e.axes||{}}},ti=class{constructor(e,t,r,a,n,i,s){this.dtype=e,this.shape=t,this.sourceLayer=r,this.inputs=a,this.callArgs=n,this.outputTensorIndex=s,this.id=ZD(),i!=null&&(this.originalName=JD(i),this.name=eF(this.originalName)),this.rank=t.length}},nae=0,d0=class{constructor(e,t){this.callArgs=t,this.id=nae++,this.outboundLayer=e.outboundLayer,this.inboundLayers=e.inboundLayers,this.nodeIndices=e.nodeIndices,this.tensorIndices=e.tensorIndices,this.inputTensors=e.inputTensors,this.outputTensors=e.outputTensors,this.inputMasks=e.inputMasks,this.outputMasks=e.outputMasks,this.inputShapes=e.inputShapes,this.outputShapes=e.outputShapes;for(let r of e.inboundLayers)r!=null&&r.outboundNodes.push(this);e.outboundLayer.inboundNodes.push(this)}getConfig(){let e=[];for(let t of this.inboundLayers)t!=null?e.push(t.name):e.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:e,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}},aae=0,Et=class extends Ie.Serializable{constructor(e={}){super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=aae++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let t=e.name;if(!t){let r=this.getClassName();t=Ui(r)+"_"+t0(r)}if(this.name=t,this.trainable_=e.trainable==null?!0:e.trainable,e.inputShape!=null||e.batchInputShape!=null){let r;if(e.batchInputShape!=null)r=e.batchInputShape;else if(e.inputShape!=null){let n=null;e.batchSize!=null&&(n=e.batchSize),r=[n].concat(e.inputShape)}this.batchInputShape=r;let a=e.dtype;a==null&&(a=e.inputDType),a==null&&(a="float32"),this.dtype=a}e.weights!=null?this.initialWeights=e.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(e,t){return e.name+"_ib-"+t.toString()}getNodeAtIndex(e,t){if(this.inboundNodes.length===0)throw new ei(`The layer has never been called and thus has no defined ${t}.`);if(this.inboundNodes.length<=e)throw new ae(`Asked to get ${t} at node ${e}, but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[e]}getInputAt(e){return Rn(this.getNodeAtIndex(e,"input").inputTensors)}getOutputAt(e){return Rn(this.getNodeAtIndex(e,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new Hi(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use \`getInputAt(nodeIndex)\` instead.`);if(this.inboundNodes.length===0)throw new Hi(`Layer ${this.name} is not connected, no input to return.`);return Rn(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(this.inboundNodes.length===0)throw new Hi(`Layer ${this.name} has no inbound nodes.`);if(this.inboundNodes.length>1)throw new Hi(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use \`getOutputAt(nodeIndex)\` instead.`);return Rn(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(e=>e())}get updates(){return this._updates}get built(){return this._built}set built(e){this._built=e}get trainable(){return this.trainable_}set trainable(e){this._trainableWeights.forEach(t=>t.trainable=e),this.trainable_=e}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(e=>e.trainable):[]}set trainableWeights(e){this._trainableWeights=e}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(e=>!e.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(e){this._nonTrainableWeights=e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(e){if(e=jt(e),this.inputSpec==null||this.inputSpec.length===0)return;let t=jt(this.inputSpec);if(e.length!==t.length)throw new ae(`Layer ${this.name} expects ${t.length} inputs, but it received ${e.length} input tensors. Input received: ${e}`);for(let r=0;r<e.length;r++){let a=e[r],n=t[r];if(n==null)continue;let i=a.rank;if(n.ndim!=null&&i!==n.ndim)throw new ae(`Input ${r} is incompatible with layer ${this.name}: expected ndim=${n.ndim}, found ndim=${i}`);if(n.maxNDim!=null&&i>n.maxNDim)throw new ae(`Input ${r} is incompatible with layer ${this.name}: expected max_ndim=${n.maxNDim}, found ndim=${i}`);if(n.minNDim!=null&&i<n.minNDim)throw new ae(`Input ${r} is incompatible with layer ${this.name}: expected min_ndim=${n.minNDim}, found ndim=${i}.`);if(n.dtype!=null&&a.dtype!==n.dtype)throw new ae(`Input ${r} is incompatible with layer ${this.name} : expected dtype=${n.dtype}, found dtype=${a.dtype}.`);if(n.axes){let s=a.shape;for(let o in n.axes){let l=Number(o),u=n.axes[o],c=l>=0?s[l]:s[s.length+l];if(u!=null&&[u,null].indexOf(c)===-1)throw new ae(`Input ${r} is incompatible with layer ${this.name}: expected axis ${l} of input shape to have value ${u} but got shape ${s}.`)}}if(n.shape!=null)for(let s=0;s<n.shape.length;++s){let o=n.shape[s],l=a.shape[s];if(o!=null&&l!=null&&o!==l)throw new ae(`Input ${r} is incompatible with layer ${this.name}: expected shape=${n.shape}, found shape=${a.shape}.`)}}}call(e,t){return e}invokeCallHook(e,t){this._callHook!=null&&this._callHook(e,t)}setCallHook(e){this._callHook=e}clearCallHook(){this._callHook=null}apply(e,t){t=t||{},this.assertNotDisposed();let r=jt(e),a=!0;for(let i of r)if(!(i instanceof ti)){a=!1;break}let n=!0;for(let i of r)if(i instanceof ti){n=!1;break}if(a===n)throw new ae("Arguments to apply() must be all SymbolicTensors or all Tensors");return rl(this.name,()=>{if(!this.built){this.assertInputCompatibility(e);let i=[];for(let s of jt(e))i.push(s.shape);this.build(Rn(i)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),this._refCount===null&&n&&(this._refCount=1)}if(this.assertInputCompatibility(e),n){let i=this.call(e,t),s=jt(i),o=[];for(let l of s)r.indexOf(l)!==-1&&(l=l.clone()),o.push(l);if(i=Rn(o),this.activityRegularizer!=null)throw new dt("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return i}else{let i=iae(e),s=this.computeOutputShape(i),o,l=sae(e);if(this.warnOnIncompatibleInputShape(Array.isArray(e)?i[0]:i),s!=null&&s.length>0&&Array.isArray(s[0])?o=s.map((u,c)=>new ti(l,u,this,jt(e),t,this.name,c)):o=new ti(l,s,this,jt(e),t,this.name),this.addInboundNode(e,o,null,null,i,s,t),this._refCount++,this.activityRegularizer!=null)throw new dt("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return o}})}warnOnIncompatibleInputShape(e){if(this.batchInputShape!=null)if(e.length!==this.batchInputShape.length)console.warn(`The rank of the input tensor provided (shape: ${JSON.stringify(e)}) does not match that of the batchInputShape (${JSON.stringify(this.batchInputShape)}) of the layer ${this.name}`);else{let t=!1;this.batchInputShape.forEach((r,a)=>{r!=null&&e[a]!=null&&e[a]!==r&&(t=!0)}),t&&console.warn(`The shape of the input tensor (${JSON.stringify(e)}) does not match the expectation of layer ${this.name}: ${JSON.stringify(this.batchInputShape)}`)}}get outputShape(){if(this.inboundNodes==null||this.inboundNodes.length===0)throw new Hi(`The layer ${this.name} has never been called and thus has no defined output shape.`);let e=[];for(let t of this.inboundNodes){let r=JSON.stringify(t.outputShapes);e.indexOf(r)===-1&&e.push(r)}if(e.length===1){let t=this.inboundNodes[0].outputShapes;return Array.isArray(t)&&Array.isArray(t[0])&&t.length===1?t[0]:t}else throw new Hi(`The layer ${this.name} has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.`)}countParams(){if(!this.built)throw new ei(`You tried to call countParams() on ${this.name}, but the layer is not built yet. Build it first by calling build(batchInputShape).`);return eb(this.weights)}build(e){this.built=!0}getWeights(e=!1){return vk(e?this.trainableWeights:this.weights)}setWeights(e){te(()=>{let t=this.weights;if(t.length!==e.length)throw new ae(`You called setWeights(weights) on layer "${this.name}" with a weight list of length ${e.length}, but the layer was expecting ${t.length} weights. Provided weights: ${e}...`);if(t.length===0)return;let r=[],a=vk(t);for(let n=0;n<a.length;++n){let i=a[n],s=t[n],o=e[n];if(!_.arraysEqual(i.shape,o.shape))throw new ae(`Layer weight shape ${i.shape} not compatible with provided weight shape ${o.shape}`);r.push([s,o])}SS(r)})}addWeight(e,t,r,a,n,i,s,o){if(this._addedWeightNames.indexOf(e)!==-1)throw new ae(`Duplicate weight name ${e} for layer ${this.name}`);this._addedWeightNames.push(e),r==null&&(r="float32"),this.fastWeightInitDuringBuild&&(a=o!=null?o():Kt("zeros"));let l=a.apply(t,r),u=new aF(l,r,e,i,s);return l.dispose(),n!=null&&this.addLoss(()=>n.apply(u.read())),i==null&&(i=!0),i?this._trainableWeights.push(u):this._nonTrainableWeights.push(u),u}setFastWeightInitDuringBuild(e){this.fastWeightInitDuringBuild=e}addLoss(e){e==null||Array.isArray(e)&&e.length===0||(e=jt(e),this._losses!==void 0&&this._losses!==null&&this.losses.push(...e))}computeOutputShape(e){return e}computeMask(e,t){if(!this.supportsMasking){if(t!=null)if(Array.isArray(t))t.forEach(r=>{if(r!=null)throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)});else throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`);return null}return t}addInboundNode(e,t,r,a,n,i,s=null){let o=jt(e);t=jt(t),r=jt(r),a=jt(a),n=Jv(n),i=Jv(i);let l=[],u=[],c=[];for(let d of o)l.push(d.sourceLayer),u.push(d.nodeIndex),c.push(d.tensorIndex);new d0({outboundLayer:this,inboundLayers:l,nodeIndices:u,tensorIndices:c,inputTensors:o,outputTensors:t,inputMasks:r,outputMasks:a,inputShapes:n,outputShapes:i},s);for(let d=0;d<t.length;d++)t[d].sourceLayer=this,t[d].nodeIndex=this.inboundNodes.length-1,t[d].tensorIndex=d}getConfig(){let e={name:this.name,trainable:this.trainable};return this.batchInputShape!=null&&(e.batchInputShape=this.batchInputShape),this.dtype!=null&&(e.dtype=this.dtype),e}disposeWeights(){return this.weights.forEach(e=>e.dispose()),this.weights.length}assertNotDisposed(){if(this._refCount===0)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been built yet.`);if(this._refCount===null)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used yet.`);this.assertNotDisposed();let e=0;return--this._refCount===0&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}};function iae(e){e=jt(e);let t=[];for(let r of e)t.push(r.shape);return Rn(t)}function sae(e){return"float32"}function iF(e,t,r){if((t==null||r!=null&&r>0)&&(t=e.sourceLayer,r=e.nodeIndex),t.inboundNodes.length===0)return[e];{let a=t.inboundNodes[r];if(a.inboundLayers.length===0)return a.inputTensors;{let n=[];for(let i=0;i<a.inboundLayers.length;i++){let s=a.inputTensors[i],o=a.inboundLayers[i],l=a.nodeIndices[i],u=iF(s,o,l);for(let c of u)n.indexOf(c)===-1&&n.push(c)}return n}}}var fp=class extends Et{constructor(e){if(super({dtype:e.dtype,name:e.name!=null?e.name:t0("input").toString()}),e.batchSize==null&&(e.batchSize=null),e.sparse==null&&(e.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=e.sparse,e.inputShape!=null&&e.batchInputShape!=null)throw new ae("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let t=e.batchInputShape;if(t==null){if(e.inputShape==null)throw new ae("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");t=[e.batchSize].concat(e.inputShape)}else if(e.batchSize!=null)throw new ae("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");let r=e.dtype||"float32";this.batchInputShape=t,this.dtype=r,this.inputSpec=[{shape:t}];let a=new ti(this.dtype,this.batchInputShape,this,[],{},this.name);a.nodeIndex=0,a.tensorIndex=0,new d0({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[a],outputTensors:[a],inputMasks:[null],outputMasks:[null],inputShapes:[t],outputShapes:[t]})}apply(e,t){throw new ae(`Cannot pass any input to an InputLayer's apply() method. InputLayer name: ${this.name}`)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}};fp.className="InputLayer";Ie.registerClass(fp);function sF(e){if(e.batchShape==null&&e.shape==null)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(e.batchShape!=null&&e.shape!=null)throw new ae("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let t=e.batchShape;e.shape!=null&&t==null&&(t=[null].concat(e.shape));let r=e.dtype;return r==null&&(r="float32"),new fp({batchInputShape:t,name:e.name,dtype:r,sparse:e.sparse}).inboundNodes[0].outputTensors[0]}function oae(e,t){if(e.dtype==null||e.dtype===t.dtype)return t;try{return Te(t,e.dtype)}catch{throw new ae(`The dtype of the feed (${t.dtype}) can not be cast to the dtype of the key '${e.name}' (${e.dtype}).`)}}var Yo=class{constructor(e){if(this.id2Value={},this.id2Mask={},this.name2Id={},e instanceof Yo)for(let t in e.id2Value)this.id2Value[t]=e.id2Value[t],t in e.id2Mask&&(this.id2Mask[t]=e.id2Mask[t]);else{if(e==null)return;for(let t of e)this.add(t.key,t.value)}}add(e,t,r){if(this.id2Value[e.id]==null)this.id2Value[e.id]=oae(e,t),this.name2Id[e.name]=e.id,r!=null&&(this.id2Mask[e.id]=r);else throw new ae(`Duplicate key: name=${e.name}, id=${e.id}`);return this}addFeed(e){this.add(e.key,e.value)}hasKey(e){return this.id2Value[e.id]!=null}names(){return Object.keys(this.name2Id)}getValue(e){if(e instanceof ti){if(this.id2Value[e.id]==null)throw new ae(`Nonexistent key: ${e.name}`);return this.id2Value[e.id]}else{let t=this.name2Id[e];if(t==null)throw new ae(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Value[t]}}getMask(e){if(e instanceof ti){if(this.id2Value[e.id]==null)throw new ae(`Nonexistent key: ${e.name}`);return this.id2Mask[e.id]}else{let t=this.name2Id[e];if(t==null)throw new ae(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Mask[t]}}disposeMasks(){this.id2Mask!=null&&lt(this.id2Mask)}},tb=new XD,rb=new XD;function lae(e){tb!=null&&tb.setMaxEntries(e),rb!=null&&rb.setMaxEntries(e)}function hf(e,t,r,a){let n=r==null?!1:r.training,i=Array.isArray(e),s=i?e:[e],o=s.map(h=>h.name),l=[],u=t.names();for(let h of o)u.indexOf(h)!==-1?l.push(t.getValue(h)):l.push(null);a!=null&&(a.maxNumTensors=-1/0,a.minNumTensors=1/0);let c=o.join(",")+"|"+t.names().sort().join(","),d=tb.get(c),p;if(d==null){let h=uae(s,t);d=h.sorted,p=h.recipientCounts,tb.put(c,d),rb.put(c,p)}p={},n||Object.assign(p,rb.get(c));let f=new Yo(t);for(let h=0;h<d.length;++h){if(a!=null){let $=Kv().numTensors;$>a.maxNumTensors&&(a.maxNumTensors=$),$<a.minNumTensors&&(a.minNumTensors=$)}let m=d[h],g=m.sourceLayer;if(g instanceof fp)continue;let v=[],b=[],y=[],w=!1;for(let $ of m.inputs){let N=f.getValue($),I=f.getMask($);v.push(N),b.push(I),I!=null&&(w=!0),n||(p[$.name]--,p[$.name]===0&&!t.hasKey($)&&o.indexOf($.name)===-1&&!N.isDisposed&&$.sourceLayer.stateful!==!0&&y.push(N))}w&&(r=r||{},r.mask=b[0]);let x=jt(g.apply(v,r)),k=null;g.supportsMasking&&(k=g.computeMask(v,b));let C=dae(m),E=Array.isArray(C)?C:[C];for(let $=0;$<E.length;++$){f.hasKey(E[$])||f.add(E[$],x[$],Array.isArray(k)?k[0]:k);let N=o.indexOf(E[$].name);N!==-1&&(l[N]=x[$])}n||lt(y)}return f.disposeMasks(),i?l:l[0]}function uae(e,t){_.assert(e!=null&&e.length>0,()=>"Expected at least one fetch, got none");let r=[],a={};if(e.length===1){let n=oA(e[0],t);r=n.sorted,a=n.recipientMap}else{let n=new Set;for(let i of e){let{sorted:s,recipientMap:o}=oA(i,t);for(let l of s)n.has(l.name)||(r.push(l),n.add(l.name));for(let l in o)a[l]==null&&(a[l]=new Set),o[l].forEach(u=>a[l].add(u))}}return{sorted:r,recipientCounts:cae(a)}}function cae(e){let t={};for(let r in e)t[r]=e[r].size;return t}function oA(e,t){let r=new Set,a=[],n={};for(let o of t.names())r.add(o);let i=[],s=[];for(i.push(e);i.length>0;){let o=i[i.length-1];if(r.has(o.name)){i.pop();continue}let l=s[s.length-1]===i.length-1;if(o.inputs.length===0||l)i.pop(),a.push(o),r.add(o.name),l&&s.pop();else{s.push(i.length-1);for(let u of o.inputs)n[u.name]==null&&(n[u.name]=new Set),n[u.name].add(o.name),!r.has(u.name)&&i.push(u)}}return{sorted:a,recipientMap:n}}function dae(e){let t;if(e.sourceLayer.inboundNodes.length===1)t=e.sourceLayer.output;else{let r=null;for(let a=0;a<e.sourceLayer.inboundNodes.length;++a)for(let n of e.sourceLayer.inboundNodes[a].outputTensors)if(n.id===e.id){r=a;break}t=e.sourceLayer.getOutputAt(r)}return t}var pae=ce();pae.registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",()=>100,lae);var oF={};ut(oF,{maxNorm:()=>fae,minMaxNorm:()=>gae,nonNeg:()=>mae,unitNorm:()=>hae});function $S(e,t){return te(()=>Yr(Ue(ee(e,e),t,!0)))}var ym=class extends Ie.Serializable{getConfig(){return{}}},IS=class extends ym{constructor(e){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return te(()=>{let t=$S(e,this.axis),r=sn(t,0,this.maxValue);return ee(e,Ve(r,xe(Ar(),t)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}};IS.className="MaxNorm";Ie.registerClass(IS);var TS=class extends ym{constructor(e){super(),this.defaultAxis=0,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return te(()=>Ve(e,xe(Ar(),$S(e,this.axis))))}getConfig(){return{axis:this.axis}}};TS.className="UnitNorm";Ie.registerClass(TS);var NS=class extends ym{apply(e){return At(e)}};NS.className="NonNeg";Ie.registerClass(NS);var AS=class extends ym{constructor(e){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=e.minValue!=null?e.minValue:this.defaultMinValue,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.rate=e.rate!=null?e.rate:this.defaultRate,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return te(()=>{let t=$S(e,this.axis),r=xe(ee(this.rate,sn(t,this.minValue,this.maxValue)),ee(1-this.rate,t));return ee(e,Ve(r,xe(Ar(),t)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}};AS.className="MinMaxNorm";Ie.registerClass(AS);var lA={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function Rr(e){return mS(e)}function uA(e,t={}){return mm(e,Ie.SerializationMap.getMap().classNameMap,t,"constraint")}function Or(e){if(e==null)return null;if(typeof e=="string"){let t={className:e in lA?lA[e]:e,config:{}};return uA(t)}else return e instanceof ym?e:uA(e)}function fae(e){return new IS(e)}function hae(e){return new TS(e)}function mae(){return new NS}function gae(e){return new AS(e)}var lF={};ut(lF,{constant:()=>yae,glorotNormal:()=>$ae,glorotUniform:()=>Sae,heNormal:()=>Iae,heUniform:()=>Tae,identity:()=>Eae,leCunNormal:()=>Nae,leCunUniform:()=>Aae,ones:()=>bae,orthogonal:()=>_ae,randomNormal:()=>xae,randomUniform:()=>wae,truncatedNormal:()=>kae,varianceScaling:()=>Cae,zeros:()=>vae});function vae(){return new bS}function bae(){return new a0}function yae(e){return new yS(e)}function wae(e){return new wS(e)}function xae(e){return new xS(e)}function kae(e){return new kS(e)}function Eae(e){return new ES(e)}function Cae(e){return new Fn(e)}function Sae(e){return new i0(e)}function $ae(e){return new s0(e)}function Iae(e){return new o0(e)}function Tae(e){return new l0(e)}function Nae(e){return new u0(e)}function Aae(e){return new c0(e)}function _ae(e){return new CS(e)}var uF={};ut(uF,{Layer:()=>Et,RNN:()=>Pi,RNNCell:()=>Cm,activation:()=>nse,add:()=>pse,alphaDropout:()=>Yse,average:()=>fse,averagePooling1d:()=>F$,averagePooling2d:()=>L$,averagePooling3d:()=>z$,avgPool1d:()=>kse,avgPool2d:()=>Cse,avgPool3d:()=>$se,avgPooling1d:()=>Ese,avgPooling2d:()=>Sse,avgPooling3d:()=>Ise,batchNormalization:()=>yse,bidirectional:()=>Vse,concatenate:()=>hse,conv1d:()=>Xie,conv2d:()=>Yie,conv2dTranspose:()=>Kie,conv3d:()=>Zie,conv3dTranspose:()=>Qie,convLstm2d:()=>Fse,convLstm2dCell:()=>Lse,cropping2D:()=>ese,dense:()=>ase,depthwiseConv2d:()=>rse,dot:()=>bse,dropout:()=>ise,elu:()=>Wie,embedding:()=>dse,flatten:()=>ose,gaussianDropout:()=>Xse,gaussianNoise:()=>qse,globalAveragePooling1d:()=>Tse,globalAveragePooling2d:()=>Nse,globalMaxPool1d:()=>Hse,globalMaxPool2d:()=>Use,globalMaxPooling1d:()=>eL,globalMaxPooling2d:()=>tL,gru:()=>_se,gruCell:()=>Mse,input:()=>IF,inputLayer:()=>Vie,layerNormalization:()=>wse,leakyReLU:()=>Uie,lstm:()=>Rse,lstmCell:()=>Ose,masking:()=>Kse,maxPool1d:()=>jse,maxPool2d:()=>Gse,maxPooling1d:()=>rL,maxPooling2d:()=>nL,maxPooling3d:()=>Ase,maximum:()=>mse,minimum:()=>gse,multiply:()=>vse,permute:()=>cse,prelu:()=>jie,reLU:()=>Hie,repeatVector:()=>lse,reshape:()=>use,rnn:()=>zse,separableConv2d:()=>Jie,simpleRNN:()=>Pse,simpleRNNCell:()=>Dse,softmax:()=>Gie,spatialDropout1d:()=>sse,stackedRNNCells:()=>Bse,thresholdedReLU:()=>qie,timeDistributed:()=>Wse,upSampling2d:()=>tse,zeroPadding2d:()=>xse});async function Cs(e){if(e==null)return;let t=[],r=[],a=[];for(let n in e){let i=e[n];if(typeof i!="number"){let s=i;t.push(s.data()),r.push(n),a.push(s)}}if(t.length>0){let n=await Promise.all(t);for(let i=0;i<n.length;++i)e[r[i]]=n[i][0];lt(a)}}function cF(e){if(e!=null)for(let t in e){let r=e[t];typeof r!="number"&&r.dispose()}}var cA;(function(e){e[e.SILENT=0]="SILENT",e[e.VERBOSE=1]="VERBOSE"})(cA||(cA={}));var Mae=125,Bc=class{constructor(){this.validationData=null}setParams(e){this.params=e}async onEpochBegin(e,t){}async onEpochEnd(e,t){}async onBatchBegin(e,t){}async onBatchEnd(e,t){}async onTrainBegin(e){}async onTrainEnd(e){}setModel(e){}},dF=class{constructor(e,t=10){e==null&&(e=[]),this.callbacks=e,this.queueLength=t}append(e){this.callbacks.push(e)}setParams(e){for(let t of this.callbacks)t.setParams(e)}setModel(e){for(let t of this.callbacks)t.setModel(e)}async onEpochBegin(e,t){t==null&&(t={});for(let r of this.callbacks)await r.onEpochBegin(e,t)}async onEpochEnd(e,t){t==null&&(t={});for(let r of this.callbacks)await r.onEpochEnd(e,t)}async onBatchBegin(e,t){t==null&&(t={});for(let r of this.callbacks)await r.onBatchBegin(e,t)}async onBatchEnd(e,t){t==null&&(t={});for(let r of this.callbacks)await r.onBatchEnd(e,t)}async onTrainBegin(e){e==null&&(e={});for(let t of this.callbacks)await t.onTrainBegin(e)}async onTrainEnd(e){e==null&&(e={});for(let t of this.callbacks)await t.onTrainEnd(e)}},Rae=class extends Bc{constructor(){super()}async onEpochBegin(e){this.seen=0,this.totals={}}async onBatchEnd(e,t){t==null&&(t={});let r=t.size==null?0:t.size;this.seen+=r;for(let a in t){let n=t[a];if(typeof n=="number")this.totals.hasOwnProperty(a)||(this.totals[a]=0),this.totals[a]=this.totals[a]+n*r;else{let i;a in this.totals?i=this.totals[a]:this.totals[a]=0;let s=te(()=>xe(this.totals[a],ee(n,r)));this.totals[a]=s,i!=null&&i.dispose()}}}async onEpochEnd(e,t){if(t!=null)for(let r of this.params.metrics)this.totals[r]!=null&&(typeof this.totals[r]=="number"?t[r]=this.totals[r]/this.seen:te(()=>{let a=ee(Ve(1,this.seen),this.totals[r]);t[r]=a,this.totals[r].dispose(),zr(t[r])}))}},pF=class extends Bc{async onTrainBegin(e){this.epoch=[],this.history={}}async onEpochEnd(e,t){t==null&&(t={}),this.epoch.push(e);for(let r in t)this.history[r]==null&&(this.history[r]=[]),this.history[r].push(t[r])}async syncData(){let e=[],t=[],r=[];for(let n in this.history){let i=this.history[n];for(let s=0;s<i.length;++s)if(typeof i[s]!="number"){let o=i[s];e.push(o.data()),t.push(n),r.push(s)}}let a=await Promise.all(e);for(let n=0;n<a.length;++n)this.history[t[n]][r[n]].dispose(),this.history[t[n]][r[n]]=a[n][0]}},fF=class extends Bc{constructor(e,t){if(super(),this.currentEpoch=0,this.nowFunc=e.nowFunc,this.nextFrameFunc=e.nextFrameFunc||fS,this.yieldEvery=t||"auto",this.yieldEvery==="auto"&&(this.yieldEvery=Mae),this.yieldEvery==="never"&&e.onYield!=null)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");_.isNumber(this.yieldEvery)&&(this.maybeWait=One(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=e.onTrainBegin,this.trainEnd=e.onTrainEnd,this.epochBegin=e.onEpochBegin,this.epochEnd=e.onEpochEnd,this.batchBegin=e.onBatchBegin,this.batchEnd=e.onBatchEnd,this.yield=e.onYield}async maybeWait(e,t,r){let a=[];this.yield!=null&&(await Cs(r),a.push(this.yield(e,t,r))),a.push(this.nextFrameFunc()),await Promise.all(a)}async onEpochBegin(e,t){this.currentEpoch=e,this.epochBegin!=null&&(await Cs(t),await this.epochBegin(e,t))}async onEpochEnd(e,t){let r=[];this.epochEnd!=null&&(await Cs(t),r.push(this.epochEnd(e,t))),this.yieldEvery==="epoch"&&r.push(this.nextFrameFunc()),await Promise.all(r)}async onBatchBegin(e,t){this.batchBegin!=null&&(await Cs(t),await this.batchBegin(e,t))}async onBatchEnd(e,t){let r=[];this.batchEnd!=null&&(await Cs(t),r.push(this.batchEnd(e,t))),this.yieldEvery==="batch"?r.push(this.nextFrameFunc()):_.isNumber(this.yieldEvery)&&r.push(this.maybeWait(this.currentEpoch,e,t)),await Promise.all(r)}async onTrainBegin(e){this.trainBegin!=null&&(await Cs(e),await this.trainBegin(e))}async onTrainEnd(e){this.trainEnd!=null&&(await Cs(e),await this.trainEnd(e))}};function hF(e,t){return e==null&&(e={}),e instanceof Bc?[e]:Array.isArray(e)&&e[0]instanceof Bc?e:jt(e).map(r=>new fF(r,t))}var Aa=class{constructor(){}static registerCallbackConstructor(e,t){_.assert(e>=0&&Number.isInteger(e),()=>`Verbosity level is expected to be an integer >= 0, but got ${e}`),Aa.checkForDuplicate(t),Aa.constructors[e]==null&&(Aa.constructors[e]=[]),Aa.constructors[e].push(t)}static checkForDuplicate(e){for(let t in Aa.constructors)Aa.constructors[+t].forEach(r=>{if(r===e)throw new ae("Duplicate callback constructor.")})}static clear(){Aa.constructors={}}static createCallbacks(e){let t=[];for(let r in Aa.constructors){let a=+r;e>=a&&t.push(...Aa.constructors[a])}return t.map(r=>new r)}};Aa.constructors={};function mF(e,t,r,a,n,i,s,o,l){let u=new pF,c=[new Rae,...Aa.createCallbacks(t)];e!=null&&c.push(...e),c.push(u);let d=new dF(c);return d.setParams({epochs:r,initialEpoch:a,samples:n,steps:i,batchSize:s,verbose:t,doValidation:o,metrics:l}),{callbackList:d,history:u}}function ai(e,t={},r=!1){return mm(e,Ie.SerializationMap.getMap().classNameMap,t,"layer",r)}function nb(e,t){return te(()=>{e.dtype!=="float32"&&(e=Te(e,"float32"));let r=Ue(vm(e),t,!0),a=Ea(r.shape,Ar()),n=Yr(Ri(r,a));return Ve(e,n)})}function Ru(e,t){return te(()=>Qt(vm(Fe(t,e)),-1))}function p0(e,t){return te(()=>Qt(xr(Fe(t,e)),-1))}function hp(e,t){return te(()=>{let r=Fe(e,t),a=sn(xr(e),Ar(),Number.MAX_VALUE),n=xr(Ve(r,a));return ee(100,Qt(n,-1))})}function Oae(e,t){return te(()=>{let r=sn(t,Ar(),Number.MAX_VALUE),a=la(xe(1,r)),n=sn(e,Ar(),Number.MAX_VALUE),i=la(xe(1,n));return Qt(vm(Fe(a,i)),-1)})}function Pae(e,t){return te(()=>{let r=Ri(0,Fe(1,ee(e,t)));return Qt(vm(r),-1)})}function Dae(e,t){return te(()=>{let r=Ri(0,Fe(1,ee(e,t)));return Qt(r,-1)})}function Fae(e,t){return te(()=>{let r=Ue(ee(e,t),-1),a=Fa(ee(Fe(1,e),t),-1);return Ri(0,xe(1,Fe(a,r)))})}function Lae(e,t){return te(()=>{let r=Math.log(2),a=Fe(t,e),n=Fe(xe(a,_u(ee(-2,a))),r);return Qt(n,-1)})}function ph(e,t,r=!1){return te(()=>{if(r)t=So(t);else{let a=Ue(t,t.shape.length-1,!0);t=Ve(t,a)}return t=sn(t,Ar(),1-Ar()),Gt(Ue(ee(Te(e,"float32"),la(t)),t.shape.length-1))})}function ab(e,t,r=!1){return te(()=>{let a=Te(lp(Gne(e)),"int32");t=sn(t,Ar(),1-Ar());let n=t.shape,i=re(Pc(a,n[n.length-1]),n);return ph(i,t,r)})}function zae(e,t){if(!_.arraysEqual(e.shape,t.shape))throw new ae(`logits and labels must have the same shape, but got shapes ${JSON.stringify(e.shape)} and ${JSON.stringify(t.shape)}`);return te(()=>{let r=At(t),a=Gt(xr(t));return xe(Fe(r,ee(t,e)),sm(xn(a)))})}function f0(e,t){return te(()=>{let r;return r=sn(t,Ar(),1-Ar()),r=la(Ve(r,Fe(1,r))),Qt(zae(e,r),-1)})}function Bae(e,t){return te(()=>{let r=sn(e,Ar(),1),a=sn(t,Ar(),1);return Ue(ee(e,la(Ve(r,a))),-1)})}function Vae(e,t){return te(()=>{let r=la(xe(Ar(),t));return Qt(Fe(t,ee(e,r)),-1)})}function _S(e,t){return te(()=>{let r=nb(e,-1),a=nb(t,-1),n=ee(r,a);return Gt(Ue(n,-1))})}var ib={meanSquaredError:Ru,meanAbsoluteError:p0,meanAbsolutePercentageError:hp,meanSquaredLogarithmicError:Oae,squaredHinge:Pae,hinge:Dae,categoricalHinge:Fae,logcosh:Lae,categoricalCrossentropy:ph,sparseCategoricalCrossentropy:ab,binaryCrossentropy:f0,kullbackLeiblerDivergence:Bae,poisson:Vae,cosineProximity:_S};function jw(e){if(typeof e=="string"){if(e in ib)return ib[e];let t=`Unknown loss ${e}`;throw e.toLowerCase().includes("softmaxcrossentropy")&&(t=`Unknown loss ${e}. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy`),new ae(t)}else return e}function MS(e,t){return te(()=>{let r=ee(.5,ua(t)),a=r0(Wn(t,r),e.dtype);return Qt(oa(e,a),-1)})}function RS(e,t){return te(()=>r0(oa(gl(e,-1),gl(t,-1)),"float32"))}function gF(e,t){return te(()=>Te(Ue(Va(oa(e,1),oa(t,1))),"float32"))}function Wae(e,t){return te(()=>Te(Ue(Va(oa(e,1),oa(t,0))),"float32"))}function Hae(e,t){return te(()=>Te(Ue(Va(oa(e,0),oa(t,1))),"float32"))}function vF(e,t){return te(()=>{let r=gF(e,t),a=Hae(e,t),n=xe(r,a);return Te(on(Wn(n,0),Ve(r,n),0),"float32")})}function Uae(e,t){return te(()=>{let r=gF(e,t),a=Wae(e,t),n=xe(r,a);return Te(on(Wn(n,0),Ve(r,n),0),"float32")})}function bF(e,t){return f0(e,t)}function yF(e,t){return e.rank===t.rank&&(e=Ti(e,[e.rank-1])),t=gl(t,-1),t.dtype!==e.dtype&&(t=Te(t,e.dtype)),Te(oa(e,t),"float32")}var jae=Ru,Gae=Ru,qae=p0,Xae=p0,Yae=hp,Kae=hp,OS=ph,Zae=_S,wF=ab,sb={binaryAccuracy:MS,categoricalAccuracy:RS,precision:vF,categoricalCrossentropy:OS,sparseCategoricalCrossentropy:wF,mse:jae,MSE:Gae,mae:qae,MAE:Xae,mape:Yae,MAPE:Kae,cosine:Zae};function Qae(e){if(typeof e=="string"&&e in sb)return sb[e];if(typeof e!="string"&&e!=null)return e;throw new ae(`Unknown metric ${e}`)}function Ig(e){if(vi(e!==null,`Unknown LossOrMetricFn ${e}`),typeof e=="string")return e;{let t;for(let r of Object.keys(ib))if(ib[r]===e){t=r;break}if(t!==void 0)return t;for(let r of Object.keys(sb))if(sb[r]===e){t=r;break}return t!==void 0?t:e.name}}function Jae(e){let t={Adagrad:()=>Lo.adagrad(.01),Adadelta:()=>Lo.adadelta(1,.95,Ar()),Adam:()=>Lo.adam(.001,.9,.999,Ar()),Adamax:()=>Lo.adamax(.002,.9,.999,Ar(),0),RMSProp:()=>Lo.rmsprop(.001,.9,0,Ar()),SGD:()=>Lo.sgd(.01)};if(t.adagrad=t.Adagrad,t.adadelta=t.Adadelta,t.adam=t.Adam,t.adamax=t.Adamax,t.rmsprop=t.RMSProp,t.sgd=t.SGD,e in t)return t[e]();throw new ae(`Unknown Optimizer ${e}`)}function dA(e,t,r=!1){if(e==null||typeof e!="object"||Object.getPrototypeOf(e)!==Object.prototype||!bk(e))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(r){let a=JSON.stringify(e);a.length>1048576&&console.warn(`User-defined metadata of model "${t}" is too large in size (length=${a.length} when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= ${1048576}.`)}}function bk(e){if(e===null)return!0;if(typeof e=="object")if(Object.getPrototypeOf(e)===Object.prototype){let t=Object.keys(e);for(let r of t)if(typeof r!="string"||!bk(e[r]))return!1;return!0}else if(Array.isArray(e)){for(let t of e)if(!bk(t))return!1;return!0}else return!1;else{let t=typeof e;return t==="string"||t==="number"||t==="boolean"}}function eie(e,t,r,a=console.log){let n=rie(e),i=["Layer (type)","Input Shape","Output shape","Param #"];n?(t=t||90,r=r||[.32,.61,.89,1]):(t=t||115,r=r||[.24,.48,.7,.8,1]),r[r.length-1]<=1&&(r=r.map(c=>Math.floor(t*c)));let s;if(!n){i.push("Receives inputs"),s=[];for(let c in e.nodesByDepth)s.push(...e.nodesByDepth[c])}a("_".repeat(t)),ob(i,r,a),a("=".repeat(t));let o=e.layers;for(let c=0;c<o.length;++c)n?nie(o[c],r,a):aie(o[c],r,s,a),a((c===o.length-1?"=":"_").repeat(t));e.checkTrainableWeightsConsistency();let l=tie(e),u=eb(e.nonTrainableWeights);a(`Total params: ${l+u}`),a(`Trainable params: ${l}`),a(`Non-trainable params: ${u}`),a("_".repeat(t))}function tie(e){let t;return e.collectedTrainableWeights!=null?t=eb(e.collectedTrainableWeights):t=eb(e.trainableWeights),t}function rie(e){let t=!0,r=[],a=[];for(let n in e.nodesByDepth)r.push(e.nodesByDepth[n]);for(let n of r){if(n.length>1||n.length===1&&n[0].inboundLayers.length>1){t=!1;break}a.push(...n)}if(t)for(let n of e.layers){let i=!1;for(let s of n.inboundNodes)if(a.indexOf(s)!==-1)if(i){t=!1;break}else i=!0;if(!t)break}return t}function ob(e,t,r=console.log){let a="";for(let n=0;n<e.length;++n)n>0&&(a=a.slice(0,a.length-1)+" "),a+=e[n],a=a.slice(0,t[n]),a+=" ".repeat(t[n]-a.length);r(a)}function nie(e,t,r){let a,n;try{n=e.inboundNodes.map(l=>JSON.stringify(l.inputShapes)).join(",")}catch{n="multiple"}try{a=JSON.stringify(e.outputShape)}catch{a="multiple"}let i=e.name,s=e.getClassName(),o=[`${i} (${s})`,n,a,e.countParams().toString()];ob(o,t,r)}function aie(e,t,r,a){let n,i;try{i=e.inboundNodes.map(d=>JSON.stringify(d.inputShapes)).join(",")}catch{i="multiple"}try{n=JSON.stringify(e.outputShape)}catch{n="multiple"}let s=[];for(let d of e.inboundNodes)if(!(r!=null&&r.length>0&&r.indexOf(d)===-1))for(let p=0;p<d.inboundLayers.length;++p){let f=d.inboundLayers[p].name,h=d.nodeIndices[p],m=d.tensorIndices[p];s.push(`${f}[${h}][${m}]`)}let o=e.name,l=e.getClassName(),u=s.length===0?"":s[0],c=[`${o} (${l})`,i,n,e.countParams().toString(),u];ob(c,t,a);for(let d=1;d<s.length;++d)ob(["","","","",s[d]],t,a)}function xF(e,t,r){return(e==="inboundNodes"||e==="outputLayers"||e==="inputLayers")&&t===0&&typeof r=="string"}function fh(e,t){if(e===null)return null;if(typeof e=="string")return Vo(e);if(typeof e=="number"||typeof e=="boolean")return e;if(e instanceof Array){let r=[],a=e.length;for(let n=0;n<a;++n){let i=e[n];xF(t,n,i)?r.push(i):r.push(fh(i,t))}return r}else{let r={};for(let a of Object.keys(e)){let n=e[a];if(a==="name"&&typeof n=="string")r[a]=n;else{let i=Vo(a);r[i]=fh(n,i)}}return r}}function yk(e,t){if(e==null)return null;if(typeof e=="string")return Ui(e);if(typeof e=="number"||typeof e=="boolean")return e;if(e instanceof Array){let r=[],a=e.length;for(let n=0;n<a;++n){let i=e[n];xF(t,n,i)?r.push(i):r.push(yk(i,t))}return r}else{let r={};for(let a of Object.keys(e)){let n=e[a],i=Ui(a);(a==="name"||a==="className")&&typeof n=="string"?r[i]=n:r[i]=yk(n,a)}return r}}var PS="3.18.0",hi=class extends Et{constructor(e){if(super({}),this.containerNodes=new Set,this.name=e.name,this.name==null){let v=this.getClassName().toLowerCase();this.name=t0(v)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(e.inputs)?this.inputs=e.inputs.slice():this.inputs=[e.inputs],Array.isArray(e.outputs)?this.outputs=e.outputs.slice():this.outputs=[e.outputs],Xs(this.inputs).length!==this.inputs.length)throw new ae(`The list of inputs passed to the model is redundant. All inputs should only appear once. Found: ${this.inputs.map(v=>v.name)}`);Xs(this.outputs).length!==this.outputs.length&&console.warn(`The list of outputs passed to the model is redundant. All outputs should only appear once. Found: ${this.outputs.map(v=>v.name)}`),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(let v of this.outputs){let b=v.sourceLayer,y=v.nodeIndex,w=v.tensorIndex;this.outputLayers.push(b),this.outputLayersNodeIndices.push(y),this.outputLayersTensorIndices.push(w)}for(let v of this.inputs){let b=v.sourceLayer,y=v.nodeIndex,w=v.tensorIndex;vi(y===0,"input layer has >1 nodes"),vi(w===0,"input layer has >1 tensors"),this.inputLayers.push(b),this.inputLayersNodeIndices.push(y),this.inputLayersTensorIndices.push(w)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let v=0;v<this.inputLayers.length;v++){let b=this.inputLayers[v];if(!(b instanceof fp))throw new TypeError(`Input layers to a LayersModel must be InputLayer objects. Received inputs: ${e.inputs}. Input ${v} (0-based) originates from layer type ${b.getClassName()}.`);this.inputNames.push(b.name),this.feedInputShapes.push(b.batchInputShape),this.feedInputNames.push(b.name)}for(let v of this.outputLayers)this.outputNames.push(v.name);this.internalInputShapes=this.inputs.map(v=>v.shape),this.internalOutputShapes=this.outputs.map(v=>v.shape);let t={},r={},a={},n={},i={},s=[],o=(v,b,y,w,x,k)=>{(w==null||x==null||k==null)&&(w=v.sourceLayer,x=v.nodeIndex,k=v.tensorIndex);let C=w.inboundNodes[x];if(y.indexOf(C)!==-1)throw new ei(`The tensor ${v.name} at layer "${w.name}" is part of a cycle.`);if(b.indexOf(C)!==-1)return;this.containerNodes.add(hi.nodeKey(w,x)),w.id in i||(i[w.id]=Object.keys(i).length),y.indexOf(C)===-1&&y.push(C);let E=C.inboundLayers.length;for(let $=0;$<E;$++){let N=C.inputTensors[$],I=C.inboundLayers[$],S=C.nodeIndices[$],A=C.tensorIndices[$];o(N,b,y,I,S,A)}for(b.push(C);y.indexOf(C)>=0;)y.splice(y.indexOf(C),1);s.push(C)},l=[],u=[];for(let v of this.outputs)o(v,l,u);let c=s.slice().reverse();for(let v of c){r[v.id]=v,v.id in t||(t[v.id]=0);let b=t[v.id],y=a[v.outboundLayer.id]==null?0:a[v.outboundLayer.id];b=Math.max(b,y),a[v.outboundLayer.id]=b,n[v.outboundLayer.id]=v.outboundLayer,t[v.id]=b;for(let w=0;w<v.inboundLayers.length;w++){let x=v.inboundLayers[w],k=v.nodeIndices[w],C=x.inboundNodes[k],E=t[C.id]==null?0:t[C.id];t[C.id]=Math.max(b+1,E),r[C.id]=C}}let d={};for(let v in t){let b=t[v];b in d||(d[b]=[]),d[b].push(r[v])}let p={};for(let v in a){let b=a[v];b in p||(p[b]=[]),p[b].push(n[v])}let f=Object.keys(p).map(v=>parseInt(v,10)).sort(Cg);this.layers=[];for(let v of f){let b=p[v];b.sort((y,w)=>{let x=i[y.id],k=i[w.id];return x<k?-1:x>k?1:0});for(let y of b)y instanceof hi&&this.internalContainerRefs.push(y),this.layers.push(y)}this.layersByDepth=p,f=Object.keys(d).map(v=>parseInt(v,10)).sort(Cg);let h=this.inputs.slice(),m=[];for(let v of f)for(let b of d[v]){let y=b.outboundLayer;if(y!=null){for(let w of b.inputTensors)if(h.indexOf(w)===-1)throw new ei(`Graph disconnected: cannot obtain value for tensor ${w} at layer "${y.name}". The following previous layers were accessed without issue: ${m}`);for(let w of b.outputTensors)h.push(w);m.push(y.name)}}this.nodesByDepth=d;let g=this.layers.map(v=>v.name);for(let v of g){let b=g.filter(y=>y===v).length;if(b!==1)throw new ei(`The name "${v}" is used ${b} times in the model. All layer names should be unique. Layer names: `+JSON.stringify(g))}this.outboundNodes=[],this.inboundNodes=[],new d0({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map(v=>null),outputMasks:this.outputs.map(v=>null),inputShapes:this.inputs.map(v=>v.shape),outputShapes:this.outputs.map(v=>v.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(this._refCount===0)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();let e={refCountAfterDispose:null,numDisposedVariables:0};if(--this._refCount===0){for(let t of this.layers)e.numDisposedVariables+=t.dispose().numDisposedVariables;for(let t of this.internalContainerRefs)e.numDisposedVariables+=t.dispose().numDisposedVariables}return e.refCountAfterDispose=this._refCount,e}get trainable(){return this.trainable_}set trainable(e){this.layers.forEach(t=>{t._trainableWeights.forEach(r=>r.trainable=e)}),this.trainable_=e}get trainableWeights(){if(this._trainableWeights.length>0)throw new ae("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let e=[];for(let t of this.layers)e=e.concat(t.trainableWeights);return e}get nonTrainableWeights(){let e=[];for(let t of this.layers)e.push(...t.nonTrainableWeights);if(!this.trainable){let t=[];for(let r of this.layers)t.push(...r.trainableWeights);return t.concat(e)}return e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(e,t=!0){let r={},a=0;for(let i of this.layers)for(let s of i.weights){if(r[s.originalName]!=null)throw new ae(`Duplicate weight name: ${s.originalName}`);r[s.originalName]=s,a++}let n=[];for(let i in e){let s=i;if(r[i]==null){let o=i.split("/");s=o.slice(0,-2).concat([o[o.length-1]]).join("/")}if(r[s]!=null)n.push([r[s],e[i]]);else if(t)throw new ae(`Provided weight data has no target variable: ${i}`);delete r[s]}if(t){let i=[];for(let s in r)i.push(s);if(i.length>0)throw new ae(`${i.length} of ${a} weights are not set: ${i}`)}SS(n)}updatedConfig(){let e=this.getConfig(),t={};return t.className=this.getClassName(),t.config=e,t.kerasVersion=`tfjs-layers ${PS}`,t.backend="TensorFlow.js",t}toJSON(e,t=!0){let r=yk(this.updatedConfig());return t?JSON.stringify(r):r}call(e,t){return te(()=>{e=jt(e);let r=new Yo;for(let a=0;a<this.inputs.length;++a)r.add(this.inputs[a],e[a]);return hf(this.outputs,r,t)})}computeMask(e,t){return te(()=>{e=jt(e);let r;return t==null?r=kl(null,e.length):r=jt(t),this.runInternalGraph(e,r)[1]})}computeOutputShape(e){let t=Jv(e);if(t.length!==this.inputLayers.length)throw new ae(`Invalid inputShape argument ${e}: model has ${this.inputLayers.length} tensor inputs.`);let r={};for(let s=0;s<t.length;s++){let o=this.inputLayers[s],l=t[s],u=o.name+"_0_0";r[u]=l}let a=Object.keys(this.nodesByDepth).map(s=>parseInt(s,10)).sort(Cg);if(a.length>1)for(let s of a){let o=this.nodesByDepth[s];for(let l of o){let u=l.outboundLayer;if(this.inputLayers.map(h=>h.id).indexOf(u.id)!==-1)continue;let c=[];for(let h=0;h<l.inboundLayers.length;h++){let m=l.inboundLayers[h],g=l.nodeIndices[h],v=l.tensorIndices[h],b=`${m.name}_${g}_${v}`,y=r[b];c.push(y)}let d=u.computeOutputShape(Rn(c)),p=Jv(d),f=u.inboundNodes.indexOf(l);for(let h=0;h<p.length;h++){let m=`${u.name}_${f}_${h}`;r[m]=p[h]}}}let n=[],i=[];for(let s=0;s<this.outputLayers.length;s++){let o=this.outputLayers[s],l=this.outputLayersNodeIndices[s],u=this.outputLayersTensorIndices[s],c=`${o.name}_${l}_${u}`;i.push(c)}for(let s=0;s<i.length;s++){let o=i[s];vi(o in r),n.push(r[o])}return Rn(n)}runInternalGraph(e,t){t==null&&(t=kl(null,e.length));let r={};for(let o=0;o<this.inputs.length;++o){let l=this.inputs[o],u=e[o],c=t[o];r[l.id]=[u,c]}let a=Object.keys(this.nodesByDepth).map(o=>parseInt(o,10)).sort(Cg);for(let o of a){let l=this.nodesByDepth[o];for(let u of l){let c=u.outboundLayer,d=u.inputTensors,p=u.outputTensors,f=new Array;for(let h of d)h.id in r&&f.push(r[h.id]);if(f.length===d.length){let h={},m,g,v,b;if(u.callArgs!=null&&(h=u.callArgs),f.length===1){let[y,w]=f[0];h.mask==null&&(h.mask=w),v=jt(c.call(y,h)),b=jt(c.computeMask(y,w)),m=[y],g=[w]}else m=f.map(y=>y[0]),g=f.map(y=>y[1]),h.mask==null&&(h.mask=g),v=jt(c.call(m,h)),b=jt(c.computeMask(m,g));if(c.activityRegularizer)throw new dt("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let y=0;y<p.length;++y){let w=p[y],x=v[y],k=b[y];r[w.id]=[x,k]}}}}let n=[],i=[],s=[];for(let o of this.outputs){vi(o.id in r,`Could not compute output ${o.name} : ${o.id}`);let[l,u]=r[o.id];s.push(l.shape),n.push(l),i.push(u)}return[n,i,s]}buildNodeConversionMap(e){let t={},r;for(let a of this.layers){r=a instanceof hi?1:0;for(let n=0;n<a.inboundNodes.length;n++){let i=hi.nodeKey(a,n);this.containerNodes.has(i)&&(t[i]=r,r+=1)}}return t}getLayer(e,t){if(t!=null){if(this.layers.length<=t)throw new ae(`Was asked to retrieve layer at index ${t}, but model only has ${this.layers.length} layer(s).`);return this.layers[t]}else if(e==null)throw new ae("Provide either a layer name or layer index");for(let r of this.layers)if(r.name===e)return r;throw new ae(`No such layer: ${e}`)}calculateLosses(){return te(()=>{let e=[];for(let t of this.layers)for(let r=0;r<t.inboundNodes.length;++r){let a=hi.nodeKey(t,r);this.containerNodes.has(a)&&e.push(...t.calculateLosses())}return e})}getConfig(){let e={name:this.name},t=this.buildNodeConversionMap(this.layers),r=[];for(let i of this.layers){let s=i.getClassName(),o=i.getConfig(),l=[];for(let c=0;c<i.inboundNodes.length;c++){let d=i.inboundNodes[c],p=hi.nodeKey(i,c),f={};if(this.containerNodes.has(p)){if(d.callArgs)try{JSON.stringify(d.callArgs),f=d.callArgs}catch{console.warn(`Layer ${i.name} was passed non-serializable keyword arguments: ${d.callArgs}. They will not be included in the serialized model (and thus will be missing at deserialization time).`),f={}}if(d.inboundLayers.length>0){let h=[];for(let m=0;m<d.inboundLayers.length;m++){let g=d.inboundLayers[m],v=d.nodeIndices[m],b=d.tensorIndices[m],y=hi.nodeKey(g,v),w=t[y];w==null&&(w=0),h.push([g.name,w,b,f])}l.push(h)}}}let u={};u.name=i.name,u.className=s,u.config=o,u.inboundNodes=l,r.push(u)}e.layers=r;let a=[];for(let i=0;i<this.inputLayers.length;i++){let s=this.inputLayers[i],o=this.inputLayersNodeIndices[i],l=hi.nodeKey(s,o);if(!this.containerNodes.has(l))continue;let u=t[l];u==null&&(u=0);let c=this.inputLayersTensorIndices[i];a.push([s.name,u,c])}e.inputLayers=a;let n=[];for(let i=0;i<this.outputLayers.length;i++){let s=this.outputLayers[i],o=this.outputLayersNodeIndices[i],l=hi.nodeKey(s,o);if(!this.containerNodes.has(l))continue;let u=t[l];u==null&&(u=0);let c=this.outputLayersTensorIndices[i];n.push([s.name,u,c])}return e.outputLayers=n,e}static fromConfig(e,t,r={},a=!1){let n={},i={};function s(m,g){m.name in i?i[m.name].push(g):i[m.name]=[g]}function o(m,g){let v=[],b;for(let y of g){let w=y[0],x=y[1],k=y[2];if(b=y[3]==null?{}:y[3],!(w in n)){s(m,g);return}let C=n[w];if(C.inboundNodes.length<=x){s(m,g);return}let E=C.inboundNodes[x];v.push(E.outputTensors[k])}v.length>0&&m.apply(Rn(v),b)}function l(m){let g=m.name,v=ai(m,t.customObjects!=null?t.customObjects:{});v.setFastWeightInitDuringBuild(a),n[g]=v,m.inboundNodes.forEach(b=>{if(!(b instanceof Array))throw new ae(`Corrupted configuration, expected array for nodeData: ${b}`);s(v,b)})}let u=t.name,c=t.layers;for(let m of c)l(m);for(;!Rne(i);)for(let m of c){let g=n[m.name];if(g.name in i){let v=i[g.name];delete i[g.name];for(let b of v)o(g,b)}}let d=[],p=[],f=t.inputLayers;for(let m of f){let g=m[0],v=m[1],b=m[2];vi(g in n);let y=n[g].inboundNodes[v].outputTensors;d.push(y[b])}let h=t.outputLayers;for(let m of h){let g=m[0],v=m[1],b=m[2];vi(g in n);let y=n[g].inboundNodes[v].outputTensors;p.push(y[b])}return new e({inputs:d,outputs:p,name:u})}get stateful(){if(this._stateful)throw new ae("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(let e of this.layers)if(e.stateful)return!0;return!1}resetStates(){te(()=>{this.layers.forEach(e=>{e.stateful&&e.resetStates()})})}};function iie(e,t,r){let a=t.length;if(e==null||Array.isArray(e)&&e.length===0)return t.map(n=>null);if(a===1)return Array.isArray(e)&&e.length===1?e:typeof e=="object"&&t[0]in e?[e[t[0]]]:[e];if(Array.isArray(e)){if(e.length!==a)throw new Error(`Provided ${r} is an array of ${e.length} element(s), but the model has ${a} outputs. Make sure a set of weights is provided for each model output.`);return e}else if(typeof e=="object"&&Object.keys(e).length>0&&typeof e[Object.keys(e)[0]]=="object"){let n=[];return t.forEach(i=>{i in e?n.push(e[i]):n.push(null)}),n}else throw new Error(`The model has multiple (${a}) outputs, so ${r} must be either an array with ${a} elements or an object with ${t} keys. Provided ${r} not understood: ${JSON.stringify(e)}`)}function kF(e,t){return iie(e,t,"classWeight")}async function EF(e,t,r,a){if(t!=null||a!=null)throw new Error("Support sampleWeight is not implemented yet");if(r!=null){let n=te(()=>{if(e.shape.length===1)return rs(e);if(e.shape.length===2){if(e.shape[1]>1)return gl(e,1);if(e.shape[1]===1)return re(e,[e.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${e.shape[1]}) during handling of class weights. The size is expected to be >= 1.`)}else throw new Error(`Unexpected rank of target (y) tensor (${e.rank}) during handling of class weights. The rank is expected to be 1 or 2.`)}),i=Array.from(await n.data());lt(n);let s=[];return i.forEach(o=>{if(r[o]==null)throw new Error(`classWeight must contain all classes in the training data. The class ${o} exists in the data but not in classWeight`);s.push(r[o])}),Nt(s,"float32")}else return null}function sie(e,t){return ee(e,t)}var oie=32;function CF(e,t){let r,a,n=t;r=n.xs,a=n.ys,_.assert(r!=null&&a!=null,()=>`A Dataset iterator for fitDataset() is expected to generate objects of the form \`{xs: xVal, ys: yVal}\`, where the two values may be \`tf.Tensor\`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates ${t}`);let i=pA("input",e.inputNames,r),s=pA("output",e.outputNames,a),o=i[0].shape[0];_.assert(i.length===e.inputs.length,()=>`LayersModel has ${e.inputs.length} inputs, but the dataset provides ${i.length} inputs.  (Expected input keys: ${JSON.stringify(e.inputNames)})`),_.assert(s.length===e.outputs.length,()=>`LayersModel has ${e.outputs.length} outputs, but the dataset provides ${s.length} outputs.  (Expected output keys: ${JSON.stringify(e.outputNames)})`);for(let l=0;l<i.length;l++)_.assert(i[l].shape[0]===o,()=>`Batch size mismatch: input ${e.inputNames[l]} has ${i[l].shape[0]}; expected  ${o} based on input ${e.inputNames[0]}.`);for(let l=0;l<s.length;l++)_.assert(s[l].shape[0]===o,()=>`Batch size mismatch: output ${e.outputNames[l]} has ${s[l].shape[0]}; expected  ${o} based on input ${e.inputNames[0]}.`);return{xs:i,ys:s}}function pA(e,t,r){if(r instanceof ht)return[r];if(Array.isArray(r))return _.assert(r.length===t.length,()=>`Received an array of ${r.length} Tensors, but expected ${t.length} to match the ${e} keys ${t}.`),r;{let a=[];for(let n of t){if(r[n]==null)throw new ae(`The feature data generated by the dataset lacks the required ${e} key '${n}'.`);a.push(r[n])}return a}}function lie(e){if(e.length===3)throw new dt("Validation with sample weights is not implemented yet.");return{xs:e[0],ys:e[1]}}async function uie(e,t,r){let a=r.batchesPerEpoch!=null;if(_.assert(e.optimizer!=null,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),_.assert(r!=null,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),_.assert(r.epochs!=null&&r.epochs>0&&Number.isInteger(r.epochs),()=>`For fitDataset(), config.epochs is expected to be a positive integer, but got ${r.epochs}`),_.assert(!a||r.batchesPerEpoch>0&&Number.isInteger(r.batchesPerEpoch),()=>`For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got ${r.batchesPerEpoch}`),_.assert(r.validationSplit==null,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),e.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");e.isTraining=!0;try{let n=r.validationData!=null,i,s;if(n)if(fA(r.validationData))_.assert(r.validationBatches==null||r.validationBatches>0&&Number.isInteger(r.validationBatches),()=>`For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got ${r.validationBatches}`);else{let g=lie(r.validationData);i=g.xs,s=g.ys}let o=e.makeTrainFunction(),l=e.getDedupedMetricsNames(),u;n?u=l.slice().concat(l.map(g=>"val_"+g)):u=l.slice();let c=hF(r.callbacks,r.yieldEvery),d=r.verbose==null?1:r.verbose,{callbackList:p,history:f}=mF(c,d,r.epochs,null,null,cie(t,r),null,n,u);p.setModel(e),e.history=f,await p.onTrainBegin(),e.stopTraining_=!1;let h=r.initialEpoch==null?0:r.initialEpoch,m=await t.iterator();for(;h<r.epochs;){let g={};await p.onEpochBegin(h);let v=0,b=0;for(a||(m=await t.iterator());!a||v<r.batchesPerEpoch;){let y=await m.next();if(a&&y.done){console.warn(`You provided \`batchesPerEpoch\` as ${r.batchesPerEpoch}, but your dataset iterator ran out of data after ${v} batches; interrupting training. Make sure that your dataset can generate at least \`batchesPerEpoch * epochs\` batches (in this case, ${r.batchesPerEpoch*r.epochs} batches). You may need to use the repeat() function when building your dataset.`);break}if(y.value!=null){let{xs:w,ys:x}=CF(e,y.value),k={};k.batch=b,k.size=w[0].shape[0],await p.onBatchBegin(b,k);let C=[];if(r.classWeight!=null){let N=kF(r.classWeight,e.outputNames);for(let I=0;I<N.length;++I)C.push(await EF(x[I],null,N[I]))}let E=w.concat(x).concat(C),$=o(E);lt(E);for(let N=0;N<l.length;++N){let I=l[N],S=$[N];k[I]=S,zr(S)}await p.onBatchEnd(b,k),cF(k),b++,v++}if(a?v>=r.batchesPerEpoch:y.done){if(n){let w;fA(r.validationData)?w=jt(await e.evaluateDataset(r.validationData,{batches:r.validationBatches})):w=jt(e.evaluate(i,s,{batchSize:r.validationBatchSize==null?oie:r.validationBatchSize,verbose:0}));for(let x=0;x<e.metricsNames.length;++x)g[`val_${e.metricsNames[x]}`]=w[x]}break}if(e.stopTraining_)break}if(await p.onEpochEnd(h,g),h++,e.stopTraining_)break}return await p.onTrainEnd(),await e.history.syncData(),e.history}finally{e.isTraining=!1}}function cie(e,t){let r=null;return t.batchesPerEpoch!=null?r=t.batchesPerEpoch:Number.isFinite(e.size)&&(r=e.size),r}function fA(e){return typeof e.iterator=="function"}function die(e){return typeof e.next=="function"}async function pie(e,t,r){r=r||{};let a=r.batches!=null,n=e.testFunction,i=[];if(r.verbose>0)throw new dt("Verbose mode is not implemented yet.");_.assert(!a||r.batches>0&&Number.isInteger(r.batches),()=>`Test loop expects \`batches\` to be a positive integer, but received ${JSON.stringify(r.batches)}`);let s=die(t)?t:await t.iterator(),o=0,l=0;for(;!a||l<r.batches;){let u=await s.next();if(i=te(()=>{if(u.value){let{xs:c,ys:d}=CF(e,u.value),p=c.concat(d),f=te(()=>n(p));if(lt(p),l===0)for(let m=0;m<f.length;++m)i.push(et(0));let h=p[0].shape[0];for(let m=0;m<f.length;++m){let g=f[m],v=i[m];i[m]=te(()=>xe(i[m],ee(h,g))),l>0&&lt(v)}lt(f),o+=h,++l}return i}),u.done){a&&console.warn(`Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least \`batches\` batches (in this case, ${r.batches} batches). You may need to use the repeat() function when building your dataset.`);break}}for(let u=0;u<i.length;++u){let c=i[u];i[u]=Ve(i[u],o),lt(c)}return Rn(i)}function wk(e){_.assert(e>0&&Number.isInteger(e),()=>`batchSize is required to be a positive integer, but got ${e}`)}function mf(e,t,r){return e==null?[null]:Array.isArray(e)?e.map(a=>nl(a,t,r-t)):nl(e,t,r-t)}function DS(e,t){return te(()=>e==null?null:Array.isArray(e)?e.map(r=>DS(r,t)):rF(e,t.dtype==="int32"?t:Te(t,"int32")))}function xk(e,t){let r=[],a=0,n=null;for(;a<e;)n=a+t,n>=e&&(n=e),r.push([a,n]),a=n;return r}async function fie(e,t,r,a,n,i,s,o,l,u,c,d,p,f,h){n==null&&(n=32),i==null&&(i=1),c==null&&(c=!0),p==null&&(p=0);let m=!1;if(l!=null&&u!=null&&(m=!0),h!=null&&(m=!0,f==null))throw new ae("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");let g=e.checkNumSamples(r,n,f,"steps_per_epoch"),v;g!=null&&(v=si(0,g)),s==null&&(s=1);let{callbackList:b,history:y}=mF(o,s,i,p,g,f,n,m,d);b.setModel(e),e.history=y,await b.onTrainBegin(),e.stopTraining_=!1;for(let w=p;w<i;++w){await b.onEpochBegin(w);let x={};if(f!=null)throw new dt("stepsPerEpoch mode is not implemented yet.");{if(c==="batch")throw new dt("batch shuffling is not implemneted yet");c&&_.shuffle(v);let k=Nt(v),C=xk(g,n);for(let E=0;E<C.length;++E){let $={};if(await b.onBatchBegin(E,$),te(()=>{let N=C[E][0],I=C[E][1],S=nl(k,N,I-N);$.batch=E,$.size=I-N;let A=DS(r,S),R=t(A);for(let O=0;O<a.length;++O){let D=a[O],z=R[O];$[D]=z,zr(z)}if(E===C.length-1&&m){let O=e.testLoop(l,u,n);for(let D=0;D<a.length;++D){let z=a[D],U=O[D];zr(U),x["val_"+z]=U}}}),await b.onBatchEnd(E,$),cF($),e.stopTraining_)break}k.dispose()}if(await b.onEpochEnd(w,x),e.stopTraining_)break}return await b.onTrainEnd(),await e.history.syncData(),e.history}async function hie(e,t,r,a={}){if(e.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");e.isTraining=!0;let n,i,s,o,l,u,c,d,p;try{let f=a.batchSize==null?32:a.batchSize;wk(f);let h=!1,m=await e.standardizeUserData(t,r,a.sampleWeight,a.classWeight,h,f);n=m[0],i=m[1],p=m[2];let g=!1,v;if(a.validationData!=null&&a.validationData.length>0){if(g=!0,a.validationData.length===2)l=a.validationData[0],u=a.validationData[1];else throw a.validationData.length===3?new dt("validationData including sample weights is not supported yet."):new ae(`When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; ${a.validationData} is invalid.`);let E=!0,$=await e.standardizeUserData(l,u,null,null,E,f);c=$[0],d=$[1],v=c.concat(d)}else if(a.validationSplit!=null&&a.validationSplit>0&&a.validationSplit<1){g=!0;let E=Math.floor(n[0].shape[0]*(1-a.validationSplit)),$=n[0].shape[0];c=mf(n,E,$),s=n,n=mf(n,0,E),d=mf(i,E,$),o=i,i=mf(i,0,E),v=c.concat(d)}else a.validationSteps!=null&&(g=!0);let b=n.concat(i).concat(p);e.checkTrainableWeightsConsistency();let y=e.makeTrainFunction(),w=e.getDedupedMetricsNames(),x,k;g?(e.makeTestFunction(),x=e.testFunction,k=w.slice().concat(w.map(E=>"val_"+E))):(x=null,v=[],k=w.slice());let C=hF(a.callbacks,a.yieldEvery);return await fie(e,y,b,w,f,a.epochs,a.verbose,C,x,v,a.shuffle,k,a.initialEpoch,null,null)}finally{e.isTraining=!1,Qa(n,t),Qa(i,r),Qa(s,t),Qa(o,r),Qa(c,l),Qa(d,u),p!=null&&lt(p)}}function SF(e){let t=[];e instanceof ht&&(e=[e]);for(let r=0;r<e.length;++r){let a=e[r];if(a.rank===1)t.push(gm(a,1));else{if(a.rank===0)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");t.push(a)}}return t}function Qa(e,t){if(e==null)return;let r=[];if(t instanceof ht)r.push(t.id);else if(Array.isArray(t))t.forEach(n=>r.push(n.id));else if(t!=null)for(let n in t){let i=t[n];r.push(i.id)}let a=[];if(e instanceof ht)r.indexOf(e.id)===-1&&a.push(e);else if(Array.isArray(e))e.forEach(n=>{r.indexOf(n.id)===-1&&a.push(n)});else if(e!=null)for(let n in e){let i=e[n];r.indexOf(i.id)===-1&&a.push(i)}a.forEach(n=>{n.isDisposed||n.dispose()})}function mie(e){return e instanceof ht}function kk(e){return Array.isArray(e)}function hA(e){return!mie(e)&&!kk(e)}function mA(e,t,r,a=!0,n=""){if(t==null||t.length===0){if(e!=null){let s=!1;if(kk(e)&&e.length>0)s=!0;else if(hA(e)){for(let o in e)if(e.hasOwnProperty(o)){s=!0;break}}else s=!0;if(s)throw new ae(`Error when checking model ${n} expected no data, but got ${e}`)}return[]}if(e==null)return t.map(s=>null);let i;if(hA(e)){e=e,i=[];for(let s of t){if(e[s]==null)throw new ae(`No data provided for "${s}". Need data for each key in: ${t}`);i.push(e[s])}}else if(kk(e)){if(e=e,e.length!==t.length)throw new ae(`Error when checking model ${n}: the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ${t.length} Tensor(s), but instead got the following list of Tensor(s): ${e}`);i=e}else{if(e=e,t.length>1)throw new ae(`The model ${n} expects ${t.length} Tensor(s), but only received one Tensor. Found: Tensor with shape ${e.shape}`);i=[e]}if(i=SF(i),r!=null)for(let s=0;s<t.length;++s){if(r[s]==null)continue;let o=i[s];if(o.shape.length!==r[s].length)throw new ae(`Error when checking ${n}: expected ${t[s]} to have ${r[s].length} dimension(s). but got array with shape ${o.shape}`);for(let l=0;l<r[s].length;++l){if(l===0&&!a)continue;let u=o.shape[l],c=r[s][l];if(c!=null&&c>=0&&u!==c)throw new ae(`${n} expected a batch of elements where each example has shape [${r[s].slice(1,r[s].length)}] (i.e.,tensor shape [*,${r[s].slice(1,r[s].length)}]) but the ${n} received an input with ${o.shape[0]} examples, each with shape [${o.shape.slice(1,o.shape.length)}] (tensor shape [${o.shape}])`)}}return i}function gie(e,t,r){let a=Xs(e.map(i=>i.shape[0]));a.sort();let n=Xs(t.map(i=>i.shape[0]));if(n.sort(),a.length>1)throw new ae(`All input Tensors (x) should have the same number of samples. Got array shapes: ${JSON.stringify(e.map(i=>i.shape))}`);if(n.length>1)throw new ae(`All target Tensors (y) should have the same number of samples. Got array shapes: ${JSON.stringify(t.map(i=>i.shape))}`);if(a.length>0&&n.length>0&&!_.arraysEqual(a,n))throw new ae(`Input Tensors should have the same number of samples as target Tensors. Found ${a[0]} input sample(s) and ${n[0]} target sample(s).`)}function vie(e,t,r){let a=[Ru,f0,ph];for(let n=0;n<e.length;++n){let i=e[n],s=t[n],o=r[n];if(s!=null){if(s===ph&&i.shape[i.shape.length-1]===1)throw new ae(`You are passing a target array of shape ${i.shape} while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].`);if(a.indexOf(s)!==-1){let l=i.shape.slice(1),u=o.slice(1);for(let c=0;c<l.length;++c){let d=l[c],p=u[c];if(p!=null&&d!==p)throw new ae(`A target Tensor with shape ${i.shape} was passed for an output of shape ${o}, while using a loss function that expects targets to have the same shape as the output.`)}}}}}function gA(e,t,r,a=!0,n=""){let i;if(Array.isArray(e)){if(e.length!==t.length)throw new ae(`Error when checking model ${n}: the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ${t.length} Tensor(s), but instead got ${e.length} Tensors(s).`);i=e}else{if(t.length>1)throw new ae(`The model expects ${t.length} ${n} Tensors, but only received one Tensor. Found: array with shape ${JSON.stringify(e.shape)}.`);i=[e]}if(r!=null)for(let s=0;s<t.length;++s){if(r[s]==null)continue;let o=i[s];if(o.shape.length!==r[s].length)throw new ae(`Error when checking ${n}: expected ${t[s]} to have ${r[s].length} dimension(s), but got array with shape ${JSON.stringify(o.shape)}`);for(let l=0;l<r[s].length;++l){if(l===0&&!a)continue;let u=o.shape[l],c=r[s][l];if(c!=null&&c!==u)throw new ae(`Error when checking ${n}: expected ${t[s]} to have shape ${JSON.stringify(r[s])} but got array with shape ${JSON.stringify(o.shape)}.`)}}}function bie(e,t){if(e==null||Array.isArray(e)&&e.length===0)return t.map(a=>[]);let r;if(typeof e=="string"||typeof e=="function")r=[e];else if(Array.isArray(e)||typeof e=="object")r=e;else throw new TypeError(`Type of metrics argument not understood. Expected an string,function, Array, or Object, found: ${e}`);if(Array.isArray(r))return t.map(a=>r);{let a=[];for(let n of t){let i=r.hasOwnProperty(n)?r[n]:[];Array.isArray(i)||(i=[i]),a.push(i)}return a}}var yie="layers-model",as=class extends hi{constructor(e){super(e),this.isTraining=!1}summary(e,t,r=console.log){if(!this.built)throw new ae("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");eie(this,e,t,r)}compile(e){if(e.loss==null&&(e.loss=[]),this.loss=e.loss,typeof e.optimizer=="string")this.optimizer_=Jae(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof hs))throw new ae("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}let t=[];if(!Array.isArray(e.loss)&&typeof e.loss!="string"&&typeof e.loss!="function"){e.loss=e.loss;for(let i in e.loss)if(this.outputNames.indexOf(i)===-1)throw new ae(`Unknown entry in loss dictionary: "${i}". Only expected the following keys: ${this.outputNames}`);for(let i of this.outputNames)e.loss[i]==null&&console.warn(`Output "${i}" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ${i} during training`),t.push(jw(e.loss[i]))}else if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new ae(`When passing an Array as loss, it should have one entry per model output. The model has ${this.outputs.length} output(s), but you passed loss=${e.loss}.`);t=e.loss.map(i=>jw(i))}else{let i=jw(e.loss);this.outputs.forEach(s=>{t.push(i)})}this.lossFunctions=t,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let i=0;i<this.outputs.length;++i){let s=this.internalOutputShapes[i],o=this.outputNames[i];this.feedOutputNames.push(o),this.feedOutputShapes.push(s),this.feedLossFns.push(this.lossFunctions[i])}let r=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],rl("loss",()=>{for(let i=0;i<this.outputs.length;++i){if(r.indexOf(i)!==-1)continue;let s=this.lossFunctions[i];this.outputs.length>1&&(this.metricsTensors.push([s,i]),this.metricsNames.push(this.outputNames[i]+"_loss"))}});let a=bie(e.metrics,this.outputNames),n=(i,s,o)=>{this.outputNames.length>1&&(s=this.outputNames[i]+"_"+s),this.metricsNames.push(s),this.metricsTensors.push([o,i])};rl("metric",()=>{for(let i=0;i<this.outputs.length;++i){if(r.indexOf(i)!==-1)continue;let s=a[i];(o=>{let l="",u,c,d;for(let p of o){if(typeof p=="string"&&["accuracy","acc","crossentropy","ce"].indexOf(p)!==-1){let h=this.internalOutputShapes[i];h[h.length-1]===1||this.lossFunctions[i]===f0?["accuracy","acc"].indexOf(p)!==-1?c=MS:["crossentropy","ce"].indexOf(p)!==-1&&(c=bF):this.lossFunctions[i]===ab?["accuracy","acc"].indexOf(p)!==-1?c=yF:["crossentropy","ce"].indexOf(p)!==-1&&(c=wF):["accuracy","acc"].indexOf(p)!==-1?c=RS:["crossentropy","ce"].indexOf(p)!==-1&&(c=OS);let m;["accuracy","acc"].indexOf(p)!==-1?m="acc":["crossentropy","ce"].indexOf(p)!==-1&&(m="ce"),d=c,u=l+m}else d=Qae(p),u=l+Ig(p);let f;rl(u,()=>{f=d}),n(i,u,f)}})(s)}}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){this.collectedTrainableWeights!=null&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(e,t,r={}){let a=r.batchSize==null?32:r.batchSize;wk(a);let n=!0,i=this.standardizeUserDataXY(e,t,n,a);try{let s=i[0].concat(i[1]);this.makeTestFunction();let o=this.testFunction,l=this.testLoop(o,s,a,r.verbose,r.steps);return Rn(l)}finally{Qa(i[0],e),Qa(i[1],t)}}async evaluateDataset(e,t){return this.makeTestFunction(),pie(this,e,t)}checkNumSamples(e,t,r,a="steps"){let n;if(r!=null){if(n=null,t!=null)throw new ae(`If ${a} is set, batchSize must be null or undefined.Got batchSize = ${t}`)}else if(e!=null)Array.isArray(e)?n=e[0].shape[0]:n=e.shape[0];else throw new ae(`Either the input data should have a defined shape, or ${a} shoud be specified.`);return n}execute(e,t){if(Array.isArray(t)&&t.length===0)throw new ae("`outputs` is an empty Array, which is not allowed.");let r=Array.isArray(t),a=r?t:[t],n=this.retrieveSymbolicTensors(a),i=new Yo;if(e instanceof ht&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new ae(`The number of inputs provided (${e.length}) does not match the number of inputs of this model (${this.inputs.length}).`);for(let o=0;o<this.inputs.length;++o)i.add(this.inputs[o],e[o])}else for(let o of this.inputs){let l=e[o.name];if(l==null)throw new ae(`No value is provided for the model's input ${o.name}`);i.add(o,l)}let s=hf(n,i);return r?s:s[0]}retrieveSymbolicTensors(e){let t=kl(null,e.length),r=e.length;for(let a of this.layers){let n=Array.isArray(a.output)?a.output:[a.output],i=n.map(s=>s.name);for(let s=0;s<e.length;++s){let o=i.indexOf(e[s]);if(o!==-1&&(t[s]=n[o],r--),r===0)break}if(r===0)break}if(r>0){let a=[];throw t.forEach((n,i)=>{n==null&&a.push(e[i])}),new ae(`Cannot find SymbolicTensors for output name(s): ${JSON.stringify(a)}`)}return t}predictLoop(e,t=32,r=!1){return te(()=>{let a=this.checkNumSamples(e);if(r)throw new dt("Verbose predictLoop() is not implemented yet.");let n=xk(a,t),i=this.outputs.map(s=>[]);for(let s=0;s<n.length;++s)te(()=>{let o=n[s][0],l=n[s][1],u=mf(e,o,l),c=[];if(Array.isArray(u))for(let p=0;p<u.length;++p)c.push({key:this.inputs[p],value:u[p]});else c.push({key:this.inputs[0],value:u});let d=new Yo(c);return hf(this.outputs,d)}).forEach((o,l)=>i[l].push(o));return Rn(i.map(s=>Ot(s,0)))})}predict(e,t={}){let r=SF(e);gA(r,this.inputNames,this.feedInputShapes,!1);try{let a=t.batchSize==null?32:t.batchSize;return wk(a),this.predictLoop(r,a)}finally{Qa(r,e)}}predictOnBatch(e){gA(e,this.inputNames,this.feedInputShapes,!0);let t=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,t)}standardizeUserDataXY(e,t,r=!0,a){if(this.optimizer_==null)throw new ei("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");let n=[];for(let i=0;i<this.feedOutputShapes.length;++i){let s=this.feedOutputShapes[i];this.feedLossFns[i]===ab?n.push(s.slice(0,s.length-1).concat([1])):n.push(s)}if(e=mA(e,this.feedInputNames,this.feedInputShapes,!1,"input"),t=mA(t,this.feedOutputNames,n,!1,"target"),gie(e,t),vie(t,this.feedLossFns,this.feedOutputShapes),this.stateful&&a!=null&&a>0&&e[0].shape[0]%a!==0)throw new ae(`In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ${a}. Found: ${e[0].shape[0]} sample(s).`);return[e,t]}async standardizeUserData(e,t,r,a,n=!0,i){let[s,o]=this.standardizeUserDataXY(e,t,n,i);if(r!=null)throw new Error("sample weight is not supported yet.");let l=null;if(a!=null){let u=kF(a,this.outputNames);l=[];for(let c=0;c<u.length;++c)l.push(await EF(o[c],null,u[c]))}return[s,o,l]}testLoop(e,t,r,a=0,n){return te(()=>{let i=this.checkNumSamples(t,r,n,"steps"),s=[];if(a>0)throw new dt("Verbose mode is not implemented yet.");if(n!=null)throw new dt("steps mode in testLoop() is not implemented yet");{let o=xk(i,r),l=Nt(si(0,i));for(let u=0;u<o.length;++u){let c=o[u][0],d=o[u][1],p=nl(l,c,d-c),f=DS(t,p),h=e(f);if(u===0)for(let m=0;m<h.length;++m)s.push(et(0));for(let m=0;m<h.length;++m){let g=h[m];s[m]=xe(s[m],ee(d-c,g))}}for(let u=0;u<s.length;++u)s[u]=Ve(s[u],i)}return s})}getDedupedMetricsNames(){let e=this.metricsNames,t=[];for(let r=0;r<e.length;++r){let a=e[r],n=a;tA(e,a)>1&&(n+=`_${tA(e.slice(0,r),a)}`),t.push(n)}return t}makeTrainFunction(){return e=>{let t=[],r=e.slice(0,this.inputs.length),a=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),n=e.slice(this.inputs.length+this.outputs.length,this.inputs.length+this.outputs.length*2),i=[],s=()=>{let u=[];for(let f=0;f<this.inputs.length;++f)u.push({key:this.inputs[f],value:r[f]});let c=new Yo(u),d=hf(this.outputs,c,{training:!0}),p;for(let f=0;f<this.lossFunctions.length;++f){let h=this.lossFunctions[f](a[f],d[f]);n[f]!=null&&(h=sie(h,n[f]));let m=Qt(h);t.push(m),f===0?p=h:p=xe(p,h)}for(let f=0;f<this.metricsTensors.length;++f){let h;if(this.outputs.length>1&&f<this.outputs.length)h=t[f];else{let m=this.metricsTensors[f][0],g=this.metricsTensors[f][1];h=Qt(m(a[g],d[g]))}zr(h),i.push(h)}return p=Qt(p),this.calculateLosses().forEach(f=>{p=xe(p,f)}),p},o=this.collectedTrainableWeights.map(u=>u.read()),l=!0;return[this.optimizer_.minimize(s,l,o)].concat(i)}}makeTestFunction(){this.testFunction=e=>te(()=>{let t=[],r,a=e.slice(0,this.inputs.length),n=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),i=[];for(let l=0;l<this.inputs.length;++l)i.push({key:this.inputs[l],value:a[l]});let s=new Yo(i),o=hf(this.outputs,s);for(let l=0;l<this.lossFunctions.length;++l){let u=this.lossFunctions[l],c=Qt(u(n[l],o[l]));l===0?r=c:r=xe(r,c),t.push(r)}for(let l=0;l<this.metricsTensors.length;++l){let u=this.metricsTensors[l][0],c=this.metricsTensors[l][1],d=Qt(u(n[c],o[c]));t.push(d)}return t})}async fit(e,t,r={}){return hie(this,e,t,r)}async fitDataset(e,t){return uie(this,e,t)}async trainOnBatch(e,t){let r=await this.standardizeUserData(e,t),a=r[0],n=r[1],i=this.makeTrainFunction()(a.concat(n)),s=[];for(let o of i){let l=await o.data();s.push(l[0])}return lt(i),Qa(r[0],e),Qa(r[1],t),Rn(s)}getNamedWeights(e){let t=[],r=e!=null&&e.trainableOnly,a=r?this.trainableWeights:this.weights,n=this.getWeights(r);for(let i=0;i<a.length;++i)r&&!a[i].trainable||t.push({name:a[i].originalName,tensor:n[i]});return t}set stopTraining(e){this.stopTraining_=e}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}dispose(){let e=super.dispose();if(e.refCountAfterDispose===0&&this.optimizer!=null&&this.isOptimizerOwned){let t=Kv().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=t-Kv().numTensors}return e}getLossIdentifiers(){let e;if(typeof this.loss=="string")e=Ui(this.loss);else if(Array.isArray(this.loss)){for(let t of this.loss)if(typeof t!="string")throw new Error("Serialization of non-string loss is not supported.");e=this.loss.map(t=>Ui(t))}else{let t=Object.keys(this.loss);e={};let r=this.loss;for(let a of t)if(typeof r[a]=="string")e[a]=Ui(r[a]);else throw new Error("Serialization of non-string loss is not supported.")}return e}getMetricIdentifiers(){if(typeof this.metrics=="string"||typeof this.metrics=="function")return[Ui(Ig(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(e=>Ui(Ig(e)));{let e={};for(let t in this.metrics)e[t]=Ui(Ig(this.metrics[t]));return e}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(e){if(e.weighted_metrics!=null)throw new Error("Loading weight_metrics is not supported yet.");if(e.loss_weights!=null)throw new Error("Loading loss_weights is not supported yet.");if(e.sample_weight_mode!=null)throw new Error("Loading sample_weight_mode is not supported yet.");let t=fh(e.optimizer_config),r=ai(t),a;if(typeof e.loss=="string")a=Vo(e.loss);else if(Array.isArray(e.loss))a=e.loss.map(i=>Vo(i));else if(e.loss!=null){a={};for(let i in e.loss)a[i]=Vo(e.loss[i])}let n;if(Array.isArray(e.metrics))n=e.metrics.map(i=>Vo(i));else if(e.metrics!=null){n={};for(let i in e.metrics)n[i]=Vo(e.metrics[i])}this.compile({loss:a,metrics:n,optimizer:r})}async save(e,t){if(typeof e=="string"){let s=rn.getSaveHandlers(e);if(s.length===0)throw new ae(`Cannot find any save handlers for URL '${e}'`);if(s.length>1)throw new ae(`Found more than one (${s.length}) save handlers for URL '${e}'`);e=s[0]}if(e.save==null)throw new ae("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");let r=await rn.encodeWeights(this.getNamedWeights(t)),a=!1,n=null,i={modelTopology:this.toJSON(n,a),format:yie,generatedBy:`TensorFlow.js tfjs-layers v${PS}`,convertedBy:null};if((t==null?!1:t.includeOptimizer)&&this.optimizer!=null){i.trainingConfig=this.getTrainingConfig();let s="optimizer",{data:o,specs:l}=await rn.encodeWeights(await this.optimizer.getWeights(),s);r.specs.push(...l),r.data=rn.concatenateArrayBuffers([r.data,o])}return this.userDefinedMetadata!=null&&(dA(this.userDefinedMetadata,this.name,!0),i.userDefinedMetadata=this.userDefinedMetadata),i.weightData=r.data,i.weightSpecs=r.specs,e.save(i)}setUserDefinedMetadata(e){dA(e,this.name),this.userDefinedMetadata=e}getUserDefinedMetadata(){return this.userDefinedMetadata}};as.className="Model";Ie.registerClass(as);var $F=class extends as{};$F.className="Functional";Ie.registerClass($F);async function wie(e,t){"modelTopology"in e||(e={modelTopology:e}),e=e;let r=e.modelTopology;r.model_config!=null&&(r=r.model_config);let a=fh(r),n=ai(a,t);if(e.weightsManifest!=null){let i=await rn.loadWeights(e.weightsManifest,e.pathPrefix,n.weights.map(o=>o.originalName)),s={};for(let o of n.weights)s[o.originalName]=i[o.originalName];n.loadWeights(s),lt(i)}return n}async function xie(e,t){if(t==null&&(t={}),typeof e=="string"){let r=rn.getLoadHandlers(e,t);if(r.length===0)r.push(rn.browserHTTPRequest(e,t));else if(r.length>1)throw new ae(`Found more than one (${r.length}) load handlers for URL '${e}'`);e=r[0]}return kie(e,void 0,t)}async function kie(e,t,r){if(r==null&&(r={}),e.load==null)throw new ae("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");let a=await e.load(),n=a.modelTopology;n.model_config!=null&&(n=n.model_config);let i=r.strict==null?!0:r.strict,s=a.weightData!=null&&a.weightSpecs!=null&&i,o=ai(fh(n),t,s),l=a.trainingConfig;if(l!=null&&o.loadTrainingConfig(l),a.userDefinedMetadata!=null&&o.setUserDefinedMetadata(a.userDefinedMetadata),a.weightData!=null){if(a.weightSpecs==null)throw new ae("LayersModel artifacts contains weight data, but not weight specs. Therefore loading of weights cannot proceed.");let{modelWeights:u,optimizerWeights:c}=Eie(a.weightData,a.weightSpecs);o.loadWeights(u,i),o.optimizer!=null&&c.length>0&&await o.optimizer.setWeights(c),lt(u),lt(c.map(d=>d.tensor))}return o}function Eie(e,t){let r=rn.decodeWeights(e,t),a={},n=[];return t.forEach(i=>{i.group==="optimizer"?n.push({name:i.name,tensor:r[i.name]}):a[i.name]=r[i.name]}),{modelWeights:a,optimizerWeights:n}}var Vc=class extends as{constructor(e){if(super({inputs:[],outputs:[]}),e=e||{},this.trainable=!0,this.built=!1,this.name=e.name!=null?e.name:t0("sequential_"),e.layers!=null)for(let t of e.layers)this.add(t)}checkShape(e){if(e.inboundNodes[0].outputTensors[0].shape.some(t=>t<0))throw new ae(`Negative dimension size caused by adding layer ${e.name} with input shape [${e.inboundNodes[0].inputTensors[0].shape}]`)}add(e){let t=e instanceof Vc||e instanceof as,r;if(t){if(r=e,r.outputs.length!==1)throw new ae("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(r.inputs.length!==1)throw new ae("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(this.outputs.length===0){if(e.inboundNodes.length===0){if(e.batchInputShape==null)throw new ae("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");let a=sF({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(a)}if(t)this.outputs=r.outputs,this.inputs=r.inputs;else{if(e.inboundNodes.length!==1)throw new ae(`A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ${e.name} which has ${e.inboundNodes.length} pre-existing inbound connections.`);if(e.inboundNodes[0].outputTensors.length!==1)throw new ae("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=iF(this.outputs[0])}this.inboundNodes=[],new d0({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:kl(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(a=>a.shape),outputShapes:this.outputs[0].shape})}else{let a=e.apply(this.outputs[0]);if(Array.isArray(a))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[a],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}pop(){if(this.layers.length===0)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),this.layers.length===0)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{let e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(e,t){return this.model==null&&this.build(),this.model.call(e,t)}build(e){if(_t(e),this.inputs.length===0||this.outputs.length===0)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new as({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(e,t,r=console.log){this.built||this.build(),super.summary(e,t,r)}setWeights(e){this.model==null&&this.build(),this.model.setWeights(e)}evaluate(e,t,r={}){if(!this.built)throw new ei("The model needs to be compiled before being used.");return this.model.evaluate(e,t,r)}async evaluateDataset(e,t){if(!this.built)throw new ei("The model needs to be compiled before being used.");return this.model.evaluateDataset(e,t)}predict(e,t={}){return this.model==null&&this.build(),this.model.predict(e,t)}predictOnBatch(e){return this.model==null&&this.build(),this.model.predictOnBatch(e)}compile(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return this.model==null?void 0:this.model.optimizer}set optimizer(e){this.model.optimizer=e}async fit(e,t,r={}){if(!this.built)throw new ei("The model needs to be compiled before being used.");return this.model.fit(e,t,r)}async fitDataset(e,t){if(!this.built)throw new ei("The model needs to be compiled before being used.");return this.model.fitDataset(e,t)}async trainOnBatch(e,t){return this.model.trainOnBatch(e,t)}static fromConfig(e,t,r={},a=!1){let n,i={};if(t instanceof Array){if(t[0].className==null||t[0].className==="Merge")throw new ae("Legacy serialization format not supported yet.");n=t}else _.assert(t.layers!=null,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),n=t.layers,delete t.layers,i=t;let s=new e(i);if(!(s instanceof Vc))throw new dt(`Sequential.fromConfig called on non-Sequential input: ${s}`);for(let o of n){let l=ai(o,void 0,a);a&&l.setFastWeightInitDuringBuild(!0),s.add(l)}return s}set stopTraining(e){if(this.model==null)throw new ae("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}get stopTraining(){if(this.model==null)throw new ae("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){let e=[];for(let t of this.layers){let r={};r.className=t.getClassName(),r.config=t.getConfig(),e.push(r)}return{name:this.name,layers:e}}};Vc.className="Sequential";Ie.registerClass(Vc);function Cie(e){return new as(e)}function Sie(e){return new Vc(e)}function $ie(e,t){return t==null&&(t={}),xie(e,t)}function IF(e){return sF(e)}function Iie(e,t){Aa.registerCallbackConstructor(e,t)}var Hn=class extends Ie.Serializable{getConfig(){return{}}},TF=class extends Hn{apply(e,t=1){return Xne(e,t)}};TF.className="elu";Ie.registerClass(TF);var NF=class extends Hn{apply(e){return Ly(e)}};NF.className="selu";Ie.registerClass(NF);var AF=class extends Hn{apply(e){return At(e)}};AF.className="relu";Ie.registerClass(AF);var _F=class extends Hn{apply(e){return te(()=>up(6,At(e)))}};_F.className="relu6";Ie.registerClass(_F);var MF=class extends Hn{apply(e){return e}};MF.className="linear";Ie.registerClass(MF);var RF=class extends Hn{apply(e){return Da(e)}};RF.className="sigmoid";Ie.registerClass(RF);var OF=class extends Hn{apply(e){return Kne(e)}};OF.className="hardSigmoid";Ie.registerClass(OF);var PF=class extends Hn{apply(e){return _u(e)}};PF.className="softplus";Ie.registerClass(PF);var DF=class extends Hn{apply(e){return Yne(e)}};DF.className="softsign";Ie.registerClass(DF);var FF=class extends Hn{apply(e){return vl(e)}};FF.className="tanh";Ie.registerClass(FF);var FS=class extends Hn{apply(e,t=-1){return So(e,t)}};FS.className="softmax";Ie.registerClass(FS);var LF=class extends Hn{apply(e,t=-1){return _y(e,t)}};LF.className="logSoftmax";Ie.registerClass(LF);var zF=class extends Hn{apply(e,t=1){return te(()=>ee(Da(ee(e,t)),e))}};zF.className="swish";Ie.registerClass(zF);var BF=class extends Hn{apply(e){return te(()=>ee(e,vl(_u(e))))}};BF.className="mish";Ie.registerClass(BF);function oo(e){return e.getClassName()}function Gw(e,t={}){return mm(e,Ie.SerializationMap.getMap().classNameMap,t,"activation")}function lo(e){if(e==null){let t={};return t.className="linear",t.config={},Gw(t)}if(typeof e=="string"){let t={};return t.className=e,t.config={},Gw(t)}else return e instanceof Hn?e:Gw(e)}function LS(e){if(e!=null&&typeof e!="object")throw new Error(`Argument to L1L2 regularizer's constructor is expected to be an object, but received: ${e}`)}var VF=class extends Ie.Serializable{},wm=class extends VF{constructor(e){super(),LS(e),this.l1=e==null||e.l1==null?.01:e.l1,this.l2=e==null||e.l2==null?.01:e.l2,this.hasL1=this.l1!==0,this.hasL2=this.l2!==0}apply(e){return te(()=>{let t=Jt([1]);return this.hasL1&&(t=xe(t,Ue(ee(this.l1,xr(e))))),this.hasL2&&(t=xe(t,Ue(ee(this.l2,vm(e))))),re(t,[])})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(e,t){return new e({l1:t.l1,l2:t.l2})}};wm.className="L1L2";Ie.registerClass(wm);function Tie(e){return LS(e),new wm({l1:e!=null?e.l1:null,l2:0})}function Nie(e){return LS(e),new wm({l2:e!=null?e.l2:null,l1:0})}var vA={l1l2:"L1L2"};function Dt(e){return mS(e)}function bA(e,t={}){return mm(e,Ie.SerializationMap.getMap().classNameMap,t,"regularizer")}function Zt(e){if(e==null)return null;if(typeof e=="string"){let t={className:e in vA?vA[e]:e,config:{}};return bA(t)}else return e instanceof VF?e:bA(e)}var zS=class extends Et{constructor(e){super(e==null?{}:e),this.supportsMasking=!0,e!=null&&(this.maxValue=e.maxValue)}call(e,t){e=mt(e);let r=At(e);return this.maxValue!=null&&(r=sn(r,0,this.maxValue)),r}computeOutputShape(e){return e}getConfig(){let e={maxValue:this.maxValue},t=super.getConfig();return Object.assign(e,t),e}};zS.className="ReLU";Ie.registerClass(zS);var BS=class extends Et{constructor(e){super(e==null?{}:e),this.DEFAULT_ALPHA=.3,e==null&&(e={}),this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,t){let r=mt(e);return im(r,this.alpha)}computeOutputShape(e){return e}getConfig(){let e={alpha:this.alpha},t=super.getConfig();return Object.assign(e,t),e}};BS.className="LeakyReLU";Ie.registerClass(BS);var VS=class extends Et{constructor(e){if(super(e==null?{}:e),this.DEFAULT_ALPHA_INITIALIZER="zeros",e==null&&(e={}),this.supportsMasking=!0,this.alphaInitializer=Kt(e.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=Zt(e.alphaRegularizer),this.alphaConstraint=Or(e.alphaConstraint),e.sharedAxes==null)this.sharedAxes=null;else if(Array.isArray(e.sharedAxes))this.sharedAxes=e.sharedAxes;else if(typeof e.sharedAxes=="number")this.sharedAxes=[e.sharedAxes];else throw new ae(`Expected sharedAxes to be a number or an array of numbers, but got ${e.sharedAxes}`)}build(e){e=_t(e);let t=e.slice(1);if(this.sharedAxes!=null)for(let a of this.sharedAxes)t[a-1]=1;this.alpha=this.addWeight("alpha",t,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);let r={};if(this.sharedAxes!=null)for(let a=1;a<e.length;++a)r[a]=e[a];this.inputSpec=[new kr({ndim:e.length,axes:r})],this.built=!0}call(e,t){return e=mt(e),um(e,this.alpha.read())}getConfig(){let e={alphaInitializer:er(this.alphaInitializer),alphaRegularizer:Dt(this.alphaRegularizer),alphaConstraint:Rr(this.alphaConstraint),sharedAxes:this.sharedAxes},t=super.getConfig();return Object.assign(e,t),e}};VS.className="PReLU";Ie.registerClass(VS);var WS=class extends Et{constructor(e){if(super(e==null?{}:e),this.DEFAULT_ALPHA=1,e==null&&(e={}),e.alpha!=null&&e.alpha!==this.DEFAULT_ALPHA)throw new dt(`Non-default alpha value (${e.alpha}) is not supported by the ELU layer yet.`);this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,t){let r=mt(e);return op(r)}computeOutputShape(e){return e}getConfig(){let e={alpha:this.alpha},t=super.getConfig();return Object.assign(e,t),e}};WS.className="ELU";Ie.registerClass(WS);var HS=class extends Et{constructor(e){super(e==null?{}:e),this.DEFAULT_THETA=1,e==null&&(e={}),this.theta=e.theta==null?this.DEFAULT_THETA:e.theta}call(e,t){let r=mt(e);return ee(r,Te(Wn(r,this.theta),"float32"))}computeOutputShape(e){return e}getConfig(){let e={theta:this.theta},t=super.getConfig();return Object.assign(e,t),e}};HS.className="ThresholdedReLU";Ie.registerClass(HS);var US=class extends Et{constructor(e){super(e==null?{}:e),this.DEFAULT_AXIS=1,e==null&&(e={}),this.softmax=new FS().apply,this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis}call(e,t){let r=mt(e);return this.softmax(r,this.axis)}computeOutputShape(e){return e}getConfig(){let e={axis:this.axis},t=super.getConfig();return Object.assign(e,t),e}};US.className="Softmax";Ie.registerClass(US);function $c(e,t,r){if(typeof e=="number")return kl(e,t);if(e.length!==t)throw new ae(`The ${r} argument must be an integer or tuple of ${t} integers. Received: ${e.length} elements.`);for(let a=0;a<t;++a){let n=e[a];if(!Une(n))throw new ae(`The ${r} argument must be an integer or tuple of ${t} integers. Received: ${JSON.stringify(e)} including a non-integer number ${n}`)}return e}function ii(e,t,r,a,n=1){if(e==null)return e;let i=t+(t-1)*(n-1),s;return r==="same"?s=e:s=e-i+1,Math.floor((s+a-1)/a)}function bi(e,t,r,a){if(e==null)return null;if(a==="valid")e=e*t+so([r-t,0]);else if(a==="same")e=e*t;else throw new ae(`Unsupport padding mode: ${a}.`);return e}function jS(e,t){return te(()=>(gr(t),t==="channelsFirst"?ct(e,[0,2,3,1]):e))}function WF(e,t){return te(()=>(gr(t),t==="channelsFirst"?ct(e,[0,2,3,4,1]):e))}function Aie(e,t,r,a=1,n="valid",i,s=1){return te(()=>{if(i==null&&(i=oi()),gr(i),e.shape.length!==3)throw new ae(`The input of a conv1dWithBias operation should be 3, but is ${e.shape.length} instead.`);if(t.shape.length!==3)throw new ae(`The kernel for a conv1dWithBias operation should be 3, but is ${t.shape.length} instead`);if(r!=null&&r.shape.length!==1)throw new ae(`The bias for a conv1dWithBias operation should be 1, but is ${t.shape.length} instead`);if(i==="channelsFirst"&&(e=ct(e,[0,2,1])),n==="causal")throw new dt("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let o=Sy(e,t,a,n==="same"?"same":"valid","NWC",s);return r!=null&&(o=ci(o,r)),o})}function yA(e,t,r,a=[1,1],n="valid",i,s,o=null){return te(()=>{if(i==null&&(i=oi()),gr(i),e.rank!==3&&e.rank!==4)throw new ae(`conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ${e.rank}.`);if(t.rank!==3&&t.rank!==4)throw new ae(`conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ${e.rank}.`);let l=jS(e,i);if(n==="causal")throw new dt("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return l=io.conv2d({x:l,filter:t,strides:a,pad:n==="same"?"same":"valid",dilations:s,dataFormat:"NHWC",bias:r,activation:o}),i==="channelsFirst"&&(l=ct(l,[0,3,1,2])),l})}function _ie(e,t,r,a=[1,1,1],n="valid",i,s){return te(()=>{if(i==null&&(i=oi()),gr(i),e.rank!==4&&e.rank!==5)throw new ae(`conv3dWithBias expects input to be of rank 4 or 5, but received ${e.rank}.`);if(t.rank!==4&&t.rank!==5)throw new ae(`conv3dWithBias expects kernel to be of rank 4 or 5, but received ${e.rank}.`);let o=WF(e,i);if(n==="causal")throw new dt("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return o=DC(o,t,a,n==="same"?"same":"valid","NDHWC",s),r!=null&&(o=ci(o,r)),i==="channelsFirst"&&(o=ct(o,[0,4,1,2,3])),o})}var GS=class extends Et{constructor(e,t){if(super(t),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",GS.verifyArgs(t),this.rank=e,Br(this.rank,"rank"),this.rank!==1&&this.rank!==2&&this.rank!==3)throw new dt(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is not implemented yet.`);if(this.kernelSize=$c(t.kernelSize,e,"kernelSize"),this.strides=$c(t.strides==null?1:t.strides,e,"strides"),this.padding=t.padding==null?"valid":t.padding,$a(this.padding),this.dataFormat=t.dataFormat==null?"channelsLast":t.dataFormat,gr(this.dataFormat),this.activation=lo(t.activation),this.useBias=t.useBias==null?!0:t.useBias,this.biasInitializer=Kt(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=Or(t.biasConstraint),this.biasRegularizer=Zt(t.biasRegularizer),this.activityRegularizer=Zt(t.activityRegularizer),this.dilationRate=$c(t.dilationRate==null?1:t.dilationRate,e,"dilationRate"),this.rank===1&&Array.isArray(this.dilationRate)&&this.dilationRate.length!==1)throw new ae(`dilationRate must be a number or an array of a single number for 1D convolution, but received ${JSON.stringify(this.dilationRate)}`);if(this.rank===2){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==2)throw new ae(`dilationRate must be a number or array of two numbers for 2D convolution, but received ${JSON.stringify(this.dilationRate)}`)}else if(this.rank===3){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==3)throw new ae(`dilationRate must be a number or array of three numbers for 3D convolution, but received ${JSON.stringify(this.dilationRate)}`)}}static verifyArgs(e){if(vi("kernelSize"in e,"required key 'kernelSize' not in config"),typeof e.kernelSize!="number"&&!gS(e.kernelSize,"number",1,3))throw new ae(`BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ${JSON.stringify(e.kernelSize)}.`)}getConfig(){let e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:oo(this.activation),useBias:this.useBias,biasInitializer:er(this.biasInitializer),biasRegularizer:Dt(this.biasRegularizer),activityRegularizer:Dt(this.activityRegularizer),biasConstraint:Rr(this.biasConstraint)},t=super.getConfig();return Object.assign(e,t),e}},xm=class extends GS{constructor(e,t){super(e,t),this.kernel=null,xm.verifyArgs(t),this.filters=t.filters,Br(this.filters,"filters"),this.kernelInitializer=Kt(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=Or(t.kernelConstraint),this.kernelRegularizer=Zt(t.kernelRegularizer)}build(e){e=_t(e);let t=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[t]==null)throw new ae(`The channel dimension of the input should be defined. Found ${e[t]}`);let r=e[t],a=this.kernelSize.concat([r,this.filters]);this.kernel=this.addWeight("kernel",a,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[t]:r}}],this.built=!0}call(e,t){return te(()=>{e=mt(e);let r,a=this.bias==null?null:this.bias.read(),n=KD(this.activation.getClassName());if(n!=null&&this.rank===2)r=yA(e,this.kernel.read(),a,this.strides,this.padding,this.dataFormat,this.dilationRate,n);else{if(this.rank===1)r=Aie(e,this.kernel.read(),a,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(this.rank===2)r=yA(e,this.kernel.read(),a,this.strides,this.padding,this.dataFormat,this.dilationRate);else if(this.rank===3)r=_ie(e,this.kernel.read(),a,this.strides,this.padding,this.dataFormat,this.dilationRate);else throw new dt("convolutions greater than 3D are not implemented yet.");this.activation!=null&&(r=this.activation.apply(r))}return r})}computeOutputShape(e){e=_t(e);let t=[],r=this.dataFormat==="channelsLast"?e.slice(1,e.length-1):e.slice(2);for(let n=0;n<r.length;++n){let i=ii(r[n],this.kernelSize[n],this.padding,this.strides[n],typeof this.dilationRate=="number"?this.dilationRate:this.dilationRate[n]);t.push(i)}let a=[e[0]];return this.dataFormat==="channelsLast"?(a=a.concat(t),a.push(this.filters)):(a.push(this.filters),a=a.concat(t)),a}getConfig(){let e={filters:this.filters,kernelInitializer:er(this.kernelInitializer),kernelRegularizer:Dt(this.kernelRegularizer),kernelConstraint:Rr(this.kernelConstraint)},t=super.getConfig();return Object.assign(e,t),e}static verifyArgs(e){if(!("filters"in e)||typeof e.filters!="number"||e.filters<1)throw new ae(`Convolution layer expected config.filters to be a 'number' > 0 but got ${JSON.stringify(e.filters)}`)}},km=class extends xm{constructor(e){super(2,e),km.verifyArgs(e)}getConfig(){let e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!gS(e.kernelSize,"number",1,2))throw new ae(`Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ${JSON.stringify(e.kernelSize)}.`)}};km.className="Conv2D";Ie.registerClass(km);var Em=class extends xm{constructor(e){super(3,e),Em.verifyArgs(e)}getConfig(){let e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!(Array.isArray(e.kernelSize)&&(e.kernelSize.length===1||e.kernelSize.length===3)))throw new ae(`Conv3D expects config.kernelSize to be number or [number, number, number], but received ${JSON.stringify(e.kernelSize)}.`)}};Em.className="Conv3D";Ie.registerClass(Em);var qS=class extends km{constructor(e){if(super(e),this.inputSpec=[new kr({ndim:4})],this.padding!=="same"&&this.padding!=="valid")throw new ae(`Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=_t(e),e.length!==4)throw new ae("Input should have rank 4; Received input shape: "+JSON.stringify(e));let t=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[t]==null)throw new ae("The channel dimension of the inputs should be defined. Found `None`.");let r=e[t],a=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",a,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new kr({ndim:4,axes:{[t]:r}})],this.built=!0}call(e,t){return te(()=>{let r=mt(e);if(r.shape.length!==4)throw new ae(`Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${r.shape.length}`);let a=r.shape,n=a[0],i,s;this.dataFormat==="channelsFirst"?(i=2,s=3):(i=1,s=2);let o=a[i],l=a[s],u=this.kernelSize[0],c=this.kernelSize[1],d=this.strides[0],p=this.strides[1],f=bi(o,d,u,this.padding),h=bi(l,p,c,this.padding),m=[n,f,h,this.filters];this.dataFormat!=="channelsLast"&&(r=ct(r,[0,2,3,1]));let g=$y(r,this.kernel.read(),m,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(g=ct(g,[0,3,1,2])),this.bias!=null&&(g=ci(g,this.bias.read(),this.dataFormat)),this.activation!=null&&(g=this.activation.apply(g)),g})}computeOutputShape(e){e=_t(e);let t=e.slice(),r,a,n;this.dataFormat==="channelsFirst"?(r=1,a=2,n=3):(r=3,a=1,n=2);let i=this.kernelSize[0],s=this.kernelSize[1],o=this.strides[0],l=this.strides[1];return t[r]=this.filters,t[a]=bi(t[a],o,i,this.padding),t[n]=bi(t[n],l,s,this.padding),t}getConfig(){let e=super.getConfig();return delete e.dilationRate,e}};qS.className="Conv2DTranspose";Ie.registerClass(qS);var XS=class extends Em{constructor(e){if(super(e),this.inputSpec=[new kr({ndim:5})],this.padding!=="same"&&this.padding!=="valid")throw new ae(`Conv3DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=_t(e),e.length!==5)throw new ae("Input should have rank 5; Received input shape: "+JSON.stringify(e));let t=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[t]==null)throw new ae("The channel dimension of the inputs should be defined. Found `None`.");let r=e[t],a=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",a,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new kr({ndim:5,axes:{[t]:r}})],this.built=!0}call(e,t){return te(()=>{let r=mt(e);if(r.shape.length!==5)throw new ae(`Conv3DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${r.shape.length}`);let a=r.shape,n=a[0],i,s,o;this.dataFormat==="channelsFirst"?(o=2,i=3,s=4):(o=1,i=2,s=3);let l=a[o],u=a[i],c=a[s],d=this.kernelSize[0],p=this.kernelSize[1],f=this.kernelSize[2],h=this.strides[0],m=this.strides[1],g=this.strides[2],v=bi(l,h,d,this.padding),b=bi(u,m,p,this.padding),y=bi(c,g,f,this.padding),w=[n,v,b,y,this.filters];this.dataFormat!=="channelsLast"&&(r=ct(r,[0,2,3,4,1]));let x=iD(r,this.kernel.read(),w,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(x=ct(x,[0,4,1,2,3])),this.bias!==null&&(x=ci(x,this.bias.read(),this.dataFormat)),this.activation!==null&&(x=this.activation.apply(x)),x})}computeOutputShape(e){e=_t(e);let t=e.slice(),r,a,n,i;this.dataFormat==="channelsFirst"?(r=1,a=2,n=3,i=4):(r=4,a=1,n=2,i=3);let s=this.kernelSize[0],o=this.kernelSize[1],l=this.kernelSize[2],u=this.strides[0],c=this.strides[1],d=this.strides[2];return t[r]=this.filters,t[a]=bi(t[a],u,s,this.padding),t[n]=bi(t[n],c,o,this.padding),t[i]=bi(t[i],d,l,this.padding),t}getConfig(){let e=super.getConfig();return delete e.dilationRate,e}};XS.className="Conv3DTranspose";Ie.registerClass(XS);var HF=class extends xm{constructor(e,t){if(super(e,t),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,t.filters==null)throw new ae("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(t.kernelInitializer!=null||t.kernelRegularizer!=null||t.kernelConstraint!=null)throw new ae("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(t.padding!=null&&t.padding!=="same"&&t.padding!=="valid")throw new ae(`SeparableConv${this.rank}D supports only padding modes: 'same' and 'valid', but received ${JSON.stringify(t.padding)}`);this.depthMultiplier=t.depthMultiplier==null?1:t.depthMultiplier,this.depthwiseInitializer=Kt(t.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=Zt(t.depthwiseRegularizer),this.depthwiseConstraint=Or(t.depthwiseConstraint),this.pointwiseInitializer=Kt(t.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=Zt(t.pointwiseRegularizer),this.pointwiseConstraint=Or(t.pointwiseConstraint)}build(e){if(e=_t(e),e.length<this.rank+2)throw new ae(`Inputs to SeparableConv${this.rank}D should have rank ${this.rank+2}, but received input shape: ${JSON.stringify(e)}`);let t=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[t]==null||e[t]<0)throw new ae(`The channel dimension of the inputs should be defined, but found ${JSON.stringify(e[t])}`);let r=e[t],a=this.kernelSize.concat([r,this.depthMultiplier]),n=[];for(let s=0;s<this.rank;++s)n.push(1);n.push(r*this.depthMultiplier,this.filters);let i=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",a,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,i,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",n,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,i,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,i,this.biasConstraint):this.bias=null,this.inputSpec=[new kr({ndim:this.rank+2,axes:{[t]:r}})],this.built=!0}call(e,t){return te(()=>{e=mt(e);let r;if(this.rank===1)throw new dt("1D separable convolution is not implemented yet.");return this.rank===2&&(this.dataFormat==="channelsFirst"&&(e=ct(e,[0,2,3,1])),r=cm(e,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(r=ci(r,this.bias.read(),this.dataFormat)),this.activation!=null&&(r=this.activation.apply(r)),this.dataFormat==="channelsFirst"&&(r=ct(r,[0,3,1,2])),r})}getConfig(){let e=super.getConfig();return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=er(this.depthwiseInitializer),e.pointwiseInitializer=er(this.pointwiseInitializer),e.depthwiseRegularizer=Dt(this.depthwiseRegularizer),e.pointwiseRegularizer=Dt(this.pointwiseRegularizer),e.depthwiseConstraint=Rr(this.depthwiseConstraint),e.pointwiseConstraint=Rr(this.pointwiseConstraint),e}};HF.className="SeparableConv";var YS=class extends HF{constructor(e){super(2,e)}};YS.className="SeparableConv2D";Ie.registerClass(YS);var h0=class extends xm{constructor(e){super(1,e),h0.verifyArgs(e),this.inputSpec=[{ndim:3}]}getConfig(){let e=super.getConfig();return delete e.rank,delete e.dataFormat,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!gS(e.kernelSize,"number",1,1))throw new ae(`Conv1D expects config.kernelSize to be number or number[] with length 1, but received ${JSON.stringify(e.kernelSize)}.`)}};h0.className="Conv1D";Ie.registerClass(h0);var KS=class extends Et{constructor(e){super(e),typeof e.cropping=="number"?this.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:typeof e.cropping[0]=="number"?this.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:this.cropping=e.cropping,this.dataFormat=e.dataFormat===void 0?"channelsLast":e.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(e){return this.dataFormat==="channelsFirst"?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}call(e,t){return te(()=>{if(e=mt(e),this.dataFormat==="channelsLast"){let r=$g(e,this.cropping[0][0],e.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return $g(r,this.cropping[1][0],e.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}else{let r=$g(e,this.cropping[0][0],e.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return $g(r,this.cropping[1][0],e.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){let e={cropping:this.cropping,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}};KS.className="Cropping2D";Ie.registerClass(KS);var ZS=class extends Et{constructor(e){super(e),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=e.size==null?this.DEFAULT_SIZE:e.size,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,gr(this.dataFormat),this.interpolation=e.interpolation==null?"nearest":e.interpolation,Vne(this.interpolation)}computeOutputShape(e){if(this.dataFormat==="channelsFirst"){let t=e[2]==null?null:this.size[0]*e[2],r=e[3]==null?null:this.size[1]*e[3];return[e[0],e[1],t,r]}else{let t=e[1]==null?null:this.size[0]*e[1],r=e[2]==null?null:this.size[1]*e[2];return[e[0],t,r,e[3]]}}call(e,t){return te(()=>{let r=mt(e),a=r.shape;if(this.dataFormat==="channelsFirst"){r=ct(r,[0,2,3,1]);let n=this.size[0]*a[2],i=this.size[1]*a[3],s=this.interpolation==="nearest"?ta.resizeNearestNeighbor(r,[n,i]):ta.resizeBilinear(r,[n,i]);return ct(s,[0,3,1,2])}else{let n=this.size[0]*a[1],i=this.size[1]*a[2];return this.interpolation==="nearest"?ta.resizeNearestNeighbor(r,[n,i]):ta.resizeBilinear(r,[n,i])}})}getConfig(){let e={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},t=super.getConfig();return Object.assign(e,t),e}};ZS.className="UpSampling2D";Ie.registerClass(ZS);function Mie(e,t,r=[1,1],a="valid",n,i){return te(()=>{n==null&&(n=oi()),gr(n);let s=jS(e,n);if(e.rank!==4)throw new ae(`Input for depthwiseConv2d is required to be 4-D, but is instead ${e.rank}-D`);if(t.rank!==4)throw new ae(`depthwiseKernel is required to be 4-D, but is instead ${t.rank}-D`);return s=Au(s,t,r,a==="same"?"same":"valid","NHWC",i),n==="channelsFirst"&&(s=ct(s,[0,3,1,2])),s})}var QS=class extends GS{constructor(e){super(2,e),this.depthwiseKernel=null,this.depthMultiplier=e.depthMultiplier==null?1:e.depthMultiplier,this.depthwiseInitializer=Kt(e.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=Or(e.depthwiseConstraint),this.depthwiseRegularizer=Zt(e.depthwiseRegularizer)}build(e){if(e=_t(e),e.length<4)throw new ae(`Inputs to DepthwiseConv2D should have rank 4. Received input shape: ${JSON.stringify(e)}.`);let t=this.dataFormat==="channelsFirst"?1:3;if(e[t]==null||e[t]<0)throw new ae(`The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (${e[t]}).`);let r=e[t],a=[this.kernelSize[0],this.kernelSize[1],r,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",a,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[r*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,t){return te(()=>{e=mt(e);let r=Mie(e,this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(r=ci(r,this.bias.read(),this.dataFormat)),this.activation!=null&&(r=this.activation.apply(r)),r})}computeOutputShape(e){e=_t(e);let t=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2],a=this.dataFormat==="channelsFirst"?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,n=ii(t,this.kernelSize[0],this.padding,this.strides[0]),i=ii(r,this.kernelSize[1],this.padding,this.strides[1]);return this.dataFormat==="channelsFirst"?[e[0],a,n,i]:[e[0],n,i,a]}getConfig(){let e=super.getConfig();return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=er(this.depthwiseInitializer),e.depthwiseRegularizer=Dt(this.depthwiseRegularizer),e.depthwiseConstraint=Rr(this.depthwiseRegularizer),e}};QS.className="DepthwiseConv2D";Ie.registerClass(QS);function UF(e,t,r,a){if(Array.isArray(e)){if(t!=null||r!=null)throw new ae("When inputs is an array, neither initialState or constants should be provided");a!=null&&(r=e.slice(e.length-a,e.length),e=e.slice(0,e.length-a)),e.length>1&&(t=e.slice(1,e.length)),e=e[0]}function n(i){return i==null||Array.isArray(i)?i:[i]}return t=n(t),r=n(r),{inputs:e,initialState:t,constants:r}}function jF(e,t,r,a=!1,n,i,s=!1,o=!1){return te(()=>{let l=t.shape.length;if(l<3)throw new ae(`Input should be at least 3D, but is ${l}D.`);let u=[1,0].concat(si(2,l));if(t=ct(t,u),i!=null)throw new dt("The rnn() functoin of the deeplearn.js backend does not support constants yet.");s&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),n!=null&&(n=Te(Te(n,"bool"),"float32"),n.rank===l-1&&(n=pn(n,-1)),n=ct(n,u)),a&&(t=ca(t,0),n!=null&&(n=ca(n,0)));let c=[],d,p=r,f=t.shape[0],h=hr(t),m;n!=null&&(m=hr(n));for(let v=0;v<f;++v){let b=h[v],y=te(()=>e(b,p));if(n==null)d=y[0],p=y[1];else{let w=te(()=>{let x=m[v],k=Fe(ua(x),x),C=xe(ee(y[0],x),ee(p[0],k)),E=p.map(($,N)=>xe(ee(y[1][N],x),ee($,k)));return{output:C,newStates:E}});d=w.output,p=w.newStates}o&&c.push(d)}let g;return o&&(g=Vr(c,1)),[d,g,p]})}var Pi=class extends Et{constructor(e){super(e);let t;if(e.cell==null)throw new ae("cell property is missing for the constructor of RNN.");if(Array.isArray(e.cell)?t=new v0({cells:e.cell}):t=e.cell,t.stateSize==null)throw new ae("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=t,this.returnSequences=e.returnSequences==null?!1:e.returnSequences,this.returnState=e.returnState==null?!1:e.returnState,this.goBackwards=e.goBackwards==null?!1:e.goBackwards,this._stateful=e.stateful==null?!1:e.stateful,this.unroll=e.unroll==null?!1:e.unroll,this.supportsMasking=!0,this.inputSpec=[new kr({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(this.states_==null){let e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;return si(0,e).map(t=>null)}else return this.states_}setStates(e){this.states_=e}computeOutputShape(e){gk(e)&&(e=e[0]),e=e;let t=this.cell.stateSize;Array.isArray(t)||(t=[t]);let r=t[0],a;if(this.returnSequences?a=[e[0],e[1],r]:a=[e[0],r],this.returnState){let n=[];for(let i of t)n.push([e[0],i]);return[a].concat(n)}else return a}computeMask(e,t){return te(()=>{Array.isArray(t)&&(t=t[0]);let r=this.returnSequences?t:null;if(this.returnState){let a=this.states.map(n=>null);return[r].concat(a)}else return r})}get states(){if(this.states_==null){let e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,t=[];for(let r=0;r<e;++r)t.push(null);return t}else return this.states_}set states(e){this.states_=e}build(e){if(this.numConstants!=null)throw new dt("Constants support is not implemented in RNN yet.");gk(e)&&(e=e[0]),e=e;let t=this.stateful?e[0]:null,r=e.slice(2);this.inputSpec[0]=new kr({shape:[t,null,...r]});let a=[e[0]].concat(e.slice(2));this.cell.build(a);let n;if(Array.isArray(this.cell.stateSize)?n=this.cell.stateSize:n=[this.cell.stateSize],this.stateSpec!=null){if(!_.arraysEqual(this.stateSpec.map(i=>i.shape[i.shape.length-1]),n))throw new ae(`An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=${this.stateSpec}; However cell.stateSize is ${this.cell.stateSize}`)}else this.stateSpec=n.map(i=>new kr({shape:[null,i]}));this.stateful&&this.resetStates()}resetStates(e,t=!1){te(()=>{if(!this.stateful)throw new Hi("Cannot call resetStates() on an RNN Layer that is not stateful.");let r=this.inputSpec[0].shape[0];if(r==null)throw new ae("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.states_==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(a=>Jt([r,a])):this.states_=[Jt([r,this.cell.stateSize])];else if(e==null)lt(this.states_),this.keptStates!=null&&(lt(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(a=>Jt([r,a])):this.states_[0]=Jt([r,this.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new ae(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);t===!0?this.keptStates.push(this.states_.slice()):lt(this.states_);for(let a=0;a<this.states_.length;++a){let n=e[a],i=Array.isArray(this.cell.stateSize)?this.cell.stateSize[a]:this.cell.stateSize,s=[r,i];if(!_.arraysEqual(n.shape,s))throw new ae(`State ${a} is incompatible with layer ${this.name}: expected shape=${s}, received shape=${n.shape}`);this.states_[a]=n}}this.states_=this.states_.map(a=>zr(a.clone()))})}apply(e,t){let r=t==null?null:t.initialState,a=t==null?null:t.constants;t==null&&(t={});let n=UF(e,r,a,this.numConstants);e=n.inputs,r=n.initialState,a=n.constants;let i=[],s=[];if(r!=null){t.initialState=r,i=i.concat(r),this.stateSpec=[];for(let o of r)this.stateSpec.push(new kr({shape:o.shape}));s=s.concat(this.stateSpec)}if(a!=null&&(t.constants=a,i=i.concat(a),this.numConstants=a.length),i[0]instanceof ti){let o=[e].concat(i),l=this.inputSpec.concat(s),u=this.inputSpec;this.inputSpec=l;let c=super.apply(o,t);return this.inputSpec=u,c}else return super.apply(e,t)}call(e,t){return te(()=>{let r=t==null?null:t.mask,a=t==null?null:t.training,n=t==null?null:t.initialState;e=mt(e),n==null&&(this.stateful?n=this.states_:n=this.getInitialState(e));let i=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(n.length!==i)throw new ae(`RNN Layer has ${i} state(s) but was passed ${n.length} initial state(s).`);this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");let s={training:a},o=jF((p,f)=>{let h=this.cell.call([p].concat(f),s);return[h[0],h.slice(1)]},e,n,this.goBackwards,r,null,this.unroll,this.returnSequences),l=o[0],u=o[1],c=o[2];this.stateful&&this.resetStates(c,a);let d=this.returnSequences?u:l;return this.returnState?[d].concat(c):d})}getInitialState(e){return te(()=>{let t=Jt(e.shape);return t=Ue(t,[1,2]),t=gm(t),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(r=>r>1?hk(t,[1,r]):t):this.cell.stateSize>1?[hk(t,[1,this.cell.stateSize])]:[t]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.cell!=null&&this.cell.setFastWeightInitDuringBuild(e)}getConfig(){let e=super.getConfig(),t={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};this.numConstants!=null&&(t.numConstants=this.numConstants);let r=this.cell.getConfig();return this.getClassName()===Pi.className&&(t.cell={className:this.cell.getClassName(),config:r}),Object.assign({},r,e,t)}static fromConfig(e,t,r={}){let a=t.cell,n=ai(a,r);return new e(Object.assign(t,{cell:n}))}};Pi.className="RNN";Ie.registerClass(Pi);var Cm=class extends Et{},m0=class extends Cm{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,Br(this.units,"units"),this.activation=lo(e.activation==null?this.DEFAULT_ACTIVATION:e.activation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=Kt(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Kt(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Kt(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=Zt(e.kernelRegularizer),this.recurrentRegularizer=Zt(e.recurrentRegularizer),this.biasRegularizer=Zt(e.biasRegularizer),this.kernelConstraint=Or(e.kernelConstraint),this.recurrentConstraint=Or(e.recurrentConstraint),this.biasConstraint=Or(e.biasConstraint),this.dropout=zc([1,so([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=zc([1,so([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=_t(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,t){return te(()=>{if(e=e,e.length!==2)throw new ae(`SimpleRNNCell expects 2 input Tensors, got ${e.length}.`);let r=e[1];e=e[0];let a=t.training==null?!1:t.training;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=uo({ones:()=>ua(e),rate:this.dropout,training:a,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=uo({ones:()=>ua(r),rate:this.recurrentDropout,training:a,dropoutFunc:this.dropoutFunc}));let n,i=this.dropoutMask,s=this.recurrentDropoutMask;i!=null?n=Si(ee(e,i),this.kernel.read()):n=Si(e,this.kernel.read()),this.bias!=null&&(n=ci(n,this.bias.read())),s!=null&&(r=ee(r,s));let o=xe(n,Si(r,this.recurrentKernel.read()));return this.activation!=null&&(o=this.activation.apply(o)),[o,o]})}getConfig(){let e=super.getConfig(),t={units:this.units,activation:oo(this.activation),useBias:this.useBias,kernelInitializer:er(this.kernelInitializer),recurrentInitializer:er(this.recurrentInitializer),biasInitializer:er(this.biasInitializer),kernelRegularizer:Dt(this.kernelRegularizer),recurrentRegularizer:Dt(this.recurrentRegularizer),biasRegularizer:Dt(this.biasRegularizer),activityRegularizer:Dt(this.activityRegularizer),kernelConstraint:Rr(this.kernelConstraint),recurrentConstraint:Rr(this.recurrentConstraint),biasConstraint:Rr(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign({},e,t)}};m0.className="SimpleRNNCell";Ie.registerClass(m0);var JS=class extends Pi{constructor(e){e.cell=new m0(e),super(e)}call(e,t){return te(()=>{this.cell.dropoutMask!=null&&(lt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(lt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);let r=t==null?null:t.mask,a=t==null?null:t.training,n=t==null?null:t.initialState;return super.call(e,{mask:r,training:a,initialState:n})})}static fromConfig(e,t){return new e(t)}};JS.className="SimpleRNN";Ie.registerClass(JS);var g0=class extends Cm{constructor(e){if(super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new ae("GRUCell does not support reset_after parameter set to true.");this.units=e.units,Br(this.units,"units"),this.activation=lo(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=lo(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=Kt(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Kt(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Kt(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=Zt(e.kernelRegularizer),this.recurrentRegularizer=Zt(e.recurrentRegularizer),this.biasRegularizer=Zt(e.biasRegularizer),this.kernelConstraint=Or(e.kernelConstraint),this.recurrentConstraint=Or(e.recurrentConstraint),this.biasConstraint=Or(e.biasConstraint),this.dropout=zc([1,so([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=zc([1,so([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=_t(e);let t=e[e.length-1];this.kernel=this.addWeight("kernel",[t,this.units*3],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*3],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units*3],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,t){return te(()=>{if(e=e,e.length!==2)throw new ae(`GRUCell expects 2 input Tensors (inputs, h, c), got ${e.length}.`);let r=t.training==null?!1:t.training,a=e[1];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=uo({ones:()=>ua(e),rate:this.dropout,training:r,count:3,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=uo({ones:()=>ua(a),rate:this.recurrentDropout,training:r,count:3,dropoutFunc:this.dropoutFunc}));let n=this.dropoutMask,i=this.recurrentDropoutMask,s,o,l;0<this.dropout&&this.dropout<1&&(e=ee(e,n[0]));let u=Si(e,this.kernel.read());this.useBias&&(u=ci(u,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(a=ee(a,i[0]));let c=this.recurrentKernel.read(),[d,p]=Pn(c,[2*this.units,this.units],c.rank-1),f=Si(a,d),[h,m,g]=Pn(u,3,u.rank-1),[v,b]=Pn(f,2,f.rank-1);s=this.recurrentActivation.apply(xe(h,v)),o=this.recurrentActivation.apply(xe(m,b));let y=Si(ee(o,a),p);l=this.activation.apply(xe(g,y));let w=xe(ee(s,a),ee(xe(1,Gt(s)),l));return[w,w]})}getConfig(){let e=super.getConfig(),t={units:this.units,activation:oo(this.activation),recurrentActivation:oo(this.recurrentActivation),useBias:this.useBias,kernelInitializer:er(this.kernelInitializer),recurrentInitializer:er(this.recurrentInitializer),biasInitializer:er(this.biasInitializer),kernelRegularizer:Dt(this.kernelRegularizer),recurrentRegularizer:Dt(this.recurrentRegularizer),biasRegularizer:Dt(this.biasRegularizer),activityRegularizer:Dt(this.activityRegularizer),kernelConstraint:Rr(this.kernelConstraint),recurrentConstraint:Rr(this.recurrentConstraint),biasConstraint:Rr(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign({},e,t)}};g0.className="GRUCell";Ie.registerClass(g0);var e$=class extends Pi{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new g0(e),super(e)}call(e,t){return te(()=>{this.cell.dropoutMask!=null&&(lt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(lt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);let r=t==null?null:t.mask,a=t==null?null:t.training,n=t==null?null:t.initialState;return super.call(e,{mask:r,training:a,initialState:n})})}static fromConfig(e,t){return t.implmentation===0&&(t.implementation=1),new e(t)}};e$.className="GRU";Ie.registerClass(e$);var Sm=class extends Cm{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,Br(this.units,"units"),this.activation=lo(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=lo(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=Kt(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Kt(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Kt(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=e.unitForgetBias,this.kernelRegularizer=Zt(e.kernelRegularizer),this.recurrentRegularizer=Zt(e.recurrentRegularizer),this.biasRegularizer=Zt(e.biasRegularizer),this.kernelConstraint=Or(e.kernelConstraint),this.recurrentConstraint=Or(e.recurrentConstraint),this.biasConstraint=Or(e.biasConstraint),this.dropout=zc([1,so([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=zc([1,so([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){var t;e=_t(e);let r=e[e.length-1];this.kernel=this.addWeight("kernel",[r,this.units*4],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*4],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint);let a;if(this.useBias){if(this.unitForgetBias){let n=this.biasInitializer,i=this.units;a=new(t=class extends ja{apply(s,o){let l=n.apply([i]),u=new a0().apply([i]),c=n.apply([i*2]);return nA(nA(l,u),c)}},t.className="CustomInit",t)}else a=this.biasInitializer;this.bias=this.addWeight("bias",[this.units*4],null,a,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(e,t){return te(()=>{let r=t.training==null?!1:t.training;if(e=e,e.length!==3)throw new ae(`LSTMCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);let a=e[1],n=e[2];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=uo({ones:()=>ua(e),rate:this.dropout,training:r,count:4,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=uo({ones:()=>ua(a),rate:this.recurrentDropout,training:r,count:4,dropoutFunc:this.dropoutFunc}));let i=this.dropoutMask,s=this.recurrentDropoutMask,o,l,u,c;0<this.dropout&&this.dropout<1&&(e=ee(e,i[0]));let d=Si(e,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(a=ee(a,s[0])),d=xe(d,Si(a,this.recurrentKernel.read())),this.useBias&&(d=ci(d,this.bias.read()));let[p,f,h,m]=Pn(d,4,d.rank-1);o=this.recurrentActivation.apply(p),l=this.recurrentActivation.apply(f),u=xe(ee(l,n),ee(o,this.activation.apply(h))),c=this.recurrentActivation.apply(m);let g=ee(c,this.activation.apply(u));return[g,g,u]})}getConfig(){let e=super.getConfig(),t={units:this.units,activation:oo(this.activation),recurrentActivation:oo(this.recurrentActivation),useBias:this.useBias,kernelInitializer:er(this.kernelInitializer),recurrentInitializer:er(this.recurrentInitializer),biasInitializer:er(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:Dt(this.kernelRegularizer),recurrentRegularizer:Dt(this.recurrentRegularizer),biasRegularizer:Dt(this.biasRegularizer),activityRegularizer:Dt(this.activityRegularizer),kernelConstraint:Rr(this.kernelConstraint),recurrentConstraint:Rr(this.recurrentConstraint),biasConstraint:Rr(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign({},e,t)}};Sm.className="LSTMCell";Ie.registerClass(Sm);var t$=class extends Pi{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new Sm(e),super(e)}call(e,t){return te(()=>{this.cell.dropoutMask!=null&&(lt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(lt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);let r=t==null?null:t.mask,a=t==null?null:t.training,n=t==null?null:t.initialState;return super.call(e,{mask:r,training:a,initialState:n})})}static fromConfig(e,t){return t.implmentation===0&&(t.implementation=1),new e(t)}};t$.className="LSTM";Ie.registerClass(t$);var v0=class extends Cm{constructor(e){super(e),this.cells=e.cells}get stateSize(){let e=[];for(let t of this.cells.slice().reverse())Array.isArray(t.stateSize)?e.push(...t.stateSize):e.push(t.stateSize);return e}call(e,t){return te(()=>{e=e;let r=e.slice(1),a=[];for(let s of this.cells.slice().reverse())Array.isArray(s.stateSize)?a.push(r.splice(0,s.stateSize.length)):a.push(r.splice(0,1));a.reverse();let n=[],i;for(let s=0;s<this.cells.length;++s){let o=this.cells[s];r=a[s],s===0?i=[e[0]].concat(r):i=[i[0]].concat(r),i=o.call(i,t),n.push(i.slice(1))}r=[];for(let s of n.slice().reverse())r.push(...s);return[i[0]].concat(r)})}build(e){gk(e)&&(e=e[0]),e=e;let t;this.cells.forEach((r,a)=>{rl(`RNNCell_${a}`,()=>{r.build(e),Array.isArray(r.stateSize)?t=r.stateSize[0]:t=r.stateSize,e=[e[0],t]})}),this.built=!0}getConfig(){let e=super.getConfig(),t=a=>({className:a.getClassName(),config:a.getConfig()}),r={cells:this.cells.map(t)};return Object.assign({},e,r)}static fromConfig(e,t,r={}){let a=[];for(let n of t.cells)a.push(ai(n,r));return new e({cells:a})}get trainableWeights(){if(!this.trainable)return[];let e=[];for(let t of this.cells)e.push(...t.trainableWeights);return e}get nonTrainableWeights(){let e=[];for(let t of this.cells)e.push(...t.nonTrainableWeights);if(!this.trainable){let t=[];for(let r of this.cells)t.push(...r.trainableWeights);return t.concat(e)}return e}getWeights(){let e=[];for(let t of this.cells)e.push(...t.weights);return vk(e)}setWeights(e){let t=[];for(let r of this.cells){let a=r.weights.length,n=e.splice(a);for(let i=0;i<r.weights.length;++i)t.push([r.weights[i],n[i]])}SS(t)}};v0.className="StackedRNNCells";Ie.registerClass(v0);function uo(e){let{ones:t,rate:r,training:a=!1,count:n=1,dropoutFunc:i}=e,s=()=>i!=null?i(t(),r):nF(t(),r),o=()=>bm(s,t,a);return!n||n<=1?zr(o().clone()):Array(n).fill(void 0).map(o).map(l=>zr(l.clone()))}var Rie=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(r[a[n]]=e[a[n]]);return r},GF=class extends Pi{constructor(e){if(e.unroll)throw new dt("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new dt("It is not possible at the moment to stack convolutional cells.");super(e),this.inputSpec=[new kr({ndim:5})]}call(e,t){return te(()=>{if(this.cell.dropoutMask!=null&&(lt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(lt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),t&&t.constants)throw new ae("ConvRNN2D cell does not support constants");let r=t==null?null:t.mask,a=t==null?null:t.training,n=t==null?null:t.initialState;return super.call(e,{mask:r,training:a,initialState:n})})}computeOutputShape(e){let t=this.computeSingleOutputShape(e);return this.returnSequences||(t=[t[0],...t.slice(2)]),this.returnState&&(t=[t,...Array(2).fill([e[0],...t.slice(-3)])]),t}getInitialState(e){return te(()=>{let{stateSize:t}=this.cell,r=e.shape,a=this.computeSingleOutputShape(r),n=[a[0],...a.slice(2)],i=Jt(n);return Array.isArray(t)?Array(t.length).fill(i):[i]})}resetStates(e,t=!1){te(()=>{if(!this.stateful)throw new Hi("Cannot call resetStates() on an RNN Layer that is not stateful.");let r=this.inputSpec[0].shape,a=this.computeSingleOutputShape(r),n=[a[0],...a.slice(2)];if(r[0]==null)throw new ae("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.getStates()==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>Jt(n)):this.states_=[Jt(n)];else if(e==null)lt(this.states_),this.keptStates!=null&&(lt(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>Jt(n)):this.states_[0]=Jt(n);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new ae(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);t?this.keptStates.push(this.states_.slice()):lt(this.states_);for(let i=0;i<this.states_.length;++i){let s=e[i],o=n;if(!_.arraysEqual(s.shape,o))throw new ae(`State ${i} is incompatible with layer ${this.name}: expected shape=${o}, received shape=${s.shape}`);this.states_[i]=s}}this.states_=this.states_.map(i=>zr(i.clone()))})}computeSingleOutputShape(e){let{dataFormat:t,filters:r,kernelSize:a,padding:n,strides:i,dilationRate:s}=this.cell,o=t==="channelsFirst",l=e[o?3:2],u=e[o?4:3],c=ii(l,a[0],n,i[0],s[0]),d=ii(u,a[1],n,i[1],s[1]);return[...e.slice(0,2),...o?[r,c,d]:[c,d,r]]}};GF.className="ConvRNN2D";var b0=class extends Sm{constructor(e){let{filters:t,kernelSize:r,strides:a,padding:n,dataFormat:i,dilationRate:s}=e;super(Object.assign({},e,{units:t})),this.filters=t,Br(this.filters,"filters"),this.kernelSize=$c(r,2,"kernelSize"),this.kernelSize.forEach(o=>Br(o,"kernelSize")),this.strides=$c(a||1,2,"strides"),this.strides.forEach(o=>Br(o,"strides")),this.padding=n||"valid",$a(this.padding),this.dataFormat=i||"channelsLast",gr(this.dataFormat),this.dilationRate=$c(s||1,2,"dilationRate"),this.dilationRate.forEach(o=>Br(o,"dilationRate"))}build(e){var t;e=_t(e);let r=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[r]==null)throw new ae(`The channel dimension of the input should be defined. Found ${e[r]}`);let a=e[r],n=4,i=this.kernelSize.concat([a,this.filters*n]);this.kernel=this.addWeight("kernel",i,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);let s=this.kernelSize.concat([this.filters,this.filters*n]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",s,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let o;if(this.unitForgetBias){let l=this.biasInitializer,u=this.filters;o=new(t=class extends ja{apply(c,d){let p=l.apply([u]),f=ea([u]),h=l.apply([u*2]);return vS([p,f,h])}},t.className="CustomInit",t)}else o=this.biasInitializer;this.bias=this.addWeight("bias",[this.filters*n],null,o,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(e,t){return te(()=>{if(e.length!==3)throw new ae(`ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);let r=t.training||!1,a=e[0],n=e[1],i=e[2],s=4;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=uo({ones:()=>ua(a),rate:this.dropout,training:r,count:s,dropoutFunc:this.dropoutFunc}));let o=this.dropoutMask,l=(j,G,L)=>!G||!G[L]?j:ee(G[L],j),u=l(a,o,0),c=l(a,o,1),d=l(a,o,2),p=l(a,o,3);0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=uo({ones:()=>ua(n),rate:this.recurrentDropout,training:r,count:s,dropoutFunc:this.dropoutFunc}));let f=this.recurrentDropoutMask,h=l(n,f,0),m=l(n,f,1),g=l(n,f,2),v=l(n,f,3),b=3,[y,w,x,k]=Pn(this.kernel.read(),s,b),[C,E,$,N]=this.useBias?Pn(this.bias.read(),s):[null,null,null,null];u=this.inputConv(u,y,C,this.padding),c=this.inputConv(c,w,E,this.padding),d=this.inputConv(d,x,$,this.padding),p=this.inputConv(p,k,N,this.padding);let[I,S,A,R]=Pn(this.recurrentKernel.read(),s,b);h=this.recurrentConv(h,I),m=this.recurrentConv(m,S),g=this.recurrentConv(g,A),v=this.recurrentConv(v,R);let O=this.recurrentActivation.apply(xe(u,h)),D=this.recurrentActivation.apply(xe(c,m)),z=xe(ee(D,i),ee(O,this.activation.apply(xe(d,g)))),U=ee(this.recurrentActivation.apply(xe(p,v)),this.activation.apply(z));return[U,U,z]})}getConfig(){let e=super.getConfig(),t=Rie(e,["units"]),r={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign({},t,r)}inputConv(e,t,r,a){let n=wn(e,t,this.strides,a||"valid",this.dataFormat==="channelsFirst"?"NCHW":"NHWC",this.dilationRate);return r?ci(n,r,this.dataFormat):n}recurrentConv(e,t){return wn(e,t,1,"same",this.dataFormat==="channelsFirst"?"NCHW":"NHWC")}};b0.className="ConvLSTM2DCell";Ie.registerClass(b0);var r$=class extends GF{constructor(e){let t=new b0(e);super(Object.assign({},e,{cell:t}))}static fromConfig(e,t){return new e(t)}};r$.className="ConvLSTM2D";Ie.registerClass(r$);var y0=class extends Et{constructor(e){super(e),this.rate=Math.max(Math.min(e.rate,1),0),this.noiseShape=e.noiseShape,this.seed=e.seed,this.supportsMasking=!0}getNoiseShape(e){if(this.noiseShape==null)return this.noiseShape;let t=e.shape,r=[];for(let a=0;a<this.noiseShape.length;++a)r.push(this.noiseShape[a]==null?t[a]:this.noiseShape[a]);return r}call(e,t){return te(()=>{this.invokeCallHook(e,t);let r=mt(e);if(0<this.rate&&this.rate<1){let a=t.training==null?!1:t.training,n=this.getNoiseShape(r);return bm(()=>nF(r,this.rate,n,this.seed),()=>r,a)}return e})}getConfig(){let e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},t=super.getConfig();return Object.assign(e,t),e}dispose(){return super.dispose()}};y0.className="Dropout";Ie.registerClass(y0);var n$=class extends y0{constructor(e){super(e),this.inputSpec=[{ndim:3}]}getNoiseShape(e){let t=e.shape;return[t[0],1,t[2]]}};n$.className="SpatialDropout1D";Ie.registerClass(n$);var a$=class extends Et{constructor(e){if(super(e),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.batchInputShape==null&&e.inputShape==null&&e.inputDim!=null){let t=null;e.batchSize!=null&&(t=e.batchSize),this.batchInputShape=[t,e.inputDim]}this.units=e.units,Br(this.units,"units"),this.activation=lo(e.activation),e.useBias!=null&&(this.useBias=e.useBias),this.kernelInitializer=Kt(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=Kt(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=Or(e.kernelConstraint),this.biasConstraint=Or(e.biasConstraint),this.kernelRegularizer=Zt(e.kernelRegularizer),this.biasRegularizer=Zt(e.biasRegularizer),this.activityRegularizer=Zt(e.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(e){e=_t(e);let t=e[e.length-1];this.kernel==null&&(this.kernel=this.addWeight("kernel",[t,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:t}}],this.built=!0}computeOutputShape(e){e=_t(e);let t=e.slice();return t[t.length-1]=this.units,t}call(e,t){return te(()=>{this.invokeCallHook(e,t);let r=mt(e),a=KD(this.activation.getClassName()),n;return a!=null?n=Si(r,this.kernel.read(),a,this.bias?this.bias.read():null):(n=Si(r,this.kernel.read()),this.bias!=null&&(n=ci(n,this.bias.read())),this.activation!=null&&(n=this.activation.apply(n))),n})}getConfig(){let e={units:this.units,activation:oo(this.activation),useBias:this.useBias,kernelInitializer:er(this.kernelInitializer),biasInitializer:er(this.biasInitializer),kernelRegularizer:Dt(this.kernelRegularizer),biasRegularizer:Dt(this.biasRegularizer),activityRegularizer:Dt(this.activityRegularizer),kernelConstraint:Rr(this.kernelConstraint),biasConstraint:Rr(this.biasConstraint)},t=super.getConfig();return Object.assign(e,t),e}};a$.className="Dense";Ie.registerClass(a$);var i$=class extends Et{constructor(e){e=e||{},super(e),this.inputSpec=[{minNDim:3}],this.dataFormat=e.dataFormat}computeOutputShape(e){e=_t(e);for(let t of e.slice(1))if(t==null)throw new ae(`The shape of the input to "Flatten" is not fully defined (got ${e.slice(1)}). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.`);return[e[0],Ys(e,1)]}call(e,t){return te(()=>{this.invokeCallHook(e,t);let r=mt(e);if(this.dataFormat==="channelsFirst"&&r.rank>1){let a=[0];for(let n=2;n<r.rank;++n)a.push(n);a.push(1),r=ct(r,a)}return qne(r)})}getConfig(){let e={};this.dataFormat!=null&&(e.dataFormat=this.dataFormat);let t=super.getConfig();return Object.assign(e,t),e}};i$.className="Flatten";Ie.registerClass(i$);var s$=class extends Et{constructor(e){super(e),this.supportsMasking=!0,this.activation=lo(e.activation)}call(e,t){return te(()=>{this.invokeCallHook(e,t);let r=mt(e);return this.activation.apply(r)})}getConfig(){let e={activation:oo(this.activation)},t=super.getConfig();return Object.assign(e,t),e}};s$.className="Activation";Ie.registerClass(s$);var o$=class extends Et{constructor(e){super(e),this.n=e.n,this.inputSpec=[{ndim:2}]}computeOutputShape(e){return[e[0],this.n,e[1]]}call(e,t){return te(()=>(e=mt(e),jne(e,this.n)))}getConfig(){let e={n:this.n},t=super.getConfig();return Object.assign(e,t),e}};o$.className="RepeatVector";Ie.registerClass(o$);var l$=class extends Et{constructor(e){super(e),this.targetShape=e.targetShape;for(let t=0;t<this.targetShape.length;++t)this.isUnknown(this.targetShape[t])&&(this.targetShape[t]=null)}isUnknown(e){return e<0||e==null}fixUnknownDimension(e,t){let r="Total size of new array must be unchanged.",a=t.slice(),n=1,i=null;for(let o=0;o<a.length;++o){let l=a[o];if(this.isUnknown(l))if(i===null)i=o;else throw new ae("Can only specifiy one unknown dimension.");else n*=l}let s=Ys(e);if(i!==null){if(n===0||s%n!==0)throw new ae(r);a[i]=s/n}else if(s!==n)throw new ae(r);return a}computeOutputShape(e){let t=!1;for(let r=0;r<e.length;++r)if(this.isUnknown(e[r])){t=!0;break}return t?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}call(e,t){return te(()=>{this.invokeCallHook(e,t);let r=mt(e),a=r.shape,n=a.slice(0,1).concat(this.fixUnknownDimension(a.slice(1),this.targetShape));return re(r,n)})}getConfig(){let e={targetShape:this.targetShape},t=super.getConfig();return Object.assign(e,t),e}};l$.className="Reshape";Ie.registerClass(l$);var u$=class extends Et{constructor(e){if(super(e),e.dims==null)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error(`Permute constructor requires \`dims\` to be an Array, but received ${e.dims} instead.`);let t=si(1,e.dims.length+1);if(!_.arraysEqual(e.dims.slice().sort(),t))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=e.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new kr({ndim:this.dims.length+1})]}computeOutputShape(e){e=_t(e);let t=e.slice();return this.dims.forEach((r,a)=>{t[a+1]=e[r]}),t}call(e,t){return ct(mt(e),this.dimsIncludingBatch)}getConfig(){let e={dims:this.dims},t=super.getConfig();return Object.assign(e,t),e}};u$.className="Permute";Ie.registerClass(u$);var c$=class extends Et{constructor(e){super(e==null?{}:e),this.supportsMasking=!0,e!=null?this.maskValue=e.maskValue==null?0:e.maskValue:this.maskValue=0}computeOutputShape(e){return e}getConfig(){let e=super.getConfig(),t={maskValue:this.maskValue};return Object.assign(t,e),t}computeMask(e,t){let r=mt(e),a=-1;return lh(wl(r,this.maskValue),a)}call(e,t){return te(()=>{this.invokeCallHook(e,t);let r=mt(e),a=-1,n=!0,i=lh(wl(r,this.maskValue),a,n);return ee(r,Te(i,r.dtype))})}};c$.className="Masking";Ie.registerClass(c$);var d$=class extends Et{constructor(e){if(super(e),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",e.batchInputShape==null&&e.inputShape==null){let t=null;e.batchSize!=null&&(t=e.batchSize),e.inputLength==null?this.batchInputShape=[t,null]:this.batchInputShape=[t].concat(jt(e.inputLength))}this.inputDim=e.inputDim,Br(this.inputDim,"inputDim"),this.outputDim=e.outputDim,Br(this.outputDim,"outputDim"),this.embeddingsInitializer=Kt(e.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=Zt(e.embeddingsRegularizer),this.activityRegularizer=Zt(e.activityRegularizer),this.embeddingsConstraint=Or(e.embeddingsConstraint),this.maskZero=e.maskZero,this.supportsMasking=e.maskZero,this.inputLength=e.inputLength}build(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(e){}computeMask(e,t){return te(()=>this.maskZero?(e=mt(e),wl(e,xt(e))):null)}computeOutputShape(e){if(e=_t(e),this.inputLength==null)return[...e,this.outputDim];let t=jt(this.inputLength);if(t.length!==e.length-1)throw new ae(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);{let r=0;for(let a=0;a<t.length;++a){let n=t[a],i=e[a+1];if(n!=null&&i!=null&&n!==i)throw new ae(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);n==null&&(t[r]=i),r++}}return[e[0],...t,this.outputDim]}call(e,t){return te(()=>{this.invokeCallHook(e,t);let r=mt(e);r.dtype!=="int32"&&(r=r0(r,"int32"));let a=rF(this.embeddings.read(),re(r,[r.size]));return re(a,_t(this.computeOutputShape(r.shape)))})}getConfig(){let e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:er(this.embeddingsInitializer),embeddingsRegularizer:Dt(this.embeddingsRegularizer),activityRegularizer:Dt(this.activityRegularizer),embeddingsConstraint:Rr(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},t=super.getConfig();return Object.assign(e,t),e}};d$.className="Embedding";Ie.registerClass(d$);var Ou=class extends Et{constructor(e){super(e||{}),this.supportsMasking=!0}mergeFunction(e){throw new dt}computeElementwiseOpOutputShape(e,t){if(e==null||t==null)return null;if(e.length<t.length)return this.computeElementwiseOpOutputShape(t,e);if(t.length===0)return e;let r=e.slice(0,e.length-t.length);for(let a=0;a<t.length;++a){let n=e[e.length-t.length+a],i=t[a];if(n==null||i==null||n<0||i<0)r.push(null);else if(n===1)r.push(i);else if(i===1)r.push(n);else{if(n!==i)throw new ae("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(t));r.push(n)}}return r}build(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[_t(e)]),e=e,e.length<2)throw new ae(`A merge layer should be called on an Array of at least 2 inputs. Got ${e.length} input(s).`);let t=[];for(let n of e)n!=null&&n[0]!==null&&t.push(n[0]);if(t=Xs(t),t.length>1)throw new ae(`Can not merge tensors with different batch sizes. Got tensors with shapes: ${JSON.stringify(e)}.`);let r=e[0]==null?null:e[0].slice(1);for(let n=1;n<e.length;++n){let i=e[n]==null?null:e[n].slice(1);r=this.computeElementwiseOpOutputShape(r,i)}let a=e.map(n=>n.length);e.indexOf(null)===-1&&Xs(a).length===1?this.reshapeRequired=!1:this.reshapeRequired=!0}call(e,t){return te(()=>{if(e=e,this.reshapeRequired){let r=[],a=e.map(n=>n.rank);if(a.indexOf(null)===-1){let n=so(a);for(let i of e){let s=i.rank;for(let o=0;o<n-s;++o)i=gm(i,1);r.push(i)}return this.mergeFunction(r)}else{let n=!1;for(let o of e){let l=o.rank;if(l==null){let u=o.shape,c=u[0],d=u.slice(1).concat([c]),p=re(o,[c].concat(Ys(u.slice(1))));p=ct(p,[1,0]),p=re(p,d),r.push(p),n=!0}else if(l>1){let u=si(1,l).concat([0]);r.push(ct(o,u)),n=!0}else r.push(o)}let i=this.mergeFunction(r),s=i.rank;if(n){if(s==null){let o=i.shape,l=o.length,u=o[l-1],c=[u].concat(o.slice(0,o.length-1));i=re(ct(re(i,[-1,u]),[1,0]),c)}else if(s>1){let o=[s-1].concat(si(0,s-1));i=ct(i,o)}}return i}}else return this.mergeFunction(e)})}computeOutputShape(e){e=e;let t;e[0]==null?t=null:t=e[0].slice(1);for(let a=1;a<e.length;++a){let n=e[a]==null?null:e[a].slice(1);t=this.computeElementwiseOpOutputShape(t,n)}let r=[];for(let a of e)a!=null&&a[0]!==null&&r.push(a[0]);return r=Xs(r),r.length===1?t=r.concat(t):t=[null].concat(t),t}computeMask(e,t){return te(()=>{if(t==null)return null;if(!Array.isArray(t))throw new ae("`mask` should be an Array");if(!Array.isArray(e))throw new ae("`inputs` should be an Array");if(t.length!==e.length)throw new ae(`The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (${e.length} vs ${t.length})`);if(t.every(a=>a==null))return null;t=t.map(a=>a==null?a:pn(a,0));let r=t[0];for(let a=1;a<t.length-1;++a)r=Va(r,t[a]);return r})}},p$=class extends Ou{constructor(e){super(e)}mergeFunction(e){return te(()=>{let t=e[0].clone();for(let r=1;r<e.length;++r)t=xe(t,e[r]);return t})}};p$.className="Add";Ie.registerClass(p$);var f$=class extends Ou{constructor(e){super(e)}mergeFunction(e){return te(()=>{let t=e[0].clone();for(let r=1;r<e.length;++r)t=ee(t,e[r]);return t})}};f$.className="Multiply";Ie.registerClass(f$);var h$=class extends Ou{constructor(e){super(e)}mergeFunction(e){return te(()=>{let t=e[0].clone();for(let r=1;r<e.length;++r)t=xe(t,e[r]);return ee(1/e.length,t)})}};h$.className="Average";Ie.registerClass(h$);var m$=class extends Ou{constructor(e){super(e)}mergeFunction(e){return te(()=>{let t=e[0];for(let r=1;r<e.length;++r)t=Ri(t,e[r]);return t})}};m$.className="Maximum";Ie.registerClass(m$);var g$=class extends Ou{constructor(e){super(e)}mergeFunction(e){return te(()=>{let t=e[0];for(let r=1;r<e.length;++r)t=up(t,e[r]);return t})}};g$.className="Minimum";Ie.registerClass(g$);var v$=class extends Ou{constructor(e){super(e),this.DEFAULT_AXIS=-1,e==null&&(e={}),this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){if(!(Array.isArray(e)&&Array.isArray(e[0]))||e.length===1)throw new ae("A `Concatenate` layer should be called on a list of at least 2 inputs");e=e;let t=!0;for(let a of e)if(a!=null){t=!1;break}if(t)return;let r=[];for(let a=0;a<e.length;++a){let n=e[a].slice();n.splice(this.axis,1);let i=!1;for(let s of r)if(_.arraysEqual(s,n)){i=!0;break}i||r.push(n)}if(r.length>1)throw new ae("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}mergeFunction(e){return te(()=>vS(e,this.axis))}computeOutputShape(e){if(!(Array.isArray(e)&&Array.isArray(e[0])))throw new ae("A `Concatenate` layer should be called on a list of inputs.");let t=e,r=t[0].slice(),a=this.axis<0?r.length+this.axis:this.axis;for(let n of t.slice(1)){if(r[a]==null||n[a]==null){r[a]=null;break}r[a]+=n[a]}return r}computeMask(e,t){if(t==null)return null;if(!Array.isArray(t))throw new ae("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new ae("`inputs` should be an array for Concatenate");if(t.length!==e.length)throw new ae(`Mismatch in the length of mask (${t.length}) and the legnth of inputs (${e.length})`);return te(()=>{let r=!0;if(t.forEach(i=>{if(i!=null){r=!1;return}}),r)return null;let a=[];for(let i=0;i<e.length;++i)t[i]==null?a.push(Te(ua(e[i]),"bool")):t[i].rank<e[i].rank?a.push(pn(t[i],-1)):a.push(t[i]);let n=Ot(a,this.axis);return Cy(n,-1,!1)})}getConfig(){let e={axis:this.axis},t=super.getConfig();return Object.assign(e,t),e}};v$.className="Concatenate";Ie.registerClass(v$);function Qp(e,t){for(;e<0;)e+=t;return e}function Oie(e,t,r){if(e.shape.length>3||t.shape.length>3)throw new dt("batchDot is not implemented for tensors of 4D or higher rank yet");if(_.assert(e.shape.length>=2,()=>`batchDot requires the rank of x to be >= 2, but got ${e.shape.length}`),_.assert(e.shape.length>=2,()=>`batchDot requires the rank of y to be >= 2, but got ${t.shape.length}`),typeof r=="number"&&(r=[r,r]),e.dtype==="complex64"||t.dtype==="complex64")throw new dt("batchDot is not implemented for complex64-type Tensors yet.");let a=e.shape.length,n=t.shape.length;r==null&&(r=[a-1,n-2]);let i=r;return te(()=>{let s;if(a>n){s=a-n;let l=[];for(let u=0;u<s;++u)l.push(1);t=re(t,t.shape.concat(l))}else if(n>a){s=n-a;let l=[];for(let u=0;u<s;++u)l.push(1);e=re(e,e.shape.concat(l))}else s=0;let o;if(e.shape.length===2&&t.shape.length===2)i[0]===i[1]?o=Ue(ee(e,t),i[0]):o=Ue(ee(ct(e,[1,0]),t),i[1]);else{let l=i[0]!==e.shape.length-1,u=i[1]===t.shape.length-1;o=ft(e,t,l,u)}if(s>0){let l;a>n?l=a+n-3:l=a-1;let u=[];for(let c=l;c<l+s;++c)u.push(c);o=Ti(o,u)}return o.shape.length===1&&(o=pn(o,1)),o})}var b$=class extends Ou{constructor(e){super(e),this.axes=e.axes,this.normalize=e.normalize==null?!1:e.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){_.assert(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");let t=e[0],r=e[1];if(t.length>3||r.length>3)throw new dt("Dot layer does not support tensors of 4D or higher rank yet.");let a=this.interpretAxes(t,r);if(t[a[0]]!==r[a[1]])throw new ae(`Dimension incompatibility: ${t[a[0]]} !== ${r[a[1]]}`)}mergeFunction(e){if(e.length!==2)throw new ae(`A \`Dot\` layer must be called on exactly 2 inputs, but received ${e.length} input(s).`);let t=e[0],r=e[1],a;return Array.isArray(this.axes)?a=this.axes.map((n,i)=>Qp(n,e[i].shape.length)):a=[Qp(this.axes,t.shape.length),Qp(this.axes,r.shape.length)],this.normalize&&(t=nb(t,a[0]),r=nb(r,a[1])),Oie(t,r,a)}interpretAxes(e,t){let r;return Array.isArray(this.axes)?r=this.axes:r=[Qp(this.axes,e.length),Qp(this.axes,t.length)],r}computeOutputShape(e){_.assert(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");let t=e[0].slice(),r=e[1].slice();if(t.length>3||r.length>3)throw new dt("Dot layer does not support tensors of 4D or higher rank yet.");let a=this.interpretAxes(t,r);t.splice(a[0],1),r.splice(a[1],1),r.splice(0,1);let n=t.concat(r);return n.length===1&&n.push(1),n}computeMask(e,t){return null}getConfig(){let e={axes:this.axes,normalize:this.normalize},t=super.getConfig();return Object.assign(e,t),e}};b$.className="Dot";Ie.registerClass(b$);var y$=class extends Et{constructor(e){super(e),this.supportsMasking=!0,this.stddev=e.stddev}computeOutputShape(e){return e}getConfig(){let e=super.getConfig(),t={stddev:this.stddev};return Object.assign(t,e),t}call(e,t){return te(()=>{this.invokeCallHook(e,t);let r=mt(e);return bm(()=>xe(n0(r.shape,0,this.stddev),r),()=>r,t.training||!1)})}};y$.className="GaussianNoise";Ie.registerClass(y$);var w$=class extends Et{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate}computeOutputShape(e){return e}getConfig(){let e=super.getConfig(),t={rate:this.rate};return Object.assign(t,e),t}call(e,t){return te(()=>{this.invokeCallHook(e,t);let r=mt(e);return this.rate>0&&this.rate<1?bm(()=>{let a=Math.sqrt(this.rate/(1-this.rate));return ee(r,n0(r.shape,1,a))},()=>r,t.training||!1):r})}};w$.className="GaussianDropout";Ie.registerClass(w$);var x$=class extends Et{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate,this.noiseShape=e.noiseShape}_getNoiseShape(e){return this.noiseShape||mt(e).shape}computeOutputShape(e){return e}getConfig(){let e=super.getConfig(),t={rate:this.rate};return Object.assign(t,e),t}call(e,t){return te(()=>{if(this.rate<1&&this.rate>0){let r=this._getNoiseShape(e);return bm(()=>{let a=mt(e),n=1.6732632423543772,i=1.0507009873554805,s=-n*i,o=Eo(cp(r),this.rate);o=r0(o,"float32");let l=((1-this.rate)*(1+this.rate*s**2))**-.5,u=-l*s*this.rate,c=xe(ee(a,o),ee(xe(o,-1),s));return xe(ee(c,l),u)},()=>mt(e),t.training||!1)}return e})}};x$.className="AlphaDropout";Ie.registerClass(x$);function hh(e,t,r,a,n,i=.001){let s;if(e.rank===2)s=KP(e,t,r,a,n,i);else if(e.rank===3)s=ZP(e,t,r,a,n,i);else if(e.rank===4)s=QP(e,t,r,a,n,i);else throw new dt(`batchNormalization is not implemented for array of rank ${e.rank} yet`);return s}function Pie(e,t,r,a,n=.001){return te(()=>{let i=Ry(e,a),s=i.mean,o=i.variance;return[hh(e,s,o,r,t,n),s,o]})}function Die(e,t,r,a,n=.001){return te(()=>{let i=Ry(e,a),s=i.mean,o=i.variance,l=[];for(let f of si(0,e.rank))a.indexOf(f)!==-1?l.push(1):l.push(e.shape[f]);let u=re(s,l),c=re(o,l),d=t==null?null:re(t,l),p=r==null?null:re(r,l);return[hh(e,u,c,p,d,n),s,o]})}function Fie(e,t,r,a,n=.001){return _.arraysEqual(a.slice().sort(),si(0,e.rank-1))?Pie(e,t,r,a,n):Die(e,t,r,a,n)}var k$=class extends Et{constructor(e){e==null&&(e={}),super(e),this.supportsMasking=!0,this.axis=e.axis==null?-1:e.axis,this.momentum=e.momentum==null?.99:e.momentum,this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=Kt(e.betaInitializer||"zeros"),this.gammaInitializer=Kt(e.gammaInitializer||"ones"),this.movingMeanInitializer=Kt(e.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=Kt(e.movingVarianceInitializer||"ones"),this.betaConstraint=Or(e.betaConstraint),this.gammaConstraint=Or(e.gammaConstraint),this.betaRegularizer=Zt(e.betaRegularizer),this.gammaRegularizer=Zt(e.gammaRegularizer)}build(e){e=_t(e);let t=this.axis>=0?this.axis:this.axis+e.length,r=e[t];if(r==null)throw new ae(`Axis ${t} of input tensor should have a defined dimension but the layer received an input with shape ${JSON.stringify(e)}.`);this.inputSpec=[new kr({ndim:e.length,axes:{[t]:r}})];let a=[r];this.scale&&(this.gamma=this.addWeight("gamma",a,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",a,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",a,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",a,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(e,t){return te(()=>{let r=t.training==null?!1:t.training,a=mt(e),n=a.shape,i=n.length,s=si(0,i),o=this.axis>=0?this.axis:this.axis+i;s.splice(o,1);let l=kl(1,i);l[o]=n[o];let u=s.slice();u.sort();let c=!_.arraysEqual(u,si(0,i).slice(0,i-1)),d=()=>{if(c){let g=re(this.movingMean.read(),l),v=re(this.movingVariance.read(),l),b=this.center?re(this.beta.read(),l):null,y=this.scale?re(this.gamma.read(),l):null;return hh(a,g,v,b,y,this.epsilon)}else return hh(a,this.movingMean.read(),this.movingVariance.read(),this.beta==null?null:this.beta.read(),this.gamma==null?null:this.gamma.read(),this.epsilon)};if(!r)return d();let[p,f,h]=Fie(a,this.gamma.read(),this.beta.read(),s,this.epsilon),m=(g,v,b)=>{te(()=>{let y=1-b,w=g.read(),x=ee(Fe(w,v),y);g.write(Fe(w,x))})};return m(this.movingMean,f,this.momentum),m(this.movingVariance,h,this.momentum),p})}getConfig(){let e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:er(this.betaInitializer),gammaInitializer:er(this.gammaInitializer),movingMeanInitializer:er(this.movingMeanInitializer),movingVarianceInitializer:er(this.movingVarianceInitializer),betaRegularizer:Dt(this.betaRegularizer),gammaRegularizer:Dt(this.gammaRegularizer),betaConstraint:Rr(this.betaConstraint),gammaConstraint:Rr(this.gammaConstraint)},t=super.getConfig();return Object.assign(e,t),e}};k$.className="BatchNormalization";Ie.registerClass(k$);var E$=class extends Et{constructor(e){if(e==null&&(e={}),super(e),this.axis=e.axis==null?-1:e.axis,typeof this.axis=="number"){if(!Number.isInteger(this.axis))throw new Error(`Expected axis to be an integer, but received ${this.axis}`)}else if(Array.isArray(this.axis)){for(let t of this.axis)if(!Number.isInteger(t))throw new Error(`Expected axis to be an array of integers, but received ${JSON.stringify(this.axis)}`)}else throw new Error(`Expected axis to be an integer or an array of integers, but received ${JSON.stringify(this.axis)}`);this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=Kt(e.betaInitializer||"zeros"),this.gammaInitializer=Kt(e.gammaInitializer||"ones"),this.betaRegularizer=Zt(e.betaRegularizer),this.gammaRegularizer=Zt(e.gammaRegularizer),this.supportsMasking=!0}build(e){e=_t(e);let t=e.length;typeof this.axis=="number"&&(this.axis=[this.axis]);for(let n=0;n<this.axis.length;++n)this.axis[n]<0&&(this.axis[n]+=t);for(let n of this.axis)if(n<0||n>=t)throw new Error(`Invalid axis: ${n}`);if(this.axis.length!==Xs(this.axis).length)throw new Error(`Found duplicate axes in: ${this.axis}`);let r=this.axis.map(n=>e[n]),a=!0;this.scale?this.gamma=this.addWeight("gamma",r,"float32",this.gammaInitializer,this.gammaRegularizer,a):this.gamma=null,this.center?this.beta=this.addWeight("beta",r,"float32",this.betaInitializer,this.betaRegularizer,a):this.beta=null,this.built=!0}call(e,t){let r=mt(e),a=r.shape,n=a.length;return te(()=>{let{mean:i,variance:s}=Ry(r,this.axis,!0),o=kl(1,n);for(let f of this.axis)o[f]=a[f];let l=f=>f!=null&&f.shape.length!==n?re(f,o):f,u=this.scale?l(this.gamma.read()):null,c=this.center?l(this.beta.read()):null,d=[],p=[];for(let f=0;f<n;++f)this.axis.indexOf(f)!==-1?(d.push(a[f]),p.push(1)):(d.push(1),p.push(a[f]));return i=Jn(i,d),s=Jn(s,d),u!=null&&(u=Jn(u,p)),c!=null&&(c=Jn(c,p)),hh(r,i,s,c,u,this.epsilon)})}getConfig(){let e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:er(this.betaInitializer),gammaInitializer:er(this.gammaInitializer),betaRegularizer:Dt(this.betaRegularizer),gammaRegularizer:Dt(this.gammaRegularizer)},t=super.getConfig();return Object.assign(e,t),e}};E$.className="LayerNormalization";Ie.registerClass(E$);function Lie(e,t,r){return te(()=>{if(e.rank!==4)throw new ae(`temporalPadding expects input tensor to be 4-D, but received a ${e.rank}-D tensor.`);if(t==null&&(t=[[1,1],[1,1]]),t.length!==2||t[0].length!==2||t[1].length!==2)throw new ae("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(r==null&&(r=oi()),r!=="channelsLast"&&r!=="channelsFirst")throw new ae(`Unknown data format: ${r}. Supported data formats are 'channelsLast' and 'channelsFirst.`);let a;return r==="channelsFirst"?a=[[0,0],[0,0],t[0],t[1]]:a=[[0,0],t[0],t[1],[0,0]],ui(e,a)})}var C$=class extends Et{constructor(e){if(e==null&&(e={}),super(e),this.dataFormat=e.dataFormat==null?oi():e.dataFormat,e.padding==null)this.padding=[[1,1],[1,1]];else if(typeof e.padding=="number")this.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,e.padding.length!==2)throw new ae(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${e.padding.length} array.`);let t,r;if(typeof e.padding[0]=="number")t=[e.padding[0],e.padding[0]],r=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,e.padding[0].length!==2)throw new ae(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${e.padding[0].length} array.`);if(t=e.padding[0],e.padding[1].length!==2)throw new ae(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${e.padding[1].length} array.`);r=e.padding[1]}this.padding=[t,r]}this.inputSpec=[new kr({ndim:4})]}computeOutputShape(e){e=_t(e);let t,r;return this.dataFormat==="channelsFirst"?(e[2]!=null&&e[2]>=0?t=e[2]+this.padding[0][0]+this.padding[0][1]:t=null,e[3]!=null&&e[3]>=0?r=e[3]+this.padding[1][0]+this.padding[1][1]:r=null,[e[0],e[1],t,r]):(e[1]!=null&&e[1]>=0?t=e[1]+this.padding[0][0]+this.padding[0][1]:t=null,e[2]!=null&&e[2]>=0?r=e[2]+this.padding[1][0]+this.padding[1][1]:r=null,[e[0],t,r,e[3]])}call(e,t){return te(()=>Lie(mt(e),this.padding,this.dataFormat))}getConfig(){let e={padding:this.padding,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}};C$.className="ZeroPadding2D";Ie.registerClass(C$);function w0(e,t,r,a,n,i){return te(()=>{gr(n),QD(i),$a(a),r==null&&(r=[1,1]),a==null&&(a="valid"),n==null&&(n=oi()),i==null&&(i="max"),e=jS(e,n);let s,o=a==="same"?"same":"valid";return i==="max"?s=Dr(e,t,r,o):s=ps(e,t,r,o),n==="channelsFirst"&&(s=ct(s,[0,3,1,2])),s})}function qF(e,t,r,a,n,i){return te(()=>{gr(n),QD(i),$a(a),r==null&&(r=[1,1,1]),a==null&&(a="valid"),n==null&&(n=oi()),i==null&&(i="max"),e=WF(e,n);let s,o=a==="same"?"same":"valid";return i==="max"?s=KC(e,t,r,o):s=MC(e,t,r,o),n==="channelsFirst"&&(s=ct(s,[0,4,1,2,3])),s})}var XF=class extends Et{constructor(e){if(e.poolSize==null&&(e.poolSize=2),super(e),typeof e.poolSize=="number")this.poolSize=[e.poolSize];else if(Array.isArray(e.poolSize)&&e.poolSize.length===1&&typeof e.poolSize[0]=="number")this.poolSize=e.poolSize;else throw new ae(`poolSize for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.poolSize)}`);if(Br(this.poolSize,"poolSize"),e.strides==null)this.strides=this.poolSize;else if(typeof e.strides=="number")this.strides=[e.strides];else if(Array.isArray(e.strides)&&e.strides.length===1&&typeof e.strides[0]=="number")this.strides=e.strides;else throw new ae(`strides for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.strides)}`);Br(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,$a(this.padding),this.inputSpec=[new kr({ndim:3})]}computeOutputShape(e){e=_t(e);let t=ii(e[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],t,e[2]]}call(e,t){return te(()=>{this.invokeCallHook(e,t),e=gm(mt(e),2);let r=this.poolingFunction(mt(e),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return Ti(r,[2])})}getConfig(){let e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},t=super.getConfig();return Object.assign(e,t),e}},S$=class extends XF{constructor(e){super(e)}poolingFunction(e,t,r,a,n){return gr(n),$a(a),w0(e,t,r,a,n,"max")}};S$.className="MaxPooling1D";Ie.registerClass(S$);var $$=class extends XF{constructor(e){super(e)}poolingFunction(e,t,r,a,n){return gr(n),$a(a),w0(e,t,r,a,n,"avg")}};$$.className="AveragePooling1D";Ie.registerClass($$);var YF=class extends Et{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==2)throw new ae(`If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides];Br(this.poolSize,"poolSize"),Br(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,gr(this.dataFormat),$a(this.padding),this.inputSpec=[new kr({ndim:4})]}computeOutputShape(e){e=_t(e);let t=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2];return t=ii(t,this.poolSize[0],this.padding,this.strides[0]),r=ii(r,this.poolSize[1],this.padding,this.strides[1]),this.dataFormat==="channelsFirst"?[e[0],e[1],t,r]:[e[0],t,r,e[3]]}call(e,t){return te(()=>(this.invokeCallHook(e,t),this.poolingFunction(mt(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){let e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}},I$=class extends YF{constructor(e){super(e)}poolingFunction(e,t,r,a,n){return gr(n),$a(a),w0(e,t,r,a,n,"max")}};I$.className="MaxPooling2D";Ie.registerClass(I$);var T$=class extends YF{constructor(e){super(e)}poolingFunction(e,t,r,a,n){return gr(n),$a(a),w0(e,t,r,a,n,"avg")}};T$.className="AveragePooling2D";Ie.registerClass(T$);var KF=class extends Et{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==3)throw new ae(`If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides,e.strides];Br(this.poolSize,"poolSize"),Br(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,gr(this.dataFormat),$a(this.padding),this.inputSpec=[new kr({ndim:5})]}computeOutputShape(e){e=_t(e);let t=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2],a=this.dataFormat==="channelsFirst"?e[4]:e[3];return t=ii(t,this.poolSize[0],this.padding,this.strides[0]),r=ii(r,this.poolSize[1],this.padding,this.strides[1]),a=ii(a,this.poolSize[2],this.padding,this.strides[2]),this.dataFormat==="channelsFirst"?[e[0],e[1],t,r,a]:[e[0],t,r,a,e[4]]}call(e,t){return te(()=>(this.invokeCallHook(e,t),this.poolingFunction(mt(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){let e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}},N$=class extends KF{constructor(e){super(e)}poolingFunction(e,t,r,a,n){return gr(n),$a(a),qF(e,t,r,a,n,"max")}};N$.className="MaxPooling3D";Ie.registerClass(N$);var A$=class extends KF{constructor(e){super(e)}poolingFunction(e,t,r,a,n){return gr(n),$a(a),qF(e,t,r,a,n,"avg")}};A$.className="AveragePooling3D";Ie.registerClass(A$);var ZF=class extends Et{constructor(e){super(e),this.inputSpec=[new kr({ndim:3})]}computeOutputShape(e){return[e[0],e[2]]}call(e,t){throw new dt}},_$=class extends ZF{constructor(e){super(e||{})}call(e,t){return te(()=>{let r=mt(e);return Qt(r,1)})}};_$.className="GlobalAveragePooling1D";Ie.registerClass(_$);var M$=class extends ZF{constructor(e){super(e||{})}call(e,t){return te(()=>{let r=mt(e);return Fa(r,1)})}};M$.className="GlobalMaxPooling1D";Ie.registerClass(M$);var QF=class extends Et{constructor(e){super(e),this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,gr(this.dataFormat),this.inputSpec=[new kr({ndim:4})]}computeOutputShape(e){return e=e,this.dataFormat==="channelsLast"?[e[0],e[3]]:[e[0],e[1]]}call(e,t){throw new dt}getConfig(){let e={dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}},R$=class extends QF{call(e,t){return te(()=>{let r=mt(e);return this.dataFormat==="channelsLast"?Qt(r,[1,2]):Qt(r,[2,3])})}};R$.className="GlobalAveragePooling2D";Ie.registerClass(R$);var O$=class extends QF{call(e,t){return te(()=>{let r=mt(e);return this.dataFormat==="channelsLast"?Fa(r,[1,2]):Fa(r,[2,3])})}};O$.className="GlobalMaxPooling2D";Ie.registerClass(O$);var JF=class extends Et{constructor(e){super(e),this.layer=e.layer}build(e){this.built=!0}get trainable(){return this.layer!=null?this.layer.trainable:!1}set trainable(e){this.layer!=null&&(this.layer.trainable=e)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(e){this.layer.setWeights(e)}getConfig(){let e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},t=super.getConfig();return Object.assign(e,t),e}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.layer!=null&&this.layer.setFastWeightInitDuringBuild(e)}static fromConfig(e,t,r={}){let a=t.layer,n=ai(a,r);delete t.layer;let i={layer:n};return Object.assign(i,t),new e(i)}},P$=class extends JF{constructor(e){super(e),this.supportsMasking=!0}build(e){if(e=_t(e),e.length<3)throw new ae(`TimeDistributed layer expects an input shape >= 3D, but received input shape ${JSON.stringify(e)}`);this.inputSpec=[{shape:e}];let t=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(t),this.layer.built=!0),super.build(e)}computeOutputShape(e){e=_t(e);let t=[e[0]].concat(e.slice(2)),r=this.layer.computeOutputShape(t),a=e[1];return[r[0],a].concat(r.slice(1))}call(e,t){return te(()=>(e=mt(e),jF((r,a)=>[mt(this.layer.call(r,t)),[]],e,[],!1,null,null,!1,!0)[1]))}};P$.className="TimeDistributed";Ie.registerClass(P$);function zie(e){Mu(Bne,"BidirectionalMergeMode",e)}var Bie="concat",D$=class extends JF{constructor(e){super(e);let t=e.layer.getConfig(),r={};r.className=e.layer.getClassName(),r.config=t,this.forwardLayer=ai(r),t.goBackwards=t.goBackwards!==!0;let a={};if(a.className=e.layer.getClassName(),a.config=t,this.backwardLayer=ai(a),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=e.mergeMode===void 0?Bie:e.mergeMode,zie(this.mergeMode),e.weights)throw new dt("weights support is not implemented for Bidirectional layer yet.");this._stateful=e.layer.stateful,this.returnSequences=e.layer.returnSequences,this.returnState=e.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=e.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(e){this._trainable=e,this.forwardLayer!=null&&(this.forwardLayer.trainable=e),this.backwardLayer!=null&&(this.backwardLayer.trainable=e)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(e){let t=e.length,r=Math.floor(t/2);this.forwardLayer.setWeights(e.slice(0,r)),this.backwardLayer.setWeights(e.slice(r))}computeOutputShape(e){let t=this.forwardLayer.computeOutputShape(e);Array.isArray(t)&&Array.isArray(t[0])||(t=[t]),t=t;let r,a,n;return this.returnState&&(n=t.slice(1)),r=t[0],r=r,this.mergeMode==="concat"?(r[r.length-1]*=2,a=[r]):this.mergeMode==null?a=[r,r.slice()]:a=[r],this.returnState?this.mergeMode==null?a.concat(n).concat(n.slice()):[r].concat(n).concat(n.slice()):Rn(a)}apply(e,t){let r=t==null?null:t.initialState,a=t==null?null:t.constants;t==null&&(t={});let n=UF(e,r,a,this.numConstants);if(e=n.inputs,r=n.initialState,a=n.constants,Array.isArray(e)&&(r=e.slice(1),e=e[0]),(r==null||r.length===0)&&a==null)return super.apply(e,t);let i=[],s=[];if(r!=null){let l=r.length;if(l%2>0)throw new ae("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");t.initialState=r,i.push(...r);let u=r.map(c=>new kr({shape:c.shape}));this.forwardLayer.stateSpec=u.slice(0,l/2),this.backwardLayer.stateSpec=u.slice(l/2),s.push(...u)}if(a!=null)throw new dt("Support for constants in Bidirectional layers is not implemented yet.");let o=i[0]instanceof ti;for(let l of i)if(l instanceof ti!==o)throw new ae("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(o){let l=[e].concat(i),u=this.inputSpec.concat(s),c=this.inputSpec;this.inputSpec=u;let d=super.apply(l,t);return this.inputSpec=c,d}else return super.apply(e,t)}call(e,t){return te(()=>{let r=t.initialState,a,n;if(r==null)a=this.forwardLayer.call(e,t),n=this.backwardLayer.call(e,t);else{let o=r.slice(0,r.length/2),l=r.slice(r.length/2);a=this.forwardLayer.call(e,Object.assign(t,{initialState:o})),n=this.backwardLayer.call(e,Object.assign(t,{initialState:l}))}let i;this.returnState&&(Array.isArray(a)&&(i=a.slice(1).concat(n.slice(1))),a=a[0],n=n[0]),this.returnSequences&&(n=ca(n,1));let s;return this.mergeMode==="concat"?s=vS([a,n]):this.mergeMode==="sum"?s=xe(a,n):this.mergeMode==="ave"?s=ee(.5,xe(a,n)):this.mergeMode==="mul"?s=ee(a,n):this.mergeMode==null&&(s=[a,n]),this.returnState?this.mergeMode==null?s.concat(i):[s].concat(i):s})}resetStates(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(e){rl(this.forwardLayer.name,()=>{this.forwardLayer.build(e)}),rl(this.backwardLayer.name,()=>{this.backwardLayer.build(e)}),this.built=!0}computeMask(e,t){Array.isArray(t)&&(t=t[0]);let r;if(this.returnSequences?this.mergeMode==null?r=[t,t]:r=t:this.mergeMode==null?r=[null,null]:r=null,this.returnState){let a=this.forwardLayer.states.map(n=>null);return Array.isArray(r)?r.concat(a).concat(a):[r].concat(a).concat(a)}else return r}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.forwardLayer!=null&&this.forwardLayer.setFastWeightInitDuringBuild(e),this.backwardLayer!=null&&this.backwardLayer.setFastWeightInitDuringBuild(e)}getConfig(){let e={mergeMode:this.mergeMode},t=super.getConfig();return Object.assign(e,t),e}static fromConfig(e,t){let r=ai(t.layer);if(delete t.layer,t.numConstants!=null)throw new dt("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");let a=t;return a.layer=r,new e(a)}};D$.className="Bidirectional";Ie.registerClass(D$);function Vie(e){return new fp(e)}function Wie(e){return new WS(e)}function Hie(e){return new zS(e)}function Uie(e){return new BS(e)}function jie(e){return new VS(e)}function Gie(e){return new US(e)}function qie(e){return new HS(e)}function Xie(e){return new h0(e)}function Yie(e){return new km(e)}function Kie(e){return new qS(e)}function Zie(e){return new Em(e)}function Qie(e){return new XS(e)}function Jie(e){return new YS(e)}function ese(e){return new KS(e)}function tse(e){return new ZS(e)}function rse(e){return new QS(e)}function nse(e){return new s$(e)}function ase(e){return new a$(e)}function ise(e){return new y0(e)}function sse(e){return new n$(e)}function ose(e){return new i$(e)}function lse(e){return new o$(e)}function use(e){return new l$(e)}function cse(e){return new u$(e)}function dse(e){return new d$(e)}function pse(e){return new p$(e)}function fse(e){return new h$(e)}function hse(e){return new v$(e)}function mse(e){return new m$(e)}function gse(e){return new g$(e)}function vse(e){return new f$(e)}function bse(e){return new b$(e)}function yse(e){return new k$(e)}function wse(e){return new E$(e)}function xse(e){return new C$(e)}function F$(e){return new $$(e)}function kse(e){return F$(e)}function Ese(e){return F$(e)}function L$(e){return new T$(e)}function Cse(e){return L$(e)}function Sse(e){return L$(e)}function z$(e){return new A$(e)}function $se(e){return z$(e)}function Ise(e){return z$(e)}function Tse(e){return new _$(e)}function Nse(e){return new R$(e)}function eL(e){return new M$(e)}function tL(e){return new O$(e)}function rL(e){return new S$(e)}function nL(e){return new I$(e)}function Ase(e){return new N$(e)}function _se(e){return new e$(e)}function Mse(e){return new g0(e)}function Rse(e){return new t$(e)}function Ose(e){return new Sm(e)}function Pse(e){return new JS(e)}function Dse(e){return new m0(e)}function Fse(e){return new r$(e)}function Lse(e){return new b0(e)}function zse(e){return new Pi(e)}function Bse(e){return new v0(e)}function Vse(e){return new D$(e)}function Wse(e){return new P$(e)}var Hse=eL,Use=tL,jse=rL,Gse=nL;function qse(e){return new y$(e)}function Xse(e){return new w$(e)}function Yse(e){return new x$(e)}function Kse(e){return new c$(e)}var aL={};ut(aL,{MAPE:()=>ooe,MSE:()=>coe,binaryAccuracy:()=>Zse,binaryCrossentropy:()=>Qse,categoricalAccuracy:()=>eoe,categoricalCrossentropy:()=>toe,cosineProximity:()=>aoe,mape:()=>loe,meanAbsoluteError:()=>ioe,meanAbsolutePercentageError:()=>soe,meanSquaredError:()=>uoe,mse:()=>doe,precision:()=>roe,recall:()=>noe,sparseCategoricalAccuracy:()=>Jse});function Zse(e,t){return MS(e,t)}function Qse(e,t){return bF(e,t)}function Jse(e,t){return yF(e,t)}function eoe(e,t){return RS(e,t)}function toe(e,t){return OS(e,t)}function roe(e,t){return vF(e,t)}function noe(e,t){return Uae(e,t)}function aoe(e,t){return _S(e,t)}function ioe(e,t){return p0(e,t)}function soe(e,t){return hp(e,t)}function ooe(e,t){return hp(e,t)}function loe(e,t){return hp(e,t)}function uoe(e,t){return Ru(e,t)}function coe(e,t){return Ru(e,t)}function doe(e,t){return Ru(e,t)}var iL={};ut(iL,{modelFromJSON:()=>wie});var sL={};ut(sL,{l1:()=>foe,l1l2:()=>poe,l2:()=>hoe});function poe(e){return new wm(e)}function foe(e){return Tie(e)}function hoe(e){return Nie(e)}var oL=class extends Bc{constructor(){super(...arguments),this.model=null}setModel(e){if(!(e instanceof as))throw new Error("model must be a LayersModel, not some other Container");this.model=e}};function Tg(e,t){return e<t}function wA(e,t){return e>t}var lL=class extends oL{constructor(e){if(super(),e==null&&(e={}),e.restoreBestWeights)throw new dt("restoreBestWeights = True is not implemented in EarlyStopping yet.");this.monitor=e.monitor||"val_loss",this.minDelta=Math.abs(e.minDelta||0),this.patience=e.patience||0,this.verbose=e.verbose||0,this.mode=e.mode||"auto",this.baseline=e.baseline,["auto","min","max"].indexOf(this.mode)===-1&&(console.warn(`EarlyStopping mode '${this.mode}' is invalid. Falling back to mode 'auto'.`),this.mode="auto"),this.mode==="min"?this.monitorFunc=Tg:this.mode==="max"?this.monitorFunc=wA:this.monitor.indexOf("acc")!==-1?this.monitorFunc=wA:this.monitorFunc=Tg,this.monitorFunc===Tg&&(this.minDelta*=-1)}async onTrainBegin(e){this.wait=0,this.stoppedEpoch=0,this.baseline!=null?this.best=this.baseline:this.best=this.monitorFunc===Tg?1/0:-1/0}async onEpochEnd(e,t){await Cs(t);let r=this.getMonitorValue(t);r!=null&&(this.monitorFunc(r-this.minDelta,this.best)?(this.best=r,this.wait=0):(this.wait++,this.wait>=this.patience&&(this.stoppedEpoch=e,this.model.stopTraining=!0)))}async onTrainEnd(e){this.stoppedEpoch>0&&this.verbose&&console.log(`Epoch ${this.stoppedEpoch}: early stopping.`)}getMonitorValue(e){e==null&&(e={});let t=e[this.monitor];return t==null&&console.warn(`Metric for EarlyStopping ${this.monitor} is not available. Available metrics are: ${Object.keys(e)}`),t}};function moe(e){return new lL(e)}var goe={earlyStopping:moe},voe=ce();voe.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,e=>{e&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});var Na;(function(e){e[e.DT_INVALID=0]="DT_INVALID",e[e.DT_FLOAT=1]="DT_FLOAT",e[e.DT_DOUBLE=2]="DT_DOUBLE",e[e.DT_INT32=3]="DT_INT32",e[e.DT_UINT8=4]="DT_UINT8",e[e.DT_INT16=5]="DT_INT16",e[e.DT_INT8=6]="DT_INT8",e[e.DT_STRING=7]="DT_STRING",e[e.DT_COMPLEX64=8]="DT_COMPLEX64",e[e.DT_INT64=9]="DT_INT64",e[e.DT_BOOL=10]="DT_BOOL",e[e.DT_QINT8=11]="DT_QINT8",e[e.DT_QUINT8=12]="DT_QUINT8",e[e.DT_QINT32=13]="DT_QINT32",e[e.DT_BFLOAT16=14]="DT_BFLOAT16",e[e.DT_QINT16=15]="DT_QINT16",e[e.DT_QUINT16=16]="DT_QUINT16",e[e.DT_UINT16=17]="DT_UINT16",e[e.DT_COMPLEX128=18]="DT_COMPLEX128",e[e.DT_HALF=19]="DT_HALF",e[e.DT_RESOURCE=20]="DT_RESOURCE",e[e.DT_VARIANT=21]="DT_VARIANT",e[e.DT_UINT32=22]="DT_UINT32",e[e.DT_UINT64=23]="DT_UINT64",e[e.DT_FLOAT_REF=101]="DT_FLOAT_REF",e[e.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",e[e.DT_INT32_REF=103]="DT_INT32_REF",e[e.DT_UINT8_REF=104]="DT_UINT8_REF",e[e.DT_INT16_REF=105]="DT_INT16_REF",e[e.DT_INT8_REF=106]="DT_INT8_REF",e[e.DT_STRING_REF=107]="DT_STRING_REF",e[e.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",e[e.DT_INT64_REF=109]="DT_INT64_REF",e[e.DT_BOOL_REF=110]="DT_BOOL_REF",e[e.DT_QINT8_REF=111]="DT_QINT8_REF",e[e.DT_QUINT8_REF=112]="DT_QUINT8_REF",e[e.DT_QINT32_REF=113]="DT_QINT32_REF",e[e.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",e[e.DT_QINT16_REF=115]="DT_QINT16_REF",e[e.DT_QUINT16_REF=116]="DT_QUINT16_REF",e[e.DT_UINT16_REF=117]="DT_UINT16_REF",e[e.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",e[e.DT_HALF_REF=119]="DT_HALF_REF",e[e.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",e[e.DT_VARIANT_REF=121]="DT_VARIANT_REF",e[e.DT_UINT32_REF=122]="DT_UINT32_REF",e[e.DT_UINT64_REF=123]="DT_UINT64_REF"})(Na||(Na={}));var xA;(function(e){(function(t){t[t.LEGACY=0]="LEGACY",t[t.V1=1]="V1",t[t.V2=2]="V2"})(e.CheckpointFormatVersion||(e.CheckpointFormatVersion={}))})(xA||(xA={}));var B$={};function boe(e,t){let r={tfOpName:e,category:"custom",inputs:[],attrs:[],customExecutor:t};B$[e]=r}function uL(e){return B$[e]}function yoe(e){delete B$[e]}function M(e,t,r,a,n){let i=t.inputParams[e];if(i&&i.inputIndexStart!==void 0){let o=i.inputIndexStart,l=i.inputIndexEnd===0?void 0:i.inputIndexEnd===void 0?o+1:i.inputIndexEnd;if(i.type==="tensor")return hn(t.inputNames[i.inputIndexStart],r,a,n);if(i.type==="tensors")return t.inputNames.slice(o,l).map(d=>hn(d,r,a,n));let u=hn(t.inputNames.slice(o)[0],r,a,n),c=u.dataSync();return i.type==="number"?c[0]:_.toNestedArray(u.shape,c)}let s=t.attrParams[e];return s&&s.value}function hn(e,t,r,a){let[n,i]=Zn(e);if(a!=null){let o=a.getHashTableHandleByName(n);if(o!=null)return o}let s=r.currentContextIds.find(o=>!!t[lb(n,o)]);return s!==void 0?t[lb(n,s)][i]:void 0}function woe(e,t,r){return t[lb(e,r.currentContextId)]}function yi(e,t){let[r,a,n]=Zn(e);return[lb(r,t&&t.currentContextId),a,n]}function lb(e,t){return t?`${e}-${t}`:e}function Zn(e){let t=e.split(":");if(t.length===1)return[e,0,void 0];let r=t[0],a=t.length===3?t[1]:void 0,n=Number(t[t.length-1]);return[r,n,a]}function tv(e,t,r){let a=M("pad",e,t,r);if(a==="explicit"){a=M("explicitPaddings",e,t,r);let n=[[0,0],[0,0],[0,0],[0,0]];for(let i=0;i<4;i++)n[i][0]=a[i*2],n[i][1]=a[i*2+1];return n}return a}function ji(e){return e.kept?e:rs(e)}var cL={};ut(cL,{json:()=>xoe});var xoe=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],dL={};ut(dL,{json:()=>koe});var koe=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Prod",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axes",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],pL={};ut(pL,{json:()=>Eoe});var Eoe=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}],fL={};ut(fL,{json:()=>Coe});var Coe=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number"}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],hL={};ut(hL,{json:()=>Soe});var Soe=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],mL={};ut(mL,{json:()=>$oe});var $oe=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],gL={};ut(gL,{json:()=>Ioe});var Ioe=[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],vL={};ut(vL,{json:()=>Toe});var Toe=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],bL={};ut(bL,{json:()=>Noe});var Noe=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]}],yL={};ut(yL,{json:()=>Aoe});var Aoe=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}],wL={};ut(wL,{json:()=>_oe});var _oe=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],xL={};ut(xL,{json:()=>Moe});var Moe=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]}],kL={};ut(kL,{json:()=>Roe});var Roe=[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"SparseToDense",category:"normalization",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!0,notSupported:!0}]}],EL={};ut(EL,{json:()=>Ooe});var Ooe=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],CL={};ut(CL,{json:()=>Poe});var Poe=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]}],SL={};ut(SL,{json:()=>Doe});var Doe=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}],$L={};ut($L,{json:()=>Foe});var Foe=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],IL={};ut(IL,{json:()=>Loe});var Loe=[{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}],TL={};ut(TL,{json:()=>zoe});var zoe=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}],kA=class{static get Instance(){return this._instance||(this._instance=new this)}constructor(){let e=[cL,dL,pL,fL,hL,mL,gL,vL,bL,yL,wL,xL,kL,EL,CL,SL,$L,IL,TL],t=[].concat(...e.map(r=>r.json));this.opMappers=t.reduce((r,a)=>(r[a.tfOpName]=a,r),{})}transformGraph(e,t={}){let r=e.node,a=[],n=[],i=[],s=r.reduce((h,m)=>(h[m.name]=this.mapNode(m),m.op.startsWith("Placeholder")?a.push(h[m.name]):m.op==="Const"?n.push(h[m.name]):(m.input==null||m.input.length===0)&&i.push(h[m.name]),h),{}),o=[],l=[],u={},c={};t!=null&&(u=this.mapSignatureEntries(t.inputs),c=this.mapSignatureEntries(t.outputs));let d=Object.keys(s);d.forEach(h=>{let m=s[h];m.inputNames.forEach((g,v)=>{let[b,,y]=yi(g),w=s[b];if(w.outputs!=null){let x=w.outputs.indexOf(y);if(x!==-1){let k=`${b}:${x}`;m.inputNames[v]=k}}m.inputs.push(w),w.children.push(m)})}),Object.keys(c).length===0?d.forEach(h=>{let m=s[h];m.children.length===0&&l.push(m)}):Object.keys(c).forEach(h=>{let[m]=yi(h),g=s[m];g!=null&&(g.signatureKey=c[h],l.push(g))}),Object.keys(u).length>0?Object.keys(u).forEach(h=>{let[m]=yi(h),g=s[m];g&&(g.signatureKey=u[h],o.push(g))}):o=a;let p={};e.library!=null&&e.library.function!=null&&(p=e.library.function.reduce((h,m)=>(h[m.signature.name]=this.mapFunction(m),h),{}));let f={nodes:s,inputs:o,outputs:l,weights:n,placeholders:a,signature:t,functions:p};return i.length>0&&(f.initNodes=i),f}mapSignatureEntries(e){return Object.keys(e||{}).reduce((t,r)=>(t[e[r].name]=r,t),{})}mapNode(e){let t=uL(e.op)||this.opMappers[e.op]||{};e.attr==null&&(e.attr={});let r={name:e.name,op:e.op,category:t.category,inputNames:(e.input||[]).map(a=>a.startsWith("^")?a.slice(1):a),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr,outputs:t.outputs};return t.inputs!=null&&(r.inputParams=t.inputs.reduce((a,n)=>(a[n.name]={type:n.type,inputIndexStart:n.start,inputIndexEnd:n.end},a),{})),t.attrs!=null&&(r.attrParams=t.attrs.reduce((a,n)=>{let i=n.type,s;switch(n.type){case"string":s=Ek(e.attr,n.tfName,n.defaultValue),s===void 0&&!!n.tfDeprecatedName&&(s=Ek(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"string[]":s=Ak(e.attr,n.tfName,n.defaultValue),s===void 0&&!!n.tfDeprecatedName&&(s=Ak(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number":s=Sk(e.attr,n.tfName,n.defaultValue||0),s===void 0&&!!n.tfDeprecatedName&&(s=Sk(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number[]":s=Nk(e.attr,n.tfName,n.defaultValue),s===void 0&&!!n.tfDeprecatedName&&(s=Nk(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool":s=Ck(e.attr,n.tfName,n.defaultValue),s===void 0&&!!n.tfDeprecatedName&&(s=Ck(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool[]":s=Mk(e.attr,n.tfName,n.defaultValue),s===void 0&&!!n.tfDeprecatedName&&(s=Mk(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape":s=Tk(e.attr,n.tfName,n.defaultValue),s===void 0&&!!n.tfDeprecatedName&&(s=Tk(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape[]":s=_k(e.attr,n.tfName,n.defaultValue),s===void 0&&!!n.tfDeprecatedName&&(s=_k(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype":s=$k(e.attr,n.tfName,n.defaultValue),s===void 0&&!!n.tfDeprecatedName&&(s=$k(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype[]":s=Ik(e.attr,n.tfName,n.defaultValue),s===void 0&&!!n.tfDeprecatedName&&(s=Ik(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"func":s=EA(e.attr,n.tfName,n.defaultValue),s===void 0&&!!n.tfDeprecatedName&&(s=EA(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error(`Unsupported param type: ${n.type} for op: ${e.op}`)}return a[n.name]={value:s,type:i},a},{})),r}mapFunction(e){let t=e.nodeDef,r=[],a=[],n={};t!=null&&(n=t.reduce((u,c)=>(u[c.name]=this.mapNode(c),c.op==="Const"&&a.push(u[c.name]),u),{}));let i=[],s=[];e.signature.inputArg.forEach(u=>{let[c]=yi(u.name),d={name:c,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:V$(u.type),type:"dtype"}},children:[]};d.signatureKey=u.name,i.push(d),n[c]=d}),Object.keys(n).forEach(u=>{let c=n[u];c.inputNames.forEach((d,p)=>{let[f,,h]=yi(d),m=n[f];if(m.outputs!=null){let g=m.outputs.indexOf(h);if(g!==-1){let v=`${f}:${g}`;c.inputNames[p]=v}}c.inputs.push(m),m.children.push(c)})});let o=e.ret;e.signature.outputArg.forEach(u=>{let[c,d]=yi(o[u.name]),p=n[c];p!=null&&(p.defaultOutput=d,s.push(p))});let l=this.mapArgsToSignature(e);return{nodes:n,inputs:i,outputs:s,weights:a,placeholders:r,signature:l}}mapArgsToSignature(e){return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce((t,r)=>(t[r.name]=this.mapArgToTensorInfo(r),t),{}),outputs:e.signature.outputArg.reduce((t,r)=>(t[r.name]=this.mapArgToTensorInfo(r,e.ret),t),{})}}mapArgToTensorInfo(e,t){let r=e.name;return t!=null&&(r=t[r]),{name:r,dtype:e.type}}};function Boe(e){let t=ce().global;if(typeof t.atob!="undefined")return t.atob(e);if(typeof Buffer!="undefined")return new Buffer(e,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}function NL(e,t){let r=Array.isArray(e)?String.fromCharCode.apply(null,e):Boe(e);return t?r:r.toLowerCase()}function Ek(e,t,r,a=!1){let n=e[t];return n!=null?NL(n.s,a):r}function Ck(e,t,r){let a=e[t];return a?a.b:r}function Sk(e,t,r){let a=e[t]||{},n=a.i!=null?a.i:a.f!=null?a.f:r;return typeof n=="number"?n:parseInt(n,10)}function V$(e){switch(typeof e=="string"&&(e=Na[e]),e){case Na.DT_FLOAT:case Na.DT_HALF:return"float32";case Na.DT_INT32:case Na.DT_INT64:case Na.DT_INT8:case Na.DT_UINT8:return"int32";case Na.DT_BOOL:return"bool";case Na.DT_DOUBLE:return"float32";case Na.DT_STRING:return"string";default:return null}}function EA(e,t,r){let a=e[t];return a&&a.func?a.func.name:r}function $k(e,t,r){let a=e[t];return a&&a.type?V$(a.type):r}function Ik(e,t,r){let a=e[t];return a&&a.list&&a.list.type?a.list.type.map(n=>V$(n)):r}function AL(e){if(!e.unknownRank)return e.dim!=null?e.dim.map(t=>typeof t.size=="number"?t.size:parseInt(t.size,10)):[]}function Tk(e,t,r){let a=e[t];return a&&a.shape?AL(a.shape):r}function Nk(e,t,r){let a=e[t];return a?((a.list.f&&a.list.f.length?a.list.f:a.list.i)||[]).map(n=>typeof n=="number"?n:parseInt(n,10)):r}function Ak(e,t,r,a=!1){let n=e[t];return n&&n.list&&n.list.s?n.list.s.map(i=>NL(i,a)):r}function _k(e,t,r){let a=e[t];return a&&a.list&&a.list.shape?a.list.shape.map(n=>AL(n)):r}function Mk(e,t,r){let a=e[t];return a&&a.list&&a.list.b?a.list.b:r}var Voe=class{constructor(e,t,r){this.node=e,this.tensorMap=t,this.context=r,this.inputs=[],this.attrs={},this.inputs=e.inputNames.map(a=>this.getInput(a)),e.rawAttrs!=null&&(this.attrs=Object.keys(e.rawAttrs).reduce((a,n)=>(a[n]=this.getAttr(n),a),{}))}getInput(e){return hn(e,this.tensorMap,this.context)}getAttr(e,t){let r=this.node.rawAttrs[e];if(r.tensor!=null)return hn(e,this.tensorMap,this.context);if(r.i!=null||r.f!=null)return Sk(this.node.rawAttrs,e,t);if(r.s!=null)return Ek(this.node.rawAttrs,e,t);if(r.b!=null)return Ck(this.node.rawAttrs,e,t);if(r.shape!=null)return Tk(this.node.rawAttrs,e,t);if(r.type!=null)return $k(this.node.rawAttrs,e,t);if(r.list!=null){if(r.list.i!=null||r.list.f!=null)return Nk(this.node.rawAttrs,e,t);if(r.list.s!=null)return Ak(this.node.rawAttrs,e,t);if(r.list.shape!=null)return _k(this.node.rawAttrs,e,t);if(r.list.b!=null)return Mk(this.node.rawAttrs,e,t);if(r.list.type!=null)return Ik(this.node.rawAttrs,e,t)}return t}},Woe=(e,t,r)=>{switch(e.op){case"BiasAdd":case"AddV2":case"Add":return[xe(M("a",e,t,r),M("b",e,t,r))];case"AddN":return[GP(M("tensors",e,t,r))];case"FloorMod":case"Mod":return[QC(M("a",e,t,r),M("b",e,t,r))];case"Mul":return[ee(M("a",e,t,r),M("b",e,t,r))];case"RealDiv":case"Div":return[Ve(M("a",e,t,r),M("b",e,t,r))];case"DivNoNan":return[zC(M("a",e,t,r),M("b",e,t,r))];case"FloorDiv":return[Ey(M("a",e,t,r),M("b",e,t,r))];case"Sub":return[Fe(M("a",e,t,r),M("b",e,t,r))];case"Minimum":return[up(M("a",e,t,r),M("b",e,t,r))];case"Maximum":return[Ri(M("a",e,t,r),M("b",e,t,r))];case"Pow":return[ls(M("a",e,t,r),M("b",e,t,r))];case"SquaredDifference":return[Hy(M("a",e,t,r),M("b",e,t,r))];default:throw TypeError(`Node type ${e.op} is not implemented`)}},Hoe=(e,t,r)=>{switch(e.op){case"Abs":case"ComplexAbs":return[xr(M("x",e,t,r))];case"Acos":return[EC(M("x",e,t,r))];case"Acosh":return[CC(M("x",e,t,r))];case"Asin":return[$C(M("x",e,t,r))];case"Asinh":return[IC(M("x",e,t,r))];case"Atan":return[TC(M("x",e,t,r))];case"Atan2":return[NC(M("x",e,t,r),M("y",e,t,r))];case"Atanh":return[AC(M("x",e,t,r))];case"Ceil":return[OC(M("x",e,t,r))];case"Complex":return[os(M("real",e,t,r),M("imag",e,t,r))];case"Cos":return[nm(M("x",e,t,r))];case"Cosh":return[Iy(M("x",e,t,r))];case"Elu":return[op(M("x",e,t,r))];case"Erf":return[BC(M("x",e,t,r))];case"Exp":return[xn(M("x",e,t,r))];case"Expm1":return[UC(M("x",e,t,r))];case"Floor":return[lp(M("x",e,t,r))];case"Log":return[la(M("x",e,t,r))];case"Log1p":return[sm(M("x",e,t,r))];case"Imag":return[Jh(M("x",e,t,r))];case"Neg":return[Gt(M("x",e,t,r))];case"Reciprocal":return[tS(M("x",e,t,r))];case"Real":return[Dc(M("x",e,t,r))];case"Relu":return[At(M("x",e,t,r))];case"Round":return[Dy(M("x",e,t,r))];case"Selu":return[Ly(M("x",e,t,r))];case"Sigmoid":return[Da(M("x",e,t,r))];case"Sin":return[zy(M("x",e,t,r))];case"Sign":return[rS(M("x",e,t,r))];case"Sinh":return[By(M("x",e,t,r))];case"Softplus":return[_u(M("x",e,t,r))];case"Sqrt":return[Yr(M("x",e,t,r))];case"Square":return[Rt(M("x",e,t,r))];case"Tanh":return[vl(M("x",e,t,r))];case"Tan":return[iS(M("x",e,t,r))];case"ClipByValue":return[sn(M("x",e,t,r),M("clipValueMin",e,t,r),M("clipValueMax",e,t,r))];case"Relu6":return[Py(M("x",e,t,r))];case"Rsqrt":return[Fy(hn(e.inputNames[0],t,r))];case"Prod":return[Oy(M("x",e,t,r),M("axes",e,t,r))];case"LeakyRelu":return[im(M("x",e,t,r),M("alpha",e,t,r))];case"Prelu":return[um(M("x",e,t,r),M("alpha",e,t,r))];case"IsNan":return[GC(hn(e.inputNames[0],t,r))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};function _a(e,t,r=""){if(!(typeof e=="number"||typeof t=="number")){_.assert(e.length===t.length,()=>r+` Shapes ${e} and ${t} must match`);for(let a=0;a<e.length;a++){let n=e[a],i=t[a];_.assert(n<0||i<0||n===i,()=>r+` Shapes ${e} and ${t} must match`)}}}function CA(e){return!(typeof e=="number"||e.some(t=>t<0))}function Jp(e,t,r){let a=Rk(e,r),n=!CA(a);if(n&&t.length===0)throw new Error(`Tried to calculate elements of an empty list with non-fully-defined elementShape: ${a}`);if(n&&t.forEach(i=>{a=Rk(i.shape,a)}),!CA(a))throw new Error(`Non-fully-defined elementShape: ${a}`);return a}function Rk(e,t){if(typeof e=="number")return t;if(typeof t=="number")return e;if(e.length!==t.length)throw new Error(`Incompatible ranks during merge: ${e} vs. ${t}`);let r=[];for(let a=0;a<e.length;++a){let n=e[a],i=t[a];if(n>=0&&i>=0&&n!==i)throw new Error(`Incompatible shape during merge: ${e} vs. ${t}`);r[a]=n>=0?n:i}return r}var Uoe=class{constructor(e,t,r,a,n,i,s){this.name=e,this.dtype=t,this.maxSize=r,this.elementShape=a,this.identicalElementShapes=n,this.dynamicSize=i,this.clearAfterRead=s,this.tensors=[],this.closed_=!1,this.idTensor=et(0),zr(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(e){this.tensors.forEach(t=>{(e==null||!e.has(t.tensor.id))&&t.tensor.dispose()}),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(e){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||e>=this.size())throw new Error(`Tried to read from index ${e}, but array size is: ${this.size()}`);let t=this.tensors[e];if(t.cleared)throw new Error(`TensorArray ${this.name}: Could not read index ${e} twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).`);return this.clearAfterRead&&(t.cleared=!0),t.read=!0,t.tensor}readMany(e){return e.map(t=>this.read(t))}write(e,t){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error(`Tried to write to index ${e}, but array is not resizeable and size is: ${this.maxSize}`);let r=this.tensors[e]||{};if(t.dtype!==this.dtype)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e},
          because the value dtype is ${t.dtype}, but TensorArray dtype is ${this.dtype}.`);if(this.size()===0&&(this.elementShape==null||this.elementShape.length===0)&&(this.elementShape=t.shape),_a(this.elementShape,t.shape,`TensorArray ${this.name}: Could not write to TensorArray index ${e}.`),r.read)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been read.`);if(r.written)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been written.`);r.tensor=t,zr(t),r.written=!0,this.tensors[e]=r}writeMany(e,t){if(e.length!==t.length)throw new Error(`TensorArray ${this.name}: could not write multiple tensors,because the index size: ${e.length} is not the same as tensors size: ${t.length}.`);e.forEach((r,a)=>this.write(r,t[a]))}gather(e,t){if(!!t&&t!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but gather requested dtype ${t}`);if(e)e=e.slice(0,this.size());else{e=[];for(let a=0;a<this.size();a++)e.push(a)}if(e.length===0)return ka([],[0].concat(this.elementShape));let r=this.readMany(e);return _a(this.elementShape,r[0].shape,"TensorArray shape mismatch: "),Vr(r,0)}concat(e){if(!!e&&e!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but concat requested dtype ${e}`);if(this.size()===0)return ka([],[0].concat(this.elementShape));let t=[];for(let a=0;a<this.size();a++)t.push(a);let r=this.readMany(t);return _a(this.elementShape,r[0].shape,`TensorArray shape mismatch: tensor array shape (${this.elementShape}) vs first tensor shape (${r[0].shape})`),Ot(r,0)}scatter(e,t){if(t.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${t.dtype}`);if(e.length!==t.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${t.shape[0]}`);let r=Math.max(...e);if(!this.dynamicSize&&r>=this.maxSize)throw new Error(`Max index must be < array size (${r}  vs. ${this.maxSize})`);this.writeMany(e,hr(t,0))}split(e,t){if(t.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${t.dtype}`);let r=0,a=e.map(o=>(r+=o,r));if(r!==t.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${t.shape}`);if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error(`TensorArray's size is not equal to the size of lengths (${this.maxSize} vs. ${e.length}), and the TensorArray is not marked as dynamically resizeable`);let n=r===0?0:t.size/r,i=[];te(()=>{t=re(t,[1,r,n]);for(let o=0;o<e.length;++o){let l=o===0?0:a[o-1],u=[0,l,0],c=[1,e[o],n];i[o]=re(bt(t,u,c),this.elementShape)}return i});let s=[];for(let o=0;o<e.length;o++)s[o]=o;this.writeMany(s,i)}},Wc=class{constructor(e,t,r,a=-1){this.tensors=e,this.elementShape=t,this.elementDtype=r,e!=null&&e.forEach(n=>{if(r!==n.dtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${n.dtype}`);_a(t,n.shape,"TensorList shape mismatch: "),zr(n)}),this.idTensor=et(0),this.maxNumElements=a,zr(this.idTensor)}get id(){return this.idTensor.id}copy(){return new Wc([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(e){this.tensors.forEach(t=>{(e==null||!e.has(t.id))&&t.dispose()}),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(e,t,r=-1){if(t!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t}, but list elements ${this.elementDtype}`);if(r!==-1&&this.tensors.length!==r)throw new Error(`Operation expected a list with ${r} elements but got a list with ${this.tensors.length} elements.`);_a(e,this.elementShape,"TensorList shape mismatch: ");let a=Jp(this.elementShape,this.tensors,e);return te(()=>{let n=this.tensors.map(i=>re(i,a));return Vr(n,0)})}popBack(e,t){if(t!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t}, but list elements ${this.elementDtype}`);if(this.size()===0)throw new Error("Trying to pop from an empty list.");let r=Jp(this.elementShape,this.tensors,e),a=this.tensors.pop();return _a(a.shape,e,"TensorList shape mismatch: "),re(a,r)}pushBack(e){if(e.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${this.elementDtype}`);if(_a(e.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");zr(e),this.tensors.push(e)}resize(e){if(e<0)throw new Error(`TensorListResize expects size to be non-negative. Got: ${e}`);if(this.maxNumElements!==-1&&e>this.maxNumElements)throw new Error(`TensorListResize input size ${e} is greater maxNumElement ${this.maxNumElements}.`);let t=new Wc([],this.elementShape,this.elementDtype,this.maxNumElements);t.tensors.length=e;for(let r=0;r<Math.min(this.tensors.length,e);++r)t.tensors[r]=this.tensors[r];return t}getItem(e,t,r){if(r!==this.elementDtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${this.elementDtype}`);if(e<0||e>this.tensors.length)throw new Error(`Trying to access element ${e} in a list with ${this.tensors.length} elements.`);if(this.tensors[e]==null)throw new Error(`element at index ${e} is null.`);_a(this.tensors[e].shape,t,"TensorList shape mismatch: ");let a=Jp(this.elementShape,this.tensors,t);return re(this.tensors[e],a)}setItem(e,t){if(t.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t.dtype}, but list elements ${this.elementDtype}`);if(e<0||this.maxNumElements!==-1&&e>=this.maxNumElements)throw new Error(`Trying to set element ${e} in a list with max ${this.maxNumElements} elements.`);_a(this.elementShape,t.shape,"TensorList shape mismatch: "),zr(t),this.tensors[e]=t}gather(e,t,r){if(t!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t}, but list elements ${this.elementDtype}`);_a(this.elementShape,r,"TensorList shape mismatch: "),e=e.slice(0,this.size());let a=Jp(this.elementShape,this.tensors,r);return e.length===0?ka([],[0].concat(a)):te(()=>{let n=e.map(i=>re(this.tensors[i],a));return Vr(n,0)})}concat(e,t){if(!!e&&e!==this.elementDtype)throw new Error(`TensorList dtype is ${this.elementDtype} but concat requested dtype ${e}`);_a(this.elementShape,t,"TensorList shape mismatch: ");let r=Jp(this.elementShape,this.tensors,t);return this.size()===0?ka([],[0].concat(r)):te(()=>{let a=this.tensors.map(n=>re(n,r));return Ot(a,0)})}};function joe(e,t,r){let a=e.dtype;if(e.shape.length<1)throw new Error(`Tensor must be at least a vector, but saw shape: ${e.shape}`);if(e.dtype!==r)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${r}`);let n=e.shape.slice(1);_a(n,t,"TensorList shape mismatch: ");let i=hr(e);return new Wc(i,t,a)}function Goe(e,t,r){return new Wc([],e,t,r)}function qoe(e,t,r,a){if(t.length!==e.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${t.length} vs. ${e.shape[0]}`);let n=Math.max(...t);if(a!=null&&a!==-1&&n>=a)throw new Error(`Max index must be < array size (${n}  vs. ${a})`);let i=new Wc([],r,e.dtype,a),s=hr(e,0);return t.forEach((o,l)=>{i.setItem(o,s[l])}),i}function Xoe(e,t,r){let a=0,n=t.map(c=>(a+=c,a));if(a!==e.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${a}, and tensor's shape is: ${e.shape}`);let i=e.shape.slice(1),s=Rk(i,r),o=a===0?0:e.size/a,l=te(()=>{let c=[];e=re(e,[1,a,o]);for(let d=0;d<t.length;++d){let p=d===0?0:n[d-1],f=[0,p,0],h=[1,t[d],o];c[d]=re(bt(e,f,h),s)}return e.dispose(),c}),u=new Wc([],r,e.dtype,t.length);for(let c=0;c<l.length;c++)u.setItem(c,l[c]);return u}var Yoe=async(e,t,r)=>{switch(e.op){case"If":case"StatelessIf":{let a=M("thenBranch",e,t,r),n=M("elseBranch",e,t,r),i=M("cond",e,t,r),s=M("args",e,t,r);return(await i.data())[0]?r.functionMap[a].executeFunctionAsync(s,r.tensorArrayMap,r.tensorListMap):r.functionMap[n].executeFunctionAsync(s,r.tensorArrayMap,r.tensorListMap)}case"While":case"StatelessWhile":{let a=M("body",e,t,r),n=M("cond",e,t,r),i=M("args",e,t,r),s=await r.functionMap[n].executeFunctionAsync(i,r.tensorArrayMap,r.tensorListMap),o=i.map(c=>c.id),l=await s[0].data();s.forEach(c=>{!c.kept&&o.indexOf(c.id)===-1&&c.dispose()});let u=i;for(;l[0];){let c=u;u=await r.functionMap[a].executeFunctionAsync(u,r.tensorArrayMap,r.tensorListMap);let d=u.map(f=>f.id);c.forEach(f=>{!f.kept&&o.indexOf(f.id)===-1&&d.indexOf(f.id)===-1&&f.dispose()});let p=await r.functionMap[n].executeFunctionAsync(u,r.tensorArrayMap,r.tensorListMap);l=await p[0].data(),p.forEach(f=>{!f.kept&&o.indexOf(f.id)===-1&&d.indexOf(f.id)===-1&&f.dispose()})}return u}case"LoopCond":{let a=M("pred",e,t,r);return[ji(a)]}case"Switch":{let a=M("pred",e,t,r),n=M("data",e,t,r);return n.kept||(n=ji(n)),(await a.data())[0]?[void 0,n]:[n,void 0]}case"Merge":{let a=e.inputNames.find(n=>hn(n,t,r)!==void 0);if(a){let n=hn(a,t,r);return[ji(n)]}return}case"Enter":{let a=M("frameName",e,t,r),n=M("tensor",e,t,r);return r.enterFrame(a),[ji(n)]}case"Exit":{let a=M("tensor",e,t,r);return r.exitFrame(),[ji(a)]}case"NextIteration":{let a=M("tensor",e,t,r);return r.nextIteration(),[ji(a)]}case"TensorArrayV3":{let a=M("size",e,t,r),n=M("dtype",e,t,r),i=M("elementShape",e,t,r),s=M("dynamicSize",e,t,r),o=M("clearAfterRead",e,t,r),l=M("identicalElementShapes",e,t,r),u=M("name",e,t,r),c=new Uoe(u,n,a,i,l,s,o);return r.addTensorArray(c),[c.idTensor,et(1)]}case"TensorArrayWriteV3":{let a=M("tensorArrayId",e,t,r),n=M("index",e,t,r),i=M("tensor",e,t,r),s=r.getTensorArray(a.id);return s.write(n,i),[s.idTensor]}case"TensorArrayReadV3":{let a=M("tensorArrayId",e,t,r),n=M("index",e,t,r);return[r.getTensorArray(a.id).read(n)]}case"TensorArrayGatherV3":{let a=M("tensorArrayId",e,t,r),n=M("indices",e,t,r),i=M("dtype",e,t,r);return[r.getTensorArray(a.id).gather(n,i)]}case"TensorArrayScatterV3":{let a=M("tensorArrayId",e,t,r),n=M("indices",e,t,r),i=M("tensor",e,t,r),s=r.getTensorArray(a.id);return s.scatter(n,i),[s.idTensor]}case"TensorArrayConcatV3":{let a=M("tensorArrayId",e,t,r),n=r.getTensorArray(a.id),i=M("dtype",e,t,r);return[n.concat(i)]}case"TensorArraySplitV3":{let a=M("tensorArrayId",e,t,r),n=M("tensor",e,t,r),i=M("lengths",e,t,r),s=r.getTensorArray(a.id);return s.split(i,n),[s.idTensor]}case"TensorArraySizeV3":{let a=M("tensorArrayId",e,t,r),n=r.getTensorArray(a.id);return[et(n.size(),"int32")]}case"TensorArrayCloseV3":{let a=M("tensorArrayId",e,t,r),n=r.getTensorArray(a.id);return n.clearAndClose(),[n.idTensor]}case"TensorListSetItem":{let a=M("tensorListId",e,t,r),n=M("index",e,t,r),i=M("tensor",e,t,r),s=r.getTensorList(a.id);return s.setItem(n,i),[s.idTensor]}case"TensorListGetItem":{let a=M("tensorListId",e,t,r),n=M("index",e,t,r),i=M("elementShape",e,t,r),s=M("elementDType",e,t,r);return[r.getTensorList(a.id).getItem(n,i,s)]}case"TensorListScatterV2":case"TensorListScatter":{let a=M("indices",e,t,r),n=M("tensor",e,t,r),i=M("elementShape",e,t,r),s=M("numElements",e,t,r),o=qoe(n,a,i,s);return r.addTensorList(o),[o.idTensor]}case"TensorListReserve":case"EmptyTensorList":{let a=M("elementShape",e,t,r),n=M("elementDType",e,t,r),i;e.op==="TensorListReserve"?i="numElements":i="maxNumElements";let s=M(i,e,t,r),o=Goe(a,n,s);return r.addTensorList(o),[o.idTensor]}case"TensorListGather":{let a=M("tensorListId",e,t,r),n=M("indices",e,t,r),i=M("elementShape",e,t,r),s=M("elementDType",e,t,r);return[r.getTensorList(a.id).gather(n,s,i)]}case"TensorListStack":{let a=M("tensorListId",e,t,r),n=M("elementShape",e,t,r),i=M("elementDType",e,t,r),s=M("numElements",e,t,r);return[r.getTensorList(a.id).stack(n,i,s)]}case"TensorListFromTensor":{let a=M("tensor",e,t,r),n=M("elementShape",e,t,r),i=M("elementDType",e,t,r),s=joe(a,n,i);return r.addTensorList(s),[s.idTensor]}case"TensorListConcat":case"TensorListConcatV2":{let a=M("tensorListId",e,t,r),n=r.getTensorList(a.id),i=M("dtype",e,t,r),s=M("elementShape",e,t,r);return[n.concat(i,s)]}case"TensorListPushBack":{let a=M("tensorListId",e,t,r),n=M("tensor",e,t,r),i=r.getTensorList(a.id);return i.pushBack(n),[i.idTensor]}case"TensorListPopBack":{let a=M("tensorListId",e,t,r),n=M("elementShape",e,t,r),i=M("elementDType",e,t,r);return[r.getTensorList(a.id).popBack(n,i)]}case"TensorListSplit":{let a=M("tensor",e,t,r),n=M("elementShape",e,t,r),i=M("lengths",e,t,r),s=Xoe(a,i,n);return r.addTensorList(s),[s.idTensor]}case"TensorListLength":{let a=M("tensorListId",e,t,r),n=r.getTensorList(a.id);return[et(n.size(),"int32")]}case"TensorListResize":{let a=M("tensorListId",e,t,r),n=M("size",e,t,r),i=r.getTensorList(a.id).resize(n);return r.addTensorList(i),[i.idTensor]}default:throw TypeError(`Node type ${e.op} is not implemented`)}};function SA(e,t,r){let[a,n]=M("fusedOps",e,t,r),i=a==="biasadd",s=!i,o=n==="prelu",l=a==="fusedbatchnorm",u=M("numArgs",e,t,r);if(i){if(o&&u!==2)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!o&&i&&u!==1)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(l)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");let c=M("strides",e,t,r),d=tv(e,t,r),p=M("dataFormat",e,t,r).toUpperCase(),f=M("dilations",e,t,r),[h,m]=M("args",e,t,r);s&&(m=h,h=void 0);let g=M("leakyreluAlpha",e,t,r);return{stride:c,pad:d,dataFormat:p,dilations:f,biasArg:h,preluArg:m,activationFunc:n,leakyreluAlpha:g}}var Koe=(e,t,r)=>{switch(e.op){case"Conv1D":{let a=M("stride",e,t,r),n=M("pad",e,t,r),i=M("dataFormat",e,t,r).toUpperCase(),s=M("dilation",e,t,r);return[Sy(M("x",e,t,r),M("filter",e,t,r),a,n,i,s)]}case"Conv2D":{let a=M("strides",e,t,r),n=tv(e,t,r),i=M("dataFormat",e,t,r).toUpperCase(),s=M("dilations",e,t,r);return[wn(M("x",e,t,r),M("filter",e,t,r),[a[1],a[2]],n,i,[s[1],s[2]])]}case"_FusedConv2D":{let{stride:a,pad:n,dataFormat:i,dilations:s,biasArg:o,preluArg:l,activationFunc:u,leakyreluAlpha:c}=SA(e,t,r);return[io.conv2d({x:M("x",e,t,r),filter:M("filter",e,t,r),strides:[a[1],a[2]],pad:n,dataFormat:i,dilations:[s[1],s[2]],bias:o,activation:u,preluActivationWeights:l,leakyreluAlpha:c})]}case"FusedDepthwiseConv2dNative":{let{stride:a,pad:n,dataFormat:i,dilations:s,biasArg:o,preluArg:l,activationFunc:u,leakyreluAlpha:c}=SA(e,t,r);return[io.depthwiseConv2d({x:M("x",e,t,r),filter:M("filter",e,t,r),strides:[a[1],a[2]],pad:n,dataFormat:i,dilations:[s[1],s[2]],bias:o,activation:u,preluActivationWeights:l,leakyreluAlpha:c})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{let a=M("outputShape",e,t,r),n=M("strides",e,t,r),i=tv(e,t,r);return[$y(M("x",e,t,r),M("filter",e,t,r),a,[n[1],n[2]],i)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{let a=M("strides",e,t,r),n=tv(e,t,r),i=M("dilations",e,t,r),s=M("dataFormat",e,t,r).toUpperCase();return[Au(M("input",e,t,r),M("filter",e,t,r),[a[1],a[2]],n,s,[i[1],i[2]])]}case"Conv3D":{let a=M("strides",e,t,r),n=M("pad",e,t,r),i=M("dataFormat",e,t,r).toUpperCase(),s=M("dilations",e,t,r);return[DC(M("x",e,t,r),M("filter",e,t,r),[a[1],a[2],a[3]],n,i,[s[1],s[2],s[3]])]}case"AvgPool":{let a=M("strides",e,t,r),n=M("pad",e,t,r),i=M("kernelSize",e,t,r);return[ps(M("x",e,t,r),[i[1],i[2]],[a[1],a[2]],n)]}case"MaxPool":{let a=M("strides",e,t,r),n=M("pad",e,t,r),i=M("kernelSize",e,t,r);return[Dr(M("x",e,t,r),[i[1],i[2]],[a[1],a[2]],n)]}case"MaxPoolWithArgmax":{let a=M("strides",e,t,r),n=M("pad",e,t,r),i=M("kernelSize",e,t,r),s=M("includeBatchInIndex",e,t,r),{result:o,indexes:l}=wD(M("x",e,t,r),[i[1],i[2]],[a[1],a[2]],n,s);return[o,l]}case"AvgPool3D":{let a=M("strides",e,t,r),n=M("pad",e,t,r),i=M("kernelSize",e,t,r);return[MC(M("x",e,t,r),[i[1],i[2],i[3]],[a[1],a[2],a[3]],n)]}case"MaxPool3D":{let a=M("strides",e,t,r),n=M("pad",e,t,r),i=M("kernelSize",e,t,r);return[KC(M("x",e,t,r),[i[1],i[2],i[3]],[a[1],a[2],a[3]],n)]}case"Dilation2D":{let a=M("strides",e,t,r),n=M("pad",e,t,r),i=M("dilations",e,t,r),s=a[1],o=a[2],l=i[1],u=i[2];return[LC(M("x",e,t,r),M("filter",e,t,r),[s,o],n,[l,u],"NHWC")]}default:throw TypeError(`Node type ${e.op} is not implemented`)}},Zoe=(e,t,r)=>{switch(e.op){case"Fill":{let a=M("shape",e,t,r),n=M("dtype",e,t,r),i=M("value",e,t,r);return[Ea(a,i,n)]}case"LinSpace":{let a=M("start",e,t,r),n=M("stop",e,t,r),i=M("num",e,t,r);return[mD(a,n,i)]}case"Multinomial":{let a=M("logits",e,t,r),n=M("numSamples",e,t,r),i=M("seed",e,t,r);return[xD(a,n,i)]}case"OneHot":{let a=M("indices",e,t,r),n=M("depth",e,t,r),i=M("onValue",e,t,r),s=M("offValue",e,t,r);return[Pc(a,n,i,s)]}case"Ones":return[ea(M("shape",e,t,r),M("dtype",e,t,r))];case"OnesLike":return[ua(M("x",e,t,r))];case"RandomUniform":return[cp(M("shape",e,t,r),M("minval",e,t,r),M("maxval",e,t,r),M("dtype",e,t,r))];case"Range":{let a=M("start",e,t,r),n=M("stop",e,t,r),i=M("step",e,t,r);return[Fc(a,n,i,M("dtype",e,t,r))]}case"TruncatedNormal":{let a=M("shape",e,t,r),n=M("mean",e,t,r),i=M("stdDev",e,t,r),s=M("seed",e,t,r);return[Uy(a,n,i,M("dtype",e,t,r),s)]}case"Zeros":return[Jt(M("shape",e,t,r),M("dtype",e,t,r))];case"ZerosLike":return[xt(M("x",e,t,r))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};function qw(e,t,r){let a=M("boxes",e,t,r),n=M("scores",e,t,r),i=M("maxOutputSize",e,t,r),s=M("iouThreshold",e,t,r),o=M("scoreThreshold",e,t,r),l=M("softNmsSigma",e,t,r);return{boxes:a,scores:n,maxOutputSize:i,iouThreshold:s,scoreThreshold:o,softNmsSigma:l}}var Qoe=async(e,t,r)=>{switch(e.op){case"NonMaxSuppressionV5":{let{boxes:a,scores:n,maxOutputSize:i,iouThreshold:s,scoreThreshold:o,softNmsSigma:l}=qw(e,t,r),u=await ta.nonMaxSuppressionWithScoreAsync(a,n,i,s,o,l);return[u.selectedIndices,u.selectedScores]}case"NonMaxSuppressionV4":{let{boxes:a,scores:n,maxOutputSize:i,iouThreshold:s,scoreThreshold:o}=qw(e,t,r),l=M("padToMaxOutputSize",e,t,r),u=await ta.nonMaxSuppressionPaddedAsync(a,n,i,s,o,l);return[u.selectedIndices,u.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{let{boxes:a,scores:n,maxOutputSize:i,iouThreshold:s,scoreThreshold:o}=qw(e,t,r);return[await ta.nonMaxSuppressionAsync(a,n,i,s,o)]}case"Where":{let a=Te(M("condition",e,t,r),"bool"),n=[await lS(a)];return a.dispose(),n}case"ListDiff":return CD(M("x",e,t,r),M("y",e,t,r));default:throw TypeError(`Node type ${e.op} is not implemented`)}},Joe=(e,t,r)=>{switch(e.op){case"LowerBound":{let a=M("sortedSequence",e,t,r),n=M("values",e,t,r);return[yD(a,n)]}case"TopKV2":{let a=M("x",e,t,r),n=M("k",e,t,r),i=M("sorted",e,t,r),s=sS(a,n,i);return[s.values,s.indices]}case"UpperBound":{let a=M("sortedSequence",e,t,r),n=M("values",e,t,r);return[SD(a,n)]}case"Unique":{let a=M("x",e,t,r),n=Qv(a);return[n.values,n.indices]}case"UniqueV2":{let a=M("x",e,t,r),n=M("axis",e,t,r),i=Qv(a,n);return[i.values,i.indices]}default:throw TypeError(`Node type ${e.op} is not implemented`)}},ele=(e,t,r)=>{switch(e.op){case"Const":return t[e.name];case"PlaceholderWithDefault":let a=M("default",e,t,r);return[hn(e.name,t,r)||a];case"Placeholder":return[hn(e.name,t,r)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":{let u=M("x",e,t,r);return[ji(u)]}case"IdentityN":return M("x",e,t,r).map(u=>ji(u));case"Snapshot":let n=M("x",e,t,r);return[ji(n)];case"Shape":return[Nt(M("x",e,t,r).shape,"int32")];case"ShapeN":return M("x",e,t,r).map(u=>Nt(u.shape));case"Size":return[et(M("x",e,t,r).size,"int32")];case"Rank":return[et(M("x",e,t,r).rank,"int32")];case"NoOp":return[et(1)];case"Print":let i=M("x",e,t,r),s=M("data",e,t,r),o=M("message",e,t,r),l=M("summarize",e,t,r);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(o);for(let u=0;u<s.length;u++)console.log(Array.prototype.slice.call(s[u].dataSync()).slice(0,l));return[i];default:throw TypeError(`Node type ${e.op} is not implemented`)}},tle=class{constructor(e,t){this.keyDType=e,this.valueDType=t,this.handle=et(0),this.tensorMap=new Map,zr(this.handle)}get id(){return this.handle.id}clearAndClose(){this.tensorMap.forEach(e=>e.dispose()),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}tensorSize(){return et(this.size(),"int32")}async import(e,t){this.checkKeyAndValueTensor(e,t);let r=await e.data();return this.tensorMap.forEach(a=>a.dispose()),this.tensorMap.clear(),te(()=>{let a=hr(t),n=r.length,i=a.length;_.assert(n===i,()=>`The number of elements doesn't match, keys has ${n} elements, the values has ${i} elements.`);for(let s=0;s<n;s++){let o=r[s],l=a[s];zr(l),this.tensorMap.set(o,l)}return this.handle})}async find(e,t){this.checkKeyAndValueTensor(e,t);let r=await e.data();return te(()=>{let a=[];for(let n=0;n<r.length;n++){let i=r[n],s=this.findWithDefault(i,t);a.push(s)}return Vr(a)})}findWithDefault(e,t){let r=this.tensorMap.get(e);return r!=null?r:t}checkKeyAndValueTensor(e,t){if(e.dtype!==this.keyDType)throw new Error(`Expect key dtype ${this.keyDType}, but got ${e.dtype}`);if(t.dtype!==this.valueDType)throw new Error(`Expect value dtype ${this.valueDType}, but got ${t.dtype}`)}},rle=async(e,t,r,a)=>{switch(e.op){case"HashTable":case"HashTableV2":{let n=M("keyDType",e,t,r),i=M("valueDType",e,t,r),s=new tle(n,i);return a.addHashTable(e.name,s),[s.handle]}case"LookupTableImport":case"LookupTableImportV2":{let n=M("tableHandle",e,t,r,a),i=M("keys",e,t,r),s=M("values",e,t,r);return[await a.getHashTableById(n.id).import(i,s)]}case"LookupTableFind":case"LookupTableFindV2":{let n=M("tableHandle",e,t,r,a),i=M("keys",e,t,r),s=M("defaultValue",e,t,r);return[await a.getHashTableById(n.id).find(i,s)]}case"LookupTableSize":case"LookupTableSizeV2":{let n=M("tableHandle",e,t,r,a);return[a.getHashTableById(n.id).tensorSize()]}default:throw TypeError(`Node type ${e.op} is not implemented`)}},nle=(e,t,r)=>{switch(e.op){case"ResizeBilinear":{let a=M("images",e,t,r),n=M("size",e,t,r),i=M("alignCorners",e,t,r),s=M("halfPixelCenters",e,t,r);return[ta.resizeBilinear(a,[n[0],n[1]],i,s)]}case"ResizeNearestNeighbor":{let a=M("images",e,t,r),n=M("size",e,t,r),i=M("alignCorners",e,t,r),s=M("halfPixelCenters",e,t,r);return[ta.resizeNearestNeighbor(a,[n[0],n[1]],i,s)]}case"CropAndResize":{let a=M("image",e,t,r),n=M("boxes",e,t,r),i=M("boxInd",e,t,r),s=M("cropSize",e,t,r),o=M("method",e,t,r),l=M("extrapolationValue",e,t,r);return[ta.cropAndResize(a,n,i,s,o,l)]}case"ImageProjectiveTransformV3":{let a=M("images",e,t,r),n=M("transforms",e,t,r),i=M("outputShape",e,t,r),s=M("fillValue",e,t,r),o=M("interpolation",e,t,r),l=M("fillMode",e,t,r);return[ta.transform(a,n,o.toLowerCase(),l.toLowerCase(),s,i)]}default:throw TypeError(`Node type ${e.op} is not implemented`)}},ale=(e,t,r)=>{switch(e.op){case"Equal":return[oa(M("a",e,t,r),M("b",e,t,r))];case"NotEqual":return[wl(M("a",e,t,r),M("b",e,t,r))];case"Greater":return[Wn(M("a",e,t,r),M("b",e,t,r))];case"GreaterEqual":return[Eo(M("a",e,t,r),M("b",e,t,r))];case"Less":return[Ny(M("a",e,t,r),M("b",e,t,r))];case"LessEqual":return[Co(M("a",e,t,r),M("b",e,t,r))];case"LogicalAnd":return[Va(M("a",e,t,r),M("b",e,t,r))];case"LogicalNot":return[om(M("a",e,t,r))];case"LogicalOr":return[My(M("a",e,t,r),M("b",e,t,r))];case"Select":case"SelectV2":return[on(M("condition",e,t,r),M("a",e,t,r),M("b",e,t,r))];default:throw TypeError(`Node type ${e.op} is not implemented`)}},ile=(e,t,r)=>{switch(e.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[ft(M("a",e,t,r),M("b",e,t,r),M("transposeA",e,t,r),M("transposeB",e,t,r))];case"Einsum":return[lD(M("equation",e,t,r),...M("tensors",e,t,r))];case"Transpose":return[ct(M("x",e,t,r),M("perm",e,t,r))];case"_FusedMatMul":let[a,n]=M("fusedOps",e,t,r),i=a==="biasadd",s=n==="prelu",o=M("numArgs",e,t,r),l=M("leakyreluAlpha",e,t,r);if(i){if(s&&o!==2)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!s&&o!==1)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}let[u,c]=M("args",e,t,r);return[io.matMul({a:M("a",e,t,r),b:M("b",e,t,r),transposeA:M("transposeA",e,t,r),transposeB:M("transposeB",e,t,r),bias:u,activation:n,preluActivationWeights:c,leakyreluAlpha:l})];default:throw TypeError(`Node type ${e.op} is not implemented`)}},sle=(e,t,r)=>{switch(e.op){case"EuclideanNorm":return[HC(M("x",e,t,r),M("axis",e,t,r),M("keepDims",e,t,r))];case"FusedBatchNorm":case"FusedBatchNormV2":return[ao(M("x",e,t,r),M("mean",e,t,r),M("variance",e,t,r),M("offset",e,t,r),M("scale",e,t,r),M("epsilon",e,t,r))];case"FusedBatchNormV3":return[ao(M("x",e,t,r),M("mean",e,t,r),M("variance",e,t,r),M("offset",e,t,r),M("scale",e,t,r),M("epsilon",e,t,r))];case"LRN":return[qC(M("x",e,t,r),M("radius",e,t,r),M("bias",e,t,r),M("alpha",e,t,r),M("beta",e,t,r))];case"Softmax":return[So(M("x",e,t,r))];case"LogSoftmax":return[_y(M("x",e,t,r))];case"SparseToDense":return[uS(M("sparseIndices",e,t,r),M("outputShape",e,t,r),M("sparseValues",e,t,r),M("defaultValue",e,t,r))];default:throw TypeError(`Node type ${e.op} is not implemented`)}},ole=(e,t,r)=>{switch(e.op){case"Max":{let s=M("axis",e,t,r),o=M("keepDims",e,t,r);return[Fa(M("x",e,t,r),s,o)]}case"Mean":{let s=M("axis",e,t,r),o=M("keepDims",e,t,r);return[Qt(M("x",e,t,r),s,o)]}case"Min":{let s=M("axis",e,t,r),o=M("keepDims",e,t,r);return[ch(M("x",e,t,r),s,o)]}case"Sum":{let s=M("axis",e,t,r),o=M("keepDims",e,t,r);return[Ue(M("x",e,t,r),s,o)]}case"All":{let s=M("axis",e,t,r),o=M("keepDims",e,t,r);return[Cy(M("x",e,t,r),s,o)]}case"Any":{let s=M("axis",e,t,r),o=M("keepDims",e,t,r);return[lh(M("x",e,t,r),s,o)]}case"ArgMax":{let s=M("axis",e,t,r);return[gl(M("x",e,t,r),s)]}case"ArgMin":{let s=M("axis",e,t,r);return[SC(M("x",e,t,r),s)]}case"Prod":{let s=M("axis",e,t,r),o=M("keepDims",e,t,r);return[Oy(M("x",e,t,r),s,o)]}case"Cumprod":{let s=M("axis",e,t,r),o=M("exclusive",e,t,r),l=M("reverse",e,t,r);return[uh(M("x",e,t,r),s,o,l)]}case"Cumsum":{let s=M("axis",e,t,r),o=M("exclusive",e,t,r),l=M("reverse",e,t,r);return[Ty(M("x",e,t,r),s,o,l)]}case"Bincount":let a=M("x",e,t,r),n=M("weights",e,t,r),i=M("size",e,t,r);return[RC(a,n,i)];case"DenseBincount":{let s=M("x",e,t,r),o=M("weights",e,t,r),l=M("size",e,t,r),u=M("binaryOutput",e,t,r);return[sD(s,o,l,u)]}default:throw TypeError(`Node type ${e.op} is not implemented`)}},lle=(e,t,r)=>{switch(e.op){case"ConcatV2":case"Concat":{let a=M("n",e,t,r),n=M("axis",e,t,r),i=M("tensors",e,t,r);return i=i.slice(0,a),[Ot(i,n)]}case"Gather":{let a=M("x",e,t,r),n=M("indices",e,t,r);return[yl(a,Te(n,"int32"),0)]}case"GatherV2":{let a=M("axis",e,t,r),n=M("batchDims",e,t,r),i=M("x",e,t,r),s=M("indices",e,t,r);return[yl(i,Te(s,"int32"),a,n)]}case"Reverse":{let a=M("dims",e,t,r),n=[];for(let s=0;s<a.length;s++)a[s]&&n.push(s);let i=M("x",e,t,r);return[ca(i,n)]}case"ReverseV2":{let a=M("axis",e,t,r),n=M("x",e,t,r);return[ca(n,a)]}case"Slice":{let a=M("begin",e,t,r),n=M("size",e,t,r);return[bt(M("x",e,t,r),a,n)]}case"StridedSlice":{let a=M("begin",e,t,r),n=M("end",e,t,r),i=M("strides",e,t,r),s=M("beginMask",e,t,r),o=M("endMask",e,t,r),l=M("ellipsisMask",e,t,r),u=M("newAxisMask",e,t,r),c=M("shrinkAxisMask",e,t,r),d=M("x",e,t,r);return[aS(d,a,n,i,s,o,l,u,c)]}case"Pack":return te(()=>{let a=M("axis",e,t,r),n=M("tensors",e,t,r),i=n[0].shape,s=Ti(n[0]).shape,o=n.map(l=>{let u=_.arraysEqual(l.shape,i);if(!u&&!_.arraysEqual(Ti(l).shape,s))throw new Error("the input tensors shape does not match");return u?l:re(l,i)});return[Vr(o,a)]});case"Unpack":{let a=M("axis",e,t,r),n=M("tensor",e,t,r);return hr(n,a)}case"Tile":{let a=M("reps",e,t,r);return[Jn(M("x",e,t,r),a)]}case"Split":case"SplitV":{let a=M("axis",e,t,r),n=M("numOrSizeSplits",e,t,r),i=M("x",e,t,r);return Pn(i,n,a)}case"ScatterNd":{let a=M("indices",e,t,r),n=M("values",e,t,r),i=M("shape",e,t,r);return[TD(a,n,i)]}case"GatherNd":{let a=M("x",e,t,r),n=M("indices",e,t,r);return[ND(a,n)]}case"SparseToDense":{let a=M("sparseIndices",e,t,r),n=M("outputShape",e,t,r),i=M("sparseValues",e,t,r),s=M("defaultValue",e,t,r);return[uS(a,i,n,i.dtype===s.dtype?s:Te(s,i.dtype))]}default:throw TypeError(`Node type ${e.op} is not implemented`)}},ule=(e,t,r)=>{switch(e.op){case"SparseFillEmptyRows":{let{outputIndices:a,outputValues:n,emptyRowIndicator:i,reverseIndexMap:s}=ff.sparseFillEmptyRows(M("indices",e,t,r),M("values",e,t,r),M("denseShape",e,t,r),M("defaultValue",e,t,r));return[a,n,i,s]}case"SparseReshape":{let{outputIndices:a,outputShape:n}=ff.sparseReshape(M("inputIndices",e,t,r),M("inputShape",e,t,r),M("newShape",e,t,r));return[a,n]}case"SparseSegmentMean":return[ff.sparseSegmentMean(M("data",e,t,r),M("indices",e,t,r),M("segmentIds",e,t,r))];case"SparseSegmentSum":return[ff.sparseSegmentSum(M("data",e,t,r),M("indices",e,t,r),M("segmentIds",e,t,r))];default:throw TypeError(`Node type ${e.op} is not implemented`)}},cle=(e,t,r)=>{switch(e.op){case"FFT":return[pm(M("x",e,t,r))];case"IFFT":return[Lc(M("x",e,t,r))];case"RFFT":return[fm(M("x",e,t,r))];case"IRFFT":return[Wy(M("x",e,t,r))];default:throw TypeError(`Node type ${e.op} is not implemented`)}},dle=(e,t,r)=>{switch(e.op){case"StringNGrams":{let{nGrams:a,nGramsSplits:n}=ev.stringNGrams(M("data",e,t,r),M("dataSplits",e,t,r),M("separator",e,t,r),M("nGramWidths",e,t,r),M("leftPad",e,t,r),M("rightPad",e,t,r),M("padWidth",e,t,r),M("preserveShortSequences",e,t,r));return[a,n]}case"StringSplit":{let{indices:a,values:n,shape:i}=ev.stringSplit(M("input",e,t,r),M("delimiter",e,t,r),M("skipEmpty",e,t,r));return[a,n,i]}case"StringToHashBucketFast":return[ev.stringToHashBucketFast(M("input",e,t,r),M("numBuckets",e,t,r))];default:throw TypeError(`Node type ${e.op} is not implemented`)}},ple=(e,t,r)=>{switch(e.op){case"Cast":return[Te(M("x",e,t,r),M("dtype",e,t,r))];case"ExpandDims":{let a=M("axis",e,t,r);return[pn(M("x",e,t,r),a)]}case"Squeeze":{let a=M("axis",e,t,r);return[Ti(M("x",e,t,r),a)]}case"Reshape":return[re(M("x",e,t,r),M("shape",e,t,r))];case"MirrorPad":return[ZC(M("x",e,t,r),M("padding",e,t,r),M("mode",e,t,r))];case"PadV2":case"Pad":return[ui(M("x",e,t,r),M("padding",e,t,r),M("constantValue",e,t,r))];case"SpaceToBatchND":{let a=M("blockShape",e,t,r),n=M("paddings",e,t,r);return[lm(M("x",e,t,r),a,n)]}case"BatchToSpaceND":{let a=M("blockShape",e,t,r),n=M("crops",e,t,r);return[rm(M("x",e,t,r),a,n)]}case"DepthToSpace":{let a=M("blockSize",e,t,r),n=M("dataFormat",e,t,r).toUpperCase();return[FC(M("x",e,t,r),a,n)]}case"BroadcastTo":return[Sc(M("x",e,t,r),M("shape",e,t,r))];case"BroadcastArgs":return[JP(M("s0",e,t,r),M("s1",e,t,r))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};function $A(e,t,r,a){let n=((i,s,o)=>{switch(i.category){case"arithmetic":return te(()=>Woe(i,s,o));case"basic_math":return te(()=>Hoe(i,s,o));case"control":return Yoe(i,s,o);case"convolution":return te(()=>Koe(i,s,o));case"creation":return te(()=>Zoe(i,s,o));case"dynamic":return Qoe(i,s,o);case"evaluation":return te(()=>Joe(i,s,o));case"image":return te(()=>nle(i,s,o));case"graph":return te(()=>ele(i,s,o));case"logical":return te(()=>ale(i,s,o));case"matrices":return te(()=>ile(i,s,o));case"normalization":return te(()=>sle(i,s,o));case"reduction":return te(()=>ole(i,s,o));case"slice_join":return te(()=>lle(i,s,o));case"sparse":return te(()=>ule(i,s,o));case"spectral":return te(()=>cle(i,s,o));case"string":return te(()=>dle(i,s,o));case"transformation":return te(()=>ple(i,s,o));case"hash_table":return rle(i,s,o,a);case"custom":let l=uL(i.op);if(l&&l.customExecutor)return l.customExecutor(new Voe(i,s,o));throw TypeError(`Custom op ${i.op} is not registered.`);default:throw TypeError(`Unknown op '${i.op}'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()`)}})(e,t,r);return _.isPromise(n)?n.then(i=>[].concat(i)):[].concat(n)}var IA=class{constructor(e={},t={},r={},a={}){this.weightMap=e,this.tensorArrayMap=t,this.tensorListMap=r,this.functionMap=a,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(e,t){return{id:e,frameName:t,iterationId:0}}set currentContext(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){let e=[];for(let t=0;t<this.contexts.length-1;t++){let r=this.contexts.slice(0,this.contexts.length-t);e.push(this.contextIdforContexts(r))}e.push(""),this._currentContextIds=e}contextIdforContexts(e){return e?e.map(t=>t.id===0&&t.iterationId===0?"":`${t.frameName}-${t.iterationId}`).join("/"):""}enterFrame(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(this.contexts&&this.contexts.length>1)this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift();else throw new Error("Cannot exit frame, the context is empty")}nextIteration(){if(this.contexts&&this.contexts.length>0){this.contexts=this.contexts.slice(),this.lastId++;let e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}else throw new Error("Cannot increase frame iteration, the context is empty")}getWeight(e){return this.weightMap[e]}addTensorArray(e){this.tensorArrayMap[e.id]=e}getTensorArray(e){return this.tensorArrayMap[e]}addTensorList(e){this.tensorListMap[e.id]=e}getTensorList(e){return this.tensorListMap[e]}dispose(e){for(let t in this.tensorArrayMap)this.tensorArrayMap[t].clearAndClose(e);for(let t in this.tensorListMap)this.tensorListMap[t].clearAndClose(e)}};function TA(e,t,r,a){let n=new Set,i=[],s=null,o=null,l=new Set,u=Object.keys(e).map(p=>Zn(p)[0]),c=[];a!=null&&(c=a.map(p=>Zn(p.name)[0]));let d=[...t];for(;d.length>0;){let p=d.pop();if((_L(p)||vle(p)||ble(p))&&s==null&&(s=p,o=s.children.map(f=>f.name).filter(f=>n.has(f))),n.add(p.name),r[p.name]==null&&u.indexOf(p.name)===-1&&c.indexOf(p.name)===-1){if(p.inputs.length===0){i.push(p.name);continue}p.inputs.forEach(f=>{l.has(f.name)||(l.add(f.name),d.push(f))})}}return{inputs:e,outputs:t,usedNodes:n,missingInputs:i,dynamicNode:s,syncInputs:o}}function fle(e,t,r){let{usedNodes:a,inputs:n}=r,i=[],s=Object.keys(n).map(c=>Zn(c)[0]).map(c=>e.nodes[c]),o=e.initNodes;s.forEach(c=>{a.has(c.name)&&i.push(c)}),e.weights.forEach(c=>{a.has(c.name)&&i.push(c)}),o!=null&&o.forEach(c=>{a.has(c.name)&&i.push(c)});let l=new Set,u=[];for(;i.length>0;){let c=i.pop();l.add(c.name),t[c.name]||u.push(c),c.children.forEach(d=>{!l.has(d.name)&&a.has(d.name)&&d.inputs.every(p=>l.has(p.name))&&i.push(d)})}return u}var hle=["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"],mle=["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"],gle=["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"];function _L(e){return hle.indexOf(e.op)>=0}function vle(e){return mle.indexOf(e.op)>=0}function ble(e){return gle.indexOf(e.op)>=0}var Ok=class{constructor(e,t){this.graph=e,this.parent=t,this.compiledMap=new Map,this._weightMap={},this.SEPERATOR=",",this._functions={},this._functionExecutorMap={},this.intermediateTensors={},this.keepTensorForDebug=!1,this._outputs=e.outputs,this._inputs=e.inputs,this._initNodes=e.initNodes,this._signature=e.signature,this._functions=e.functions,e.functions!=null&&Object.keys(e.functions).forEach(r=>{this._functionExecutorMap[r]=new Ok(e.functions[r],this)})}get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(e){let t=Object.keys(e).map(r=>e[r].map(a=>a.id));this._weightIds=[].concat(...t),this._weightMap=e}set resourceManager(e){this._resourceManager=e}get inputs(){return this._inputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get outputs(){return this._outputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get inputNodes(){return this._inputs.map(e=>e.signatureKey||e.name)}get outputNodes(){return this._outputs.map(e=>{let t=e.signatureKey||e.name;return e.defaultOutput?`${t}:${e.defaultOutput}`:t})}get functions(){return Object.keys(this._functions).reduce((e,t)=>(e[t]=this._functions[t].signature,e),{})}getCompilationKey(e,t){let r=e.map(n=>n.name).sort(),a=t.map(n=>n.name).sort();return r.join(this.SEPERATOR)+"--"+a.join(this.SEPERATOR)}compile(e,t){let r=TA(e,t,this.weightMap,this._initNodes),{missingInputs:a,dynamicNode:n,syncInputs:i}=r;if(n!=null)throw new Error(`This execution contains the node '${n.name}', which has the dynamic op '${n.op}'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs [${i}]`);if(a.length>0){let s=t.map(l=>l.name),o=Object.keys(e);throw new Error(`Cannot compute the outputs [${s}] from the provided inputs [${o}]. Missing the following inputs: [${a}]`)}return fle(this.graph,this.weightMap,r)}execute(e,t){e=this.mapInputs(e);let r=Object.keys(e).sort();this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t);let a=r.map(c=>this.graph.nodes[Zn(c)[0]]),n=t.map(c=>Zn(c)[0]),i=n.map(c=>this.graph.nodes[c]);this.resetIntermediateTensors(),i.length===0&&(i=this._outputs);let s=this.getCompilationKey(a,i),o=this.compiledMap.get(s);o==null&&(o=this.compile(e,i),this.compiledMap.set(s,o));let l={},u={};return te(()=>{let c=new IA(this.weightMap,l,u,this.functionExecutorMap),d=Object.assign({},this.weightMap);Object.keys(e).forEach(h=>{let[m,g]=Zn(h),v=[];v[g]=e[h],d[m]=v});let p=this.getFrozenTensorIds(d),f={};for(let h=0;h<o.length;h++){let m=o[h];if(!d[m.name]){let g=$A(m,d,c,this._resourceManager);if(_.isPromise(g))throw new Error(`The execution of the op '${m.op}' returned a promise. Please use model.executeAsync() instead.`);d[m.name]=g,this.checkTensorForDisposal(m.name,m,d,c,p,n,f)}}return this.parent==null&&c.dispose(p),t.map(h=>hn(h,d,c))})}getFrozenTensorIds(e){let t=[].concat.apply([],Object.keys(e).map(r=>e[r]).map(r=>r.map(a=>a.id)));return new Set(t)}checkTensorForDisposal(e,t,r,a,n,i,s){t.category==="control"||i.indexOf(e)!==-1||(r[e].forEach(o=>{o!=null&&(s[o.id]=(s[o.id]||0)+t.children.length)}),t.inputs.forEach(o=>{if(o.category!=="control"){let l=woe(o.name,r,a);l!=null&&l.forEach(u=>{if(u&&!u.kept&&!n.has(u.id)){let c=s[u.id];if(c===1){if(!this.keepTensorForDebug)u.dispose();else{let[d,p]=yi(t.name,a);this.intermediateTensors[d]?this.intermediateTensors[d][p]=u:(this.intermediateTensors[d]=[],this.intermediateTensors[d][p]=u)}delete s[u.id]}else c!=null&&s[u.id]--}})}}))}async executeAsync(e,t){return this._executeAsync(e,t)}disposeIntermediateTensors(){!this.intermediateTensors||(Object.keys(this.intermediateTensors).forEach(e=>this.intermediateTensors[e].forEach(t=>t.dispose())),this.disposeTensorsMap())}disposeTensorsMap(){!this.tensorsMap||Object.keys(this.tensorsMap).forEach(e=>{this.tensorsMap[e].forEach(t=>{t&&!t.kept&&!t.isDisposed&&!this.keepIds.has(t.id)&&t.dispose()})})}getIntermediateTensors(){return this.tensorsMap}resetIntermediateTensors(){for(let e in this.intermediateTensors)this.intermediateTensors[e].forEach(t=>t.dispose()),delete this.intermediateTensors[e]}async _executeAsync(e,t,r=!1,a={},n={}){r||(e=this.mapInputs(e),this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t));try{this.keepTensorForDebug=ce().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(u){console.warn(u.message)}this.resetIntermediateTensors();let i=new IA(this.weightMap,a,n,this.functionExecutorMap);this.tensorsMap=await this.executeWithControlFlow(e,i,t,r);let s=t.map(u=>hn(u,this.tensorsMap,i)),o=s.map(u=>u.id),l=Object.keys(e).map(u=>e[u].id);return this.keepIds=new Set([...o,...l,...this.weightIds]),this.keepTensorForDebug||this.disposeTensorsMap(),this.parent==null&&i.dispose(this.keepIds),s}async executeFunctionAsync(e,t,r){let a=e.reduce((n,i,s)=>(n[this.inputs[s].name]=i,n),{});return this._executeAsync(a,this.outputNodes,!0,t,r)}async executeWithControlFlow(e,t,r,a){let n=Object.keys(e),i=n.map(b=>this.graph.nodes[Zn(b)[0]]),s=r.map(b=>Zn(b)[0]),o=s.map(b=>this.graph.nodes[b]);o.length===0&&(o=this._outputs);let{usedNodes:l,missingInputs:u,dynamicNode:c,syncInputs:d}=TA(e,o,this.weightMap,this._initNodes),p=[...i,...this.graph.weights,...this._initNodes||[]].map(b=>({node:b,contexts:t.currentContext})),f=Object.assign({},this.weightMap);Object.keys(e).forEach(b=>{let[y,w]=Zn(b),x=[];x[w]=e[b],f[y]=x});let h={},m=this.getFrozenTensorIds(f),g={};for(;p.length>0;){let b=this.processStack(i,p,t,f,g,m,s,h,l);await Promise.all(b)}c==null&&!a&&console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");let v=o.filter(b=>!_L(b)&&!hn(b.name,f,t)).map(b=>b.name);if(v.length>0){let b="";throw c!=null&&(b=`Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs [${d}]`),new Error(`Cannot compute the outputs [${v}] from the provided inputs [${n}]. Consider providing the following inputs: [${u}]. ${b}`)}return f}processStack(e,t,r,a,n,i,s,o,l){let u=[];for(;t.length>0;){let c=t.pop();r.currentContext=c.contexts;let d="";if(c.node.op==="Enter"&&M("isConstant",c.node,a,r)&&([d]=yi(c.node.name,r)),a[c.node.name]==null){let p=$A(c.node,a,r,this._resourceManager);d||([d]=yi(c.node.name,r));let f=r.currentContext;_.isPromise(p)?u.push(p.then(h=>(a[d]=h,r.currentContext=f,this.checkTensorForDisposal(d,c.node,a,r,i,s,o),this.processChildNodes(c.node,t,r,a,n,l),h))):(a[d]=p,this.checkTensorForDisposal(d,c.node,a,r,i,s,o),this.processChildNodes(c.node,t,r,a,n,l))}else this.processChildNodes(c.node,t,r,a,n,l)}return u}processChildNodes(e,t,r,a,n,i){e.children.forEach(s=>{let[o]=yi(s.name,r);n[o]||!i.has(s.name)||(s.op==="Merge"?s.inputNames.some(l=>!!hn(l,a,r))&&(n[o]=!0,t.push({contexts:r.currentContext,node:s})):s.inputNames.every(l=>!!hn(l,a,r))&&(n[o]=!0,t.push({contexts:r.currentContext,node:s})))})}dispose(){Object.keys(this.weightMap).forEach(e=>this.weightMap[e].forEach(t=>t.dispose()))}checkInputShapeAndType(e){Object.keys(e).forEach(t=>{let r=e[t],[a]=Zn(t),n=this.graph.nodes[a];if(n.attrParams.shape&&n.attrParams.shape.value){let i=n.attrParams.shape.value,s=i.length===r.shape.length&&r.shape.every((o,l)=>i[l]===-1||i[l]===o);_.assert(s,()=>`The shape of dict['${n.name}'] provided in model.execute(dict) must be [${i}], but was [${r.shape}]`)}n.attrParams.dtype&&n.attrParams.dtype.value&&_.assert(r.dtype===n.attrParams.dtype.value,()=>`The dtype of dict['${n.name}'] provided in model.execute(dict) must be ${n.attrParams.dtype.value}, but was ${r.dtype}`)})}mapInputs(e){let t={};for(let r in e)if(this._signature!=null&&this._signature.inputs!=null&&this._signature.inputs[r]!=null){let a=this._signature.inputs[r];t[a.name]=e[r]}else t[r]=e[r];return t}checkInputs(e){let t=Object.keys(e).filter(r=>{let[a]=Zn(r);return this.graph.nodes[a]==null});if(t.length>0)throw new Error(`The dict provided in model.execute(dict) has keys: [${t}] that are not part of graph`)}mapOutputs(e){return e.map(t=>this._signature!=null&&this._signature.outputs!=null&&this._signature.outputs[t]!=null?this._signature.outputs[t].name:t,{})}checkOutputs(e){e.forEach(t=>{let[r]=Zn(t);if(!this.graph.nodes[r])throw new Error(`The output '${t}' is not found in the graph`)})}},yle=class{constructor(e={},t={}){this.hashTableNameToHandle=e,this.hashTableMap=t}addHashTable(e,t){this.hashTableNameToHandle[e]=t.handle,this.hashTableMap[t.id]=t}getHashTableHandleByName(e){return this.hashTableNameToHandle[e]}getHashTableById(e){return this.hashTableMap[e]}dispose(){for(let e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(let e in this.hashTableNameToHandle)this.hashTableNameToHandle[e].dispose(),delete this.hashTableNameToHandle[e]}},wle="?tfjs-format=file",xle="model.json",W$=class{constructor(e,t={}){this.modelUrl=e,this.loadOptions=t,this.version="n/a",t==null&&(this.loadOptions={}),this.resourceManager=new yle}get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}findIOHandler(){let e=this.modelUrl;if(e.load!=null)this.handler=e;else if(this.loadOptions.requestInit!=null)this.handler=rn.browserHTTPRequest(e,this.loadOptions);else{let t=rn.getLoadHandlers(e,this.loadOptions);if(t.length===0)t.push(rn.browserHTTPRequest(e,this.loadOptions));else if(t.length>1)throw new Error(`Found more than one (${t.length}) load handlers for URL '${[e]}'`);this.handler=t[0]}}load(){if(this.findIOHandler(),this.handler.load==null)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");let e=this.handler.load();return _.isPromise(e)?e.then(t=>this.loadSync(t)):this.loadSync(e)}loadSync(e){this.artifacts=e;let t=this.artifacts.modelTopology,r;this.artifacts.userDefinedMetadata!=null&&this.artifacts.userDefinedMetadata.signature!=null?r=this.artifacts.userDefinedMetadata.signature:r=this.artifacts.signature,this.signature=r,this.version=`${t.versions.producer}.${t.versions.minConsumer}`;let a=rn.decodeWeights(this.artifacts.weightData,this.artifacts.weightSpecs);if(this.executor=new Ok(kA.Instance.transformGraph(t,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(a),this.executor.resourceManager=this.resourceManager,e.modelInitializer!=null&&e.modelInitializer.node!=null){let n=kA.Instance.transformGraph(e.modelInitializer);this.initializer=new Ok(n),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializer.executeAsync({},[])}return!0}async save(e,t){if(typeof e=="string"){let r=rn.getSaveHandlers(e);if(r.length===0)throw new Error(`Cannot find any save handlers for URL '${e}'`);if(r.length>1)throw new Error(`Found more than one (${r.length}) save handlers for URL '${e}'`);e=r[0]}if(e.save==null)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return e.save(this.artifacts)}predict(e,t){return this.execute(e,this.outputNodes)}normalizeInputs(e){if(!(e instanceof ht)&&!Array.isArray(e))return e;if(e=Array.isArray(e)?e:[e],e.length!==this.inputNodes.length)throw new Error(`Input tensor count mismatch,the graph model has ${this.inputNodes.length} placeholders, while there are ${e.length} input tensors.`);return this.inputNodes.reduce((t,r,a)=>(t[r]=e[a],t),{})}normalizeOutputs(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]}execute(e,t){e=this.normalizeInputs(e),t=this.normalizeOutputs(t);let r=this.executor.execute(e,t);return r.length>1?r:r[0]}async executeAsync(e,t){e=this.normalizeInputs(e),t=this.normalizeOutputs(t);let r=await this.executor.executeAsync(e,t);return r.length>1?r:r[0]}getIntermediateTensors(){return this.executor.getIntermediateTensors()}disposeIntermediateTensors(){this.executor.disposeIntermediateTensors()}convertTensorMapToTensorsMap(e){return Object.keys(e).reduce((t,r)=>(t[r]=[e[r]],t),{})}dispose(){this.executor.dispose(),this.initializer&&this.initializer.dispose(),this.resourceManager.dispose()}};async function kle(e,t={}){if(e==null)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");t==null&&(t={}),t.fromTFHub&&typeof e=="string"&&(e=Cle(e));let r=new W$(e,t);return await r.load(),r}function Ele(e){if(e==null)throw new Error("modelUrl in loadGraphModelSync() cannot be null. Please provide a url or an IOHandler that loads the model");if(!e.load)throw new Error(`modelUrl IO Handler ${e} has no load function`);let t=new W$(e);return t.load(),t}function Cle(e){return e.endsWith("/")||(e=e+"/"),`${e}${xle}${wle}`}var Sle="3.18.0",ML={};ut(ML,{CSVDataset:()=>VL,Dataset:()=>mp,FileDataSource:()=>XL,TextLineDataset:()=>BL,URLDataSource:()=>YL,array:()=>Xle,csv:()=>iue,func:()=>sue,generator:()=>oue,microphone:()=>uue,version_data:()=>cue,webcam:()=>lue,zip:()=>Yle});var $le=Ml(zO()),Ile=Ml(zO());function Tle(e,t){return ub(e,t)}function ub(e,t,r=new Map,a=new Set){if(e==null)return null;if(typeof Blob=="function"&&e instanceof Blob)return e.slice();if(a.has(e))throw new Error("Circular references are not supported.");if(r.has(e))return r.get(e);let n=t(e);if(n.recurse&&n.value!==null)throw new Error("A deep map function may not return both a value and recurse=true.");if(n.recurse)if(Hc(e)){let i=Array.isArray(e)?[]:{};a.add(e);for(let s in e){let o=e[s],l=ub(o,t,r,a);i[s]=l}return a.delete(e),e.__proto__&&(i.__proto__=e.__proto__),i}else throw new Error(`Can't recurse into non-iterable type: ${e}`);else return r.set(e,n.value),n.value}function Nle(e,t=OL){return RL(e,t)}function RL(e,t,r=new Set){let a=e[0];if(r.has(a))throw new Error("Circular references are not supported.");let n=t(e);if(n.recurse&&n.value!==null)throw new Error("A deep zip function may not return both a value and recurse=true.");if(n.recurse)if(Hc(a)){let i=Array.isArray(a)?[]:{};r.add(a);for(let s in a){let o=e.map(u=>u[s]),l=RL(o,t,r);i[s]=l}return r.delete(a),i}else throw new Error(`Can't recurse into non-iterable type: ${a}`);else return n.value}function OL(e){return e===null?null:Hc(e[0])?{value:null,recurse:!0}:{value:e,recurse:!1}}async function PL(e,t){let r=new Map;ub(e,t,r);for(let a of Array.from(r.keys())){let n=r.get(a);if(_.isPromise(n)){let i=await n;r.set(a,i)}}return ub(e,t,r)}function Hc(e){let t=!1;if(ce().get("IS_BROWSER"))t=e instanceof TextDecoder;else{let{StringDecoder:r}=BO();t=e instanceof r}return e!=null&&!ArrayBuffer.isView(e)&&(Array.isArray(e)||typeof e=="object"&&!(e instanceof ht)&&!(e instanceof Promise)&&!t)}function Ale(e){return e==null||_le(e)||Array.isArray(e)||typeof e=="object"&&e instanceof ht||_.isTypedArray(e)}function _le(e){return e===null||typeof e!="object"&&typeof e!="function"}function Mle(e){return Tle(e,Rle)}function Rle(e){return e instanceof ht?{value:e.clone(),recurse:!1}:Hc(e)?{value:null,recurse:!0}:{value:e,recurse:!1}}var DL=class{constructor(e){if(this.capacity=e,this.begin=0,this.end=0,e==null)throw new RangeError("Can't create a ring buffer of unknown capacity.");if(e<1)throw new RangeError("Can't create ring buffer of capacity < 1.");this.data=new Array(e),this.doubledCapacity=2*e}wrap(e){for(;e<0;)e+=this.doubledCapacity;return e%this.doubledCapacity}get(e){if(e<0)throw new RangeError("Can't get item at a negative index.");return this.data[e%this.capacity]}set(e,t){if(e<0)throw new RangeError("Can't set item at a negative index.");this.data[e%this.capacity]=t}length(){let e=this.end-this.begin;return e<0&&(e=this.doubledCapacity+e),e}isFull(){return this.length()===this.capacity}isEmpty(){return this.length()===0}push(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.set(this.end,e),this.end=this.wrap(this.end+1)}pushAll(e){for(let t of e)this.push(t)}pop(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");this.end=this.wrap(this.end-1);let e=this.get(this.end);return this.set(this.end,void 0),e}unshift(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.begin=this.wrap(this.begin-1),this.set(this.begin,e)}shift(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");let e=this.get(this.begin);return this.set(this.begin,void 0),this.begin=this.wrap(this.begin+1),e}shuffleExcise(e){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");let t=this.wrap(this.begin+e),r=this.get(t);return this.set(t,this.pop()),r}},H$=class extends DL{constructor(){super(H$.INITIAL_CAPACITY)}isFull(){return!1}push(e){super.isFull()&&this.expand(),super.push(e)}unshift(e){super.isFull()&&this.expand(),super.unshift(e)}expand(){let e=this.capacity*2,t=new Array(e),r=this.length();for(let a=0;a<r;a++)t[a]=this.get(this.wrap(this.begin+a));this.data=t,this.capacity=e,this.doubledCapacity=2*this.capacity,this.begin=0,this.end=r}};H$.INITIAL_CAPACITY=32;function FL(e){return new Dle(e)}function U$(e){return new Fle(e)}function Ole(e,t){return new LL(e,t)}function Ple(e,t=Fs.FAIL){return new Gle(e,t)}var Hr=class{async toArray(){let e=[],t=await this.next();for(;!t.done;)e.push(t.value),t=await this.next();return e}async toArrayForTest(){let e=this.prefetch(100),t=[],r=await e.next();for(;!r.done;)t.push(r.value),r=await e.next();return t}async resolveFully(){let e=await this.next();for(;!e.done;)e=await this.next()}async resolveWhile(e){let t=await this.next(),r=e(t.value);for(;!t.done&&r;)t=await this.next(),r=e(t.value)}handleErrors(e){return new Ule(this,e)}filter(e){return new Wle(this,e)}map(e){return new Hle(this,e)}mapAsync(e){return new NA(this,e)}serialMapAsync(e){return new NA(this,e).serial()}flatmap(e){return new jle(this,e)}async forEachAsync(e){return this.map(e).resolveFully()}async serialForEach(e){return this.serialMapAsync(e).resolveWhile(t=>t===!0)}rowMajorBatch(e,t=!0){return new Vle(this,e,t)}columnMajorBatch(e,t=!0,r=OL){return this.rowMajorBatch(e,t).map(a=>Nle(a,r))}concatenate(e,t){return new LL(FL([this,e]),t)}take(e){return e<0||e==null?this:new Ble(this,e)}skip(e){return e<0||e==null?this:new zle(this,e)}prefetch(e){return new zL(this,e)}shuffle(e,t){return new qle(this,e,t)}serial(){return new Lle(this)}},Dle=class extends Hr{constructor(e){super(),this.items=e,this.trav=0}summary(){return`Array of ${this.items.length} items`}async next(){if(this.trav>=this.items.length)return{value:null,done:!0};let e=this.items[this.trav];return this.trav++,{value:Mle(e),done:!1}}},Fle=class extends Hr{constructor(e){super(),this.nextFn=e}summary(){return"Function call"}async next(){try{return this.nextFn()}catch(e){throw e.message=`Error thrown while iterating through a dataset: ${e.message}`,e}}},Lle=class extends Hr{constructor(e){super(),this.upstream=e,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> Serial`}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){return this.upstream.next()}},zle=class extends Hr{constructor(e,t){super(),this.upstream=e,this.maxCount=t,this.count=0,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> Skip`}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;this.count++<this.maxCount;){let e=await this.upstream.next();if(e.done)return e;lt(e.value)}return this.upstream.next()}},Ble=class extends Hr{constructor(e,t){super(),this.upstream=e,this.maxCount=t,this.count=0}summary(){return`${this.upstream.summary()} -> Take`}async next(){return this.count++>=this.maxCount?{value:null,done:!0}:this.upstream.next()}},Vle=class extends Hr{constructor(e,t,r=!0){super(),this.upstream=e,this.batchSize=t,this.enableSmallLastBatch=r,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> RowMajorBatch`}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){let e=[];for(;e.length<this.batchSize;){let t=await this.upstream.next();if(t.done)return this.enableSmallLastBatch&&e.length>0?{value:e,done:!1}:{value:null,done:!0};e.push(t.value)}return{value:e,done:!1}}},Wle=class extends Hr{constructor(e,t){super(),this.upstream=e,this.predicate=t,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> Filter`}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;;){let e=await this.upstream.next();if(e.done||this.predicate(e.value))return e;lt(e.value)}}},Hle=class extends Hr{constructor(e,t){super(),this.upstream=e,this.transform=t}summary(){return`${this.upstream.summary()} -> Map`}async next(){let e=await this.upstream.next();if(e.done)return{value:null,done:!0};let t=ni.getTensorsInContainer(e.value),r=this.transform(e.value),a=ni.getTensorsInContainer(r);for(let n of t)ni.isTensorInList(n,a)||n.dispose();return{value:r,done:!1}}},Ule=class extends Hr{constructor(e,t){super(),this.upstream=e,this.handler=t,this.count=0,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> handleErrors`}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;;)try{return await this.upstream.next()}catch(e){if(!this.handler(e))return{value:null,done:!0}}}},NA=class extends Hr{constructor(e,t){super(),this.upstream=e,this.transform=t}summary(){return`${this.upstream.summary()} -> AsyncMap`}async next(){let e=await this.upstream.next();if(e.done)return{value:null,done:!0};let t=ni.getTensorsInContainer(e.value),r=await this.transform(e.value),a=ni.getTensorsInContainer(r);for(let n of t)ni.isTensorInList(n,a)||n.dispose();return{value:r,done:!1}}},j$=class extends Hr{constructor(){super(),this.outputQueue=new H$,this.lastRead=Promise.resolve({value:null,done:!1})}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;this.outputQueue.length()===0;)if(!await this.pump())return{value:null,done:!0};return{value:this.outputQueue.shift(),done:!1}}},jle=class extends j${constructor(e,t){super(),this.upstream=e,this.transform=t}summary(){return`${this.upstream.summary()} -> Flatmap`}async pump(){let e=await this.upstream.next();if(e.done)return!1;let t=ni.getTensorsInContainer(e.value),r=this.transform(e.value),a=ni.getTensorsInContainer(r);this.outputQueue.pushAll(r);for(let n of t)ni.isTensorInList(n,a)||n.dispose();return!0}},LL=class extends Hr{constructor(e,t){super(),this.baseErrorHandler=t,this.lastRead=null,this.iterator=null,this.moreIterators=e}summary(){return"TODO: fill in upstream of chained summaries -> Chained"}async next(){return this.lastRead=this.readFromChain(this.lastRead),this.lastRead}async readFromChain(e){if(await e,this.iterator==null){let r=await this.moreIterators.next();if(r.done)return{value:null,done:!0};this.iterator=r.value,this.baseErrorHandler!=null&&(this.iterator=this.iterator.handleErrors(this.baseErrorHandler))}let t=await this.iterator.next();return t.done?(this.iterator=null,this.readFromChain(e)):t}},Fs;(function(e){e[e.FAIL=0]="FAIL",e[e.SHORTEST=1]="SHORTEST",e[e.LONGEST=2]="LONGEST"})(Fs||(Fs={}));var Gle=class extends Hr{constructor(e,t=Fs.FAIL){super(),this.iterators=e,this.mismatchMode=t,this.count=0,this.currentPromise=null}summary(){return"{TODO: fill in upstream of zip summaries} -> Zip"}async nextState(e){await e;let t=0,r=0;function a(i){return i instanceof Hr?{value:i.next().then(s=>(t++,s.done&&r++,s.value)),recurse:!1}:{value:null,recurse:!0}}let n=await PL(this.iterators,a);if(t===r)return{value:null,done:!0};if(r>0)switch(this.mismatchMode){case Fs.FAIL:throw new Error(`Zipped streams should have the same length. Mismatched at element ${this.count}.`);case Fs.SHORTEST:return{value:null,done:!0};case Fs.LONGEST:}return this.count++,{value:n,done:!1}}async next(){return this.currentPromise=this.nextState(this.currentPromise),this.currentPromise}},zL=class extends Hr{constructor(e,t){super(),this.upstream=e,this.bufferSize=t,this.buffer=new DL(t)}summary(){return`${this.upstream.summary()} -> Prefetch`}refill(){for(;!this.buffer.isFull();){let e=this.upstream.next();this.buffer.push(e)}}next(){return this.refill(),this.buffer.shift()}},qle=class extends zL{constructor(e,t,r){super(e,t),this.upstream=e,this.windowSize=t,this.upstreamExhausted=!1,this.random=Ile.alea(r||_.now().toString()),this.lastRead=Promise.resolve({value:null,done:!1})}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}randomInt(e){return Math.floor(this.random()*e)}chooseIndex(){return this.randomInt(this.buffer.length())}async serialNext(){for(this.upstreamExhausted||this.refill();!this.buffer.isEmpty();){let e=this.chooseIndex(),t=await this.buffer.shuffleExcise(e);if(t.done)this.upstreamExhausted=!0;else return this.refill(),t}return{value:null,done:!0}}},mp=class{constructor(){this.size=null}batch(e,t=!0){let r=this;_.assert(e>0,()=>`batchSize needs to be positive, but it is
      ${e}`);let a;return this.size===1/0||this.size==null?a=this.size:t?a=Math.ceil(this.size/e):a=Math.floor(this.size/e),Yn(async()=>(await r.iterator()).columnMajorBatch(e,t,Kle),a)}concatenate(e){let t=this,r;return this.size===1/0||e.size===1/0?r=1/0:this.size!=null&&e.size!=null?r=this.size+e.size:r=null,Yn(async()=>(await t.iterator()).concatenate(await e.iterator()),r)}filter(e){let t=this,r;return this.size===1/0?r=1/0:r=null,Yn(async()=>(await t.iterator()).filter(a=>te(()=>e(a))),r)}async forEachAsync(e){return(await this.iterator()).forEachAsync(e)}map(e){let t=this;return Yn(async()=>(await t.iterator()).map(r=>te(()=>e(r))),this.size)}mapAsync(e){let t=this;return Yn(async()=>(await t.iterator()).mapAsync(e),this.size)}prefetch(e){if(e==null)throw new RangeError("`Dataset.prefetch()` requires bufferSize to be specified.");let t=this;return Yn(async()=>(await t.iterator()).prefetch(e),this.size)}repeat(e){let t=this,r;return this.size!=null&&e>0?r=this.size*e:e===0?r=0:this.size!=null&&(e===void 0||e<0)?r=1/0:r=null,Yn(async()=>{let a=U$(async()=>({value:await t.iterator(),done:!1}));return Ole(a.take(e))},r)}skip(e){let t=this,r;return this.size!=null&&e>=0&&this.size>=e?r=this.size-e:this.size!=null&&(this.size<e||e===void 0||e<0)?r=0:r=null,Yn(async()=>(await t.iterator()).skip(e),r)}shuffle(e,t,r=!0){if(e==null||e<0)throw this.size==null?new RangeError("`Dataset.shuffle()` requires bufferSize to be specified."):new RangeError(`\`Dataset.shuffle()\` requires bufferSize to be specified.  If your data fits in main memory (for regular JS objects), and/or GPU memory (for \`tf.Tensor\`s), consider setting bufferSize to the dataset size (${this.size} elements)`);let a=this,n=$le.alea(t||_.now().toString());return Yn(async()=>{let i=n.int32();return r&&(i+=n.int32()),(await a.iterator()).shuffle(e,i.toString())},this.size)}take(e){let t=this,r;return this.size!=null&&this.size>e?r=e:this.size!=null&&this.size<=e?r=this.size:r=null,Yn(async()=>(await t.iterator()).take(e),r)}async toArray(){if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return(await this.iterator()).toArray()}async toArrayForTest(){if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return(await this.iterator()).toArrayForTest()}};mp.MAX_BUFFER_SIZE=1e4;function Yn(e,t=null){return new class extends mp{constructor(){super(...arguments),this.size=t}async iterator(){return e()}}}function Xle(e){return Yn(async()=>FL(e),e.length)}function Yle(e){if(!Hc(e))throw new Error("The argument to zip() must be an object or array.");let t;if(Array.isArray(e))for(let r=0;r<e.length;r++)t=t==null?e[r].size:Math.min(t,e[r].size);else if(e instanceof Object)for(let r in e)t=t==null?e[r].size:Math.min(t,e[r].size);return Yn(async()=>{let r=await PL(e,a=>{if(a instanceof mp)return{value:a.iterator(),recurse:!1};if(Hc(a))return{value:null,recurse:!0};throw new Error("Leaves of the structure passed to zip() must be Datasets, not primitives.")});return Ple(r,Fs.SHORTEST)},t)}function Kle(e){if(e===null)return null;let t=e[0];return Ale(t)?{value:Zle(e),recurse:!1}:{value:null,recurse:!0}}function Zle(e){if(e.length===0)throw new Error("Can't make a batch of zero elements.");return e[0]instanceof ht?Vr(e):ka(e)}var BL=class extends mp{constructor(e){super(),this.input=e}async iterator(){return(await this.input.iterator()).decodeUTF8().split(`
`).map(e=>(e.endsWith("\r")&&(e=e.slice(0,-1)),e))}},Ng='"',ef=Symbol("out"),AA=Symbol("field"),Ag=Symbol("quote"),Xw=Symbol("quoteafterquote"),_A=Symbol("quoteinquote"),VL=class extends mp{constructor(e,t){super(),this.input=e,this.hasHeader=!0,this.fullColumnNames=null,this.columnNamesValidated=!1,this.columnConfigs=null,this.configuredColumnsOnly=!1,this.delimiter=",",this.delimWhitespace=!1,this.base=new BL(e),t||(t={}),this.hasHeader=t.hasHeader!==!1,this.fullColumnNames=t.columnNames,this.columnConfigs=t.columnConfigs,this.configuredColumnsOnly=t.configuredColumnsOnly,t.delimWhitespace?(_.assert(t.delimiter==null,()=>"Delimiter should not be provided when delimWhitespace is true."),this.delimWhitespace=!0,this.delimiter=" "):this.delimiter=t.delimiter?t.delimiter:","}async columnNames(){return this.columnNamesValidated||await this.setColumnNames(),this.configuredColumnsOnly?Object.keys(this.columnConfigs):this.fullColumnNames}async setColumnNames(){let e=await this.maybeReadHeaderLine();if(!this.fullColumnNames&&!e)throw new Error("Column names must be provided if there is no header line.");this.fullColumnNames&&e&&_.assert(e.length===this.fullColumnNames.length,()=>"The length of provided columnNames ("+this.fullColumnNames.length.toString()+") does not match the length of the header line read from file ("+e.length.toString()+")."),this.fullColumnNames||(this.fullColumnNames=e);let t=this.fullColumnNames.reduce((a,n)=>(a[n]=a[n]+1||1,a),{}),r=Object.keys(t).filter(a=>t[a]>1);if(_.assert(r.length===0,()=>"Duplicate column names found: "+r.toString()),this.columnConfigs){for(let a of Object.keys(this.columnConfigs))if(this.fullColumnNames.indexOf(a)===-1)throw new Error('The key "'+a+'" provided in columnConfigs does not match any of the column names ('+this.fullColumnNames.toString()+").")}this.columnNamesValidated=!0}async maybeReadHeaderLine(){if(this.hasHeader){let e=await(await this.base.iterator()).next();if(e.done)throw new Error("No data was found for CSV parsing.");let t=e.value;return this.parseRow(t,!1)}else return null}async iterator(){this.columnNamesValidated||await this.setColumnNames();let e=await this.base.iterator();return this.hasHeader&&(e=e.skip(1)),e.map(t=>this.makeDataElement(t))}makeDataElement(e){let t=this.parseRow(e),r={},a={};for(let n=0;n<this.fullColumnNames.length;n++){let i=this.fullColumnNames[n],s=this.columnConfigs?this.columnConfigs[i]:null;if(!(this.configuredColumnsOnly&&!s)){let o=t[n],l=null;if(o==="")if(s&&s.default!==void 0)l=s.default;else{if(s&&(s.required||s.isLabel))throw new Error(`Required column ${i} is empty in this line: ${e}`);l=void 0}else{let u=Number(o);if(isNaN(u))s&&s.dtype==="bool"?l=this.getBoolean(o):l=o;else if(!s||!s.dtype)l=u;else switch(s.dtype){case"float32":l=u;break;case"int32":l=Math.floor(u);break;case"bool":l=this.getBoolean(o);break;default:l=u}}s&&s.isLabel?a[i]=l:r[i]=l}}return Object.keys(a).length===0?r:{xs:r,ys:a}}getBoolean(e){return e==="1"||e.toLowerCase()==="true"?1:0}parseRow(e,t=!0){let r=[],a=0,n=e.length,i=ef;for(let s=0;s<n;s++)switch(i){case ef:switch(e.charAt(s)){case Ng:a=s+1,i=Ag;break;case this.delimiter:if(a=s+1,this.delimiter===" "&&this.delimWhitespace)break;r.push(""),i=ef;break;default:i=AA,a=s;break}break;case AA:switch(e.charAt(s)){case this.delimiter:r.push(e.substring(a,s)),i=ef,a=s+1;break}break;case Ag:switch(e.charAt(s)){case Ng:i=Xw;break}break;case Xw:switch(e.charAt(s)){case this.delimiter:r.push(e.substring(a,s-1)),i=ef,a=s+1;break;case Ng:i=Ag;break;default:i=_A;break}break;case _A:switch(e.charAt(s)){case Ng:i=Ag;break}break}if(i===Xw?r.push(e.substring(a,n-1)):r.push(e.substring(a)),t&&r.length!==this.fullColumnNames.length)throw new Error(`Invalid row in csv file. Should have ${this.fullColumnNames.length} elements in a row, but got ${r}`);return r}},WL=class extends Hr{constructor(e){super(),this.microphoneConfig=e,this.isClosed=!1,this.fftSize=e.fftSize||1024;let t=Math.log2(this.fftSize);if(this.fftSize<0||t<4||t>14||!Number.isInteger(t))throw new Error(`Invalid fftSize: it must be a power of 2 between 2 to 4 and 2 to 14, but got ${this.fftSize}`);if(this.numFrames=e.numFramesPerSpectrogram||43,this.sampleRateHz=e.sampleRateHz,this.columnTruncateLength=e.columnTruncateLength||this.fftSize,this.audioTrackConstraints=e.audioTrackConstraints,this.smoothingTimeConstant=e.smoothingTimeConstant||0,this.includeSpectrogram=e.includeSpectrogram!==!1,this.includeWaveform=e.includeWaveform===!0,!this.includeSpectrogram&&!this.includeWaveform)throw new Error("Both includeSpectrogram and includeWaveform are false. At least one type of data should be returned.")}summary(){return"microphone"}static async create(e={}){if(!ce().get("IS_BROWSER"))throw new Error("microphone API is only supported in browser environment.");let t=new WL(e);return await t.start(),t}async start(){try{this.stream=await navigator.mediaDevices.getUserMedia({audio:this.audioTrackConstraints==null?!0:this.audioTrackConstraints,video:!1})}catch(r){throw new Error(`Error thrown while initializing video stream: ${r.message}`)}if(!this.stream)throw new Error("Could not obtain audio from microphone.");let e=window.AudioContext||window.webkitAudioContext;if(this.audioContext=new e,!this.sampleRateHz)this.sampleRateHz=this.audioContext.sampleRate;else if(this.audioContext.sampleRate!==this.sampleRateHz)throw new Error(`Mismatch in sampling rate: Expected: ${this.sampleRateHz}; Actual: ${this.audioContext.sampleRate}`);let t=this.audioContext.createMediaStreamSource(this.stream);this.analyser=this.audioContext.createAnalyser(),this.analyser.fftSize=this.fftSize*2,this.analyser.smoothingTimeConstant=this.smoothingTimeConstant,t.connect(this.analyser),this.freqData=new Float32Array(this.fftSize),this.timeData=new Float32Array(this.fftSize)}async next(){if(this.isClosed)return{value:null,done:!0};let e,t,r=await this.getAudioData();if(this.includeSpectrogram){let a=this.flattenQueue(r.freqDataQueue);e=this.getTensorFromAudioDataArray(a,[this.numFrames,this.columnTruncateLength,1])}if(this.includeWaveform){let a=this.flattenQueue(r.timeDataQueue);t=this.getTensorFromAudioDataArray(a,[this.numFrames*this.fftSize,1])}return{value:{spectrogram:e,waveform:t},done:!1}}async capture(){return(await this.next()).value}async getAudioData(){let e=[],t=[],r=0;return new Promise(a=>{let n=setInterval(()=>{this.includeSpectrogram&&(this.analyser.getFloatFrequencyData(this.freqData),this.freqData[0]===-1/0&&a({freqDataQueue:e,timeDataQueue:t}),e.push(this.freqData.slice(0,this.columnTruncateLength))),this.includeWaveform&&(this.analyser.getFloatTimeDomainData(this.timeData),t.push(this.timeData.slice())),++r===this.numFrames&&(clearInterval(n),a({freqDataQueue:e,timeDataQueue:t}))},this.fftSize/this.sampleRateHz*1e3)})}stop(){this.isClosed||(this.isClosed=!0,this.analyser.disconnect(),this.audioContext.close(),this.stream!=null&&this.stream.getTracks().length>0&&this.stream.getTracks()[0].stop())}toArray(){throw new Error("Can not convert infinite audio stream to array.")}getSampleRate(){return this.sampleRateHz}flattenQueue(e){let t=e[0].length,r=new Float32Array(e.length*t);return e.forEach((a,n)=>r.set(a,n*t)),r}getTensorFromAudioDataArray(e,t){let r=new Float32Array(_.sizeFromShape(t));return r.set(e,r.length-e.length),ka(r,t)}},HL=class extends Hr{constructor(e,t){if(super(),this.webcamVideoElement=e,this.webcamConfig=t,this.isClosed=!0,this.resize=!1,this.needToResize())if(this.resize=!0,this.cropSize=[this.webcamConfig.resizeHeight,this.webcamConfig.resizeWidth],this.cropBoxInd=Nt([0],"int32"),this.webcamConfig.centerCrop){let r=this.webcamConfig.resizeWidth*1/this.webcamVideoElement.width,a=this.webcamConfig.resizeHeight*1/this.webcamVideoElement.height,n=(1-r)/2,i=(1-a)/2,s=n+r,o=a+i;this.cropBox=ns([i,n,o,s],[1,4])}else this.cropBox=ns([0,0,1,1],[1,4])}summary(){return"webcam"}static async create(e,t={}){if(!ce().get("IS_BROWSER"))throw new Error("tf.data.webcam is only supported in browser environment.");if(!e){if(e=document.createElement("video"),!t.resizeWidth||!t.resizeHeight)throw new Error("Please provide webcam video element, or resizeWidth and resizeHeight to create a hidden video element.");e.width=t.resizeWidth,e.height=t.resizeHeight}let r=new HL(e,t);return await r.start(),r}async start(){this.webcamConfig.facingMode&&_.assert(this.webcamConfig.facingMode==="user"||this.webcamConfig.facingMode==="environment",()=>`Invalid webcam facing mode: ${this.webcamConfig.facingMode}. Please provide 'user' or 'environment'`);try{this.stream=await navigator.mediaDevices.getUserMedia({video:{deviceId:this.webcamConfig.deviceId,facingMode:this.webcamConfig.facingMode?this.webcamConfig.facingMode:"user",width:this.webcamVideoElement.width,height:this.webcamVideoElement.height}})}catch(e){throw e.message=`Error thrown while initializing video stream: ${e.message}`,e}if(!this.stream)throw new Error("Could not obtain video from webcam.");try{this.webcamVideoElement.srcObject=this.stream}catch(e){console.log(e),this.webcamVideoElement.src=window.URL.createObjectURL(this.stream)}return this.webcamVideoElement.play(),this.isClosed=!1,new Promise(e=>{this.webcamVideoElement.onloadedmetadata=()=>{e()}})}async next(){if(this.isClosed)return{value:null,done:!0};let e;try{e=em.fromPixels(this.webcamVideoElement)}catch(t){throw new Error(`Error thrown converting video to pixels: ${JSON.stringify(t)}`)}if(this.resize)try{return{value:this.cropAndResizeFrame(e),done:!1}}catch(t){throw new Error(`Error thrown cropping the video: ${t.message}`)}finally{e.dispose()}else return{value:e,done:!1}}needToResize(){return!!(this.webcamConfig.resizeWidth&&this.webcamConfig.resizeHeight&&(this.webcamVideoElement.width!==this.webcamConfig.resizeWidth||this.webcamVideoElement.height!==this.webcamConfig.resizeHeight))}cropAndResizeFrame(e){return te(()=>{let t=pn(Te(e,"float32"),0),r;r=ta.cropAndResize(t,this.cropBox,this.cropBoxInd,this.cropSize,"bilinear");let a=r.shape;return re(r,a.slice(1))})}async capture(){return(await this.next()).value}stop(){this.stream.getTracks().forEach(e=>e.stop());try{this.webcamVideoElement.srcObject=null}catch(e){console.log(e),this.webcamVideoElement.src=null}this.isClosed=!0}toArray(){throw new Error("Can not convert infinite video stream to array.")}},UL=class{},jL=class extends Hr{split(e){return new Qle(this,e)}},Qle=class extends jL{constructor(e,t){super(),this.upstream=e,this.impl=new Jle(e,t)}summary(){return this.impl.summary()}async next(){return this.impl.next()}},Jle=class extends j${constructor(e,t){super(),this.upstream=e,this.separator=t,this.carryover=""}summary(){return`${this.upstream.summary()} -> Split('${this.separator}')`}async pump(){let e=await this.upstream.next();if(e.done)return this.carryover===""?!1:(this.outputQueue.push(this.carryover),this.carryover="",!0);let t=e.value.split(this.separator);t[0]=this.carryover+t[0];for(let r of t.slice(0,-1))this.outputQueue.push(r);return this.carryover=t[t.length-1],!0}},eue=class extends Hr{decodeUTF8(){return new tue(this)}},tue=class extends jL{constructor(e){super(),this.upstream=e,this.impl=new rue(e)}summary(){return this.impl.summary()}async next(){return this.impl.next()}},rue=class extends j${constructor(e){if(super(),this.upstream=e,ce().get("IS_BROWSER"))this.decoder=new TextDecoder("utf-8");else{let{StringDecoder:t}=BO();this.decoder=new t("utf8")}}summary(){return`${this.upstream.summary()} -> Utf8`}async pump(){let e=await this.upstream.next(),t;if(e.done)return!1;t=e.value;let r;return ce().get("IS_BROWSER")?r=this.decoder.decode(t,{stream:!0}):r=this.decoder.write(Buffer.from(t.buffer)),this.outputQueue.push(r),!0}},GL=class extends eue{constructor(e,t={}){super(),this.file=e,this.options=t,_.assert(e instanceof Uint8Array||(ce().get("IS_BROWSER")?e instanceof File||e instanceof Blob:!1),()=>"FileChunkIterator only supports File, Blob and Uint8Array right now."),this.offset=t.offset||0,this.chunkSize=t.chunkSize||1024*1024}summary(){return`FileChunks ${this.file}`}async next(){return this.offset>=(this.file instanceof Uint8Array?this.file.byteLength:this.file.size)?{value:null,done:!0}:{value:await new Promise((e,t)=>{let r=this.offset+this.chunkSize;if(this.file instanceof Uint8Array)e(new Uint8Array(this.file.slice(this.offset,r)));else{let a=new FileReader;a.onload=i=>{let s=a.result;if(s instanceof ArrayBuffer&&(s=new Uint8Array(s)),!(s instanceof Uint8Array))return t(new TypeError("FileReader returned unknown type."));e(s)},a.onabort=i=>t(new Error("Aborted")),a.onerror=i=>t(new Error(i.type));let n=this.file.slice(this.offset,r);a.readAsArrayBuffer(n)}this.offset=r}),done:!1}}};async function nue(e,t={},r){let a,n;typeof e=="string"?a=e:(a=e.url,n=aue(e));let i=await(r||_.fetch)(a,n);if(i.ok){let s=new Uint8Array(await i.arrayBuffer());return new GL(s,t)}else throw new Error(i.statusText)}var aue=e=>({method:e.method,headers:e.headers,body:e.body,mode:e.mode,credentials:e.credentials,cache:e.cache,redirect:e.redirect,referrer:e.referrer,integrity:e.integrity});function qL(e){return typeof e=="string"&&e.slice(0,7)==="file://"}var XL=class extends UL{constructor(e,t={}){super(),this.input=e,this.options=t}async iterator(){if(qL(this.input)&&ce().get("IS_NODE")){let e=nC();this.input=e.readFileSync(this.input.slice(7))}return new GL(this.input,this.options)}},YL=class extends UL{constructor(e,t={}){super(),this.url=e,this.fileOptions=t}async iterator(){return qL(this.url)?new XL(this.url,this.fileOptions).iterator():nue(this.url,this.fileOptions)}};function iue(e,t={}){return new VL(new YL(e),t)}function sue(e){let t=U$(e);return Yn(async()=>t)}function oue(e){return Yn(async()=>{let t=await e();return U$(()=>t.next())})}async function lue(e,t){return HL.create(e,t)}async function uue(e){return WL.create(e)}var cue="3.18.0";function Xe(e,t){Array.isArray(e)||(e=[e]),e.forEach(r=>{r!=null&&_.assert(r.dtype!=="complex64",()=>`${t} does not support complex64 tensors in the CPU backend.`)})}var due=Oi.whereImpl,G$=class extends Ah{constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new zb(this,gi())}nextDataId(){return G$.nextDataId++}write(e,t,r){this.firstUse&&(this.firstUse=!1,ce().get("IS_NODE")&&B.warn(`
============================
Hi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. 
============================`));let a={id:this.nextDataId()};return this.data.set(a,{values:e,dtype:r,refCount:1}),a}makeTensorInfo(e,t,r){let a;if(t==="string"&&r!=null&&r.length>0&&_.isString(r[0])){let n=r.map(i=>_.encodeString(i));a=this.write(n,e,t)}else a=this.write(r,e,t);return{dataId:a,shape:e,dtype:t}}refCount(e){return this.data.has(e)?this.data.get(e).refCount:0}incRef(e){let t=this.data.get(e);t.refCount++}decRef(e){if(this.data.has(e)){let t=this.data.get(e);t.refCount--}}move(e,t,r,a,n){this.data.set(e,{values:t,dtype:a,refCount:n})}numDataIds(){return this.data.numDataIds()}async read(e){return this.readSync(e)}readSync(e){let{dtype:t,complexTensorInfos:r}=this.data.get(e);if(t==="complex64"){let a=this.readSync(r.real.dataId),n=this.readSync(r.imag.dataId);return B.mergeRealAndImagArrays(a,n)}return this.data.get(e).values}bufferSync(e){let t=this.readSync(e.dataId);if(e.dtype==="string")try{let r=t.map(a=>_.decodeString(a));return gt(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return gt(e.shape,e.dtype,t)}makeOutput(e,t,r){return gi().makeTensorFromTensorInfo(this.makeTensorInfo(t,r,e),this)}disposeData(e,t=!1){if(this.data.has(e)){if(this.data.get(e).refCount--,!t&&this.data.get(e).refCount>0)return!1;let{complexTensorInfos:r}=this.data.get(e);r!=null&&(this.disposeData(r.real.dataId,!0),this.disposeData(r.imag.dataId,!0)),this.data.delete(e)}return!0}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}async time(e){let t=_.now();return e(),{kernelMs:_.now()-t}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){Xe([e],"where");let t=this.readSync(e.dataId);return due(e.shape,t)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}};G$.nextDataId=0;var KL={};ut(KL,{addImpl:()=>QL,bincountImpl:()=>X$,bincountReduceImpl:()=>JL,ceilImpl:()=>e3,concatImpl:()=>Y$,equalImpl:()=>t3,expImpl:()=>n3,expm1Impl:()=>i3,floorImpl:()=>s3,gatherNdImpl:()=>o3,gatherV2Impl:()=>l3,greaterEqualImpl:()=>c3,greaterImpl:()=>u3,lessEqualImpl:()=>p3,lessImpl:()=>d3,linSpaceImpl:()=>f3,logImpl:()=>h3,maxImpl:()=>m3,maximumImpl:()=>g3,minimumImpl:()=>v3,multiplyImpl:()=>K$,negImpl:()=>b3,notEqualImpl:()=>y3,prodImpl:()=>w3,rangeImpl:()=>Q$,rsqrtImpl:()=>x3,scatterImpl:()=>cc,sigmoidImpl:()=>Jue,simpleAbsImpl:()=>ZL,sliceImpl:()=>db,sparseFillEmptyRowsImpl:()=>E3,sparseReshapeImpl:()=>C3,sparseSegmentReductionImpl:()=>J$,sqrtImpl:()=>rce,squaredDifferenceImpl:()=>S3,stridedSliceImpl:()=>$3,stringNGramsImpl:()=>I3,stringSplitImpl:()=>T3,stringToHashBucketFastImpl:()=>N3,subImpl:()=>A3,tileImpl:()=>_3,topKImpl:()=>R3,transposeImpl:()=>Z$,uniqueImpl:()=>O3});function ZL(e){let t=new Float32Array(e.length);for(let r=0;r<e.length;++r)t[r]=Math.abs(e[r]);return t}var pue=e=>{let{x:t}=e.inputs,r=e.backend;Xe(t,"abs");let a=new Float32Array(_.sizeFromShape(t.shape)),n=r.data.get(t.dataId).values;return a=ZL(n),r.makeOutput(a,t.shape,t.dtype)},fue={kernelName:ad,backendName:"cpu",kernelFunc:pue};function Tr(e){return(t,r,a,n,i)=>{let s=B.assertAndGetBroadcastShape(t,r),o=s.length,l=_.computeStrides(s),u=_.sizeFromShape(s),c=_.getTypedArrayFromDType(i,u),d=t.length,p=r.length,f=_.computeStrides(t),h=_.computeStrides(r),m=B.getBroadcastDims(t,s),g=B.getBroadcastDims(r,s);if(m.length+g.length===0)for(let v=0;v<c.length;++v)c[v]=e(a[v%a.length],n[v%n.length]);else for(let v=0;v<c.length;++v){let b=_.indexToLoc(v,o,l),y=b.slice(-d);m.forEach(C=>y[C]=0);let w=_.locToIndex(y,d,f),x=b.slice(-p);g.forEach(C=>x[C]=0);let k=_.locToIndex(x,p,h);c[v]=e(a[w],n[k])}return[c,s]}}function Qn(e){let{inputs:t,backend:r}=e,{real:a,imag:n}=t,i=r.data.get(a.dataId).values,s=r.data.get(n.dataId).values,o=r.makeTensorInfo(a.shape,"complex64"),l=r.data.get(o.dataId);return l.complexTensorInfos={real:r.makeTensorInfo(a.shape,"float32",i),imag:r.makeTensorInfo(n.shape,"float32",s)},o}var hue={kernelName:Gb,backendName:"cpu",kernelFunc:Qn};function cb(e,t,r="float32"){if(r==="complex64"){let n=cb(e,t,"float32"),i=cb(e,t,"float32");return Qn({inputs:{real:n,imag:i},backend:e})}let a=_.makeZerosTypedArray(_.sizeFromShape(t),r);return e.makeTensorInfo(t,r,a)}function Ni(e){let{inputs:t,backend:r}=e,{x:a}=t;return r.incRef(a.dataId),{dataId:a.dataId,shape:a.shape,dtype:a.dtype}}var mue={kernelName:Jl,backendName:"cpu",kernelFunc:Ni};function El(e){let{inputs:t,backend:r}=e,{input:a}=t,n=r.data.get(a.dataId).complexTensorInfos.real,i=r.data.get(n.dataId).values;return r.makeTensorInfo(n.shape,n.dtype,i)}var gue={kernelName:dy,backendName:"cpu",kernelFunc:El};function co(e){let{inputs:t,backend:r,attrs:a}=e,{x:n}=t,{dtype:i}=a;if(i==="complex64"){if(n.dtype==="complex64")return Ni({inputs:{x:n},backend:r});let s=cb(r,n.shape,n.dtype),o=co({inputs:{x:n},backend:r,attrs:{dtype:"float32"}}),l=Qn({inputs:{real:o,imag:s},backend:r});return r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(o),l}if(n.dtype==="complex64"){let s=El({inputs:{input:n},backend:r}),o=co({inputs:{x:s},backend:r,attrs:{dtype:i}});return r.disposeIntermediateTensorInfo(s),o}if(!_.hasEncodingLoss(n.dtype,i)){let s=Ni({inputs:{x:n},backend:r});return{dataId:s.dataId,shape:s.shape,dtype:i}}if(i==="int32"){let s=r.data.get(n.dataId).values,o=Int32Array.from(s);return r.makeTensorInfo(n.shape,"int32",o)}if(i==="bool"){let s=r.data.get(n.dataId).values,o=_.toTypedArray([0],n.dtype),[l,u]=Tr((c,d)=>c!==d?1:0)(n.shape,[],s,o,"bool");return r.makeTensorInfo(u,"bool",l)}throw new Error(`Error in Cast: failed to cast ${n.dtype} to ${i}`)}var vue={kernelName:Ll,backendName:"cpu",kernelFunc:co};function Ur(e,t,r,a){return r==null?({inputs:n,backend:i})=>{let{a:s,b:o}=n,l=i;Xe([s,o],e);let u=l.data.get(s.dataId).values,c=l.data.get(o.dataId).values,d=s.dtype==="string"?B.fromUint8ToStringArray(u):u,p=s.dtype==="string"?B.fromUint8ToStringArray(c):c,f=a||s.dtype,[h,m]=t(s.shape,o.shape,d,p,f);return l.makeTensorInfo(m,f,h)}:({inputs:n,backend:i})=>{let{a:s,b:o}=n,l=i;if(s.dtype==="complex64"||o.dtype==="complex64"){let u=co({inputs:{x:s},backend:l,attrs:{dtype:"complex64"}}),c=l.data.get(u.dataId),d=c.complexTensorInfos.real,p=c.complexTensorInfos.imag,f=l.data.get(d.dataId).values,h=l.data.get(p.dataId).values,m=co({inputs:{x:o},backend:l,attrs:{dtype:"complex64"}}),g=l.data.get(m.dataId),v=g.complexTensorInfos.real,b=g.complexTensorInfos.imag,y=l.data.get(v.dataId).values,w=l.data.get(b.dataId).values,[x,k,C]=r(s.shape,o.shape,f,h,y,w),E=l.makeTensorInfo(C,"float32",x),$=l.makeTensorInfo(C,"float32",k),N=Qn({inputs:{real:E,imag:$},backend:l});return l.disposeIntermediateTensorInfo(u),l.disposeIntermediateTensorInfo(m),l.disposeIntermediateTensorInfo(E),l.disposeIntermediateTensorInfo($),N}else{let u=l.data.get(s.dataId).values,c=l.data.get(o.dataId).values,d=a||s.dtype,[p,f]=t(s.shape,o.shape,u,c,d);return l.makeTensorInfo(f,d,p)}}}function q$(e){return(t,r,a,n,i,s)=>{let o=B.assertAndGetBroadcastShape(t,r),l=_.sizeFromShape(o),u=o.length,c=_.computeStrides(o),d=_.getTypedArrayFromDType("float32",l),p=_.getTypedArrayFromDType("float32",l),f=B.getBroadcastDims(t,o),h=B.getBroadcastDims(r,o),m=B.mergeRealAndImagArrays(a,n),g=B.mergeRealAndImagArrays(i,s),v=t.length,b=_.computeStrides(t),y=r.length,w=_.computeStrides(r);if(f.length+h.length===0)for(let x=0;x<d.length;x++){let k=x%m.length,C=x%g.length,E=e(m[k*2],m[k*2+1],g[C*2],g[C*2+1]);d[x]=E.real,p[x]=E.imag}else for(let x=0;x<d.length;x++){let k=_.indexToLoc(x,u,c),C=k.slice(-v);f.forEach(S=>C[S]=0);let E=_.locToIndex(C,v,b),$=k.slice(-y);h.forEach(S=>$[S]=0);let N=_.locToIndex($,y,w),I=e(m[E*2],m[E*2+1],g[N*2],g[N*2+1]);d[x]=I.real,p[x]=I.imag}return[d,p,o]}}var QL=Tr((e,t)=>e+t),bue=q$((e,t,r,a)=>({real:e+r,imag:t+a})),Uc=Ur(vo,QL,bue),yue={kernelName:vo,backendName:"cpu",kernelFunc:Uc};function X$(e,t,r,a,n){let i=_.sizeFromShape(a),s=_.makeZerosTypedArray(n,r);for(let o=0;o<e.length;o++){let l=e[o];if(l<0)throw new Error("Input x must be non-negative!");l>=n||(i>0?s[l]+=t[o]:s[l]+=1)}return s}function JL(e,t,r,a=!1){let n=e.shape[0],i=e.shape[1],s=gt([n,r],t.dtype);for(let o=0;o<n;o++)for(let l=0;l<i;l++){let u=e.get(o,l);if(u<0)throw new Error("Input x must be non-negative!");u>=r||(a?s.set(1,o,u):t.size>0?s.set(s.get(o,u)+t.get(o,l),o,u):s.set(s.get(o,u)+1,o,u))}return s}function $o(e){return(t,r,a)=>{let n=_.getTypedArrayFromDType(r,t.length);for(let i=0;i<t.length;++i)n[i]=e(t[i],a);return n}}function Mt(e,t,r){return({inputs:a,attrs:n,backend:i})=>{let{x:s}=a;if(Xe(s,e),s.dtype==="string"||r==="string")throw new Error("unaryKernelFunc does not support string input/output");let o=i,l=o.data.get(s.dataId).values,u=_.sizeFromShape(s.shape),c=r||s.dtype,d=_.getArrayFromDType(c,u);for(let p=0;p<u;++p)d[p]=t(l[p],n);return o.makeTensorInfo(s.shape,c,d)}}function gp(e,t,r){return({inputs:a,attrs:n,backend:i})=>{let{x:s}=a;if(Xe(s,e),s.dtype==="string"||r==="string")throw new Error("unaryKernelFunc does not support string input/output");let o=i,l=o.data.get(s.dataId).values,u=r||s.dtype,c=t(l,u,n);return o.makeTensorInfo(s.shape,u,c)}}var e3=$o(e=>Math.ceil(e)),wue=gp(zl,e3),xue={kernelName:zl,backendName:"cpu",kernelFunc:wue};function Y$(e,t,r,a){let n=_.getArrayFromDType(r,_.sizeFromShape(t));if(a&&r!=="string"){let i=0;e.forEach(s=>{let o=_.sizeFromShape(s.shape);n.set(s.vals,i),i+=o})}else{let i=0;e.forEach(s=>{let o=r==="string"?B.fromUint8ToStringArray(s.vals):s.vals,l=0;for(let u=0;u<s.shape[0];++u){let c=u*t[1]+i;for(let d=0;d<s.shape[1];++d)n[c+d]=o[l++]}i+=s.shape[1]})}return n}var t3=Tr((e,t)=>e===t?1:0),r3=Ur(wd,t3,null,"bool"),kue={kernelName:wd,backendName:"cpu",kernelFunc:r3},n3=$o(e=>Math.exp(e)),a3=gp(Xl,n3,"float32"),Eue={kernelName:Xl,backendName:"cpu",kernelFunc:a3},i3=$o(e=>Math.expm1(e)),Cue=gp(kd,i3),Sue={kernelName:kd,backendName:"cpu",kernelFunc:Cue},s3=$o(e=>Math.floor(e)),$ue=gp(Yl,s3),Iue={kernelName:Yl,backendName:"cpu",kernelFunc:$ue};function o3(e,t,r,a,n,i,s,o,l){let u=gt([a,i],r);for(let c=0;c<a;c++){let d=[],p=0;for(let f=0;f<n;f++){let h=e[c*n+f];p+=h*s[f],d.push(h)}if(p<0||p>=l/i)throw new Error(`Invalid indices: ${d} does not index into ${o}`);for(let f=0;f<i;f++)u.values[c*i+f]=t.get(...t.indexToLoc(p*i+f))}return u}function l3(e,t,r){let a=gt(r,e.dtype);for(let n=0;n<a.size;++n){let i=a.indexToLoc(n).slice(),s=i[0],o=i[2],l=t.locToIndex([s,o]);i[2]=t.values[l];let u=e.locToIndex(i);0<=u&&u<e.values.length&&(a.values[n]=e.values[u])}return a}var u3=Tr((e,t)=>e>t?1:0),Tue=Ur($d,u3,null,"bool"),Nue={kernelName:$d,backendName:"cpu",kernelFunc:Tue},c3=Tr((e,t)=>e>=t?1:0),Aue=Ur(Ql,c3,null,"bool"),_ue={kernelName:Ql,backendName:"cpu",kernelFunc:Aue},d3=Tr((e,t)=>e<t?1:0),Mue=Ur(Ad,d3,null,"bool"),Rue={kernelName:Ad,backendName:"cpu",kernelFunc:Mue},p3=Tr((e,t)=>e<=t?1:0),Oue=Ur(_d,p3,null,"bool"),Pue={kernelName:_d,backendName:"cpu",kernelFunc:Oue};function f3(e,t,r){let a=(t-e)/(r-1),n=_.makeZerosTypedArray(r,"float32");n[0]=e;for(let i=1;i<n.length;i++)n[i]=n[i-1]+a;return n}var h3=$o(e=>Math.log(e)),Due=gp(tu,h3),Fue={kernelName:tu,backendName:"cpu",kernelFunc:Due};function m3(e,t,r,a){let n=_.getTypedArrayFromDType(a,_.sizeFromShape(r));for(let i=0;i<n.length;++i){let s=i*t,o=e[s];for(let l=0;l<t;++l){let u=e[s+l];(Number.isNaN(u)||u>o)&&(o=u)}n[i]=o}return n}var g3=Tr((e,t)=>Math.max(e,t)),Lue=Ur(nu,g3),zue={kernelName:nu,backendName:"cpu",kernelFunc:Lue},v3=Tr((e,t)=>Math.min(e,t)),Bue=Ur(ou,v3),Vue={kernelName:ou,backendName:"cpu",kernelFunc:Bue},K$=Tr((e,t)=>e*t),Wue=q$((e,t,r,a)=>({real:e*r-t*a,imag:e*a+t*r})),x0=Ur(uu,K$,Wue),Hue={kernelName:uu,backendName:"cpu",kernelFunc:x0};function b3(e,t,r){let a=_.createScalarValue(-1,r);return K$([],t,a,e,r)}function Uue(e){let{inputs:t,backend:r}=e,{x:a}=t;Xe(a,"neg");let n=r.data.get(a.dataId).values,[i,s]=b3(n,a.shape,a.dtype);return r.makeTensorInfo(s,a.dtype,i)}var jue={kernelName:Pd,backendName:"cpu",kernelFunc:Uue},y3=Tr((e,t)=>e!==t?1:0),Gue=Ur(Dd,y3,null,"bool"),que={kernelName:Dd,backendName:"cpu",kernelFunc:Gue};function Z$(e,t,r,a,n){let i=t.length,s=_.sizeFromShape(t),o=_.computeStrides(t),l=_.computeStrides(n),u=_.getTypedArrayFromDType(r,_.sizeFromShape(n));for(let c=0;c<s;++c){let d=_.indexToLoc(c,i,o),p=new Array(d.length);for(let h=0;h<p.length;h++)p[h]=d[a[h]];let f=_.locToIndex(p,i,l);u[f]=e[c]}return u}function Ln(e){let{inputs:t,attrs:r,backend:a}=e,{x:n}=t,{perm:i}=r;Xe(n,"transpose");let s=n.shape.length,o=new Array(s);for(let c=0;c<o.length;c++)o[c]=n.shape[i[c]];let l=a.data.get(n.dataId).values,u=Z$(l,n.shape,n.dtype,i,o);return{dataId:a.write(u,o,n.dtype),shape:o,dtype:n.dtype}}var Xue={kernelName:ts,backendName:"cpu",kernelFunc:Ln};function w3(e,t,r,a){let[n,i]=B.computeOutAndReduceShapes(e,a),s=Ca(t,"int32"),o=_.makeZerosTypedArray(_.sizeFromShape(n),s),l=_.sizeFromShape(i);for(let u=0;u<o.length;++u){let c=u*l,d=1;for(let p=0;p<l;++p)d*=r[c+p];o[u]=d}return{outVals:o,outShape:n,outDtype:s}}function Yue(e){let{inputs:t,backend:r,attrs:a}=e,{x:n}=t,{axis:i,keepDims:s}=a;Xe(n,"prod");let o=n.shape.length,l=_.parseAxisParam(i,n.shape),u=B.getAxesPermutation(l,o),c=l,d=n,p=[];u!=null&&(d=Ln({inputs:{x:n},backend:r,attrs:{perm:u}}),p.push(d),c=B.getInnerMostAxes(c.length,o));let f=r.data.get(d.dataId).values,{outVals:h,outShape:m,outDtype:g}=w3(d.shape,d.dtype,f,c),v=m;return s&&(v=B.expandShapeToKeepDim(m,l)),p.forEach(b=>r.disposeIntermediateTensorInfo(b)),r.makeTensorInfo(v,g,h)}var Kue={kernelName:hu,backendName:"cpu",kernelFunc:Yue};function Q$(e,t,r,a){let n=e===t,i=e<t&&r<0,s=t<e&&r>1;if(n||i||s)return _.makeZerosTypedArray(0,a);let o=Math.abs(Math.ceil((t-e)/r)),l=_.makeZerosTypedArray(o,a);t<e&&r===1&&(r=-1),l[0]=e;for(let u=1;u<l.length;u++)l[u]=l[u-1]+r;return l}var x3=$o(e=>1/Math.sqrt(e)),Zue=gp(wu,x3),Que={kernelName:wu,backendName:"cpu",kernelFunc:Zue};function cc(e,t,r,a,n,i,s,o,l,u){let c=[a/n,n],d=e.values,p=t.values;if(a===0)return gt(r,t.dtype);let f=gt(c,t.dtype);typeof l=="string"||typeof l=="number"?f.values.fill(l):typeof l=="boolean"&&f.values.fill(+l);for(let h=0;h<i;h++){let m=[],g=0;for(let v=0;v<s;v++){let b=d[h*s+v];m.push(b),g+=b*o[v]}if(g<0||g>=a/n)throw new Error(`Invalid indices: ${m} does not index into ${r}`);for(let v=0;v<n;v++)u?f.values[g*n+v]+=p[h*n+v]:f.values[g*n+v]=t.rank===0?p[0]:p[h*n+v]}return f}var Jue=$o(e=>1/(1+Math.exp(-e))),k3=Mt(ku,e=>1/(1+Math.exp(-e))),ece={kernelName:ku,backendName:"cpu",kernelFunc:k3};function db(e,t,r,a,n){let i=Mr.isSliceContinous(a,t,r),s=_.sizeFromShape(r),o=_.computeStrides(a);if(i){let d=Mr.computeFlatOffset(t,o);return n==="string"?e.slice(d,d+s):e.subarray(d,d+s)}let l=n==="string"?B.fromUint8ToStringArray(e):e,u=gt(a,n,l),c=gt(r,n);for(let d=0;d<c.size;++d){let p=c.indexToLoc(d),f=p.map((h,m)=>h+t[m]);c.set(u.get(...f),...p)}return n==="string"?B.fromStringArrayToUint8(c.values):c.values}function Cl(e){let{inputs:t,backend:r,attrs:a}=e,{x:n}=t,{begin:i,size:s}=a;Xe(n,"slice");let[o,l]=Mr.parseSliceParams(n,i,s);Mr.assertParamsValid(n,o,l);let u=r.data.get(n.dataId).values,c=db(u,o,l,n.shape,n.dtype);return r.makeTensorInfo(l,n.dtype,c)}var tce={kernelName:qd,backendName:"cpu",kernelFunc:Cl};function E3(e,t,r,a,n,i,s){let o=t[0],l=i[0],u=new Array(l),c=new Array(o),d=t[1];if(l===0){if(o!==0)throw new Error(B.getSparseFillEmptyRowsIndicesDenseShapeMismatch(o));let g=_.getArrayFromDType(r,0),v=_.getArrayFromDType(n,0);return[g,[0,d],v,u,c]}let p=!0,f=0,h=new Array(l).fill(0);for(let g=0;g<o;++g){let v=e[g*d];if(v<0)throw new Error(B.getSparseFillEmptyRowsNegativeIndexErrorMessage(g,v));if(v>=l)throw new Error(B.getSparseFillEmptyRowsOutOfRangeIndexErrorMessage(g,v,l));++h[v],p=p&&v>=f,f=v}let m=!0;for(let g=0;g<l;++g){let v=h[g]===0;u[g]=v,m=m&&!v,h[g]=Math.max(h[g],1),g>0&&(h[g]+=h[g-1])}if(m&&p){let g=e,v=a;for(let b=0;b<o;++b)c[b]=b;return[g,[o,d],v,u,c]}else{let g=h[l-1],v=_.getArrayFromDType(r,g*d),b=_.getArrayFromDType(n,g),y=new Array(l).fill(0);for(let w=0;w<o;++w){let x=e[w*d],k=y[x],C=(x===0?0:h[x-1])+k;y[x]++;for(let E=0;E<d;++E)v[C*d+E]=e[w*d+E];b[C]=a[w],c[w]=C}for(let w=0;w<l;++w)if(y[w]===0){let x=w===0?0:h[w-1];v[x*d+0]=w;for(let k=1;k<d;++k)v[x*d+k]=0;b[x]=s}return[v,[g,d],b,u,c]}}function C3(e,t,r,a,n){let i=_.sizeFromShape(a),s=t[0],o=n.length,l=[],u=1,c=-1;for(let m=0;m<o;++m){let g=n[m];if(g===-1){if(c!==-1)throw new Error(B.getSparseReshapeMultipleNegativeOneOutputDimErrorMessage(c,m));c=m,l.push(1)}else{if(g<0)throw new Error(B.getSparseReshapeNegativeOutputDimErrorMessage(m,g));u*=g,l.push(g)}}if(c!==-1){if(u<=0)throw new Error(B.getSparseReshapeEmptyTensorZeroOutputDimErrorMessage());let m=Math.trunc(i/u);if(u*m!==i)throw new Error(B.getSparseReshapeInputOutputMultipleErrorMessage(a,l));l[c]=m}if(_.sizeFromShape(l)!==i)throw new Error(B.getSparseReshapeInputOutputMismatchErrorMessage(a,l));let d=a.length,p=[];if(d>0){p[d-1]=1;for(let m=d-2;m>=0;--m)p[m]=p[m+1]*a[m+1]}let f=[];if(o>0){f[o-1]=1;for(let m=o-2;m>=0;--m)f[m]=f[m+1]*l[m+1]}let h=_.getArrayFromDType(r,s*o);for(let m=0;m<s;++m){let g=0;for(let v=0;v<d;++v)g+=e[m*d+v]*p[v];for(let v=0;v<o;++v)h[m*o+v]=Math.trunc(g/f[v]),g%=f[v]}return[h,[s,o],l]}function J$(e,t,r,a,n,i=!1,s=0){let o=a.length,l=[t[0],e.length/t[0]],u=l[1],c=o>0?n[o-1]+1:0;if(c<0)throw new Error(B.getSparseSegmentReductionNegativeSegmentIdsErrorMessage());let d=t.slice();d[0]=c;let p=d.reduce((b,y)=>b*y,1),f=_.getArrayFromDType(r,p);if(o===0)return c>0&&f.fill(s),[f,d];if(c<=0)throw new Error(B.getSparseSegmentReductionNegativeSegmentIdsErrorMessage());let h=0,m=1,g=0,v=n[h];for(;;){let b=0;if(m<o){if(b=n[m],v===b){++m;continue}if(v>=b)throw new Error(B.getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage())}if(v<0||v>=c)throw new Error(B.getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage(v,c));v>g&&f.fill(s,g*u,v*u);for(let y=h;y<m;++y){let w=a[y];if(w<0||w>=l[0])throw new Error(B.getSparseSegmentReductionIndicesOutOfRangeErrorMessage(y,a[y],l[0]));for(let x=0;x<u;x++)f[v*u+x]+=e[w*u+x]}if(i)for(let y=0;y<u;y++)f[v*u+y]/=m-h;if(h=m,++m,g=v+1,v=b,m>o)break}return g<c&&f.fill(s,g*u,c*u),[f,d]}var rce=$o(e=>Math.sqrt(e)),nce=Mt(Eu,e=>Math.sqrt(e)),ace={kernelName:Eu,backendName:"cpu",kernelFunc:nce},S3=Tr((e,t)=>{let r=e-t;return r*r}),ice=Ur($u,S3),sce={kernelName:$u,backendName:"cpu",kernelFunc:ice};function $3(e,t,r,a){let n=gt(e,t.dtype);for(let i=0;i<n.size;i++){let s=n.indexToLoc(i),o=new Array(s.length);for(let l=0;l<o.length;l++)o[l]=s[l]*r[l]+a[l];n.set(t.get(...o),...s)}return n}var oce=class{constructor(e,t,r,a,n,i){this.separator=_.encodeString(e),this.nGramWidths=t,this.leftPad=_.encodeString(r),this.rightPad=_.encodeString(a),this.padWidth=n,this.preserveShort=i}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,t){let r=this.getPadWidth(t);return Math.max(0,e+2*r-t+1)}createNGrams(e,t,r,a,n,i){for(let s=0;s<n;++s){let o=this.getPadWidth(i),l=Math.max(0,o-s),u=Math.max(0,o-(n-(s+1))),c=i-(l+u),d=t+(l>0?0:s-o),p=0;p+=l*this.leftPad.length;for(let g=0;g<c;++g)p+=e[d+g].length;p+=u*this.rightPad.length,p+=(l+u+c-1)*this.separator.length,r[a+s]=new Uint8Array(p);let f=r[a+s],h=0,m=g=>g.forEach(v=>f[h++]=v);for(let g=0;g<l;++g)m(this.leftPad),m(this.separator);for(let g=0;g<c-1;++g)m(e[d+g]),m(this.separator);if(c>0){m(e[d+c-1]);for(let g=0;g<u;++g)m(this.separator),m(this.rightPad)}else{for(let g=0;g<u-1;++g)m(this.rightPad),m(this.separator);m(this.rightPad)}}}compute(e,t){let r=e.length,a=t.length;if(a>0){let o=t[0];if(o!==0)throw new Error(`First split value must be 0, got ${o}`);for(let l=1;l<a;++l){let u=t[l]>=o;if(u=u&&t[l]<=r,!u)throw new Error(`Invalid split value ${t[l]}, must be in [${o}, ${r}]`);o=t[l]}if(o!==r)throw new Error(`Last split value must be data size. Expected ${r}, got ${o}`)}let n=a-1,i=_.getArrayFromDType("int32",a);if(r===0||a===0){let o=new Array(r);for(let l=0;l<=n;++l)i[l]=0;return[o,i]}i[0]=0;for(let o=1;o<=n;++o){let l=t[o]-t[o-1],u=0;this.nGramWidths.forEach(c=>{u+=this.getNumNGrams(l,c)}),this.preserveShort&&l>0&&u===0&&(u=1),i[o]=i[o-1]+u}let s=new Array(i[n]);for(let o=0;o<n;++o){let l=t[o],u=i[o];if(this.nGramWidths.forEach(c=>{let d=t[o+1]-t[o],p=this.getNumNGrams(d,c);this.createNGrams(e,l,s,u,p,c),u+=p}),this.preserveShort&&u===i[o]){let c=t[o+1]-t[o];if(c===0)continue;let d=c+2*this.padWidth,p=1;this.createNGrams(e,l,s,u,p,d)}}return[s,i]}};function I3(e,t,r,a,n,i,s,o){return new oce(r,a,n,i,s,o).compute(e,t)}function lce(e,t,r,a){if(!e.length)return;if(t.length===0){for(let i=0;i<e.length;++i)a.push(e.subarray(i,i+1));return}if(t.length===1){let i=t[0],s=e.indexOf(i);for(;s!==-1;){let o=e.subarray(0,s);(!r||o.length!==0)&&a.push(o),e=e.subarray(s+1),s=e.indexOf(i)}(!r||e.length!==0)&&a.push(e);return}let n=0;for(let i=0;i<e.length+1;i++)if(i===e.length||t.indexOf(e[i])!==-1){let s=e.subarray(n,i);(!r||s.length!==0)&&a.push(s),n=i+1}}function T3(e,t,r){let a=e.length,n=[],i=0,s=0,o=new Array(a);for(let p=0;p<a;++p){let f=n.length;lce(e[p],t,r,n);let h=n.length-f;o[p]=h,i+=h,s=Math.max(s,h)}let l=_.getArrayFromDType("int32",i*2),u=new Array(i),c=[a,s],d=0;for(let p=0;p<a;++p)for(let f=0;f<o[p];++f)l[d*2]=p,l[d*2+1]=f,u[d]=n[d],++d;return[l,u,c]}function N3(e,t){let r=_.getArrayFromDType("int32",e.length);for(let a=0;a<e.length;++a)r[a]=_.fingerPrint64(e[a]).modulo(t).getLowBitsUnsigned();return r}var A3=Tr((e,t)=>e-t),uce=q$((e,t,r,a)=>({real:e-r,imag:t-a})),eI=Ur(Iu,A3,uce),cce={kernelName:Iu,backendName:"cpu",kernelFunc:eI};function _3(e,t){let r=new Array(e.rank);for(let n=0;n<r.length;n++)r[n]=e.shape[n]*t[n];let a=gt(r,e.dtype);for(let n=0;n<a.values.length;++n){let i=a.indexToLoc(n),s=new Array(e.rank);for(let l=0;l<s.length;l++)s[l]=i[l]%e.shape[l];let o=e.locToIndex(s);a.values[n]=e.values[o]}return a}var gf=(e,t)=>{let r=t.value-e.value;return r===0?e.index-t.index:r};function M3(e,t,r=0,a=e.length-1){for(;a>r;){if(a-r>600){let o=a-r+1,l=t-r+1,u=Math.log(o),c=.5*Math.exp(2*u/3),d=.5*Math.sqrt(u*c*(o-c)/o)*Math.sign(l-o/2),p=Math.max(r,Math.floor(t-l*c/o+d)),f=Math.min(a,Math.floor(t+(o-l)*c/o+d));M3(e,t,p,f)}let n=e[t],i=r,s=a;for(_.swap(e,r,t),gf(e[a],n)>0&&_.swap(e,r,a);i<s;){for(_.swap(e,i,s),i++,s--;gf(e[i],n)<0;)i=i+1;for(;gf(e[s],n)>0;)s=s-1}gf(e[r],n)===0?_.swap(e,r,s):(s=s+1,_.swap(e,s,a)),s<=t&&(r=s+1),t<=s&&(a=s-1)}}function R3(e,t,r,a,n){let i=t[t.length-1],[s,o]=[e.length/i,i],l=_.getTypedArrayFromDType(r,s*a),u=_.getTypedArrayFromDType("int32",s*a);for(let d=0;d<s;d++){let p=d*o,f=e.subarray(p,p+o),h=new Array(f.length);f.forEach((b,y)=>h[y]={value:b,index:y}),a<h.length&&(M3(h,a),h=h.slice(0,a)),n&&h.sort(gf);let m=d*a,g=l.subarray(m,m+a),v=u.subarray(m,m+a);for(let b=0;b<a;b++)g[b]=h[b].value,v[b]=h[b].index}let c=t.slice();return c[c.length-1]=a,[gt(c,r,l),gt(c,"int32",u)]}function O3(e,t,r,a){let n=_.parseAxisParam(t,r)[0],i=[1,r[0],1];for(let h=0;h<n;h++)i[0]*=r[h];i[1]=r[n];for(let h=n+1;h<r.length;h++)i[2]*=r[h];let s={},o=new Int32Array(r[n]),l=new _r(i,a,e),u=[],c=i[0]===1&&i[2]===1;for(let h=0;h<r[n];h++){let m;if(c)m=e[h].toString();else{let g=[];for(let v=0;v<i[0];v++)for(let b=0;b<i[2];b++)g.push(l.get(v,h,b));m=g.join(",")}if(s[m]!==void 0)o[h]=s[m];else{let g=Object.keys(s).length;s[m]=g,o[h]=g,u.push(h)}}let d=i.slice();d[1]=Object.keys(s).length;let p=new _r(d,a);u.forEach((h,m)=>{for(let g=0;g<i[0];g++)for(let v=0;v<i[2];v++)p.set(l.get(g,h,v),g,m,v)});let f=r.slice();return f[n]=d[1],{outputValues:p.values,outputShape:f,indices:o}}ky("cpu",()=>new G$,1);var P3=Mt(ql,e=>e>=0?e:Math.exp(e)-1),dce={kernelName:ql,backendName:"cpu",kernelFunc:P3};function D3(e){let{inputs:t,backend:r,attrs:a}=e,{x:n}=t,{alpha:i}=a;Xe([n],"leakyRelu");let s=_.sizeFromShape(n.shape),o=r.data.get(n.dataId).values,l=_.getTypedArrayFromDType("float32",s);for(let u=0;u<o.length;u++)l[u]=o[u]<0?i*o[u]:o[u];return r.makeTensorInfo(n.shape,"float32",l)}var pce={kernelName:eu,backendName:"cpu",kernelFunc:D3},fce=Tr((e,t)=>e<0?t*e:e);function F3(e){let{inputs:t,backend:r}=e,{x:a,alpha:n}=t;Xe([a,n],"prelu");let i=r.data.get(a.dataId).values,s=r.data.get(n.dataId).values,[o,l]=fce(a.shape,n.shape,i,s,"float32");return r.makeTensorInfo(l,"float32",o)}var hce={kernelName:fu,backendName:"cpu",kernelFunc:F3},L3=Mt(mu,e=>Math.max(0,e)),mce={kernelName:mu,backendName:"cpu",kernelFunc:L3},z3=Mt(vu,e=>Math.min(Math.max(0,e),6)),gce={kernelName:vu,backendName:"cpu",kernelFunc:z3};function pb(e,t,r,a,n){if(r==="linear")return Ni({inputs:{x:t},backend:e});if(r==="relu")return L3({inputs:{x:t},backend:e});if(r==="elu")return P3({inputs:{x:t},backend:e});if(r==="relu6")return z3({inputs:{x:t},backend:e});if(r==="prelu")return F3({inputs:{x:t,alpha:a},backend:e});if(r==="leakyrelu")return D3({inputs:{x:t},backend:e,attrs:{alpha:n}});if(r==="sigmoid")return k3({inputs:{x:t},backend:e});throw new Error(`Activation ${r} has not been implemented for the CPU backend.`)}function Ht(e){let{inputs:t,backend:r,attrs:a}=e,{x:n}=t,{shape:i}=a,s=_.sizeFromShape(n.shape),o=_.inferFromImplicitShape(i,s),l=_.sizeFromShape(o);_.assert(s===l,()=>`The new shape (${o}) has ${l} elements and the old shape (${n.shape}) has ${s} elements. The new shape and old shape must have the same number of elements.`),r.incRef(n.dataId);let u=r.data.get(n.dataId);if(u.complexTensorInfos!=null){let c=u.complexTensorInfos.real,d=u.complexTensorInfos.imag;c.shape=o,d.shape=o}return{dataId:n.dataId,shape:o,dtype:n.dtype}}var vce={kernelName:Hd,backendName:"cpu",kernelFunc:Ht};function B3(e){let{inputs:t,backend:r,attrs:a}=e,{a:n,b:i}=t,{transposeA:s,transposeB:o}=a;Xe([n,i],"matMul");let l=n.shape.length,u=i.shape.length,c=s?n.shape[l-2]:n.shape[l-1],d=o?i.shape[u-1]:i.shape[u-2],p=s?n.shape[l-1]:n.shape[l-2],f=o?i.shape[u-2]:i.shape[u-1],h=n.shape.slice(0,-2),m=i.shape.slice(0,-2),g=_.sizeFromShape(h),v=_.sizeFromShape(m),b=sp.assertAndGetBroadcastShape(n.shape.slice(0,-2),i.shape.slice(0,-2)).concat([p,f]);_.assert(c===d,()=>`Error in matMul: inner shapes (${c}) and (${d}) of Tensors with shapes ${n.shape} and ${i.shape} and transposeA=${s} and transposeB=${o} must match.`);let y=s?[g,c,p]:[g,p,c],w=o?[v,f,d]:[v,d,f],x=Ht({inputs:{x:n},backend:r,attrs:{shape:y}}),k=Ht({inputs:{x:i},backend:r,attrs:{shape:w}}),C=s?x.shape[1]:x.shape[2],E=s?x.shape[2]:x.shape[1],$=o?k.shape[1]:k.shape[2],N=Math.max(g,v),I=r.data.get(x.dataId).values,S=r.data.get(k.dataId).values,A=_.computeStrides(x.shape),R=_.computeStrides(k.shape),[O,D,z]=s?[A[0],1,A[1]]:[A[0],A[1],1],[U,j,G]=o?[1,R[1],R[0]]:[R[1],1,R[0]],L=E*$,V=gt([N,E,$],x.dtype),H=V.values,Y=r.blockSize;for(let K=0;K<N;K++)for(let Z=0;Z<E;Z+=Y)for(let le=0;le<$;le+=Y)for(let de=0;de<C;de+=Y){let ie=Math.min(Z+Y,E),ue=Math.min(le+Y,$),pe=Math.min(de+Y,C);for(let Se=Z;Se<ie;Se++)for(let ke=le;ke<ue;ke++){let oe=0;for(let me=de;me<pe;me++){let $e=Math.min(K,g-1)*O,Me=Math.min(K,v-1)*G,Oe=I[$e+Se*D+me*z],he=S[me*U+ke*j+Me];oe+=Oe*he}H[K*L+(Se*$+ke)]+=oe}}return r.disposeIntermediateTensorInfo(x),r.disposeIntermediateTensorInfo(k),r.makeTensorInfo(b,V.dtype,V.values)}var bce={kernelName:Fl,backendName:"cpu",kernelFunc:B3};function yce(e){let{inputs:t,backend:r,attrs:a}=e,{a:n,b:i,bias:s,preluActivationWeights:o}=t,{transposeA:l,transposeB:u,activation:c,leakyreluAlpha:d}=a,p,f,h,m=[];p=B3({inputs:{a:n,b:i},attrs:{transposeA:l,transposeB:u},backend:r}),s&&(f=Uc({inputs:{a:p,b:s},backend:r}),m.push(p),p=f),c&&(h=pb(r,p,c,o,d),m.push(p),p=h);for(let g of m)r.disposeIntermediateTensorInfo(g);return p}var wce={kernelName:cl,backendName:"cpu",kernelFunc:yce},xce=Mt(id,e=>Math.acos(e)),kce={kernelName:id,backendName:"cpu",kernelFunc:xce},Ece=Mt(sd,e=>Math.acosh(e)),Cce={kernelName:sd,backendName:"cpu",kernelFunc:Ece};function Sce(e){let{inputs:t,backend:r}=e,a=t;Xe(t,"addN");let n=a.map(o=>r.data.get(o.dataId).values),i=gt(a[0].shape,a[0].dtype),s=i.values;for(let o=0;o<a.length;o++){let l=n[o];for(let u=0;u<s.length;u++)s[u]+=l[u]}return r.makeTensorInfo(i.shape,i.dtype,i.values)}var $ce={kernelName:Ol,backendName:"cpu",kernelFunc:Sce};function Ice(e){let{inputs:t,backend:r,attrs:a}=e,{x:n}=t,{axis:i,keepDims:s}=a;Xe(n,"all");let o=_.parseAxisParam(i,n.shape),l=o,u=B.getAxesPermutation(l,n.shape.length),c=n;u!=null&&(c=Ln({inputs:{x:n},backend:r,attrs:{perm:u}}),l=B.getInnerMostAxes(l.length,n.shape.length)),B.assertAxesAreInnerMostDims("all",l,c.shape.length);let[d,p]=B.computeOutAndReduceShapes(c.shape,l),f=_.sizeFromShape(p),h=_.makeZerosTypedArray(_.sizeFromShape(d),c.dtype),m=r.data.get(c.dataId).values;for(let v=0;v<h.length;++v){let b=v*f,y=m[b];for(let w=0;w<f;++w){let x=m[b+w];y=y&&x}h[v]=y}u!=null&&r.disposeIntermediateTensorInfo(c);let g=r.makeTensorInfo(d,c.dtype,h);if(s){let v=B.expandShapeToKeepDim(d,o),b=Ht({inputs:{x:g},backend:r,attrs:{shape:v}});return r.disposeIntermediateTensorInfo(g),b}return g}var Tce={kernelName:od,backendName:"cpu",kernelFunc:Ice};function Nce(e){let{inputs:t,backend:r,attrs:a}=e,{x:n}=t,{axis:i,keepDims:s}=a;Xe(n,"any");let o=_.parseAxisParam(i,n.shape),l=o,u=B.getAxesPermutation(l,n.shape.length),c=n;u!=null&&(c=Ln({inputs:{x:n},backend:r,attrs:{perm:u}}),l=B.getInnerMostAxes(l.length,n.shape.length)),B.assertAxesAreInnerMostDims("any",l,c.shape.length);let[d,p]=B.computeOutAndReduceShapes(c.shape,l),f=_.sizeFromShape(p),h=_.makeZerosTypedArray(_.sizeFromShape(d),c.dtype),m=r.data.get(c.dataId).values;for(let v=0;v<h.length;++v){let b=v*f,y=m[b];for(let w=0;w<f;++w){let x=m[b+w];y=y||x}h[v]=y}u!=null&&r.disposeIntermediateTensorInfo(c);let g=r.makeTensorInfo(d,c.dtype,h);if(s){let v=B.expandShapeToKeepDim(d,o),b=Ht({inputs:{x:g},backend:r,attrs:{shape:v}});return r.disposeIntermediateTensorInfo(g),b}return g}var Ace={kernelName:ld,backendName:"cpu",kernelFunc:Nce};function _ce(e){let{inputs:t,backend:r,attrs:a}=e,{x:n}=t,{axis:i}=a;Xe(n,"argMax");let s=_.parseAxisParam(i,n.shape),o=B.getAxesPermutation(s,n.shape.length),l=n,u=[];o!=null&&(l=Ln({inputs:{x:n},backend:r,attrs:{perm:o}}),u.push(l),s=B.getInnerMostAxes(s.length,l.shape.length)),s=[s[0]],B.assertAxesAreInnerMostDims("argMax",s,l.shape.length);let[c,d]=B.computeOutAndReduceShapes(l.shape,s),p=_.sizeFromShape(c),f=_.makeZerosTypedArray(p,"int32"),h=_.sizeFromShape(d),m=r.data.get(l.dataId).values;for(let g=0;g<f.length;++g){let v=g*h,b=m[v],y=0;for(let w=0;w<h;++w){let x=m[v+w];x>b&&(b=x,y=w)}f[g]=y}return u.forEach(g=>r.disposeIntermediateTensorInfo(g)),r.makeTensorInfo(c,"int32",f)}var Mce={kernelName:Pl,backendName:"cpu",kernelFunc:_ce};function Rce(e){let{inputs:t,backend:r,attrs:a}=e,{x:n}=t,{axis:i}=a;Xe(n,"argMin");let s=_.parseAxisParam(i,n.shape),o=B.getAxesPermutation(s,n.shape.length),l=n,u=[];o!=null&&(l=Ln({inputs:{x:n},backend:r,attrs:{perm:o}}),u.push(l),s=B.getInnerMostAxes(s.length,l.shape.length)),s=[s[0]],B.assertAxesAreInnerMostDims("argMin",s,l.shape.length);let[c,d]=B.computeOutAndReduceShapes(l.shape,s),p=_.sizeFromShape(c),f=_.makeZerosTypedArray(p,"int32"),h=_.sizeFromShape(d),m=r.data.get(l.dataId).values;for(let g=0;g<f.length;++g){let v=g*h,b=m[v],y=0;for(let w=0;w<h;++w){let x=m[v+w];x<b&&(b=x,y=w)}f[g]=y}return u.forEach(g=>r.disposeIntermediateTensorInfo(g)),r.makeTensorInfo(c,"int32",f)}var Oce={kernelName:_h,backendName:"cpu",kernelFunc:Rce},Pce=Mt(ud,e=>Math.asin(e)),Dce={kernelName:ud,backendName:"cpu",kernelFunc:Pce},Fce=Mt(cd,e=>Math.asinh(e)),Lce={kernelName:cd,backendName:"cpu",kernelFunc:Fce},zce=Mt(dd,e=>Math.atan(e)),Bce={kernelName:dd,backendName:"cpu",kernelFunc:zce},Vce=Tr((e,t)=>Math.atan2(e,t)),Wce=Ur(fd,Vce),Hce={kernelName:fd,backendName:"cpu",kernelFunc:Wce},Uce=Mt(pd,e=>Math.atanh(e)),jce={kernelName:pd,backendName:"cpu",kernelFunc:Uce};function tI(e,t,r,a,n,i){let s=n.strideHeight,o=n.strideWidth,l=n.dilationHeight,u=n.dilationWidth,c=n.effectiveFilterHeight,d=n.effectiveFilterWidth,p=n.padInfo.top,f=n.padInfo.left,h=i==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,m=gt(n.outShape,r),g=m.values,v=n.outShape[1]*n.outShape[2]*n.outShape[3],b=n.outShape[2]*n.outShape[3],y=n.outShape[3];for(let w=0;w<n.batchSize;++w){let x=w*v,k=w*a[0];for(let C=0;C<n.inChannels;++C)for(let E=0;E<n.outHeight;++E){let $=E*s-p,N=Math.max(0,$),I=Math.min(n.inHeight,c+$),S=x+E*b;for(let A=0;A<n.outWidth;++A){let R=A*o-f,O=Math.max(0,R),D=Math.min(n.inWidth,d+R),z=h,U=0,j=0;for(let L=N;L<I;L+=l){let V=k+L*a[1];for(let H=O;H<D;H+=u){let Y=V+H*a[2],K=e[Y+C];i==="max"&&K>z?z=K:i==="avg"&&(U+=K,j++)}if(isNaN(z))break}let G=S+A*y+C;g[G]=i==="avg"?U/j:z}}}return m}function V3(e,t,r,a,n=!1,i=!1){let s=gt(a.outShape,"int32"),o=a.strideHeight,l=a.strideWidth,u=a.dilationHeight,c=a.dilationWidth,d=a.effectiveFilterHeight,p=a.effectiveFilterWidth,f=a.padInfo.top,h=a.padInfo.left,m=gt(t,r,e);for(let g=0;g<a.batchSize;++g)for(let v=0;v<a.inChannels;++v)for(let b=0;b<a.outHeight;++b){let y=b*o-f,w=y;for(;w<0;)w+=u;let x=Math.min(a.inHeight,d+y);for(let k=0;k<a.outWidth;++k){let C=k*l-h,E=C;for(;E<0;)E+=c;let $=Math.min(a.inWidth,p+C),N=Number.NEGATIVE_INFINITY,I=-1;for(let S=w;S<x;S+=u){let A=S-y;for(let R=E;R<$;R+=c){let O=R-C,D=m.get(g,S,R,v);D>N&&(N=D,n?I=i?((g*a.inHeight+S)*a.inWidth+R)*a.inChannels+v:(S*a.inWidth+R)*a.inChannels+v:I=A*p+O)}}s.set(I,g,b,k,v)}}return s}function W3(e,t,r,a,n,i){let s=n.strideDepth,o=n.strideHeight,l=n.strideWidth,u=n.dilationDepth,c=n.dilationHeight,d=n.dilationWidth,p=n.effectiveFilterDepth,f=n.effectiveFilterHeight,h=n.effectiveFilterWidth,m=n.padInfo.front,g=n.padInfo.top,v=n.padInfo.left,b=i==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,y=gt(n.outShape,r),w=y.values,x=n.outShape[1]*n.outShape[2]*n.outShape[3]*n.outShape[4],k=n.outShape[2]*n.outShape[3]*n.outShape[4],C=n.outShape[3]*n.outShape[4],E=n.outShape[4];for(let $=0;$<n.batchSize;++$){let N=$*x,I=$*a[0];for(let S=0;S<n.inChannels;++S)for(let A=0;A<n.outDepth;++A){let R=A*s-m,O=R;for(;O<0;)O+=u;let D=Math.min(n.inDepth,p+R),z=N+A*k;for(let U=0;U<n.outHeight;++U){let j=U*o-g,G=j;for(;G<0;)G+=c;let L=Math.min(n.inHeight,f+j),V=z+U*C;for(let H=0;H<n.outWidth;++H){let Y=H*l-v,K=Y;for(;K<0;)K+=d;let Z=Math.min(n.inWidth,h+Y),le=V+H*E,de=b,ie=0,ue=0;for(let Se=O;Se<D;Se+=u){let ke=I+Se*a[1];for(let oe=G;oe<L;oe+=c){let me=ke+oe*a[2];for(let $e=K;$e<Z;$e+=d){let Me=me+$e*a[3],Oe=e[Me+S];if(i==="max"&&Oe>de?de=Oe:i==="avg"&&(ie+=Oe,ue++),isNaN(de))break}if(isNaN(de))break}if(isNaN(de))break}let pe=le+S;w[pe]=i==="avg"?ie/ue:de}}}}return y}function Gce(e,t){let r=gt(t.outShape,"int32"),a=t.strideDepth,n=t.strideHeight,i=t.strideWidth,s=t.dilationDepth,o=t.dilationHeight,l=t.dilationWidth,u=t.effectiveFilterDepth,c=t.effectiveFilterHeight,d=t.effectiveFilterWidth,p=t.padInfo.front,f=t.padInfo.top,h=t.padInfo.left;for(let m=0;m<t.batchSize;++m)for(let g=0;g<t.inChannels;++g)for(let v=0;v<t.outDepth;++v){let b=v*a-p,y=b;for(;y<0;)y+=s;let w=Math.min(t.inDepth,u+b);for(let x=0;x<t.outHeight;++x){let k=x*n-f,C=k;for(;C<0;)C+=o;let E=Math.min(t.inHeight,c+k);for(let $=0;$<t.outWidth;++$){let N=$*i-h,I=N;for(;I<0;)I+=l;let S=Math.min(t.inWidth,d+N),A=Number.NEGATIVE_INFINITY,R=-1;for(let O=y;O<w;O+=s){let D=O-b;for(let z=C;z<E;z+=o){let U=z-k;for(let j=I;j<S;j+=l){let G=j-N,L=e.get(m,O,z,j,g);L>=A&&(A=L,R=D*c*d+U*c+G)}}}r.set(R,m,v,x,$,g)}}}return r}function qce(e){let{inputs:t,backend:r,attrs:a}=e,{x:n}=t;Xe(n,"avgPool");let{filterSize:i,strides:s,pad:o,dimRoundingMode:l}=a,u=1;_.assert(B.eitherStridesOrDilationsAreOne(s,u),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${s} and dilations '${u}'`);let c=B.computePool2DInfo(n.shape,i,s,u,o,l),d;if(c.filterWidth===1&&c.filterHeight===1&&_.arraysEqual(c.inShape,c.outShape))d=Ni({inputs:{x:n},backend:r});else{let p=r.data.get(n.dataId).values,f=_.computeStrides(n.shape),h=tI(p,n.shape,n.dtype,f,c,"avg");d=r.makeTensorInfo(c.outShape,n.dtype,h.values)}return d}var Xce={kernelName:Dl,backendName:"cpu",kernelFunc:qce};function Yce(e){let{inputs:t,backend:r,attrs:a}=e,{x:n}=t,{filterSize:i,strides:s,pad:o,dimRoundingMode:l,dataFormat:u}=a;Xe(n,"avgPool3d");let c=B.computePool3DInfo(n.shape,i,s,1,o,l,u),d=r.data.get(n.dataId).values,p=W3(d,n.shape,n.dtype,_.computeStrides(n.shape),c,"avg");return r.makeTensorInfo(p.shape,"float32",p.values)}var Kce={kernelName:Mh,backendName:"cpu",kernelFunc:Yce};function Zce(e){let{inputs:t,backend:r,attrs:a}=e,{dy:n,input:i}=t,{filterSize:s,strides:o,pad:l,dimRoundingMode:u}=a;Xe([n,i],"avgPool3DGrad");let c=B.computePool3DInfo(i.shape,s,o,1,l,u),d=c.strideDepth,p=c.strideHeight,f=c.strideWidth,h=c.filterDepth,m=c.filterHeight,g=c.filterWidth,v=c.dilationDepth,b=c.dilationHeight,y=c.dilationWidth,w=c.effectiveFilterDepth,x=c.effectiveFilterHeight,k=c.effectiveFilterWidth,C=w-1-c.padInfo.front,E=k-1-c.padInfo.left,$=x-1-c.padInfo.top,N=gt(i.shape,"float32"),I=1/(h*m*g),S=r.bufferSync(n);for(let A=0;A<c.batchSize;++A)for(let R=0;R<c.inChannels;++R)for(let O=0;O<c.inDepth;++O)for(let D=0;D<c.inHeight;++D)for(let z=0;z<c.inWidth;++z){let U=O-C,j=D-$,G=z-E,L=0;for(let V=0;V<w;V+=v){let H=(U+V)/d;if(!(H<0||H>=c.outDepth||Math.floor(H)!==H))for(let Y=0;Y<x;Y+=b){let K=(j+Y)/p;if(!(K<0||K>=c.outHeight||Math.floor(K)!==K))for(let Z=0;Z<k;Z+=y){let le=(G+Z)/f;le<0||le>=c.outWidth||Math.floor(le)!==le||(L+=S.get(A,H,K,le,R))}}}N.set(L*I,A,O,D,z,R)}return r.makeTensorInfo(N.shape,N.dtype,N.values)}var Qce={kernelName:Hb,backendName:"cpu",kernelFunc:Zce};function Jce(e){let{inputs:t,backend:r,attrs:a}=e,{dy:n,input:i}=t,s=i;Xe([n,i],"avgPoolGrad");let{filterSize:o,strides:l,pad:u}=a,c=B.computePool2DInfo(s.shape,o,l,1,u),d=c.strideHeight,p=c.strideWidth,f=c.filterHeight,h=c.filterWidth,m=c.dilationHeight,g=c.dilationWidth,v=c.effectiveFilterHeight,b=c.effectiveFilterWidth,y=b-1-c.padInfo.left,w=v-1-c.padInfo.top,x=gt(s.shape,"float32"),k=1/(f*h),C=r.data.get(n.dataId).values,E=gt(n.shape,"float32",C);for(let $=0;$<c.batchSize;++$)for(let N=0;N<c.inChannels;++N)for(let I=0;I<c.inHeight;++I)for(let S=0;S<c.inWidth;++S){let A=I-w,R=S-y,O=0;for(let D=0;D<v;D+=m){let z=(A+D)/d;if(!(z<0||z>=c.outHeight||Math.floor(z)!==z))for(let U=0;U<b;U+=g){let j=(R+U)/p;j<0||j>=c.outWidth||Math.floor(j)!==j||(O+=E.get($,z,j,N))}}x.set(O*k,$,I,S,N)}return r.makeTensorInfo(x.shape,x.dtype,x.values)}var ede={kernelName:Wb,backendName:"cpu",kernelFunc:Jce};function tde(e){let{inputs:t,backend:r,attrs:a}=e,{x:n,scale:i,offset:s,mean:o,variance:l}=t;_.assert(o.shape.length===l.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),_.assert(s==null||o.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),_.assert(i==null||o.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),Xe([n,o,l,i,s],"batchNorm");let{varianceEpsilon:u}=a;u==null&&(u=.001);let c=r.data.get(n.dataId).values,d=r.data.get(o.dataId).values,p=r.data.get(l.dataId).values,f=i?r.data.get(i.dataId).values:new Float32Array([1]),h=s?r.data.get(s.dataId).values:new Float32Array([0]),m=new Float32Array(c.length),g=h.length,v=f.length,b=p.length,y=d.length,w=0,x=0,k=0,C=0;for(let E=0;E<c.length;++E)m[E]=h[w++]+(c[E]-d[x++])*f[k++]/Math.sqrt(p[C++]+u),w>=g&&(w=0),x>=y&&(x=0),k>=v&&(k=0),C>=b&&(C=0);return r.makeTensorInfo(n.shape,n.dtype,m)}var rde={kernelName:Zl,backendName:"cpu",kernelFunc:tde};function nde(e){let{inputs:t,backend:r,attrs:a}=e,{x:n}=t,{blockShape:i,crops:s}=a;Xe([n],"batchToSpaceND");let o=i.reduce((v,b)=>v*b),l=B.getReshaped(n.shape,i,o),u=B.getPermuted(l.length,i.length),c=B.getReshapedPermuted(n.shape,i,o),d=B.getSliceBeginCoords(s,i.length),p=B.getSliceSize(c,s,i.length),f=Ht({inputs:{x:n},backend:r,attrs:{shape:l}}),h=Ln({inputs:{x:f},backend:r,attrs:{perm:u}}),m=Ht({inputs:{x:h},backend:r,attrs:{shape:c}}),g=Cl({inputs:{x:m},backend:r,attrs:{begin:d,size:p}});return r.disposeIntermediateTensorInfo(f),r.disposeIntermediateTensorInfo(h),r.disposeIntermediateTensorInfo(m),g}var ade={kernelName:hd,backendName:"cpu",kernelFunc:nde};function ide(e){let{inputs:t,backend:r,attrs:a}=e,{x:n,weights:i}=t,{size:s}=a,o=r.data.get(n.dataId).values,l=r.data.get(i.dataId).values,u=X$(o,l,i.dtype,i.shape,s);return r.makeTensorInfo([s],i.dtype,u)}var sde={kernelName:Ub,backendName:"cpu",kernelFunc:ide};function ode(e){let{inputs:t,backend:r}=e,{s0:a,s1:n}=t,i=r.data.get(a.dataId).values,s=r.data.get(n.dataId).values,o=B.assertAndGetBroadcastShape(Array.from(i),Array.from(s));return r.makeTensorInfo([o.length],"int32",Int32Array.from(o))}var lde={kernelName:jb,backendName:"cpu",kernelFunc:ode},ude=Mt(bo,(e,t)=>{let r=t;return e>r.clipValueMax?r.clipValueMax:e<r.clipValueMin?r.clipValueMin:e}),cde={kernelName:bo,backendName:"cpu",kernelFunc:ude},dde=e=>{let{x:t}=e.inputs,r=e.backend,a=new Float32Array(_.sizeFromShape(t.shape)),n=r.data.get(t.dataId),i=n.complexTensorInfos.real,s=n.complexTensorInfos.imag,o=r.data.get(i.dataId).values,l=r.data.get(s.dataId).values;for(let u=0;u<o.length;u++){let c=o[u],d=l[u];a[u]=Math.hypot(c,d)}return r.makeOutput(a,t.shape,"float32")},pde={kernelName:Rh,backendName:"cpu",kernelFunc:dde};function jc(e){let{inputs:t,backend:r}=e,{input:a}=t,n=r.data.get(a.dataId).complexTensorInfos.imag,i=r.data.get(n.dataId).values;return r.makeTensorInfo(n.shape,n.dtype,i)}var fde={kernelName:ay,backendName:"cpu",kernelFunc:jc};function Gc(e){let{inputs:t,backend:r,attrs:a}=e,{axis:n}=a,i=_.parseAxisParam(n,t[0].shape)[0],s=B.computeOutShape(t.map(m=>m.shape),i);if(_.sizeFromShape(s)===0)return r.makeTensorInfo(s,t[0].dtype,[]);let o=t.filter(m=>_.sizeFromShape(m.shape)>0);if(o.length===1)return Ni({inputs:{x:o[0]},backend:r});let l=o.map(m=>m.shape);if(B.assertParamsConsistent(l,i),o[0].dtype==="complex64"){let m=o.map(w=>El({inputs:{input:w},backend:r})),g=o.map(w=>jc({inputs:{input:w},backend:r})),v=Gc({inputs:m,backend:r,attrs:{axis:i}}),b=Gc({inputs:g,backend:r,attrs:{axis:i}}),y=Qn({inputs:{real:v,imag:b},backend:r});return m.forEach(w=>r.disposeIntermediateTensorInfo(w)),g.forEach(w=>r.disposeIntermediateTensorInfo(w)),r.disposeIntermediateTensorInfo(v),r.disposeIntermediateTensorInfo(b),y}let u=o.map(m=>{let g=_.sizeFromShape(m.shape.slice(i));return Ht({inputs:{x:m},backend:r,attrs:{shape:[-1,g]}})}),c=u.map(m=>({vals:r.data.get(m.dataId).values,shape:m.shape}));s=B.computeOutShape(u.map(m=>m.shape),1);let d=u[0].shape[0]===1,p=Y$(c,s,t[0].dtype,d),f=B.computeOutShape(o.map(m=>m.shape),i),h=r.makeTensorInfo(f,t[0].dtype,p);return u.forEach(m=>r.disposeIntermediateTensorInfo(m)),h}var hde={kernelName:md,backendName:"cpu",kernelFunc:Gc};function H3(e){let{inputs:t,backend:r,attrs:a}=e,{x:n,filter:i}=t,{strides:s,pad:o,dataFormat:l,dilations:u,dimRoundingMode:c}=a;Xe([n,i],"conv2d");let d=B.convertConv2DDataFormat(l),p=B.computeConv2DInfo(n.shape,i.shape,s,u,o,c,!1,d),f=p.filterHeight,h=p.filterWidth,m=p.dilationHeight,g=p.dilationWidth,v=p.padInfo.left,b=p.padInfo.top,y=p.dataFormat==="channelsLast",w=new _r(p.outShape,n.dtype),x=_.computeStrides(n.shape),k=_.computeStrides(i.shape),C=x[0],E=y?x[1]:x[2],$=y?x[2]:1,N=y?1:x[1],I=w.strides[0],S=y?w.strides[1]:w.strides[2],A=y?w.strides[2]:1,R=y?1:w.strides[1],O=r.data.get(n.dataId).values,D=r.data.get(i.dataId).values,z=w.values;for(let U=0;U<p.batchSize;++U){let j=U*C,G=U*I;for(let L=0;L<p.outHeight;++L){let V=G+L*S,H=L*p.strideHeight-b;for(let Y=0;Y<f;++Y){let K=H+Y*m;if(K<0||K>=p.inHeight)continue;let Z=Y*k[0],le=j+K*E;for(let de=0;de<p.outWidth;++de){let ie=V+de*A,ue=de*p.strideWidth-v;for(let pe=0;pe<h;++pe){let Se=ue+pe*g;if(Se<0||Se>=p.inWidth)continue;let ke=Z+pe*k[1],oe=le+Se*$,me=ke;for(let $e=0;$e<p.inChannels;++$e){let Me=O[oe+$e*N];for(let Oe=0;Oe<p.outChannels;++Oe)z[ie+Oe*R]+=Me*D[me+Oe];me+=p.outChannels}}}}}}return r.makeTensorInfo(w.shape,w.dtype,z)}var mde={kernelName:Bl,backendName:"cpu",kernelFunc:H3};function gde(e){let{inputs:t,backend:r,attrs:a}=e,{x:n,dy:i}=t,{strides:s,pad:o,dataFormat:l,dimRoundingMode:u,filterShape:c}=a;Xe([n,i],"conv2dBackpropFilter");let d=B.convertConv2DDataFormat(l),p=B.computeConv2DInfo(n.shape,c,s,1,o,u,!1,d),{strideHeight:f,strideWidth:h,filterHeight:m,filterWidth:g}=p,v=p.dataFormat==="channelsLast",b=new _r(p.filterShape,"float32"),y=p.padInfo.left,w=p.padInfo.top,x=r.data.get(n.dataId).values,k=r.data.get(i.dataId).values,C=new _r(n.shape,n.dtype,x),E=new _r(i.shape,i.dtype,k);for(let $=0;$<m;++$){let N=Math.max(0,Math.ceil((w-$)/f)),I=Math.min(p.outHeight,(p.inHeight+w-$)/f);for(let S=0;S<g;++S){let A=Math.max(0,Math.ceil((y-S)/h)),R=Math.min(p.outWidth,(p.inWidth+y-S)/h);for(let O=0;O<p.inChannels;++O)for(let D=0;D<p.outChannels;++D){let z=0;for(let U=0;U<p.batchSize;++U)for(let j=N;j<I;++j){let G=$+j*f-w;for(let L=A;L<R;++L){let V=S+L*h-y;v?z+=C.get(U,G,V,O)*E.get(U,j,L,D):z+=C.get(U,O,G,V)*E.get(U,D,j,L)}}b.set(z,$,S,O,D)}}}return r.makeTensorInfo(b.shape,b.dtype,b.values)}var vde={kernelName:qb,backendName:"cpu",kernelFunc:gde};function bde(e){let{inputs:t,backend:r,attrs:a}=e,{dy:n,filter:i}=t,{inputShape:s,strides:o,pad:l,dataFormat:u,dimRoundingMode:c}=a;Xe([n,i],"conv2dBackpropInput");let d=_.computeStrides(i.shape),p=_.computeStrides(n.shape),f=B.convertConv2DDataFormat(u),h=B.computeConv2DInfo(s,i.shape,o,1,l,c,!1,f),m=new _r(h.inShape,"float32"),g=m.values,v=r.data.get(n.dataId).values,b=r.data.get(i.dataId).values,[y,w,x]=d,{batchSize:k,filterHeight:C,filterWidth:E,inChannels:$,inHeight:N,inWidth:I,outChannels:S,outHeight:A,outWidth:R,strideHeight:O,strideWidth:D}=h;f=h.dataFormat;let z=C-1-h.padInfo.top,U=E-1-h.padInfo.left,j=f==="channelsLast",G=m.strides[0],L=j?m.strides[1]:m.strides[2],V=j?m.strides[2]:1,H=j?1:m.strides[1],Y=p[0],K=j?p[1]:p[2],Z=j?p[2]:1,le=j?1:p[1];for(let de=0;de<k;++de)for(let ie=0;ie<$;++ie)for(let ue=0;ue<N;++ue){let pe=ue-z,Se=Math.max(0,Math.ceil(pe/O)),ke=Math.min(A,(C+pe)/O);for(let oe=0;oe<I;++oe){let me=oe-U,$e=Math.max(0,Math.ceil(me/D)),Me=Math.min(R,(E+me)/D),Oe=0;for(let Re=Se;Re<ke;++Re){let Ne=Re*O-pe;for(let je=$e;je<Me;++je){let ve=je*D-me,Ge=Y*de+K*Re+Z*je,Ze=y*(C-1-Ne)+w*(E-1-ve)+x*ie;for(let qe=0;qe<S;++qe){let Ae=v[Ge+le*qe],rt=b[Ze+qe];Oe+=Ae*rt}}}let he=G*de+L*ue+V*oe+H*ie;g[he]=Oe}}return r.makeTensorInfo(m.shape,m.dtype,m.values)}var yde={kernelName:Vl,backendName:"cpu",kernelFunc:bde};function wde(e){let{inputs:t,backend:r,attrs:a}=e,{x:n,filter:i}=t,{strides:s,pad:o,dilations:l}=a;Xe([n,i],"conv3d");let u=B.computeConv3DInfo(n.shape,i.shape,s,l,o),{filterDepth:c,filterHeight:d,filterWidth:p,dilationDepth:f,dilationHeight:h,dilationWidth:m,padInfo:g}=u,v=g.front,b=g.left,y=g.top,w=new _r(u.outShape,n.dtype),x=r.data.get(n.dataId).values,k=r.data.get(i.dataId).values,C=w.values,E=_.computeStrides(n.shape),$=_.computeStrides(i.shape);for(let N=0;N<u.batchSize;++N){let I=N*E[0],S=N*w.strides[0];for(let A=0;A<u.outDepth;++A){let R=S+A*w.strides[1],O=A*u.strideDepth-v;for(let D=0;D<c;++D){let z=O+D*f;if(z<0||z>=u.inDepth)continue;let U=D*$[0],j=I+z*E[1];for(let G=0;G<u.outHeight;++G){let L=R+G*w.strides[2],V=G*u.strideHeight-y;for(let H=0;H<d;++H){let Y=V+H*h;if(Y<0||Y>=u.inHeight)continue;let K=U+H*$[1],Z=j+Y*E[2];for(let le=0;le<u.outWidth;++le){let de=L+le*u.outChannels,ie=le*u.strideWidth-b;for(let ue=0;ue<p;++ue){let pe=ie+ue*m;if(pe<0||pe>=u.inWidth)continue;let Se=K+ue*$[2],ke=Z+pe*u.inChannels,oe=Se;for(let me=0;me<u.inChannels;++me){let $e=x[ke+me];for(let Me=0;Me<u.outChannels;++Me)C[de+Me]+=$e*k[oe+Me];oe+=u.outChannels}}}}}}}}return r.makeTensorInfo(w.shape,w.dtype,w.values)}var xde={kernelName:Oh,backendName:"cpu",kernelFunc:wde};function kde(e){let{inputs:t,backend:r,attrs:a}=e,{x:n,dy:i}=t,{strides:s,pad:o,filterShape:l}=a;Xe([n,i],"conv3dBackpropFilterV2");let u=_.computeStrides(n.shape),c=_.computeStrides(i.shape),d=B.computeConv3DInfo(n.shape,l,s,1,o),p=d.strideDepth,f=d.strideHeight,h=d.strideWidth,m=d.filterDepth,g=d.filterHeight,v=d.filterWidth,b=new _r(d.filterShape,"float32"),y=b.values,[w,x,k,C]=b.strides,E=r.data.get(i.dataId).values,[$,N,I,S]=c,A=r.data.get(n.dataId).values,[R,O,D,z]=u,U=d.padInfo.front,j=d.padInfo.left,G=d.padInfo.top;for(let L=0;L<m;++L){let V=Math.max(0,Math.ceil((U-L)/p)),H=Math.min(d.outDepth,(d.inDepth+U-L)/p),Y=L*w;for(let K=0;K<g;++K){let Z=Math.max(0,Math.ceil((G-K)/f)),le=Math.min(d.outHeight,(d.inHeight+G-K)/f),de=K*x+Y;for(let ie=0;ie<v;++ie){let ue=Math.max(0,Math.ceil((j-ie)/h)),pe=Math.min(d.outWidth,(d.inWidth+j-ie)/h),Se=ie*k+de;for(let ke=0;ke<d.inChannels;++ke){let oe=ke*C+Se;for(let me=0;me<d.outChannels;++me){let $e=0;for(let Me=0;Me<d.batchSize;++Me){let Oe=Me*R,he=Me*$;for(let Re=V;Re<H;++Re){let Ne=(L+Re*p-U)*O+Oe,je=Re*N+he;for(let ve=Z;ve<le;++ve){let Ge=(K+ve*f-G)*D+Ne,Ze=ve*I+je;for(let qe=ue;qe<pe;++qe){let Ae=(ie+qe*h-j)*z+Ge,rt=qe*S+Ze;$e+=A[Ae+ke]*E[rt+me]}}}}y[oe+me]=$e}}}}}return r.makeTensorInfo(b.shape,b.dtype,b.values)}var Ede={kernelName:Xb,backendName:"cpu",kernelFunc:kde};function Cde(e){let{inputs:t,backend:r,attrs:a}=e,{dy:n,filter:i}=t,{pad:s,strides:o,inputShape:l}=a;Xe([n],"conv3dBackpropInputV2");let u=_.computeStrides(n.shape),c=_.computeStrides(i.shape),d=B.computeConv3DInfo(l,i.shape,o,1,s),p=new _r(d.inShape,"float32"),f=p.values,[h,m,g,v]=p.strides,b=r.data.get(n.dataId).values,[y,w,x,k]=u,C=r.data.get(i.dataId).values,[E,$,N,I]=c,{batchSize:S,filterDepth:A,filterHeight:R,filterWidth:O,inChannels:D,inDepth:z,inHeight:U,inWidth:j,outChannels:G,outDepth:L,outHeight:V,outWidth:H,strideDepth:Y,strideHeight:K,strideWidth:Z}=d,le=A-1-d.padInfo.front,de=R-1-d.padInfo.top,ie=O-1-d.padInfo.left;for(let ue=0;ue<S;++ue)for(let pe=0;pe<D;++pe)for(let Se=0;Se<z;++Se){let ke=Se-le,oe=Math.max(0,Math.ceil(ke/Y)),me=Math.min(L,(A+ke)/Y);for(let $e=0;$e<U;++$e){let Me=$e-de,Oe=Math.max(0,Math.ceil(Me/K)),he=Math.min(V,(R+Me)/K);for(let Re=0;Re<j;++Re){let Ne=Re-ie,je=Math.max(0,Math.ceil(Ne/Z)),ve=Math.min(H,(O+Ne)/Z),Ge=0;for(let Ze=oe;Ze<me;++Ze){let qe=Ze*Y-ke;for(let Ae=Oe;Ae<he;++Ae){let rt=Ae*K-Me;for(let pt=je;pt<ve;++pt){let lr=pt*Z-Ne,ln=y*ue+w*Ze+x*Ae+k*pt,jn=E*(A-1-qe)+$*(R-1-rt)+N*(O-1-lr)+I*pe;for(let un=0;un<G;++un){let Gn=b[ln+un],Nr=C[jn+un];Ge+=Gn*Nr}}}}f[h*ue+m*Se+g*$e+v*Re+pe]=Ge}}}return r.makeTensorInfo(p.shape,p.dtype,p.values)}var Sde={kernelName:Yb,backendName:"cpu",kernelFunc:Cde},$de=Mt(Wl,e=>Math.cos(e)),Ide={kernelName:Wl,backendName:"cpu",kernelFunc:$de},Tde=Mt(Hl,e=>Math.cosh(e)),Nde={kernelName:Hl,backendName:"cpu",kernelFunc:Tde};function Ade(e){let{inputs:t,backend:r,attrs:a}=e,{image:n,boxes:i,boxInd:s}=t,{cropSize:o,method:l,extrapolationValue:u}=a,[c,d,p,f]=n.shape,h=i.shape[0],[m,g]=o,v=gt([h,m,g,f],"float32"),b=r.data.get(i.dataId).values,y=r.data.get(s.dataId).values,w=r.data.get(n.dataId).values,x=_.computeStrides(n.shape),k=_.computeStrides(v.shape);for(let C=0;C<h;C++){let E=C*4,$=b[E],N=b[E+1],I=b[E+2],S=b[E+3],A=y[C];if(A>=c)continue;let R=m>1?(I-$)*(d-1)/(m-1):0,O=g>1?(S-N)*(p-1)/(g-1):0;for(let D=0;D<m;D++){let z=m>1?$*(d-1)+D*R:.5*($+I)*(d-1);if(z<0||z>d-1){for(let U=0;U<g;U++)for(let j=0;j<f;j++){let G=j+U*k[2]+D*k[1]+C*k[0];v.values[G]=u}continue}if(l==="bilinear"){let U=Math.floor(z),j=Math.ceil(z),G=z-U;for(let L=0;L<g;L++){let V=g>1?N*(p-1)+L*O:.5*(N+S)*(p-1);if(V<0||V>p-1){for(let Z=0;Z<f;Z++){let le=Z+L*k[2]+D*k[1]+C*k[0];v.values[le]=u}continue}let H=Math.floor(V),Y=Math.ceil(V),K=V-H;for(let Z=0;Z<f;Z++){let le=Z+H*x[2]+U*x[1]+A*x[0],de=w[le];le=Z+Y*x[2]+U*x[1]+A*x[0];let ie=w[le];le=Z+H*x[2]+j*x[1]+A*x[0];let ue=w[le];le=Z+Y*x[2]+j*x[1]+A*x[0];let pe=w[le],Se=de+(ie-de)*K,ke=ue+(pe-ue)*K;le=Z+L*k[2]+D*k[1]+C*k[0],v.values[le]=Se+(ke-Se)*G}}}else for(let U=0;U<g;++U){let j=g>1?N*(p-1)+U*O:.5*(N+S)*(p-1);if(j<0||j>p-1){for(let V=0;V<f;V++){let H=V+U*k[2]+D*k[1]+C*k[0];v.values[H]=u}continue}let G=Math.round(j),L=Math.round(z);for(let V=0;V<f;V++){let H=V+G*x[2]+L*x[1]+A*x[0],Y=V+U*k[2]+D*k[1]+C*k[0];v.values[Y]=w[H]}}}}return r.makeTensorInfo(v.shape,v.dtype,v.values)}var _de={kernelName:vd,backendName:"cpu",kernelFunc:Ade};function Mde(e){let{inputs:t,backend:r,attrs:a}=e,{x:n}=t,{axis:i,exclusive:s,reverse:o}=a;Xe(n,"cumprod");let l=B.getAxesPermutation([i],n.shape.length),u=n;l!=null&&(u=Ln({inputs:{x:n},backend:r,attrs:{perm:l}}));let c=B.getInnerMostAxes(1,n.shape.length)[0];if(c!==u.shape.length-1)throw new Error(`backend.cumprod in CPU expects an inner-most axis=${u.shape.length-1} but got axis=${c}`);let d=Ca(u.dtype,"int32"),p=_.makeOnesTypedArray(_.sizeFromShape(u.shape),d),f=r.data.get(u.dataId).values,h=u.shape[u.shape.length-1],m=o?(v,b)=>v+h-b-1:(v,b)=>v+b;for(let v=0;v<f.length;v+=h)for(let b=0;b<h;b++){let y=m(v,b);if(b===0)p[y]=s?1:f[y];else{let w=m(v,b-1);p[y]=s?f[w]*p[w]:f[y]*p[w]}}let g=r.makeTensorInfo(u.shape,d,p);if(l!=null){let v=B.getUndoAxesPermutation(l),b=Ln({inputs:{x:g},backend:r,attrs:{perm:v}});return r.disposeIntermediateTensorInfo(g),r.disposeIntermediateTensorInfo(u),b}return g}var Rde={kernelName:gd,backendName:"cpu",kernelFunc:Mde};function Ode(e){let{inputs:t,backend:r,attrs:a}=e,{x:n}=t,{axis:i,exclusive:s,reverse:o}=a;Xe(n,"cumsum");let l=B.getAxesPermutation([i],n.shape.length),u=n;l!=null&&(u=Ln({inputs:{x:n},backend:r,attrs:{perm:l}}));let c=B.getInnerMostAxes(1,n.shape.length)[0];if(c!==u.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${u.shape.length-1} but got axis=${c}`);let d=Ca(u.dtype,"int32"),p=_.makeZerosTypedArray(_.sizeFromShape(u.shape),d),f=r.data.get(u.dataId).values,h=u.shape[u.shape.length-1],m=o?(v,b)=>v+h-b-1:(v,b)=>v+b;for(let v=0;v<f.length;v+=h)for(let b=0;b<h;b++){let y=m(v,b);if(b===0)p[y]=s?0:f[y];else{let w=m(v,b-1);p[y]=s?f[w]+p[w]:f[y]+p[w]}}let g=r.makeTensorInfo(u.shape,d,p);if(l!=null){let v=B.getUndoAxesPermutation(l),b=Ln({inputs:{x:g},backend:r,attrs:{perm:v}});return r.disposeIntermediateTensorInfo(g),r.disposeIntermediateTensorInfo(u),b}return g}var Pde={kernelName:Ul,backendName:"cpu",kernelFunc:Ode};function Dde(e){let{inputs:t,backend:r,attrs:a}=e,{x:n,weights:i}=t,{size:s,binaryOutput:o}=a;if(n.shape.length===1){let l=r.data.get(n.dataId).values,u=r.data.get(i.dataId).values,c=X$(l,u,i.dtype,i.shape,s);return r.makeTensorInfo([s],i.dtype,c)}else if(n.shape.length===2){let l=r.bufferSync(n),u=r.bufferSync(i),c=JL(l,u,s,o);return r.makeTensorInfo(c.shape,i.dtype,c.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${n.shape.length}.`)}var Fde={kernelName:Kb,backendName:"cpu",kernelFunc:Dde};function Lde(e){let{inputs:t,backend:r,attrs:a}=e,{x:n}=t,{blockSize:i,dataFormat:s}=a;_.assert(s==="NHWC",()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${s}`);let o=n.shape[0],l=n.shape[1],u=n.shape[2],c=n.shape[3],d=l*i,p=u*i,f=c/(i*i),h=r.data.get(n.dataId).values,m=new Float32Array(o*d*p*f),g=0;for(let v=0;v<o;++v)for(let b=0;b<d;++b){let y=Math.floor(b/i),w=b%i;for(let x=0;x<p;++x){let k=Math.floor(x/i),C=x%i,E=(w*i+C)*f;for(let $=0;$<f;++$){let N=$+E+c*(k+u*(y+l*v));m[g++]=h[N]}}}return r.makeTensorInfo([o,d,p,f],n.dtype,m)}var zde={kernelName:bd,backendName:"cpu",kernelFunc:Lde};function U3(e){let{inputs:t,backend:r,attrs:a}=e,{x:n,filter:i}=t,{strides:s,pad:o,dilations:l,dimRoundingMode:u}=a;Xe([n,i],"depthwiseConv2DNative");let c=_.computeStrides(n.shape),d=_.computeStrides(i.shape),p=l;p==null&&(p=[1,1]),_.assert(B.eitherStridesOrDilationsAreOne(s,p),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${s} and dilations '${p}'`);let f=B.computeConv2DInfo(n.shape,i.shape,s,p,o,u,!0),{filterHeight:h,filterWidth:m,dilationHeight:g,dilationWidth:v,padInfo:b}=f,y=b.left,w=b.top,x=f.outChannels/f.inChannels,k=new _r(f.outShape,n.dtype),C=r.data.get(n.dataId).values,E=r.data.get(i.dataId).values,$=k.values;for(let N=0;N<f.batchSize;++N){let I=N*c[0],S=N*k.strides[0];for(let A=0;A<f.outHeight;++A){let R=S+A*k.strides[1],O=A*f.strideHeight-w;for(let D=0;D<h;++D){let z=O+D*g;if(z<0||z>=f.inHeight)continue;let U=D*d[0],j=I+z*c[1];for(let G=0;G<f.outWidth;++G){let L=R+G*k.strides[2],V=G*f.strideWidth-y;for(let H=0;H<m;++H){let Y=V+H*v;if(Y<0||Y>=f.inWidth)continue;let K=U+H*d[1],Z=j+Y*f.inChannels,le=L,de=K;for(let ie=0;ie<f.inChannels;++ie){let ue=C[Z+ie];for(let pe=0;pe<x;++pe)$[le+pe]+=ue*E[de+pe];le+=x,de+=x}}}}}}return r.makeTensorInfo(k.shape,k.dtype,k.values)}var Bde={kernelName:jl,backendName:"cpu",kernelFunc:U3};function Vde(e){let{inputs:t,backend:r,attrs:a}=e,{x:n,dy:i}=t,{strides:s,dilations:o,pad:l,dimRoundingMode:u,filterShape:c}=a;Xe([n,i],"depthwiseConv2dNativeBackpropFilter");let d=B.computeConv2DInfo(n.shape,c,s,o,l,u,!0),{strideHeight:p,strideWidth:f,filterHeight:h,filterWidth:m}=d,g=new _r(d.filterShape,"float32"),v=d.padInfo.left,b=d.padInfo.top,y=d.outChannels/d.inChannels,w=r.data.get(n.dataId).values,x=new _r(n.shape,n.dtype,w),k=r.data.get(i.dataId).values,C=new _r(i.shape,i.dtype,k);for(let E=0;E<h;++E){let $=Math.max(0,Math.ceil((b-E)/p)),N=Math.min(d.outHeight,(d.inHeight+b-E)/p);for(let I=0;I<m;++I){let S=Math.max(0,Math.ceil((v-I)/f)),A=Math.min(d.outWidth,(d.inWidth+v-I)/f);for(let R=0;R<d.outChannels;++R){let O=Math.trunc(R/y),D=R%y,z=0;for(let U=0;U<d.batchSize;++U)for(let j=$;j<N;++j){let G=E+j*p-b;for(let L=S;L<A;++L){let V=I+L*f-v;z+=x.get(U,G,V,O)*C.get(U,j,L,R)}}g.set(z,E,I,O,D)}}}return r.makeTensorInfo(g.shape,g.dtype,g.values)}var Wde={kernelName:Zb,backendName:"cpu",kernelFunc:Vde};function Hde(e){let{inputs:t,backend:r,attrs:a}=e,{dy:n,filter:i}=t,{strides:s,dilations:o,pad:l,dimRoundingMode:u,inputShape:c}=a;Xe([n,i],"depthwiseConv2DNativeBackpropInput");let d=_.computeStrides(n.shape),p=_.computeStrides(i.shape),f=B.computeConv2DInfo(c,i.shape,s,o,l,u,!0),h=new _r(f.inShape,"float32"),m=h.values,[g,v,b]=h.strides,y=r.data.get(n.dataId).values,[w,x,k]=d,C=r.data.get(i.dataId).values,[E,$,N]=p,{batchSize:I,filterHeight:S,filterWidth:A,inChannels:R,inHeight:O,inWidth:D,outChannels:z,outHeight:U,outWidth:j,strideHeight:G,strideWidth:L}=f,V=S-1-f.padInfo.top,H=A-1-f.padInfo.left,Y=z/R;for(let K=0;K<I;++K)for(let Z=0;Z<R;++Z)for(let le=0;le<O;++le){let de=le-V,ie=Math.max(0,Math.ceil(de/G)),ue=Math.min(U,(S+de)/G);for(let pe=0;pe<D;++pe){let Se=pe-H,ke=Math.max(0,Math.ceil(Se/L)),oe=Math.min(j,(A+Se)/L),me=0;for(let $e=ie;$e<ue;++$e){let Me=$e*G-de;for(let Oe=ke;Oe<oe;++Oe){let he=Oe*L-Se,Re=w*K+x*$e+k*Oe,Ne=E*(S-1-Me)+$*(A-1-he)+N*Z;for(let je=0;je<Y;++je){let ve=Z*Y+je,Ge=y[Re+ve],Ze=C[Ne+je];me+=Ge*Ze}}}m[g*K+v*le+b*pe+Z]=me}}return r.makeTensorInfo(h.shape,h.dtype,h.values)}var Ude={kernelName:Qb,backendName:"cpu",kernelFunc:Hde};function jde(e){let{inputs:t,backend:r}=e,{x:a}=t,n=_.sizeFromShape(a.shape),i=r.data.get(a.dataId).values,s=gt([n,n],a.dtype),o=s.values;for(let u=0;u<i.length;u++)o[u*n+u]=i[u];let l=[...a.shape,...a.shape];return r.makeTensorInfo(l,s.dtype,s.values)}var Gde={kernelName:Jb,backendName:"cpu",kernelFunc:jde},qde={kernelName:Ph,backendName:"cpu",kernelFunc:({inputs:e,backend:t,attrs:r})=>{let{x:a,filter:n}=e,{strides:i,pad:s,dilations:o}=r,l=t,u=l.data.get(a.dataId).values,c=a.shape.length,d=l.data.get(n.dataId).values,p=n.shape.length,{batchSize:f,inHeight:h,inWidth:m,inChannels:g,outHeight:v,outWidth:b,padInfo:y,strideHeight:w,strideWidth:x,filterHeight:k,filterWidth:C,dilationHeight:E,dilationWidth:$,outShape:N}=B.computeDilation2DInfo(a.shape,n.shape,i,s,"NHWC",o),I=_.sizeFromShape(N),S=N.length,A=_.getArrayFromDType(a.dtype,I);for(let R=0;R<f;++R)for(let O=0;O<v;++O){let D=O*w-y.top;for(let z=0;z<b;++z){let U=z*x-y.left;for(let j=0;j<g;++j){let G=Number.MIN_SAFE_INTEGER;for(let V=0;V<k;++V){let H=D+V*E;if(H>=0&&H<h)for(let Y=0;Y<C;++Y){let K=U+Y*$;if(K>=0&&K<m){let Z=_.locToIndex([R,H,K,j],c,_.computeStrides(a.shape)),le=_.locToIndex([V,Y,j],p,_.computeStrides(n.shape)),de=u[Z]+d[le];de>G&&(G=de)}}}let L=_.locToIndex([R,O,z,j],S,_.computeStrides(N));A[L]=G}}}return{dataId:l.write(_.toTypedArray(A,a.dtype),N,a.dtype),shape:N,dtype:a.dtype}}},Xde={kernelName:Uv,backendName:"cpu",kernelFunc:({inputs:e,backend:t,attrs:r})=>{let{x:a,filter:n,dy:i}=e,{strides:s,pad:o,dilations:l}=r,u=t,c=_.toNestedArray(a.shape,u.data.get(a.dataId).values),d=_.toNestedArray(n.shape,u.data.get(n.dataId).values),{batchSize:p,inHeight:f,inWidth:h,inChannels:m,outHeight:g,outWidth:v,padInfo:b,strideHeight:y,strideWidth:w,filterHeight:x,filterWidth:k,dilationHeight:C,dilationWidth:E,outShape:$}=B.computeDilation2DInfo(a.shape,n.shape,s,o,"NHWC",l);_.assert(i.rank===$.length,()=>`Error in ${Uv}, dy must have the same rank as output ${$.length}, but got ${i.rank}`);let N=_.toNestedArray($,u.data.get(i.dataId).values),I=_.makeZerosNestedTypedArray(n.shape,n.dtype);for(let S=0;S<p;++S)for(let A=0;A<g;++A){let R=A*y-b.top;for(let O=0;O<v;++O){let D=O*w-b.left;for(let z=0;z<m;++z){let U=Number.MIN_SAFE_INTEGER,j=0,G=0;for(let L=0;L<x;++L){let V=R+L*C;if(V>=0&&V<f)for(let H=0;H<k;++H){let Y=D+H*E;if(Y>=0&&Y<h){let K=c[S][V][Y][z]+d[L][H][z];K>U&&(U=K,j=L,G=H)}}}I[j][G][z]+=N[S][A][O][z]}}}return{dataId:u.write(_.toTypedArray(I,a.dtype),n.shape,n.dtype),shape:n.shape,dtype:n.dtype}}},Yde={kernelName:Hv,backendName:"cpu",kernelFunc:({inputs:e,backend:t,attrs:r})=>{let{x:a,filter:n,dy:i}=e,{strides:s,pad:o,dilations:l}=r,u=t,c=_.toNestedArray(a.shape,u.data.get(a.dataId).values),d=_.toNestedArray(n.shape,u.data.get(n.dataId).values),{batchSize:p,inHeight:f,inWidth:h,inChannels:m,outHeight:g,outWidth:v,padInfo:b,strideHeight:y,strideWidth:w,filterHeight:x,filterWidth:k,dilationHeight:C,dilationWidth:E,outShape:$}=B.computeDilation2DInfo(a.shape,n.shape,s,o,"NHWC",l);_.assert(i.rank===$.length,()=>`Error in ${Hv}, dy must have the same rank as output ${$.length}, but got ${i.rank}`);let N=_.toNestedArray($,u.data.get(i.dataId).values),I=_.makeZerosNestedTypedArray(a.shape,a.dtype);for(let S=0;S<p;++S)for(let A=0;A<g;++A){let R=A*y-b.top;for(let O=0;O<v;++O){let D=O*w-b.left;for(let z=0;z<m;++z){let U=Number.MIN_SAFE_INTEGER,j=R<0?0:R,G=D<0?0:D;for(let L=0;L<x;++L){let V=R+L*C;if(V>=0&&V<f)for(let H=0;H<k;++H){let Y=D+H*E;if(Y>=0&&Y<h){let K=c[S][V][Y][z]+d[L][H][z];K>U&&(U=K,j=V,G=Y)}}}I[S][j][G][z]+=N[S][A][O][z]}}}return{dataId:u.write(_.toTypedArray(I,a.dtype),a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}};function $m(e){let{inputs:t,backend:r,attrs:a}=e,{x:n}=t,{axis:i,keepDims:s}=a;Xe(n,"sum");let o;n.dtype==="bool"?o=co({inputs:{x:n},backend:r,attrs:{dtype:"int32"}}):o=Ni({inputs:{x:n},backend:r});let l=o.shape.length,u=_.parseAxisParam(i,o.shape),c=B.getAxesPermutation(u,l),d=u,p=o;c!=null&&(p=Ln({inputs:{x:o},backend:r,attrs:{perm:c}}),d=B.getInnerMostAxes(d.length,l)),B.assertAxesAreInnerMostDims("sum",d,p.shape.length);let[f,h]=B.computeOutAndReduceShapes(p.shape,d),m=B.upcastType(p.dtype,"int32"),g=cb(r,f,m),v=_.sizeFromShape(h),b=r.data.get(g.dataId).values,y=r.data.get(p.dataId).values;for(let w=0;w<b.length;++w){let x=w*v,k=0;for(let C=0;C<v;++C)k+=y[x+C];b[w]=k}if(s){let w=B.expandShapeToKeepDim(g.shape,u),x=g;g=Ht({inputs:{x:g},backend:r,attrs:{shape:w}}),r.disposeIntermediateTensorInfo(x)}return r.disposeIntermediateTensorInfo(o),c!=null&&r.disposeIntermediateTensorInfo(p),g}var Kde={kernelName:Cu,backendName:"cpu",kernelFunc:$m};function Zde(e){let{inputs:t,backend:r,attrs:a}=e,{equation:n}=a,i=t,{allDims:s,summedDims:o,idDims:l}=B.decodeEinsumEquation(n,i.length);B.checkEinsumDimSizes(s.length,l,i);let{path:u,steps:c}=B.getEinsumComputePath(o,l),d=c.length,p=null,f=s.length,h=[];for(let m=0;m<d;++m){for(let g of c[m]){let{permutationIndices:v,expandDims:b}=B.getEinsumPermutation(f,l[g]),y;B.isIdentityPermutation(v)?y=i[g]:(y=Ln({inputs:{x:i[g]},backend:r,attrs:{perm:v}}),h.push(y));let w=y.shape.slice();for(let x=0;x<b.length;++x)w.splice(b[x],0,1);_.arraysEqual(y.shape,w)||(y=Ht({inputs:{x:y},backend:r,attrs:{shape:w}}),h.push(y)),p===null?p=y:(p=x0({inputs:{a:y,b:p},backend:r}),h.push(p))}m<d-1&&(u[m]>=0&&(p=$m({inputs:{x:p},backend:r,attrs:{axis:u[m]-(s.length-f),keepDims:!1}}),h.push(p)),f--)}for(let m of h)m!==p&&r.disposeIntermediateTensorInfo(m);return p}var Qde={kernelName:ey,backendName:"cpu",kernelFunc:Zde};function Jde(e){let{inputs:t,backend:r}=e,{dy:a,y:n}=t;Xe([a,n],"eluGrad");let i=new Float32Array(_.sizeFromShape(n.shape)),s=r.data.get(n.dataId).values,o=r.data.get(a.dataId).values;for(let l=0;l<s.length;++l){let u=s[l];u>=1?i[l]=o[l]:i[l]=o[l]*(u+1)}return r.makeTensorInfo(n.shape,"float32",i)}var epe={kernelName:ty,backendName:"cpu",kernelFunc:Jde},tpe=B.ERF_P,rpe=B.ERF_A1,npe=B.ERF_A2,ape=B.ERF_A3,ipe=B.ERF_A4,spe=B.ERF_A5,ope=Mt(yd,e=>{let t=Math.sign(e),r=Math.abs(e),a=1/(1+tpe*r);return t*(1-((((spe*a+ipe)*a+ape)*a+npe)*a+rpe)*a*Math.exp(-r*r))}),lpe={kernelName:yd,backendName:"cpu",kernelFunc:ope};function fb(e){let{inputs:t,backend:r,attrs:a}=e,{input:n}=t,{dim:i}=a,s=n.shape.length,o=n.shape.slice(),l=i;return i<0&&(_.assert(-(s+1)<=i,()=>`Axis must be in the interval [${-(s+1)}, ${s}]`),l=s+i+1),o.splice(l,0,1),Ht({inputs:{x:n},backend:r,attrs:{shape:o}})}var upe={kernelName:xd,backendName:"cpu",kernelFunc:fb},cpe=Tr((e,t)=>e/t),rI=Ur(Gl,cpe),Pk={kernelName:Gl,backendName:"cpu",kernelFunc:rI};function j3(e,t,r){let a=e.shape,n=a[0],i=a[1],s=r.data.get(e.dataId),o=s.complexTensorInfos.real,l=s.complexTensorInfos.imag,u=[n,i],c=_.sizeFromShape(u),d=_.getTypedArrayFromDType("float32",c),p=_.getTypedArrayFromDType("float32",c);for(let g=0;g<n;g++){let v=Cl({inputs:{x:o},backend:r,attrs:{begin:[g,0],size:[1,i]}}),b=Cl({inputs:{x:l},backend:r,attrs:{begin:[g,0],size:[1,i]}}),y=Qn({inputs:{real:v,imag:b},backend:r}),{real:w,imag:x}=dpe(y,t,r),k=B.mergeRealAndImagArrays(w,x);for(let C=0;C<i;C++){let E=B.getComplexWithIndex(k,C);d[g*i+C]=E.real,p[g*i+C]=E.imag}r.disposeIntermediateTensorInfo(v),r.disposeIntermediateTensorInfo(b),r.disposeIntermediateTensorInfo(y)}let f=r.makeTensorInfo(u,"float32",d),h=r.makeTensorInfo(u,"float32",p),m=Qn({inputs:{real:f,imag:h},backend:r});return r.disposeIntermediateTensorInfo(f),r.disposeIntermediateTensorInfo(h),m}function dpe(e,t,r){let a=_.sizeFromShape(e.shape),n=r.data.get(e.dataId),i=r.data.get(n.complexTensorInfos.real.dataId).values,s=r.data.get(n.complexTensorInfos.imag.dataId).values;if(ppe(a)){let o=Dk(i,s,a,t,r),l=[e.shape[0],e.shape[1]];if(t){let u=r.makeTensorInfo(l,"float32",o.real),c=r.makeTensorInfo(l,"float32",o.imag),d=r.makeTensorInfo([],"float32",_.createScalarValue(a,"float32")),p=Ni({inputs:{x:d},backend:r}),f=Pk.kernelFunc({inputs:{a:u,b:d},backend:r}),h=Pk.kernelFunc({inputs:{a:c,b:p},backend:r}),m=r.data.get(f.dataId).values,g=r.data.get(h.dataId).values;return r.disposeIntermediateTensorInfo(u),r.disposeIntermediateTensorInfo(c),r.disposeIntermediateTensorInfo(d),r.disposeIntermediateTensorInfo(p),r.disposeIntermediateTensorInfo(f),r.disposeIntermediateTensorInfo(h),{real:m,imag:g}}return o}else{let o=B.mergeRealAndImagArrays(i,s),l=fpe(o,a,t);return B.splitRealAndImagArrays(l)}}function ppe(e){return(e&e-1)===0}function Dk(e,t,r,a,n){if(r===1)return{real:e,imag:t};let i=B.mergeRealAndImagArrays(e,t),s=r/2,o=B.complexWithEvenIndex(i),l=o.real,u=o.imag,c=[l.length],d=n.makeTensorInfo(c,"float32",l),p=n.makeTensorInfo(c,"float32",u),f=Qn({inputs:{real:d,imag:p},backend:n}),h=B.complexWithOddIndex(i),m=h.real,g=h.imag,v=[m.length],b=n.makeTensorInfo(v,"float32",m),y=n.makeTensorInfo(v,"float32",g),w=Qn({inputs:{real:b,imag:y},backend:n}),x=Dk(l,u,s,a,n),k=x.real,C=x.imag,E=[k.length],$=n.makeTensorInfo(E,"float32",k),N=n.makeTensorInfo(E,"float32",C),I=Qn({inputs:{real:$,imag:N},backend:n}),S=Dk(m,g,s,a,n),A=S.real,R=S.imag,O=[A.length],D=n.makeTensorInfo(O,"float32",A),z=n.makeTensorInfo(O,"float32",R),U=Qn({inputs:{real:D,imag:z},backend:n}),j=B.exponents(r,a),G=[j.real.length],L=n.makeTensorInfo(G,"float32",j.real),V=n.makeTensorInfo(G,"float32",j.imag),H=Qn({inputs:{real:L,imag:V},backend:n}),Y=x0({inputs:{a:H,b:U},backend:n}),K=Uc({inputs:{a:I,b:Y},backend:n}),Z=eI({inputs:{a:I,b:Y},backend:n}),le=El({inputs:{input:K},backend:n}),de=El({inputs:{input:Z},backend:n}),ie=jc({inputs:{input:K},backend:n}),ue=jc({inputs:{input:Z},backend:n}),pe=Gc({inputs:[le,de],backend:n,attrs:{axis:0}}),Se=Gc({inputs:[ie,ue],backend:n,attrs:{axis:0}}),ke=n.data.get(pe.dataId).values,oe=n.data.get(Se.dataId).values;return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(w),n.disposeIntermediateTensorInfo($),n.disposeIntermediateTensorInfo(N),n.disposeIntermediateTensorInfo(I),n.disposeIntermediateTensorInfo(D),n.disposeIntermediateTensorInfo(z),n.disposeIntermediateTensorInfo(U),n.disposeIntermediateTensorInfo(L),n.disposeIntermediateTensorInfo(V),n.disposeIntermediateTensorInfo(H),n.disposeIntermediateTensorInfo(Y),n.disposeIntermediateTensorInfo(K),n.disposeIntermediateTensorInfo(Z),n.disposeIntermediateTensorInfo(le),n.disposeIntermediateTensorInfo(ie),n.disposeIntermediateTensorInfo(de),n.disposeIntermediateTensorInfo(ue),n.disposeIntermediateTensorInfo(pe),n.disposeIntermediateTensorInfo(Se),{real:ke,imag:oe}}function fpe(e,t,r){let a=new Float32Array(t*2);for(let n=0;n<t;n++){let i=0,s=0;for(let o=0;o<t;o++){let l=B.exponent(n*o,t,r),u=B.getComplexWithIndex(e,o);i+=u.real*l.real-u.imag*l.imag,s+=u.real*l.imag+u.imag*l.real}r&&(i/=t,s/=t),B.assignToTypedArray(a,i,s,n)}return a}function hpe(e){let{inputs:t,backend:r}=e,{input:a}=t,n=_.sizeFromShape(a.shape),i=a.shape[a.shape.length-1],s=n/i,o=Ht({inputs:{x:a},backend:r,attrs:{shape:[s,i]}}),l=j3(o,!1,r),u=Ht({inputs:{x:l},backend:r,attrs:{shape:a.shape}});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(l),u}var mpe={kernelName:ry,backendName:"cpu",kernelFunc:hpe};function nI(e){let{backend:t,attrs:r}=e,{shape:a,value:n,dtype:i}=r,s=i||_.inferDtype(n),o=_.getArrayFromDType(s,_.sizeFromShape(a));return vpe(o,n),t.makeTensorInfo(a,s,o)}var gpe={kernelName:Dh,backendName:"cpu",kernelFunc:nI};function vpe(e,t,r){e.fill(t)}var bpe={kernelName:Ed,backendName:"cpu",kernelFunc:({inputs:e,attrs:t,backend:r})=>{let{image:a}=e,n=r,i=_.getTypedArrayFromDType(a.dtype,_.sizeFromShape(a.shape)),[s,o,l,u]=a.shape,c=n.data.get(a.dataId).values;for(let d=0;d<s;d++){let p=d*l*o*u;for(let f=0;f<o;f++){let h=f*(l*u);for(let m=0;m<l;m++){let g=m*u;for(let v=0;v<u;v++){let b=Math.round(l-m-1),y=p+h+g+v,w=c[y];if(b>=0&&b<l){let x=b*u,k=p+h+x+v;w=c[k]}i[y]=w}}}}return{dataId:n.write(i,a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}},ype=Tr((e,t)=>Math.floor(e/t)),wpe=Ur(Kl,ype,null,"int32"),xpe={kernelName:Kl,backendName:"cpu",kernelFunc:wpe};function kpe(e){let{inputs:t,backend:r,attrs:a}=e,{x:n,filter:i,bias:s,preluActivationWeights:o}=t,{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:p,activation:f,leakyreluAlpha:h}=a,m=H3({inputs:{x:n,filter:i},backend:r,attrs:{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:p}});if(s){let g=m;if(c==="NCHW"&&s.shape.length===1&&s.shape[0]!==1){let v=Ht({inputs:{x:s},backend:r,attrs:{shape:[s.shape[0],1,1]}});m=Uc({inputs:{a:m,b:v},backend:r}),r.disposeIntermediateTensorInfo(v)}else m=Uc({inputs:{a:m,b:s},backend:r});r.disposeIntermediateTensorInfo(g)}if(f){let g=m;if(c==="NCHW"&&f==="prelu"&&o.shape.length===1&&o.shape[0]!==1){let v=Ht({inputs:{x:o},backend:r,attrs:{shape:[o.shape[0],1,1]}});m=pb(r,m,f,v,h),r.disposeIntermediateTensorInfo(v)}else m=pb(r,m,f,o,h);r.disposeIntermediateTensorInfo(g)}return m}var Epe={kernelName:dl,backendName:"cpu",kernelFunc:kpe};function Cpe(e){let{inputs:t,backend:r,attrs:a}=e,{x:n,filter:i,bias:s,preluActivationWeights:o}=t,{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:p,activation:f,leakyreluAlpha:h}=a,m=U3({inputs:{x:n,filter:i},backend:r,attrs:{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:p}});if(s){let g=m;m=Uc({inputs:{a:m,b:s},backend:r}),r.disposeIntermediateTensorInfo(g)}if(f){let g=m;m=pb(r,m,f,o,h),r.disposeIntermediateTensorInfo(g)}return m}var Spe={kernelName:pl,backendName:"cpu",kernelFunc:Cpe};function $pe(e){let{inputs:t,backend:r}=e,{params:a,indices:n}=t,i=_.sizeFromShape(a.shape),s=n.shape,o=s[s.length-1],[l,u,c,d]=B.prepareAndValidate(a,n);if(u===0)return r.makeTensorInfo(l,a.dtype,[]);let p=r.data.get(n.dataId).values,f=r.bufferSync(a),h=o3(p,f,a.dtype,u,o,c,d,a.shape,i);return r.makeTensorInfo(l,a.dtype,h.values)}var Ipe={kernelName:Sd,backendName:"cpu",kernelFunc:$pe};function Tpe(e){let{inputs:t,backend:r,attrs:a}=e,{x:n,indices:i}=t,{axis:s,batchDims:o}=a;Xe([n,i],"gatherV2");let l=_.parseAxisParam(s,n.shape)[0],u=r.data.get(i.dataId).values,c=n.shape[l];for(let w=0;w<u.length;++w){let x=u[w];_.assert(x<=c-1&&x>=0,()=>`GatherV2: the index value ${x} is not in [0, ${c-1}]`)}let d=o;o==null&&(d=0);let p=_.sizeFromShape(i.shape),f=B.segment_util.collectGatherOpShapeInfo(n,i,l,d),h=Ht({inputs:{x:n},backend:r,attrs:{shape:[f.batchSize,f.outerSize,f.dimSize,f.sliceSize]}}),m=Ht({inputs:{x:i},backend:r,attrs:{shape:[f.batchSize,p/f.batchSize]}}),g=[f.batchSize,f.outerSize,p/f.batchSize,f.sliceSize],v=r.bufferSync(m),b=r.bufferSync(h),y=l3(b,v,g);return r.disposeIntermediateTensorInfo(h),r.disposeIntermediateTensorInfo(m),r.makeTensorInfo(f.outputShape,y.dtype,y.values)}var Npe={kernelName:Cd,backendName:"cpu",kernelFunc:Tpe};function Ape(e){let{inputs:t,backend:r}=e,{input:a}=t,n=_.sizeFromShape(a.shape),i=a.shape[a.shape.length-1],s=n/i,o=Ht({inputs:{x:a},backend:r,attrs:{shape:[s,i]}}),l=j3(o,!0,r),u=Ht({inputs:{x:l},backend:r,attrs:{shape:a.shape}});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(l),u}var _pe={kernelName:ny,backendName:"cpu",kernelFunc:Ape},Mpe=Mt(Id,e=>Number.isFinite(e)?1:0,"bool"),Rpe={kernelName:Id,backendName:"cpu",kernelFunc:Mpe},Ope=Mt(Td,e=>Math.abs(e)===1/0?1:0,"bool"),Ppe={kernelName:Td,backendName:"cpu",kernelFunc:Ope},Dpe=Mt(Nd,e=>Number.isNaN(e)?1:0,"bool"),Fpe={kernelName:Nd,backendName:"cpu",kernelFunc:Dpe};function Lpe(e){let{backend:t,attrs:r}=e,{start:a,stop:n,num:i}=r,s=f3(a,n,i);return t.makeTensorInfo([s.length],"float32",s)}var zpe={kernelName:iy,backendName:"cpu",kernelFunc:Lpe},Bpe=Mt(Md,e=>Math.log1p(e)),Vpe={kernelName:Md,backendName:"cpu",kernelFunc:Bpe},Wpe=Tr((e,t)=>e&&t),Hpe=Ur(Rd,Wpe,null,"bool"),Upe={kernelName:Rd,backendName:"cpu",kernelFunc:Hpe},jpe=Mt(Fh,e=>e?0:1,"bool"),Gpe={kernelName:Fh,backendName:"cpu",kernelFunc:jpe},qpe=Tr((e,t)=>e||t),Xpe=Ur(Lh,qpe,null,"bool"),Ype={kernelName:Lh,backendName:"cpu",kernelFunc:Xpe};function Kpe(e){let{inputs:t,backend:r,attrs:a}=e,{x:n}=t,{depthRadius:i,bias:s,alpha:o,beta:l}=a;Xe(n,"LRN");let u=n.shape[3],c=u-1,d=r.data.get(n.dataId).values,p=_.sizeFromShape(n.shape),f=new Float32Array(p);function h(m){let g=m%u,v=m-g+Math.max(0,g-i),b=m-g+Math.min(g+i,c),y=0;for(;v<=b;v++){let w=d[v];y+=w*w}return y}for(let m=0;m<p;m++){let g=h(m),v=d[m]*Math.pow(s+o*g,-l);f[m]=v}return r.makeTensorInfo(n.shape,n.dtype,f)}var Zpe={kernelName:zh,backendName:"cpu",kernelFunc:Kpe};function Qpe(e){let{inputs:t,backend:r,attrs:a}=e,{x:n,y:i,dy:s}=t,{depthRadius:o,bias:l,alpha:u,beta:c}=a;Xe(s,"LRNGrad");let d=_.sizeFromShape(s.shape),p=s.shape[3],f=r.data.get(s.dataId).values,h=r.data.get(n.dataId).values,m=r.data.get(i.dataId).values,g=new Float32Array(d),v=d;for(let b=0;b<v;b++){let y=b%p,w=b-y+Math.max(0,y-o),x=b-y+Math.min(p,y+o+1),k=0;for(let C=w;C<x;C++)k+=Math.pow(h[C],2);k=u*k+l;for(let C=w;C<x;C++){let E=-2*u*c*h[C]*m[b]/k;b===C&&(E+=Math.pow(k,-c)),E*=f[b],g[C]+=E}}return r.makeTensorInfo(s.shape,n.dtype,g)}var Jpe={kernelName:sy,backendName:"cpu",kernelFunc:Qpe};function G3(e){let{inputs:t,backend:r,attrs:a}=e,{x:n}=t,{reductionIndices:i,keepDims:s}=a,o=r,l=n.shape,u=l.length,c=_.parseAxisParam(i,l),d=c,p=B.getAxesPermutation(d,u),f=o.data.get(n.dataId).values;if(p!=null){let w=new Array(u);for(let x=0;x<w.length;x++)w[x]=l[p[x]];f=Z$(f,l,n.dtype,p,w),d=B.getInnerMostAxes(d.length,u),l=w}Xe(n,"max"),B.assertAxesAreInnerMostDims("max",d,u);let[h,m]=B.computeOutAndReduceShapes(l,d),g=_.sizeFromShape(m),v=m3(f,g,h,n.dtype),b=o.write(v,h,n.dtype),y=h;return s&&(y=B.expandShapeToKeepDim(h,c)),{dataId:b,shape:y,dtype:n.dtype}}var efe={kernelName:ru,backendName:"cpu",kernelFunc:G3};function tfe(e){let{inputs:t,backend:r,attrs:a}=e,{x:n}=t;Xe(n,"maxPool");let{filterSize:i,strides:s,pad:o,dimRoundingMode:l}=a,u=1;_.assert(B.eitherStridesOrDilationsAreOne(s,u),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${s} and dilations '${u}'`);let c=B.computePool2DInfo(n.shape,i,s,u,o,l),d;if(c.filterWidth===1&&c.filterHeight===1&&_.arraysEqual(c.inShape,c.outShape))d=Ni({inputs:{x:n},backend:r});else{let p=r.data.get(n.dataId).values,f=_.computeStrides(n.shape),h=tI(p,n.shape,n.dtype,f,c,"max");d=r.makeTensorInfo(c.outShape,n.dtype,h.values)}return d}var rfe={kernelName:au,backendName:"cpu",kernelFunc:tfe};function nfe(e){let{inputs:t,backend:r,attrs:a}=e,{x:n}=t,{filterSize:i,strides:s,pad:o,dimRoundingMode:l,dataFormat:u}=a;Xe(n,"maxPool3d");let c=B.computePool3DInfo(n.shape,i,s,1,o,l,u),d=r.data.get(n.dataId).values,p=W3(d,n.shape,n.dtype,_.computeStrides(n.shape),c,"max");return r.makeTensorInfo(p.shape,"float32",p.values)}var afe={kernelName:Bh,backendName:"cpu",kernelFunc:nfe};function ife(e){let{inputs:t,backend:r,attrs:a}=e,{dy:n,input:i}=t,{filterSize:s,strides:o,pad:l,dimRoundingMode:u}=a;Xe([n,i],"maxPool3DGrad");let c=B.computePool3DInfo(i.shape,s,o,1,l,u),d=r.bufferSync(i),p=Gce(d,c),f=c.strideDepth,h=c.strideHeight,m=c.strideWidth,g=c.dilationDepth,v=c.dilationHeight,b=c.dilationWidth,y=c.effectiveFilterDepth,w=c.effectiveFilterHeight,x=c.effectiveFilterWidth,k=y-1-c.padInfo.front,C=x-1-c.padInfo.left,E=w-1-c.padInfo.top,$=gt(i.shape,"float32"),N=r.bufferSync(n);for(let I=0;I<c.batchSize;++I)for(let S=0;S<c.inChannels;++S)for(let A=0;A<c.inDepth;++A)for(let R=0;R<c.inHeight;++R)for(let O=0;O<c.inWidth;++O){let D=A-k,z=R-E,U=O-C,j=0;for(let G=0;G<y;G+=g){let L=(D+G)/f;if(!(L<0||L>=c.outDepth||Math.floor(L)!==L))for(let V=0;V<w;V+=v){let H=(z+V)/h;if(!(H<0||H>=c.outHeight||Math.floor(H)!==H))for(let Y=0;Y<x;Y+=b){let K=(U+Y)/m;if(K<0||K>=c.outWidth||Math.floor(K)!==K)continue;let Z=y*w*x-1-p.get(I,L,H,K,S),le=G*w*x+V*x+Y,de=Z===le?1:0;de!==0&&(j+=N.get(I,L,H,K,S)*de)}}}$.set(j,I,A,R,O,S)}return r.makeTensorInfo($.shape,$.dtype,$.values)}var sfe={kernelName:ly,backendName:"cpu",kernelFunc:ife};function ofe(e){let{inputs:t,backend:r,attrs:a}=e,{dy:n,input:i,output:s}=t,o=i;Xe([i,s],"maxPoolGrad");let{filterSize:l,strides:u,pad:c,dimRoundingMode:d}=a,p=B.computePool2DInfo(o.shape,l,u,1,c,d),f=r.data.get(o.dataId).values,h=gt(p.outShape,o.dtype,V3(f,o.shape,o.dtype,p).values),m=p.strideHeight,g=p.strideWidth,v=p.dilationHeight,b=p.dilationWidth,y=p.effectiveFilterHeight,w=p.effectiveFilterWidth,x=w-1-p.padInfo.left,k=y-1-p.padInfo.top,C=gt(o.shape,"float32"),E=r.data.get(n.dataId).values,$=gt(n.shape,"float32",E);for(let N=0;N<p.batchSize;++N)for(let I=0;I<p.inChannels;++I)for(let S=0;S<p.inHeight;++S)for(let A=0;A<p.inWidth;++A){let R=S-k,O=A-x,D=0;for(let z=0;z<y;z+=v){let U=(R+z)/m;if(!(U<0||U>=p.outHeight||Math.floor(U)!==U))for(let j=0;j<w;j+=b){let G=(O+j)/g;if(G<0||G>=p.outWidth||Math.floor(G)!==G)continue;let L=y*w-1-h.get(N,U,G,I),V=z*w+j,H=L===V?1:0;H!==0&&(D+=$.get(N,U,G,I)*H)}}C.set(D,N,S,A,I)}return r.makeTensorInfo(C.shape,C.dtype,C.values)}var lfe={kernelName:oy,backendName:"cpu",kernelFunc:ofe};function ufe(e,t,r,a,n){let i=_.computeStrides(t),s=tI(e,t,r,i,n,"max"),o=V3(e,t,r,n,!0,a);return[s.values,o.values]}var cfe={kernelName:uy,backendName:"cpu",kernelFunc:({inputs:e,attrs:t,backend:r})=>{let{x:a}=e,{filterSize:n,strides:i,pad:s,includeBatchInIndex:o}=t,l=r;Xe(a,"MaxPoolWithArgmax");let u=l.data.get(a.dataId).values,c=B.computePool2DInfo(a.shape,n,i,[1,1],s),[d,p]=ufe(u,a.shape,a.dtype,o,c),f=l.write(d,c.outShape,a.dtype),h=l.write(p,c.outShape,a.dtype);return[{dataId:f,shape:c.outShape,dtype:a.dtype},{dataId:h,shape:c.outShape,dtype:"int32"}]}};function dfe(e){let{inputs:t,backend:r,attrs:a}=e,{x:n}=t,{axis:i,keepDims:s}=a,o=_.parseAxisParam(i,n.shape),l=B.computeOutAndReduceShapes(n.shape,o)[1],u=_.sizeFromShape(l),c=[],d=r.makeTensorInfo([],"float32",new Float32Array([u]));c.push(d);let p=co({inputs:{x:n},backend:r,attrs:{dtype:"float32"}});c.push(p);let f=rI({inputs:{a:p,b:d},backend:r});c.push(f);let h=$m({inputs:{x:f},backend:r,attrs:{axis:i,keepDims:s}});return c.forEach(m=>r.disposeIntermediateTensorInfo(m)),h}var pfe={kernelName:iu,backendName:"cpu",kernelFunc:dfe};function ffe(e){let{inputs:t,backend:r,attrs:a}=e,{x:n}=t,{axis:i,keepDims:s}=a;Xe(n,"min");let o=_.parseAxisParam(i,n.shape),l=o,u=B.getAxesPermutation(l,n.shape.length),c=n;u!=null&&(c=Ln({inputs:{x:n},backend:r,attrs:{perm:u}}),l=B.getInnerMostAxes(l.length,n.shape.length)),B.assertAxesAreInnerMostDims("min",l,c.shape.length);let[d,p]=B.computeOutAndReduceShapes(c.shape,l),f=_.sizeFromShape(p),h=_.makeZerosTypedArray(_.sizeFromShape(d),c.dtype),m=r.data.get(c.dataId).values;for(let v=0;v<h.length;++v){let b=v*f,y=m[b];for(let w=0;w<f;++w){let x=m[b+w];(Number.isNaN(x)||x<y)&&(y=x)}h[v]=y}u!=null&&r.disposeIntermediateTensorInfo(c);let g=r.makeTensorInfo(d,c.dtype,h);if(s){let v=B.expandShapeToKeepDim(d,o),b=Ht({inputs:{x:g},backend:r,attrs:{shape:v}});return r.disposeIntermediateTensorInfo(g),b}return g}var hfe={kernelName:su,backendName:"cpu",kernelFunc:ffe};function mfe(e){let{inputs:t,backend:r,attrs:a}=e,{x:n}=t,{paddings:i,mode:s}=a;Xe(n,"mirrorPad");let o=i.map((b,y)=>b[0]+n.shape[y]+b[1]),l=i.map(b=>b[0]),u=i.map((b,y)=>b[0]+n.shape[y]),c=s==="reflect"?0:1,d=r.data.get(n.dataId).values,p=n.shape.length,f=_.computeStrides(n.shape),h=_.sizeFromShape(o),m=o.length,g=_.computeStrides(o),v=_.getTypedArrayFromDType(n.dtype,h);for(let b=0;b<h;b++){let y=_.indexToLoc(b,m,g);for(let x=0;x<m;x++)y[x]<l[x]?y[x]=l[x]*2-y[x]-c:y[x]>=u[x]&&(y[x]=(u[x]-1)*2-y[x]+c);y=y.map((x,k)=>x-l[k]);let w=_.locToIndex(y,p,f);v[b]=d[w]}return{dataId:r.write(v,o,n.dtype),shape:o,dtype:n.dtype}}var gfe={kernelName:lu,backendName:"cpu",kernelFunc:mfe},vfe=Tr((e,t)=>{let r=e%t;return e<0&&t<0||e>=0&&t>=0?r:(r+t)%t}),bfe=Ur(Od,vfe),yfe={kernelName:Od,backendName:"cpu",kernelFunc:bfe},wfe=Ml(LO());function q3(e){let{inputs:t,backend:r,attrs:a}=e,{logits:n}=t,{dim:i}=a,s=n.shape.length,o=i;if(o===-1&&(o=s-1),o!==s-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${s} and dim was ${o}`);let l=_.parseAxisParam([o],n.shape),u=G3({inputs:{x:n},backend:r,attrs:{reductionIndices:l,keepDims:!1}}),c=B.expandShapeToKeepDim(u.shape,l),d=Ht({inputs:{x:u},backend:r,attrs:{shape:c}}),p=eI({inputs:{a:n,b:d},backend:r}),f=a3({inputs:{x:p},backend:r}),h=$m({inputs:{x:f},backend:r,attrs:{axis:l,keepDims:!1}}),m=Ht({inputs:{x:h},backend:r,attrs:{shape:c}}),g=rI({inputs:{a:f,b:m},backend:r});return r.disposeIntermediateTensorInfo(u),r.disposeIntermediateTensorInfo(d),r.disposeIntermediateTensorInfo(p),r.disposeIntermediateTensorInfo(f),r.disposeIntermediateTensorInfo(h),r.disposeIntermediateTensorInfo(m),g}var xfe={kernelName:Su,backendName:"cpu",kernelFunc:q3};function kfe(e){let{inputs:t,backend:r,attrs:a}=e,{logits:n}=t,{numSamples:i,seed:s,normalized:o}=a;Xe(n,"multinomial");let l=o?n:q3({inputs:{logits:n},backend:r,attrs:{dim:-1}}),u=l.shape[0],c=l.shape[1],d=r.data.get(l.dataId).values,p=[u,i],f=_.makeZerosTypedArray(_.sizeFromShape(p),"int32");for(let h=0;h<u;++h){let m=h*c,g=new Float32Array(c-1);g[0]=d[m];for(let y=1;y<g.length;++y)g[y]=g[y-1]+d[m+y];let v=wfe.alea(s.toString()),b=h*i;for(let y=0;y<i;++y){let w=v();f[b+y]=g.length;for(let x=0;x<g.length;x++)if(w<g[x]){f[b+y]=x;break}}}return o||r.disposeIntermediateTensorInfo(l),r.makeTensorInfo(p,"int32",f)}var Efe={kernelName:cy,backendName:"cpu",kernelFunc:kfe},Cfe=Oi.nonMaxSuppressionV3Impl;function Sfe(e){let{inputs:t,backend:r,attrs:a}=e,{boxes:n,scores:i}=t,{maxOutputSize:s,iouThreshold:o,scoreThreshold:l}=a;Xe(n,"NonMaxSuppression");let u=r.data.get(n.dataId).values,c=r.data.get(i.dataId).values,{selectedIndices:d}=Cfe(u,c,s,o,l);return r.makeTensorInfo([d.length],"int32",new Int32Array(d))}var $fe={kernelName:Fd,backendName:"cpu",kernelFunc:Sfe},Ife=Oi.nonMaxSuppressionV4Impl;function Tfe(e){let{inputs:t,backend:r,attrs:a}=e,{boxes:n,scores:i}=t,{maxOutputSize:s,iouThreshold:o,scoreThreshold:l,padToMaxOutputSize:u}=a;Xe(n,"NonMaxSuppressionPadded");let c=r.data.get(n.dataId).values,d=r.data.get(i.dataId).values,{selectedIndices:p,validOutputs:f}=Ife(c,d,s,o,l,u);return[r.makeTensorInfo([p.length],"int32",new Int32Array(p)),r.makeTensorInfo([],"int32",new Int32Array([f]))]}var Nfe={kernelName:Ld,backendName:"cpu",kernelFunc:Tfe},Afe=Oi.nonMaxSuppressionV5Impl;function _fe(e){let{inputs:t,backend:r,attrs:a}=e,{boxes:n,scores:i}=t,{maxOutputSize:s,iouThreshold:o,scoreThreshold:l,softNmsSigma:u}=a;Xe(n,"NonMaxSuppressionWithScore");let c=r.data.get(n.dataId).values,d=r.data.get(i.dataId).values,p=s,f=o,h=l,m=u,{selectedIndices:g,selectedScores:v}=Afe(c,d,p,f,h,m);return[r.makeTensorInfo([g.length],"int32",new Int32Array(g)),r.makeTensorInfo([v.length],"float32",new Float32Array(v))]}var Mfe={kernelName:zd,backendName:"cpu",kernelFunc:_fe};function Rfe(e){let{inputs:t,backend:r,attrs:a}=e,{indices:n}=t,{depth:i,onValue:s,offValue:o}=a;Xe(n,"oneHot");let l=_.sizeFromShape(n.shape),u=new Float32Array(l*i);u.fill(o);let c=r.data.get(n.dataId).values;for(let d=0;d<l;++d)c[d]>=0&&c[d]<i&&(u[d*i+c[d]]=s);return r.makeTensorInfo([...n.shape,i],"int32",u)}var Ofe={kernelName:cu,backendName:"cpu",kernelFunc:Rfe};function hb(e){let{inputs:t,backend:r}=e,{x:a}=t;if(a.dtype==="string")throw new Error("zerosLike is not supported for string tensors");if(a.dtype==="complex64"){let n=El({inputs:{input:a},backend:r}),i=hb({inputs:{x:n},backend:r}),s=jc({inputs:{input:a},backend:r}),o=hb({inputs:{x:s},backend:r}),l=Qn({inputs:{real:i,imag:o},backend:r});return r.disposeIntermediateTensorInfo(n),r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(o),l}else return nI({backend:r,attrs:{shape:a.shape,value:0,dtype:a.dtype}})}var Pfe={kernelName:ap,backendName:"cpu",kernelFunc:hb};function X3(e){let{inputs:t,backend:r}=e,{x:a}=t;if(a.dtype==="string")throw new Error("onesLike is not supported for string tensors");if(a.dtype==="complex64"){let n=El({inputs:{input:a},backend:r}),i=X3({inputs:{x:n},backend:r}),s=jc({inputs:{input:a},backend:r}),o=hb({inputs:{x:s},backend:r}),l=Qn({inputs:{real:i,imag:o},backend:r});return r.disposeIntermediateTensorInfo(n),r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(o),l}else return nI({backend:r,attrs:{shape:a.shape,value:1,dtype:a.dtype}})}var Dfe={kernelName:Bd,backendName:"cpu",kernelFunc:X3};function Y3(e){let{inputs:t,backend:r,attrs:a}=e,{axis:n}=a;if(t.length===1)return fb({inputs:{input:t[0]},backend:r,attrs:{dim:n}});let i=t[0].shape,s=t[0].dtype;t.forEach(c=>{_.assertShapesMatch(i,c.shape,"All tensors passed to stack must have matching shapes"),_.assert(s===c.dtype,()=>"All tensors passed to stack must have matching dtypes")});let o=[],l=t.map(c=>{let d=fb({inputs:{input:c},backend:r,attrs:{dim:n}});return o.push(d),d}),u=Gc({inputs:l,backend:r,attrs:{axis:n}});return o.forEach(c=>r.disposeIntermediateTensorInfo(c)),u}var Ffe={kernelName:Vd,backendName:"cpu",kernelFunc:Y3};function Lfe(e){let{inputs:t,backend:r,attrs:a}=e,{x:n}=t,{paddings:i,constantValue:s}=a;Xe(n,"pad");let o=i.map((v,b)=>v[0]+n.shape[b]+v[1]),l=i.map(v=>v[0]),u=r.data.get(n.dataId).values,c=_.sizeFromShape(n.shape),d=n.shape.length,p=_.computeStrides(n.shape),f=_.sizeFromShape(o),h=o.length,m=_.computeStrides(o),g=_.getTypedArrayFromDType(n.dtype,f);s!==0&&g.fill(s);for(let v=0;v<c;v++){let b=_.indexToLoc(v,d,p).map((w,x)=>w+l[x]),y=_.locToIndex(b,h,m);g[y]=u[v]}return{dataId:r.write(g,o,n.dtype),shape:o,dtype:n.dtype}}var K3={kernelName:du,backendName:"cpu",kernelFunc:Lfe},zfe=Tr((e,t)=>Math.pow(e,t)),Bfe=Ur(pu,zfe),Vfe={kernelName:pu,backendName:"cpu",kernelFunc:Bfe};function Wfe(e){let{backend:t,attrs:r}=e,{start:a,stop:n,dtype:i,step:s}=r,o=Q$(a,n,s,i);return t.makeTensorInfo([o.length],i,o)}var Hfe={kernelName:Vh,backendName:"cpu",kernelFunc:Wfe},Ufe=Mt(Wd,e=>1/e),jfe={kernelName:Wd,backendName:"cpu",kernelFunc:Ufe};function Gfe(e){let{inputs:t,backend:r,attrs:a}=e,{images:n}=t,{alignCorners:i,halfPixelCenters:s,size:o}=a;Xe(n,"resizeBilinear");let l=_.computeStrides(n.shape),[u,c]=o,[d,p,f,h]=n.shape,m=r.data.get(n.dataId).values,g=new Float32Array(_.sizeFromShape([d,u,c,h])),v=[i&&u>1?p-1:p,i&&c>1?f-1:f],b=[i&&u>1?u-1:u,i&&c>1?c-1:c],y=0,w=v[0]/b[0],x=v[1]/b[1];for(let k=0;k<d;k++)for(let C=0;C<u;C++){let E;s?E=w*(C+.5)-.5:E=w*C;let $=Math.max(0,Math.floor(E)),N=E-$,I=Math.min(p-1,Math.ceil(E)),S=k*l[0]+$*l[1],A=k*l[0]+I*l[1];for(let R=0;R<c;R++){let O;s?O=x*(R+.5)-.5:O=x*R;let D=Math.max(0,Math.floor(O)),z=O-D,U=Math.min(f-1,Math.ceil(O)),j=S+D*l[2],G=A+D*l[2],L=S+U*l[2],V=A+U*l[2];for(let H=0;H<h;H++){let Y=m[j+H],K=m[G+H],Z=m[L+H],le=m[V+H],de=Y+(Z-Y)*z,ie=K+(le-K)*z,ue=de+(ie-de)*N;g[y++]=ue}}}return r.makeTensorInfo([d,u,c,h],"float32",g)}var qfe={kernelName:gu,backendName:"cpu",kernelFunc:Gfe};function Xfe(e){let{inputs:t,backend:r,attrs:a}=e,{images:n,dy:i}=t,{alignCorners:s}=a;Xe([i,n],"resizeBilinearGrad");let o=_.computeStrides(n.shape),[l,u,c,d]=n.shape,[,p,f]=i.shape,h=new Float32Array(l*u*c*d),m=[s&&p>1?u-1:u,s&&f>1?c-1:c],g=[s&&p>1?p-1:p,s&&f>1?f-1:f],v=m[0]/g[0],b=m[1]/g[1],y=r.data.get(i.dataId).values,w=0;for(let x=0;x<l;x++){let k=x*o[0];for(let C=0;C<p;C++){let E=C*v,$=Math.floor(E),N=Math.min(Math.ceil(E),u-1),I=k+$*o[1],S=k+N*o[1],A=E-$,R=1-A;for(let O=0;O<f;O++){let D=O*b,z=Math.floor(D),U=Math.min(Math.ceil(D),c-1),j=D-z,G=1-j,L=I+z*o[2],V=I+U*o[2],H=S+z*o[2],Y=S+U*o[2],K=R*G,Z=R*j,le=A*G,de=A*j;for(let ie=0;ie<d;ie++){let ue=y[w++];h[L+ie]+=ue*K,h[V+ie]+=ue*Z,h[H+ie]+=ue*le,h[Y+ie]+=ue*de}}}}return r.makeTensorInfo([l,c,u,d],"float32",h)}var Yfe={kernelName:fy,backendName:"cpu",kernelFunc:Xfe};function Kfe(e){let{inputs:t,backend:r,attrs:a}=e,{images:n}=t,{alignCorners:i,halfPixelCenters:s,size:o}=a;Xe(n,"resizeNearestNeighbor");let l=_.computeStrides(n.shape),[u,c]=o,[d,p,f,h]=n.shape,m=r.data.get(n.dataId).values,g=new Float32Array(d*u*c*h),v=[i&&u>1?p-1:p,i&&c>1?f-1:f],b=[i&&u>1?u-1:u,i&&c>1?c-1:c],y=v[0]/b[0],w=v[1]/b[1],x=0;for(let k=0;k<d;k++){let C=k*l[0];for(let E=0;E<u;E++){let $=s?y*(E+.5):y*E,N=Math.min(p-1,i?Math.round($):Math.floor($));s&&(N=Math.max(0,N));let I=C+N*l[1];for(let S=0;S<c;S++){let A=s?w*(S+.5):w*S,R=Math.min(f-1,i?Math.round(A):Math.floor(A));s&&(R=Math.max(0,R));let O=I+R*l[2];for(let D=0;D<h;D++){let z=m[O+D];g[x++]=z}}}}return r.makeTensorInfo([d,u,c,h],n.dtype,g)}var Zfe={kernelName:Wh,backendName:"cpu",kernelFunc:Kfe};function Qfe(e){let{inputs:t,backend:r,attrs:a}=e,{images:n,dy:i}=t,{alignCorners:s}=a;Xe([i,n],"resizeNearestNeighborGrad");let o=_.computeStrides(n.shape),l=_.computeStrides(i.shape),[u,c,d,p]=n.shape,[,f,h]=i.shape,m=new Float32Array(u*c*d*p),g=r.data.get(i.dataId).values,v=[s&&f>1?c-1:c,s&&h>1?d-1:d],b=[s&&f>1?f-1:f,s&&h>1?h-1:h],y=v[0]/b[0],w=v[1]/b[1],x=1/y,k=1/w,C=Math.ceil(x)*2+2,E=Math.ceil(k)*2+2;for(let $=0;$<u;$++){let N=$*o[0];for(let I=0;I<c;I++){let S=N+I*o[1],A=Math.floor(I*x),R=Math.floor(A-C/2);for(let O=0;O<d;O++){let D=S+O*o[2],z=Math.floor(O*k),U=Math.floor(z-E/2);for(let j=0;j<p;j++){let G=0;for(let L=0;L<C;L++){let V=L+R;if(V<0||V>=f)continue;let H=N+V*l[1],Y=V*y,K=Math.min(c-1,s?Math.round(Y):Math.floor(Y));if(I===K)for(let Z=0;Z<E;Z++){let le=Z+U;if(le<0||le>=h)continue;let de=H+le*l[2],ie=le*w,ue=Math.min(d-1,s?Math.round(ie):Math.floor(ie));O===ue&&(G+=g[de+j])}}m[D+j]=G}}}}return r.makeTensorInfo(n.shape,n.dtype,m)}var Jfe={kernelName:py,backendName:"cpu",kernelFunc:Qfe};function ehe(e){let{inputs:t,backend:r,attrs:a}=e,{x:n}=t,{dims:i}=a;Xe(n,"reverse");let s=n.shape.length,o=_.parseAxisParam(i,n.shape);if(s===0)return Ni({inputs:{x:n},backend:r});let l=new _r(n.shape,n.dtype),u=r.bufferSync(n);for(let c=0;c<l.size;c++){let d=l.indexToLoc(c),p=d.slice();o.forEach(f=>p[f]=n.shape[f]-1-p[f]),l.set(u.get(...p),...d)}return r.makeTensorInfo(l.shape,l.dtype,l.values)}var the={kernelName:bu,backendName:"cpu",kernelFunc:ehe},rhe={kernelName:ip,backendName:"cpu",kernelFunc:({inputs:e,attrs:t,backend:r})=>{let{image:a}=e,{radians:n,fillValue:i,center:s}=t,o=r,l=_.getTypedArrayFromDType(a.dtype,_.sizeFromShape(a.shape)),[u,c,d,p]=a.shape,[f,h]=B.getImageCenter(s,c,d),m=255,g=Math.sin(n),v=Math.cos(n),b=o.data.get(a.dataId).values;for(let y=0;y<u;y++){let w=y*d*c*p;for(let x=0;x<c;x++){let k=x*(d*p);for(let C=0;C<d;C++){let E=C*p;for(let $=0;$<p;$++){let N=[u,x,C,$],I=N[2],S=N[1],A=(I-f)*v-(S-h)*g,R=(I-f)*g+(S-h)*v;A=Math.round(A+f),R=Math.round(R+h);let O=i;if(typeof i!="number"&&($===3?O=m:O=i[$]),A>=0&&A<d&&R>=0&&R<c){let z=R*(d*p),U=A*p,j=w+z+U+$;O=b[j]}let D=w+k+E+$;l[D]=O}}}}return{dataId:o.write(l,a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}},nhe=Mt(yu,e=>{let t=Math.floor(e);return e-t<.5?Math.floor(e):e-t>.5?Math.ceil(e):t%2===0?t:t+1}),ahe={kernelName:yu,backendName:"cpu",kernelFunc:nhe};function ihe(e){let{inputs:t,backend:r,attrs:a}=e,{indices:n,updates:i}=t,{shape:s}=a,{sliceRank:o,numUpdates:l,sliceSize:u,strides:c,outputSize:d}=B.calculateShapes(i,n,s),p=!0,f=r.bufferSync(n),h=r.bufferSync(i),m=cc(f,h,s,d,u,l,o,c,0,p);return r.makeTensorInfo(s,m.dtype,m.values)}var she={kernelName:Ud,backendName:"cpu",kernelFunc:ihe};function ohe(e,t){let r=0,a=e.length,n=0;for(;r<a;)n=Math.floor((r+a)/2),e[n]<t?r=n+1:a=n;return a}function lhe(e,t){let r=0,a=e.length,n=0;for(;r<a;)n=Math.floor((r+a)/2),e[n]<=t?r=n+1:a=n;return a}function uhe(e,t,r,a,n,i){let s=_.getArrayFromDType("int32",r*n);for(let o=0;o<r;++o){let l=e.slice(o*a,(o+1)*a),u=o*n;for(let c=0;c<n;++c)s[u+c]=i==="left"?ohe(l,t[c+u]):lhe(l,t[c+u])}return s}function che(e){let{inputs:t,backend:r,attrs:a}=e,{sortedSequence:n,values:i}=t,{side:s}=a,o=r.data.get(n.dataId).values,l=r.data.get(i.dataId).values,u=uhe(o,l,n.shape[0],n.shape[1],i.shape[1],s);return r.makeTensorInfo(i.shape,"int32",u)}var dhe={kernelName:hy,backendName:"cpu",kernelFunc:che};function phe(e){let{inputs:t,backend:r}=e,{condition:a,t:n,e:i}=t;Xe([a,n,i],"select");let s=a.shape.length,o=r.data.get(a.dataId).values,l=r.data.get(n.dataId).values,u=r.data.get(i.dataId).values,c=Ca(n.dtype,i.dtype),d=_.makeZerosTypedArray(_.sizeFromShape(n.shape),c),p=0,f=s===0||s>1||n.shape.length===1?1:_.sizeFromShape(n.shape.slice(1));for(let h=0;h<o.length;h++)for(let m=0;m<f;m++)o[h]===1?d[p++]=l[h]:d[p++]=u[h];return r.makeTensorInfo(n.shape,c,d)}var fhe={kernelName:jd,backendName:"cpu",kernelFunc:phe},hhe=B.SELU_SCALEALPHA,mhe=B.SELU_SCALE,ghe=Mt(Gd,e=>e>=0?mhe*e:hhe*(Math.exp(e)-1)),vhe={kernelName:Gd,backendName:"cpu",kernelFunc:ghe},bhe=Mt(Yd,e=>e<0?-1:e>0?1:0),yhe={kernelName:Yd,backendName:"cpu",kernelFunc:bhe},whe=Mt(xu,e=>Math.sin(e)),xhe={kernelName:xu,backendName:"cpu",kernelFunc:whe},khe=Mt(Xd,e=>Math.sinh(e)),Ehe={kernelName:Xd,backendName:"cpu",kernelFunc:khe},Che=11920928955078125e-23,MA=Math.log(Che)+2,She=Mt(Kd,e=>{let t=e>-MA,r=e<MA,a=Math.exp(e),n;return r?n=a:t?n=e:n=Math.log(1+a),n}),$he={kernelName:Kd,backendName:"cpu",kernelFunc:She};function Ihe(e){let{inputs:t,backend:r,attrs:a}=e,{x:n}=t,{blockShape:i,paddings:s}=a;Xe([n],"spaceToBatchND");let o=_.sizeFromShape(i),l=[[0,0]];l.push(...s);for(let g=1+i.length;g<n.shape.length;++g)l.push([0,0]);let u=K3.kernelFunc({inputs:{x:n},backend:r,attrs:{paddings:l,constantValue:0}}),c=B.getReshaped(u.shape,i,o,!1),d=B.getPermuted(c.length,i.length,!1),p=B.getReshapedPermuted(u.shape,i,o,!1),f=Ht({inputs:{x:u},backend:r,attrs:{shape:c}}),h=Ln({inputs:{x:f},backend:r,attrs:{perm:d}}),m=Ht({inputs:{x:h},backend:r,attrs:{shape:p}});return r.disposeIntermediateTensorInfo(u),r.disposeIntermediateTensorInfo(f),r.disposeIntermediateTensorInfo(h),m}var The={kernelName:Zd,backendName:"cpu",kernelFunc:Ihe};function Nhe(e){let{inputs:t,backend:r}=e,{indices:a,values:n,denseShape:i,defaultValue:s}=t;if(i.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
        ${i.shape}`);if(a.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
        ${a.shape}`);if(n.shape.length!==1)throw new Error(`Values must be a vector, saw:
        ${n.shape}`);if(s.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${s.shape}`);let o=r.data.get(a.dataId).values,l=r.data.get(n.dataId).values,u=r.data.get(i.dataId).values,c=r.data.get(s.dataId).values[0],[d,p,f,h,m]=E3(o,a.shape,a.dtype,l,n.dtype,u,c);return[r.makeTensorInfo(p,a.dtype,d),r.makeTensorInfo([p[0]],n.dtype,f),r.makeTensorInfo([h.length],"bool",new Uint8Array(h.map(g=>Number(g)))),r.makeTensorInfo([m.length],a.dtype,new Int32Array(m))]}var Ahe={kernelName:Hh,backendName:"cpu",kernelFunc:Nhe};function _he(e){let{inputs:t,backend:r}=e,{inputIndices:a,inputShape:n,newShape:i}=t;if(a.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape
        ${a.shape}`);if(n.shape.length!==1)throw new Error(`Input shape should be a vector but received shape
        ${n.shape}`);if(i.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${i.shape}`);let s=Array.from(r.data.get(n.dataId).values),o=r.data.get(a.dataId).values,l=Array.from(r.data.get(i.dataId).values),[u,c,d]=C3(o,a.shape,a.dtype,s,l);return[r.makeTensorInfo(c,a.dtype,u),r.makeTensorInfo([d.length],i.dtype,new Int32Array(d))]}var Mhe={kernelName:Jd,backendName:"cpu",kernelFunc:_he};function Rhe(e){let{inputs:t,backend:r}=e,{data:a,indices:n,segmentIds:i}=t;if(a.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(n.shape.length!==1)throw new Error(`Indices should be a vector but received shape
          ${n.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
          ${i.shape}`);if(n.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");let s=r.data.get(a.dataId).values,o=r.data.get(n.dataId).values,l=r.data.get(i.dataId).values,[u,c]=J$(s,a.shape,a.dtype,o,l,!0);return r.makeTensorInfo(c,a.dtype,u)}var Ohe={kernelName:Uh,backendName:"cpu",kernelFunc:Rhe};function Phe(e){let{inputs:t,backend:r}=e,{data:a,indices:n,segmentIds:i}=t;if(a.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(n.shape.length!==1)throw new Error(`Indices should be a vector but received shape
         ${n.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
         ${i.shape}`);if(n.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");let s=r.data.get(a.dataId).values,o=r.data.get(n.dataId).values,l=r.data.get(i.dataId).values,[u,c]=J$(s,a.shape,a.dtype,o,l);return r.makeTensorInfo(c,a.dtype,u)}var Dhe={kernelName:jh,backendName:"cpu",kernelFunc:Phe};function Fhe(e){let{inputs:t,backend:r,attrs:a}=e,{sparseIndices:n,sparseValues:i,defaultValue:s}=t,{outputShape:o}=a,{sliceRank:l,numUpdates:u,sliceSize:c,strides:d,outputSize:p}=B.calculateShapes(i,n,o),f=!1,h=r.bufferSync(n),m;switch(i.dtype){case"bool":{let g=r.bufferSync(i),v=Boolean(r.data.get(s.dataId).values[0]);m=cc(h,g,o,p,c,u,l,d,v,f);break}case"float32":{let g=r.bufferSync(i),v=r.data.get(s.dataId).values[0];m=cc(h,g,o,p,c,u,l,d,v,f);break}case"int32":{let g=r.bufferSync(i),v=r.data.get(s.dataId).values[0];m=cc(h,g,o,p,c,u,l,d,v,f);break}case"string":{let g=r.bufferSync(i),v=_.decodeString(r.data.get(s.dataId).values[0]);m=cc(h,g,o,p,c,u,l,d,v,f);break}default:throw new Error(`Unsupported type ${i.dtype}`)}return r.makeTensorInfo(o,m.dtype,m.values)}var Lhe={kernelName:my,backendName:"cpu",kernelFunc:Fhe};function zhe(e){let{inputs:t,backend:r,attrs:a}=e,{x:n}=t,{numOrSizeSplits:i,axis:s}=a,o=_.parseAxisParam(s,n.shape)[0],l=B.prepareSplitSize(n,i,o),u=new Array(n.shape.length).fill(0),c=n.shape.slice();return l.map(d=>{let p=[...c];p[o]=d;let f=Cl({inputs:{x:n},backend:r,attrs:{begin:u,size:p}});return u[o]+=d,f})}var Bhe={kernelName:Qd,backendName:"cpu",kernelFunc:zhe},Vhe={kernelName:Gh,backendName:"cpu",kernelFunc:({inputs:e,backend:t})=>{let{x:r}=e,a=t;Xe(r,"square");let n=a.data.get(r.dataId).values,i=new Float32Array(n.length);for(let s=0;s<n.length;++s){let o=n[s];i[s]=o*o}return{dataId:a.write(i,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},Whe=Mt(wo,(e,t)=>{let r=t;return isNaN(e)?NaN:e>0?1:r.alpha}),Hhe={kernelName:wo,backendName:"cpu",kernelFunc:Whe};function Uhe(e){let{inputs:t,backend:r,attrs:a}=e,{x:n}=t,{begin:i,end:s,strides:o,beginMask:l,endMask:u,ellipsisMask:c,newAxisMask:d,shrinkAxisMask:p}=a;Xe(n,"stridedSlice");let{finalShapeSparse:f,finalShape:h,isIdentity:m,sliceDim0:g,isSimpleSlice:v,begin:b,end:y,strides:w}=Mr.sliceInfo(n.shape,i,s,o,l,u,c,d,p),x;if(m)x=Ht({inputs:{x:n},backend:r,attrs:{shape:h}});else if(g||v){_.assert(n.shape.length>=1,()=>`Input must have rank at least 1, got: ${n.shape.length}`);let k=Mr.computeOutShape(b,y,w),C=Cl({inputs:{x:n},backend:r,attrs:{begin:b,size:k}});x=Ht({inputs:{x:C},backend:r,attrs:{shape:h}}),r.disposeIntermediateTensorInfo(C)}else{let k=r.bufferSync(n),C=$3(f,k,w,b);x=r.makeTensorInfo(h,C.dtype,C.values)}return x}var jhe={kernelName:ep,backendName:"cpu",kernelFunc:Uhe};function Ghe(e){let{inputs:t,backend:r,attrs:a}=e,{separator:n,nGramWidths:i,leftPad:s,rightPad:o,padWidth:l,preserveShortSequences:u}=a,{data:c,dataSplits:d}=t,p=r.data.get(c.dataId).values,f=r.data.get(d.dataId).values,[h,m]=I3(p,f,n,i,s,o,l,u);return[r.makeTensorInfo([h.length],"string",h),r.makeTensorInfo(d.shape,"int32",m)]}var qhe={kernelName:gy,backendName:"cpu",kernelFunc:Ghe};function Xhe(e){let{inputs:t,backend:r,attrs:a}=e,{skipEmpty:n}=a,{input:i,delimiter:s}=t;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(i.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${i.shape}`);if(s.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${s.shape}`);let o=r.data.get(i.dataId).values,l=r.data.get(s.dataId).values[0],[u,c,d]=T3(o,l,n),p=c.length;return[r.makeTensorInfo([p,2],"int32",u),r.makeTensorInfo([p],"string",c),r.makeTensorInfo([2],"int32",new Int32Array(d))]}var Yhe={kernelName:vy,backendName:"cpu",kernelFunc:Xhe};function Khe(e){let{inputs:t,backend:r,attrs:a}=e,{numBuckets:n}=a,{input:i}=t;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(n<=0)throw new Error("Number of buckets must be at least 1");let s=r.data.get(i.dataId).values,o=N3(s,n);return r.makeTensorInfo(i.shape,"int32",o)}var Zhe={kernelName:by,backendName:"cpu",kernelFunc:Khe},Qhe=Mt(Tu,e=>Math.tan(e)),Jhe={kernelName:Tu,backendName:"cpu",kernelFunc:Qhe},eme=Mt(Nu,e=>Math.tanh(e)),tme={kernelName:Nu,backendName:"cpu",kernelFunc:eme};function rme(e){let{inputs:t,backend:r,attrs:a}=e,{x:n}=t,{reps:i}=a;Xe(n,"tile");let s=_3(r.bufferSync(n),i);return r.makeTensorInfo(s.shape,s.dtype,s.values)}var nme={kernelName:yo,backendName:"cpu",kernelFunc:rme};function ame(e){let{inputs:t,backend:r,attrs:a}=e,{x:n}=t,{k:i,sorted:s}=a;Xe(n,"topk");let o=r.data.get(n.dataId).values,[l,u]=R3(o,n.shape,n.dtype,i,s);return[r.makeTensorInfo(l.shape,l.dtype,l.values),r.makeTensorInfo(u.shape,u.dtype,u.values)]}var ime={kernelName:tp,backendName:"cpu",kernelFunc:ame};function sme(e){let{inputs:t,attrs:r,backend:a}=e,{image:n,transforms:i}=t,{interpolation:s,fillMode:o,fillValue:l,outputShape:u}=r,[c,d,p,f]=n.shape,[h,m]=u!=null?u:[d,p],g=[c,h,m,f],v=_.computeStrides(n.shape),b=v[0],y=v[1],w=v[2],x=_.getTypedArrayFromDType(n.dtype,_.sizeFromShape(g));x.fill(l);let k=a.data.get(n.dataId).values,C=a.data.get(i.dataId).values;for(let E=0;E<c;++E){let $=i.shape[0]===1?C:C.subarray(E*8,E*8+8);for(let N=0;N<h;++N)for(let I=0;I<m;++I)for(let S=0;S<f;++S){let A,R=$[6]*I+$[7]*N+1;if(R===0)continue;let O=($[0]*I+$[1]*N+$[2])/R,D=($[3]*I+$[4]*N+$[5])/R,z=RA(O,p,o),U=RA(D,d,o);switch(s){case"nearest":A=pme(k,d,p,b,y,w,E,U,z,S,l);break;case"bilinear":A=fme(k,d,p,b,y,w,E,U,z,S,l);break;default:throw new Error(`Error in Transform: Expect 'nearest' or 'bilinear', but got ${s}`)}let j=E*b+N*y+I*w+S;x[j]=A}return a.makeTensorInfo(g,n.dtype,x)}return{dataId:a.write(x,g,n.dtype),shape:n.shape,dtype:n.dtype}}var ome={kernelName:rp,backendName:"cpu",kernelFunc:sme};function RA(e,t,r){switch(r){case"reflect":return lme(e,t);case"wrap":return ume(e,t);case"nearest":return dme(e,t);case"constant":default:return cme(e)}}function lme(e,t){let r=e;if(r<0)if(t<=1)r=0;else{let a=2*t;r<a&&(r=a*Math.trunc(-r/a)+r),r=r<-t?r+a:-r-1}else if(r>t-1)if(t<=1)r=0;else{let a=2*t;r-=a*Math.trunc(r/a),r>=t&&(r=a-r-1)}return _.clamp(0,r,t-1)}function ume(e,t){let r=e;if(r<0)if(t<=1)r=0;else{let a=t-1;r+=t*(Math.trunc(-r/a)+1)}else if(r>t-1)if(t<=1)r=0;else{let a=t-1;r-=t*Math.trunc(r/a)}return _.clamp(0,r,t-1)}function cme(e,t){return e}function dme(e,t){return _.clamp(0,e,t-1)}function vf(e,t,r,a,n,i,s,o,l,u,c){let d=s*a+o*n+l*i+u;return 0<=o&&o<t&&0<=l&&l<r?e[d]:c}function pme(e,t,r,a,n,i,s,o,l,u,c){let d=Math.round(o),p=Math.round(l);return vf(e,t,r,a,n,i,s,d,p,u,c)}function fme(e,t,r,a,n,i,s,o,l,u,c){let d=Math.floor(o),p=Math.floor(l),f=d+1,h=p+1,m=(h-l)*vf(e,t,r,a,n,i,s,d,p,u,c)+(l-p)*vf(e,t,r,a,n,i,s,d,h,u,c),g=(h-l)*vf(e,t,r,a,n,i,s,f,p,u,c)+(l-p)*vf(e,t,r,a,n,i,s,f,h,u,c);return(f-o)*m+(o-d)*g}function hme(e){let{inputs:t,attrs:r,backend:a}=e,{axis:n}=r,{x:i}=t;Xe(i,"unique");let s=a.data.get(i.dataId).values,{outputValues:o,outputShape:l,indices:u}=O3(s,n,i.shape,i.dtype);return[a.makeTensorInfo(l,i.dtype,o),a.makeTensorInfo([u.length],"int32",u)]}var mme={kernelName:yy,backendName:"cpu",kernelFunc:hme};function gme(e){let{inputs:t,backend:r,attrs:a}=e,{value:n}=t,{axis:i}=a;i<0&&(i+=n.shape.length);let s=n.shape.length,o=n.shape[i],l=new Array(s-1),u=0;for(let f=0;f<s;f++)f!==i&&(l[u++]=n.shape[f]);let c=new Array(s).fill(0),d=n.shape.slice();d[i]=1;let p=new Array(o);for(let f=0;f<p.length;f++){c[i]=f;let h=Cl({inputs:{x:n},backend:r,attrs:{begin:c,size:d}});p[f]=Ht({inputs:{x:h},backend:r,attrs:{shape:l}}),r.disposeIntermediateTensorInfo(h)}return p}var vme={kernelName:np,backendName:"cpu",kernelFunc:gme};function bme(e){let{inputs:t,backend:r,attrs:a}=e,{x:n,segmentIds:i}=t,{numSegments:s}=a;Xe(n,"unsortedSegmentSum");let o=n.shape.length,l=i.shape.length,u=[],c=[],d=o-l,p=i;for(let h=0;h<d;++h){let m=fb({inputs:{input:p},backend:r,attrs:{dim:h+1}});p=m,c.push(m)}for(let h=0;h<s;++h){let m=_.createScalarValue(h,"int32"),g=r.makeTensorInfo([],"int32",m),v=r3({inputs:{a:g,b:p},backend:r}),b=co({inputs:{x:v},backend:r,attrs:{dtype:"float32"}}),y=x0({inputs:{a:b,b:n},backend:r}),w=$m({inputs:{x:y},backend:r,attrs:{axis:0,keepDims:!1}});u.push(w),c.push(g),c.push(v),c.push(b),c.push(y),c.push(w)}let f=Y3({inputs:u,backend:r,attrs:{axis:0}});return c.forEach(h=>r.disposeIntermediateTensorInfo(h)),f}var yme={kernelName:qh,backendName:"cpu",kernelFunc:bme},wme=[wce,fue,kce,Cce,yue,$ce,Tce,Ace,Mce,Oce,Dce,Lce,Bce,Hce,jce,Xce,Kce,Qce,ede,bce,rde,ade,sde,lde,vue,xue,cde,hue,pde,hde,mde,vde,yde,xde,Ede,Sde,Ide,Nde,_de,Rde,Pde,Fde,zde,Bde,Wde,Ude,Gde,qde,Xde,Yde,Qde,dce,epe,kue,lpe,Eue,upe,Sue,mpe,gpe,bpe,Iue,xpe,Epe,Spe,Ipe,Npe,Nue,_ue,mue,_pe,fde,Rpe,Ppe,Fpe,pce,Rue,Pue,zpe,Fue,Vpe,Upe,Gpe,Ype,Zpe,Jpe,efe,zue,rfe,afe,sfe,lfe,cfe,pfe,hfe,Vue,gfe,yfe,Efe,Hue,jue,$fe,Nfe,Mfe,que,Ofe,Dfe,Ffe,K3,Vfe,hce,Kue,Hfe,gue,Pk,jfe,mce,gce,vce,qfe,Yfe,Zfe,Jfe,the,rhe,ahe,Que,she,dhe,fhe,vhe,ece,yhe,xhe,Ehe,tce,xfe,$he,The,Ahe,Mhe,Ohe,Dhe,Lhe,Bhe,ace,Vhe,sce,Hhe,jhe,qhe,Yhe,Zhe,cce,Kde,Jhe,tme,nme,ime,ome,Xue,mme,vme,yme,Pfe];for(let e of wme)Xh(e);var Z3={};ut(Z3,{assertNotComplex:()=>bp,bindCanvasToFramebuffer:()=>_me,bindColorTextureToFramebuffer:()=>nv,bindTextureToProgramUniformSampler:()=>fz,bindTextureUnit:()=>cz,bindVertexBufferToProgramAttribute:()=>Fk,callAndCheck:()=>Be,canBeRepresented:()=>J3,createFragmentShader:()=>rz,createFramebuffer:()=>uz,createProgram:()=>nz,createStaticIndexBuffer:()=>sz,createStaticVertexBuffer:()=>iz,createTexture:()=>oz,createVertexShader:()=>tz,getBatchDim:()=>Sl,getExtensionOrThrow:()=>bf,getFramebufferErrorMessage:()=>hz,getMaxTexturesInShader:()=>bz,getNumChannels:()=>Nme,getProgramUniformLocation:()=>pz,getProgramUniformLocationOrThrow:()=>dz,getRowsCols:()=>$l,getShapeAs3D:()=>av,getTextureShapeFromLogicalShape:()=>gz,getWebGLDisjointQueryTimerVersion:()=>yz,getWebGLErrorMessage:()=>ez,getWebGLMaxTextureSize:()=>vz,hasExtension:()=>ya,isCapableOfRenderingToFloatTexture:()=>wz,isDownloadFloatTextureEnabled:()=>xz,isReshapeFree:()=>gh,isWebGLFenceEnabled:()=>kz,isWebGLVersionEnabled:()=>zk,linkProgram:()=>az,logShaderSourceAndInfoLog:()=>iI,resetMaxTextureSize:()=>Mme,resetMaxTexturesInShader:()=>Rme,unbindColorTextureFromFramebuffer:()=>Lk,unbindTextureUnit:()=>Ame,validateFramebuffer:()=>yf,validateProgram:()=>rv,validateTextureSize:()=>lz});var Wo={},Yw={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function Q3(e,t){Wo[e]=t}function li(e,t){if(!(e in Wo)||t!=null){let a=kme(e,t);if(a!==null)Wo[e]=a;else return console.log("Could not get context for WebGL version",e),null}let r=Wo[e];return r==null||r.isContextLost()?(delete Wo[e],li(e)):(r.disable(r.DEPTH_TEST),r.disable(r.STENCIL_TEST),r.disable(r.BLEND),r.disable(r.DITHER),r.disable(r.POLYGON_OFFSET_FILL),r.disable(r.SAMPLE_COVERAGE),r.enable(r.SCISSOR_TEST),r.enable(r.CULL_FACE),r.cullFace(r.BACK),Wo[e])}function xme(e){if(typeof OffscreenCanvas!="undefined"&&e===2)return new OffscreenCanvas(300,150);if(typeof document!="undefined")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function kme(e,t){if(e!==1&&e!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");let r=t==null?xme(e):t;return r.addEventListener("webglcontextlost",a=>{a.preventDefault(),delete Wo[e]},!1),e===1?r.getContext("webgl",Yw)||r.getContext("experimental-webgl",Yw):r.getContext("webgl2",Yw)}var mh;(function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"})(mh||(mh={}));var ba;(function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"})(ba||(ba={}));var Gr;(function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"})(Gr||(Gr={}));function Im(e,t){return[t,e]}function Eme(e,t){return e*t}function _g(e){let t=_.sizeFromShape(e),r=Math.ceil(t/4);return _.sizeToSquarishShape(r)}function vp(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function Cme(e,t){let[r,a]=vp(e,t);return r*a*4}function aI(e,t){let r=e,a,n,i,s,o,l,u,c,d,p;return ce().getNumber("WEBGL_VERSION")===2?(a=r.R32F,n=r.R16F,i=r.RGBA16F,s=r.RGBA32F,o=r.RED,u=4,c=1,d=r.HALF_FLOAT,p=r.FLOAT,l=r.RGBA8):(a=e.RGBA,n=e.RGBA,i=e.RGBA,s=r.RGBA,o=e.RGBA,u=4,c=4,d=t!=null?t.HALF_FLOAT_OES:null,p=e.FLOAT,l=e.RGBA),{internalFormatFloat:a,internalFormatHalfFloat:n,internalFormatPackedHalfFloat:i,internalFormatPackedFloat:s,textureFormatFloat:o,downloadTextureFormat:l,downloadUnpackNumChannels:u,defaultNumChannels:c,textureTypeHalfFloat:d,textureTypeFloat:p}}function Be(e,t){let r=t();return ce().getBool("DEBUG")&&Sme(e),r}function Sme(e){let t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+ez(e,t))}var $me=596e-10,Ime=65504;function J3(e){return!!(ce().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||e===0||$me<Math.abs(e)&&Math.abs(e)<Ime)}function ez(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${t}`}}function bf(e,t){return ms(e,()=>e.getExtension(t),'Extension "'+t+'" not supported on this browser.')}function tz(e,t){let r=ms(e,()=>e.createShader(e.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(Be(e,()=>e.shaderSource(r,t)),Be(e,()=>e.compileShader(r)),e.getShaderParameter(r,e.COMPILE_STATUS)===!1)throw console.log(e.getShaderInfoLog(r)),new Error("Failed to compile vertex shader.");return r}function rz(e,t){let r=ms(e,()=>e.createShader(e.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(Be(e,()=>e.shaderSource(r,t)),Be(e,()=>e.compileShader(r)),ce().get("ENGINE_COMPILE_ONLY"))return r;if(e.getShaderParameter(r,e.COMPILE_STATUS)===!1)throw iI(t,e.getShaderInfoLog(r)),new Error("Failed to compile fragment shader.");return r}var Tme=/ERROR: [0-9]+:([0-9]+):/g;function iI(e,t){let r=Tme.exec(t);if(r==null){console.log(`Couldn't parse line number in error: ${t}`),console.log(e);return}let a=+r[1],n=e.split(`
`),i=n.length.toString().length+2,s=n.map((d,p)=>_.rightPad((p+1).toString(),i)+d),o=0;for(let d=0;d<s.length;d++)o=Math.max(s[d].length,o);let l=s.slice(0,a-1),u=s.slice(a-1,a),c=s.slice(a);console.log(l.join(`
`)),console.log(t.split(`
`)[0]),console.log(`%c ${_.rightPad(u[0],o)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(c.join(`
`))}function nz(e){return ms(e,()=>e.createProgram(),"Unable to create WebGLProgram.")}function az(e,t){if(Be(e,()=>e.linkProgram(t)),!ce().get("ENGINE_COMPILE_ONLY")&&e.getProgramParameter(t,e.LINK_STATUS)===!1)throw console.log(e.getProgramInfoLog(t)),new Error("Failed to link vertex and fragment shaders.")}function rv(e,t){if(Be(e,()=>e.validateProgram(t)),e.getProgramParameter(t,e.VALIDATE_STATUS)===!1)throw console.log(e.getProgramInfoLog(t)),new Error("Shader program validation failed.")}function iz(e,t){let r=ms(e,()=>e.createBuffer(),"Unable to create WebGLBuffer");return Be(e,()=>e.bindBuffer(e.ARRAY_BUFFER,r)),Be(e,()=>e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW)),r}function sz(e,t){let r=ms(e,()=>e.createBuffer(),"Unable to create WebGLBuffer");return Be(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,r)),Be(e,()=>e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.STATIC_DRAW)),r}function Nme(){return ce().getNumber("WEBGL_VERSION")===2?1:4}function oz(e){return ms(e,()=>e.createTexture(),"Unable to create WebGLTexture.")}function lz(e,t){let r=ce().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0){let a=`[${e}x${t}]`;throw new Error("Requested texture size "+a+" is invalid.")}if(e>r||t>r){let a=`[${e}x${t}]`,n=`[${r}x${r}]`;throw new Error("Requested texture size "+a+" greater than WebGL maximum on this browser / GPU "+n+".")}}function uz(e){return ms(e,()=>e.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function Fk(e,t,r,a,n,i,s){let o=e.getAttribLocation(t,r);return o===-1?!1:(Be(e,()=>e.bindBuffer(e.ARRAY_BUFFER,a)),Be(e,()=>e.vertexAttribPointer(o,n,e.FLOAT,!1,i,s)),Be(e,()=>e.enableVertexAttribArray(o)),!0)}function cz(e,t,r){mz(e,r),Be(e,()=>e.activeTexture(e.TEXTURE0+r)),Be(e,()=>e.bindTexture(e.TEXTURE_2D,t))}function Ame(e,t){mz(e,t),Be(e,()=>e.activeTexture(e.TEXTURE0+t)),Be(e,()=>e.bindTexture(e.TEXTURE_2D,null))}function dz(e,t,r){return ms(e,()=>e.getUniformLocation(t,r),'uniform "'+r+'" not present in program.')}function pz(e,t,r){return e.getUniformLocation(t,r)}function fz(e,t,r,a){Be(e,()=>cz(e,t,a)),Be(e,()=>e.uniform1i(r,a))}function _me(e){Be(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,null)),Be(e,()=>e.viewport(0,0,e.canvas.width,e.canvas.height)),Be(e,()=>e.scissor(0,0,e.canvas.width,e.canvas.height))}function nv(e,t,r){Be(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,r)),Be(e,()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0))}function Lk(e,t){Be(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,t)),Be(e,()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0))}function yf(e){let t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+hz(e,t))}function hz(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${t}`}}function ms(e,t,r){let a=Be(e,()=>t());if(a==null)throw new Error(r);return a}function mz(e,t){let r=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,a=t+e.TEXTURE0;if(a<e.TEXTURE0||a>r){let n=`[gl.TEXTURE0, gl.TEXTURE${r}]`;throw new Error(`textureUnit must be in ${n}.`)}}function Sl(e,t=2){return _.sizeFromShape(e.slice(0,e.length-t))}function $l(e){if(e.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function av(e){let t=[1,1,1];return e.length===0||e.length===1&&e[0]===1||(t=[Sl(e),...$l(e)]),t}function gz(e,t=!1){let r=ce().getNumber("WEBGL_MAX_TEXTURE_SIZE");t&&(r=r*2,e=e.map((n,i)=>i>=e.length-2?_.nearestLargerEven(e[i]):e[i]),e.length===1&&(e=[2,e[0]])),e.length!==2&&(e=_.squeezeShape(e).newShape);let a=_.sizeFromShape(e);if(e.length<=1&&a<=r)return[1,a];if(e.length===2&&e[0]<=r&&e[1]<=r)return e;if(e.length===3&&e[0]*e[1]<=r&&e[2]<=r)return[e[0]*e[1],e[2]];if(e.length===3&&e[0]<=r&&e[1]*e[2]<=r)return[e[0],e[1]*e[2]];if(e.length===4&&e[0]*e[1]*e[2]<=r&&e[3]<=r)return[e[0]*e[1]*e[2],e[3]];if(e.length===4&&e[0]<=r&&e[1]*e[2]*e[3]<=r)return[e[0],e[1]*e[2]*e[3]];if(t){let n=Sl(e),i=2,s=2;return e.length&&([i,s]=$l(e)),a=n*(i/2)*(s/2),_.sizeToSquarishShape(a).map(o=>o*2)}return _.sizeToSquarishShape(a)}function Mg(e){return e%2===0}function gh(e,t){if(e=e.slice(-2),t=t.slice(-2),_.arraysEqual(e,t)||!e.length||!t.length||e[0]===0||e[1]===0||t[0]===0||t[1]===0)return!0;if(e.length!==t.length){let r=e.slice(-1)[0],a=t.slice(-1)[0];if(r===a||Mg(r)&&Mg(a)&&(e[0]===1||t[0]===1))return!0}return e[1]===t[1]&&Mg(e[0])&&Mg(t[0])}var iv,sv;function vz(e){if(iv==null){let t=li(e);iv=t.getParameter(t.MAX_TEXTURE_SIZE)}return iv}function Mme(){iv=null}function Rme(){sv=null}function bz(e){if(sv==null){let t=li(e);sv=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,sv)}function yz(e){if(e===0)return 0;let t,r=li(e);return ya(r,"EXT_disjoint_timer_query_webgl2")&&e===2?t=2:ya(r,"EXT_disjoint_timer_query")?t=1:t=0,t}function ya(e,t){return e.getExtension(t)!=null}function zk(e){try{if(li(e)!=null)return!0}catch(t){return console.log("Error when getting WebGL context: ",t),!1}return!1}function wz(e){if(e===0)return!1;let t=li(e);if(e===1){if(!ya(t,"OES_texture_float"))return!1}else if(!ya(t,"EXT_color_buffer_float"))return!1;return Bk(t)}function xz(e){if(e===0)return!1;let t=li(e);if(e===1){if(!ya(t,"OES_texture_float")||!ya(t,"WEBGL_color_buffer_float"))return!1}else{if(ya(t,"EXT_color_buffer_float"))return Bk(t);let r="EXT_color_buffer_half_float";if(ya(t,r)){let a=t.getExtension(r);return Ome(t,a)}return!1}return Bk(t)}function Bk(e){let t=aI(e),r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r);let a=1,n=1;e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,a,n,0,t.textureFormatFloat,t.textureTypeFloat,null);let i=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,i),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);let s=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(r),e.deleteFramebuffer(i),s}function Ome(e,t){let r=aI(e,t),a=e.createTexture();e.bindTexture(e.TEXTURE_2D,a);let n=1,i=1;e.texImage2D(e.TEXTURE_2D,0,r.internalFormatHalfFloat,n,i,0,r.textureFormatFloat,r.textureTypeHalfFloat,null);let s=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,s),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,a,0);let o=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(a),e.deleteFramebuffer(s),o}function kz(e){return e!==2?!1:li(e).fenceSync!=null}function bp(e,t){Array.isArray(e)||(e=[e]),e.forEach(r=>{r!=null&&_.assert(r.dtype!=="complex64",()=>`${t} does not support complex64 tensors in the WebGL backend.`)})}var tt=ce();tt.registerFlag("HAS_WEBGL",()=>tt.getNumber("WEBGL_VERSION")>0);tt.registerFlag("WEBGL_VERSION",()=>zk(2)?2:zk(1)?1:0);tt.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1);tt.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>tt.get("WEBGL_VERSION")===2);tt.registerFlag("WEBGL_CPU_FORWARD",()=>!0);tt.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1);tt.registerFlag("WEBGL_PACK",()=>tt.getBool("HAS_WEBGL"));tt.registerFlag("WEBGL_PACK_NORMALIZATION",()=>tt.getBool("WEBGL_PACK"));tt.registerFlag("WEBGL_PACK_CLIP",()=>tt.getBool("WEBGL_PACK"));tt.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>tt.getBool("WEBGL_PACK"));tt.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>tt.getBool("WEBGL_PACK"));tt.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>tt.getBool("WEBGL_PACK"));tt.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>tt.getBool("WEBGL_PACK"));tt.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>tt.getBool("WEBGL_PACK"));tt.registerFlag("WEBGL_PACK_REDUCE",()=>tt.getBool("WEBGL_PACK"));tt.registerFlag("WEBGL_LAZILY_UNPACK",()=>tt.getBool("WEBGL_PACK"));tt.registerFlag("WEBGL_CONV_IM2COL",()=>tt.getBool("WEBGL_PACK"));tt.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>vz(tt.getNumber("WEBGL_VERSION")));tt.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>bz(tt.getNumber("WEBGL_VERSION")));tt.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{let e=tt.getNumber("WEBGL_VERSION");return e===0?0:yz(e)});tt.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>tt.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!Zh.isMobile());tt.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>wz(tt.getNumber("WEBGL_VERSION")));tt.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>tt.getBool("WEBGL_FORCE_F16_TEXTURES")?!1:tt.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"));tt.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>xz(tt.getNumber("WEBGL_VERSION")));tt.registerFlag("WEBGL_FENCE_API_ENABLED",()=>kz(tt.getNumber("WEBGL_VERSION")));tt.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>tt.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0);tt.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,e=>{if(e<0&&e!==-1)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${e}.`)});tt.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>Zh.isMobile()?1:-1,e=>{if(e<0&&e!==-1)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${e}.`)});tt.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128);tt.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1);tt.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5);tt.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128);function In(){let e,t,r,a,n,i,s,o,l,u;return ce().getNumber("WEBGL_VERSION")===2?(e="#version 300 es",t="in",r="out",a="in",n="texture",i="outputColor",s="out vec4 outputColor;",o=`
      bool isnan_custom(float val) {
        uint floatToUint = floatBitsToUint(val);
        return (floatToUint & 0x7fffffffu) > 0x7f800000u;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `,l="",u=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(e="",t="attribute",r="varying",a="varying",n="texture2D",i="gl_FragColor",s="",o=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,l=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,u=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:e,attribute:t,varyingVs:r,varyingFs:a,texture2D:n,output:i,defineOutput:s,defineSpecialNaN:o,defineSpecialInf:l,defineRound:u}}function Pu(e,t,r="index"){let a=_.computeStrides(t);return a.map((n,i)=>{let s=`int ${e[i]} = ${r} / ${n}`,o=i===a.length-1?`int ${e[i+1]} = ${r} - ${e[i]} * ${n}`:`index -= ${e[i]} * ${n}`;return`${s}; ${o};`}).join("")}function k0(e,t,r="index"){let a=_.computeStrides(t);return a.map((n,i)=>{let s=`int ${e[i]} = ${r} / outShapeStrides[${i}]`,o=i===a.length-1?`int ${e[i+1]} = ${r} - ${e[i]} * outShapeStrides[${i}]`:`index -= ${e[i]} * outShapeStrides[${i}]`;return`${s}; ${o};`}).join("")}function Pme(e,t){let r=e.length,a=e.map(i=>`${t}[${i}]`),n=new Array(r-1);n[r-2]=a[r-1];for(let i=r-3;i>=0;--i)n[i]=`(${n[i+1]} * ${a[i+1]})`;return n}function Dme(e,t,r="index"){let a=e.map((i,s)=>s),n=Pme(a,t);return n.map((i,s)=>{let o=`int ${e[s]} = ${r} / ${n[s]}`,l=s===n.length-1?`int ${e[s+1]} = ${r} - ${e[s]} * ${n[s]}`:`index -= ${e[s]} * ${n[s]}`;return`${o}; ${l};`}).join("")}function sI(e){let t=_.computeStrides(e).map(r=>r.toString());return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * ${t[0]} + coords.y * ${t[1]} + coords.z;
  }
`}function oI(){return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;
  }
`}var Ez=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`,{getBroadcastDims:Cz}=B;function Fme(e,t,r){let a=[];if(e.forEach(p=>{let f=_.sizeFromShape(p.shapeInfo.logicalShape);if(p.shapeInfo.isUniform?a.push(`uniform float ${p.name}${f>1?`[${f}]`:""};`):(a.push(`uniform sampler2D ${p.name};`),a.push(`uniform int offset${p.name};`)),r.enableShapeUniforms){let{uniformShape:h}=lI(r.packedInputs,p.shapeInfo.logicalShape,p.shapeInfo.texShape);switch(h.length){case 1:a.push(`uniform int ${p.name}Shape;`);break;case 2:a.push(`uniform ivec2 ${p.name}Shape;`);break;case 3:a.push(`uniform ivec3 ${p.name}Shape;`);break;case 4:a.push(`uniform ivec4 ${p.name}Shape;`);break}a.push(`uniform ivec2 ${p.name}TexShape;`)}}),r.enableShapeUniforms){switch(t.logicalShape.length){case 1:a.push("uniform int outShape;");break;case 2:a.push("uniform ivec2 outShape;"),a.push("uniform int outShapeStrides;");break;case 3:a.push("uniform ivec3 outShape;"),a.push("uniform ivec2 outShapeStrides;");break;case 4:a.push("uniform ivec4 outShape;"),a.push("uniform ivec3 outShapeStrides;");break}a.push("uniform ivec2 outTexShape;")}r.customUniforms&&r.customUniforms.forEach(p=>{a.push(`uniform ${p.type} ${p.name}${p.arrayIndex?`[${p.arrayIndex}]`:""};`)});let n=a.join(`
`),i=e.map(p=>Lme(p,t,r.packedInputs,r.enableShapeUniforms)).join(`
`),s=t.texShape,o=In(),l=Vme(o),u,c,d=Ume(o);return t.isPacked?(u=zme(t.logicalShape,s,r.enableShapeUniforms),c=Hme(o)):(u=Bme(t.logicalShape,s,r.enableShapeUniforms),c=Wme(o)),r.packedInputs&&(d+=Xme),[d,l,c,n,u,i,r.userCode].join(`
`)}function yp(e,t=!1){let r=e.shapeInfo.logicalShape;switch(r.length){case 0:return sge(e,t);case 1:return lge(e,t);case 2:return cge(e,t);case 3:return pge(e,t);case 4:return hge(e,t);case 5:return mge(e);case 6:return gge(e);default:throw new Error(`${r.length}-D input sampling is not yet supported`)}}function Sz(e,t){switch(e.shapeInfo.logicalShape.length){case 0:return ige(e);case 1:return oge(e,t);case 2:return uge(e,t);case 3:return dge(e,t);default:return fge(e,t)}}function Lme(e,t,r=!1,a){let n="";r?n+=Sz(e,a):n+=yp(e,a);let i=e.shapeInfo.logicalShape,s=t.logicalShape;return i.length<=s.length&&(r?n+=vge(e,t):n+=bge(e,t)),n}function zme(e,t,r){switch(e.length){case 0:return $z();case 1:return Yme(e,t,r);case 2:return nge(e,t,r);case 3:return Zme(e,t,r);default:return Jme(e,t,r)}}function Bme(e,t,r){switch(e.length){case 0:return $z();case 1:return Kme(e,t,r);case 2:return age(e,t,r);case 3:return Qme(e,t,r);case 4:return ege(e,t,r);case 5:return tge(e,t);case 6:return rge(e,t);default:throw new Error(`${e.length}-D output sampling is not yet supported`)}}function Vme(e){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return ${e.texture2D}(textureSampler, uv).r;
    }
  `}function Wme(e){return`
    void setOutput(float val) {
      ${e.output} = vec4(val, 0, 0, 0);
    }
  `}function Hme(e){return`
    void setOutput(vec4 val) {
      ${e.output} = val;
    }
  `}function Ume(e){return`${e.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${e.varyingFs} vec2 resultUV;
    ${e.defineOutput}
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    ${e.defineSpecialNaN}
    ${e.defineSpecialInf}
    ${e.defineRound}

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    ${jme}
    ${Gme}
    ${qme}
  `}var jme=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,Gme=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,qme=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,Xme=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function $z(){return`
    int getOutputCoords() {
      return 0;
    }
  `}function Yme(e,t,r){let a=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];return a[0]===1?r?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ${a[1]}.0);
      }
    `:a[1]===1?r?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ${a[0]}.0);
      }
    `:r?`
    int getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${a[0]}, ${a[1]}));
      return 2 * (resTexRC.x * ${a[1]} + resTexRC.y);
    }
  `}function Kme(e,t,r){return t[0]===1?r?`
      int getOutputCoords() {
        return int(resultUV.x * float(outTexShape[1]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.x * ${t[1]}.0);
      }
    `:t[1]===1?r?`
      int getOutputCoords() {
        return int(resultUV.y * float(outTexShape[0]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.y * ${t[0]}.0);
      }
    `:r?`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      return resTexRC.x * outTexShape[1] + resTexRC.y;
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${t[0]}, ${t[1]}));
      return resTexRC.x * ${t[1]} + resTexRC.y;
    }
  `}function Zme(e,t,r){if(r)return`
    ivec3 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec3(b, r, c);
    }
  `;let a=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],n=Math.ceil(e[2]/2),i=n*Math.ceil(e[1]/2);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${a[0]}, ${a[1]}));
      int index = resTexRC.x * ${a[1]} + resTexRC.y;

      int b = index / ${i};
      index -= b * ${i};

      int r = 2 * (index / ${n});
      int c = imod(index, ${n}) * 2;

      return ivec3(b, r, c);
    }
  `}function Qme(e,t,r){if(r)return`
  ivec3 getOutputCoords() {
    ivec2 resTexRC = ivec2(resultUV.yx *
                           vec2(outTexShape[0], outTexShape[1]));
    int index = resTexRC.x * outTexShape[1] + resTexRC.y;
    ${k0(["r","c","d"],e)}
    return ivec3(r, c, d);
  }
`;let a=Pu(["r","c","d"],e);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${t[0]}, ${t[1]}));
      int index = resTexRC.x * ${t[1]} + resTexRC.y;
      ${a}
      return ivec3(r, c, d);
    }
  `}function Jme(e,t,r){if(r)return`
    ivec4 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatchN = texelsInBatch * outShape[1];

      int b2 = index / texelsInBatchN;
      index -= b2 * texelsInBatchN;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec4(b2, b, r, c);
    }
  `;let a=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],n=Math.ceil(e[e.length-1]/2),i=n*Math.ceil(e[e.length-2]/2),s=i,o="",l="b, r, c";for(let u=2;u<e.length-1;u++)s*=e[e.length-u-1],o=`
      int b${u} = index / ${s};
      index -= b${u} * ${s};
    `+o,l=`b${u}, `+l;return`
    ivec${e.length} getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${a[0]}, ${a[1]}));
      int index = resTexRC.x * ${a[1]} + resTexRC.y;

      ${o}

      int b = index / ${i};
      index -= b * ${i};

      int r = 2 * (index / ${n});
      int c = imod(index, ${n}) * 2;

      return ivec${e.length}(${l});
    }
  `}function ege(e,t,r){if(r)return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      ${k0(["r","c","d","d2"],e)}
      return ivec4(r, c, d, d2);
    }
  `;let a=Pu(["r","c","d","d2"],e);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${t[0]}, ${t[1]}));
      int index = resTexRC.x * ${t[1]} + resTexRC.y;
      ${a}
      return ivec4(r, c, d, d2);
    }
  `}function tge(e,t){let r=Pu(["r","c","d","d2","d3"],e);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${t[0]},
                             ${t[1]}));

      int index = resTexRC.x * ${t[1]} + resTexRC.y;

      ${r}

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}function rge(e,t){let r=Pu(["r","c","d","d2","d3","d4"],e);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${t[0]}, ${t[1]}));
      int index = resTexRC.x * ${t[1]} + resTexRC.y;

      ${r}

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}function nge(e,t,r){let a=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(_.arraysEqual(e,t))return r?`
      ivec2 getOutputCoords() {
        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(${a[0]}, ${a[1]}));
      }
    `;let n=Math.ceil(e[1]/2);return r?`
    ivec2 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));

      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;
      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${a[0]}, ${a[1]}));

      int index = resTexRC.x * ${a[1]} + resTexRC.y;
      int r = 2 * (index / ${n});
      int c = imod(index, ${n}) * 2;

      return ivec2(r, c);
    }
  `}function age(e,t,r){return _.arraysEqual(e,t)?r?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(${t[0]}, ${t[1]}));
      }
    `:e[1]===1?r?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(index, 0);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${t[0]}, ${t[1]}));
        int index = resTexRC.x * ${t[1]} + resTexRC.y;
        return ivec2(index, 0);
      }
    `:e[0]===1?r?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${t[0]}, ${t[1]}));
        int index = resTexRC.x * ${t[1]} + resTexRC.y;
        return ivec2(0, index);
      }
    `:r?`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      int r = index / outShape[1];
      int c = index - r * outShape[1];
      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${t[0]}, ${t[1]}));
      int index = resTexRC.x * ${t[1]} + resTexRC.y;
      int r = index / ${e[1]};
      int c = index - r * ${e[1]};
      return ivec2(r, c);
    }
  `}function Du(e){return`offset${e}`}function ige(e){let t=e.name,r="get"+t.charAt(0).toUpperCase()+t.slice(1),a=In();return`
    vec4 ${r}() {
      return ${a.texture2D}(${t}, halfCR);
    }
  `}function sge(e,t){let r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1);if(e.shapeInfo.isUniform)return`float ${a}() {return ${r};}`;let[n,i]=e.shapeInfo.texShape;if(n===1&&i===1)return`
      float ${a}() {
        return sampleTexture(${r}, halfCR);
      }
    `;let s=Du(r);if(t)return`
    float ${a}() {
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], ${s});
      return sampleTexture(${r}, uv);
    }
  `;let[o,l]=e.shapeInfo.texShape;return`
    float ${a}() {
      vec2 uv = uvFromFlat(${o}, ${l}, ${s});
      return sampleTexture(${r}, uv);
    }
  `}function oge(e,t){let r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),n=e.shapeInfo.texShape,i=In();if(t)return`
    vec4 ${a}(int index) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      vec2 uv = packedUVfrom1D(
        packedTexShape[0], packedTexShape[1], index);
      return ${i.texture2D}(${r}, uv);
    }
  `;let s=[Math.ceil(n[0]/2),Math.ceil(n[1]/2)];return`
    vec4 ${a}(int index) {
      vec2 uv = packedUVfrom1D(
        ${s[0]}, ${s[1]}, index);
      return ${i.texture2D}(${r}, uv);
    }
  `}function lge(e,t){let r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1);if(e.shapeInfo.isUniform)return`
      float ${a}(int index) {
        ${wp(e)}
      }
    `;let n=e.shapeInfo.texShape,i=n[0],s=n[1];if(s===1&&i===1)return`
      float ${a}(int index) {
        return sampleTexture(${r}, halfCR);
      }
    `;let o=Du(r);return s===1?t?`
      float ${a}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${o}) + 0.5) / float(${r}TexShape[0]));
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${a}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${o}) + 0.5) / ${i}.0);
        return sampleTexture(${r}, uv);
      }
    `:i===1?t?`
      float ${a}(int index) {
        vec2 uv = vec2((float(index + ${o}) + 0.5) / float(${r}TexShape[1]), 0.5);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${a}(int index) {
        vec2 uv = vec2((float(index + ${o}) + 0.5) / ${s}.0, 0.5);
        return sampleTexture(${r}, uv);
      }
    `:t?`
    float ${a}(int index) {
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index + ${o});
      return sampleTexture(${r}, uv);
    }
  `:`
    float ${a}(int index) {
      vec2 uv = uvFromFlat(${i}, ${s}, index + ${o});
      return sampleTexture(${r}, uv);
    }
  `}function uge(e,t){let r=e.shapeInfo.logicalShape,a=e.name,n="get"+a.charAt(0).toUpperCase()+a.slice(1),i=e.shapeInfo.texShape,s=i[0],o=i[1],l=In();if(i!=null&&_.arraysEqual(r,i))return t?`
      vec4 ${n}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${a}TexShape[1], ${a}TexShape[0]);

        return ${l.texture2D}(${a}, uv);
      }
    `:`
      vec4 ${n}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${o}.0, ${s}.0);

        return ${l.texture2D}(${a}, uv);
      }
    `;if(t)return`
    vec4 ${n}(int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${a}TexShape[0]) / 2.0), ceil(float(${a}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${a}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);
      return ${l.texture2D}(${a}, uv);
    }
  `;let u=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)],c=Math.ceil(r[1]/2);return`
    vec4 ${n}(int row, int col) {
      vec2 uv = packedUVfrom2D(${c}, ${u[0]}, ${u[1]}, row, col);
      return ${l.texture2D}(${a}, uv);
    }
  `}function cge(e,t){let r=e.shapeInfo.logicalShape,a=e.name,n="get"+a.charAt(0).toUpperCase()+a.slice(1),i=e.shapeInfo.texShape;if(i!=null&&_.arraysEqual(r,i)){if(t)return`
      float ${n}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${a}TexShape[1], ${a}TexShape[0]);
        return sampleTexture(${a}, uv);
      }
    `;let p=i[0],f=i[1];return`
    float ${n}(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(${f}.0, ${p}.0);
      return sampleTexture(${a}, uv);
    }
  `}let{newShape:s,keptDims:o}=_.squeezeShape(r),l=s;if(l.length<r.length){let p=xp(e,l),f=["row","col"];return`
      ${yp(p,t)}
      float ${n}(int row, int col) {
        return ${n}(${kp(f,o)});
      }
    `}if(e.shapeInfo.isUniform)return`
      float ${n}(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(${r[1]}, 1)));
        ${wp(e)}
      }
    `;let u=i[0],c=i[1],d=Du(a);return c===1?t?`
      float ${n}(int row, int col) {
        float index = dot(vec3(row, col, ${d}), vec3(${a}Shape[1], 1, 1));
        vec2 uv = vec2(0.5, (index + 0.5) / float(${a}TexShape[0]));
        return sampleTexture(${a}, uv);
      }
    `:`
    float ${n}(int row, int col) {
      float index = dot(vec3(row, col, ${d}), vec3(${r[1]}, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / ${u}.0);
      return sampleTexture(${a}, uv);
    }
  `:u===1?t?`
      float ${n}(int row, int col) {
        float index = dot(vec3(row, col, ${d}), vec3(${a}Shape[1], 1, 1));
        vec2 uv = vec2((index + 0.5) / float(${a}TexShape[1]), 0.5);
        return sampleTexture(${a}, uv);
      }
    `:`
    float ${n}(int row, int col) {
      float index = dot(vec3(row, col, ${d}), vec3(${r[1]}, 1, 1));
      vec2 uv = vec2((index + 0.5) / ${c}.0, 0.5);
      return sampleTexture(${a}, uv);
    }
  `:t?`
      float ${n}(int row, int col) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${a}Shape[1] + col + ${d};
        vec2 uv = uvFromFlat(${a}TexShape[0], ${a}TexShape[1], index);
        return sampleTexture(${a}, uv);
      }
    `:`
  float ${n}(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * ${r[1]} + col + ${d};
    vec2 uv = uvFromFlat(${u}, ${c}, index);
    return sampleTexture(${a}, uv);
  }
`}function dge(e,t){let r=e.shapeInfo.logicalShape,a=e.name,n="get"+a.charAt(0).toUpperCase()+a.slice(1),i=e.shapeInfo.texShape,s=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];if(r[0]===1){let p=r.slice(1),f=[1,2],h=xp(e,p),m=["b","row","col"];return`
        ${Sz(h,t)}
        vec4 ${n}(int b, int row, int col) {
          return ${n}(${kp(m,f)});
        }
      `}let o=In();if(t)return`
    vec4 ${n}(int b, int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${a}TexShape[0]) / 2.0), ceil(float(${a}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${a}Shape[2]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${a}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom3D(
        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);
      return ${o.texture2D}(${a}, uv);
    }
  `;let l=s[0],u=s[1],c=Math.ceil(r[2]/2),d=c*Math.ceil(r[1]/2);return`
    vec4 ${n}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${l}, ${u}, ${d}, ${c}, b, row, col);
      return ${o.texture2D}(${a}, uv);
    }
  `}function pge(e,t){let r=e.shapeInfo.logicalShape,a=e.name,n="get"+a.charAt(0).toUpperCase()+a.slice(1),i=r[1]*r[2],s=r[2],{newShape:o,keptDims:l}=_.squeezeShape(r),u=o;if(u.length<r.length){let m=xp(e,u),g=["row","col","depth"];return`
        ${yp(m,t)}
        float ${n}(int row, int col, int depth) {
          return ${n}(${kp(g,l)});
        }
      `}if(e.shapeInfo.isUniform)return`
      float ${n}(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(${i}, ${s}, 1)));
        ${wp(e)}
      }
    `;let c=e.shapeInfo.texShape,d=c[0],p=c[1],f=e.shapeInfo.flatOffset;if(p===i&&f==null)return t?`
      float ${n}(int row, int col, int depth) {
        int stride1 = ${a}Shape[2];
        float texR = float(row);
        float texC = dot(vec2(col, depth), vec2(stride1, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${a}TexShape[1], ${a}TexShape[0]);
        return sampleTexture(${a}, uv);
      }
    `:`
        float ${n}(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(${s}, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(${p}.0, ${d}.0);
          return sampleTexture(${a}, uv);
        }
      `;if(p===s&&f==null)return t?`
      float ${n}(int row, int col, int depth) {
        float texR = dot(vec2(row, col), vec2(${a}Shape[1], 1));
        float texC = float(depth);
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${a}TexShape[1], ${a}TexShape[0]);
        return sampleTexture(${a}, uv);
      }
    `:`
    float ${n}(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(${r[1]}, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${p}.0, ${d}.0);
      return sampleTexture(${a}, uv);
    }
  `;let h=Du(a);return t?`
    float ${n}(int row, int col, int depth) {
      // Explicitly use integer operations as dot() only works on floats.
      int stride0 = ${a}Shape[1] * ${a}Shape[2];
      int stride1 = ${a}Shape[2];
      int index = row * ${i} + col * ${s} + depth + ${h};
      vec2 uv = uvFromFlat(${a}TexShape[0], ${a}TexShape[1], index);
      return sampleTexture(${a}, uv);
    }
    `:`
      float ${n}(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${i} + col * ${s} + depth + ${h};
        vec2 uv = uvFromFlat(${d}, ${p}, index);
        return sampleTexture(${a}, uv);
      }
  `}function fge(e,t){let r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),n=In();if(t)return`
    vec4 ${a}(int b2, int b, int row, int col) {
      int valuesPerRow = int(ceil(float(${r}Shape[3]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${r}Shape[2]) / 2.0));
      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);
      texelsInBatch *= ${r}Shape[1];
      index = b2 * texelsInBatch + index;
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int texR = index / packedTexShape[1];
      int texC = index - texR * packedTexShape[1];
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${n.texture2D}(${r}, uv);
    }
  `;let i=e.shapeInfo.logicalShape,s=i.length,o=e.shapeInfo.texShape,l=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)],u=l[0],c=l[1],d=Math.ceil(i[s-1]/2),p=d*Math.ceil(i[s-2]/2),f="int b, int row, int col",h=`b * ${p} + (row / 2) * ${d} + (col / 2)`;for(let m=2;m<s-1;m++)f=`int b${m}, `+f,p*=i[s-m-1],h=`b${m} * ${p} + `+h;return`
    vec4 ${a}(${f}) {
      int index = ${h};
      int texR = index / ${c};
      int texC = index - texR * ${c};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${c}, ${u});
      return ${n.texture2D}(${r}, uv);
    }
  `}function hge(e,t){let r=e.shapeInfo.logicalShape,a=e.name,n="get"+a.charAt(0).toUpperCase()+a.slice(1),i=r[3],s=r[2]*i,o=r[1]*s,{newShape:l,keptDims:u}=_.squeezeShape(r);if(l.length<r.length){let b=xp(e,l),y=["row","col","depth","depth2"];return`
      ${yp(b,t)}
      float ${n}(int row, int col, int depth, int depth2) {
        return ${n}(${kp(y,u)});
      }
    `}if(e.shapeInfo.isUniform)return`
      float ${n}(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(${o}, ${s}, ${i}, 1)));
        ${wp(e)}
      }
    `;let c=e.shapeInfo.flatOffset,d=e.shapeInfo.texShape,p=d[0],f=d[1],h=`int stride2 = ${a}Shape[3];`,m=`int stride1 = ${a}Shape[2] * stride2;`,g=`int stride0 = ${a}Shape[1] * stride1;`;if(f===o&&c==null)return t?`
      float ${n}(int row, int col, int depth, int depth2) {
        ${h}
        ${m}
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(stride1, stride2, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${a}TexShape[1], ${a}TexShape[0]);
        return sampleTexture(${a}, uv);
      }
    `:`
      float ${n}(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(${s}, ${i}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${f}.0, ${p}.0);
        return sampleTexture(${a}, uv);
      }
    `;if(f===i&&c==null)return t?`
      float ${n}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${a}Shape[1] * ${a}Shape[2], ${a}Shape[2], 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${a}TexShape[1], ${a}TexShape[0]);
        return sampleTexture(${a}, uv);
      }
    `:`
      float ${n}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${r[1]*r[2]}, ${r[2]}, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${f}.0, ${p}.0);
        return sampleTexture(${a}, uv);
      }
    `;let v=Du(a);return t?`
    float ${n}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      ${h}
      ${m}
      ${g}
      int index = row * stride0 + col * stride1 +
          depth * stride2 + depth2;
      vec2 uv = uvFromFlat(${a}TexShape[0], ${a}TexShape[1], index + ${v});
      return sampleTexture(${a}, uv);
    }
  `:`
    float ${n}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${o} + col * ${s} +
          depth * ${i} + depth2;
      vec2 uv = uvFromFlat(${p}, ${f}, index + ${v});
      return sampleTexture(${a}, uv);
    }
  `}function mge(e){let t=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),n=t[4],i=t[3]*n,s=t[2]*i,o=t[1]*s,{newShape:l,keptDims:u}=_.squeezeShape(t);if(l.length<t.length){let m=xp(e,l),g=["row","col","depth","depth2","depth3"];return`
      ${yp(m)}
      float ${a}(int row, int col, int depth, int depth2, int depth3) {
        return ${a}(${kp(g,u)});
      }
    `}if(e.shapeInfo.isUniform)return`
      float ${a}(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(${o}, ${s}, ${i}, ${n})) +
          depth3;
        ${wp(e)}
      }
    `;let c=e.shapeInfo.flatOffset,d=e.shapeInfo.texShape,p=d[0],f=d[1];if(f===o&&c==null)return`
      float ${a}(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(${s}, ${i}, ${n}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${f}.0, ${p}.0);
        return sampleTexture(${r}, uv);
      }
    `;if(f===n&&c==null)return`
      float ${a}(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(${t[1]*t[2]*t[3]},
               ${t[2]*t[3]}, ${t[3]}, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${f}.0, ${p}.0);
        return sampleTexture(${r}, uv);
      }
    `;let h=Du(r);return`
    float ${a}(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${o} + col * ${s} + depth * ${i} +
          depth2 * ${n} + depth3 + ${h};
      vec2 uv = uvFromFlat(${p}, ${f}, index);
      return sampleTexture(${r}, uv);
    }
  `}function gge(e){let t=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),{newShape:n,keptDims:i}=_.squeezeShape(t);if(n.length<t.length){let g=xp(e,n),v=["row","col","depth","depth2","depth3","depth4"];return`
      ${yp(g)}
      float ${a}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return ${a}(${kp(v,i)});
      }
    `}let s=t[5],o=t[4]*s,l=t[3]*o,u=t[2]*l,c=t[1]*u;if(e.shapeInfo.isUniform)return`
      float ${a}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(${c}, ${u}, ${l}, ${o})) +
          dot(
            vec2(depth3, depth4),
            vec2(${s}, 1)));
        ${wp(e)}
      }
    `;let d=e.shapeInfo.flatOffset,p=e.shapeInfo.texShape,f=p[0],h=p[1];if(h===c&&d==null)return`
      float ${a}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(${u}, ${l}, ${o}, ${s})) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${h}.0, ${f}.0);
        return sampleTexture(${r}, uv);
      }
    `;if(h===s&&d==null)return`
      float ${a}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(${t[1]*t[2]*t[3]*t[4]},
               ${t[2]*t[3]*t[4]},
               ${t[3]*t[4]},
               ${t[4]})) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${h}.0, ${f}.0);
        return sampleTexture(${r}, uv);
      }
    `;let m=Du(r);return`
    float ${a}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${c} + col * ${u} + depth * ${l} +
          depth2 * ${o} + depth3 * ${s} + depth4 + ${m};
      vec2 uv = uvFromFlat(${f}, ${h}, index);
      return sampleTexture(${r}, uv);
    }
  `}function wp(e){let t=e.name,r=_.sizeFromShape(e.shapeInfo.logicalShape);return r<2?`return ${t};`:`
    for (int i = 0; i < ${r}; i++) {
      if (i == index) {
        return ${t}[i];
      }
    }
  `}function vge(e,t){let r=e.name,a=r.charAt(0).toUpperCase()+r.slice(1),n="get"+a+"AtOutCoords",i=e.shapeInfo.logicalShape.length,s=t.logicalShape.length,o=Cz(e.shapeInfo.logicalShape,t.logicalShape),l=Lt(s),u=s-i,c,d=["x","y","z","w","u","v"];i===0?c="":s<2&&o.length>=1?c="coords = 0;":c=o.map(g=>`coords.${d[g+u]} = 0;`).join(`
`);let p="";s<2&&i>0?p="coords":p=e.shapeInfo.logicalShape.map((g,v)=>`coords.${d[v+u]}`).join(", ");let f="return outputValue;",h=_.sizeFromShape(e.shapeInfo.logicalShape)===1,m=_.sizeFromShape(t.logicalShape)===1;if(i===1&&!h&&!m)f=`
      return vec4(outputValue.xy, outputValue.xy);
    `;else if(h&&!m)s===1?f=`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:f=`
        return vec4(outputValue.x);
      `;else if(o.length){let g=i-2,v=i-1;o.indexOf(g)>-1&&o.indexOf(v)>-1?f="return vec4(outputValue.x);":o.indexOf(g)>-1?f="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":o.indexOf(v)>-1&&(f="return vec4(outputValue.xx, outputValue.zz);")}return`
    vec4 ${n}() {
      ${l} coords = getOutputCoords();
      ${c}
      vec4 outputValue = get${a}(${p});
      ${f}
    }
  `}function bge(e,t){let r=e.name,a=r.charAt(0).toUpperCase()+r.slice(1),n="get"+a+"AtOutCoords",i=t.texShape,s=e.shapeInfo.texShape,o=e.shapeInfo.logicalShape.length,l=t.logicalShape.length;if(!e.shapeInfo.isUniform&&o===l&&e.shapeInfo.flatOffset==null&&_.arraysEqual(s,i))return`
      float ${n}() {
        return sampleTexture(${r}, resultUV);
      }
    `;let u=Lt(l),c=Cz(e.shapeInfo.logicalShape,t.logicalShape),d=l-o,p,f=["x","y","z","w","u","v"];o===0?p="":l<2&&c.length>=1?p="coords = 0;":p=c.map(m=>`coords.${f[m+d]} = 0;`).join(`
`);let h="";return l<2&&o>0?h="coords":h=e.shapeInfo.logicalShape.map((m,g)=>`coords.${f[g+d]}`).join(", "),`
    float ${n}() {
      ${u} coords = getOutputCoords();
      ${p}
      return get${a}(${h});
    }
  `}function Lt(e){if(e<=1)return"int";if(e===2)return"ivec2";if(e===3)return"ivec3";if(e===4)return"ivec4";if(e===5)return"ivec5";if(e===6)return"ivec6";throw Error(`GPU for rank ${e} is not yet supported`)}function lI(e,t,r){let{newShape:a,keptDims:n}=_.squeezeShape(t),i=t.length,s=e&&i===3&&t[0]===1,o=s?t.slice(1):a,l=!e&&i>1&&!_.arraysEqual(t,r)&&a.length<i||s;return{useSqueezeShape:l,uniformShape:l?o:t,keptDims:n}}function xp(e,t){let r=JSON.parse(JSON.stringify(e));return r.shapeInfo.logicalShape=t,r}function kp(e,t){return t.map(r=>e[r]).join(", ")}function yge(e,t,r,a){let n=r.map((c,d)=>{let p={logicalShape:c.shape,texShape:c.isUniform?null:c.texData.texShape,isUniform:c.isUniform,isPacked:c.isUniform?!1:c.texData.isPacked,flatOffset:null};return c.texData!=null&&c.texData.slice!=null&&c.texData.slice.flatOffset>0&&(p.flatOffset=c.texData.slice.flatOffset),{name:t.variableNames[d],shapeInfo:p}}),i=n.map(c=>c.shapeInfo),s={logicalShape:a.shape,texShape:a.texData.texShape,isUniform:!1,isPacked:a.texData.isPacked,flatOffset:null},o=Fme(n,s,t),l=rz(e.gl,o),u=e.createProgram(l);return ce().get("ENGINE_COMPILE_ONLY")?{program:t,fragmentShader:l,source:o,webGLProgram:u,inShapeInfos:i,outShapeInfo:s,uniformLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,inShapesLocations:null,inTexShapesLocations:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:Object.assign({program:t,fragmentShader:l,source:o,webGLProgram:u,inShapeInfos:i,outShapeInfo:s},Iz(e,t,u))}function Iz(e,t,r){let a={},n={},i={},s=[],o,l,u,c=null,d=null;d=e.getUniformLocation(r,"NAN",!1),ce().getNumber("WEBGL_VERSION")===1&&(c=e.getUniformLocation(r,"INFINITY",!1));let p=!1;for(let f=0;f<t.variableNames.length;f++){let h=t.variableNames[f];a[h]=e.getUniformLocation(r,h,p),a[`offset${h}`]=e.getUniformLocation(r,`offset${h}`,p),t.enableShapeUniforms&&(n[`${h}Shape`]=e.getUniformLocation(r,`${h}Shape`,p),i[`${h}TexShape`]=e.getUniformLocation(r,`${h}TexShape`,p))}return t.enableShapeUniforms&&(o=e.getUniformLocation(r,"outShape",p),u=e.getUniformLocation(r,"outShapeStrides",p),l=e.getUniformLocation(r,"outTexShape",p)),t.customUniforms&&t.customUniforms.forEach((f,h)=>{s[h]=e.getUniformLocation(r,f.name,p)}),{uniformLocations:a,customUniformLocations:s,infLoc:c,nanLoc:d,inShapesLocations:n,inTexShapesLocations:i,outShapeLocation:o,outShapeStridesLocation:u,outTexShapeLocation:l}}function OA(e,t){if(e.length!==t.length)throw Error(`Binary was compiled with ${e.length} inputs, but was executed with ${t.length} inputs`);e.forEach((r,a)=>{let n=r.logicalShape,i=t[a],s=i.shape;if(!_.arraysEqual(n,s))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${n} and ${s} must match`);if(r.isUniform&&i.isUniform)return;let o=r.texShape,l=i.isUniform?null:i.texData.texShape;if(!_.arraysEqual(o,l))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${o} and ${l} must match`)})}function wge(e,t,r,a,n){t.program.enableShapeUniforms||(OA(t.inShapeInfos,r),OA([t.outShapeInfo],[a]));let i=a.texData.texture,s=a.texData.texShape;a.texData.isPacked?e.setOutputPackedMatrixTexture(i.texture,s[0],s[1]):e.setOutputMatrixTexture(i.texture,s[0],s[1]),e.setProgram(t.webGLProgram),ce().getNumber("WEBGL_VERSION")===1&&t.infLoc!==null&&e.gl.uniform1f(t.infLoc,1/0),t.nanLoc!==null&&e.gl.uniform1f(t.nanLoc,NaN),r.forEach((l,u)=>{let c=t.program.variableNames[u],d=t.uniformLocations[c],p=t.uniformLocations[`offset${c}`],f=t.inShapesLocations[`${c}Shape`],h=t.inTexShapesLocations[`${c}TexShape`];if(f){let{uniformShape:m}=lI(t.program.packedInputs,l.shape,l.texData.texShape);switch(m.length){case 1:e.gl.uniform1iv(f,new Int32Array(m));break;case 2:e.gl.uniform2iv(f,new Int32Array(m));break;case 3:e.gl.uniform3iv(f,new Int32Array(m));break;case 4:e.gl.uniform4iv(f,new Int32Array(m));break}}if(h&&e.gl.uniform2i(h,l.texData.texShape[0],l.texData.texShape[1]),d!=null){if(l.isUniform){if(_.sizeFromShape(l.shape)<2)e.gl.uniform1f(d,l.uniformValues[0]);else{let m=l.uniformValues;m instanceof Float32Array||(m=new Float32Array(m)),e.gl.uniform1fv(d,m)}return}l.texData.slice!=null&&p!=null&&e.gl.uniform1i(p,l.texData.slice.flatOffset),e.setInputMatrixTexture(l.texData.texture.texture,d,u)}});let o=t.outShapeLocation;if(o)switch(a.shape.length){case 1:e.gl.uniform1iv(o,new Int32Array(a.shape));break;case 2:e.gl.uniform2iv(o,new Int32Array(a.shape));break;case 3:e.gl.uniform3iv(o,new Int32Array(a.shape));break;case 4:e.gl.uniform4iv(o,new Int32Array(a.shape));break}if(t.outShapeStridesLocation){let l=_.computeStrides(a.shape);switch(a.shape.length){case 2:e.gl.uniform1iv(t.outShapeStridesLocation,new Int32Array(l));break;case 3:e.gl.uniform2iv(t.outShapeStridesLocation,new Int32Array(l));break;case 4:e.gl.uniform3iv(t.outShapeStridesLocation,new Int32Array(l));break}}t.outTexShapeLocation&&e.gl.uniform2i(t.outTexShapeLocation,a.texData.texShape[0],a.texData.texShape[1]),t.program.customUniforms&&n&&t.program.customUniforms.forEach((l,u)=>{let c=t.customUniformLocations[u],d=n[u];if(l.type==="float")e.gl.uniform1fv(c,d);else if(l.type==="vec2")e.gl.uniform2fv(c,d);else if(l.type==="vec3")e.gl.uniform3fv(c,d);else if(l.type==="vec4")e.gl.uniform4fv(c,d);else if(l.type==="int")e.gl.uniform1iv(c,d);else if(l.type==="ivec2")e.gl.uniform2iv(c,d);else if(l.type==="ivec3")e.gl.uniform3iv(c,d);else if(l.type==="ivec4")e.gl.uniform4iv(c,d);else throw Error(`uniform type ${l.type} is not supported yet.`)}),e.executeProgram()}function xge(e,t,r){let a="";t.concat(r).forEach(s=>{let o=s.texData!=null&&s.texData.slice!=null&&s.texData.slice.flatOffset>0;if(e.enableShapeUniforms&&!s.isUniform){let l=s.texData.texShape,{useSqueezeShape:u,uniformShape:c,keptDims:d}=lI(e.packedInputs,s.shape,l),p="",f="",h="";if(c.length===1&&e.packedInputs){let x=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)];p=`${x[0]>1}_${x[1]>1}`}else if(c.length===2&&!e.packedInputs)f=`${c[0]>1}_${c[1]>1}`;else if(c.length>2&&!e.packedInputs){let x=_.computeStrides(c);h=`${x[0]===l[1]}_${x[x.length-1]===l[1]}`}let m=s.shape.length,g=c.length===2&&_.arraysEqual(s.shape,l),v=_.sizeFromShape(s.shape)===1,b=B.getBroadcastDims(s.shape,r.shape),y=!e.packedInputs&&m===r.shape.length&&_.arraysEqual(l,r.texData.texShape),w=e.packedInputs||c.length>2?"":`${l[0]>1}_${l[1]>1}`;a+=`${m}_${y}_${u?d:""}_${c.length}_${v}_${b}_${g}_${p}_${f}_${h}_${w}_${o}`}else{let l=s.isUniform?"uniform":s.texData.texShape;a+=`${s.shape}_${l}_${o}`}});let n=e.userCode,i=e.constructor.name;return i+="_"+a+"_"+n+`${ce().getNumber("WEBGL_VERSION")}`,i}function Un(e){return ce().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&e<=4}var kge=class{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=mh.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];let t=In();this.outputShape=e,this.enableShapeUniforms=Un(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?k0(["r","c","d"],e):Pu(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        ${t.output} = result;
      }
    `}},Ege=class{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=mh.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];let t=In();this.outputShape=e,this.enableShapeUniforms=Un(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?k0(["r","c","d"],e):Pu(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        ${t.output} = result;
      }
    `}},Cge=class{constructor(e){this.variableNames=["A"],this.outTexUsage=ba.DOWNLOAD;let t=In();this.outputShape=e,this.userCode=`
      ${Ez}

      void main() {
        float x = getAAtOutCoords();
        ${t.output} = encode_float(x);
      }
    `}},Sge=class{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=ba.DOWNLOAD;let t=In();this.outputShape=e,this.userCode=`
      ${Ez}

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        ${t.output} = encode_float(x);
      }
    `}},$ge=class{constructor(e,t=!1){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];let r=In();this.outputShape=e,this.enableShapeUniforms=Un(this.outputShape.length);let a="result";t&&(a="floor(result * 255. + 0.5)"),this.userCode=`
      ${this.enableShapeUniforms?oI():sI(e)}

      void main() {
        ivec3 coords = getOutputCoords();

        int flatIndex = getFlatIndex(coords);
        int offset = imod(flatIndex, 4);

        flatIndex = idiv(flatIndex, 4, 1.);

        int r = flatIndex / texShape[1];
        int c = imod(flatIndex, texShape[1]);
        vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
        vec4 values = ${r.texture2D}(A, uv);

        float result;

        if(offset == 0) {
          result = values[0];
        } else if(offset == 1) {
          result = values[1];
        } else if(offset == 2) {
          result = values[2];
        } else {
          result = values[3];
        }

        ${r.output} = vec4(${a}, 0., 0., 0.);
      }
    `}},Ige=class{constructor(e,t=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];let r=In();this.outputShape=e,this.enableShapeUniforms=Un(this.outputShape.length);let a="",n="result";t&&(n="floor(result * 255. + 0.5)");for(let i=0;i<=1;i++)for(let s=0;s<=1;s++){let o=i*2+s;a+=`
          localCoords = coords;
          if(localCoords[2] + ${s} < ${this.enableShapeUniforms?"outShape[2]":`${e[2]}`}) {
          localCoords[2] += ${s};
          if (localCoords[1] + ${i} < ${this.enableShapeUniforms?"outShape[1]":`${e[1]}`}) {
            localCoords[1] += ${i};

            flatIndex = getFlatIndex(localCoords);
            offset = imod(flatIndex, 4);

            flatIndex = idiv(flatIndex, 4, 1.);

            int r = flatIndex / texShape[1];
            int c = imod(flatIndex, texShape[1]);
            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
            values = ${r.texture2D}(A, uv);

            if (offset == 0) {
              result[${o}] = values[0];
            } else if (offset == 1) {
              result[${o}] = values[1];
            } else if (offset == 2) {
              result[${o}] = values[2];
            } else {
              result[${o}] = values[3];
            }
          }
        }
        `}this.userCode=`
        ${this.enableShapeUniforms?oI():sI(e)}

        void main() {
          ivec3 coords = getOutputCoords();

          vec4 result = vec4(0.);
          int flatIndex, r, c, offset;
          ivec3 localCoords;
          vec2 uv;
          vec4 values;

          ${a}

          ${r.output} = ${n};
        }
    `}},Tz={};ut(Tz,{bindVertexProgramAttributeStreams:()=>Fz,createBufferFromOutputTexture:()=>Bz,createFloat16MatrixTexture:()=>Rz,createFloat16PackedMatrixTexture:()=>Dz,createFloat32MatrixTexture:()=>Mz,createIndexBuffer:()=>_z,createPackedMatrixTexture:()=>Pz,createUnsignedBytesMatrixTexture:()=>Oz,createVertexBuffer:()=>Az,createVertexShader:()=>Nz,downloadByteEncodedFloatMatrixFromOutputTexture:()=>Wz,downloadFloat32MatrixFromBuffer:()=>Vz,downloadMatrixFromPackedOutputTexture:()=>Uz,downloadPackedMatrixFromBuffer:()=>Hz,getInternalFormatForFloat16MatrixTexture:()=>cI,getInternalFormatForFloat16PackedMatrixTexture:()=>fI,getInternalFormatForFloat32MatrixTexture:()=>uI,getInternalFormatForPackedMatrixTexture:()=>pI,getInternalFormatForUnsignedBytesMatrixTexture:()=>dI,uploadDenseMatrixToTexture:()=>Lz,uploadPixelDataToTexture:()=>zz});function Nz(e){let t=In(),r=`${t.version}
    precision highp float;
    ${t.attribute} vec3 clipSpacePos;
    ${t.attribute} vec2 uv;
    ${t.varyingVs} vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`;return tz(e,r)}function Az(e){let t=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return iz(e,t)}function _z(e){let t=new Uint16Array([0,1,2,2,1,3]);return sz(e,t)}function Tm(e,t,r,a,n,i){lz(t,r);let s=oz(e),o=e.TEXTURE_2D;return Be(e,()=>e.bindTexture(o,s)),Be(e,()=>e.texParameteri(o,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)),Be(e,()=>e.texParameteri(o,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)),Be(e,()=>e.texParameteri(o,e.TEXTURE_MIN_FILTER,e.NEAREST)),Be(e,()=>e.texParameteri(o,e.TEXTURE_MAG_FILTER,e.NEAREST)),ce().getNumber("WEBGL_VERSION")===1?Be(e,()=>e.texImage2D(o,0,a,t,r,0,n,i,null)):Be(e,()=>e.texStorage2D(o,1,a,t,r)),Be(e,()=>e.bindTexture(e.TEXTURE_2D,null)),{texture:s,texShape:[r,t]}}function uI(e){return e.internalFormatFloat}function Mz(e,t,r,a){let[n,i]=Im(t,r);return Tm(e,n,i,uI(a),a.textureFormatFloat,e.FLOAT)}function cI(e){return e.internalFormatHalfFloat}function Rz(e,t,r,a){let[n,i]=Im(t,r);return Tm(e,n,i,cI(a),a.textureFormatFloat,a.textureTypeHalfFloat)}function dI(e){return e.downloadTextureFormat}function Oz(e,t,r,a){let[n,i]=Im(t,r);return Tm(e,n,i,dI(a),e.RGBA,e.UNSIGNED_BYTE)}function pI(e){return e.internalFormatPackedFloat}function Pz(e,t,r,a){let[n,i]=vp(t,r);return Tm(e,n,i,pI(a),e.RGBA,e.FLOAT)}function fI(e){return e.internalFormatPackedHalfFloat}function Dz(e,t,r,a){let[n,i]=vp(t,r);return Tm(e,n,i,fI(a),e.RGBA,a.textureTypeHalfFloat)}function Fz(e,t,r){return Be(e,()=>e.bindBuffer(e.ARRAY_BUFFER,r)),Fk(e,t,"clipSpacePos",r,3,20,0)&&Fk(e,t,"uv",r,2,20,12)}function Lz(e,t,r,a,n,i){Be(e,()=>e.bindTexture(e.TEXTURE_2D,t));let s,o,l;n instanceof Uint8Array?(s=new Uint8Array(r*a*4),o=e.UNSIGNED_BYTE,l=e.RGBA):(s=new Float32Array(r*a*4),o=e.FLOAT,l=i.internalFormatPackedFloat),s.set(n),ce().getNumber("WEBGL_VERSION")===2?Be(e,()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,r,a,e.RGBA,o,s)):Be(e,()=>e.texImage2D(e.TEXTURE_2D,0,l,r,a,0,e.RGBA,o,s)),Be(e,()=>e.bindTexture(e.TEXTURE_2D,null))}function zz(e,t,r){Be(e,()=>e.bindTexture(e.TEXTURE_2D,t)),r.data instanceof Uint8Array?ce().getNumber("WEBGL_VERSION")===2?Be(e,()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,r.width,r.height,e.RGBA,e.UNSIGNED_BYTE,r.data)):Be(e,()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,r.width,r.height,0,e.RGBA,e.UNSIGNED_BYTE,r.data)):ce().getNumber("WEBGL_VERSION")===2?Be(e,()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,e.RGBA,e.UNSIGNED_BYTE,r)):Be(e,()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r)),Be(e,()=>e.bindTexture(e.TEXTURE_2D,null))}function Bz(e,t,r,a){let n=e.createBuffer();Be(e,()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,n));let i=4*4*t*r;return Be(e,()=>e.bufferData(e.PIXEL_PACK_BUFFER,i,e.STREAM_READ)),Be(e,()=>e.readPixels(0,0,r,t,e.RGBA,e.FLOAT,0)),Be(e,()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,null)),n}function Vz(e,t,r){let a=e,n=new Float32Array(r);return a.bindBuffer(a.PIXEL_PACK_BUFFER,t),a.getBufferSubData(a.PIXEL_PACK_BUFFER,0,n),a.bindBuffer(a.PIXEL_PACK_BUFFER,null),n}function Wz(e,t,r,a){let[n,i]=Im(t,r),s=4,o=new Uint8Array(Eme(t*r,s));return Be(e,()=>e.readPixels(0,0,n,i,a.downloadTextureFormat,e.UNSIGNED_BYTE,o)),new Float32Array(o.buffer)}function Hz(e,t,r,a,n,i,s,o){let l=e,u=new Float32Array(Cme(i,s));return l.bindBuffer(l.PIXEL_PACK_BUFFER,t),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,u),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),u}function Uz(e,t,r){let a=new Float32Array(t*r*4);return Be(e,()=>e.readPixels(0,0,r,t,e.RGBA,e.FLOAT,a)),a}var ov=class{constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];let t=ce().getNumber("WEBGL_VERSION");e!=null?(this.gl=e,Q3(t,e)):this.gl=li(t);let r="WEBGL_color_buffer_float",a="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),ce().getNumber("WEBGL_VERSION")===1){let n="OES_texture_float",i="OES_texture_half_float";if(this.textureFloatExtension=bf(this.gl,n),ya(this.gl,i))this.textureHalfFloatExtension=bf(this.gl,i);else if(ce().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),ya(this.gl,a))this.colorBufferHalfFloatExtension=bf(this.gl,a);else if(ce().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",ya(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else if(ya(this.gl,a))this.colorBufferHalfFloatExtension=this.gl.getExtension(a);else throw new Error("GL context does not support color renderable floats");this.vertexBuffer=Az(this.gl),this.indexBuffer=_z(this.gl),this.framebuffer=uz(this.gl),this.textureConfig=aI(this.gl,this.textureHalfFloatExtension)}get debug(){return ce().getBool("DEBUG")}dispose(){if(this.disposed)return;this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");let e=this.gl;Be(e,()=>e.finish()),Be(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,null)),Be(e,()=>e.deleteFramebuffer(this.framebuffer)),Be(e,()=>e.bindBuffer(e.ARRAY_BUFFER,null)),Be(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)),Be(e,()=>e.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(e,t){return this.throwIfDisposed(),Mz(this.gl,e,t,this.textureConfig)}createFloat16MatrixTexture(e,t){return this.throwIfDisposed(),Rz(this.gl,e,t,this.textureConfig)}createUnsignedBytesMatrixTexture(e,t){return this.throwIfDisposed(),Oz(this.gl,e,t,this.textureConfig)}uploadPixelDataToTexture(e,t){this.throwIfDisposed(),zz(this.gl,e,t)}uploadDenseMatrixToTexture(e,t,r,a){this.throwIfDisposed(),Lz(this.gl,e,t,r,a,this.textureConfig)}createFloat16PackedMatrixTexture(e,t){return this.throwIfDisposed(),Dz(this.gl,e,t,this.textureConfig)}createPackedMatrixTexture(e,t){return this.throwIfDisposed(),Pz(this.gl,e,t,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(Lk(this.gl,this.framebuffer),this.outputTexture=null),Be(this.gl,()=>this.gl.deleteTexture(e))}downloadByteEncodedFloatMatrixFromOutputTexture(e,t,r){return this.downloadMatrixDriver(e,()=>Wz(this.gl,t,r,this.textureConfig))}downloadPackedMatrixFromBuffer(e,t,r,a,n,i){return Hz(this.gl,e,t,r,a,n,i,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,t){return Vz(this.gl,e,t)}createBufferFromTexture(e,t,r){this.bindTextureToFrameBuffer(e);let a=Bz(this.gl,t,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),a}createAndWaitForFence(){let e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let t,r;if(ce().getBool("WEBGL_FENCE_API_ENABLED")){let a=e,n=a.fenceSync(a.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),r=()=>{let i=a.clientWaitSync(n,0,0);return i===a.ALREADY_SIGNALED||i===a.CONDITION_SATISFIED},t=n}else ce().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),r=()=>this.isQueryAvailable(t,ce().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):r=()=>!0;return{query:t,isFencePassed:r}}downloadMatrixFromPackedTexture(e,t,r){return this.downloadMatrixDriver(e,()=>Uz(this.gl,t,r))}createProgram(e){this.throwIfDisposed();let t=this.gl;this.vertexShader==null&&(this.vertexShader=Nz(t));let r=nz(t);return Be(t,()=>t.attachShader(r,this.vertexShader)),Be(t,()=>t.attachShader(r,e)),az(t,r),this.debug&&rv(t,r),this.vertexAttrsAreBound||(this.setProgram(r),this.vertexAttrsAreBound=Fz(t,this.program,this.vertexBuffer)),r}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),e!=null&&Be(this.gl,()=>this.gl.deleteProgram(e))}setProgram(e){this.throwIfDisposed(),this.program=e,this.program!=null&&this.debug&&rv(this.gl,this.program),Be(this.gl,()=>this.gl.useProgram(e))}getUniformLocation(e,t,r=!0){return this.throwIfDisposed(),r?dz(this.gl,e,t):pz(this.gl,e,t)}getAttributeLocation(e,t){return this.throwIfDisposed(),Be(this.gl,()=>this.gl.getAttribLocation(e,t))}getUniformLocationNoThrow(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)}setInputMatrixTexture(e,t,r){this.throwIfDisposed(),this.throwIfNoProgram(),fz(this.gl,e,t,r)}setOutputMatrixTexture(e,t,r){this.setOutputMatrixTextureDriver(e,r,t)}setOutputPackedMatrixTexture(e,t,r){this.throwIfDisposed();let[a,n]=vp(t,r);this.setOutputMatrixTextureDriver(e,a,n)}setOutputMatrixWriteRegion(e,t,r,a){this.setOutputMatrixWriteRegionDriver(r,e,a,t)}setOutputPackedMatrixWriteRegion(e,t,r,a){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){this.program!=null&&rv(this.gl,this.program),yf(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();let e=this.gl;this.debug&&this.debugValidate(),Be(e,()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),Be(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=bf(this.gl,ce().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(ce().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){let r=this.gl,a=this.getQueryTimerExtensionWebGL2(),n=r.createQuery();return r.beginQuery(a.TIME_ELAPSED_EXT,n),n}let e=this.getQueryTimerExtensionWebGL1(),t=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,t),t}endQuery(){if(ce().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){let t=this.gl,r=this.getQueryTimerExtensionWebGL2();t.endQuery(r.TIME_ELAPSED_EXT);return}let e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(e){return await _.repeatedTry(()=>this.disposed||this.isQueryAvailable(e,ce().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(e,ce().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,t){if(t===0)return null;if(t===2){let r=this.gl;return r.getQueryParameter(e,r.QUERY_RESULT)/1e6}else{let r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,t){if(t===0)return!0;if(t===2){let r=this.gl,a=this.getQueryTimerExtensionWebGL2(),n=r.getQueryParameter(e,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(a.GPU_DISJOINT_EXT)),n&&!this.disjoint}else{let r=this.getQueryTimerExtensionWebGL1(),a=r.getQueryObjectEXT(e,r.QUERY_RESULT_AVAILABLE_EXT);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),a&&!this.disjoint}}pollFence(e){return new Promise(t=>{this.addItemToPoll(()=>e.isFencePassed(),()=>t())})}pollItems(){let e=Tge(this.itemsToPoll.map(t=>t.isDoneFn));for(let t=0;t<=e;++t){let{resolveFn:r}=this.itemsToPoll[t];r()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(e,t){this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),!(this.itemsToPoll.length>1)&&_.repeatedTry(()=>(this.pollItems(),this.itemsToPoll.length===0))}bindTextureToFrameBuffer(e){this.throwIfDisposed(),nv(this.gl,e,this.framebuffer),this.debug&&yf(this.gl)}unbindTextureToFrameBuffer(){this.outputTexture!=null?(nv(this.gl,this.outputTexture,this.framebuffer),this.debug&&yf(this.gl)):Lk(this.gl,this.framebuffer)}downloadMatrixDriver(e,t){this.bindTextureToFrameBuffer(e);let r=t();return this.unbindTextureToFrameBuffer(),r}setOutputMatrixTextureDriver(e,t,r){this.throwIfDisposed();let a=this.gl;nv(a,e,this.framebuffer),this.debug&&yf(a),this.outputTexture=e,Be(a,()=>a.viewport(0,0,t,r)),Be(a,()=>a.scissor(0,0,t,r))}setOutputMatrixWriteRegionDriver(e,t,r,a){this.throwIfDisposed(),Be(this.gl,()=>this.gl.scissor(e,t,r,a))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(this.program==null)throw new Error("No GPU program is currently set.")}};function Tge(e){let t=0;for(;t<e.length&&e[t]();++t);return t-1}var{addImpl:Nge,bincountImpl:jz,bincountReduceImpl:Age,ceilImpl:_ge,concatImpl:Mge,equalImpl:Rge,expImpl:Oge,expm1Impl:Pge,floorImpl:Dge,gatherNdImpl:Fge,gatherV2Impl:Lge,greaterImpl:zge,greaterEqualImpl:Bge,lessImpl:Vge,lessEqualImpl:Wge,linSpaceImpl:Hge,logImpl:Uge,maxImpl:jge,maximumImpl:Gge,minimumImpl:qge,multiplyImpl:Xge,negImpl:Yge,notEqualImpl:Kge,prodImpl:Zge,rangeImpl:Qge,rsqrtImpl:Jge,scatterImpl:eve,sigmoidImpl:tve,simpleAbsImpl:Gz,sliceImpl:rve,sparseFillEmptyRowsImpl:nve,sparseReshapeImpl:ave,sparseSegmentReductionImpl:qz,sqrtImpl:ive,stridedSliceImpl:sve,stringNGramsImpl:ove,stringSplitImpl:lve,stringToHashBucketFastImpl:uve,subImpl:cve,tileImpl:dve,topKImpl:pve,transposeImpl:hI,uniqueImpl:fve}=KL;function Xz(e,t){return["x","y","z","w","u","v"].slice(0,t).map(r=>`${e}.${r}`)}function mn(e,t){return t===1?[e]:Xz(e,t)}function hve(e,t){if(e===1)return"rc";let r="";for(let a=0;a<e;a++)r+=t[a],a<e-1&&(r+=",");return r}var mve=class{constructor(e){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.enableShapeUniforms=Un(this.outputShape.length),this.rank===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{let t=mn("rc",this.rank),r=Lt(this.rank),a=this.getOutOfBoundsCondition(t),n=this.getSetup(t),i=this.getOutput(t);this.userCode=`
        void main() {
          ${r} rc = getOutputCoords();

          if(${a}) {
            setOutput(vec4(0));
          } else {
            ${n}

            setOutput(vec4(${i}));
          }
        }
      `}}getSourceCoordsArr(e){let t=[];for(let r=0;r<=1;r++)for(let a=0;a<=1;a++){let n=`${r===0?"r":"rp1"}, ${a===0?"c":"cp1"}`;for(let i=2;i<this.rank;i++)n=`${e[e.length-1-i]},`+n;t.push(n)}return t}getOutOfBoundsCondition(e){if(this.rank===1)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let t="";for(let r=this.rank-2;r<this.rank;r++)t+=`${e[r]} >= ${this.enableShapeUniforms?`outShape[${r}]`:this.outputShape[r]}`,r<this.rank-1&&(t+="||");return t}getSetup(e){if(this.rank===1)return"";let t=e.slice(-2),r=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],a=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`
      int r = ${t[0]};
      int c = ${t[1]};
      int rp1 = r + 1;
      int cp1 = c + 1;

      bool cEdge = cp1 >= ${r};
      bool rEdge = rp1 >= ${a};
    `}getOutput(e){let t=this.getSourceCoordsArr(e);return this.rank===1?`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`:`getA(${t[0]}),
            cEdge ? 0. : getA(${t[1]}),
            rEdge ? 0. : getA(${t[2]}),
            rEdge || cEdge ? 0. : getA(${t[3]})`}},Yz=class{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=e,this.enableShapeUniforms=Un(this.outputShape.length);let r="";for(let a=0;a<4;a++){let n="thisRC = rc;";a%2===1&&(n+="thisRC.z += 1;"),a>1&&(n+="thisRC.y += 1;"),r+=`
        ${n}
        ${a>0?"if(thisRC.y < rows && thisRC.z < cols){":""}
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${a}] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        ${a>0?"}":""}
      `}this.userCode=`
      ${gve(t,this.enableShapeUniforms)}
      ${this.enableShapeUniforms?oI():sI(e)}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = ${this.enableShapeUniforms?"outShape[1]":e[1]};
        int cols = ${this.enableShapeUniforms?"outShape[2]":e[2]};

        ${r}

        setOutput(result);
      }
    `}};function gve(e,t){return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${t?Dme(["r","c","d"],"inputShape"):Pu(["r","c","d"],e)}
      return ivec3(r, c, d);
    }
  `}var vve=class{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}acquireTexture(e,t,r){let a=DA(t,r),n=FA(e,a,r);n in this.freeTextures||(this.freeTextures[n]=[]),n in this.usedTextures||(this.usedTextures[n]=[]);let i=PA(e,a,this.gpgpu.gl,this.gpgpu.textureConfig,r);if(this.freeTextures[n].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=i,this.log();let o=this.freeTextures[n].shift();return this.usedTextures[n].push(o),o}let s;return a===Gr.PACKED_2X2_FLOAT32?s=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):a===Gr.PACKED_2X2_FLOAT16?s=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):a===Gr.UNPACKED_FLOAT32?s=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):a===Gr.UNPACKED_FLOAT16?s=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):a===Gr.PACKED_4X1_UNSIGNED_BYTE&&(s=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[n].push(s),this.numUsedTextures++,this._numBytesAllocated+=i,this.log(),s}releaseTexture(e,t,r,a){if(this.freeTextures==null)return;let n=DA(r,a),i=FA(t,n,a);i in this.freeTextures||(this.freeTextures[i]=[]);let s=PA(t,n,this.gpgpu.gl,this.gpgpu.textureConfig,a),o=ce().get("WEBGL_DELETE_TEXTURE_THRESHOLD");o!==-1&&this._numBytesAllocated>o?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=s):(this.freeTextures[i].push(e),this.numFreeTextures++,this._numBytesFree+=s),this.numUsedTextures--;let l=this.usedTextures[i],u=l.indexOf(e);if(u<0)throw new Error("Cannot release a texture that was never provided by this texture manager");l.splice(u,1),this.log()}log(){if(!this.logEnabled)return;let e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${e})`);let t=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*t)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(this.freeTextures!=null){for(let e in this.freeTextures)this.freeTextures[e].forEach(t=>{this.gpgpu.deleteMatrixTexture(t.texture)});for(let e in this.usedTextures)this.usedTextures[e].forEach(t=>{this.gpgpu.deleteMatrixTexture(t.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}};function bve(e,t){let r=e;if(t===r.R32F)return 4;if(t===r.R16F)return 2;if(t===r.RGBA32F||t===e.RGBA)return 16;if(t===r.RGBA16F)return 8;if(t===r.RGBA8)return 4;throw new Error(`Unknown internal format ${t}`)}function PA(e,t,r,a,n){let i=yve(t,a),s;if(n){let[l,u]=vp(e[0],e[1]);s=l*u}else{let[l,u]=Im(e[0],e[1]);s=l*u}let o=bve(r,i);return s*o}function yve(e,t){switch(e){case Gr.PACKED_2X2_FLOAT32:return pI(t);case Gr.PACKED_2X2_FLOAT16:return fI(t);case Gr.UNPACKED_FLOAT32:return uI(t);case Gr.UNPACKED_FLOAT16:return cI(t);case Gr.PACKED_4X1_UNSIGNED_BYTE:return dI(t);default:throw new Error(`Unknown physical texture type ${e}`)}}function wve(e){return ce().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?Gr.PACKED_2X2_FLOAT32:Gr.UNPACKED_FLOAT32:e?Gr.PACKED_2X2_FLOAT16:Gr.UNPACKED_FLOAT16}function DA(e,t){if(e===ba.UPLOAD)return Gr.PACKED_2X2_FLOAT32;if(e===ba.RENDER||e==null)return wve(t);if(e===ba.DOWNLOAD||e===ba.PIXELS)return Gr.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${e}`)}function FA(e,t,r){return`${e[0]}_${e[1]}_${t}_${r}`}var Zi=class{constructor(e,t){this.variableNames=["A"],this.outputShape=e,this.enableShapeUniforms=Un(this.outputShape.length),this.userCode=`
      float unaryOperation(float x) {
        ${t}
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}},Ga="if (isnan(x)) return x;",xve="return x;",LA="return abs(x);",kve="return (x >= 0.0) ? x : (exp(x) - 1.0);",Eve=Ga+`
  return (x < 0.0) ? 0.0 : x;
`,Cve=Ga+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,ju="return x;",Sve="return 1.0 / (1.0 + exp(-1.0 * x));",$ve="return x;",Ive=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,Tve=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Nve=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Ave="return 1.0 / (1.0 + exp(-1.0 * x));",Ko=class{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.enableShapeUniforms=Un(this.outputShape.length),this.userCode=`
      vec4 unaryOperation(vec4 x) {
        ${t}
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}},_ve=class{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e,this.enableShapeUniforms=Un(this.outputShape.length);let t=e.length,r=mn("rc",t),a=Lt(t),n=hve(t,r),i=r.slice(-2),s=t<=1?"rc":`vec2(${i.join(",")})`;this.userCode=`
      void main() {
        ${a} rc = getOutputCoords();
        vec4 packedInput = getA(${n});

        setOutput(getChannel(packedInput, ${s}));
      }
    `}},Mve=Oi.whereImpl,Rve=1e-7,Ove=1e-4,Kw={};function Pve(e){return e in Kw||(Kw[e]={}),Kw[e]}var Dve=ce().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),Fve=600;function Lve(){return ce().global.screen==null?1024:ce().global.screen.height*ce().global.screen.width*window.devicePixelRatio*Fve/1024/1024}var E0=class extends Ah{constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!ce().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let t;if(e!=null){if(e instanceof ov)t=e;else{let r=li(ce().getNumber("WEBGL_VERSION"),e);t=new ov(r)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{let r=li(ce().getNumber("WEBGL_VERSION"));t=new ov(r),this.binaryCache=Pve(ce().getNumber("WEBGL_VERSION")),this.gpgpuCreatedLocally=!0}this.gpgpu=t,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new vve(this.gpgpu),this.numMBBeforeWarning=Lve(),this.texData=new zb(this,gi())}nextDataId(){return E0.nextDataId++}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}write(e,t,r){if((ce().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||ce().getBool("DEBUG"))&&this.checkNumericalProblems(e),r==="complex64"&&e!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");let a={id:this.nextDataId()};return this.texData.set(a,{shape:t,dtype:r,values:e,usage:ba.UPLOAD,refCount:1}),a}refCount(e){return this.texData.has(e)?this.texData.get(e).refCount:0}incRef(e){let t=this.texData.get(e);t.refCount++}decRef(e){if(this.texData.has(e)){let t=this.texData.get(e);t.refCount--}}move(e,t,r,a,n){if(ce().getBool("DEBUG")&&this.checkNumericalProblems(t),a==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:r,dtype:a,values:t,usage:ba.UPLOAD,refCount:n})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){let t=this.texData.get(e),{values:r,dtype:a,complexTensorInfos:n,slice:i,shape:s,isPacked:o}=t;if(i!=null){let d;o?d=new Ko(s,ju):d=new Zi(s,ju);let p=this.runWebGLProgram(d,[{dataId:e,shape:s,dtype:a}],a),f=this.readSync(p.dataId);return this.disposeIntermediateTensorInfo(p),f}if(r!=null)return this.convertAndCacheOnCPU(e);if(a==="string")return r;let l=this.activeTimers!=null,u;l&&(u=_.now());let c;if(a==="complex64"){let d=this.readSync(n.real.dataId),p=this.readSync(n.imag.dataId);c=B.mergeRealAndImagArrays(d,p)}else c=this.getValuesFromTexture(e);return l&&(this.downloadWaitMs+=_.now()-u),this.convertAndCacheOnCPU(e,c)}async read(e){if(this.pendingRead.has(e)){let f=this.pendingRead.get(e);return new Promise(h=>f.push(h))}let t=this.texData.get(e),{values:r,shape:a,slice:n,dtype:i,complexTensorInfos:s,isPacked:o}=t;if(n!=null){let f;o?f=new Ko(a,ju):f=new Zi(a,ju);let h=this.runWebGLProgram(f,[{dataId:e,shape:a,dtype:i}],i),m=this.read(h.dataId);return this.disposeIntermediateTensorInfo(h),m}if(r!=null)return this.convertAndCacheOnCPU(e);if(ce().getBool("DEBUG")&&!ce().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&ce().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let l=null,u;if(i!=="complex64"&&ce().get("WEBGL_BUFFER_SUPPORTED")){u=this.decode(e);let f=this.texData.get(u.dataId);l=this.gpgpu.createBufferFromTexture(f.texture.texture,..._g(a))}this.pendingRead.set(e,[]),i!=="complex64"&&await this.gpgpu.createAndWaitForFence();let c;if(i==="complex64"){let f=await Promise.all([this.read(s.real.dataId),this.read(s.imag.dataId)]),h=f[0],m=f[1];c=B.mergeRealAndImagArrays(h,m)}else if(l==null)c=this.getValuesFromTexture(e);else{let f=_.sizeFromShape(a);c=this.gpgpu.downloadFloat32MatrixFromBuffer(l,f)}if(u!=null&&this.disposeIntermediateTensorInfo(u),l!=null){let f=this.gpgpu.gl;Be(f,()=>f.deleteBuffer(l))}let d=this.convertAndCacheOnCPU(e,c),p=this.pendingRead.get(e);return this.pendingRead.delete(e),p.forEach(f=>f(d)),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&gi().removeDataId(e,this),this.pendingDeletes--),d}readToGPU(e,t={}){let r=this.texData.get(e),{values:a,shape:n,slice:i,dtype:s,isPacked:o,texture:l}=r;if(s==="complex64")throw new Error("Does not support reading texture for complex64 dtype.");if(i!=null){let p;o?p=new Ko(n,ju):p=new Zi(n,ju);let f=this.runWebGLProgram(p,[{dataId:e,shape:n,dtype:s}],s),h=this.readToGPU(f,t);return this.disposeIntermediateTensorInfo(f),h}if(l==null)throw a!=null?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");let u=this.decode(e,t.customTexShape),c=gi().makeTensorFromTensorInfo(u),d=this.texData.get(u.dataId);return Object.assign({tensorRef:c},d.texture)}bufferSync(e){let t=this.readSync(e.dataId);if(e.dtype==="string")try{let r=t.map(a=>_.decodeString(a));return gt(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return gt(e.shape,e.dtype,t)}checkNumericalProblems(e){if(e!=null)for(let t=0;t<e.length;t++){let r=e[t];if(!J3(r))throw ce().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error(`The value ${r} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`):Error(`The value ${r} cannot be represented on this device.`)}}getValuesFromTexture(e){let{shape:t,dtype:r,isPacked:a}=this.texData.get(e),n=_.sizeFromShape(t);if(ce().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){let d=this.decode(e),p=this.texData.get(d.dataId),f=this.gpgpu.downloadMatrixFromPackedTexture(p.texture.texture,..._g(t)).subarray(0,n);return this.disposeIntermediateTensorInfo(d),f}let i=ce().getBool("WEBGL_PACK")&&a===!0,s=i?av(t):t,o=i?new Sge(s):new Cge(s),l=this.runWebGLProgram(o,[{shape:s,dtype:r,dataId:e}],"float32"),u=this.texData.get(l.dataId),c=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(u.texture.texture,u.texShape[0],u.texShape[1]).subarray(0,n);return this.disposeIntermediateTensorInfo(l),c}timerAvailable(){return ce().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(e){let t=this.activeTimers,r=[],a=!1;this.programTimersStack==null?(this.programTimersStack=r,a=!0):this.activeTimers.push(r),this.activeTimers=r,e();let n=_.flatten(this.activeTimers.map(o=>o.query)).filter(o=>o!=null),i=_.flatten(this.activeTimers.map(o=>o.name)).filter(o=>o!=null);this.activeTimers=t,a&&(this.programTimersStack=null);let s={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if(ce().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){let o=await Promise.all(n);s.kernelMs=_.sum(o),s.getExtraProfileInfo=()=>o.map((l,u)=>({name:i[u],ms:l})).map(l=>`${l.name}: ${l.ms}`).join(", ")}else s.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,s})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return ce().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:_.now(),endMs:null}}endTimer(e){return ce().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=_.now(),e)}async getQueryTime(e){if(ce().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(e);let t=e;return t.endMs-t.startMs}disposeData(e,t=!1){if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(t?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!t&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);let{complexTensorInfos:r}=this.texData.get(e);return r!=null&&(this.disposeData(r.real.dataId,t),this.disposeData(r.imag.dataId,t)),this.texData.delete(e),!0}releaseGPUData(e){let{texture:t,dtype:r,texShape:a,usage:n,isPacked:i,slice:s}=this.texData.get(e),o=s&&s.origDataId||e,l=this.dataRefCount.get(o);l>1?this.dataRefCount.set(o,l-1):(this.dataRefCount.delete(o),t!=null&&(this.numBytesInGPU-=this.computeBytes(a,r),this.textureManager.releaseTexture(t,a,n,i)));let u=this.texData.get(e);u.texture=null,u.texShape=null,u.isPacked=!1,u.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e,t=Dve){return ce().getBool("WEBGL_CPU_FORWARD")&&e.every(r=>this.texData.get(r.dataId).texture==null&&_.sizeFromShape(r.shape)<t)}getGPGPUContext(){return this.gpgpu}where(e){B.warn("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");let t=e.dataSync();return Mve(e.shape,t)}packedUnaryOp(e,t,r){let a=new Ko(e.shape,t),n=this.compileAndRun(a,[e],r);return gi().makeTensorFromTensorInfo(n)}abs(e){if(this.shouldExecuteOnCPU([e])&&e.dtype!=="complex64"){let a=Gz(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,a)}if(ce().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,LA,e.dtype);let t=new Zi(e.shape,LA),r=this.compileAndRun(t,[e]);return gi().makeTensorFromTensorInfo(r)}makeTensorInfo(e,t,r){let a;if(t==="string"&&r!=null&&r.length>0&&_.isString(r[0])){let n=r.map(i=>_.encodeString(i));a=this.write(n,e,t)}else a=this.write(r,e,t);return this.texData.get(a).usage=null,{dataId:a,shape:e,dtype:t}}makeOutput(e,t,r){return gi().makeTensorFromTensorInfo(this.makeTensorInfo(e,t,r),this)}unpackTensor(e){let t=new _ve(e.shape);return this.runWebGLProgram(t,[e],e.dtype)}packTensor(e){let t=new mve(e.shape),r=!0;return this.runWebGLProgram(t,[e],e.dtype,null,r)}packedReshape(e,t){let r=[Sl(e.shape),...$l(e.shape)],a={dtype:e.dtype,shape:r,dataId:e.dataId},n=[Sl(t),...$l(t)],i=new Yz(n,r),s=!0,o=[r],l=this.runWebGLProgram(i,[a],e.dtype,o,s);return{dataId:l.dataId,shape:t,dtype:l.dtype}}decode(e,t){let r=this.texData.get(e),{isPacked:a,shape:n,dtype:i}=r;if(t!=null){let d=_.sizeFromShape(n),p=t[0]*t[1]*4;_.assert(d<=p,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}let s=av(n),o;a?o=new Ege(s):o=new kge(s);let l=!0,u=[t!=null?t:_g(s)],c=this.runWebGLProgram(o,[{shape:s,dtype:i,dataId:e}],i,u,l,t);return{dtype:i,shape:n,dataId:c.dataId}}runWebGLProgram(e,t,r,a,n=!1,i){let s=this.makeTensorInfo(e.outputShape,r),o=this.texData.get(s.dataId);if(e.packedOutput&&(o.isPacked=!0),e.outPackingScheme===mh.DENSE){let g=i!=null?i:_g(e.outputShape);o.texShape=g.map(v=>v*2)}if(e.outTexUsage!=null&&(o.usage=e.outTexUsage),_.sizeFromShape(s.shape)===0)return o.values=_.getTypedArrayFromDType(s.dtype,0),s;let l=[],u=t.map(g=>{if(g.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let v=this.texData.get(g.dataId);if(v.texture==null){if(!e.packedInputs&&_.sizeFromShape(g.shape)<=ce().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:g.shape,texData:null,isUniform:!0,uniformValues:v.values};e.packedInputs&&(v.isPacked=!0,v.shape=g.shape)}if(this.uploadToGPU(g.dataId),!!v.isPacked!=!!e.packedInputs)g=v.isPacked?this.unpackTensor(g):this.packTensor(g),l.push(g),v=this.texData.get(g.dataId);else if(v.isPacked&&!gh(v.shape,g.shape)){let b=g,y=g.shape;g.shape=v.shape,g=this.packedReshape(g,y),l.push(g),v=this.texData.get(g.dataId),b.shape=y}return{shape:g.shape,texData:v,isUniform:!1}});this.uploadToGPU(s.dataId);let c={shape:s.shape,texData:o,isUniform:!1},d=xge(e,u,c),p=this.getAndSaveBinary(d,()=>yge(this.gpgpu,e,u,c)),f=this.activeTimers!=null,h;f&&(h=this.startTimer()),ce().get("ENGINE_COMPILE_ONLY")||wge(this.gpgpu,p,u,c,a),l.forEach(g=>this.disposeIntermediateTensorInfo(g)),f&&(h=this.endTimer(h),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(h)}));let m=ce().get("WEBGL_FLUSH_THRESHOLD");if(m>0){let g=_.now();g-this.lastGlFlushTime>m&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=g)}if(!ce().getBool("WEBGL_LAZILY_UNPACK")&&o.isPacked&&n===!1){let g=this.unpackTensor(s);return this.disposeIntermediateTensorInfo(s),g}return s}compileAndRun(e,t,r,a,n=!1){return r=r||t[0].dtype,this.runWebGLProgram(e,t,r,a,n)}getAndSaveBinary(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(ce().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(e=>{this.gpgpu.deleteProgram(this.binaryCache[e].webGLProgram),delete this.binaryCache[e]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement!="undefined"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return this.floatPrecisionValue==null&&(this.floatPrecisionValue=te(()=>{if(!ce().get("WEBGL_RENDER_FLOAT32_ENABLED")){let e=ce().getBool("DEBUG");ce().set("DEBUG",!1);let t=this.abs(et(1e-8)).dataSync()[0];if(ce().set("DEBUG",e),t>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return this.floatPrecision()===32?Rve:Ove}uploadToGPU(e){let t=this.texData.get(e),{shape:r,dtype:a,values:n,texture:i,usage:s,isPacked:o}=t;if(i!=null)return;let l=this.activeTimers!=null,u;l&&(u=_.now());let c=t.texShape;if(c==null&&(c=gz(r,o),t.texShape=c),n!=null){let d=av(r),p,f=c[1],h=c[0],m=n instanceof Uint8Array||n instanceof Uint8ClampedArray;(o||!m)&&([f,h]=vp(c[0],c[1])),o?p=new Ige(d,m):p=new $ge(d,m);let g=m?[h,f]:c,v=this.makeTensorInfo(g,a),b=this.texData.get(v.dataId);m?b.usage=ba.PIXELS:b.usage=ba.UPLOAD,b.texShape=g,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(v.dataId),f,h,n);let y=[[h,f]],w=!0,x=this.runWebGLProgram(p,[v],a,y,w),k=this.texData.get(x.dataId);t.texShape=k.texShape,t.isPacked=k.isPacked,t.usage=k.usage,ce().get("ENGINE_COMPILE_ONLY")?this.disposeData(x.dataId):(t.texture=k.texture,t.values=null,this.texData.delete(x.dataId)),this.disposeIntermediateTensorInfo(v),l&&(this.uploadWaitMs+=_.now()-u)}else{let d=this.acquireTexture(c,s,a,o);t.texture=d}}convertAndCacheOnCPU(e,t){let r=this.texData.get(e),{dtype:a}=r;return this.releaseGPUData(e),t!=null&&(r.values=zve(t,a)),r.values}acquireTexture(e,t,r,a){if(this.numBytesInGPU+=this.computeBytes(e,r),!this.warnedAboutMemory&&this.numBytesInGPU>this.numMBBeforeWarning*1024*1024){let n=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${n} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(e,t,a)}computeBytes(e,t){return e[0]*e[1]*_.bytesPerElement(t)}checkCompileCompletion(){for(let[,e]of Object.entries(this.binaryCache))this.checkCompletion_(e)}async checkCompileCompletionAsync(){let e=[];if(this.gpgpu.parallelCompilationExtension){for(let[,t]of Object.entries(this.binaryCache))e.push(this.checkCompletionAsync_(t));return Promise.all(e)}else{for(let[,t]of Object.entries(this.binaryCache)){let r=new Promise(a=>{try{this.checkCompletion_(t),a(!0)}catch(n){throw n}});e.push(r)}return Promise.all(e)}}async checkCompletionAsync_(e){return this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(e):(await fS(),this.checkCompletionAsync_(e))}checkCompletion_(e){if(this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)===!1)throw console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS)===!1?(iI(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.")):new Error("Failed to link vertex and fragment shaders.");return!0}getUniformLocations(){for(let[,e]of Object.entries(this.binaryCache)){let{uniformLocations:t,customUniformLocations:r,infLoc:a,nanLoc:n,inShapesLocations:i,inTexShapesLocations:s,outShapeLocation:o,outShapeStridesLocation:l,outTexShapeLocation:u}=Iz(this.gpgpu,e.program,e.webGLProgram);e.uniformLocations=t,e.customUniformLocations=r,e.infLoc=a,e.nanLoc=n,e.inShapesLocations=i,e.inTexShapesLocations=s,e.outShapeLocation=o,e.outShapeStridesLocation=l,e.outTexShapeLocation=u}}};E0.nextDataId=0;function zve(e,t){if(t==="float32"||t==="complex64")return e;if(t==="int32"||t==="bool"){let r=t==="int32"?new Int32Array(e.length):new Uint8Array(e.length);for(let a=0;a<r.length;++a)r[a]=Math.round(e[a]);return r}else throw new Error(`Unknown dtype ${t}`)}var Bve="3.18.0";function Kz(){ce().set("WEBGL_FORCE_F16_TEXTURES",!0)}Zh.isBrowser()&&ky("webgl",()=>new E0,2);var Vve={forceHalfFloat:Kz},Zz=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`,qc=class{constructor(e,t,r){this.variableNames=["A","B"],this.outputShape=B.assertAndGetBroadcastShape(t,r),this.enableShapeUniforms=Un(this.outputShape.length),this.userCode=`
      float binaryOperation(float a, float b) {
        ${e}
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}},C0=`
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;
`,Nm=class{constructor(e,t,r,a=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=B.assertAndGetBroadcastShape(t,r);let n=this.outputShape.length;this.enableShapeUniforms=Un(n);let i="";if(a)if(n===0||_.sizeFromShape(this.outputShape)===1)i=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(i=`
          ${Lt(n)} coords = getOutputCoords();
        `,n===1)this.enableShapeUniforms?i+=`
            result.y = (coords + 1) >= outShape ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `:i+=`
            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{let s=mn("coords",n);this.enableShapeUniforms?i+=`
            bool nextRowOutOfBounds =
              (${s[n-2]} + 1) >= outShape[${n} - 2];
            bool nextColOutOfBounds =
              (${s[n-1]} + 1) >= outShape[${n} - 1];
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `:i+=`
            bool nextRowOutOfBounds =
              (${s[n-2]} + 1) >= ${this.outputShape[n-2]};
            bool nextColOutOfBounds =
              (${s[n-1]} + 1) >= ${this.outputShape[n-1]};
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        ${e}
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        ${i}

        setOutput(result);
      }
    `}};function da(e){let{inputs:t,backend:r}=e,{x:a}=t;return r.incRef(a.dataId),{dataId:a.dataId,shape:a.shape,dtype:a.dtype}}var Wve={kernelName:Jl,backendName:"webgl",kernelFunc:da};function Io(e){let{inputs:t,backend:r}=e,{real:a,imag:n}=t,i=r.makeTensorInfo(a.shape,"complex64"),s=r.texData.get(i.dataId),o=da({inputs:{x:a},backend:r}),l=da({inputs:{x:n},backend:r});return s.complexTensorInfos={real:o,imag:l},i}var Hve={kernelName:Gb,backendName:"webgl",kernelFunc:Io},Qz="return (a < 0.) ? b * a : a;",Jz=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function Uve(e){let{inputs:t,backend:r,attrs:a}=e,{x:n}=t,{alpha:i}=a,s=r.makeTensorInfo([],"float32",_.createScalarValue(i,"float32")),o=ce().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Nm(Jz,n.shape,s.shape):new qc(Qz,n.shape,s.shape),l=r.runWebGLProgram(o,[n,s],"float32");return r.disposeIntermediateTensorInfo(s),l}var jve={kernelName:eu,backendName:"webgl",kernelFunc:Uve},eB="return (a < 0.) ? b * a : a;",tB=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function Gve(e){let{inputs:t,backend:r}=e,{x:a,alpha:n}=t,i=ce().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Nm(tB,a.shape,n.shape):new qc(eB,a.shape,n.shape);return r.runWebGLProgram(i,[a,n],"float32")}var qve={kernelName:fu,backendName:"webgl",kernelFunc:Gve},Ep="if (isnan(x)) return x;",Xve=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`,Yve=`
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;
`;function St({opSnippet:e,packedOpSnippet:t,cpuKernelImpl:r,dtype:a}){return({inputs:n,backend:i})=>{let{x:s}=n,o=i,l=a||s.dtype;if(o.shouldExecuteOnCPU([s])&&r!=null){let d=o.texData.get(s.dataId),p=r(d.values,l);return o.makeTensorInfo(s.shape,l,p)}let u=ce().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&t!=null,c;return u?c=new Ko(s.shape,t):c=new Zi(s.shape,e),o.runWebGLProgram(c,[s],l)}}function Kr({opSnippet:e,packedOpSnippet:t,checkOutOfBounds:r=!1,supportsComplex:a=!1,cpuKernelImpl:n,dtype:i}){return({inputs:s,backend:o})=>{let{a:l,b:u}=s,c=o;if(a&&l.dtype==="complex64"){let h=c.texData.get(l.dataId),m=c.texData.get(u.dataId),[g,v]=[[h.complexTensorInfos.real,m.complexTensorInfos.real],[h.complexTensorInfos.imag,m.complexTensorInfos.imag]].map(y=>{let[w,x]=y,k={dataId:w.dataId,dtype:w.dtype,shape:l.shape},C={dataId:x.dataId,dtype:x.dtype,shape:u.shape},E=new qc(e,l.shape,u.shape);return c.runWebGLProgram(E,[k,C],Ca(w.dtype,x.dtype))}),b=Io({inputs:{real:g,imag:v},backend:c});return c.disposeIntermediateTensorInfo(g),c.disposeIntermediateTensorInfo(v),b}let d=i||Ca(l.dtype,u.dtype);if((l.dtype==="string"||u.dtype==="string"||c.shouldExecuteOnCPU([l,u]))&&n!=null){let h=c.texData.get(l.dataId).values,m=c.texData.get(u.dataId).values,g=l.dtype==="string"?B.fromUint8ToStringArray(h):h,v=l.dtype==="string"?B.fromUint8ToStringArray(m):m,[b,y]=n(l.shape,u.shape,g,v,d),w=c.makeTensorInfo(y,d),x=c.texData.get(w.dataId);return x.values=b,w}let p=ce().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&t!=null,f;return p?f=new Nm(t,l.shape,u.shape,r):f=new qc(e,l.shape,u.shape),c.runWebGLProgram(f,[l,u],d)}}function S0(e,t=!1){if(e==="linear")return t?$ve:xve;if(e==="relu")return t?Tve:Eve;if(e==="elu")return t?Ive:kve;if(e==="relu6")return t?Nve:Cve;if(e==="prelu")return t?tB:eB;if(e==="leakyrelu")return t?Jz:Qz;if(e==="sigmoid")return t?Ave:Sve;throw new Error(`Activation ${e} has not been implemented for the WebGL backend.`)}var rB=class{constructor(e,t,r,a=!1,n=!1,i=!1,s=null,o=!1,l=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.enableShapeUniforms=Un(this.outputShape.length);let u=a?e[1]:e[2],c=Math.ceil(u/2),d=a?"i * 2, rc.y":"rc.y, i * 2",p=n?"rc.z, i * 2":"i * 2, rc.z",f=a?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],h=n?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],m="",g="";s&&(o?m=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${s}
        }`:l?m=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${s}
        }`:m=`vec4 activation(vec4 x) {
          ${s}
        }`,g="result = activation(result);");let v=i?"result += getBiasAtOutCoords();":"";i&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),l&&this.variableNames.push("leakyreluAlpha");let b="rc.x",y="rc.x";e[0]<t[0]?b=`int(min(float(rc.x), ${e[0]-1}.))`:t[0]<e[0]&&(y=`int(min(float(rc.x), ${t[0]-1}.))`),this.userCode=`
      ${m}
      // Don't use uniform for sharedDimensionPacked for performance.
      const float sharedDimension = ${c}.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        for (int i = 0; i < ${c}; i++) {
          int batchA = ${b};
          int batchB = ${y};
          vec4 a = getMatrixA(batchA, ${d});
          vec4 b = getMatrixB(batchB, ${p});

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (${f[0]} * ${h[0]});
          result += (${f[1]} * ${h[1]});
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        ${v}

        ${g}

        setOutput(result);
      }
    `}},zA={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"},BA=class{constructor(e,t,r){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=B.assertAndGetBroadcastShape(t,r),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        ${e}
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}},VA="return a * b;";function mI(e){let{inputs:t,backend:r}=e,{a,b:n}=t,i=B.upcastType(a.dtype,n.dtype);if(a.dtype==="complex64"){let o=r.texData.get(a.dataId),l=r.texData.get(n.dataId),u=new BA(zA.REAL,a.shape,n.shape),c=new BA(zA.IMAG,a.shape,n.shape),d=[{dataId:o.complexTensorInfos.real.dataId,dtype:o.complexTensorInfos.real.dtype,shape:a.shape},{dataId:o.complexTensorInfos.imag.dataId,dtype:o.complexTensorInfos.imag.dtype,shape:a.shape},{dataId:l.complexTensorInfos.real.dataId,dtype:l.complexTensorInfos.real.dtype,shape:n.shape},{dataId:l.complexTensorInfos.imag.dataId,dtype:l.complexTensorInfos.imag.dtype,shape:n.shape}],p=r.runWebGLProgram(u,d,"float32"),f=r.runWebGLProgram(c,d,"float32"),h=Io({inputs:{real:p,imag:f},backend:r});return r.disposeIntermediateTensorInfo(p),r.disposeIntermediateTensorInfo(f),h}if(r.shouldExecuteOnCPU([a,n])){let o=r.texData.get(a.dataId),l=r.texData.get(n.dataId),[u,c]=Xge(a.shape,n.shape,o.values,l.values,i),d=r.makeTensorInfo(c,i),p=r.texData.get(d.dataId);return p.values=u,d}let s;return ce().getBool("WEBGL_PACK_BINARY_OPERATIONS")?s=new Nm(VA,a.shape,n.shape):s=new qc(VA,a.shape,n.shape),r.runWebGLProgram(s,[a,n],i)}var Kve={kernelName:uu,backendName:"webgl",kernelFunc:mI};function Zve(e,t,r){let a=[Sl(e.shape),...$l(e.shape)],n={dtype:e.dtype,shape:a,dataId:e.dataId},i=[Sl(t),...$l(t)],s=new Yz(i,a),o=!0,l=[a],u=r.runWebGLProgram(s,[n],e.dtype,l,o);return{dataId:u.dataId,shape:t,dtype:u.dtype}}function ze(e){let{inputs:t,backend:r,attrs:a}=e,{x:n}=t,{shape:i}=a,s=r,o=_.sizeFromShape(n.shape),l=_.inferFromImplicitShape(i,o),u=_.sizeFromShape(l);_.assert(o===u,()=>`The new shape (${l}) has ${u} elements and the old shape (${n.shape}) has ${o} elements. The new shape and old shape must have the same number of elements.`);let c=s.texData.get(n.dataId);return c.isPacked&&!gh(n.shape,l)&&!(c.texture!==null&&gh(c.shape,l))?Zve(n,l,s):(s.incRef(n.dataId),{dataId:n.dataId,shape:l,dtype:n.dtype})}var Qve={kernelName:Hd,backendName:"webgl",kernelFunc:ze},WA=class{constructor(e,t){this.variableNames=["x"];let{windowSize:r,batchSize:a,inSize:n,outSize:i}=e;this.outputShape=[a,i];let s=Math.floor(r/4)*4,o=r%4,l="sumValue += dot(values, ones);";if(t!=null){let c=1/t;l=`sumValue += dot(values * ${_.isInt(c)?c.toPrecision(2):c}, ones);`}let u="";n%r>0&&(u=`
        if (inIdx < 0 || inIdx >= ${n}) {
          return 0.0;
        }
      `),this.userCode=`
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${u}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        float sumValue = 0.0;

        for (int i = 0; i < ${s}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${l}
        }

        int inIdx = inOffset + ${s};
        if (${o===1}) {
          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);

          ${l}
        } else if (${o===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1), 0.0, 0.0);

          ${l}
        } else if (${o===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2), 0.0);

          ${l}
        }
        setOutput(sumValue);
      }
    `}},Jve=class{constructor(e,t){this.variableNames=["x"];let{windowSize:r,batchSize:a,inSize:n,outSize:i}=e;this.outputShape=[a,i];let s="0.0",o="";t==="prod"?s="1.0":t==="min"?(s="1.0 / 1e-20",o="min"):t==="max"&&(s="-1.0 / 1e-20",o="max");let l=`${t}(${t}(${t}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;t==="sum"?l="sumValue":t==="prod"?l="prodValue":t==="all"?l="allValue":t==="any"&&(l="anyValue");let u=Math.floor(r/4)*4,c=r%4,d=`
      if (${t==="sum"}) {
        sumValue += dot(values, ones);
      } else if (${t==="prod"}) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = ${o}(values, minMaxValue);
        if (${t==="min"} || ${t==="max"}) {
          minMaxValue = ${o}(values, minMaxValue);
          bvec4 isNaN = isnan(values);
          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {
            minMaxValue = vec4(NAN);
          }
        }
      }
    `,p="vec4";t==="all"?(s="1.0",d=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,p="bvec4"):t==="any"&&(s="0.0",d=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,p="bvec4");let f="";n%r>0&&(f=`
        if (inIdx < 0 || inIdx >= ${n}) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = ${s};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${f}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        vec4 minMaxValue = vec4(${s});
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < ${u}; i += 4) {
          int inIdx = inOffset + i;
          ${p} values = ${p}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${d}
        }

        int inIdx = inOffset + ${u};
        if (${c===1}) {
          ${p} values = ${p}(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          ${d}
        } else if (${c===2}) {
          ${p} values = ${p}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          ${d}
        } else if (${c===3}) {
          ${p} values = ${p}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          ${d}
        }
        setOutput(${l});
      }
    `}};function ebe(e){let t=[];for(;t.length===0||t[t.length-1].outSize!==1;){let r=t.length?t[t.length-1].outSize:e[1],a=B.computeOptimalWindowSize(r);t.push({inSize:r,windowSize:a,outSize:Math.ceil(r/a)})}return t}function Fu(e,t,r,a){let n=ebe(e.shape),i=e;for(let s=0;s<n.length;s++){let{inSize:o,windowSize:l,outSize:u}=n[s],c,d;r==="mean"?c=s===0?new WA({windowSize:l,inSize:o,batchSize:e.shape[0],outSize:u},o):new WA({windowSize:l,inSize:o,batchSize:e.shape[0],outSize:u}):c=new Jve({windowSize:l,inSize:o,batchSize:e.shape[0],outSize:u},r),d=i,i=a.runWebGLProgram(c,[i],t),d.dataId!==e.dataId&&a.disposeIntermediateTensorInfo(d)}return i}var tbe=class{constructor(e,t){this.variableNames=["A"];let r=new Array(e.length);for(let i=0;i<r.length;i++)r[i]=e[t[i]];this.outputShape=r,this.rank=r.length;let a=Lt(this.rank),n=rbe(t);this.userCode=`
    void main() {
      ${a} resRC = getOutputCoords();
      setOutput(getA(${n}));
    }
    `}};function rbe(e){let t=e.length;if(t>6)throw Error(`Transpose for rank ${t} is not yet supported`);let r=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],a=new Array(t);for(let n=0;n<e.length;n++)a[e[n]]=r[n];return a.join()}var nbe=class{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;let r=new Array(e.length);for(let u=0;u<r.length;u++)r[u]=e[t[u]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);let a=Lt(this.rank),n=Xz("rc",this.rank),i=new Array(this.rank);for(let u=0;u<t.length;u++)i[t[u]]=n[u];let s=`vec2(${i.slice(-2).join()})`,o=`++${n[this.rank-1]} < ${r[this.rank-1]}`,l=`getChannel(getA(${i.join()}), ${s})`;this.userCode=`
    void main() {
      ${a} rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = ${l};
      if(${o}) {
        result[1] = ${l};
      }
      --${n[this.rank-1]};
      if(++${n[this.rank-2]} < ${r[this.rank-2]}) {
        result[2] = ${l};
        if(${o}) {
          result[3] = ${l};
        }
      }
      setOutput(result);
    }
    `}};function $0(e,t,r){let a=ce().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new nbe(e.shape,t):new tbe(e.shape,t);return r.runWebGLProgram(a,[e],e.dtype)}function abe(e,t,r,a){let n=t,i=e.shape.length,s=_.parseAxisParam(n,e.shape),o=s,l=B.getAxesPermutation(o,i),u=l!=null,c=e;u&&(c=$0(e,l,a),o=B.getInnerMostAxes(o.length,i)),B.assertAxesAreInnerMostDims("sum",o,i);let[d,p]=B.computeOutAndReduceShapes(c.shape,o),f=d;r&&(f=B.expandShapeToKeepDim(d,s));let h=_.sizeFromShape(p),m=_.sizeFromShape(e.shape)/h,g=ze({inputs:{x:c},attrs:{shape:[m,h]},backend:a}),v=xy(e.dtype),b=Fu(g,v,"sum",a),y=ze({inputs:{x:b},attrs:{shape:f},backend:a});return a.disposeIntermediateTensorInfo(g),a.disposeIntermediateTensorInfo(b),u&&a.disposeIntermediateTensorInfo(c),y}function I0(e){let{inputs:t,backend:r,attrs:a}=e,{x:n}=t,{axis:i,keepDims:s}=a;return abe(n,i,s,r)}var ibe={kernelName:Cu,backendName:"webgl",kernelFunc:I0};function Cr(e){let{inputs:t,backend:r,attrs:a}=e,{x:n}=t,{perm:i}=a,s=r,o=n.shape.length,l=new Array(o);for(let c=0;c<l.length;c++)l[c]=n.shape[i[c]];let u;if(s.shouldExecuteOnCPU([n])){let c=s.texData.get(n.dataId).values,d=hI(c,n.shape,n.dtype,i,l);u=s.makeTensorInfo(l,n.dtype);let p=s.texData.get(u.dataId);p.values=d}else u=$0(n,i,s);return u}var sbe={kernelName:ts,backendName:"webgl",kernelFunc:Cr},nB=1e3;function mb({a:e,b:t,transposeA:r,transposeB:a,backend:n,bias:i=null,preluActivationWeights:s=null,leakyreluAlpha:o=0,activation:l=null}){let u=e.shape.length,c=t.shape.length,d=r?e.shape[u-2]:e.shape[u-1],p=a?t.shape[c-1]:t.shape[c-2],f=r?e.shape[u-1]:e.shape[u-2],h=a?t.shape[c-2]:t.shape[c-1],m=e.shape.slice(0,-2),g=t.shape.slice(0,-2),v=_.sizeFromShape(m),b=_.sizeFromShape(g),y=sp.assertAndGetBroadcastShape(e.shape.slice(0,-2),t.shape.slice(0,-2)).concat([f,h]);_.assert(d===p,()=>`Error in matMul: inner shapes (${d}) and (${p}) of Tensors with shapes ${e.shape} and ${t.shape} and transposeA=${r} and transposeB=${a} must match.`);let w=r?[v,d,f]:[v,f,d],x=a?[b,h,p]:[b,p,h],k=ze({inputs:{x:e},backend:n,attrs:{shape:w}}),C=ze({inputs:{x:t},backend:n,attrs:{shape:x}}),E=[k,C],$=Math.max(v,b),N=r?k.shape[1]:k.shape[2],I=i!=null,S=s!=null,A=l==="leakyrelu",R=l!=null?S0(l,!0):null,O=I||S||A||R!=null,D;if((f===1||h===1)&&N>nB&&O===!1){let U=k,j=C;r&&(U=Cr({inputs:{x:k},backend:n,attrs:{perm:[0,2,1]}}),E.push(U)),a&&(j=Cr({inputs:{x:C},backend:n,attrs:{perm:[0,2,1]}}),E.push(j));let G=h!==1,L=h===1,V=U;G&&(V=ze({inputs:{x:U},backend:n,attrs:{shape:[$,N,1]}}),E.push(V));let H=h===1?2:1,Y=j;L&&(Y=ze({inputs:{x:j},backend:n,attrs:{shape:[$,1,N]}}),E.push(Y));let K=mI({inputs:{a:V,b:Y},backend:n});D=I0({inputs:{x:K},backend:n,attrs:{axis:H,keepDims:!0}}),E.push(K)}else{let U=Ca(e.dtype,t.dtype),j=new rB(w,x,[$,f,h],r,a,I,R,S,A),G=[k,C];if(i!=null&&G.push(i),S&&G.push(s),A){let L=n.makeTensorInfo([],"float32",_.createScalarValue(o,"float32"));G.push(L),E.push(L)}D=n.runWebGLProgram(j,G,U)}let z=ze({inputs:{x:D},backend:n,attrs:{shape:y}});E.push(D);for(let U of E)n.disposeIntermediateTensorInfo(U);return z}function obe(e){let{inputs:t,backend:r,attrs:a}=e,{a:n,b:i,bias:s,preluActivationWeights:o}=t,{transposeA:l,transposeB:u,activation:c,leakyreluAlpha:d}=a;return mb({a:n,b:i,transposeA:l,transposeB:u,backend:r,bias:s,preluActivationWeights:o,leakyreluAlpha:d,activation:c})}var lbe={kernelName:cl,backendName:"webgl",kernelFunc:obe},HA="return abs(x);";function ube(e){let{inputs:t,backend:r}=e,{x:a}=t;if(r.shouldExecuteOnCPU([a])&&a.dtype!=="complex64"){let i=r.texData.get(a.dataId),s=Gz(i.values);return r.makeTensorInfo(a.shape,a.dtype,s)}let n;return ce().getBool("WEBGL_PACK_UNARY_OPERATIONS")?n=new Ko(a.shape,HA):n=new Zi(a.shape,HA),r.runWebGLProgram(n,[a],a.dtype)}var cbe={kernelName:ad,backendName:"webgl",kernelFunc:ube},dbe=Ga+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,pbe=St({opSnippet:dbe}),fbe={kernelName:id,backendName:"webgl",kernelFunc:pbe},hbe=Ga+`
  if (x < 1.0) return NAN;
return log(x + sqrt(x * x - 1.0));`,mbe=St({opSnippet:hbe}),gbe={kernelName:sd,backendName:"webgl",kernelFunc:mbe},UA="return a + b;",vbe=Kr({opSnippet:UA,packedOpSnippet:UA,supportsComplex:!0,cpuKernelImpl:Nge}),bbe={kernelName:vo,backendName:"webgl",kernelFunc:vbe},ybe=class{constructor(e,t){this.outputShape=[],this.outputShape=e,this.variableNames=t.map((n,i)=>`T${i}`);let r=[];this.variableNames.forEach(n=>{r.push(`float v${n} = get${n}AtOutCoords();`)});let a=this.variableNames.map(n=>`v${n}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        float result = ${a};
        setOutput(result);
      }
    `}},wbe=class{constructor(e,t){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=t.map((n,i)=>`T${i}`);let r=[];this.variableNames.forEach(n=>{r.push(`vec4 v${n} = get${n}AtOutCoords();`)});let a=this.variableNames.map(n=>`v${n}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        vec4 result = ${a};
        setOutput(result);
      }
    `}};function lv(e){let{inputs:t,backend:r}=e,a=t;if(a.length===1)return da({inputs:{x:a[0]},backend:r});if(a.length>ce().get("WEBGL_MAX_TEXTURES_IN_SHADER")){let o=Math.floor(a.length/2),l=lv({inputs:a.slice(0,o),backend:r}),u=lv({inputs:a.slice(o),backend:r});return lv({inputs:[l,u],backend:r})}let n=a.map(o=>o.dtype).reduce((o,l)=>Ca(o,l)),i=a.map(o=>o.shape),s=ce().getBool("WEBGL_PACK")?new wbe(a[0].shape,i):new ybe(a[0].shape,i);return r.runWebGLProgram(s,a,n)}var xbe={kernelName:Ol,backendName:"webgl",kernelFunc:lv};function kbe(e){let{inputs:t,backend:r,attrs:a}=e,{x:n}=t,{axis:i,keepDims:s}=a,o=n.shape.length,l=_.parseAxisParam(i,n.shape),u=l,c=B.getAxesPermutation(u,o),d=n;c!=null&&(d=Cr({inputs:{x:n},backend:r,attrs:{perm:c}}),u=B.getInnerMostAxes(u.length,o)),B.assertAxesAreInnerMostDims("all",u,o);let[p,f]=B.computeOutAndReduceShapes(d.shape,u),h=_.sizeFromShape(f),m=ze({inputs:{x:d},backend:r,attrs:{shape:[-1,h]}}),g=Fu(m,m.dtype,"all",r),v;if(s){let b=B.expandShapeToKeepDim(p,l);v=ze({inputs:{x:g},backend:r,attrs:{shape:b}})}else v=ze({inputs:{x:g},backend:r,attrs:{shape:p}});return r.disposeIntermediateTensorInfo(m),r.disposeIntermediateTensorInfo(g),c!=null&&r.disposeIntermediateTensorInfo(d),v}var Ebe={kernelName:od,backendName:"webgl",kernelFunc:kbe};function Cbe(e){let{inputs:t,backend:r,attrs:a}=e,{x:n}=t,{axis:i,keepDims:s}=a,o=n.shape.length,l=_.parseAxisParam(i,n.shape),u=l,c=B.getAxesPermutation(u,o),d=n;c!=null&&(d=Cr({inputs:{x:n},backend:r,attrs:{perm:c}}),u=B.getInnerMostAxes(u.length,o)),B.assertAxesAreInnerMostDims("any",u,o);let[p,f]=B.computeOutAndReduceShapes(d.shape,u),h=_.sizeFromShape(f),m=ze({inputs:{x:d},backend:r,attrs:{shape:[-1,h]}}),g=Fu(m,m.dtype,"any",r),v;if(s){let b=B.expandShapeToKeepDim(p,l);v=ze({inputs:{x:g},backend:r,attrs:{shape:b}})}else v=ze({inputs:{x:g},backend:r,attrs:{shape:p}});return r.disposeIntermediateTensorInfo(m),r.disposeIntermediateTensorInfo(g),c!=null&&r.disposeIntermediateTensorInfo(d),v}var Sbe={kernelName:ld,backendName:"webgl",kernelFunc:Cbe},$be=class{constructor(e,t,r){this.variableNames=["A"];let{windowSize:a,batchSize:n,outSize:i}=e;r||this.variableNames.push("bestIndicesA"),this.outputShape=[n,i];let s=t==="max"?">":"<",o=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${a};

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < ${a}; i++) {
          int inIdx = ${o};
          float candidate = getA(batch, inIdx);
          if (candidate ${s} bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}},Ibe=class{constructor(e,t,r,a){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,_.assert(e.length>2,()=>`Packed arg${r.charAt(0).toUpperCase()+r.slice(1)} supports only inputs with rank above 2.`);let n=e[e.length-1],i=Math.ceil(n/t);this.outputShape=e.slice(0,-1),i>1&&this.outputShape.push(i),a||this.variableNames.push("bestIndicesA");let s=this.outputShape,o=s.length,l=Lt(o),u=mn("coords",o),c,d;if(i===1){d=o+1;let C=Lt(d);c=`
        ${C} sourceLocR = ${C}(${u.join()}, 0);
        ++${u[o-1]};
        ${C} sourceLocG = ${C}(${u.join()}, 0);
        ++${u[o-2]};
        ${C} sourceLocA = ${C}(${u.join()}, 0);
        --${u[o-1]};
        ${C} sourceLocB = ${C}(${u.join()}, 0);
        --${u[o-2]};`}else d=o,c=`
        ${l} sourceLocR = coords;
        ++${u[o-1]};
        ${l} sourceLocG = coords;
        ++${u[o-2]};
        ${l} sourceLocA = coords;
        --${u[o-1]};
        ${l} sourceLocB = coords;
        --${u[o-2]};`;let p=["x","y","z","w","u","v"].slice(0,d),f="."+p[d-1],h=p.map(C=>"int "+C),m=mn("sourceLocR",d-1).concat("inIdx.r"),g=mn("sourceLocG",d-1).concat("inIdx.g"),v=mn("sourceLocB",d-1).concat("inIdx.b"),b=mn("sourceLocA",d-1).concat("inIdx.a"),y=r==="max"?"greaterThan":"lessThan",w=a?"":`
          inIdx = round(vec4(getBestIndicesAChannel(${m.join()}),
                             getBestIndicesAChannel(${g.join()}),
                             getBestIndicesAChannel(${v.join()}),
                             getBestIndicesAChannel(${b.join()})));`,x=`vec4(
            getAChannel(${m.join()}),
            hasNextCol ? getAChannel(${g.join()}) : 0.,
            hasNextRow ? getAChannel(${v.join()}) : 0.,
            hasNextRow && hasNextCol ? getAChannel(${b.join()}) : 0.)`,k=a?"":`
      float getBestIndicesAChannel(${h.join()}) {
        return getChannel(getBestIndicesA(${p.join()}),
                                          vec2(${p.slice(-2).join()}));
      }`;this.userCode=`
      float getAChannel(${h.join()}) {
        return getChannel(getA(${p.join()}),
                               vec2(${p.slice(-2).join()}));
      }
      ${k}
      void main() {
        ${l} coords = getOutputCoords();
        bool hasNextCol = ${u[o-1]} < ${s[o-1]-1};
        bool hasNextRow = ${u[o-2]} < ${s[o-2]-1};
        ${c}
        ivec4 srcIdx = ivec4(sourceLocR${f}, sourceLocG${f},
          sourceLocB${f}, sourceLocA${f}) * ${t};
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = ${x};

        for (int i = 0; i < ${t}; i++) {
          inIdx = srcIdx;
          ${w}
          vec4 candidate = ${x};
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(${y}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}};function aB(e,t,r,a=null){let n=t.shape[0],i=t.shape[1];a!=null&&(n=a.shape[0],i=a.shape[1]);let s=B.computeOptimalWindowSize(i),o={windowSize:s,inSize:i,batchSize:n,outSize:Math.ceil(i/s)},l=new $be(o,r,a==null),u=[t];a!=null&&u.push(a);let c=e.runWebGLProgram(l,u,"int32");if(c.shape[1]===1)return c;let d=aB(e,t,r,c);return e.disposeIntermediateTensorInfo(c),d}function iB(e,t,r,a=null){let n=a!=null?a.shape:t.shape,i=n[n.length-1],s=B.computeOptimalWindowSize(i),o=new Ibe(n,s,r,a==null),l=a==null?[t]:[t,a],u=e.runWebGLProgram(o,l,"int32");if(u.shape.length===t.shape.length){let c=iB(e,t,r,u);return e.disposeIntermediateTensorInfo(u),c}return u}function sB(e,t,r,a){let n=[r];if(B.assertAxesAreInnerMostDims("arg"+a.charAt(0).toUpperCase()+a.slice(1),n,t.shape.length),!ce().getBool("WEBGL_PACK_REDUCE")||t.shape.length<=2){let i=[],s=e.texData.get(t.dataId),o=s!==null&&s.isPacked,l=t;o&&(l=e.unpackTensor(t),i.push(l));let[u,c]=B.computeOutAndReduceShapes(l.shape,n),d=_.sizeFromShape(c),p=ze({inputs:{x:l},backend:e,attrs:{shape:[-1,d]}});i.push(p);let f=aB(e,p,a);i.push(f);let h=ze({inputs:{x:f},backend:e,attrs:{shape:u}});return i.forEach(m=>e.disposeIntermediateTensorInfo(m)),h}return iB(e,t,a)}function Tbe(e){let{inputs:t,backend:r,attrs:a}=e,{x:n}=t,{axis:i}=a,s=_.parseAxisParam(i,n.shape),o=B.getAxesPermutation(s,n.shape.length),l=n,u=[];o!=null&&(l=Cr({inputs:{x:n},backend:r,attrs:{perm:o}}),u.push(l),s=B.getInnerMostAxes(s.length,l.shape.length)),B.assertAxesAreInnerMostDims("argMax",[s[0]],l.shape.length);let c=sB(r,l,s[0],"max");return u.forEach(d=>r.disposeIntermediateTensorInfo(d)),c}var Nbe={kernelName:Pl,backendName:"webgl",kernelFunc:Tbe};function Abe(e){let{inputs:t,backend:r,attrs:a}=e,{x:n}=t,{axis:i}=a,s=_.parseAxisParam(i,n.shape),o=B.getAxesPermutation(s,n.shape.length),l=n,u=[];o!=null&&(l=Cr({inputs:{x:n},backend:r,attrs:{perm:o}}),u.push(l),s=B.getInnerMostAxes(s.length,l.shape.length)),B.assertAxesAreInnerMostDims("argMin",[s[0]],l.shape.length);let c=sB(r,l,s[0],"min");return u.forEach(d=>r.disposeIntermediateTensorInfo(d)),c}var _be={kernelName:_h,backendName:"webgl",kernelFunc:Abe},Mbe=Ga+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,Rbe=St({opSnippet:Mbe}),Obe={kernelName:ud,backendName:"webgl",kernelFunc:Rbe},Pbe=Ga+"return log(x + sqrt(x * x + 1.0));",Dbe=St({opSnippet:Pbe}),Fbe={kernelName:cd,backendName:"webgl",kernelFunc:Dbe},Lbe=Ga+`
  return atan(x);
`,zbe=St({opSnippet:Lbe}),Bbe={kernelName:dd,backendName:"webgl",kernelFunc:zbe},Vbe=Xve+`
  return atan(a, b);
`,Wbe=`
  vec4 result = atan(a, b);
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  `+Yve+`
  return result;
`,Hbe=Kr({opSnippet:Vbe,packedOpSnippet:Wbe}),Ube={kernelName:fd,backendName:"webgl",kernelFunc:Hbe},jbe=Ga+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,Gbe=St({opSnippet:jbe}),qbe={kernelName:pd,backendName:"webgl",kernelFunc:Gbe},vh=class{constructor(e,t,r,a=!1,n=!1){if(this.variableNames=["x"],t==="avg"&&r)throw new Error("Cannot compute positions for average pool.");let i=e.filterWidth,s=e.strideHeight,o=e.strideWidth,l=e.dilationHeight,u=e.dilationWidth,c=e.effectiveFilterHeight,d=e.effectiveFilterWidth,p=e.padInfo.top,f=e.padInfo.left;this.outputShape=e.outShape;let h=t==="avg",m=`((batch  * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + d`,g=`(xR * ${e.inWidth} + xC) * ${e.inChannels} + d`,v="0.0";if(h||(v="-1.0 / 1e-20"),r){let C=">=";this.userCode=`
        const ivec2 strides = ivec2(${s}, ${o});
        const ivec2 pads = ivec2(${p}, ${f});

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < ${c};
              wR += ${l}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${d};
                wC += ${u}) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value ${C} currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = ${a?n?m:g:`wR * ${d} + wC`};
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}let b="max",y=`${t}(${t}(${t}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;t==="avg"&&(y="avgValue / count");let w=Math.floor(i/4)*4,x=i%4,k=`
      if (${h}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${b}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(${s}, ${o});
      const ivec2 pads = ivec2(${p}, ${f});
      const float initializationValue = ${v};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(${v});
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < ${c};
            wR += ${l}) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${w}; wC += 4) {
            int xC = xCCorner + wC * ${u};

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${u}, d),
              getValue(batch, xR, xC + 2 * ${u}, d),
              getValue(batch, xR, xC + 3 * ${u}, d)
            );

            ${k}
          }

          int xC = xCCorner + ${w};
          if (${x===1}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            ${k}
          } else if (${x===2}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${u}, d),
              initializationValue,
              initializationValue
            );

            ${k}
          } else if (${x===3}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${u}, d),
              getValue(batch, xR, xC + 2 * ${u}, d),
              initializationValue
            );

            ${k}
          }
        }
        setOutput(${y});
      }
    `}},gI=class{constructor(e,t,r,a=!1,n=!1){if(this.variableNames=["x"],t==="avg"&&r)throw new Error("Cannot compute positions for average pool.");let i=e.filterWidth,s=e.strideDepth,o=e.strideHeight,l=e.strideWidth,u=e.dilationDepth,c=e.dilationHeight,d=e.dilationWidth,p=e.effectiveFilterDepth,f=e.effectiveFilterHeight,h=e.effectiveFilterWidth,m=e.padInfo.front,g=e.padInfo.top,v=e.padInfo.left;this.outputShape=e.outShape;let b=t==="avg",y="0.0";if(b||(y="-1.0 / 1e-20"),r){let $=">=";this.userCode=`
        const ivec3 strides =
            ivec3(${s}, ${o}, ${l});
        const ivec3 pads = ivec3(${m}, ${g}, ${v});

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < ${p};
              wD += ${u}) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= ${e.inDepth}) {
              continue;
            }

            for (int wR = 0; wR < ${f};
                wR += ${c}) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int wC = 0; wC < ${h};
                  wC += ${d}) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value ${$} currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = ${a?n?`(((batch * ${e.inDepth} + xD) * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`((xD * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`wD * ${f} * ${h} +
                      wR * ${h} + wC`};
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}let w="max",x=`${t}(${t}(${t}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;t==="avg"&&(x="avgValue / count");let k=Math.floor(i/4)*4,C=i%4,E=`
      if (${b}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${w}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(${s}, ${o}, ${l});
      const ivec3 pads = ivec3(${m}, ${g}, ${v});
      const float initializationValue = ${y};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(${y});
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < ${p};
            wD += ${u}) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${f};
            wR += ${c}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${k}; wC += 4) {
              int xC = xCCorner + wC * ${d};

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${d}, ch),
                getValue(batch, xD, xR, xC + 2 * ${d}, ch),
                getValue(batch, xD, xR, xC + 3 * ${d}, ch)
              );

              ${E}
            }

            int xC = xCCorner + ${k};
            if (${C===1}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              ${E}
            } else if (${C===2}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${d}, ch),
                initializationValue,
                initializationValue
              );

              ${E}
            } else if (${C===3}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${d}, ch),
                getValue(batch, xD, xR, xC + 2 * ${d}, ch),
                initializationValue
              );

              ${E}
            }
          }
          setOutput(${x});
        }
      }
    `}};function Xbe(e){let{inputs:t,backend:r,attrs:a}=e,{x:n}=t;bp(n,"avgPool");let{filterSize:i,strides:s,pad:o,dimRoundingMode:l}=a,u=1;_.assert(B.eitherStridesOrDilationsAreOne(s,u),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${s} and dilations '${u}'`);let c=B.computePool2DInfo(n.shape,i,s,u,o,l);if(c.filterWidth===1&&c.filterHeight===1&&_.arraysEqual(c.inShape,c.outShape))return da({inputs:{x:n},backend:r});let d=new vh(c,"avg",!1);return r.runWebGLProgram(d,[n],"float32")}var Ybe={kernelName:Dl,backendName:"webgl",kernelFunc:Xbe};function Kbe(e){let{inputs:t,backend:r,attrs:a}=e,{x:n}=t,{filterSize:i,strides:s,pad:o,dimRoundingMode:l,dataFormat:u}=a,c=[1,1,1],d=B.computePool3DInfo(n.shape,i,s,c,o,l,u),p=new gI(d,"avg",!1);return r.runWebGLProgram(p,[n],"float32")}var Zbe={kernelName:Mh,backendName:"webgl",kernelFunc:Kbe},Qbe=class{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;let t=e.filterHeight,r=e.filterWidth,a=e.strideHeight,n=e.strideWidth,i=e.dilationHeight,s=e.dilationWidth,o=e.effectiveFilterHeight,l=e.effectiveFilterWidth,u=o-1-e.padInfo.top,c=l-1-e.padInfo.left,d=1/(t*r);this.userCode=`
      const ivec2 pads = ivec2(${u}, ${c});
      const float avgMultiplier = float(${d});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${o};
            wR += ${i}) {
          float dyR = float(dyRCorner + wR) / ${a}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${l};
            wC+= ${s}) {
            float dyC = float(dyCCorner + wC) / ${n}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}},Jbe=class{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;let t=e.filterDepth,r=e.filterHeight,a=e.filterWidth,n=e.strideDepth,i=e.strideHeight,s=e.strideWidth,o=e.dilationDepth,l=e.dilationHeight,u=e.dilationWidth,c=e.effectiveFilterDepth,d=e.effectiveFilterHeight,p=e.effectiveFilterWidth,f=c-1-e.padInfo.front,h=d-1-e.padInfo.top,m=p-1-e.padInfo.left,g=1/(t*r*a);this.userCode=`
      const ivec3 pads = ivec3(${f}, ${h}, ${m});
      const float avgMultiplier = float(${g});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${c};
            wD += ${o}) {
          float dyD = float(dyDCorner + wD) / ${n}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${d};
              wR += ${l}) {
            float dyR = float(dyRCorner + wR) / ${i}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${p};
                wC += ${u}) {
              float dyC = float(dyCCorner + wC) / ${s}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `}};function eye(e){let{inputs:t,backend:r,attrs:a}=e,{dy:n,input:i}=t,s=i,{filterSize:o,strides:l,pad:u,dimRoundingMode:c}=a,d=[1,1,1],p=B.computePool3DInfo(s.shape,o,l,d,u,c),f=new Jbe(p);return r.runWebGLProgram(f,[n],s.dtype)}var tye={kernelName:Hb,backendName:"webgl",kernelFunc:eye};function rye(e){let{inputs:t,backend:r,attrs:a}=e,{dy:n,input:i}=t,s=i;bp([n,i],"avgPoolGrad");let{filterSize:o,strides:l,pad:u}=a,c=B.computePool2DInfo(s.shape,o,l,1,u),d=new Qbe(c);return r.runWebGLProgram(d,[n],s.dtype)}var nye={kernelName:Wb,backendName:"webgl",kernelFunc:rye};function aye(e){let{inputs:t,backend:r,attrs:a}=e,{a:n,b:i}=t,{transposeA:s,transposeB:o}=a;return mb({a:n,b:i,transposeA:s,transposeB:o,backend:r})}var iye={kernelName:Fl,backendName:"webgl",kernelFunc:aye},sye=class{constructor(e,t,r,a,n,i){this.outputShape=[],this.variableNames=["x","mean","variance"],B.assertAndGetBroadcastShape(e,t),B.assertAndGetBroadcastShape(e,r);let s="0.0";a!=null&&(B.assertAndGetBroadcastShape(e,a),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");let o="1.0";n!=null&&(B.assertAndGetBroadcastShape(e,n),this.variableNames.push("scale"),o="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = ${s};
        float scale = ${o};
        float inv = scale * inversesqrt(variance + float(${i}));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}},oye=class{constructor(e,t,r,a,n,i){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],B.assertAndGetBroadcastShape(e,t),B.assertAndGetBroadcastShape(e,r);let s="vec4(0.0)";a!=null&&(B.assertAndGetBroadcastShape(e,a),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");let o="vec4(1.0)";n!=null&&(B.assertAndGetBroadcastShape(e,n),this.variableNames.push("scale"),o="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        vec4 offset = ${s};
        vec4 scale = ${o};

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(${i}));

        setOutput((x - mean) * inv + offset);
      }
    `}},lye=({inputs:e,backend:t,attrs:r})=>{let{x:a,mean:n,variance:i,offset:s,scale:o}=e;_.assert(n.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),_.assert(s==null||n.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),_.assert(o==null||n.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:l}=r;l==null&&(l=.001);let u=[a,n,i],c=null;s!=null&&(c=s.shape,u.push(s));let d=null;o!=null&&(d=o.shape,u.push(o));let p=ce().getBool("WEBGL_PACK_NORMALIZATION")?new oye(a.shape,n.shape,i.shape,c,d,l):new sye(a.shape,n.shape,i.shape,c,d,l);return t.runWebGLProgram(p,u,u[0].dtype)},uye={kernelName:Zl,backendName:"webgl",kernelFunc:lye},cye=class{constructor(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;let t=Lt(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];let r=dye(this.rank),a,n=e.map((i,s)=>`sourceLoc.${Vk[s]} = start[${s}] + coords.${Vk[s]};`);a=`
        ${t} sourceLoc;
        ${t} coords = getOutputCoords();
        ${n.join(`
`)}
      `,this.userCode=`
      void main() {
        ${a}
        setOutput(getSource(${r}));
      }
    `}},Vk=["x","y","z","w","u","v"];function dye(e){if(e===1)return"sourceLoc";if(e<=6)return Vk.slice(0,e).map(t=>"sourceLoc."+t).join(",");throw Error(`Slicing for rank ${e} is not yet supported`)}var pye=class{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];let t=Lt(this.rank),r=mn("coords",this.rank),a=mn("sourceLoc",this.rank),n=this.rank===1?"sourceLoc":`vec2(${a.slice(-2).join()})`,i=`getChannel(getSource(${a.join()}), ${n})`,s=`
      result.x = ${i};
      if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
        ++${a[this.rank-1]};
        result.y = ${i};
        --${a[this.rank-1]};
      }
    `,o=this.rank===1?"":`
      --${r[this.rank-1]};
      if (++${r[this.rank-2]} < ${e[this.rank-2]}) {
        ++${a[this.rank-2]};
        result.z = ${i};
        if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
          ++${a[this.rank-1]};
          result.w = ${i};
        }
      }
    `,l=this.rank<=4?`sourceLoc = coords +
            ${t}(${e.map((u,c)=>`start[${c}]`).join()});`:e.map((u,c)=>`${a[c]} = ${r[c]} + start[${c}];`).join(`
`);this.userCode=`
      void main() {
        ${t} coords = getOutputCoords();
        ${t} sourceLoc;
        ${l}
        vec4 result = vec4(0.);
        ${s}
        ${o}
        setOutput(result);
      }
    `}};function fye(e,t,r,a){let n=a.texData.get(e.dataId),i=a.makeTensorInfo(r,e.dtype),s=a.texData.get(i.dataId);Object.assign(s,n),s.refCount=1,s.shape=r,s.dtype=e.dtype;let o=Mr.computeFlatOffset(t,_.computeStrides(e.shape));n.slice&&(o+=n.slice.flatOffset),s.slice={flatOffset:o,origDataId:n.slice&&n.slice.origDataId||e.dataId};let l=a.dataRefCount.get(s.slice.origDataId)||1;return a.dataRefCount.set(s.slice.origDataId,l+1),i}function Cp(e){let{inputs:t,backend:r,attrs:a}=e,{x:n}=t,{begin:i,size:s}=a,[o,l]=Mr.parseSliceParams(n,i,s);if(Mr.assertParamsValid(n,o,l),_.sizeFromShape(l)===0)return r.makeTensorInfo(l,n.dtype,[]);if(r.shouldExecuteOnCPU([n])||n.dtype==="string"){let d=r.texData.get(n.dataId),p=rve(d.values,o,l,n.shape,n.dtype);return r.makeTensorInfo(l,n.dtype,p)}let{isPacked:u}=r.texData.get(n.dataId),c=Mr.isSliceContinous(n.shape,o,l);if(u||!c){let d=ce().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new pye(l):new cye(l),p=[o];return r.runWebGLProgram(d,[n],n.dtype,p)}return r.uploadToGPU(n.dataId),fye(n,o,l,r)}var hye={kernelName:qd,backendName:"webgl",kernelFunc:Cp},mye=e=>{let{inputs:t,backend:r,attrs:a}=e,{x:n}=t,{blockShape:i,crops:s}=a;_.assert(n.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");let o=i.reduce((b,y)=>b*y),l=B.getReshaped(n.shape,i,o),u=B.getPermuted(l.length,i.length),c=B.getReshapedPermuted(n.shape,i,o),d=B.getSliceBeginCoords(s,i.length),p=B.getSliceSize(c,s,i.length),f=[],h=ze({inputs:{x:n},backend:r,attrs:{shape:l}}),m=Cr({inputs:{x:h},backend:r,attrs:{perm:u}}),g=ze({inputs:{x:m},backend:r,attrs:{shape:c}}),v=Cp({inputs:{x:g},backend:r,attrs:{begin:d,size:p}});return f.push(h),f.push(m),f.push(g),f.forEach(b=>r.disposeIntermediateTensorInfo(b)),v},gye={kernelName:hd,backendName:"webgl",kernelFunc:mye};function vye(e){let{inputs:t,backend:r,attrs:a}=e,{x:n,weights:i}=t,{size:s}=a,o=r.readSync(n.dataId),l=r.readSync(i.dataId),u=jz(o,l,i.dtype,i.shape,s);return r.makeTensorInfo([s],i.dtype,u)}var bye={kernelName:Ub,backendName:"webgl",kernelFunc:vye};function yye(e){let{inputs:t,backend:r}=e,{s0:a,s1:n}=t,i=r.readSync(a.dataId),s=r.readSync(n.dataId),o=B.assertAndGetBroadcastShape(Array.from(i),Array.from(s));return r.makeTensorInfo([o.length],"int32",Int32Array.from(o))}var wye={kernelName:jb,backendName:"webgl",kernelFunc:yye},xye="return float(a != b);",oB=Kr({opSnippet:xye,cpuKernelImpl:Kge,dtype:"bool"}),kye={kernelName:Dd,backendName:"webgl",kernelFunc:oB};function Am(e){let{inputs:t,backend:r}=e,{input:a}=t,n=r.texData.get(a.dataId);return da({inputs:{x:n.complexTensorInfos.real},backend:r})}var Eye={kernelName:dy,backendName:"webgl",kernelFunc:Am},Cye="return float(int(x));";function Sye(e,t){let r=new Zi(e.shape,Cye),a=t.runWebGLProgram(r,[e],"int32");return{dataId:a.dataId,shape:a.shape,dtype:a.dtype}}function Wk(e){let{inputs:t,backend:r,attrs:a}=e,{x:n}=t,{dtype:i}=a;if(i==="complex64"){if(n.dtype==="complex64")return da({inputs:{x:n},backend:r});let s=Jt(n.shape),o=Wk({inputs:{x:n},backend:r,attrs:{dtype:"float32"}}),l=Io({inputs:{real:o,imag:s},backend:r});return s.dispose(),r.disposeIntermediateTensorInfo(o),l}if(n.dtype==="complex64"){let s=Am({inputs:{input:n},backend:r}),o=Wk({inputs:{x:s},backend:r,attrs:{dtype:i}});return r.disposeIntermediateTensorInfo(s),o}if(!_.hasEncodingLoss(n.dtype,i)){let s=da({inputs:{x:n},backend:r});return{dataId:s.dataId,shape:s.shape,dtype:i}}if(i==="int32")return Sye(n,r);if(i==="bool"){let s=r.makeTensorInfo([],"bool",_.getTypedArrayFromDType("bool",1)),o=oB({inputs:{a:n,b:s},backend:r});return r.disposeIntermediateTensorInfo(s),o}throw new Error(`Error in Cast: failed to cast ${n.dtype} to ${i}`)}var $ye={kernelName:Ll,backendName:"webgl",kernelFunc:Wk},jA="return ceil(x);",Iye=St({opSnippet:jA,packedOpSnippet:jA,cpuKernelImpl:_ge}),Tye={kernelName:zl,backendName:"webgl",kernelFunc:Iye},Nye=class{constructor(e){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}},Aye=class{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`
      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}};function _ye(e){let{inputs:t,backend:r,attrs:a}=e,{x:n}=t,{clipValueMin:i,clipValueMax:s}=a,o;ce().getBool("WEBGL_PACK_CLIP")?o=new Aye(n.shape):o=new Nye(n.shape);let l=[[i],[s]];return r.runWebGLProgram(o,[n],n.dtype,l)}var Mye={kernelName:bo,backendName:"webgl",kernelFunc:_ye},Rye=class{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}};function GA(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}}function Oye(e){let{inputs:t,backend:r}=e,{x:a}=t,n=r.texData.get(a.dataId),i=new Rye(a.shape),s=[GA(a,n.complexTensorInfos.real),GA(a,n.complexTensorInfos.imag)];return r.runWebGLProgram(i,s,s[0].dtype)}var Pye={kernelName:Rh,backendName:"webgl",kernelFunc:Oye},Dye=class{constructor(e){this.outputShape=[],this.outputShape=B.computeOutShape(e,1),this.variableNames=e.map((i,s)=>`T${s}`);let t=new Array(e.length-1);t[0]=e[0][1];for(let i=1;i<t.length;i++)t[i]=t[i-1]+e[i][1];let r=[`if (yC < ${t[0]}) setOutput(getT0(yR, yC));`];for(let i=1;i<t.length;i++){let s=t[i-1];r.push(`else if (yC < ${t[i]}) setOutput(getT${i}(yR, yC-${s}));`)}let a=t.length,n=t[t.length-1];r.push(`else setOutput(getT${a}(yR, yC-${n}));`),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        ${r.join(`
        `)}
      }
    `}},Fye=class{constructor(e,t){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=B.computeOutShape(e,t);let r=this.outputShape,a=r.length,n=Lt(a),i=mn("coords",a),s=["x","y","z","w","u","v"].slice(0,a);this.variableNames=e.map((h,m)=>`T${m}`);let o=new Array(e.length-1);o[0]=e[0][t];for(let h=1;h<o.length;h++)o[h]=o[h-1]+e[h][t];let l=s[t],u=s.slice(-2),c=s.join(),d=`if (${l} < ${o[0]}) {
        return getChannel(
            getT0(${c}), vec2(${u.join()}));
        }`;for(let h=1;h<o.length;h++){let m=o[h-1];d+=`
        if (${l} < ${o[h]}  && ${l} >= ${o[h-1]}) {
          return getChannel(
            getT${h}(${Rg(s,l,m)}),
            vec2(${Rg(u,l,m)}));
        }`}let p=o.length,f=o[o.length-1];d+=`
        return getChannel(
          getT${p}(${Rg(s,l,f)}),
          vec2(${Rg(u,l,f)}));`,this.userCode=`
      float getValue(${s.map(h=>"int "+h)}) {
        ${d}
      }

      void main() {
        ${n} coords = getOutputCoords();
        vec4 result = vec4(getValue(${i}), 0., 0., 0.);

        ${i[a-1]} = ${i[a-1]} + 1;
        if (${i[a-1]} < ${r[a-1]}) {
          result.g = getValue(${i});
        }

        ${i[a-2]} = ${i[a-2]} + 1;
        if (${i[a-2]} < ${r[a-2]}) {
          result.a = getValue(${i});
        }

        ${i[a-1]} = ${i[a-1]} - 1;
        if (${i[a-2]} < ${r[a-2]} &&
            ${i[a-1]} < ${r[a-1]}) {
          result.b = getValue(${i});
        }
        setOutput(result);
      }
    `}};function Rg(e,t,r){let a=e.indexOf(t);return e.map((n,i)=>i===a?`${n} - ${r}`:n).join()}function T0(e){let{inputs:t,backend:r}=e,{input:a}=t,n=r.texData.get(a.dataId);return da({inputs:{x:n.complexTensorInfos.imag},backend:r})}var Lye={kernelName:ay,backendName:"webgl",kernelFunc:T0};function Ju(e,t,r){let a=e[0].dtype;if(a==="complex64"){let c=e.map(m=>Am({inputs:{input:m},backend:r})),d=e.map(m=>T0({inputs:{input:m},backend:r})),p=Ju(c,t,r),f=Ju(d,t,r),h=Io({inputs:{real:p,imag:f},backend:r});return c.forEach(m=>r.disposeIntermediateTensorInfo(m)),d.forEach(m=>r.disposeIntermediateTensorInfo(m)),r.disposeIntermediateTensorInfo(p),r.disposeIntermediateTensorInfo(f),h}let n=r.shouldExecuteOnCPU(e);if(a==="string"&&(n=!0),n){let c=e.map(v=>{let b=_.sizeFromShape(v.shape.slice(t));return ze({inputs:{x:v},backend:r,attrs:{shape:[-1,b]}})}),d=c.map(v=>({vals:r.readSync(v.dataId),shape:v.shape})),p=B.computeOutShape(c.map(v=>v.shape),1),f=c[0].shape[0]===1,h=Mge(d,p,a,f),m=B.computeOutShape(e.map(v=>v.shape),t),g=r.makeTensorInfo(m,a,h);return c.forEach(v=>r.disposeIntermediateTensorInfo(v)),g}if(e.length>ce().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){let c=Math.floor(e.length/2),d=Ju(e.slice(0,c),t,r),p=Ju(e.slice(c),t,r),f=Ju([d,p],t,r);return r.disposeIntermediateTensorInfo(d),r.disposeIntermediateTensorInfo(p),f}if(ce().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&e[0].shape.length>1){let c=new Fye(e.map(d=>d.shape),t);return r.runWebGLProgram(c,e,a)}let{tensors2D:i,outShape:s}=zye(e,t,r),o=new Dye(i.map(c=>c.shape)),l=r.runWebGLProgram(o,i,a);i.forEach(c=>r.disposeIntermediateTensorInfo(c));let u=ze({inputs:{x:l},attrs:{shape:s},backend:r});return r.disposeIntermediateTensorInfo(l),u}function zye(e,t,r){let a=B.computeOutShape(e.map(n=>n.shape),t);return{tensors2D:e.map(n=>ze({inputs:{x:n},attrs:{shape:[-1,_.sizeFromShape(n.shape.slice(t))]},backend:r})),outShape:a}}function lB(e){let{inputs:t,backend:r,attrs:a}=e,{axis:n}=a,i=_.parseAxisParam(n,t[0].shape)[0],s=B.computeOutShape(t.map(u=>u.shape),i);if(_.sizeFromShape(s)===0)return r.makeTensorInfo(s,t[0].dtype,[]);let o=t.filter(u=>_.sizeFromShape(u.shape)>0);if(o.length===1)return da({inputs:{x:o[0]},backend:r});let l=o.map(u=>u.shape);return B.assertParamsConsistent(l,i),Ju(o,i,r)}var Bye={kernelName:md,backendName:"webgl",kernelFunc:lB},uB=class{constructor(e,t=!1,r=null,a=!1,n=!1){this.variableNames=["x","W"],this.outputShape=e.outShape;let i=e.padInfo.top,s=e.padInfo.left,o=e.strideHeight,l=e.strideWidth,u=e.dilationHeight,c=e.dilationWidth,d=e.filterHeight,p=e.filterWidth,f=Math.floor(e.inChannels/4)*4,h=e.inChannels%4,m=e.dataFormat==="channelsLast",g=m?1:2,v=m?2:3,b=m?3:1,y="",w="";r&&(a?y=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:n?y=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:y=`
          float activation(float x) {
            ${r}
          }
        `,w="result = activation(result);");let x=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),n&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${y}

      const ivec2 strides = ivec2(${o}, ${l});
      const ivec2 pads = ivec2(${i}, ${s});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[${b}];

        ivec2 xRCCorner =
            ivec2(coords[${g}], coords[${v}]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${d}; wR++) {
          int xR = xRCorner + wR * ${u};

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${p}; wC++) {
            int xC = xCCorner + wC * ${c};

            if (xC < 0 || xC >= ${e.inWidth}) {
              continue;
            }

            for (int d1 = 0; d1 < ${f}; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (${m}) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (${h===1}) {

              if (${m}) {
                dotProd +=
                    getX(batch, xR, xC, ${f}) *
                    getW(wR, wC, ${f}, d2);
              } else {
                dotProd +=
                    getX(batch, ${f}, xR, xC) *
                    getW(wR, wC, ${f}, d2);
              }

            } else if (${h===2}) {
              vec2 wValues = vec2(
                getW(wR, wC, ${f}, d2),
                getW(wR, wC, ${f} + 1, d2)
              );

              if (${m}) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, ${f}),
                  getX(batch, xR, xC, ${f} + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, ${f}, xR, xC),
                  getX(batch, ${f} + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (${h===3}) {
              vec3 wValues = vec3(
                getW(wR, wC, ${f}, d2),
                getW(wR, wC, ${f} + 1, d2),
                getW(wR, wC, ${f} + 2, d2)
              );

              if (${m}) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, ${f}),
                  getX(batch, xR, xC, ${f} + 1),
                  getX(batch, xR, xC, ${f} + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, ${f}, xR, xC),
                  getX(batch, ${f} + 1, xR, xC),
                  getX(batch, ${f} + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        ${x}
        ${w}
        setOutput(result);
      }
    `}},Vye=class{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;let t=e.padInfo.front,r=e.padInfo.top,a=e.padInfo.left,n=e.strideDepth,i=e.strideHeight,s=e.strideWidth,o=e.dilationDepth,l=e.dilationHeight,u=e.dilationWidth,c=e.filterDepth,d=e.filterHeight,p=e.filterWidth,f=Math.floor(e.inChannels/4)*4,h=e.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(${n}, ${i}, ${s});
      const ivec3 pads = ivec3(${t}, ${r}, ${a});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < ${c}; wF++) {
          int xF = xFCorner + wF * ${o};

          if (xF < 0 || xF >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${d}; wR++) {
            int xR = xRCorner + wR * ${l};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${p}; wC++) {
              int xC = xCCorner + wC * ${u};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              for (int d1 = 0; d1 < ${f}; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (${h===1}) {
                dotProd +=
                  getX(batch, xF, xR, xC, ${f}) *
                  getW(wF, wR, wC, ${f}, d2);
              } else if (${h===2}) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, ${f}),
                  getX(batch, xF, xR, xC, ${f} + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, ${f}, d2),
                  getW(wF, wR, wC, ${f} + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (${h===3}) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, ${f}),
                  getX(batch, xF, xR, xC, ${f} + 1),
                  getX(batch, xF, xR, xC, ${f} + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, ${f}, d2),
                  getW(wF, wR, wC, ${f} + 1, d2),
                  getW(wF, wR, wC, ${f} + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}},Wye=class{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=e,this.enableShapeUniforms=Un(this.outputShape.length);let{dataFormat:r}=t,a=In(),n=r==="channelsLast",i=n?0:1,s=n?1:2,o=this.enableShapeUniforms?"if(blockIndex < outShape[1] && pos < outShape[0]) {":`if(blockIndex < ${e[1]} && pos < ${e[0]}) {`,l="";for(let u=0;u<=1;u++)for(let c=0;c<=1;c++)l+=`
          blockIndex = rc.y + ${c};
          pos = rc.x + ${u};

          ${o}
            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];
            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);

            if(d0 < inputShape[${i}] && d0 >= 0) {
              // Use custom imod instead mod. On Intel GPU, mod may generate
              // unexpected value.
              // https://github.com/tensorflow/tfjs/issues/5447
              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];
              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /
                  inChannels);

              if(d1 < inputShape[${s}] && d1 >= 0) {

                ch = imod(pos, inChannels);

                if (${n}) {
                  innerDims = vec2(d1, ch);
                  result[${u*2+c}] = getChannel(
                    getA(d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[${u*2+c}] = getChannel(
                    getA(ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec2 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        ${l}

        ${a.output} = result;
      }
    `}};function cB({x:e,filter:t,convInfo:r,backend:a,bias:n=null,preluActivationWeights:i=null,leakyreluAlpha:s=0,activation:o=null}){let l=e.shape,u=a.texData.get(e.dataId),c=r.inChannels,d=l[0]*l[1]*l[2],p=r.outChannels,f=r.dataFormat==="channelsLast",h=!1,m=!1,g,v=[];if(i!=null&&!f&&i.shape.length===3){let b=Cr({inputs:{x:i},backend:a,attrs:{perm:[1,2,0]}});v.push(b),i=b}if(!((d===1||p===1)&&c>nB)&&u.isPacked&&f&&u.texture!=null&&l[2]%2!==0&&_.arraysEqual(u.shape.slice(-3),l.slice(-3))){let b=l[0]*l[1]*(l[2]+1),y={dataId:e.dataId,shape:[1,b,r.inChannels],dtype:e.dtype},w=u.shape;u.shape=u.shape.slice(),u.shape[u.shape.length-2]++,_.assert(gh(u.shape,y.shape),()=>`packed reshape ${u.shape} to ${y.shape} isn't free`);let x=ze({inputs:{x:t},backend:a,attrs:{shape:[1,r.inChannels,r.outChannels]}});v.push(x);let k=mb({a:y,b:x,backend:a,transposeA:h,transposeB:m,bias:n,activation:o,preluActivationWeights:i,leakyreluAlpha:s}),C=a.texData.get(k.dataId);_.assert(C.isPacked,()=>"batchMatMul result is expected to be packed"),u.shape=w,C.shape=r.outShape,g=da({inputs:{x:k},backend:a}),g.shape=r.outShape,v.push(k)}else{let b=f?e:Cr({inputs:{x:e},backend:a,attrs:{perm:[0,2,3,1]}}),y=b.shape,w=y[0]*y[1]*y[2],x=ze({inputs:{x:b},backend:a,attrs:{shape:[1,w,r.inChannels]}}),k=ze({inputs:{x:t},backend:a,attrs:{shape:[1,r.inChannels,r.outChannels]}}),C=mb({a:x,b:k,transposeA:h,transposeB:m,backend:a,bias:n,activation:o,preluActivationWeights:i,leakyreluAlpha:s}),E=[r.batchSize,r.outHeight,r.outWidth,r.outChannels],$=ze({inputs:{x:C},backend:a,attrs:{shape:E}});g=f?$:Cr({inputs:{x:$},backend:a,attrs:{perm:[0,3,1,2]}}),f||(v.push(b),v.push($)),v.push(x),v.push(k),v.push(C)}for(let b of v)a.disposeIntermediateTensorInfo(b);return g}function dB({x:e,filter:t,convInfo:r,backend:a,bias:n=null,preluActivationWeights:i=null,leakyreluAlpha:s=0,activation:o=null}){let{filterWidth:l,filterHeight:u,inChannels:c,outWidth:d,outHeight:p,dataFormat:f}=r,h=f==="channelsLast",m=l*u*c,g=p*d,v=[m,g],b=!0,y=!1,w=[];if(i!=null&&!h&&i.shape.length===3){let L=Cr({inputs:{x:i},backend:a,attrs:{perm:[1,2,0]}});w.push(L),i=L}let x=ze({inputs:{x:e},backend:a,attrs:{shape:e.shape.slice(1)}}),k=ze({inputs:{x:t},backend:a,attrs:{shape:[1,m,_.sizeFromShape(t.shape)/m]}});w.push(x),w.push(k);let C=new Wye(v,r),E=[x.shape,[r.padInfo.top,r.padInfo.left],[r.strideHeight,r.strideWidth],[r.dilationHeight,r.dilationWidth],[r.inChannels],[r.filterWidth*r.inChannels],[r.outWidth]],$=a.runWebGLProgram(C,[x],"float32",E),N=ze({inputs:{x:$},backend:a,attrs:{shape:[1,v[0],v[1]]}});w.push($),w.push(N);let I=n!=null,S=i!=null,A=o==="leakyrelu",R=o?S0(o,!0):null,O=new rB(N.shape,k.shape,[1,g,r.outChannels],b,y,I,R,S,A),D=[N,k];if(n&&D.push(n),S&&D.push(i),A){let L=a.makeTensorInfo([],"float32",_.createScalarValue(s,"float32"));D.push(L),w.push(L)}let z=a.runWebGLProgram(O,D,"float32"),U=[1,p,d,r.outChannels],j=ze({inputs:{x:z},backend:a,attrs:{shape:U}}),G=h?j:Cr({inputs:{x:j},backend:a,attrs:{perm:[0,3,1,2]}});h||w.push(j),w.push(z);for(let L of w)a.disposeIntermediateTensorInfo(L);return G}function Hye(e){let{inputs:t,backend:r,attrs:a}=e,{x:n,filter:i}=t,{strides:s,pad:o,dataFormat:l,dilations:u,dimRoundingMode:c}=a,d=B.convertConv2DDataFormat(l),p=B.computeConv2DInfo(n.shape,i.shape,s,u,o,c,!1,d),f;if(p.filterHeight===1&&p.filterWidth===1&&p.dilationHeight===1&&p.dilationWidth===1&&p.strideHeight===1&&p.strideWidth===1&&(p.padInfo.type==="SAME"||p.padInfo.type==="VALID"))f=cB({x:n,filter:i,convInfo:p,backend:r});else if(ce().getBool("WEBGL_CONV_IM2COL")&&n.shape[0]===1)f=dB({x:n,filter:i,convInfo:p,backend:r});else{let m=new uB(p);f=r.runWebGLProgram(m,[n,i],"float32")}let h=ze({inputs:{x:f},backend:r,attrs:{shape:p.outShape}});return r.disposeIntermediateTensorInfo(f),h}var Uye={kernelName:Bl,backendName:"webgl",kernelFunc:Hye},jye=class{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;let t=e.strideHeight,r=e.strideWidth,a=e.padInfo.top,n=e.padInfo.left,i=e.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${t} - ${a};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${n};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              if (${i}) {
                float dyValue = getDy(b, yR, yC, d2);
                float xValue = getX(b, xR, xC, d1);
                dotProd += (xValue * dyValue);
              } else {
                float dyValue = getDy(b, d2, yR, yC);
                float xValue = getX(b, d1, xR, xC);
                dotProd += (xValue * dyValue);
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}},Gye=class{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;let t=e.filterHeight,r=e.filterWidth,a=e.strideHeight,n=e.strideWidth,i=e.dataFormat==="channelsLast",s=t-1-e.padInfo.top,o=r-1-e.padInfo.left,l=i?1:2,u=i?2:3,c=i?3:1;this.userCode=`
      const ivec2 pads = ivec2(${s}, ${o});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[${c}];

        ivec2 dyCorner = ivec2(coords[${l}], coords[${u}]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${t}; wR++) {
          float dyR = float(dyRCorner + wR) / ${a}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${t} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${n}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            for (int d2 = 0; d2 < ${e.outChannels}; d2++) {

              if (${i}) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}},qye=class{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;let t=e.strideDepth,r=e.strideHeight,a=e.strideWidth,n=e.padInfo.front,i=e.padInfo.top,s=e.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yF = 0; yF < ${e.outDepth}; yF++) {
            int xF = wF + yF * ${t} - ${n};

            if (xF < 0 || xF >= ${e.inDepth}) {
              continue;
            }

            for (int yR = 0; yR < ${e.outHeight}; yR++) {
              int xR = wR + yR * ${r} - ${i};

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int yC = 0; yC < ${e.outWidth}; yC++) {
                int xC = wC + yC * ${a} - ${s};

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}},Xye=class{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;let t=e.filterDepth,r=e.filterHeight,a=e.filterWidth,n=e.strideDepth,i=e.strideHeight,s=e.strideWidth,o=t-1-e.padInfo.front,l=r-1-e.padInfo.top,u=a-1-e.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${o}, ${l}, ${u});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < ${t}; wF++) {
          float dyF = float(dyFCorner + wF) / ${n}.0;

          if (dyF < 0.0 || dyF >= ${e.outDepth}.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = ${t} - 1 - wF;

          for (int wR = 0; wR < ${r}; wR++) {
            float dyR = float(dyRCorner + wR) / ${i}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = ${r} - 1 - wR;

            for (int wC = 0; wC < ${a}; wC++) {
              float dyC = float(dyCCorner + wC) / ${s}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = ${a} - 1 - wC;

              for (int d2 = 0; d2 < ${e.outChannels}; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}};function Yye(e){let{inputs:t,backend:r,attrs:a}=e,{x:n,dy:i}=t,{strides:s,pad:o,dataFormat:l,dimRoundingMode:u,filterShape:c}=a,d=B.convertConv2DDataFormat(l),p=B.computeConv2DInfo(n.shape,c,s,1,o,u,!1,d),f=new jye(p);return r.runWebGLProgram(f,[n,i],"float32")}var Kye={kernelName:qb,backendName:"webgl",kernelFunc:Yye};function Zye(e){let{inputs:t,backend:r,attrs:a}=e,{dy:n,filter:i}=t,{inputShape:s,strides:o,pad:l,dataFormat:u,dimRoundingMode:c}=a,d=B.convertConv2DDataFormat(u),p=B.computeConv2DInfo(s,i.shape,o,1,l,c,!1,d),f=new Gye(p);return r.runWebGLProgram(f,[n,i],"float32")}var Qye={kernelName:Vl,backendName:"webgl",kernelFunc:Zye};function Jye(e){let{inputs:t,backend:r,attrs:a}=e,{x:n,filter:i}=t,{strides:s,pad:o,dilations:l}=a,u=B.computeConv3DInfo(n.shape,i.shape,s,l,o),c=new Vye(u);return r.runWebGLProgram(c,[n,i],"float32")}var e0e={kernelName:Oh,backendName:"webgl",kernelFunc:Jye};function t0e(e){let{inputs:t,backend:r,attrs:a}=e,{x:n,dy:i}=t,{strides:s,pad:o,filterShape:l}=a,u=B.computeConv3DInfo(n.shape,l,s,1,o),c=new qye(u);return r.runWebGLProgram(c,[n,i],"float32")}var r0e={kernelName:Xb,backendName:"webgl",kernelFunc:t0e};function n0e(e){let{inputs:t,backend:r,attrs:a}=e,{dy:n,filter:i}=t,{pad:s,strides:o,inputShape:l}=a,u=B.computeConv3DInfo(l,i.shape,o,1,s),c=new Xye(u);return r.runWebGLProgram(c,[n,i],"float32")}var a0e={kernelName:Yb,backendName:"webgl",kernelFunc:n0e},i0e=Ep+`
  return cos(x);
`,s0e=St({opSnippet:i0e}),o0e={kernelName:Wl,backendName:"webgl",kernelFunc:s0e},l0e=`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`,u0e=St({opSnippet:l0e}),c0e={kernelName:Hl,backendName:"webgl",kernelFunc:u0e},d0e=class{constructor(e,t,r,a,n){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];let[i,s,o,l]=e,[u]=t,[c,d]=r;this.outputShape=[u,c,d,l];let p=a==="bilinear"?1:0,[f,h]=[`${s-1}.0`,`${o-1}.0`],[m,g,v]=c>1?[`${(s-1)/(c-1)}`,"(y2-y1) * height_ratio",`y1*${f} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${f}`],[b,y,w]=d>1?[`${(o-1)/(d-1)}`,"(x2-x1) * width_ratio",`x1*${h} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${h}`];this.userCode=`
      const float height_ratio = float(${m});
      const float width_ratio = float(${b});
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= ${i}) {
          return;
        }

        float height_scale = ${g};
        float width_scale = ${y};

        float in_y = ${v};
        if( in_y < 0.0 || in_y > ${f} ) {
          setOutput(float(${n}));
          return;
        }
        float in_x = ${w};
        if( in_x < 0.0 || in_x > ${h} ) {
          setOutput(float(${n}));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(${p} == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}},p0e=e=>{let{inputs:t,backend:r,attrs:a}=e,{image:n,boxes:i,boxInd:s}=t,{cropSize:o,method:l,extrapolationValue:u}=a,c=new d0e(n.shape,i.shape,o,l,u);return r.runWebGLProgram(c,[n,i,s],"float32")},f0e={kernelName:vd,backendName:"webgl",kernelFunc:p0e},bh;(function(e){e.Prod="*",e.Sum="+"})(bh||(bh={}));var qA=class{constructor(e,t,r,a){this.op=e,this.outputShape=t,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];let n=this.outputShape.length,i=this.op===bh.Prod?"1.0":"0.0",s=r?i:`getX(${XA(n,"coords",this.op)})`,o=this.outputShape[this.outputShape.length-1],l="",u="";r?(l=a?`end != ${o-1}`:"end != 0",u=a?"end + 1":"end - 1"):(l=a?`end + pow2 < ${o}`:"end >= pow2",u=a?"end + pow2":"end - pow2"),this.userCode=`
      void main() {
        ${Lt(n)} coords = getOutputCoords();
        int end = ${YA(n,"coords",this.op)};
        float val = ${s};
        int pow2 = int(pow(2.0, index));
        if (${l}) {
          int idx = ${u};
          ${YA(n,"coords",this.op)} = idx;
          val ${this.op}= getX(${XA(n,"coords",this.op)});
        }
        setOutput(val);
      }
    `}};function XA(e,t,r){if(e===1)return`${t}`;if(e===2)return`${t}.x, ${t}.y`;if(e===3)return`${t}.x, ${t}.y, ${t}.z`;if(e===4)return`${t}.x, ${t}.y, ${t}.z, ${t}.w`;throw new Error(`Cumulative ${r} for rank ${e} is not yet supported`)}function YA(e,t,r){if(e===1)return`${t}`;if(e===2)return`${t}.y`;if(e===3)return`${t}.z`;if(e===4)return`${t}.w`;throw new Error(`Cumulative ${r} for rank ${e} is not yet supported`)}function pB(e,t,r,a,n,i){let s=t.shape.length,o=B.getAxesPermutation([a],s),l=t;o!=null&&(l=Cr({inputs:{x:t},backend:r,attrs:{perm:o}}));let u=B.getInnerMostAxes(1,s)[0];if(u!==s-1)throw new Error(`WebGL cumprod shader expects an inner-most axis=${t.shape.length-1} but got axis=${a}`);let c=l.shape[u],d=da({inputs:{x:l},backend:r});for(let p=0;p<=Math.ceil(Math.log2(c))-1;p++){let f=new qA(e,l.shape,!1,i),h=[[p]],m=d;d=r.runWebGLProgram(f,[d],d.dtype,h),r.disposeIntermediateTensorInfo(m)}if(n){let p=new qA(e,l.shape,n,i),f=d;d=r.runWebGLProgram(p,[d],d.dtype),r.disposeIntermediateTensorInfo(f)}if(o!=null){let p=B.getUndoAxesPermutation(o),f=Cr({inputs:{x:d},backend:r,attrs:{perm:p}});return r.disposeIntermediateTensorInfo(d),r.disposeIntermediateTensorInfo(l),f}return d}function h0e(e){let{inputs:t,backend:r,attrs:a}=e,{x:n}=t,{axis:i,exclusive:s,reverse:o}=a;return pB(bh.Prod,n,r,i,s,o)}var m0e={kernelName:gd,backendName:"webgl",kernelFunc:h0e};function g0e(e){let{inputs:t,backend:r,attrs:a}=e,{x:n}=t,{axis:i,exclusive:s,reverse:o}=a;return pB(bh.Sum,n,r,i,s,o)}var v0e={kernelName:Ul,backendName:"webgl",kernelFunc:g0e};function b0e(e){let{inputs:t,backend:r,attrs:a}=e,{x:n,weights:i}=t,{size:s,binaryOutput:o}=a;if(n.shape.length===1){let l=r.readSync(n.dataId),u=r.readSync(i.dataId),c=jz(l,u,i.dtype,i.shape,s);return r.makeTensorInfo([s],i.dtype,c)}else if(n.shape.length===2){let l=r.bufferSync(n),u=r.bufferSync(i),c=Age(l,u,s,o);return r.makeTensorInfo(c.shape,i.dtype,c.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${n.shape.length}.`)}var y0e={kernelName:Kb,backendName:"webgl",kernelFunc:b0e},w0e=class{constructor(e,t,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=t,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = ${this.getHeightCoordString()};
      int w = ${this.getWidthCoordString()};
      int d = ${this.getDepthCoordString()};

      int in_h = h / ${t};
      int offset_h = imod(h, ${t});
      int in_w = w / ${t};
      int offset_w = imod(w, ${t});
      int offset_d = (offset_h * ${t} + offset_w) *
        ${this.getOutputDepthSize()};
      int in_d = d + offset_d;

      float result = ${this.getInputSamplingString()};
      setOutput(result);
    }
  `}getHeightCoordString(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"}getWidthCoordString(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"}getDepthCoordString(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"}getOutputDepthSize(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}};function x0e(e){let{inputs:t,backend:r,attrs:a}=e,{x:n}=t,{blockSize:i,dataFormat:s}=a,o=n.shape[0],l=s==="NHWC"?n.shape[1]:n.shape[2],u=s==="NHWC"?n.shape[2]:n.shape[3],c=s==="NHWC"?n.shape[3]:n.shape[1],d=l*i,p=u*i,f=c/(i*i),h=s==="NHWC"?[o,d,p,f]:[o,f,d,p],m=new w0e(h,i,s);return r.runWebGLProgram(m,[n],n.dtype)}var k0e={kernelName:bd,backendName:"webgl",kernelFunc:x0e},fB=class{constructor(e,t=!1,r=null,a=!1,n=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=Un(this.outputShape.length);let i=e.filterHeight,s=e.filterWidth,o=e.outChannels/e.inChannels,l="",u="";r&&(a?l=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:n?l=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:l=`
          float activation(float x) {
            ${r}
          }
        `,u="result = activation(result);");let c=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),n&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${l}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${o};
        int q = d2 - d1 * ${o};

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < ${i}; wR++) {
          int xR = xRCorner + wR * dilations[0];

          if (xR < 0 || xR >= inDims[0]) {
            continue;
          }

          for (int wC = 0; wC < ${s}; wC++) {
            int xC = xCCorner + wC * dilations[1];

            if (xC < 0 || xC >= inDims[1]) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        ${c}
        ${u}
        setOutput(result);
      }
    `}},hB=class{constructor(e,t=!1,r=null,a=!1,n=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=Un(this.outputShape.length);let i=e.outChannels/e.inChannels,s=e.padInfo.left,o=e.strideWidth,l=e.dilationWidth,u=e.filterHeight,c=e.filterWidth,d=c,p=`
      int xR; int xC; int xCOffset;
      vec4 wTexel; vec4 previous; vec4 final;`;for(let g=0;g<c;g++)p+=`
          vec4 xTexelC${g*2};
          int xTexelC${g*2}Ready;
          vec4 xTexelC${g*2+1};
          int xTexelC${g*2+1}Ready;
          vec4 xC${g};`;p+=`
    for (int r = 0; r < ${u}; r++) {
      `;for(let g=0;g<c;g++)p+=`
          xTexelC${g*2} = vec4(0.0);
          xTexelC${g*2}Ready = 0;
          xTexelC${g*2+1} = vec4(0.0);
          xTexelC${g*2+1}Ready = 0;
          xC${g} = vec4(0.0);`;p+=`
        xR = xRCorner + r * dilations[0];
        if (xR >=0 && xR < inDims[0]) {
      `;for(let g=0;g<(d+1)/2;g++){let v=g*2;if(p+=`
          xC = xCCorner + ${v*l};
          `,o===1){if(v<c&&(s%2===1?(p+=`
                xCOffset = xC + 1;
                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v}Ready == 0) {
                  xTexelC${v} = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${v}.zw = vec2(0.0);
                  }
                  xTexelC${v}Ready = 1;
                }
              `,l===1&&v>0?p+=`
                xC${v} = vec4(xTexelC${v-2}.zw, xTexelC${v}.xy);
                `:p+=`
                  xCOffset = xC + 1 - 2;

                  if (xCOffset >= 0 && xCOffset < inDims[1]) {
                    previous = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      previous.zw = vec2(0.0);
                    }

                    xC${v} = vec4(previous.zw, xTexelC${v}.xy);
                  } else {
                    xC${v} = vec4(0.0, 0.0, xTexelC${v}.xy);
                  }
                  `):p+=`
                if (xC >= 0 && xC < inDims[1] && xTexelC${v}Ready == 0) {
                  xTexelC${v} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${v}.zw = vec2(0.0);
                  }
                  xTexelC${v}Ready = 1;
                }

                xC${v} = xTexelC${v};
                `,v+1<c)){let b=s%2===0?_.nearestLargerEven(l):l;l%2===0&&s%2===1||l%2!==0&&s%2!==1?(p+=`
                  xCOffset = xC + imod(pads[1], 2) + ${b};

                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v+1}Ready == 0) {
                    xTexelC${v+1} = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      xTexelC${v+1}.zw = vec2(0.0);
                    }
                    xTexelC${v+1}Ready = 1;
                  }
                  `,l>1&&(p+=`
                    xCOffset -= 2;
                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v}Ready == 0) {
                      xTexelC${v} = getX(batch, xR, xCOffset, d1);
                      xTexelC${v}Ready = 1;
                    }
                    `),p+=`
                  xC${v+1} = vec4(xTexelC${v}.zw, xTexelC${v+1}.xy);
                  `):b===1?p+=`
                    xC${v+1} = xTexelC${v};
                    `:p+=`
                    xCOffset = xC + ${b};

                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v+1}Ready == 0) {
                      xTexelC${v+1} = getX(batch, xR, xCOffset, d1);
                      if (xCOffset + 1 >= inDims[1]) {
                        xTexelC${v+1}.zw = vec2(0.0);
                      }
                      xTexelC${v+1}Ready = 1;
                    }

                    xC${v+1} = xTexelC${v+1};
                    `}}else v<c&&(s%2===1?(p+=`
                xCOffset = xC + 1 - strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v}Ready == 0) {
                  xTexelC${v} = getX(batch, xR, xCOffset, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${v}.zw = vec2(0.0);
                  }
                  xTexelC${v}Ready = 1;
                }

                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${v+1}Ready == 0) {
                  xTexelC${v+1} = getX(batch, xR, xC + 1, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xC + 2 >= inDims[1]) {
                    xTexelC${v+1}.zw = vec2(0.0);
                  }
                  xTexelC${v+1}Ready = 1;
                }

                xC${v} = vec4(xTexelC${v}.zw, xTexelC${v+1}.zw);
              `,v+1<c&&(p+=`
                  final = vec4(0.0);
                  xCOffset = xC + 1 + strides[1];
                  if(xCOffset >= 0 && xCOffset < inDims[1]) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xC${v+1} = vec4(xTexelC${v+1}.xy, final.xy);
                `)):(p+=`
                if(xC >= 0 && xC < inDims[1] && xTexelC${v}Ready == 0) {
                  xTexelC${v} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${v}.zw = vec2(0.0);
                  }
                  xTexelC${v}Ready = 1;
                }

                xCOffset = xC + strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v+1}Ready == 0) {
                  xTexelC${v+1} = getX(batch, xR, xCOffset, d1);
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${v+1}.zw = vec2(0.);
                  }
                  xTexelC${v+1}Ready = 1;
                }

                xC${v} = vec4(
                  xTexelC${v}.xy, xTexelC${v+1}.xy);
              `,v+1<c&&(p+=`
                  xC${v+1} = vec4(xTexelC${v}.zw, xTexelC${v+1}.zw);
                `)));v<c&&(p+=`
            wTexel = getW(r, ${v}, d1, q);
            dotProd += xC${v} * vec4(wTexel.xz, wTexel.xz);
          `,v+1<c&&(p+=`
              wTexel = getW(r, ${v+1}, d1, q);
              dotProd += xC${v+1} * vec4(wTexel.xz, wTexel.xz);
            `))}p+=`
    }
  `,p+=`
      }
    `;let f="",h="";r&&(a?f=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:n?f=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:f=`vec4 activation(vec4 x) {
          ${r}
        }`,h="result = activation(result);");let m=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),n&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${f}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${i};
        int q = d2 - d1 * ${i};
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
        vec4 dotProd = vec4(0.000000000000001);

        ${p}

        vec4 result = dotProd - vec4(0.000000000000001);
        ${m}
        ${h}
        setOutput(result);
      }
    `}};function E0e(e){let{inputs:t,backend:r,attrs:a}=e,{x:n,filter:i}=t,{strides:s,pad:o,dilations:l,dimRoundingMode:u}=a,c=l;c==null&&(c=[1,1]),_.assert(B.eitherStridesOrDilationsAreOne(s,c),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${s} and dilations '${c}'`);let d=B.computeConv2DInfo(n.shape,i.shape,s,c,o,u,!0),p;ce().getBool("WEBGL_PACK_DEPTHWISECONV")&&d.strideWidth<=2&&d.outChannels/d.inChannels===1?p=new hB(d):p=new fB(d);let f=[[d.padInfo.top,d.padInfo.left],[d.strideHeight,d.strideWidth],[d.dilationHeight,d.dilationWidth],[d.inHeight,d.inWidth]];return r.runWebGLProgram(p,[n,i],"float32",f)}var C0e={kernelName:jl,backendName:"webgl",kernelFunc:E0e},S0e=class{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;let t=e.strideHeight,r=e.strideWidth,a=e.padInfo.top,n=e.padInfo.left,i=e.outChannels/e.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * ${i} + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${t} - ${a};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${n};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}},$0e=class{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;let t=e.filterHeight,r=e.filterWidth,a=e.strideHeight,n=e.strideWidth,i=t-1-e.padInfo.top,s=r-1-e.padInfo.left,o=e.outChannels/e.inChannels;this.userCode=`
      const ivec2 pads = ivec2(${i}, ${s});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < ${t}; wR++) {
          float dyR = float(dyRCorner + wR) / ${a}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${t} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${n}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < ${o}; dm++) {
              int d2 = d1 * ${o} + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}};function I0e(e){let{inputs:t,backend:r,attrs:a}=e,{x:n,dy:i}=t,{strides:s,dilations:o,pad:l,dimRoundingMode:u,filterShape:c}=a,d=B.computeConv2DInfo(n.shape,c,s,o,l,u,!0),p=new S0e(d);return r.runWebGLProgram(p,[n,i],"float32")}var T0e={kernelName:Zb,backendName:"webgl",kernelFunc:I0e};function N0e(e){let{inputs:t,backend:r,attrs:a}=e,{dy:n,filter:i}=t,{strides:s,dilations:o,pad:l,dimRoundingMode:u,inputShape:c}=a,d=B.computeConv2DInfo(c,i.shape,s,o,l,u,!0),p=new $0e(d);return r.runWebGLProgram(p,[n,i],"float32")}var A0e={kernelName:Qb,backendName:"webgl",kernelFunc:N0e},_0e=class{constructor(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}};function M0e(e){let{inputs:t,backend:r}=e,{x:a}=t,n=[...a.shape,...a.shape],i=_.sizeFromShape(a.shape),s=ze({inputs:{x:a},backend:r,attrs:{shape:[i]}}),o=new _0e(i),l=r.runWebGLProgram(o,[s],s.dtype),u=ze({inputs:{x:l},backend:r,attrs:{shape:n}});return r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(l),u}var R0e={kernelName:Jb,backendName:"webgl",kernelFunc:M0e},O0e=class{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;let{inHeight:t,inWidth:r,padInfo:a,strideHeight:n,strideWidth:i,filterHeight:s,filterWidth:o,dilationHeight:l,dilationWidth:u}=e,{top:c,left:d}=a;this.userCode=`
      const ivec2 strides = ivec2(${n}, ${i});
      const ivec2 pads = ivec2(${c}, ${d});
      const float neg_infinity = -3.4e38;

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.w;
        ivec2 outTopLeftCorner =
            coords.yz * strides - pads;
        int hBeg = outTopLeftCorner.x;
        int wBeg = outTopLeftCorner.y;

        float curVal = neg_infinity;
        for (int h = 0; h < ${s}; h++) {
          int hIn = hBeg + h * ${l};

          if (hIn >= 0 && hIn < ${t}) {
            for (int w = 0; w < ${o}; w++) {
              int wIn = wBeg + w * ${u};

              if (wIn >= 0 && wIn < ${r}) {
                float xVal = getX(batch, hIn, wIn, d1);
                float wVal = getW(h, w, d1);

                float val = xVal + wVal;
                if (val > curVal) {
                  curVal = val;
                }
              }
            }
          }
        }

        float result = curVal;
        setOutput(result);
      }
    `}};function P0e(e){let{inputs:t,backend:r,attrs:a}=e,{x:n,filter:i}=t,{strides:s,pad:o,dilations:l}=a,u=B.computeDilation2DInfo(n.shape,i.shape,s,o,"NHWC",l),c,d=new O0e(u);c=r.runWebGLProgram(d,[n,i],"float32");let p=ze({inputs:{x:c},backend:r,attrs:{shape:u.outShape}});return r.disposeIntermediateTensorInfo(c),p}var D0e={kernelName:Ph,backendName:"webgl",kernelFunc:P0e};function F0e(e){let{inputs:t,backend:r,attrs:a}=e,{equation:n}=a,i=t,{allDims:s,summedDims:o,idDims:l}=B.decodeEinsumEquation(n,i.length);B.checkEinsumDimSizes(s.length,l,i);let{path:u,steps:c}=B.getEinsumComputePath(o,l),d=c.length,p=null,f=s.length,h=[];for(let m=0;m<d;++m){for(let g of c[m]){let{permutationIndices:v,expandDims:b}=B.getEinsumPermutation(f,l[g]),y;B.isIdentityPermutation(v)?y=i[g]:(y=Cr({inputs:{x:i[g]},backend:r,attrs:{perm:v}}),h.push(y));let w=y.shape.slice();for(let x=0;x<b.length;++x)w.splice(b[x],0,1);_.arraysEqual(y.shape,w)||(y=ze({inputs:{x:y},backend:r,attrs:{shape:w}}),h.push(y)),p===null?p=y:(p=mI({inputs:{a:y,b:p},backend:r}),h.push(p))}m<d-1&&(u[m]>=0&&(p=I0({inputs:{x:p},backend:r,attrs:{axis:u[m]-(s.length-f),keepDims:!1}}),h.push(p)),f--)}for(let m of h)m!==p&&r.disposeIntermediateTensorInfo(m);return p}var L0e={kernelName:ey,backendName:"webgl",kernelFunc:F0e},z0e="return (x >= 0.0) ? x : (exp(x) - 1.0);",B0e=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,V0e=St({opSnippet:z0e,packedOpSnippet:B0e}),W0e={kernelName:ql,backendName:"webgl",kernelFunc:V0e},H0e="return (b >= 1.0) ? a : a * (b + 1.0);",U0e=`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,j0e=e=>{let{inputs:t,backend:r}=e,{dy:a,y:n}=t,i=ce().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Nm(U0e,a.shape,n.shape):new qc(H0e,a.shape,n.shape);return r.runWebGLProgram(i,[a,n],a.dtype)},G0e={kernelName:ty,backendName:"webgl",kernelFunc:j0e},q0e=`
  return vec4(equal(a, b));
`,X0e="return float(a == b);",Y0e=Kr({opSnippet:X0e,packedOpSnippet:q0e,dtype:"bool",cpuKernelImpl:Rge}),K0e={kernelName:wd,backendName:"webgl",kernelFunc:Y0e},Z0e=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = ${B.ERF_P};
  float a1 = ${B.ERF_A1};
  float a2 = ${B.ERF_A2};
  float a3 = ${B.ERF_A3};
  float a4 = ${B.ERF_A4};
  float a5 = ${B.ERF_A5};

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`,Q0e=St({opSnippet:Z0e}),J0e={kernelName:yd,backendName:"webgl",kernelFunc:Q0e},ewe=Ep+`
  return exp(x);
`,twe=`
  vec4 result = exp(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,mB=St({opSnippet:ewe,packedOpSnippet:twe,cpuKernelImpl:Oge,dtype:"float32"}),rwe={kernelName:Xl,backendName:"webgl",kernelFunc:mB};function Hk(e){let{inputs:t,attrs:r,backend:a}=e,{dim:n}=r,{input:i}=t,s=i.shape.length,o=i.shape.slice(),l=n;return n<0&&(_.assert(-(s+1)<=n,()=>`Axis must be in the interval [${-(s+1)}, ${s}]`),l=s+n+1),o.splice(l,0,1),ze({inputs:{x:i},backend:a,attrs:{shape:o}})}var nwe={kernelName:xd,backendName:"webgl",kernelFunc:Hk},KA="return exp(x) - 1.0;",awe=St({opSnippet:KA,packedOpSnippet:KA,cpuKernelImpl:Pge}),iwe={kernelName:kd,backendName:"webgl",kernelFunc:awe},ZA=class{constructor(e,t,r){this.variableNames=["real","imag"];let a=t[1];this.outputShape=t;let n=r?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,i=r?`${a}.0`:"1.0",s;if(e==="real")s="return real * expR - imag * expI;";else if(e==="imag")s="return real * expI + imag * expR;";else throw new Error(`FFT component must be either "real" or "imag", got ${e}.`);this.userCode=`
      const float exponentMultiplier = ${n};

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        ${s}
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(${a});
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < ${a}; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / ${i};
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}};function gB(e,t,r){let a=r.texData.get(e.dataId),n=_.sizeFromShape(e.shape),i=e.shape[e.shape.length-1],s=n/i,o=ze({inputs:{x:e},backend:r,attrs:{shape:[s,i]}}),l=o.shape,u=new ZA("real",l,t),c=new ZA("imag",l,t),d=[{dataId:a.complexTensorInfos.real.dataId,dtype:a.complexTensorInfos.real.dtype,shape:l},{dataId:a.complexTensorInfos.imag.dataId,dtype:a.complexTensorInfos.imag.dtype,shape:l}],p=r.runWebGLProgram(u,d,"float32"),f=r.runWebGLProgram(c,d,"float32"),h=Io({inputs:{real:p,imag:f},backend:r});r.disposeIntermediateTensorInfo(p),r.disposeIntermediateTensorInfo(f);let m=ze({inputs:{x:h},backend:r,attrs:{shape:e.shape}});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(h),m}function swe(e){let{inputs:t,backend:r}=e,{input:a}=t;return gB(a,!1,r)}var owe={kernelName:ry,backendName:"webgl",kernelFunc:swe},lwe=class{constructor(e,t){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=e,this.userCode=`
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}};function _m(e){let{backend:t,attrs:r}=e,{shape:a,value:n}=r,{dtype:i}=r;if(i=i||_.inferDtype(n),i==="string"){let s=_.getArrayFromDType(i,_.sizeFromShape(a));return s.fill(n),t.makeTensorInfo(a,i,s)}else{let s=new lwe(a,n),o=[[n]];return t.runWebGLProgram(s,[],i,o)}}var uwe={kernelName:Dh,backendName:"webgl",kernelFunc:_m},cwe=class{constructor(e){this.variableNames=["Image"],this.outputShape=[];let t=e[2];this.outputShape=e,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];

          int coordX = ${t} - x - 1;
          float outputValue;
          if(coordX >= 0 && coordX < ${t}) {
            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);
          } else {
            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);
          }
          setOutput(outputValue);
        }
    `}},dwe={kernelName:Ed,backendName:"webgl",kernelFunc:({inputs:e,backend:t})=>{let{image:r}=e,a=t,n=new cwe(r.shape);return a.runWebGLProgram(n,[r],r.dtype)}},QA="return floor(x);",pwe=St({opSnippet:QA,packedOpSnippet:QA,cpuKernelImpl:Dge}),fwe={kernelName:Yl,backendName:"webgl",kernelFunc:pwe},hwe=`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,mwe=`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,gwe=Kr({opSnippet:hwe,packedOpSnippet:mwe,dtype:"int32"}),vwe={kernelName:Kl,backendName:"webgl",kernelFunc:gwe},bwe=class{constructor(e){this.variableNames=["A"];let t=In(),[r,a]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${a}.0, ${r}.0);

        vec4 values = ${t.texture2D}(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}},ywe=class{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;let t=In(),[r,a]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(${a}.0, ${r}.0);
            vec4 values = ${t.texture2D}(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        ${t.output} = result;
      }
    `}},wwe={kernelName:jv,backendName:"webgl",kernelFunc:xwe},Gu;function xwe(e){let{inputs:t,backend:r,attrs:a}=e,{pixels:n}=t,{numChannels:i}=a,s=typeof HTMLVideoElement!="undefined"&&n instanceof HTMLVideoElement,o=typeof HTMLImageElement!="undefined"&&n instanceof HTMLImageElement,[l,u]=s?[n.videoWidth,n.videoHeight]:[n.width,n.height],c=[u,l],d=[u,l,i];(o||s)&&(Gu==null&&(Gu=document.createElement("canvas").getContext("2d")),Gu.canvas.width=l,Gu.canvas.height=u,Gu.drawImage(n,0,0,l,u),n=Gu.canvas);let p=r.makeTensorInfo(c,"int32");r.texData.get(p.dataId).usage=ba.PIXELS,r.gpgpu.uploadPixelDataToTexture(r.getTexture(p.dataId),n);let f=ce().getBool("WEBGL_PACK")?new ywe(d):new bwe(d),h=r.runWebGLProgram(f,[p],"int32");return r.disposeData(p.dataId),h}function kwe(e){let{inputs:t,backend:r,attrs:a}=e,{x:n,filter:i,bias:s,preluActivationWeights:o}=t,{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:p,activation:f,leakyreluAlpha:h}=a,m=B.convertConv2DDataFormat(c),g=B.computeConv2DInfo(n.shape,i.shape,l,d,u,p,!1,m),v,b=[];if(g.filterHeight===1&&g.filterWidth===1&&g.dilationHeight===1&&g.dilationWidth===1&&g.strideHeight===1&&g.strideWidth===1&&(g.padInfo.type==="SAME"||g.padInfo.type==="VALID"))v=cB({x:n,filter:i,convInfo:g,backend:r,bias:s,activation:f,preluActivationWeights:o,leakyreluAlpha:h});else if(ce().getBool("WEBGL_CONV_IM2COL")&&n.shape[0]===1)v=dB({x:n,filter:i,convInfo:g,backend:r,bias:s,activation:f,preluActivationWeights:o,leakyreluAlpha:h});else{let w=s!=null,x=o!=null,k=f==="leakyrelu",C=f?S0(f,!1):null,E=new uB(g,w,C,x,k),$=[n,i],N=(I,S)=>{if(S==="NCHW"&&I.shape.length===1&&I.shape[0]!==1){let A=ze({inputs:{x:I},backend:r,attrs:{shape:[I.shape[0],1,1]}});return b.push(A),A}return I};if(w&&$.push(N(s,c)),x&&$.push(N(o,c)),k){let I=r.makeTensorInfo([],"float32",_.createScalarValue(h,"float32"));$.push(I),b.push(I)}v=r.runWebGLProgram(E,$,"float32")}let y=ze({inputs:{x:v},backend:r,attrs:{shape:g.outShape}});return b.push(v),b.forEach(w=>r.disposeIntermediateTensorInfo(w)),y}var Ewe={kernelName:dl,backendName:"webgl",kernelFunc:kwe};function Cwe(e){let{inputs:t,backend:r,attrs:a}=e,{x:n,filter:i,bias:s,preluActivationWeights:o}=t,{strides:l,pad:u,dilations:c,dimRoundingMode:d,activation:p,leakyreluAlpha:f}=a,h=[],m=c;m==null&&(m=[1,1]),_.assert(B.eitherStridesOrDilationsAreOne(l,m),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${l} and dilations '${m}'`);let g=B.computeConv2DInfo(n.shape,i.shape,l,m,u,d,!0),v=ce().getBool("WEBGL_PACK_DEPTHWISECONV")&&g.strideWidth<=2&&g.outChannels/g.inChannels===1,b=p?S0(p,v):null,y=[n,i],w=s!=null,x=o!=null,k=p==="leakyrelu";if(w&&y.push(s),x&&y.push(o),k){let N=r.makeTensorInfo([],"float32",_.createScalarValue(f,"float32"));y.push(N),h.push(N)}let C;v?C=new hB(g,w,b,x,k):C=new fB(g,w,b,x,k);let E=[[g.padInfo.top,g.padInfo.left],[g.strideHeight,g.strideWidth],[g.dilationHeight,g.dilationWidth],[g.inHeight,g.inWidth]],$=r.runWebGLProgram(C,y,"float32",E);return h.forEach(N=>r.disposeIntermediateTensorInfo(N)),$}var Swe={kernelName:pl,backendName:"webgl",kernelFunc:Cwe},$we=class{constructor(e,t,r){this.sliceDim=e,this.strides=t,this.variableNames=["x","indices"],this.outputShape=r;let a=Lt(t.length),n=Lt(r.length),i=this.sliceDim>1?"strides[j]":"strides";this.userCode=`
        ${a} strides = ${a}(${this.strides});
         void main() {
          ${n} coords = getOutputCoords();
          int flattenIndex = 0;
          for (int j = 0; j < ${this.sliceDim}; j++) {
            int index = round(getIndices(coords[0], j));
            flattenIndex += index * ${i};
          }
          setOutput(getX(flattenIndex, coords[1]));
        }
      `}};function Iwe(e){let{inputs:t,backend:r}=e,{params:a,indices:n}=t,i=n.shape,s=i[i.length-1],o=_.sizeFromShape(a.shape),[l,u,c,d]=B.prepareAndValidate(a,n),p=ze({inputs:{x:n},backend:r,attrs:{shape:[u,s]}}),f=ze({inputs:{x:a},backend:r,attrs:{shape:[_.sizeFromShape(a.shape)/c,c]}});if(r.shouldExecuteOnCPU([a,n])||a.dtype==="string"){let v=r.readSync(n.dataId),b=r.bufferSync(a),y=Fge(v,b,a.dtype,u,s,c,d,a.shape,o);return r.makeTensorInfo(l,a.dtype,y.values)}let h=new $we(s,d,[u,c]),m=r.runWebGLProgram(h,[f,p],f.dtype),g=ze({inputs:{x:m},backend:r,attrs:{shape:l}});return r.disposeIntermediateTensorInfo(p),r.disposeIntermediateTensorInfo(f),r.disposeIntermediateTensorInfo(m),g}var Twe={kernelName:Sd,backendName:"webgl",kernelFunc:Iwe},Nwe=class{constructor(e,t){this.variableNames=["A","indices"],this.outputShape=t,this.rank=t.length;let r=Lt(this.rank),a=Awe(e);this.userCode=`
      void main() {
        ${r} resRC = getOutputCoords();
        int index = int(getIndices(resRC.x, resRC.z));
        float inBounds = (index >= 0) && (index < ${e[2]}) ? 1.0 : 0.0;
        setOutput(inBounds * getA(${a}));
      }
    `}};function Awe(e,t){let r=["resRC.x","resRC.y","resRC.z","resRC.w"],a=[];for(let n=0;n<e.length;n++)n===2?a.push("index"):a.push(`${r[n]}`);return a.join()}function vB(e){let{inputs:t,backend:r,attrs:a}=e,{x:n,indices:i}=t,{axis:s,batchDims:o}=a,l=_.parseAxisParam(s,n.shape)[0];if(ce().get("DEBUG")){let b=r.readSync(i.dataId),y=n.shape[l];for(let w=0;w<b.length;++w){let x=b[w];_.assert(x<=y-1&&x>=0,()=>`GatherV2: the index value ${x} is not in [0, ${y-1}]`)}}let u=B.segment_util.collectGatherOpShapeInfo(n,i,l,o),c=_.sizeFromShape(i.shape),d=[],p=ze({inputs:{x:n},backend:r,attrs:{shape:[u.batchSize,u.outerSize,u.dimSize,u.sliceSize]}}),f=ze({inputs:{x:i},backend:r,attrs:{shape:[u.batchSize,c/u.batchSize]}});d.push(p),d.push(f);let h=[u.batchSize,u.outerSize,c/u.batchSize,u.sliceSize];if(r.shouldExecuteOnCPU([n,i])||n.dtype==="string"){let b=r.bufferSync(f),y=r.bufferSync(p),w=Lge(y,b,h);return d.forEach(x=>r.disposeIntermediateTensorInfo(x)),r.makeTensorInfo(u.outputShape,w.dtype,w.values)}let m=new Nwe(p.shape,h),g=r.runWebGLProgram(m,[p,f],p.dtype);d.push(g);let v=ze({inputs:{x:g},backend:r,attrs:{shape:u.outputShape}});return d.forEach(b=>r.disposeIntermediateTensorInfo(b)),v}var _we={kernelName:Cd,backendName:"webgl",kernelFunc:vB},Mwe="return float(a > b);",Rwe=`
  return vec4(greaterThan(a, b));
`,Owe=Kr({opSnippet:Mwe,packedOpSnippet:Rwe,cpuKernelImpl:zge,dtype:"bool"}),Pwe={kernelName:$d,backendName:"webgl",kernelFunc:Owe},Dwe="return float(a >= b);",Fwe=`
  return vec4(greaterThanEqual(a, b));
`,Lwe=Kr({opSnippet:Dwe,packedOpSnippet:Fwe,dtype:"bool",cpuKernelImpl:Bge}),zwe={kernelName:Ql,backendName:"webgl",kernelFunc:Lwe};function Bwe(e){let{inputs:t,backend:r}=e,{input:a}=t;return gB(a,!0,r)}var Vwe={kernelName:ny,backendName:"webgl",kernelFunc:Bwe},Wwe="return float(!isnan(x) && !isinf(x));",Hwe=St({opSnippet:Wwe,dtype:"bool"}),Uwe={kernelName:Id,backendName:"webgl",kernelFunc:Hwe},jwe="return float(isinf(x));",Gwe=St({opSnippet:jwe,dtype:"bool"}),qwe={kernelName:Td,backendName:"webgl",kernelFunc:Gwe},Xwe="return float(isnan(x));",Ywe=St({opSnippet:Xwe,dtype:"bool"}),Kwe={kernelName:Nd,backendName:"webgl",kernelFunc:Ywe},Zwe="return float(a < b);",Qwe=`
  return vec4(lessThan(a, b));
`,Jwe=Kr({opSnippet:Zwe,packedOpSnippet:Qwe,cpuKernelImpl:Vge,dtype:"bool"}),exe={kernelName:Ad,backendName:"webgl",kernelFunc:Jwe},txe="return float(a <= b);",rxe=`
  return vec4(lessThanEqual(a, b));
`,nxe=Kr({opSnippet:txe,packedOpSnippet:rxe,cpuKernelImpl:Wge,dtype:"bool"}),axe={kernelName:_d,backendName:"webgl",kernelFunc:nxe};function ixe(e){let{backend:t,attrs:r}=e,{start:a,stop:n,num:i}=r,s=Hge(a,n,i);return t.makeTensorInfo([s.length],"float32",s)}var sxe={kernelName:iy,backendName:"webgl",kernelFunc:ixe},oxe=Ep+`
  return x < 0.0 ? 0./0. : log(x);
`,lxe=`
  vec4 result = log(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);
  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);
  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);
  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);
  return result;
`,uxe=St({opSnippet:oxe,packedOpSnippet:lxe,cpuKernelImpl:Uge}),cxe={kernelName:tu,backendName:"webgl",kernelFunc:uxe},dxe=Ep+`
  return log(1.0 + x);
`,pxe=St({opSnippet:dxe}),fxe={kernelName:Md,backendName:"webgl",kernelFunc:pxe},hxe="return float(a >= 1.0 && b >= 1.0);",mxe=`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,gxe=Kr({opSnippet:hxe,packedOpSnippet:mxe,dtype:"bool"}),vxe={kernelName:Rd,backendName:"webgl",kernelFunc:gxe},bxe="return float(!(x >= 1.0));",yxe=St({opSnippet:bxe}),wxe={kernelName:Fh,backendName:"webgl",kernelFunc:yxe},xxe="return float(a >= 1.0 || b >= 1.0);",kxe=`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,Exe=Kr({opSnippet:xxe,packedOpSnippet:kxe,dtype:"bool"}),Cxe={kernelName:Lh,backendName:"webgl",kernelFunc:Exe},Sxe=class{constructor(e,t,r,a,n){this.variableNames=["x"],this.outputShape=[];let i=t,s=e[3]-1;this.outputShape=e;let o,l=`float(${r}) + float(${a}) * sum`;n===.5?o=`inversesqrt(${l})`:n===1?o=`1.0/(${l})`:o=`exp(log(${l}) * float(-${n}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -${i}; j <= ${i}; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  ${s}) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * ${o};
        setOutput(val);
      }
    `}},$xe=class{constructor(e,t,r,a,n){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;let i=t,s=e[3]-1;this.outputShape=e;let o,l=`float(${r}) + float(${a}) * sum`;n===.5?o=`inversesqrt(${l})`:n===1?o=`1.0/(${l})`:o=`exp(log(${l}) * float(-${n}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < ${this.outputShape[3]};
        bool hasNextRow = c < ${this.outputShape[2]};

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - ${i};
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - ${i}; j <= ${i}; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${s}));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * ${o};
        setOutput(result);
      }
    `}},Ixe=e=>{let{inputs:t,backend:r,attrs:a}=e,{x:n}=t,{depthRadius:i,bias:s,alpha:o,beta:l}=a,u=ce().getBool("WEBGL_PACK_NORMALIZATION")?new $xe(n.shape,i,s,o,l):new Sxe(n.shape,i,s,o,l);return r.runWebGLProgram(u,[n],n.dtype)},Txe={kernelName:zh,backendName:"webgl",kernelFunc:Ixe},Nxe=class{constructor(e,t,r,a,n){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=t,this.bias=r,this.alpha=a,this.beta=n,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < ${this.depth}; ++d) {
          int depthBegin = int(max(0.0, float(d - ${t})));
          int depthEnd = int(min(float(${this.depth}),
              float(d + ${t} + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = ${this.depth};

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(${a}) * norm + float(${r});

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(${a})
                * float(${n})
                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * ${n});
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}},Axe=e=>{let{inputs:t,backend:r,attrs:a}=e,{x:n,y:i,dy:s}=t,{depthRadius:o,bias:l,alpha:u,beta:c}=a,d=new Nxe(n.shape,o,l,u,c);return r.runWebGLProgram(d,[n,i,s],n.dtype)},_xe={kernelName:sy,backendName:"webgl",kernelFunc:Axe};function Mxe(e,t,r,a){let n=_.sizeFromShape(t),i=_.sizeFromShape(e.shape)/n,s=ze({inputs:{x:e},attrs:{shape:[i,n]},backend:a}),o=Fu(s,e.dtype,"max",a),l=ze({inputs:{x:o},attrs:{shape:r},backend:a});return a.disposeIntermediateTensorInfo(s),a.disposeIntermediateTensorInfo(o),l}function bB(e){let{inputs:t,backend:r,attrs:a}=e,{x:n}=t,{reductionIndices:i,keepDims:s}=a,o=n.shape.length,l=_.parseAxisParam(i,n.shape),u=l,c=B.getAxesPermutation(u,o),d=c!=null,p=r.shouldExecuteOnCPU([n]),f=n;if(d){if(p){let b=r.texData.get(f.dataId).values,y=new Array(o);for(let k=0;k<y.length;k++)y[k]=n.shape[c[k]];let w=hI(b,n.shape,n.dtype,c,y);f=r.makeTensorInfo(y,n.dtype);let x=r.texData.get(f.dataId);x.values=w}else f=$0(n,c,r);u=B.getInnerMostAxes(u.length,o)}B.assertAxesAreInnerMostDims("max",u,o);let[h,m]=B.computeOutAndReduceShapes(f.shape,u),g=h;s&&(g=B.expandShapeToKeepDim(h,l));let v;if(p){let b=r.texData.get(f.dataId).values,y=jge(b,_.sizeFromShape(m),g,n.dtype);v=r.makeTensorInfo(g,n.dtype);let w=r.texData.get(v.dataId);w.values=y}else v=Mxe(f,m,g,r);return d&&r.disposeIntermediateTensorInfo(f),v}var Rxe={kernelName:ru,backendName:"webgl",kernelFunc:bB},Oxe=Zz+`
  return max(a, b);
`,Pxe=`
  vec4 result = vec4(max(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  `+C0+`
  return result;
`,Dxe=Kr({opSnippet:Oxe,packedOpSnippet:Pxe,cpuKernelImpl:Gge}),Fxe={kernelName:nu,backendName:"webgl",kernelFunc:Dxe};function Lxe(e){let{inputs:t,backend:r,attrs:a}=e,{x:n}=t;bp(n,"maxPool");let{filterSize:i,strides:s,pad:o,dimRoundingMode:l}=a,u=1;_.assert(B.eitherStridesOrDilationsAreOne(s,u),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${s} and dilations '${u}'`);let c=B.computePool2DInfo(n.shape,i,s,u,o,l);if(c.filterWidth===1&&c.filterHeight===1&&_.arraysEqual(c.inShape,c.outShape))return da({inputs:{x:n},backend:r});let d=new vh(c,"max",!1);return r.runWebGLProgram(d,[n],n.dtype)}var zxe={kernelName:au,backendName:"webgl",kernelFunc:Lxe};function Bxe(e){let{inputs:t,backend:r,attrs:a}=e,{x:n}=t,{filterSize:i,strides:s,pad:o,dataFormat:l,dimRoundingMode:u}=a,c=[1,1,1],d=B.computePool3DInfo(n.shape,i,s,c,o,u,l),p=new gI(d,"max",!1);return r.runWebGLProgram(p,[n],n.dtype)}var Vxe={kernelName:Bh,backendName:"webgl",kernelFunc:Bxe},Wxe=class{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;let t=e.strideHeight,r=e.strideWidth,a=e.dilationHeight,n=e.effectiveFilterHeight,i=e.effectiveFilterWidth,s=n-1-e.padInfo.top,o=i-1-e.padInfo.left,l=n*i-1;this.userCode=`
      const ivec2 pads = ivec2(${s}, ${o});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${n};
          wR += ${a}) {
          float dyR = float(dyRCorner + wR) / ${t}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${i}; wC++) {
            float dyC = float(dyCCorner + wC) / ${r}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = ${l} - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * ${i} + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}},Hxe=class{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;let t=e.strideDepth,r=e.strideHeight,a=e.strideWidth,n=e.dilationDepth,i=e.dilationHeight,s=e.dilationWidth,o=e.effectiveFilterDepth,l=e.effectiveFilterHeight,u=e.effectiveFilterWidth,c=o-1-e.padInfo.front,d=l-1-e.padInfo.top,p=u-1-e.padInfo.left,f=o*l*u-1;this.userCode=`
      const ivec3 pads = ivec3(${c}, ${d}, ${p});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${o};
           wD += ${n}) {
          float dyD = float(dyDCorner + wD) / ${t}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${l};
              wR += ${i}) {
            float dyR = float(dyRCorner + wR) / ${r}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${u};
                wC += ${s}) {
              float dyC = float(dyCCorner + wC) / ${a}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = ${f} -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * ${l} * ${u} +
                  wR * ${u} + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `}};function Uxe(e){let{inputs:t,backend:r,attrs:a}=e,{dy:n,input:i}=t,s=i,{filterSize:o,strides:l,pad:u,dimRoundingMode:c}=a,d=[1,1,1],p=B.computePool3DInfo(s.shape,o,l,d,u,c),f=new gI(p,"max",!0),h=r.runWebGLProgram(f,[s],s.dtype),m=new Hxe(p),g=r.runWebGLProgram(m,[n,h],s.dtype);return r.disposeIntermediateTensorInfo(h),g}var jxe={kernelName:ly,backendName:"webgl",kernelFunc:Uxe};function Gxe(e){let{inputs:t,backend:r,attrs:a}=e,{dy:n,input:i,output:s}=t,o=i;bp([i,s],"maxPoolGrad");let{filterSize:l,strides:u,pad:c,dimRoundingMode:d}=a,p=B.computePool2DInfo(o.shape,l,u,1,c,d),f=!0,h=new vh(p,"max",f),m=r.runWebGLProgram(h,[o],o.dtype),g=new Wxe(p),v=r.runWebGLProgram(g,[n,m],o.dtype);return r.disposeIntermediateTensorInfo(m),v}var qxe={kernelName:oy,backendName:"webgl",kernelFunc:Gxe};function Xxe(e,t,r,a){let n=new vh(r,"max",!1),i=a.runWebGLProgram(n,[e],"float32");n=new vh(r,"max",!0,!0,t);let s=a.runWebGLProgram(n,[e],"float32");return[i,s]}var Yxe={kernelName:uy,backendName:"webgl",kernelFunc:({inputs:e,attrs:t,backend:r})=>{let{x:a}=e,{filterSize:n,strides:i,pad:s,includeBatchInIndex:o}=t,l=r;_.assert(a.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${a.shape.length}.`);let u=[1,1];_.assert(B.eitherStridesOrDilationsAreOne(i,u),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${u}'`);let c=B.computePool2DInfo(a.shape,n,i,u,s),[d,p]=Xxe(a,o,c,l);return[d,p]}};function Kxe(e,t,r,a){let n=_.sizeFromShape(t),i=_.sizeFromShape(e.shape)/n,s=ze({inputs:{x:e},attrs:{shape:[i,n]},backend:a}),o=Fu(s,"float32","mean",a),l=ze({inputs:{x:o},attrs:{shape:r},backend:a});return a.disposeIntermediateTensorInfo(s),a.disposeIntermediateTensorInfo(o),l}var Zxe={kernelName:iu,backendName:"webgl",kernelFunc:({inputs:e,attrs:t,backend:r})=>{let{x:a}=e,{keepDims:n,axis:i}=t,s=r,o=a.shape.length,l=_.parseAxisParam(i,a.shape),u=l,c=B.getAxesPermutation(u,o),d=c!=null,p=s.shouldExecuteOnCPU([a]),f=[],h=a;if(d){if(p){let y=s.texData.get(h.dataId).values,w=new Array(o);for(let C=0;C<w.length;C++)w[C]=a.shape[c[C]];let x=hI(y,a.shape,a.dtype,c,w);h=s.makeTensorInfo(w,a.dtype);let k=s.texData.get(h.dataId);k.values=x}else h=$0(a,c,s);f.push(h),u=B.getInnerMostAxes(u.length,o)}B.assertAxesAreInnerMostDims("sum",u,o);let[m,g]=B.computeOutAndReduceShapes(h.shape,u),v=m;n&&(v=B.expandShapeToKeepDim(m,l));let b=Kxe(h,g,v,s);for(let y of f)s.disposeIntermediateTensorInfo(y);return b}};function Qxe(e){let{inputs:t,backend:r,attrs:a}=e,{x:n}=t,{axis:i,keepDims:s}=a,o=n.shape.length,l=_.parseAxisParam(i,n.shape),u=l,c=B.getAxesPermutation(u,o),d=n;c!=null&&(d=Cr({inputs:{x:n},backend:r,attrs:{perm:c}}),u=B.getInnerMostAxes(u.length,n.shape.length)),B.assertAxesAreInnerMostDims("min",u,o);let[p,f]=B.computeOutAndReduceShapes(d.shape,u),h=_.sizeFromShape(f),m=ze({inputs:{x:d},backend:r,attrs:{shape:[-1,h]}}),g=Fu(m,m.dtype,"min",r),v;if(s){let b=B.expandShapeToKeepDim(p,l);v=ze({inputs:{x:g},backend:r,attrs:{shape:b}})}else v=ze({inputs:{x:g},backend:r,attrs:{shape:p}});return r.disposeIntermediateTensorInfo(m),r.disposeIntermediateTensorInfo(g),c!=null&&r.disposeIntermediateTensorInfo(d),v}var Jxe={kernelName:su,backendName:"webgl",kernelFunc:Qxe},e1e=Zz+`
  return min(a, b);
`,t1e=`
  vec4 result = vec4(min(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  `+C0+`
  return result;
`,r1e=Kr({opSnippet:e1e,packedOpSnippet:t1e,cpuKernelImpl:qge}),n1e={kernelName:ou,backendName:"webgl",kernelFunc:r1e},a1e=class{constructor(e,t,r){this.variableNames=["x"],this.outputShape=t.map((u,c)=>u[0]+e[c]+u[1]);let a=e.length,n=Lt(a),i=t.map(u=>u[0]).join(","),s=t.map((u,c)=>u[0]+e[c]).join(","),o=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a),l=r==="reflect"?0:1;if(a===1){this.userCode=`
        int start = ${i};
        int end = ${s};

        void main() {
          int outC = getOutputCoords();
          if (outC < start) {
            outC = start * 2 - outC - ${l};
          } else if(outC >= end) {
            outC = (end - 1) * 2 - outC + ${l};
          }
          setOutput(getX(outC - start));
        }
      `;return}this.userCode=`
      ${n} start = ${n}(${i});
      ${n} end = ${n}(${s});

      void main() {
        ${n} outC = getOutputCoords();
        for (int i = 0; i < ${a}; i++) {
          if (outC[i] < start[i]) {
            outC[i] = start[i] * 2 - outC[i] - ${l};
          } else if(outC[i] >= end[i]) {
            outC[i] = (end[i] - 1) * 2 - outC[i] + ${l};
          }
        }
        ${n} coords = outC - start;
        setOutput(getX(${o}));
      }
    `}},i1e=class{constructor(e,t,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.map((f,h)=>f[0]+e[h]+f[1]);let a=e.length,n=Lt(a),i=t.map(f=>f[0]).join(","),s=t.map((f,h)=>f[0]+e[h]).join(","),o=mn("rc",a),l=mn("source",a),u=`${o[a-1]} < ${this.outputShape[a-1]}`,c=a===1?"source":`vec2(${l.slice(-2).join()})`,d=r==="reflect"?0:1,p="";if(a===1){let f=`
        ${n} source = rc;
        if (source < start) {
          source = start * 2 - source - ${d};
        } else if (source >= end) {
          source = (end - 1) * 2 - source + ${d};
        }
        source -= start;
      `;p=`
        ${n} rc = outputLoc;
        ${f}
        result[0] = getChannel(getX(${l.join()}), ${c});
        ${o[a-1]} += 1;
        if(${u}) {
          ${f}
          result[1] = getChannel(getX(${l.join()}), ${c});
        }
      `}else{let f=`
        ${n} source = rc;
        ${n} lt = ${n}(lessThan(source, start));
        ${n} gte = ${n}(greaterThanEqual(source, end));
        ${n} orig = 1 - (lt + gte);
        source = orig * source +
                lt * (start * 2 - source - ${d}) +
                gte * ((end - 1) * 2 - source + ${d});
        source -= start;
      `;p=`
        ${n} rc = outputLoc;
        ${f}
        result[0] = getChannel(getX(${l.join()}), ${c});
        ${o[a-1]} += 1;
        if(${u}) {
          ${f}
          result[1] = getChannel(getX(${l.join()}), ${c});
        }
        rc = outputLoc;
        ${o[a-2]} += 1;
        if(${o[a-2]} < ${this.outputShape[a-2]}) {
          ${f}
          result[2] = getChannel(getX(${l.join()}), ${c});
          ${o[a-1]} += 1;
          if(${u}) {
            ${f}
            result[3] = getChannel(getX(${l.join()}), ${c});
          }
        }
      `}this.userCode=`
      const ${n} start = ${n}(${i});
      const ${n} end = ${n}(${s});

      void main() {
        ${n} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${p}
        setOutput(result);
      }
    `}},s1e=({inputs:e,backend:t,attrs:r})=>{let{x:a}=e,{paddings:n,mode:i}=r,s=ce().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new i1e(a.shape,n,i):new a1e(a.shape,n,i);return t.runWebGLProgram(s,[a],a.dtype)},o1e={kernelName:lu,backendName:"webgl",kernelFunc:s1e},l1e=`if (b == 0.0) return NAN;
  return mod(a, b);`,u1e=`
  vec4 result = mod(a, b);
  vec4 isNaN = vec4(equal(b, vec4(0.0)));
  `+C0+`
  return result;
`,c1e=Kr({opSnippet:l1e,packedOpSnippet:u1e}),d1e={kernelName:Od,backendName:"webgl",kernelFunc:c1e},p1e=class{constructor(e,t,r){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[e,r],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < ${t-1}; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(${t-1}));
      }
    `}},f1e=`
if (a == b) {
  return 1.0;
};
return a / b;`,h1e=`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,yB=Kr({opSnippet:f1e,packedOpSnippet:h1e,checkOutOfBounds:!0}),m1e={kernelName:Gl,backendName:"webgl",kernelFunc:yB},JA="return a - b;",wB=Kr({opSnippet:JA,packedOpSnippet:JA,supportsComplex:!0,cpuKernelImpl:cve}),g1e={kernelName:Iu,backendName:"webgl",kernelFunc:wB};function xB(e){let{inputs:t,backend:r,attrs:a}=e,{logits:n}=t,{dim:i}=a,s=_.parseAxisParam([i],n.shape),o=bB({inputs:{x:n},backend:r,attrs:{reductionIndices:s,keepDims:!1}}),l=B.expandShapeToKeepDim(o.shape,s),u=ze({inputs:{x:o},backend:r,attrs:{shape:l}}),c=wB({inputs:{a:n,b:u},backend:r}),d=mB({inputs:{x:c},backend:r}),p=I0({inputs:{x:d},backend:r,attrs:{axis:s,keepDims:!1}}),f=ze({inputs:{x:p},backend:r,attrs:{shape:l}}),h=yB({inputs:{a:d,b:f},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(u),r.disposeIntermediateTensorInfo(c),r.disposeIntermediateTensorInfo(d),r.disposeIntermediateTensorInfo(p),r.disposeIntermediateTensorInfo(f),h}var v1e={kernelName:Su,backendName:"webgl",kernelFunc:xB};function b1e(e){let{inputs:t,backend:r,attrs:a}=e,{logits:n}=t,{numSamples:i,seed:s,normalized:o}=a,l=o?n:xB({inputs:{logits:n},backend:r,attrs:{dim:n.shape.length-1}}),u=l.shape[0],c=l.shape[1],d=new p1e(u,c,i),p=[[s]],f=r.runWebGLProgram(d,[l],"int32",p);return o||r.disposeIntermediateTensorInfo(l),f}var y1e={kernelName:cy,backendName:"webgl",kernelFunc:b1e},w1e=Ga+`
  return -x;
`,x1e=`
  vec4 result = -x;
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`;function k1e(e){let{inputs:t,backend:r}=e,{x:a}=t;if(r.shouldExecuteOnCPU([a])){let i=r.texData.get(a.dataId),[s,o]=Yge(i.values,a.shape,a.dtype);return r.makeTensorInfo(o,a.dtype,s)}let n;return ce().getBool("WEBGL_PACK_UNARY_OPERATIONS")?n=new Ko(a.shape,x1e):n=new Zi(a.shape,w1e),r.runWebGLProgram(n,[a],a.dtype)}var E1e={kernelName:Pd,backendName:"webgl",kernelFunc:k1e},C1e=Oi.nonMaxSuppressionV3Impl;function S1e(e){B.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");let{inputs:t,backend:r,attrs:a}=e,{boxes:n,scores:i}=t,{maxOutputSize:s,iouThreshold:o,scoreThreshold:l}=a,u=r.readSync(n.dataId),c=r.readSync(i.dataId),{selectedIndices:d}=C1e(u,c,s,o,l);return r.makeTensorInfo([d.length],"int32",new Int32Array(d))}var $1e={kernelName:Fd,backendName:"webgl",kernelFunc:S1e},I1e=Oi.nonMaxSuppressionV4Impl;function T1e(e){B.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");let{inputs:t,backend:r,attrs:a}=e,{boxes:n,scores:i}=t,{maxOutputSize:s,iouThreshold:o,scoreThreshold:l,padToMaxOutputSize:u}=a,c=r.readSync(n.dataId),d=r.readSync(i.dataId),{selectedIndices:p,validOutputs:f}=I1e(c,d,s,o,l,u);return[r.makeTensorInfo([p.length],"int32",new Int32Array(p)),r.makeTensorInfo([],"int32",new Int32Array([f]))]}var N1e={kernelName:Ld,backendName:"webgl",kernelFunc:T1e},A1e=Oi.nonMaxSuppressionV5Impl;function _1e(e){B.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");let{inputs:t,backend:r,attrs:a}=e,{boxes:n,scores:i}=t,{maxOutputSize:s,iouThreshold:o,scoreThreshold:l,softNmsSigma:u}=a,c=r.readSync(n.dataId),d=r.readSync(i.dataId),p=s,f=o,h=l,m=u,{selectedIndices:g,selectedScores:v}=A1e(c,d,p,f,h,m);return[r.makeTensorInfo([g.length],"int32",new Int32Array(g)),r.makeTensorInfo([v.length],"float32",new Float32Array(v))]}var M1e={kernelName:zd,backendName:"webgl",kernelFunc:_1e},R1e=class{constructor(e,t,r,a){this.variableNames=["indices"],this.outputShape=[e,t],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(${a}), float(${r}),
                      float(index == coords.y)));
      }
    `}},O1e=e=>{let{inputs:t,backend:r,attrs:a}=e,{indices:n}=t,{depth:i,onValue:s,offValue:o}=a,l=_.sizeFromShape(n.shape),u=new R1e(l,i,s,o),c=ze({inputs:{x:n},backend:r,attrs:{shape:[l]}}),d=r.runWebGLProgram(u,[c],n.dtype);r.disposeIntermediateTensorInfo(c);let p=[...n.shape,i],f=ze({inputs:{x:d},backend:r,attrs:{shape:p}});return r.disposeIntermediateTensorInfo(d),f},P1e={kernelName:cu,backendName:"webgl",kernelFunc:O1e};function gb(e){let{inputs:t,backend:r}=e,{x:a}=t;if(a.dtype==="complex64"){let n=Am({inputs:{input:a},backend:r}),i=gb({inputs:{x:n},backend:r}),s=T0({inputs:{input:a},backend:r}),o=gb({inputs:{x:s},backend:r}),l=Io({inputs:{real:i,imag:o},backend:r});return r.disposeIntermediateTensorInfo(n),r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(o),l}else return _m({attrs:{shape:a.shape,dtype:a.dtype,value:a.dtype==="string"?"":0},backend:r})}var D1e={kernelName:ap,backendName:"webgl",kernelFunc:gb};function kB(e){let{inputs:t,backend:r}=e,{x:a}=t;if(a.dtype==="string")throw new Error("onesLike is not supported under string dtype");if(a.dtype==="complex64"){let n=Am({inputs:{input:a},backend:r}),i=kB({inputs:{x:n},backend:r}),s=T0({inputs:{input:a},backend:r}),o=gb({inputs:{x:s},backend:r}),l=Io({inputs:{real:i,imag:o},backend:r});return r.disposeIntermediateTensorInfo(n),r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(o),l}else return _m({attrs:{shape:a.shape,dtype:a.dtype,value:1},backend:r})}var F1e={kernelName:Bd,backendName:"webgl",kernelFunc:kB};function L1e(e){let{inputs:t,backend:r,attrs:a}=e,{axis:n}=a;if(t.length===1)return Hk({inputs:{input:t[0]},backend:r,attrs:{dim:n}});let i=t[0].shape,s=t[0].dtype;t.forEach(c=>{_.assertShapesMatch(i,c.shape,"All tensors passed to stack must have matching shapes"),_.assert(s===c.dtype,()=>"All tensors passed to stack must have matching dtypes")});let o=[],l=t.map(c=>{let d=Hk({inputs:{input:c},backend:r,attrs:{dim:n}});return o.push(d),d}),u=lB({inputs:l,backend:r,attrs:{axis:n}});return o.forEach(c=>r.disposeIntermediateTensorInfo(c)),u}var z1e={kernelName:Vd,backendName:"webgl",kernelFunc:L1e},B1e=class{constructor(e,t,r){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=t.map((l,u)=>l[0]+e[u]+l[1]);let a=e.length,n=Lt(a),i=t.map(l=>l[0]).join(","),s=t.map((l,u)=>l[0]+e[u]).join(","),o=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a);if(a===1){this.userCode=`
        int start = ${i};
        int end = ${s};

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(value);
          } else {
            setOutput(getX(outC - start));
          }
        }
      `;return}this.userCode=`
      ${n} start = ${n}(${i});
      ${n} end = ${n}(${s});

      void main() {
        ${n} outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(value);
        } else {
          ${n} coords = outC - start;
          setOutput(getX(${o}));
        }
      }
    `}},V1e=class{constructor(e,t,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=t.map((h,m)=>h[0]+e[m]+h[1]);let a=e.length,n=Lt(a),i=t.map(h=>h[0]).join(","),s=t.map((h,m)=>h[0]+e[m]).join(","),o=mn("rc",a),l=mn("source",a),u=`${o[a-1]} < ${this.outputShape[a-1]}`,c=a===1?"source":`vec2(${l.slice(-2).join()})`,d=[`${n} rc = outputLoc;`,`${o[a-1]} += 1;
       if(${u}) {
      `,a===1?"":`}
       rc = outputLoc;
       ${o[a-2]} += 1;
       if(${o[a-2]} < ${this.outputShape[a-2]}) {`,a===1?"":`  ${o[a-1]} += 1;
         if(${u}) {`],p=a===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",f="";for(let h=0,m=a===1?2:4;h<m;h++)f+=`
        ${d[h]}
        if (${p}) {
          result[${h}] = float(value);
        } else {
          ${n} source = rc - start;
          result[${h}] = getChannel(getX(${l.join()}), ${c});
        }
      `;f+=a===1?"} ":"}}",this.userCode=`
      const ${n} start = ${n}(${i});
      const ${n} end = ${n}(${s});

      void main() {
        ${n} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${f}
        setOutput(result);
      }
    `}},EB=e=>{let{inputs:t,backend:r,attrs:a}=e,{x:n}=t,{paddings:i,constantValue:s}=a;if(_.sizeFromShape(n.shape)===0){let u=i.map((c,d)=>c[0]+n.shape[d]+c[1]);return _m({backend:r,attrs:{shape:u,value:s,dtype:n.dtype}})}let o=ce().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new V1e(n.shape,i,s):new B1e(n.shape,i,s),l=[[s]];return r.runWebGLProgram(o,[n],n.dtype,l)},W1e={kernelName:du,backendName:"webgl",kernelFunc:EB},H1e=`
  if(a < 0.0 && floor(b) < b){
    return NAN;
  }
  if (b == 0.0) {
    return 1.0;
  }
  return (round(mod(b, 2.0)) != 1) ?
      pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,U1e=`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));
  `+C0+`
  return result;
`,j1e=Kr({opSnippet:H1e,packedOpSnippet:U1e}),G1e={kernelName:pu,backendName:"webgl",kernelFunc:j1e};function q1e(e){let{inputs:t,backend:r,attrs:a}=e,{x:n}=t,{axis:i,keepDims:s}=a,o=n.shape.length,l=[],u=_.parseAxisParam(i,n.shape),c=u,d=B.getAxesPermutation(c,o),p=n;d!=null&&(p=Cr({inputs:{x:n},backend:r,attrs:{perm:d}}),c=B.getInnerMostAxes(c.length,o),l.push(p)),B.assertAxesAreInnerMostDims("prod",c,o);let f;if(r.shouldExecuteOnCPU([p])){let h=r.texData.get(p.dataId).values,{outVals:m,outShape:g,outDtype:v}=Zge(p.shape,p.dtype,h,c);f=r.makeTensorInfo(g,v,m)}else{let[h,m]=B.computeOutAndReduceShapes(p.shape,c),g=_.sizeFromShape(m),v=ze({inputs:{x:p},backend:r,attrs:{shape:[-1,g]}}),b=xy(n.dtype),y=Fu(v,b,"prod",r);f=ze({inputs:{x:y},backend:r,attrs:{shape:h}}),l.push(v),l.push(y)}if(s){l.push(f);let h=B.expandShapeToKeepDim(f.shape,u);f=ze({inputs:{x:f},backend:r,attrs:{shape:h}})}return l.forEach(h=>r.disposeIntermediateTensorInfo(h)),f}var X1e={kernelName:hu,backendName:"webgl",kernelFunc:q1e},CB=e=>{let{backend:t,attrs:r}=e,{start:a,stop:n,step:i,dtype:s}=r,o=Qge(a,n,i,s);return t.makeTensorInfo([o.length],s,o)},Y1e={kernelName:Vh,backendName:"webgl",kernelFunc:CB},K1e="return 1.0 / x;",Z1e=St({opSnippet:K1e}),Q1e={kernelName:Wd,backendName:"webgl",kernelFunc:Z1e},J1e=Ga+`
  return (x < 0.0) ? 0.0 : x;
`,eke=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,tke=St({opSnippet:J1e,packedOpSnippet:eke}),rke={kernelName:mu,backendName:"webgl",kernelFunc:tke},nke=Ga+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,ake=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,ike=St({opSnippet:nke,packedOpSnippet:ake}),ske={kernelName:vu,backendName:"webgl",kernelFunc:ike},oke=class{constructor(e,t,r,a,n){this.variableNames=["A"],this.outputShape=[];let[i,s,o,l]=e;this.outputShape=[i,t,r,l];let u=[a&&t>1?s-1:s,a&&r>1?o-1:o],c=[a&&t>1?t-1:t,a&&r>1?r-1:r],d;n?d="(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":d="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${u[0]/c[0]},
          ${u[1]/c[1]});
      const vec2 inputShapeRC = vec2(${s}.0, ${o}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${d};

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}},lke=class{constructor(e,t,r,a,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];let[i,s,o,l]=e;this.outputShape=[i,t,r,l];let u=[a&&t>1?s-1:s,a&&r>1?o-1:o],c=[a&&t>1?t-1:t,a&&r>1?r-1:r],d;n?d="(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":d="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${u[0]/c[0]},
          ${u[1]/c[1]},
          ${u[1]/c[1]});
      const vec3 inputShapeRC = vec3(${s}.0, ${o}.0,
                                     ${o}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${d};

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${l-1};
        bool hasNextRow = coords.z < ${r-1};

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}};function uke(e){let{inputs:t,backend:r,attrs:a}=e,{images:n}=t,{alignCorners:i,halfPixelCenters:s,size:o}=a,[l,u]=o,c=ce().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new lke(n.shape,l,u,i,s):new oke(n.shape,l,u,i,s);return r.runWebGLProgram(c,[n],"float32")}var cke={kernelName:gu,backendName:"webgl",kernelFunc:uke},dke=class{constructor(e,t,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t;let[,a,n]=t,[,i,s]=e,o=[r&&i>1?a-1:a,r&&s>1?n-1:n],l=[r&&i>1?i-1:i,r&&s>1?s-1:s],u=o[0]/l[0],c=o[1]/l[1],d=1/u,p=1/c,f=Math.ceil(d)*2+2,h=Math.ceil(p)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${u});
        const float widthScale = float(${c});

        const float invHeightScale = float(${d});
        const float invWidthScale = float(${p});

        const int winHeight = int(${f});
        const int winWidth = int(${h});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${i}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${s}) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), ${a-1}.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), ${n-1}.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}};function pke(e){let{inputs:t,backend:r,attrs:a}=e,{images:n,dy:i}=t,{alignCorners:s}=a,o=new dke(i.shape,n.shape,s);return r.runWebGLProgram(o,[i],i.dtype)}var fke={kernelName:fy,backendName:"webgl",kernelFunc:pke},hke=class{constructor(e,t,r,a,n){this.variableNames=["A"],this.outputShape=[];let[i,s,o,l]=e;this.outputShape=[i,t,r,l];let u=[a&&t>1?s-1:s,a&&r>1?o-1:o],c=[a&&t>1?t-1:t,a&&r>1?r-1:r],d=a?"0.5":"0.0",p;n?p="max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":p="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${u[0]/c[0]},
          ${u[1]/c[1]});
      const vec2 inputShapeRC = vec2(${s}.0, ${o}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${p};

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${d})));
        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}},mke=class{constructor(e,t,r,a,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];let[i,s,o,l]=e;this.outputShape=[i,t,r,l];let u=[a&&t>1?s-1:s,a&&r>1?o-1:o],c=[a&&t>1?t-1:t,a&&r>1?r-1:r],d=a?"0.5":"0.0",p;n?p="max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":p="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${u[0]/c[0]},
          ${u[1]/c[1]},
          ${u[1]/c[1]});
      const vec3 inputShapeRC = vec3(${s}.0, ${o}.0,
                                     ${o}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${p};

        // Compute the coordinators of nearest neighbor point.
        ivec3 sourceNearestRC = ivec3(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${d})));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${l-1};
        bool hasNextRow = coords.z < ${r-1};

        vec4 newValue = vec4(
          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),
          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);

        setOutput(newValue);
      }
    `}};function gke(e){let{inputs:t,backend:r,attrs:a}=e,{images:n}=t,{alignCorners:i,halfPixelCenters:s,size:o}=a,[l,u]=o,c=ce().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new mke(n.shape,l,u,i,s):new hke(n.shape,l,u,i,s);return r.runWebGLProgram(c,[n],n.dtype)}var vke={kernelName:Wh,backendName:"webgl",kernelFunc:gke},bke=class{constructor(e,t,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t;let[,a,n]=t,[,i,s]=e,o=[r&&i>1?a-1:a,r&&s>1?n-1:n],l=[r&&i>1?i-1:i,r&&s>1?s-1:s],u=o[0]/l[0],c=o[1]/l[1],d=1/u,p=1/c,f=Math.ceil(d)*2+2,h=Math.ceil(p)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${u});
        const float widthScale = float(${c});

        const float invHeightScale = float(${d});
        const float invWidthScale = float(${p});

        const int winHeight = int(${f});
        const int winWidth = int(${h});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${i}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${s}) {
              continue;
            }

            float sourceFracRow =
              float(${o[0]}) *
                (float(dyR) / float(${l[0]}));

            float sourceFracCol =
                float(${o[1]}) *
                  (float(dyC) / float(${l[1]}));

            int sourceNearestRow = int(min(
                float(int(${a}) - 1),
                ${r} ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(${n}) - 1),
                ${r} ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}};function yke(e){let{inputs:t,backend:r,attrs:a}=e,{images:n,dy:i}=t,{alignCorners:s}=a,o=new bke(i.shape,n.shape,s);return r.runWebGLProgram(o,[i],i.dtype)}var wke={kernelName:py,backendName:"webgl",kernelFunc:yke},xke=class{constructor(e,t){this.variableNames=["x"];let r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);if(this.outputShape=e,r===1){this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(${e[0]} - coord - 1));
        }
      `;return}let a=s=>t.indexOf(s)!==-1&&e[s]!==1?`${e[s]} - coords[${s}] - 1`:`coords[${s}]`,n=e.map((s,o)=>a(o)).join(","),i=Lt(r);this.userCode=`
      void main() {
        ${i} coords = getOutputCoords();
        setOutput(getX(${n}));
      }
    `}},kke=class{constructor(e,t){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;let r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);this.outputShape=e;let a=mn("rc",r),n=`${a[r-1]} + 1 < ${this.outputShape[r-1]}`,i=`${a[r-2]} + 1 < ${this.outputShape[r-2]}`,s=Lt(r);r===1?this.userCode=`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(${e[0]} - rc - 1),
            ${e[0]} - rc - 1);
          if(${n}){
              result.g = getChannel(getX(${e[0]} - (rc  + 1) - 1),
                ${e[0]} - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:this.userCode=`
        void main() {
          ${s} rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = ${o(a.slice())};
          if(${n}){
            result.g = ${l(a.slice())};
          }
          if(${i}) {
            result.b = ${u(a.slice())};
            if(${n}) {
              result.a = ${c(a.slice())};
            }
          }
          setOutput(result);
        }
    `;function o(f){return d(f)}function l(f){return f[r-1]="("+f[r-1]+" + 1)",d(f)}function u(f){return f[r-2]="("+f[r-2]+" + 1)",d(f)}function c(f){return f[r-1]="("+f[r-1]+" + 1)",f[r-2]="("+f[r-2]+" + 1)",d(f)}function d(f){let h=e.map((v,b)=>p(b,f)),m=h.join(","),g=h.slice(-2).join(",");return`getChannel(getX(${m}), vec2(${g}))`}function p(f,h){return t.indexOf(f)!==-1&&e[f]!==1?`${e[f]} - ${h[f]} - 1`:`${h[f]}`}}};function Eke(e){let{inputs:t,backend:r,attrs:a}=e,{x:n}=t,{dims:i}=a,s=n.shape.length,o=_.parseAxisParam(i,n.shape);if(s===0)return da({inputs:{x:n},backend:r});let l=ce().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new kke(n.shape,o):new xke(n.shape,o);return r.runWebGLProgram(l,[n],n.dtype)}var Cke={kernelName:bu,backendName:"webgl",kernelFunc:Eke},Ske=class{constructor(e,t){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];let r=e[1],a=e[2];this.outputShape=e;let n="";typeof t=="number"?n=`float outputValue = ${t.toFixed(2)};`:n=`
        vec3 fill = vec3(${t.join(",")});
        float outputValue = fill[coords[3]];`,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];
          int y = coords[1];
          float coordXFloat = (float(x) - params[0]) * params[3] -
            (float(y) - params[1]) * params[2];
          float coordYFloat = (float(x) - params[0]) * params[2] +
            (float(y) - params[1]) * params[3];
          int coordX = int(round(coordXFloat + params[0]));
          int coordY = int(round(coordYFloat + params[1]));
          ${n}
          if(coordX >= 0 && coordX < ${a} && coordY >= 0 && coordY < ${r}) {
            outputValue = getImage(coords[0], coordY, coordX, coords[3]);
          }
          setOutput(outputValue);
        }
    `}},$ke={kernelName:ip,backendName:"webgl",kernelFunc:({inputs:e,attrs:t,backend:r})=>{let{image:a}=e,{radians:n,fillValue:i,center:s}=t,o=r,l=new Ske(a.shape,i),[u,c]=B.getImageCenter(s,a.shape[1],a.shape[2]),d=[[u,c,Math.sin(n),Math.cos(n)]];return o.runWebGLProgram(l,[a],a.dtype,d)}},Ike=`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`,Tke=St({opSnippet:Ike}),Nke={kernelName:yu,backendName:"webgl",kernelFunc:Tke},Ake="return inversesqrt(x);",_ke=St({opSnippet:Ake,cpuKernelImpl:Jge}),Mke={kernelName:wu,backendName:"webgl",kernelFunc:_ke},SB=class{constructor(e,t,r,a,n,i,s=!0){this.variableNames=["updates","indices","defaultValue"],this.outputShape=i;let o=Lt(n.length),l=Lt(i.length),u="";r===1?u="i":r===2&&(u="i, j");let c=`getIndices(${u})`,d="";a===1?d="i":a===2&&(d="i, coords[1]");let p=`getUpdates(${d})`,f=t>1?"strides[j]":"strides";this.userCode=`
        ${o} strides = ${o}(${n});

        void main() {
          ${l} coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < ${e}; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < ${t}; j++) {
              int index = round(${c});
              flattenedIndex += index * ${f};
            }
            if (flattenedIndex == coords[0]) {
              sum += ${p};
              found = true;
            }
          }
          setOutput(mix(getDefaultValue(), sum, float(found)));
        }
      `}};function Rke(e){let{inputs:t,backend:r,attrs:a}=e,{indices:n,updates:i}=t,{shape:s}=a,{sliceRank:o,numUpdates:l,sliceSize:u,strides:c,outputSize:d}=B.calculateShapes(i,n,s),p=[d/u,u];if(d===0)return r.makeTensorInfo(s,n.dtype);let f=ze({inputs:{x:n},backend:r,attrs:{shape:[l,o]}}),h=ze({inputs:{x:i},backend:r,attrs:{shape:[l,u]}}),m=r.makeTensorInfo([],"float32",new Float32Array([0])),g=new SB(l,o,f.shape.length,h.shape.length,c,p),v=r.runWebGLProgram(g,[h,f,m],h.dtype),b=ze({inputs:{x:v},backend:r,attrs:{shape:s}});return r.disposeIntermediateTensorInfo(f),r.disposeIntermediateTensorInfo(h),r.disposeIntermediateTensorInfo(v),r.disposeIntermediateTensorInfo(m),b}var Oke={kernelName:Ud,backendName:"webgl",kernelFunc:Rke},Pke=class{constructor(e,t,r,a){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[e,r];let n="while (left < right) {",i=`for (int i = 0; i < ${Math.ceil(Math.log2(t+1))}; ++i) { if (left >= right) break;`,s=ce().getNumber("WEBGL_VERSION")===2?n:i,o=a==="left"?"<":"<=";this.userCode=`
       int findBound(int batch, float value) {
         int left = 0;
         int right = numInputs;
         int mid;
         ${s}
           mid = (left + right) / 2;
           if (getSortedSequence(batch, mid) ${o} value) {
             left = mid + 1;
           } else {
             right = mid;
           }
         }
         return right;
       }

       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int valueIndex = coords[1];

         float value = getValues(batch, valueIndex);

         setOutput(float(findBound(batch, value)));
       }
     `}};function Dke(e){let{inputs:t,backend:r,attrs:a}=e,{sortedSequence:n,values:i}=t,{side:s}=a,o=new Pke(n.shape[0],n.shape[1],i.shape[1],s),l=[[n.shape[1]]];return r.runWebGLProgram(o,[n,i],"int32",l)}var Fke={kernelName:hy,backendName:"webgl",kernelFunc:Dke},Lke=class{constructor(e,t,r){this.variableNames=["c","a","b"],this.outputShape=t;let a,n;if(r>4)throw Error(`Where for rank ${r} is not yet supported`);if(r===1)n="resRC",a="resRC";else{let s=["resRC.x","resRC.y","resRC.z","resRC.w"],o=[],l=[];for(let u=0;u<t.length;u++)l.push(`${s[u]}`),u<e&&o.push(`${s[u]}`);a=o.join(),n=l.join()}let i=Lt(r);this.userCode=`
      void main() {
        ${i} resRC = getOutputCoords();
        float cVal = getC(${a});
        if (cVal >= 1.0) {
          setOutput(getA(${n}));
        } else {
          setOutput(getB(${n}));
        }
      }
    `}};function zke(e){let{inputs:t,backend:r}=e,{condition:a,t:n,e:i}=t,s=new Lke(a.shape.length,n.shape,n.shape.length);return r.runWebGLProgram(s,[a,n,i],Ca(n.dtype,i.dtype))}var Bke={kernelName:jd,backendName:"webgl",kernelFunc:zke},Vke=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = ${B.SELU_SCALEALPHA};
  float scale = ${B.SELU_SCALE};
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,Wke=St({opSnippet:Vke}),Hke={kernelName:Gd,backendName:"webgl",kernelFunc:Wke},Uke=Ep+`
  return 1.0 / (1.0 + exp(-1.0 * x));
`,jke=`
  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Gke=St({opSnippet:Uke,packedOpSnippet:jke,cpuKernelImpl:tve}),qke={kernelName:ku,backendName:"webgl",kernelFunc:Gke},Xke=`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`,Yke=St({opSnippet:Xke}),Kke={kernelName:Yd,backendName:"webgl",kernelFunc:Yke},Zke=Ep+`
  return sin(x);
`,Qke=St({opSnippet:Zke}),Jke={kernelName:xu,backendName:"webgl",kernelFunc:Qke},eEe=`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`,tEe=St({opSnippet:eEe}),rEe={kernelName:Xd,backendName:"webgl",kernelFunc:tEe},nEe=`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`,aEe=St({opSnippet:nEe}),iEe={kernelName:Kd,backendName:"webgl",kernelFunc:aEe},sEe=e=>{let{inputs:t,backend:r,attrs:a}=e,{x:n}=t,{blockShape:i,paddings:s}=a;_.assert(n.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");let o=i.reduce((v,b)=>v*b),l=[[0,0]];l.push(...s);for(let v=1+i.length;v<n.shape.length;++v)l.push([0,0]);let u=[],c=EB({inputs:{x:n},backend:r,attrs:{paddings:l,constantValue:0}}),d=B.getReshaped(c.shape,i,o,!1),p=B.getPermuted(d.length,i.length,!1),f=B.getReshapedPermuted(c.shape,i,o,!1),h=ze({inputs:{x:c},backend:r,attrs:{shape:d}}),m=Cr({inputs:{x:h},backend:r,attrs:{perm:p}}),g=ze({inputs:{x:m},backend:r,attrs:{shape:f}});return u.push(c),u.push(h),u.push(m),u.forEach(v=>r.disposeIntermediateTensorInfo(v)),g},oEe={kernelName:Zd,backendName:"webgl",kernelFunc:sEe};function lEe(e){let{inputs:t,backend:r}=e,{indices:a,values:n,denseShape:i,defaultValue:s}=t;if(i.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
         ${i.shape}`);if(a.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
         ${a.shape}`);if(n.shape.length!==1)throw new Error(`Values must be a vector, saw:
         ${n.shape}`);if(s.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${s.shape}`);let o=r.readSync(a.dataId),l=r.readSync(n.dataId),u=r.readSync(i.dataId),c=r.readSync(s.dataId)[0],[d,p,f,h,m]=nve(o,a.shape,a.dtype,l,n.dtype,u,c);return[r.makeTensorInfo(p,a.dtype,d),r.makeTensorInfo([p[0]],n.dtype,f),r.makeTensorInfo([h.length],"bool",new Uint8Array(h.map(g=>Number(g)))),r.makeTensorInfo([m.length],a.dtype,new Int32Array(m))]}var uEe={kernelName:Hh,backendName:"webgl",kernelFunc:lEe};function cEe(e){let{inputs:t,backend:r}=e,{inputIndices:a,inputShape:n,newShape:i}=t;if(a.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape ${a.shape}`);if(n.shape.length!==1)throw new Error(`Input shape should be a vector but received shape ${n.shape}`);if(i.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${i.shape}`);let s=Array.from(r.readSync(n.dataId)),o=r.readSync(a.dataId),l=Array.from(r.readSync(i.dataId)),[u,c,d]=ave(o,a.shape,a.dtype,s,l);return[r.makeTensorInfo(c,a.dtype,u),r.makeTensorInfo([d.length],i.dtype,new Int32Array(d))]}var dEe={kernelName:Jd,backendName:"webgl",kernelFunc:cEe};function pEe(e){let{inputs:t,backend:r}=e,{data:a,indices:n,segmentIds:i}=t;if(a.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(n.shape.length!==1)throw new Error(`Indices should be a vector but received shape
              ${n.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
              ${i.shape}`);let s=r.readSync(a.dataId),o=r.readSync(n.dataId),l=r.readSync(i.dataId),[u,c]=qz(s,a.shape,a.dtype,o,l,!0);return r.makeTensorInfo(c,a.dtype,u)}var fEe={kernelName:Uh,backendName:"webgl",kernelFunc:pEe};function hEe(e){let{inputs:t,backend:r}=e,{data:a,indices:n,segmentIds:i}=t;if(a.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(n.shape.length!==1)throw new Error(`Indices should be a vector but received shape
             ${n.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
             ${i.shape}`);let s=r.readSync(a.dataId),o=r.readSync(n.dataId),l=r.readSync(i.dataId),[u,c]=qz(s,a.shape,a.dtype,o,l);return r.makeTensorInfo(c,a.dtype,u)}var mEe={kernelName:jh,backendName:"webgl",kernelFunc:hEe};function gEe(e){let{inputs:t,backend:r,attrs:a}=e,{sparseIndices:n,sparseValues:i,defaultValue:s}=t,{outputShape:o}=a,{sliceRank:l,numUpdates:u,sliceSize:c,strides:d,outputSize:p}=B.calculateShapes(i,n,o),f=!1;if(i.dtype==="string"){let v=r.bufferSync(n),b=r.bufferSync(i),y=_.decodeString(r.readSync(s.dataId)[0]),w=eve(v,b,o,p,c,u,l,d,y,f);return r.makeTensorInfo(o,w.dtype,w.values)}let h=new SB(u,l,n.shape.length,i.shape.length,d,[p,1],f),m=r.runWebGLProgram(h,[i,n,s],i.dtype),g=ze({inputs:{x:m},backend:r,attrs:{shape:o}});return r.disposeIntermediateTensorInfo(m),g}var vEe={kernelName:my,backendName:"webgl",kernelFunc:gEe};function bEe(e){let{inputs:t,backend:r,attrs:a}=e,{x:n}=t,{numOrSizeSplits:i,axis:s}=a,o=_.parseAxisParam(s,n.shape)[0],l=B.prepareSplitSize(n,i,o),u=n.shape.length,c=new Array(u).fill(0),d=n.shape.slice();return l.map(p=>{let f=[...d];f[o]=p;let h=Cp({inputs:{x:n},backend:r,attrs:{begin:c,size:f}});return c[o]+=p,h})}var yEe={kernelName:Qd,backendName:"webgl",kernelFunc:bEe},e_="return sqrt(x);",wEe=St({opSnippet:e_,packedOpSnippet:e_,cpuKernelImpl:ive}),xEe={kernelName:Eu,backendName:"webgl",kernelFunc:wEe},kEe="return x * x;",EEe=St({opSnippet:kEe}),CEe={kernelName:Gh,backendName:"webgl",kernelFunc:EEe},t_="return (a - b) * (a - b);",SEe=Kr({opSnippet:t_,packedOpSnippet:t_}),$Ee={kernelName:$u,backendName:"webgl",kernelFunc:SEe};function IEe({inputs:e,attrs:t,backend:r}){let{x:a}=e,n=Ga+`
    return x > 0.0 ? 1.0 : float(${t.alpha});
  `,i=new Zi(a.shape,n);return r.runWebGLProgram(i,[a],a.dtype)}var TEe={kernelName:wo,backendName:"webgl",kernelFunc:IEe},NEe=class{constructor(e,t,r){this.variableNames=["x"],this.outputShape=r;let a=r.length,n=Lt(r.length),i=Lt(r.length),s="";if(a===1)s="coords * strides + begin";else{let o=0;s=r.map((l,u)=>(o++,r.length===1?`coords * strides[${u}] + begin[${u}]`:`coords[${o-1}] * strides[${u}] + begin[${u}]`)).join(",")}this.userCode=`
      ${n} begin = ${n}(${e});
      ${n} strides = ${n}(${t});

      void main() {
        ${i} coords = getOutputCoords();
        setOutput(getX(${s}));
      }
    `}};function AEe(e){let{inputs:t,backend:r,attrs:a}=e,{x:n}=t,{begin:i,end:s,strides:o,beginMask:l,endMask:u,ellipsisMask:c,newAxisMask:d,shrinkAxisMask:p}=a,{finalShapeSparse:f,finalShape:h,isIdentity:m,sliceDim0:g,isSimpleSlice:v,begin:b,end:y,strides:w}=Mr.sliceInfo(n.shape,i,s,o,l,u,c,d,p),x;if(m)x=ze({inputs:{x:n},backend:r,attrs:{shape:h}});else if(g||v){_.assert(n.shape.length>=1,()=>`Input must have rank at least 1, got: ${n.shape.length}`);let C=Mr.computeOutShape(b,y,w),E=Cp({inputs:{x:n},backend:r,attrs:{begin:b,size:C}});x=ze({inputs:{x:E},backend:r,attrs:{shape:h}}),r.disposeIntermediateTensorInfo(E)}else if(r.shouldExecuteOnCPU([n])){let C=r.readSync(n.dataId),E=gt(n.shape,n.dtype,C),$=sve(f,E,w,b);x=r.makeTensorInfo(h,n.dtype,$.values)}else{let C=new NEe(b,w,f);x=r.runWebGLProgram(C,[n],n.dtype)}let k=ze({inputs:{x},backend:r,attrs:{shape:h}});return r.disposeIntermediateTensorInfo(x),k}var _Ee={kernelName:ep,backendName:"webgl",kernelFunc:AEe};function MEe(e){let{inputs:t,backend:r,attrs:a}=e,{separator:n,nGramWidths:i,leftPad:s,rightPad:o,padWidth:l,preserveShortSequences:u}=a,{data:c,dataSplits:d}=t,p=r.readSync(c.dataId),f=r.readSync(d.dataId),[h,m]=ove(p,f,n,i,s,o,l,u);return[r.makeTensorInfo([h.length],"string",h),r.makeTensorInfo(d.shape,"int32",m)]}var REe={kernelName:gy,backendName:"webgl",kernelFunc:MEe};function OEe(e){let{inputs:t,backend:r,attrs:a}=e,{skipEmpty:n}=a,{input:i,delimiter:s}=t;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(i.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${i.shape}`);if(s.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${s.shape}`);let o=r.readSync(i.dataId),l=r.readSync(s.dataId)[0],[u,c,d]=lve(o,l,n),p=c.length;return[r.makeTensorInfo([p,2],"int32",u),r.makeTensorInfo([p],"string",c),r.makeTensorInfo([2],"int32",new Int32Array(d))]}var PEe={kernelName:vy,backendName:"webgl",kernelFunc:OEe};function DEe(e){let{inputs:t,backend:r,attrs:a}=e,{numBuckets:n}=a,{input:i}=t;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(n<=0)throw new Error("Number of buckets must be at least 1");let s=r.readSync(i.dataId),o=uve(s,n);return r.makeTensorInfo(i.shape,"int32",o)}var FEe={kernelName:by,backendName:"webgl",kernelFunc:DEe},LEe="return tan(x);",zEe=St({opSnippet:LEe}),BEe={kernelName:Tu,backendName:"webgl",kernelFunc:zEe},VEe=`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`,WEe=St({opSnippet:VEe}),HEe={kernelName:Nu,backendName:"webgl",kernelFunc:WEe},UEe=class{constructor(e,t){this.variableNames=["A"];let r=new Array(e.length);for(let i=0;i<r.length;i++)r[i]=e[i]*t[i];this.outputShape=r,this.rank=r.length;let a=Lt(this.rank),n=jEe(e);this.userCode=`
      void main() {
        ${a} resRC = getOutputCoords();
        setOutput(getA(${n}));
      }
    `}};function jEe(e){let t=e.length;if(t>5)throw Error(`Tile for rank ${t} is not yet supported`);if(t===1)return`imod(resRC, ${e[0]})`;let r=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],a=[];for(let n=0;n<e.length;n++)a.push(`imod(${r[n]}, ${e[n]})`);return a.join()}function $B(e){let{inputs:t,backend:r,attrs:a}=e,{x:n}=t,{reps:i}=a;if(n.dtype==="string"||n.shape.length>5){let o=r.readSync(n.dataId),l=n.dtype==="string"?o.map(d=>_.decodeString(d)):o,u=gt(n.shape,n.dtype,l),c=dve(u,i);return r.makeTensorInfo(c.shape,c.dtype,c.values)}let s=new UEe(n.shape,i);return r.runWebGLProgram(s,[n],n.dtype)}var GEe={kernelName:yo,backendName:"webgl",kernelFunc:$B},qEe=class{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=e,this.userCode=`
       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // We compare elements pair-wise within a group of size 2 * inc.
         // The comparing rule for each group alternates between ascending
         // and descending. Within each group, we compare each pair at
         // positions i and i+inc. To decide whether an element at position i
         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than
         // inc, it is in the first half of the group, we denote it as x0,
         // otherwise we denote it as x1.
         // For example, as shown in the Bitonic top K paper referenced above,
         // Figure5(a) shows that element[1] is in the
         // second half of the group when group size is 2, but it is in the
         // first half of the group when group size is 4.

         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;
         int i = isFirstInPair ? elemIdx : elemIdx - inc;

         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));
         float x0 = i0 < n ? getX(batch, i0) : negativeInf;
         float x1 = i1 < n ? getX(batch, i1) : negativeInf;

         // Denotes which direction indices are in (ascending or descending).
         bool reverse = imod(elemIdx, 2 * dir) >= dir;
         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);
         if (reverse == isGreater) { // Elements in opposite order of direction
           int iTemp = i0;
           i0 = i1;
           i1 = iTemp;
         }
         if (isFirstInPair) {
            setOutput(float(i0));
         } else {
            setOutput(float(i1));
         }
       }
     `}},XEe=class{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=e,this.userCode=`
    void main() {
         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // The output size is half of the previous size.
         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),
         // we only need to output the indices at positions |, the indices at
         // positions _ can be thrown away, see Figure5(b) After Phase 2
         // (Merge phase) in the Bitonic Top K paper referenced above.
         // For example, the paper shows we only need to output the orange bars.
         // The output sequence should look like this | | | | | | | |.
         // Because the sequence is halved, to map the output index back
         // to the previous sequence to find the corresponding value,
         // we need to double the index. When we double the index,
         // we basically interpolate a position, so 2i looks like
         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position
         // of each 2k positions by - elemIdx % k. E.g. for output at
         // index 4,5,6,7, we want to get the corresponding element at
         // original index 8,9,10,11, for output at index 8,9,10,11,
         // we want to get the corresponding element at original index
         // 16,17,18,19, so on and so forth.

         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));
         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));

         float x0 = getX(batch, i0);
         float x1 = i1 < n ? getX(batch, i1) : x0;

         setOutput(x0 >= x1 ? float(i0) : float(i1));
       }
     `}};function Po(e,t){t!==null&&e.disposeIntermediateTensorInfo(t)}function r_(e){let t=1;for(;t<e;)t*=2;return t}function YEe(e){let{inputs:t,backend:r,attrs:a}=e,{x:n}=t,{k:i,sorted:s}=a,o=ce().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),l=ce().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),u=n.shape,c=u[u.length-1];if(r.shouldExecuteOnCPU([n])||c<o||i>l){let $=r.readSync(n.dataId),[N,I]=pve($,u,n.dtype,i,s);return[r.makeTensorInfo(N.shape,N.dtype,N.values),r.makeTensorInfo(I.shape,I.dtype,I.values)]}if(i===0)return u[u.length-1]=0,[r.makeTensorInfo(u,n.dtype,[]),r.makeTensorInfo(u,"int32",[])];if(c===1)return[n,_m({attrs:{shape:u,dtype:"int32",value:0},backend:r})];let d=r.texData.get(n.dataId),p=d!==null&&d.isPacked,f=p?r.unpackTensor(n):n,h=_.sizeFromShape(u)/c,m=ze({inputs:{x:f},attrs:{shape:[h,c]},backend:r});p&&Po(r,f);let g=r_(i),v=r_(c),b=null,y=()=>b===null?[m,m]:[m,b],w=($,N,I)=>{let S=y(),A=new qEe(I),R=[[c],[b===null?1:0],[Number.NEGATIVE_INFINITY],[$],[N]],O=b;b=r.runWebGLProgram(A,S,"int32",R),Po(r,O)};for(let $=1;$<g;$*=2){let N=$*2;for(let I=$;I>=1;I/=2)w(N,I,[h,v])}for(let $=v;$>g;$/=2){let N=y(),I=new XEe([h,$/2]),S=[[c],[b===null?1:0],[g]],A=b;b=r.runWebGLProgram(I,N,"int32",S),Po(r,A);let R=g/2,O=R*2;for(let D=R;D>=1;D/=2)w(O,D,b.shape)}let x=b;b=Cp({inputs:{x:b},backend:r,attrs:{begin:0,size:[h,i]}}),Po(r,x);let k=vB({inputs:{x:m,indices:b},backend:r,attrs:{axis:1,batchDims:1}});Po(r,m);let C=u.slice(0,-1);C.push(i),x=b,b=ze({inputs:{x:b},attrs:{shape:C},backend:r}),Po(r,x);let E=k;return k=ze({inputs:{x:k},attrs:{shape:C},backend:r}),Po(r,E),[k,b]}var KEe={kernelName:tp,backendName:"webgl",kernelFunc:YEe},ZEe=class{constructor(e,t,r,a,n,i){this.variableNames=["Image","Transforms"],this.outputShape=i;let s=r==="nearest"?1:2,o;switch(a){case"constant":o=1;break;case"reflect":o=2;break;case"wrap":o=3;break;case"nearest":o=4;break;default:o=1;break}this.userCode=`
            float mapCoord(float outCoord, float len) {
              float inCoord = outCoord;
              if(${o} == 2) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    if (inCoord < sz2) {
                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +
                      inCoord;
                    }
                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    inCoord -= sz2 * float(int(float(inCoord / sz2)));
                    if (inCoord >= len) {
                      inCoord = sz2 - inCoord - 1.0;
                    }
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${o} == 3) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord -= len * float(int(float(inCoord / sz)));
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${o} == 4) {
                return clamp(outCoord, 0.0, len - 1.0);
              } else {
                return outCoord;
              }
            }

            float readWithFillValue(int batch, int coordY, int coordX,
              int channel) {
              float outputValue;
              if (0 <= coordY && coordY < ${e} && 0 <= coordX && coordX < ${t}) {
                  outputValue = getImage(batch, coordY, coordX, channel);
              } else {
                outputValue = float(${n});
              }
              return outputValue;
            }

            void main() {
              ivec4 coords = getOutputCoords();
              float outputValue;
              int batch = coords[0];
              int x = coords[2];
              int y = coords[1];
              int channel = coords[3];
              float xf = float(x);
              float yf = float(y);
              float a1 = getTransforms(batch, 0);
              float a2 = getTransforms(batch, 1);
              float a3 = getTransforms(batch, 2);
              float b1 = getTransforms(batch, 3);
              float b2 = getTransforms(batch, 4);
              float b3 = getTransforms(batch, 5);
              float c1 = getTransforms(batch, 6);
              float c2 = getTransforms(batch, 7);
              float projection = c1 * xf + c2 * yf + 1.0;
              if (projection == 0.0) {
                outputValue = float(${n});
              } else {
                float inX = (a1 * xf + a2 * yf + a3) / projection;
                float inY = (b1 * xf + b2 * yf + b3) / projection;
                float mapX = mapCoord(inX, float(${t}));
                float mapY = mapCoord(inY, float(${e}));

                if (${s} == 1) {
                  int coordY = int(round(mapY));
                  int coordX = int(round(mapX));
                  outputValue = readWithFillValue(batch, coordY, coordX,
                    channel);
                } else {
                  float yFloor = floor(mapY);
                  float xFloor = floor(mapX);
                  float yCeil = yFloor + 1.0;
                  float xCeil = xFloor + 1.0;
                  float valueYFloor = (xCeil - mapX) *
                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);
                  float valueYCeil = (xCeil - mapX) *
                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);
                  outputValue = (yCeil - mapY) * valueYFloor +
                  (mapY - yFloor) * valueYCeil;
                }
              }
              setOutput(outputValue);
            }
        `}};function QEe(e){let{inputs:t,backend:r,attrs:a}=e,{image:n,transforms:i}=t,{interpolation:s,fillMode:o,fillValue:l,outputShape:u}=a,[c,d,p,f]=n.shape,[h,m]=u!=null?u:[d,p],g=[c,h,m,f],v=new ZEe(d,p,s,o,l,g);return r.runWebGLProgram(v,[n,i],"float32")}var JEe={kernelName:rp,backendName:"webgl",kernelFunc:QEe};function eCe(e){let{inputs:t,attrs:r,backend:a}=e,{axis:n}=r,{x:i}=t;bp(i,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");let s=a.readSync(i.dataId),{outputValues:o,outputShape:l,indices:u}=fve(s,n,i.shape,i.dtype);return[a.makeTensorInfo(l,i.dtype,o),a.makeTensorInfo([u.length],"int32",u)]}var tCe={kernelName:yy,backendName:"webgl",kernelFunc:eCe};function rCe(e){let{inputs:t,backend:r,attrs:a}=e,{value:n}=t,{axis:i}=a;i<0&&(i+=n.shape.length);let s=n,o=s.shape.length,l=n.shape[i],u=new Array(o-1),c=0;for(let m=0;m<o;m++)m!==i&&(u[c++]=s.shape[m]);let d=[],p=new Array(o).fill(0),f=s.shape.slice();f[i]=1;let h=new Array(l);for(let m=0;m<h.length;m++){p[i]=m;let g=Cp({inputs:{x:s},backend:r,attrs:{begin:p,size:f}}),v=ze({inputs:{x:g},backend:r,attrs:{shape:u}});h[m]=v,d.push(g)}return d.forEach(m=>r.disposeIntermediateTensorInfo(m)),h}var nCe={kernelName:np,backendName:"webgl",kernelFunc:rCe},aCe=class{constructor(e,t){this.variableNames=["x","segmentIds"];let r=e.windowSize,a=e.batchSize,n=e.inSize,i=e.numSegments,s=i*Math.ceil(n/r);this.outputShape=[a,s];let o="0.0",l="sumValue",u=Math.floor(r/4)*4,c=r%4,d=`
        sumValue += dot(values, segFilter);
    `,p="";n%r>0&&(p=`
        if (inIdx < 0 || inIdx >= ${n}) {
          return initializationValue;
        }
      `);let f="";n%r>0&&(f=`
        if (inIdx < 0 || inIdx >= ${n}) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = ${o};

      float getValue(int batch, int inIdx) {
        ${p}
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        ${f}
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          ${i})) * float(${r}));
        int currentSeg = int(mod(float(outIdx), float(${i})));

        float sumValue = 0.0;

        for (int i = 0; i < ${u}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          ${d}
        }

        int inIdx = inOffset + ${u};
        if (${c===1}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          ${d}
        } else if (${c===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          ${d}
        } else if (${c===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          ${d}
        }
        setOutput(${l});
      }
    `}};function iCe(e){let{inputs:t,backend:r,attrs:a}=e,{x:n,segmentIds:i}=t,{numSegments:s}=a,o=n.shape.length,l=[],u=0,c=B.getAxesPermutation([u],o),d=n;c!=null&&(d=Cr({inputs:{x:n},backend:r,attrs:{perm:c}}),l.push(d),u=B.getInnerMostAxes(1,o)[0]);let p=B.segment_util.computeOutShape(d.shape,u,s),f=_.sizeFromShape([d.shape[u]]),h=ze({inputs:{x:d},backend:r,attrs:{shape:[-1,f]}});l.push(h);let m=xy(n.dtype),g=(w,x,k,C,E)=>{let $=w.shape[0],N=w.shape[1],I=B.segment_util.segOpComputeOptimalWindowSize(N,E),S={windowSize:I,inSize:N,batchSize:$,numSegments:E},A=new aCe(S,x),R=r.compileAndRun(A,[w,k],C);if(l.push(R),R.shape[1]===E)return R;let O=CB({backend:r,attrs:{start:0,stop:E,step:1,dtype:"float32"}}),D=$B({inputs:{x:O},backend:r,attrs:{reps:[N/I]}});return l.push(O),l.push(D),g(R,x,D,C,E)},v=g(h,"unsortedSegmentSum",i,m,s),b=ze({inputs:{x:v},backend:r,attrs:{shape:p}}),y=b;if(c!=null){l.push(b);let w=B.getUndoAxesPermutation(c);y=Cr({inputs:{x:y},backend:r,attrs:{perm:w}})}return l.forEach(w=>r.disposeIntermediateTensorInfo(w)),y}var sCe={kernelName:qh,backendName:"webgl",kernelFunc:iCe},oCe=[lbe,cbe,fbe,gbe,bbe,xbe,Ebe,Sbe,Nbe,_be,Obe,Fbe,Bbe,Ube,qbe,Ybe,Zbe,tye,nye,iye,uye,gye,bye,wye,$ye,Tye,Mye,Hve,Pye,Bye,Uye,Kye,Qye,e0e,r0e,a0e,o0e,c0e,f0e,m0e,v0e,y0e,k0e,C0e,T0e,A0e,R0e,D0e,L0e,W0e,G0e,K0e,J0e,rwe,nwe,iwe,owe,uwe,dwe,fwe,vwe,wwe,Ewe,Swe,Twe,_we,Pwe,zwe,Wve,Vwe,Lye,Uwe,qwe,Kwe,jve,exe,axe,sxe,cxe,fxe,vxe,wxe,Cxe,Txe,_xe,Rxe,Fxe,zxe,Vxe,jxe,qxe,Yxe,Zxe,Jxe,n1e,o1e,d1e,y1e,Kve,E1e,$1e,N1e,M1e,kye,P1e,F1e,z1e,W1e,G1e,qve,X1e,Y1e,Eye,m1e,Q1e,rke,ske,Qve,cke,fke,vke,wke,Cke,$ke,Nke,Mke,Oke,Fke,Bke,Hke,qke,Kke,Jke,rEe,hye,v1e,iEe,oEe,uEe,dEe,fEe,mEe,vEe,yEe,xEe,CEe,$Ee,TEe,_Ee,REe,PEe,FEe,g1e,ibe,BEe,HEe,GEe,KEe,JEe,sbe,tCe,nCe,sCe,D1e];for(let e of oCe)Xh(e);var ar;(function(e){e[e.float32=0]="float32",e[e.int32=1]="int32",e[e.bool=2]="bool",e[e.string=3]="string",e[e.complex64=4]="complex64"})(ar||(ar={}));var yh;(function(e){e[e.linear=0]="linear",e[e.relu=1]="relu",e[e.relu6=2]="relu6",e[e.prelu=3]="prelu",e[e.leakyrelu=4]="leakyrelu",e[e.sigmoid=5]="sigmoid",e[e.elu=6]="elu"})(yh||(yh={}));var IB;function lCe(e){IB=e.wasm.cwrap(cl,null,["number","array","number","number","array","number","number","number","number","number","number","number","number"])}function uCe(e){let{inputs:t,backend:r,attrs:a}=e,{a:n,b:i,bias:s,preluActivationWeights:o}=t;if(n.dtype!=="float32"||i.dtype!=="float32")throw new Error("_FusedMatMul for non non-float32 tensors not yet supported.");let{transposeA:l,transposeB:u,activation:c,leakyreluAlpha:d}=a,p=r.dataIdMap.get(n.dataId).id,f=r.dataIdMap.get(i.dataId).id,h=0;if(s!=null){let E=r.dataIdMap.get(s.dataId);if(E.shape.length!==1)throw new Error(`_FusedMatMul only supports rank-1 bias but got rank ${E.shape.length}.`);h=E.id}let m=o==null?0:r.dataIdMap.get(o.dataId).id,g=yh[c];if(g==null)throw new Error(`${c} activation not yet supported for FusedConv2D in the wasm backend.`);let v=l?n.shape[2]:n.shape[1],b=u?i.shape[1]:i.shape[2],y=sp.assertAndGetBroadcastShape(n.shape.slice(0,-2),i.shape.slice(0,-2)),w=r.makeOutput([...y,v,b],n.dtype),x=r.dataIdMap.get(w.dataId).id,k=new Uint8Array(new Int32Array(n.shape).buffer),C=new Uint8Array(new Int32Array(i.shape).buffer);return IB(p,k,n.shape.length,f,C,i.shape.length,l,u,g,h,m,d||0,x),w}var cCe={kernelName:cl,backendName:"wasm",setupFunc:lCe,kernelFunc:uCe};function Zr(e,t){let r;function a(i){r=i.wasm.cwrap(e,null,["number","number","number"])}function n(i){let{backend:s,inputs:{x:o}}=i,l=s.dataIdMap.get(o.dataId).id,u=s.makeOutput(o.shape,t||o.dtype),c=s.dataIdMap.get(u.dataId).id;return _.sizeFromShape(u.shape)===0||r(l,ar[o.dtype],c),u}return{kernelName:e,backendName:"wasm",setupFunc:a,kernelFunc:n}}var dCe=Zr(ad);function Tn(e,t,r){let a;function n(s){a=s.wasm.cwrap(e,null,["number","array","number","number","array","number","number","number"])}function i(s){let{backend:o,inputs:l}=s,{a:u,b:c}=l,d=o.dataIdMap.get(u.dataId).id,p=o.dataIdMap.get(c.dataId).id,f=r!=null?r:u.dtype,h=B.assertAndGetBroadcastShape(u.shape,c.shape),m=o.makeOutput(h,f);if(_.sizeFromShape(h)===0)return m;let g=new Uint8Array(new Int32Array(u.shape).buffer),v=new Uint8Array(new Int32Array(c.shape).buffer),b=o.dataIdMap.get(m.dataId).id;return a(d,g,u.shape.length,p,v,c.shape.length,ar[u.dtype],b),m}return{kernelName:e,backendName:"wasm",setupFunc:n,kernelFunc:i}}var pCe=Tn(vo),TB;function fCe(e){TB=e.wasm.cwrap(Ol,null,["array","number","number","number"])}function hCe(e){let{inputs:t,backend:r}=e,a=r.makeOutput(t[0].shape,t[0].dtype);if(_.sizeFromShape(a.shape)===0)return a;let n=t.map(o=>r.dataIdMap.get(o.dataId).id),i=new Uint8Array(new Int32Array(n).buffer),s=r.dataIdMap.get(a.dataId).id;return TB(i,n.length,ar[a.dtype],s),a}var mCe={kernelName:Ol,backendName:"wasm",setupFunc:fCe,kernelFunc:hCe};function N0(e){let{inputs:{x:t},backend:r}=e,a=r.makeOutput(t.shape,t.dtype),n=r.typedArrayFromHeap(t);return r.typedArrayFromHeap(a).set(n),a}var gCe={kernelName:Jl,backendName:"wasm",kernelFunc:N0},NB;function vCe(e){NB=e.wasm.cwrap(ts,null,["number","array","number","number","number","array","number"])}function po(e){let{inputs:t,backend:r,attrs:a}=e,[n,i]=yCe(t.x.shape,a.perm),s=!0;for(let h=0;h<i.length;h++)i[h]!==h&&(s=!1);let o=bCe(t.x.shape,a.perm),l={dataId:t.x.dataId,shape:n,dtype:t.x.dtype};if(s){let h=N0({inputs:t,backend:r});return h.shape=o,h}let u=r.makeOutput(o,l.dtype),c=r.dataIdMap.get(l.dataId).id,d=r.dataIdMap.get(u.dataId).id,p=new Uint8Array(new Int32Array(i).buffer),f=new Uint8Array(new Int32Array(l.shape).buffer);return NB(c,f,l.shape.length,ar[l.dtype],d,p,i.length),u}function bCe(e,t){let r=new Array(e.length);for(let a=0;a<r.length;a++)r[a]=e[t[a]];return r}function yCe(e,t){let r=[],a=[];for(let n=0;n<e.length;++n)e[n]!==1&&r.push(e[n]),e[t[n]]!==1&&a.push(t[n]);for(let n=0;n<a.length;++n){let i=-1;for(let s=0;s<a.length;++s)a[s]>=n&&(i===-1||a[i]>a[s])&&(i=s);a[i]=n}return[r,a]}var wCe={kernelName:ts,backendName:"wasm",kernelFunc:po,setupFunc:vCe};function To(e,t,r){let a=e.shape,n=e.shape.length,i=_.parseAxisParam(t,a),s=i,o=B.getAxesPermutation(s,n),l=null,u=!1;if(o!=null){let c=new Array(n);for(let p=0;p<c.length;p++)c[p]=a[o[p]];s=B.getInnerMostAxes(s.length,n),l=po({inputs:{x:e},attrs:{perm:o},backend:r});let d=r.dataIdMap.get(e.dataId).id;r.dataIdMap.get(l.dataId).id!==d&&(u=!0)}return{transposed:l,originalAxes:i,axes:s,inputWasTransposed:u}}var AB;function xCe(e){AB=e.wasm.cwrap(od,null,["number, number, number"])}function kCe(e){let{backend:t,inputs:r,attrs:a}=e,{axis:n,keepDims:i}=a,{x:s}=r,o=t.dataIdMap.get(s.dataId).id,l=s,{transposed:u,axes:c,originalAxes:d,inputWasTransposed:p}=To(s,n,t);if(p){let b=t.dataIdMap.get(u.dataId).id;l=u,o=b}let f=l.shape.length;B.assertAxesAreInnerMostDims("all",c,f);let[h,m]=B.computeOutAndReduceShapes(l.shape,c),g=_.sizeFromShape(m),v=t.makeOutput(h,s.dtype);if(_.sizeFromShape(l.shape)!==0){let b=t.dataIdMap.get(v.dataId).id;AB(o,g,b)}if(p&&t.disposeData(u.dataId),i){let b=B.expandShapeToKeepDim(v.shape,d);v.shape=b}return v}var ECe={kernelName:od,backendName:"wasm",setupFunc:xCe,kernelFunc:kCe},_B;function CCe(e){_B=e.wasm.cwrap(ld,null,["number, number, number"])}function SCe(e){let{backend:t,inputs:r,attrs:a}=e,{axis:n,keepDims:i}=a,{x:s}=r,o=t.dataIdMap.get(s.dataId).id,l=s,{transposed:u,axes:c,originalAxes:d,inputWasTransposed:p}=To(s,n,t);if(p){let b=t.dataIdMap.get(u.dataId).id;l=u,o=b}let f=l.shape.length;B.assertAxesAreInnerMostDims("any",c,f);let[h,m]=B.computeOutAndReduceShapes(l.shape,c),g=_.sizeFromShape(m),v=t.makeOutput(h,s.dtype);if(_.sizeFromShape(l.shape)!==0){let b=t.dataIdMap.get(v.dataId).id;_B(o,g,b)}if(p&&t.disposeData(u.dataId),i){let b=B.expandShapeToKeepDim(v.shape,d);v.shape=b}return v}var $Ce={kernelName:ld,backendName:"wasm",setupFunc:CCe,kernelFunc:SCe},MB;function ICe(e){MB=e.wasm.cwrap(Pl,null,["number","number","number","number","number"])}function TCe(e){let{backend:t,inputs:r,attrs:a}=e,{axis:n}=a,{x:i}=r,s=t.dataIdMap.get(i.dataId).id,o=s,l=i,{transposed:u,axes:c,inputWasTransposed:d}=To(i,n,t);if(d){let v=t.dataIdMap.get(u.dataId).id;v!==s&&(l=u,o=v)}let p=l.shape.slice(0,-1),f=t.makeOutput(p,"int32"),h=t.dataIdMap.get(f.dataId).id,m=_.sizeFromShape(f.shape),g=l.shape[c[0]];return MB(o,ar[l.dtype],m,g,h),d&&t.disposeData(u.dataId),f}var NCe={kernelName:Pl,backendName:"wasm",kernelFunc:TCe,setupFunc:ICe},RB;function ACe(e){RB=e.wasm.cwrap(Dl,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function _Ce(e){let{inputs:t,attrs:r,backend:a}=e,n=t.x,i=a.dataIdMap.get(n.dataId).id,{filterSize:s,strides:o,pad:l,dimRoundingMode:u}=r,c=B.computePool2DInfo(n.shape,s,o,1,l,u),d=c.filterHeight,p=c.filterWidth,f=c.padInfo.top,h=c.padInfo.right,m=c.padInfo.bottom,g=c.padInfo.left,v=c.strideHeight,b=c.strideWidth,y=c.inChannels;if(c.dataFormat!=="channelsLast")throw new Error(`wasm backend does not support dataFormat:'${c.dataFormat}'. Please use 'channelsLast'.`);if(c.dilationWidth!==1||c.dilationHeight!==1)throw new Error(`was backend only supports average pooling with dilation = [1, 1], got [${c.dilationHeight}, ${c.dilationWidth}].`);let w=a.makeOutput(c.outShape,"float32"),x=a.dataIdMap.get(w.dataId).id;return RB(i,n.shape[0],n.shape[1],n.shape[2],d,p,f,h,m,g,v,b,y,x),w}var MCe={kernelName:Dl,backendName:"wasm",setupFunc:ACe,kernelFunc:_Ce};function Dn(e){let{inputs:t,attrs:r}=e,{x:a}=t,{shape:n}=r,i=_.sizeFromShape(a.shape),s=_.inferFromImplicitShape(n,i);return _.assert(i===_.sizeFromShape(s),()=>`new shape: ${s}, old shape: ${a.shape}. New shape and old shape must have the same number of elements.`),e.backend.incRef(a.dataId),{dataId:a.dataId,shape:s,dtype:a.dtype}}var RCe={kernelName:Hd,backendName:"wasm",kernelFunc:Dn},OB;function OCe(e){OB=e.wasm.cwrap(Fl,null,["number","array","number","number","array","number","number","number","number"])}function PCe(e){let{inputs:t,backend:r,attrs:a}=e,{a:n,b:i}=t,{transposeA:s,transposeB:o}=a;if(n.dtype!=="float32"||i.dtype!=="float32")throw new Error("BatchMatMul for non non-float32 tensors not yet supported.");let l=n.shape.length,u=i.shape.length,c=s?n.shape[l-2]:n.shape[l-1],d=o?i.shape[u-1]:i.shape[u-2],p=s?n.shape[l-1]:n.shape[l-2],f=o?i.shape[u-2]:i.shape[u-1],h=n.shape.slice(0,-2),m=i.shape.slice(0,-2),g=_.sizeFromShape(h),v=_.sizeFromShape(m),b=sp.assertAndGetBroadcastShape(n.shape.slice(0,-2),i.shape.slice(0,-2)).concat([p,f]);_.assert(c===d,()=>`Error in matMul: inner shapes (${c}) and (${d}) of Tensors with shapes ${n.shape} and ${i.shape} and transposeA=${s} and transposeB=${o} must match.`);let y=s?[g,c,p]:[g,p,c],w=o?[v,f,d]:[v,d,f],x=Dn({inputs:{x:n},backend:r,attrs:{shape:y}}),k=Dn({inputs:{x:i},backend:r,attrs:{shape:w}}),C=r.dataIdMap.get(x.dataId).id,E=r.dataIdMap.get(k.dataId).id,$=s?x.shape[2]:x.shape[1],N=o?k.shape[1]:k.shape[2],I=Math.max(g,v),S=r.makeOutput([I,$,N],x.dtype),A=r.dataIdMap.get(S.dataId).id,R=new Uint8Array(new Int32Array(x.shape).buffer),O=new Uint8Array(new Int32Array(k.shape).buffer);return OB(C,R,x.shape.length,E,O,k.shape.length,s,o,A),r.disposeData(x.dataId),r.disposeData(k.dataId),S.shape=b,S}var DCe={kernelName:Fl,backendName:"wasm",setupFunc:OCe,kernelFunc:PCe};function Il(e){let{inputs:{x:t},attrs:{begin:r,size:a},backend:n}=e,[i,s]=Mr.parseSliceParams(t,r,a),o=Mr.isSliceContinous(t.shape,i,s),l=n.readSync(t.dataId),u=n.makeOutput(s,t.dtype),c=_.computeStrides(t.shape),d=n.dataIdMap.get(u.dataId);if(o){let h=Mr.computeFlatOffset(i,c);return t.dtype==="string"?d.stringBytes=l.slice(h,h+_.sizeFromShape(s)):n.typedArrayFromHeap(u).set(l.subarray(h,h+_.sizeFromShape(s))),u}if(t.dtype==="string"){let h=db(l,i,s,t.shape,t.dtype);return d.stringBytes=h,u}let p=n.typedArrayFromHeap(u),f=t.shape.length;if(f===2)FCe(l,c[0],p,i,s);else if(f===3)LCe(l,c[0],c[1],p,i,s);else if(f===4)zCe(l,c[0],c[1],c[2],p,i,s);else{let h=db(l,i,s,t.shape,t.dtype);p.set(h)}return u}function FCe(e,t,r,a,n){let i=0,s=a[0],o=a[1],l=s+n[0];for(let u=s;u<l;u++){let c=u*t+o;r.set(e.subarray(c,c+n[1]),i),i+=n[1]}}function LCe(e,t,r,a,n,i){let s=0,o=n[0],l=n[1],u=n[2],c=o+i[0],d=l+i[1];for(let p=o;p<c;p++)for(let f=l;f<d;f++){let h=p*t+f*r+u;a.set(e.subarray(h,h+i[2]),s),s+=i[2]}}function zCe(e,t,r,a,n,i,s){let o=0,l=i[0],u=i[1],c=i[2],d=l+s[0],p=u+s[1],f=c+s[2],h=i[3];for(let m=l;m<d;m++)for(let g=u;g<p;g++)for(let v=c;v<f;v++){let b=m*t+g*r+v*a+h;n.set(e.subarray(b,b+s[3]),o),o+=s[3]}}var BCe={kernelName:qd,backendName:"wasm",kernelFunc:Il};function VCe(e){let{inputs:t,backend:r,attrs:a}=e,{x:n}=t,{blockShape:i,crops:s}=a,o=i.reduce((v,b)=>v*b),l=B.getReshaped(n.shape,i,o),u=B.getPermuted(l.length,i.length),c=B.getReshapedPermuted(n.shape,i,o),d=B.getSliceBeginCoords(s,i.length),p=B.getSliceSize(c,s,i.length),f=Dn({inputs:{x:n},backend:r,attrs:{shape:l}}),h=po({inputs:{x:f},backend:r,attrs:{perm:u}}),m=Dn({inputs:{x:h},backend:r,attrs:{shape:c}}),g=Il({inputs:{x:m},backend:r,attrs:{begin:d,size:p}});return r.disposeData(f.dataId),r.disposeData(h.dataId),r.disposeData(f.dataId),g}var WCe={kernelName:hd,backendName:"wasm",kernelFunc:VCe};function Mm(e){let{inputs:{x:t},attrs:{dtype:r},backend:a}=e,n=a.makeOutput(t.shape,r),i=a.typedArrayFromHeap(t);return a.typedArrayFromHeap(n).set(i),n}var HCe={kernelName:Ll,backendName:"wasm",kernelFunc:Mm},UCe=Zr(zl),PB;function jCe(e){PB=e.wasm.cwrap(bo,null,["number","number","number","number"])}function GCe(e){let{inputs:t,backend:r,attrs:a}=e,{x:n}=t,{clipValueMin:i,clipValueMax:s}=a,o=r.dataIdMap.get(n.dataId).id,l=r.makeOutput(n.shape,n.dtype),u=r.dataIdMap.get(l.dataId).id;return PB(o,i,s,u),l}var qCe={kernelName:bo,backendName:"wasm",setupFunc:jCe,kernelFunc:GCe};function DB(e){let{inputs:t,backend:r}=e,a=_.parseAxisParam(e.attrs.axis,t[0].shape)[0],n=B.computeOutShape(t.map(f=>f.shape),a),i=t.filter(f=>_.sizeFromShape(f.shape)>0);if(i.length===1)return N0({inputs:{x:i[0]},backend:r});let s=r.makeOutput(n,t[0].dtype);if(_.sizeFromShape(n)===0)return s;let o=i.map(f=>f.shape);if(B.assertParamsConsistent(o,a),i[0].dtype==="string"){let f=i.map(y=>{let w=_.sizeFromShape(y.shape.slice(a));return Dn({inputs:{x:y},backend:r,attrs:{shape:[-1,w]}})}),h=f.map(y=>({vals:r.readSync(y.dataId),shape:y.shape}));n=B.computeOutShape(f.map(y=>y.shape),1);let m=f[0].shape[0]===1,g=Y$(h,n,t[0].dtype,m),v=B.computeOutShape(i.map(y=>y.shape),a);s.shape=v;let b=r.dataIdMap.get(s.dataId);return b.stringBytes=B.fromStringArrayToUint8(g),f.forEach(y=>r.disposeData(y.dataId)),s}let l=_.sizeFromShape(i[0].shape.slice(0,a)),u=0,c=i.map(f=>{let h=_.sizeFromShape(f.shape.slice(a));return u+=h,h}),d=i.map(f=>r.typedArrayFromHeap(f)),p=r.typedArrayFromHeap(s);for(let f=0;f<l;f++){let h=f*u;for(let m=0;m<d.length;m++){let g=c[m],v=f*g,b=d[m].subarray(v,v+g);p.set(b,h),h+=g}}return s}var XCe={kernelName:md,backendName:"wasm",kernelFunc:DB},FB;function YCe(e){FB=e.wasm.cwrap(Bl,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function KCe(e){let{inputs:t,attrs:r,backend:a}=e,{x:n,filter:i}=t,s=a.dataIdMap.get(n.dataId).id,o=a.dataIdMap.get(i.dataId).id,{strides:l,dilations:u,pad:c,dimRoundingMode:d,dataFormat:p}=r,f=B.convertConv2DDataFormat(p),h=B.computeConv2DInfo(n.shape,i.shape,l,u,c,d,!1,f),m=h.filterHeight,g=h.filterWidth,v=h.padInfo.top,b=h.padInfo.right,y=h.padInfo.bottom,w=h.padInfo.left,x=h.dilationHeight,k=h.dilationWidth,C=h.strideHeight,E=h.strideWidth,$=h.inChannels,N=h.outChannels,I=h.padInfo.type==="SAME"?1:0;if(h.dataFormat!=="channelsLast")throw new Error(`wasm backend Conv2D does not support dataFormat:'${h.dataFormat}'. Please use 'channelsLast'.`);let S=a.makeOutput(h.outShape,"float32"),A=a.dataIdMap.get(S.dataId).id;return FB(s,n.shape[0],n.shape[1],n.shape[2],o,m,g,v,b,y,w,I,x,k,C,E,$,N,A),S}var ZCe={kernelName:Bl,backendName:"wasm",setupFunc:YCe,kernelFunc:KCe},LB;function QCe(e){LB=e.wasm.cwrap(Vl,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function JCe(e){let{backend:t,inputs:r,attrs:a}=e,{dy:n,filter:i}=r,{strides:s,pad:o,dataFormat:l,dimRoundingMode:u,inputShape:c}=a,d=1,p=B.convertConv2DDataFormat(l),f=B.computeConv2DInfo(c,i.shape,s,d,o,u,!1,p),{batchSize:h,filterHeight:m,filterWidth:g,inChannels:v,inHeight:b,inWidth:y,outChannels:w,outHeight:x,outWidth:k,strideHeight:C,strideWidth:E}=f,$=m-1-f.padInfo.top,N=g-1-f.padInfo.left,I=f.dataFormat==="channelsLast",S=_.computeStrides(f.inShape),A=_.computeStrides(n.shape),[R,O,D]=_.computeStrides(i.shape),z=S[0],U=I?S[1]:S[2],j=I?S[2]:1,G=I?1:S[1],L=A[0],V=I?A[1]:A[2],H=I?A[2]:1,Y=I?1:A[1],K=t.makeOutput(f.inShape,"float32"),Z=t.dataIdMap.get(K.dataId).id,le=t.dataIdMap.get(n.dataId).id,de=t.dataIdMap.get(i.dataId).id;return LB(le,de,h,m,g,b,y,v,x,k,w,C,E,$,N,R,O,D,z,U,j,G,L,V,H,Y,Z),K}var eSe={kernelName:Vl,backendName:"wasm",setupFunc:QCe,kernelFunc:JCe},tSe=Zr(Wl),rSe=Zr(Hl),Uk;(function(e){e[e.bilinear=0]="bilinear",e[e.nearest=1]="nearest"})(Uk||(Uk={}));var zB;function nSe(e){zB=e.wasm.cwrap(vd,null,["number","number","number","number","array","number","number","number","number","number"])}function aSe(e){let{backend:t,inputs:r,attrs:a}=e,{method:n,extrapolationValue:i,cropSize:s}=a,{image:o,boxes:l,boxInd:u}=r,c=l.shape[0],[d,p]=s,f=[c,d,p,o.shape[3]],h=t.dataIdMap.get(o.dataId),m;o.dtype!=="float32"&&(m=Mm({backend:t,inputs:{x:o},attrs:{dtype:"float32"}}),h=t.dataIdMap.get(m.dataId));let g=h.id,v=t.dataIdMap.get(l.dataId).id,b=t.dataIdMap.get(u.dataId).id,y=t.makeOutput(f,"float32"),w=t.dataIdMap.get(y.dataId).id,x=new Uint8Array(new Int32Array(o.shape).buffer);return zB(g,v,b,c,x,d,p,Uk[n],i,w),m!=null&&t.disposeData(m.dataId),y}var iSe={kernelName:vd,backendName:"wasm",setupFunc:nSe,kernelFunc:aSe},BB;function sSe(e){BB=e.wasm.cwrap(gd,null,["number","number","number","number","number","number"])}function oSe(e){let{inputs:t,backend:r,attrs:a}=e,{x:n}=t,{axis:i,exclusive:s,reverse:o}=a,l=n.shape.length;_.assert(n.dtype==="float32"||n.dtype==="int32",()=>`cumprod does not support ${n.dtype} tensors in the WASM backend`);let u=B.getAxesPermutation([i],l),c=n;u!==null&&(c=po({inputs:{x:n},attrs:{perm:u},backend:r}));let d=B.getInnerMostAxes(1,l)[0];B.assertAxesAreInnerMostDims("cumprod",[d],l);let p=r.makeOutput(c.shape,c.dtype),f=c.shape[d],h=r.dataIdMap.get(c.dataId).id,m=r.dataIdMap.get(p.dataId).id;BB(h,s?1:0,o?1:0,f,m,ar[n.dtype]);let g=p;if(u!==null){let v=B.getUndoAxesPermutation(u);g=po({inputs:{x:p},attrs:{perm:v},backend:r}),r.disposeData(c.dataId),r.disposeData(p.dataId)}return g}var lSe={kernelName:gd,backendName:"wasm",setupFunc:sSe,kernelFunc:oSe},VB;function uSe(e){VB=e.wasm.cwrap(Ul,null,["number","number","number","number","number","number"])}function cSe(e){let{inputs:t,backend:r,attrs:a}=e,{x:n}=t,{axis:i,exclusive:s,reverse:o}=a,l=n.shape.length;_.assert(n.dtype==="float32"||n.dtype==="int32",()=>`cumsum does not support ${n.dtype} tensors in the WASM backend`);let u=B.getAxesPermutation([i],l),c=n;u!==null&&(c=po({inputs:{x:n},attrs:{perm:u},backend:r}));let d=B.getInnerMostAxes(1,l)[0];B.assertAxesAreInnerMostDims("cumsum",[d],l);let p=r.makeOutput(c.shape,c.dtype),f=c.shape[d],h=r.dataIdMap.get(c.dataId).id,m=r.dataIdMap.get(p.dataId).id;VB(h,s?1:0,o?1:0,f,m,ar[n.dtype]);let g=p;if(u!==null){let v=B.getUndoAxesPermutation(u);g=po({inputs:{x:p},attrs:{perm:v},backend:r}),r.disposeData(c.dataId),r.disposeData(p.dataId)}return g}var dSe={kernelName:Ul,backendName:"wasm",setupFunc:uSe,kernelFunc:cSe},WB;function pSe(e){WB=e.wasm.cwrap(bd,null,["number","number","number","array","number","array","array","number","number"])}function fSe(e){let{backend:t,inputs:r,attrs:a}=e,{x:n}=r,{blockSize:i,dataFormat:s}=a,o=n.shape[0],l=s==="NHWC"?n.shape[1]:n.shape[2],u=s==="NHWC"?n.shape[2]:n.shape[3],c=s==="NHWC"?n.shape[3]:n.shape[1],d=l*i,p=u*i,f=c/(i*i),h=s==="NHWC"?[o,d,p,f]:[o,f,d,p],m=t.makeOutput(h,"float32"),g=t.dataIdMap.get(n.dataId).id,v=new Uint8Array(new Int32Array(_.computeStrides(n.shape)).buffer),b=new Uint8Array(new Int32Array(h).buffer),y=new Uint8Array(new Int32Array(_.computeStrides(h)).buffer),w=t.dataIdMap.get(m.dataId).id;return WB(g,i,s==="NHWC"?1:0,v,n.shape.length-1,b,y,h.length,w),m}var hSe={kernelName:bd,backendName:"wasm",setupFunc:pSe,kernelFunc:fSe},HB;function mSe(e){HB=e.wasm.cwrap(jl,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function gSe(e){let{inputs:t,attrs:r,backend:a}=e,{x:n,filter:i}=t,s=a.dataIdMap.get(n.dataId).id,o=a.dataIdMap.get(i.dataId).id,{strides:l,dilations:u,pad:c,dimRoundingMode:d}=r,p=u==null?[1,1]:u,f=B.computeConv2DInfo(n.shape,i.shape,l,p,c,d,!0),h=f.filterHeight,m=f.filterWidth,g=f.padInfo.top,v=f.padInfo.right,b=f.padInfo.bottom,y=f.padInfo.left,w=f.dilationHeight,x=f.dilationWidth,k=f.strideHeight,C=f.strideWidth,E=f.inChannels,$=f.outChannels,N=f.padInfo.type==="SAME"?1:0;if(f.dataFormat!=="channelsLast")throw new Error(`wasm backend DepthwiseConv2dNative does not support dataFormat:'${f.dataFormat}'. Please use 'channelsLast'.`);let I=a.makeOutput(f.outShape,"float32"),S=a.dataIdMap.get(I.dataId).id;return HB(s,n.shape[0],n.shape[1],n.shape[2],o,h,m,g,v,b,y,N,w,x,k,C,E,$,S),I}var vSe={kernelName:jl,backendName:"wasm",setupFunc:mSe,kernelFunc:gSe},bSe=Zr(ql),ySe=!1,wSe=Tn(wd,ySe,"bool"),xSe=Zr(Xl,"float32");function jk(e){let{inputs:t,attrs:r,backend:a}=e,{input:n}=t,{dim:i}=r,s=n.shape.length,o=n.shape.slice(),l=i;return i<0&&(_.assert(-(s+1)<=i,()=>`Axis must be in the interval [${-(s+1)}, ${s}]`),l=s+i+1),o.splice(l,0,1),Dn({inputs:{x:n},backend:a,attrs:{shape:o}})}var kSe={kernelName:xd,backendName:"wasm",kernelFunc:jk};function UB(e){let{attrs:{shape:t,value:r,dtype:a},backend:n}=e,i=n.makeOutput(t,a);return n.typedArrayFromHeap(i).fill(r),i}var ESe={kernelName:Dh,backendName:"wasm",kernelFunc:UB},jB;function CSe(e){jB=e.wasm.cwrap(Ed,null,["number","number","number","number","number","number"])}function SSe(e){let{inputs:t,backend:r}=e,{image:a}=t,n=r.makeOutput(a.shape,a.dtype),i=r.dataIdMap.get(a.dataId).id,s=r.dataIdMap.get(n.dataId).id,[o,l,u,c]=a.shape;return jB(i,o,l,u,c,s),n}var $Se={kernelName:Ed,backendName:"wasm",kernelFunc:SSe,setupFunc:CSe},ISe=Zr(Yl),TSe=Tn(Kl),GB;function NSe(e){GB=e.wasm.cwrap(Zl,null,["number","number","number","number","number","number","number"])}function ASe(e){let{backend:t,inputs:r,attrs:a}=e,{varianceEpsilon:n}=a,{x:i,mean:s,variance:o,offset:l,scale:u}=r,c=t.dataIdMap.get(i.dataId).id,d=t.dataIdMap.get(s.dataId).id,p=t.dataIdMap.get(o.dataId).id,f=l!=null?t.dataIdMap.get(l.dataId).id:0,h=u!=null?t.dataIdMap.get(u.dataId).id:0,m=t.makeOutput(i.shape,i.dtype);if(_.sizeFromShape(i.shape)===0)return m;let g=t.dataIdMap.get(m.dataId).id;return GB(c,d,p,f,h,n,g),m}var _Se={kernelName:Zl,backendName:"wasm",setupFunc:NSe,kernelFunc:ASe},qB;function MSe(e){qB=e.wasm.cwrap(dl,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function RSe(e){let{inputs:t,attrs:r,backend:a}=e,{x:n,filter:i,bias:s,preluActivationWeights:o}=t,{strides:l,pad:u,dilations:c,dataFormat:d,dimRoundingMode:p,activation:f,leakyreluAlpha:h}=r,m=B.computeConv2DInfo(n.shape,i.shape,l,c,u,p),g=yh[f];if(g==null)throw new Error(`${f} activation not yet supported for FusedConv2D in the wasm backend.`);let v=a.dataIdMap.get(n.dataId).id,b=a.dataIdMap.get(i.dataId).id,y=m.outChannels,w=0;if(s!=null){let H=a.dataIdMap.get(s.dataId);if(H.shape.length!==1)throw new Error(`FusedConv2D only supports rank-1 bias but got rank ${H.shape.length}.`);if(H.shape[0]!==y)throw new Error(`FusedConv2D bias shape (${H.shape}) does not match the number of output channels (${y})`);w=H.id}let x=m.filterHeight,k=m.filterWidth,C=m.padInfo.top,E=m.padInfo.right,$=m.padInfo.bottom,N=m.padInfo.left,I=m.dilationHeight,S=m.dilationWidth,A=m.strideHeight,R=m.strideWidth,O=m.inChannels,D=m.padInfo.type==="SAME"?1:0,z=m.batchSize,U=m.inHeight,j=m.inWidth;if(d!=="NHWC")throw new Error(`wasm backend FusedConv2D does not support dataFormat:'${d}'. Please use 'NHWC'.`);let G=a.makeOutput(m.outShape,"float32"),L=a.dataIdMap.get(G.dataId).id,V=o==null?0:a.dataIdMap.get(o.dataId).id;return qB(v,z,U,j,b,x,k,w,C,E,$,N,D,I,S,A,R,O,y,g,V,h||0,L),G}var OSe={kernelName:dl,backendName:"wasm",setupFunc:MSe,kernelFunc:RSe},XB;function PSe(e){XB=e.wasm.cwrap(pl,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function DSe(e){let{inputs:t,attrs:r,backend:a}=e,{x:n,filter:i,bias:s,preluActivationWeights:o}=t,{strides:l,pad:u,dilations:c,dataFormat:d,dimRoundingMode:p,activation:f,leakyreluAlpha:h}=r,m=B.computeConv2DInfo(n.shape,i.shape,l,c,u,p,!0),g=yh[f];if(g==null)throw new Error(`${f} activation not yet supported for FusedDepthwiseConv2D in the wasm backend.`);let v=a.dataIdMap.get(n.dataId).id,b=a.dataIdMap.get(i.dataId).id,y=m.outChannels,w=0;if(s!=null){let H=a.dataIdMap.get(s.dataId);if(H.shape.length!==1)throw new Error(`FusedDepthwiseConv2D only supports rank-1 bias but got rank ${H.shape.length}.`);if(H.shape[0]!==y)throw new Error(`FusedDepthwiseConv2D bias shape (${H.shape}) does not match the number of output channels (${y})`);w=H.id}let x=m.filterHeight,k=m.filterWidth,C=m.padInfo.top,E=m.padInfo.right,$=m.padInfo.bottom,N=m.padInfo.left,I=m.dilationHeight,S=m.dilationWidth,A=m.strideHeight,R=m.strideWidth,O=m.inChannels,D=m.padInfo.type==="SAME"?1:0,z=m.batchSize,U=m.inHeight,j=m.inWidth;if(d!=="NHWC")throw new Error(`wasm backend FusedDepthwiseConv2D does not support dataFormat:'${d}'. Please use 'NHWC'.`);let G=a.makeOutput(m.outShape,"float32"),L=a.dataIdMap.get(G.dataId).id,V=o==null?0:a.dataIdMap.get(o.dataId).id;return XB(v,z,U,j,b,x,k,w,C,E,$,N,D,I,S,A,R,O,y,g,V,h||0,L),G}var FSe={kernelName:pl,backendName:"wasm",setupFunc:PSe,kernelFunc:DSe},YB;function LSe(e){YB=e.wasm.cwrap(Sd,null,["number","number","number","number","number","number","array","number"])}function zSe(e){let{backend:t,inputs:r}=e,{params:a,indices:n}=r,[i,s,o,l]=vC.prepareAndValidate(a,n),u=t.makeOutput(i,a.dtype);if(s===0)return u;let c=n.shape,d=c[c.length-1],p=t.dataIdMap.get(a.dataId).id,f=t.dataIdMap.get(n.dataId).id,h=new Uint8Array(new Int32Array(l).buffer),m=t.dataIdMap.get(u.dataId).id;return YB(p,ar[a.dtype],f,s,d,o,h,m),u}var BSe={kernelName:Sd,backendName:"wasm",setupFunc:LSe,kernelFunc:zSe},KB;function VSe(e){KB=e.wasm.cwrap("Gather",null,["number","number","array","number","number","number","array","number"])}function WSe(e){let{backend:t,inputs:r,attrs:a}=e,{x:n,indices:i}=r,{axis:s,batchDims:o}=a,l=_.parseAxisParam(s,n.shape)[0],u=t.readSync(i.dataId),c=n.shape[l];for(let C=0;C<u.length;++C){let E=u[C];_.assert(E<=c-1&&E>=0,()=>`GatherV2: the index value ${E} is not in [0, ${c-1}]`)}let d=B.segment_util.collectGatherOpShapeInfo(n,i,l,o),p=Dn({inputs:{x:n},attrs:{shape:[d.batchSize,d.outerSize,d.dimSize,d.sliceSize]},backend:t}),f=_.sizeFromShape(i.shape),h=Dn({inputs:{x:i},attrs:{shape:[d.batchSize,f/d.batchSize]},backend:t}),m=[d.batchSize,d.outerSize,f/d.batchSize,d.sliceSize],g=t.makeOutput(m,n.dtype);if(_.sizeFromShape(n.shape)===0)return g;let v=p.shape.length-1,b=t.dataIdMap.get(p.dataId).id,y=t.dataIdMap.get(h.dataId).id,w=t.dataIdMap.get(g.dataId).id,x=new Uint8Array(new Int32Array(_.computeStrides(p.shape)).buffer),k=new Uint8Array(new Int32Array(_.computeStrides(m)).buffer);return KB(b,ar[n.dtype],x,v,y,d.batchSize,k,w),t.disposeData(p.dataId),t.disposeData(h.dataId),g.shape=d.outputShape,g}var HSe={kernelName:Cd,backendName:"wasm",setupFunc:VSe,kernelFunc:WSe},USe=!1,jSe=Tn($d,USe,"bool"),GSe=!1,qSe=Tn(Ql,GSe,"bool"),ZB;function XSe(e){ZB=e.wasm.cwrap(eu,null,["number","number","number","number"])}function YSe(e){let{inputs:{x:t},attrs:{alpha:r},backend:a}=e,n=a.dataIdMap.get(t.dataId).id,i=a.makeOutput(t.shape,"float32");if(_.sizeFromShape(t.shape)!==0){let s=a.dataIdMap.get(i.dataId).id;ZB(n,ar[t.dtype],r,s)}return i}var KSe={kernelName:eu,backendName:"wasm",setupFunc:XSe,kernelFunc:YSe},ZSe=!1,QSe=Tn(Ad,ZSe,"bool"),JSe=!1,e$e=Tn(_d,JSe,"bool"),t$e=Zr(tu),r$e=!1,n$e=Tn(Rd,r$e,"bool"),QB;function a$e(e){QB=e.wasm.cwrap(ru,null,["number","number","number","number"])}function i$e(e){let{backend:t,inputs:r,attrs:a}=e,{reductionIndices:n,keepDims:i}=a,{x:s}=r,o=t.dataIdMap.get(s.dataId).id,l=s,{transposed:u,axes:c,originalAxes:d,inputWasTransposed:p}=To(s,n,t);if(p){let b=t.dataIdMap.get(u.dataId).id;l=u,o=b}let f=l.shape.length;B.assertAxesAreInnerMostDims("max",c,f);let[h,m]=B.computeOutAndReduceShapes(l.shape,c),g=_.sizeFromShape(m),v=t.makeOutput(h,s.dtype);if(_.sizeFromShape(l.shape)!==0){let b=t.dataIdMap.get(v.dataId).id;QB(o,ar[s.dtype],g,b)}if(p&&t.disposeData(u.dataId),i){let b=B.expandShapeToKeepDim(v.shape,d);v.shape=b}return v}var s$e={kernelName:ru,backendName:"wasm",setupFunc:a$e,kernelFunc:i$e},o$e=Tn(nu),JB;function l$e(e){JB=e.wasm.cwrap(au,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function u$e(e){let{inputs:t,attrs:r,backend:a}=e,n=t.x,i=a.dataIdMap.get(n.dataId).id;_.assert(n.dtype==="float32",()=>`Error in MaxPool: only float32 input is supported. Got ${n.dtype}.`);let{filterSize:s,strides:o,pad:l,dimRoundingMode:u}=r,c=B.computePool2DInfo(n.shape,s,o,1,l,u),d=c.filterHeight,p=c.filterWidth,f=c.padInfo.top,h=c.padInfo.right,m=c.padInfo.bottom,g=c.padInfo.left,v=c.dilationHeight,b=c.dilationWidth,y=c.strideHeight,w=c.strideWidth,x=c.inChannels,k=c.outChannels;if(c.dataFormat!=="channelsLast")throw new Error(`wasm backend does not support dataFormat:'${c.dataFormat}'. Please use 'channelsLast'.`);let C=a.makeOutput(c.outShape,"float32"),E=a.dataIdMap.get(C.dataId).id;return JB(i,n.shape[0],n.shape[1],n.shape[2],d,p,f,h,m,g,v,b,y,w,x,k,E),C}var c$e={kernelName:au,backendName:"wasm",setupFunc:l$e,kernelFunc:u$e},e4;function d$e(e){e4=e.wasm.cwrap(iu,null,["number, number, number"])}function p$e(e){let{backend:t,inputs:r,attrs:a}=e,{axis:n,keepDims:i}=a,{x:s}=r,o=t.dataIdMap.get(s.dataId).id,l=o,u=s,{transposed:c,axes:d,originalAxes:p,inputWasTransposed:f}=To(s,n,t),h=d;if(f){let w=t.dataIdMap.get(c.dataId).id;w!==o&&(u=c,l=w,h=B.getInnerMostAxes(h.length,u.shape.length))}B.assertAxesAreInnerMostDims("mean",h,u.shape.length);let[m,g]=B.computeOutAndReduceShapes(u.shape,h),v=_.sizeFromShape(g),b=u;u.dtype!=="float32"&&(b=Mm({backend:t,inputs:{x:u},attrs:{dtype:"float32"}}),l=t.dataIdMap.get(b.dataId).id);let y=t.makeOutput(m,"float32");if(_.sizeFromShape(u.shape)!==0){let w=t.dataIdMap.get(y.dataId).id;e4(l,v,w)}if(f&&t.disposeData(c.dataId),i){let w=B.expandShapeToKeepDim(y.shape,p);y.shape=w}return u.dtype!=="float32"&&t.disposeData(b.dataId),y}var f$e={kernelName:iu,backendName:"wasm",setupFunc:d$e,kernelFunc:p$e},t4;function h$e(e){t4=e.wasm.cwrap(su,null,["number","number","number","number"])}function m$e(e){let{backend:t,inputs:r,attrs:a}=e,{axis:n,keepDims:i}=a,{x:s}=r,o=t.dataIdMap.get(s.dataId).id,l=o,u=s,{transposed:c,axes:d,originalAxes:p,inputWasTransposed:f}=To(s,n,t);if(f){let y=t.dataIdMap.get(c.dataId).id;y!==o&&(u=c,l=y)}let h=u.shape.length;B.assertAxesAreInnerMostDims("min",d,h);let[m,g]=B.computeOutAndReduceShapes(u.shape,d),v=_.sizeFromShape(g),b=t.makeOutput(m,u.dtype);if(_.sizeFromShape(u.shape)!==0){let y=t.dataIdMap.get(b.dataId).id;t4(l,ar[s.dtype],v,y)}if(f&&t.disposeData(c.dataId),i){let y=B.expandShapeToKeepDim(b.shape,p);b.shape=y}return b}var g$e={kernelName:su,backendName:"wasm",setupFunc:h$e,kernelFunc:m$e},v$e=Tn(ou),Gk;(function(e){e[e.reflect=0]="reflect",e[e.symmetric=1]="symmetric"})(Gk||(Gk={}));var r4;function b$e(e){r4=e.wasm.cwrap(lu,null,["number","array","number","number","array","array","number","number"])}function y$e(e){let{inputs:{x:t},backend:r,attrs:{paddings:a,mode:n}}=e,i=a.map((h,m)=>h[0]+t.shape[m]+h[1]),s=r.dataIdMap.get(t.dataId).id,o=r.makeOutput(i,t.dtype),l=r.dataIdMap.get(o.dataId).id,u=new Uint8Array(new Int32Array(t.shape).buffer),c=a.map(h=>h[0]),d=a.map(h=>h[1]),p=new Uint8Array(new Int32Array(c).buffer),f=new Uint8Array(new Int32Array(d).buffer);return r4(s,u,t.shape.length,ar[t.dtype],p,f,Gk[n],l),o}var w$e={kernelName:lu,backendName:"wasm",kernelFunc:y$e,setupFunc:b$e},x$e=Tn(uu),k$e=Zr(Pd);function vI(e,t){let r=new Int32Array(e.wasm.HEAPU8.buffer,t,4),a=r[0],n=r[1],i=r[2],s=r[3];return e.wasm._free(t),{pSelectedIndices:a,selectedSize:n,pSelectedScores:i,pValidOutputs:s}}var n4;function E$e(e){n4=e.wasm.cwrap(Fd,"number",["number","number","number","number","number"])}function C$e(e){let{backend:t,inputs:r,attrs:a}=e,{iouThreshold:n,maxOutputSize:i,scoreThreshold:s}=a,{boxes:o,scores:l}=r,u=t.dataIdMap.get(o.dataId).id,c=t.dataIdMap.get(l.dataId).id,d=n4(u,c,i,n,s),{pSelectedIndices:p,selectedSize:f,pSelectedScores:h,pValidOutputs:m}=vI(t,d);return t.wasm._free(h),t.wasm._free(m),t.makeOutput([f],"int32",p)}var S$e={kernelName:Fd,backendName:"wasm",setupFunc:E$e,kernelFunc:C$e},a4;function $$e(e){a4=e.wasm.cwrap(Ld,"number",["number","number","number","number","number","bool"])}function I$e(e){let{backend:t,inputs:r,attrs:a}=e,{iouThreshold:n,maxOutputSize:i,scoreThreshold:s,padToMaxOutputSize:o}=a,{boxes:l,scores:u}=r,c=t.dataIdMap.get(l.dataId).id,d=t.dataIdMap.get(u.dataId).id,p=a4(c,d,i,n,s,o),{pSelectedIndices:f,selectedSize:h,pSelectedScores:m,pValidOutputs:g}=vI(t,p);t.wasm._free(m);let v=t.makeOutput([h],"int32",f),b=t.makeOutput([],"int32",g);return[v,b]}var T$e={kernelName:Ld,backendName:"wasm",setupFunc:$$e,kernelFunc:I$e},i4;function N$e(e){i4=e.wasm.cwrap(zd,"number",["number","number","number","number","number","number"])}function A$e(e){let{backend:t,inputs:r,attrs:a}=e,{iouThreshold:n,maxOutputSize:i,scoreThreshold:s,softNmsSigma:o}=a,{boxes:l,scores:u}=r,c=t.dataIdMap.get(l.dataId).id,d=t.dataIdMap.get(u.dataId).id,p=i4(c,d,i,n,s,o),{pSelectedIndices:f,selectedSize:h,pSelectedScores:m,pValidOutputs:g}=vI(t,p);t.wasm._free(g);let v=t.makeOutput([h],"int32",f),b=t.makeOutput([h],"float32",m);return[v,b]}var _$e={kernelName:zd,backendName:"wasm",setupFunc:N$e,kernelFunc:A$e},M$e=!1,R$e=Tn(Dd,M$e,"bool"),s4;function O$e(e){s4=e.wasm.cwrap(cu,null,["number","number","number","number","number"])}function P$e(e){let{inputs:t,backend:r,attrs:a}=e,{indices:n}=t,{depth:i,onValue:s,offValue:o}=a,l=r.makeOutput([...n.shape,i],"int32"),u=r.dataIdMap.get(l.dataId).id,c=r.dataIdMap.get(n.dataId).id;return s4(c,i,s,o,u),l}var D$e={kernelName:cu,backendName:"wasm",setupFunc:O$e,kernelFunc:P$e};function F$e(e){let{inputs:{x:t},backend:r}=e,a=r.makeOutput(t.shape,t.dtype);return r.typedArrayFromHeap(a).fill(1),a}var L$e={kernelName:Bd,backendName:"wasm",kernelFunc:F$e};function z$e(e){let{inputs:t,backend:r,attrs:a}=e,{axis:n}=a;if(t.length===1)return jk({inputs:{input:t[0]},backend:r,attrs:{dim:n}});let i=t[0].shape,s=t[0].dtype;t.forEach(c=>{_.assertShapesMatch(i,c.shape,"All tensors passed to stack must have matching shapes"),_.assert(s===c.dtype,()=>"All tensors passed to stack must have matching dtypes")});let o=[],l=t.map(c=>{let d=jk({inputs:{input:c},backend:r,attrs:{dim:n}});return o.push(d),d}),u=DB({inputs:l,backend:r,attrs:{axis:n}});return o.forEach(c=>r.disposeData(c.dataId)),u}var B$e={kernelName:Vd,backendName:"wasm",kernelFunc:z$e},o4;function V$e(e){o4=e.wasm.cwrap(du,null,["number","array","number","number","array","array","number","number"])}function W$e(e){let{inputs:{x:t},backend:r,attrs:{paddings:a,constantValue:n}}=e,i=a.map((h,m)=>h[0]+t.shape[m]+h[1]);if(_.sizeFromShape(t.shape)===0)return UB({backend:r,attrs:{shape:i,value:n,dtype:t.dtype}});let s=r.dataIdMap.get(t.dataId).id,o=r.makeOutput(i,t.dtype),l=r.dataIdMap.get(o.dataId).id,u=new Uint8Array(new Int32Array(t.shape).buffer),c=a.map(h=>h[0]),d=a.map(h=>h[1]),p=new Uint8Array(new Int32Array(c).buffer),f=new Uint8Array(new Int32Array(d).buffer);return o4(s,u,t.shape.length,ar[t.dtype],p,f,n,l),o}var l4={kernelName:du,backendName:"wasm",kernelFunc:W$e,setupFunc:V$e},H$e=Tn(pu),u4;function U$e(e){u4=e.wasm.cwrap(fu,null,["number","number","number"])}function j$e(e){let{inputs:t,backend:r}=e,{x:a,alpha:n}=t,i=r.dataIdMap.get(a.dataId).id,s=r.dataIdMap.get(n.dataId).id,o=i,l=a,u=l;l.dtype!=="float32"&&(u=Mm({backend:r,inputs:{x:a},attrs:{dtype:"float32"}}),o=r.dataIdMap.get(u.dataId).id);let c=r.makeOutput(a.shape,"float32"),d=r.dataIdMap.get(c.dataId).id;return u4(o,s,d),l.dtype!=="float32"&&r.disposeData(u.dataId),c}var G$e={kernelName:fu,backendName:"wasm",setupFunc:U$e,kernelFunc:j$e},c4;function q$e(e){c4=e.wasm.cwrap(hu,null,["number","number","number","number"])}function X$e(e){let{backend:t,inputs:r,attrs:a}=e,{axis:n,keepDims:i}=a,{x:s}=r,o=t.dataIdMap.get(s.dataId).id,l=o,u=s,{transposed:c,axes:d,originalAxes:p,inputWasTransposed:f}=To(s,n,t),h=d;if(f){let y=t.dataIdMap.get(c.dataId).id;y!==o&&(u=c,l=y,h=B.getInnerMostAxes(h.length,u.shape.length))}B.assertAxesAreInnerMostDims("prod",h,u.shape.length);let[m,g]=B.computeOutAndReduceShapes(u.shape,h),v=_.sizeFromShape(g),b=t.makeOutput(m,u.dtype);if(_.sizeFromShape(u.shape)!==0){let y=t.dataIdMap.get(b.dataId).id;c4(l,v,ar[b.dtype],y)}if(f&&t.disposeData(c.dataId),i){let y=B.expandShapeToKeepDim(b.shape,p);b.shape=y}return b}var Y$e={kernelName:hu,backendName:"wasm",setupFunc:q$e,kernelFunc:X$e},K$e=e=>{let{backend:t,attrs:r}=e,{start:a,stop:n,step:i,dtype:s}=r,o=Q$(a,n,i,s),l=t.makeOutput([o.length],s);return t.typedArrayFromHeap(l).set(o),l},Z$e={kernelName:Vh,backendName:"wasm",kernelFunc:K$e},Q$e=Tn(Gl),J$e=Zr(mu),eIe=Zr(vu),d4;function tIe(e){d4=e.wasm.cwrap(gu,null,["number","number","number","number","number","number","number","number","number","number"])}function rIe(e){let{backend:t,inputs:r,attrs:a}=e,{images:n}=r,{alignCorners:i,halfPixelCenters:s,size:o}=a,[l,u]=o,[c,d,p,f]=n.shape,h=[c,l,u,f],m=t.dataIdMap.get(n.dataId),g;m.dtype!=="float32"&&(g=Mm({backend:t,inputs:{x:n},attrs:{dtype:"float32"}}),m=t.dataIdMap.get(g.dataId));let v=m.id,b=t.makeOutput(h,"float32");if(_.sizeFromShape(n.shape)===0)return b;let y=t.dataIdMap.get(b.dataId).id;return d4(v,c,d,p,f,l,u,i?1:0,s?1:0,y),g!=null&&t.disposeData(g.dataId),b}var nIe={kernelName:gu,backendName:"wasm",setupFunc:tIe,kernelFunc:rIe},p4;function aIe(e){p4=e.wasm.cwrap(bu,null,["number","array","number","array","number","number"])}function iIe(e){let{inputs:t,backend:r,attrs:a}=e,{x:n}=t,{dims:i}=a,s=_.parseAxisParam(i,n.shape);if(n.shape.length===0)return N0({inputs:{x:n},backend:r});let o=r.makeOutput(n.shape,n.dtype),l=r.dataIdMap.get(n.dataId).id,u=r.dataIdMap.get(o.dataId).id,c=new Uint8Array(new Int32Array(s).buffer),d=new Uint8Array(new Int32Array(n.shape).buffer);p4(l,c,s.length,d,n.shape.length,u);let p=Dn({inputs:{x:o},attrs:{shape:n.shape},backend:r});return r.disposeData(o.dataId),p}var sIe={kernelName:bu,backendName:"wasm",kernelFunc:iIe,setupFunc:aIe},f4;function oIe(e){f4=e.wasm.cwrap(ip,null,["number","number","number","number","number","number","number","number","array","number","number"])}function lIe(e){let{inputs:t,backend:r,attrs:a}=e,{image:n}=t,{radians:i,fillValue:s,center:o}=a,l=r.makeOutput(n.shape,n.dtype),u=r.dataIdMap.get(n.dataId).id,c=r.dataIdMap.get(l.dataId).id,[d,p,f,h]=n.shape,[m,g]=B.getImageCenter(o,p,f),v=s===0,b=255,y=typeof s=="number"?[s,s,s,v?0:b]:[...s,b],w=new Uint8Array(new Int32Array(y).buffer);return f4(u,d,p,f,h,i,m,g,w,y.length,c),l}var uIe={kernelName:ip,backendName:"wasm",kernelFunc:lIe,setupFunc:oIe},cIe=Zr(yu),dIe=Zr(wu),h4;function pIe(e){h4=e.wasm.cwrap(Ud,null,["number","number","number","number","number","number","array","number","number"])}function fIe(e){let{backend:t,inputs:r,attrs:a}=e,{indices:n,updates:i}=r,{shape:s}=a,o=t.makeOutput(s,i.dtype);if(_.sizeFromShape(s)===0)return o;let{sliceRank:l,numUpdates:u,sliceSize:c,strides:d,outputSize:p}=bC.calculateShapes(i,n,s),f=t.dataIdMap.get(n.dataId).id,h=t.dataIdMap.get(i.dataId).id,m=new Uint8Array(new Int32Array(d).buffer),g=t.dataIdMap.get(o.dataId).id;return h4(f,h,ar[i.dtype],l,u,c,m,p,g),o}var hIe={kernelName:Ud,backendName:"wasm",setupFunc:pIe,kernelFunc:fIe},m4;function mIe(e){m4=e.wasm.cwrap("SelectV2",null,["number","number","number","number","number"])}function gIe(e){let{inputs:t,backend:r}=e,{condition:a,t:n,e:i}=t,s=r.dataIdMap.get(a.dataId).id,o=r.dataIdMap.get(n.dataId).id,l=r.dataIdMap.get(i.dataId).id,u=r.makeOutput(n.shape,n.dtype),c=r.dataIdMap.get(u.dataId).id,d=a.shape.length,p=n.shape.length,f=d===0||d>1||p===1?1:_.sizeFromShape(n.shape.slice(1));return m4(s,o,l,f,c),u}var vIe={kernelName:jd,backendName:"wasm",kernelFunc:gIe,setupFunc:mIe},g4;function bIe(e){g4=e.wasm.cwrap(ku,null,["number","number"])}function yIe(e){let{backend:t,inputs:{x:r}}=e,a=t.dataIdMap.get(r.dataId).id,n=t.makeOutput(r.shape,r.dtype),i=t.dataIdMap.get(n.dataId).id;return _.sizeFromShape(n.shape)===0||g4(a,i),n}var wIe={kernelName:"Sigmoid",backendName:"wasm",setupFunc:bIe,kernelFunc:yIe},xIe=Zr(xu),v4;function kIe(e){v4=e.wasm.cwrap(Su,null,["number","number","number","number"])}function EIe(e){let{backend:t,inputs:{logits:r},attrs:{dim:a}}=e,n=t.dataIdMap.get(r.dataId).id,i=t.makeOutput(r.shape,r.dtype),s=t.dataIdMap.get(i.dataId).id,o=r.shape[a],l=_.sizeFromShape(r.shape)/o;return _.sizeFromShape(i.shape)===0||v4(n,s,o,l),i}var CIe={kernelName:Su,backendName:"wasm",setupFunc:kIe,kernelFunc:EIe};function SIe(e){let{inputs:t,backend:r,attrs:a}=e,{x:n}=t,{blockShape:i,paddings:s}=a,o=_.sizeFromShape(i),l=[[0,0]];l.push(...s);for(let g=1+i.length;g<n.shape.length;++g)l.push([0,0]);let u=l4.kernelFunc({inputs:{x:n},backend:r,attrs:{paddings:l,constantValue:0}}),c=B.getReshaped(u.shape,i,o,!1),d=B.getPermuted(c.length,i.length,!1),p=B.getReshapedPermuted(u.shape,i,o,!1),f=Dn({inputs:{x:u},backend:r,attrs:{shape:c}}),h=po({inputs:{x:f},backend:r,attrs:{perm:d}}),m=Dn({inputs:{x:h},backend:r,attrs:{shape:p}});return r.disposeData(u.dataId),r.disposeData(f.dataId),r.disposeData(h.dataId),m}var $Ie={kernelName:Zd,backendName:"wasm",kernelFunc:SIe},b4;function IIe(e){b4=e.wasm.cwrap("SparseFillEmptyRows","number",["number","number","number","number","number","number","number","number","number","number","number","number"])}function TIe(e){let{backend:t,inputs:r}=e,{indices:a,values:n,denseShape:i,defaultValue:s}=r,o=a.shape[0],l=a.shape[1],u=t.readSync(i.dataId)[0],c=[o+u,l],d=t.dataIdMap.get(a.dataId).id,p=t.dataIdMap.get(n.dataId).id,f=t.dataIdMap.get(s.dataId).id,h=t.makeOutput(c,a.dtype),m=t.dataIdMap.get(h.dataId).id,g=t.makeOutput(c.slice(0,1),n.dtype),v=t.dataIdMap.get(g.dataId).id,b=t.makeOutput([u],"bool"),y=t.dataIdMap.get(b.dataId).id,w=t.makeOutput([o],a.dtype),x=t.dataIdMap.get(w.dataId).id,k=t.makeOutput([4],"int32"),C=t.dataIdMap.get(k.dataId).id,E=b4(d,p,ar[n.dtype],o,u,l,f,m,v,y,x,C),$=t.readSync(k.dataId),N;switch($[0]){case 1:{N=B.getSparseFillEmptyRowsIndicesDenseShapeMismatch($[1]);break}case 2:{N=B.getSparseFillEmptyRowsNegativeIndexErrorMessage($[1],$[2]);break}case 3:N=B.getSparseFillEmptyRowsOutOfRangeIndexErrorMessage($[1],$[2],$[3]);break;default:N=""}if(t.disposeData(k.dataId),N)throw t.disposeData(h.dataId),t.disposeData(g.dataId),t.disposeData(b.dataId),t.disposeData(w.dataId),new Error(N);let I=h,S=g;return E!==c[0]&&(I=Il({inputs:{x:h},attrs:{begin:0,size:[E,l]},backend:t}),S=Il({inputs:{x:g},attrs:{begin:0,size:E},backend:t}),t.disposeData(h.dataId),t.disposeData(g.dataId)),[I,S,b,w]}var NIe={kernelName:Hh,backendName:"wasm",setupFunc:IIe,kernelFunc:TIe},y4;function AIe(e){y4=e.wasm.cwrap(Jd,null,["number","number","number","number","number","number","number"])}function _Ie(e){let{backend:t,inputs:r}=e,{inputIndices:a,inputShape:n,newShape:i}=r;if(a.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape
        ${a.shape}`);if(n.shape.length!==1)throw new Error(`Input shape should be a vector but received shape
        ${n.shape}`);if(i.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${i.shape}`);let s=t.dataIdMap.get(a.dataId).id,o=t.dataIdMap.get(n.dataId).id,l=t.dataIdMap.get(i.dataId).id,u=a.shape[0],c=_.sizeFromShape(i.shape),d=t.makeOutput([u,c],a.dtype),p=t.dataIdMap.get(d.dataId).id,f=t.makeOutput([c],i.dtype),h=t.dataIdMap.get(f.dataId).id,m=t.makeOutput([3],"int32"),g=t.dataIdMap.get(m.dataId).id;y4(s,o,l,u,p,h,g);let v=t.readSync(m.dataId),b;switch(v[0]){case 0:{b=B.getSparseReshapeMultipleNegativeOneOutputDimErrorMessage(v[1],v[2]);break}case 1:{b=B.getSparseReshapeNegativeOutputDimErrorMessage(v[1],v[2]);break}case 2:b=B.getSparseReshapeEmptyTensorZeroOutputDimErrorMessage();break;case 3:{let y=Array.from(t.readSync(n.dataId)),w=Array.from(t.readSync(f.dataId));b=B.getSparseReshapeInputOutputMultipleErrorMessage(y,w);break}case 4:{let y=Array.from(t.readSync(n.dataId)),w=Array.from(t.readSync(f.dataId));b=B.getSparseReshapeInputOutputMismatchErrorMessage(y,w);break}default:b=""}if(t.disposeData(m.dataId),b)throw t.disposeData(d.dataId),t.disposeData(f.dataId),new Error(b);return[d,f]}var MIe={kernelName:Jd,backendName:"wasm",setupFunc:AIe,kernelFunc:_Ie},w4;function x4(e){w4=e.wasm.cwrap("SparseSegmentReduction",null,["number","number","number","number","number","number","number","number","number"])}function k4(e,t){let{backend:r,inputs:a}=e,{data:n,indices:i,segmentIds:s}=a,o=i.shape[0],l=r.readSync(s.dataId,o-1,o)[0],u=o>0?l+1:0;if(u<0)throw new Error(B.getSparseSegmentReductionNegativeSegmentIdsErrorMessage());let c=n.shape.slice();c[0]=u;let d=r.dataIdMap.get(n.dataId).id,p=r.dataIdMap.get(i.dataId).id,f=r.dataIdMap.get(s.dataId).id,h=r.makeOutput(c,n.dtype),m=r.dataIdMap.get(h.dataId).id,g=r.makeOutput([4],"int32"),v=r.dataIdMap.get(g.dataId).id;w4(d,ar[n.dtype],n.shape[0],p,f,m,v,t,0);let b=r.readSync(g.dataId),y;switch(b[0]){case 0:{y=B.getSparseSegmentReductionNegativeSegmentIdsErrorMessage();break}case 1:{y=B.getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage();break}case 2:y=B.getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage(b[1],b[2]);break;case 3:y=B.getSparseSegmentReductionIndicesOutOfRangeErrorMessage(b[1],b[2],b[3]);break;default:y=""}if(r.disposeData(g.dataId),y)throw r.disposeData(h.dataId),new Error(y);return h}function RIe(e){return k4(e,!0)}var OIe={kernelName:Uh,backendName:"wasm",setupFunc:x4,kernelFunc:RIe};function PIe(e){return k4(e,!1)}var DIe={kernelName:jh,backendName:"wasm",setupFunc:x4,kernelFunc:PIe};function FIe(e){let{inputs:t,attrs:r,backend:a}=e,{x:n}=t,{numOrSizeSplits:i,axis:s}=r,o=_.parseAxisParam(s,n.shape)[0],l=B.prepareSplitSize(n,i,o),u=new Array(n.shape.length).fill(0),c=n.shape.slice();return l.map(d=>{let p=[...c];p[o]=d;let f=Il({inputs:{x:n},attrs:{begin:u,size:p},backend:a});return u[o]+=d,f})}var LIe={kernelName:Qd,backendName:"wasm",kernelFunc:FIe},zIe=Zr(Eu),BIe=Zr(Gh),VIe=Tn($u),E4;function WIe(e){E4=e.wasm.cwrap(wo,null,["number","number","number","number"])}function HIe(e){let{backend:t,inputs:r,attrs:a}=e,{alpha:n}=a,{x:i}=r,s=t.dataIdMap.get(i.dataId).id,o=t.makeOutput(i.shape,i.dtype),l=t.dataIdMap.get(o.dataId).id;return E4(s,n,ar[i.dtype],l),o}var UIe={kernelName:wo,backendName:"wasm",setupFunc:WIe,kernelFunc:HIe},C4;function jIe(e){C4=e.wasm.cwrap(ep,null,["number","array","number","array","array","array","array","array","number","number"])}function GIe(e){let{backend:t,inputs:r,attrs:a}=e,{x:n}=r,{begin:i,end:s,strides:o,beginMask:l,endMask:u,ellipsisMask:c,newAxisMask:d,shrinkAxisMask:p}=a,{finalShapeSparse:f,finalShape:h,isIdentity:m,sliceDim0:g,isSimpleSlice:v,begin:b,end:y,strides:w}=Mr.sliceInfo(n.shape,i,s,o,l,u,c,d,p),x;if(m)x=Dn({inputs:{x:n},backend:t,attrs:{shape:h}});else if(g||v){_.assert(n.shape.length>=1,()=>`Input must have rank at least 1, got: ${n.shape.length}`);let k=Mr.computeOutShape(b,y,w),C=Il({inputs:{x:n},backend:t,attrs:{begin:b,size:k}});x=Dn({inputs:{x:C},backend:t,attrs:{shape:h}}),t.disposeData(C.dataId)}else{let k=t.makeOutput(f,"float32"),C=t.dataIdMap.get(n.dataId).id,E=new Uint8Array(new Int32Array(_.computeStrides(n.shape)).buffer),$=new Uint8Array(new Int32Array(b).buffer),N=new Uint8Array(new Int32Array(y).buffer),I=new Uint8Array(new Int32Array(w).buffer),S=new Uint8Array(new Int32Array(f).buffer),A=new Uint8Array(new Int32Array(_.computeStrides(f)).buffer),R=t.dataIdMap.get(k.dataId).id;C4(C,E,n.shape.length,$,N,I,S,A,f.length,R),x=Dn({inputs:{x:k},backend:t,attrs:{shape:h}}),t.disposeData(k.dataId)}return x}var qIe={kernelName:ep,backendName:"wasm",setupFunc:jIe,kernelFunc:GIe},XIe=Tn(Iu),S4;function YIe(e){S4=e.wasm.cwrap(Cu,null,["number","number","number","number"])}function KIe(e){let{backend:t,inputs:r,attrs:a}=e,{axis:n,keepDims:i}=a,{x:s}=r,o=t.dataIdMap.get(s.dataId).id,l=o,u=s,{transposed:c,axes:d,originalAxes:p,inputWasTransposed:f}=To(s,n,t),h=d;if(f){let y=t.dataIdMap.get(c.dataId).id;y!==o&&(u=c,l=y,h=B.getInnerMostAxes(h.length,u.shape.length))}B.assertAxesAreInnerMostDims("sum",h,u.shape.length);let[m,g]=B.computeOutAndReduceShapes(u.shape,h),v=_.sizeFromShape(g),b=t.makeOutput(m,u.dtype);if(_.sizeFromShape(u.shape)!==0){let y=t.dataIdMap.get(b.dataId).id;S4(l,v,ar[b.dtype],y)}if(f&&t.disposeData(c.dataId),i){let y=B.expandShapeToKeepDim(b.shape,p);b.shape=y}return b}var ZIe={kernelName:Cu,backendName:"wasm",setupFunc:YIe,kernelFunc:KIe},QIe=Zr(Tu),JIe=Zr(Nu),$4;function eTe(e){$4=e.wasm.cwrap(yo,null,["number","array","number","array","number","number"])}function tTe(e){let{inputs:t,backend:r,attrs:a}=e,{x:n}=t,i=r.dataIdMap.get(n.dataId).id,{reps:s}=a,o=new Array(n.shape.length);for(let p=0;p<o.length;p++)o[p]=n.shape[p]*s[p];let l=new Uint8Array(new Int32Array(n.shape).buffer),u=new Uint8Array(new Int32Array(o).buffer),c=r.makeOutput(o,n.dtype),d=r.dataIdMap.get(c.dataId).id;return $4(i,l,n.shape.length,u,o.length,ar[c.dtype],d),c}var rTe={kernelName:yo,backendName:"wasm",setupFunc:eTe,kernelFunc:tTe},I4;function nTe(e){I4=e.wasm.cwrap(tp,null,["number","array","number","number","number","bool","number","number"])}var aTe=({inputs:e,backend:t,attrs:r})=>{let{x:a}=e,{k:n,sorted:i}=r,s=t.dataIdMap.get(a.dataId).id,o=new Uint8Array(new Int32Array(a.shape).buffer),l=a.shape.slice();l[l.length-1]=n;let u=t.makeOutput(l,a.dtype),c=t.dataIdMap.get(u.dataId).id,d=t.makeOutput(l,"int32"),p=t.dataIdMap.get(d.dataId).id;return I4(s,o,a.shape.length,ar[a.dtype],n,i,c,p),[u,d]},iTe={kernelName:tp,backendName:"wasm",setupFunc:nTe,kernelFunc:aTe},T4;function sTe(e){T4=e.wasm.cwrap(rp,null,["number","number","bool","number","number","number","number","number","number","array","number","number","number","number","number"])}function oTe(e){let{backend:t,inputs:r,attrs:a}=e,{image:n,transforms:i}=r,{interpolation:s,fillMode:o,fillValue:l,outputShape:u}=a,[c,d,p,f]=n.shape,[h,m]=u!=null?u:[d,p],g=[c,h,m,f],v=new Uint8Array(new Int32Array(_.computeStrides(n.shape)).buffer),b=t.makeOutput(g,n.dtype),y=t.dataIdMap.get(b.dataId).id,w=t.dataIdMap.get(n.dataId).id,x=t.dataIdMap.get(i.dataId).id,k=s==="nearest"?1:2,C;switch(o){case"constant":C=1;break;case"reflect":C=2;break;case"wrap":C=3;break;case"nearest":C=4;break;default:C=1;break}return T4(w,x,i.shape[0]>1,c,h,m,f,p,d,v,n.shape.length-1,k,C,l,y),b}var lTe={kernelName:rp,backendName:"wasm",setupFunc:sTe,kernelFunc:oTe};function uTe(e){let{inputs:t,backend:r,attrs:a}=e,{value:n}=t,{axis:i}=a;i<0&&(i+=n.shape.length);let s=n.shape[i],o=n.shape.length,l=new Array(o-1),u=0;for(let f=0;f<o;f++)f!==i&&(l[u++]=n.shape[f]);let c=new Array(s),d=new Array(o).fill(0),p=n.shape.slice();p[i]=1;for(let f=0;f<c.length;f++)d[i]=f,c[f]=Il({inputs:{x:n},attrs:{begin:d,size:p},backend:r});return c.map(({dataId:f,dtype:h})=>({dataId:f,dtype:h,shape:l}))}var cTe={kernelName:np,backendName:"wasm",kernelFunc:uTe};function dTe(e){let{inputs:{x:t},backend:r}=e,a=r.makeOutput(t.shape,t.dtype);return r.typedArrayFromHeap(a).fill(0),a}var pTe={kernelName:ap,backendName:"wasm",kernelFunc:dTe},fTe=[cCe,dCe,pCe,mCe,ECe,$Ce,NCe,MCe,DCe,WCe,HCe,UCe,qCe,XCe,ZCe,eSe,tSe,rSe,iSe,lSe,dSe,hSe,vSe,bSe,wSe,xSe,kSe,ESe,$Se,ISe,TSe,_Se,OSe,FSe,BSe,HSe,jSe,qSe,gCe,KSe,QSe,e$e,t$e,n$e,s$e,o$e,c$e,f$e,g$e,v$e,w$e,x$e,k$e,S$e,T$e,_$e,R$e,D$e,L$e,B$e,l4,H$e,G$e,Y$e,Z$e,Q$e,J$e,eIe,RCe,nIe,sIe,uIe,cIe,dIe,hIe,vIe,wIe,xIe,BCe,CIe,$Ie,NIe,MIe,OIe,DIe,LIe,zIe,BIe,VIe,UIe,qIe,XIe,ZIe,QIe,JIe,rTe,iTe,lTe,wCe,cTe,pTe];for(let e of fTe)Xh(e);var qk=ce();qk.registerFlag("WASM_HAS_SIMD_SUPPORT",async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11])));qk.registerFlag("WASM_HAS_MULTITHREAD_SUPPORT",async()=>{if(qk.get("IS_NODE"))return!1;try{return new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))}catch{return!1}});var n_=Ml(g8()),hTe=`"use strict";var Module={};var ENVIRONMENT_IS_NODE=typeof process==="object"&&typeof process.versions==="object"&&typeof process.versions.node==="string";if(ENVIRONMENT_IS_NODE){var nodeWorkerThreads=require("worker_threads");var parentPort=nodeWorkerThreads.parentPort;parentPort.on("message",function(data){onmessage({data:data})});var fs=require("fs");Object.assign(global,{self:global,require:require,Module:Module,location:{href:__filename},Worker:nodeWorkerThreads.Worker,importScripts:function(f){(0,eval)(fs.readFileSync(f,"utf8"))},postMessage:function(msg){parentPort.postMessage(msg)},performance:global.performance||{now:function(){return Date.now()}}})}function threadPrintErr(){var text=Array.prototype.slice.call(arguments).join(" ");if(ENVIRONMENT_IS_NODE){fs.writeSync(2,text+"
");return}console.error(text)}function threadAlert(){var text=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:text,threadId:Module["_pthread_self"]()})}var err=threadPrintErr;self.alert=threadAlert;Module["instantiateWasm"]=((info,receiveInstance)=>{var instance=new WebAssembly.Instance(Module["wasmModule"],info);receiveInstance(instance);Module["wasmModule"]=null;return instance.exports});self.onmessage=(e=>{try{if(e.data.cmd==="load"){Module["wasmModule"]=e.data.wasmModule;Module["wasmMemory"]=e.data.wasmMemory;Module["buffer"]=Module["wasmMemory"].buffer;Module["ENVIRONMENT_IS_PTHREAD"]=true;if(typeof e.data.urlOrBlob==="string"){importScripts(e.data.urlOrBlob)}else{var objectUrl=URL.createObjectURL(e.data.urlOrBlob);importScripts(objectUrl);URL.revokeObjectURL(objectUrl)}WasmBackendModuleThreadedSimd(Module).then(function(instance){Module=instance})}else if(e.data.cmd==="run"){Module["__performance_now_clock_drift"]=performance.now()-e.data.time;Module["__emscripten_thread_init"](e.data.threadInfoStruct,0,0,1);Module["establishStackSpace"]();Module["PThread"].receiveObjectTransfer(e.data);Module["PThread"].threadInit();try{var result=Module["invokeEntryPoint"](e.data.start_routine,e.data.arg);if(Module["keepRuntimeAlive"]()){Module["PThread"].setExitStatus(result)}else{Module["__emscripten_thread_exit"](result)}}catch(ex){if(ex!="unwind"){if(ex instanceof Module["ExitStatus"]){if(Module["keepRuntimeAlive"]()){}else{Module["__emscripten_thread_exit"](ex.status)}}else{throw ex}}}}else if(e.data.cmd==="cancel"){if(Module["_pthread_self"]()){Module["__emscripten_thread_exit"](-1)}}else if(e.data.target==="setimmediate"){}else if(e.data.cmd==="processThreadQueue"){if(Module["_pthread_self"]()){Module["_emscripten_current_thread_process_queued_calls"]()}}else if(e.data.cmd==="processProxyingQueue"){if(Module["_pthread_self"]()){Module["_emscripten_proxy_execute_queue"](e.data.queue)}}else{err("worker.js received unknown command "+e.data.cmd);err(e.data)}}catch(ex){err("worker.js onmessage() captured an uncaught exception: "+ex);if(ex&&ex.stack)err(ex.stack);if(Module["__emscripten_thread_crashed"]){Module["__emscripten_thread_crashed"]()}throw ex}});`,mTe=Ml(v8()),N4=class extends Ah{constructor(e){super(),this.wasm=e,this.dataIdNextNumber=1,this.wasm.tfjs.initWithThreadsCount(A4),Xk=this.wasm.tfjs.getThreadsCount(),this.dataIdMap=new zb(this,gi())}write(e,t,r){let a={id:this.dataIdNextNumber++};return this.move(a,e,t,r,1),a}numDataIds(){return this.dataIdMap.numDataIds()}async time(e){let t=_.now();return e(),{kernelMs:_.now()-t}}move(e,t,r,a,n){let i=this.dataIdNextNumber++;if(a==="string"){let u=t;this.dataIdMap.set(e,{id:i,stringBytes:u,shape:r,dtype:a,memoryOffset:null,refCount:n});return}let s=_.sizeFromShape(r),o=s*_.bytesPerElement(a),l=this.wasm._malloc(o);this.dataIdMap.set(e,{id:i,memoryOffset:l,shape:r,dtype:a,refCount:n}),this.wasm.tfjs.registerTensor(i,s,l),t!=null&&this.wasm.HEAPU8.set(new Uint8Array(t.buffer,t.byteOffset,o),l)}async read(e){return this.readSync(e)}readSync(e,t,r){let{memoryOffset:a,dtype:n,shape:i,stringBytes:s}=this.dataIdMap.get(e);if(n==="string")return(t==null||t===0)&&(r==null||r>=s.length)?s:s.slice(t,r);t=t||0,r=r||_.sizeFromShape(i);let o=_.bytesPerElement(n),l=this.wasm.HEAPU8.slice(a+t*o,a+r*o);return bTe(l.buffer,n)}disposeData(e,t=!1){if(this.dataIdMap.has(e)){let r=this.dataIdMap.get(e);if(r.refCount--,!t&&r.refCount>0)return!1;this.wasm._free(r.memoryOffset),this.wasm.tfjs.disposeData(r.id),this.dataIdMap.delete(e)}return!0}refCount(e){return this.dataIdMap.has(e)?this.dataIdMap.get(e).refCount:0}incRef(e){let t=this.dataIdMap.get(e);t!=null&&t.refCount++}floatPrecision(){return 32}getMemoryOffset(e){return this.dataIdMap.get(e).memoryOffset}dispose(){this.wasm.tfjs.dispose(),"PThread"in this.wasm&&this.wasm.PThread.terminateAllThreads(),this.wasm=null}memory(){return{unreliable:!1}}makeOutput(e,t,r){let a;if(r==null)a=this.write(null,e,t);else{let n=this.dataIdNextNumber++;a={id:n},this.dataIdMap.set(a,{id:n,memoryOffset:r,shape:e,dtype:t,refCount:1});let i=_.sizeFromShape(e);this.wasm.tfjs.registerTensor(n,i,r)}return{dataId:a,shape:e,dtype:t}}typedArrayFromHeap({shape:e,dtype:t,dataId:r}){let a=this.wasm.HEAPU8.buffer,{memoryOffset:n}=this.dataIdMap.get(r),i=_.sizeFromShape(e);switch(t){case"float32":return new Float32Array(a,n,i);case"int32":return new Int32Array(a,n,i);case"bool":return new Uint8Array(a,n,i);default:throw new Error(`Unknown dtype ${t}`)}}};function gTe(e){return(t,r)=>(_.fetch(e,{credentials:"same-origin"}).then(a=>{a.ok||t.env.a(`failed to load wasm binary file at '${e}'`),a.arrayBuffer().then(n=>{WebAssembly.instantiate(n,t).then(i=>{r(i.instance,i.module)})})}),{})}function a_(e,t,r){if(vb!=null)return vb;let a="tfjs-backend-wasm.wasm";return e&&t?a="tfjs-backend-wasm-threaded-simd.wasm":e&&(a="tfjs-backend-wasm-simd.wasm"),Lf!=null&&Lf[a]!=null?Lf[a]:r+a}async function vTe(){let[e,t]=await Promise.all([ce().getAsync("WASM_HAS_SIMD_SUPPORT"),ce().getAsync("WASM_HAS_MULTITHREAD_SUPPORT")]);return new Promise((r,a)=>{let n={};n.locateFile=(o,l)=>{if(o.endsWith(".worker.js")){let u=hTe.replace(/\n/g,"\\n"),c=new Blob([u],{type:"application/javascript"});return URL.createObjectURL(c)}return o.endsWith(".wasm")?a_(e,t,wf!=null?wf:l):l+o},bI&&(n.instantiateWasm=gTe(a_(e,t,wf!=null?wf:"")));let i=!1;n.onAbort=()=>{i||zf||(zf=!0,a({message:"Make sure the server can serve the `.wasm` file relative to the bundled js file. For more details see https://github.com/tensorflow/tfjs/blob/master/tfjs-backend-wasm/README.md#using-bundlers"}))};let s;t&&e&&vb==null?(n.mainScriptUrlOrBlob=new Blob(["var WasmBackendModuleThreadedSimd = "+n_.default.toString()],{type:"text/javascript"}),s=(0,n_.default)(n)):s=(0,mTe.default)(n),s.then(o=>{i=!0,zf=!1;let l=null;o.tfjs={init:o.cwrap("init",null,[]),initWithThreadsCount:o.cwrap("init_with_threads_count",null,["number"]),getThreadsCount:o.cwrap("get_threads_count","number",[]),registerTensor:o.cwrap("register_tensor",null,["number","number","number"]),disposeData:o.cwrap("dispose_data",l,["number"]),dispose:o.cwrap("dispose",l,[])},r({wasm:o})})})}function bTe(e,t){switch(t){case"float32":return new Float32Array(e);case"int32":return new Int32Array(e);case"bool":return new Uint8Array(e);default:throw new Error(`Unknown dtype ${t}`)}}var yTe=["tfjs-backend-wasm.wasm","tfjs-backend-wasm-simd.wasm","tfjs-backend-wasm-threaded-simd.wasm"],vb=null,wf=null,Lf={},zf=!1,bI=!1;function wTe(e,t=!1){if(IP("setWasmPath has been deprecated in favor of setWasmPaths and will be removed in a future release."),zf)throw new Error("The WASM backend was already initialized. Make sure you call `setWasmPath()` before you call `tf.setBackend()` or `tf.ready()`");vb=e,bI=t}function xTe(e,t=!1){if(zf)throw new Error("The WASM backend was already initialized. Make sure you call `setWasmPaths()` before you call `tf.setBackend()` or `tf.ready()`");if(typeof e=="string")wf=e;else{Lf=e;let r=yTe.filter(a=>Lf[a]==null);if(r.length>0)throw new Error(`There were no entries found for the following binaries: ${r.join(",")}. Please either call setWasmPaths with a map providing a path for each binary, or with a string indicating the directory where all the binaries can be found.`)}bI=t}var A4=-1,Xk=-1;function kTe(e){A4=e}function ETe(){if(Xk===-1)throw new Error("WASM backend not initialized.");return Xk}var CTe="3.18.0",STe=2;ky("wasm",async()=>{let{wasm:e}=await vTe();return new N4(e)},STe);var $Te="3.18.0",ITe="3.18.0",TTe="3.18.0",NTe="3.18.0",ATe="3.18.0",_Te="3.18.0",MTe="3.18.0",RTe="3.18.0",OTe={tfjs:$Te,"tfjs-core":ITe,"tfjs-data":TTe,"tfjs-layers":NTe,"tfjs-converter":ATe,"tfjs-backend-cpu":_Te,"tfjs-backend-webgl":MTe,"tfjs-backend-wasm":RTe},PTe={};tC(PTe,{AnchorPosition:()=>W4,DrawBox:()=>U4,DrawBoxOptions:()=>H4,DrawFaceLandmarks:()=>oV,DrawFaceLandmarksOptions:()=>sV,DrawTextField:()=>A0,DrawTextFieldOptions:()=>SI,drawContour:()=>Ss,drawDetections:()=>XTe,drawFaceExpressions:()=>o2e,drawFaceLandmarks:()=>u2e});function Ss(e,t,r=!1){if(e.beginPath(),t.slice(1).forEach(({x:a,y:n},i)=>{let s=t[i];e.moveTo(s.x,s.y),e.lineTo(a,n)}),r){let a=t[t.length-1],n=t[0];if(!a||!n)return;e.moveTo(a.x,a.y),e.lineTo(n.x,n.y)}e.stroke()}var DTe={};tC(DTe,{computeReshapedDimensions:()=>R4,getCenterPoint:()=>wI,isDimensions:()=>Kk,isEven:()=>Yk,isFloat:()=>M4,isTensor:()=>Sp,isTensor1D:()=>FTe,isTensor2D:()=>_4,isTensor3D:()=>Rm,isTensor4D:()=>is,isValidNumber:()=>il,isValidProbablitiy:()=>LTe,range:()=>Xc,round:()=>yI});var al=class{constructor(e,t){if(!il(e)||!il(t))throw new Error(`Dimensions.constructor - expected width and height to be valid numbers, instead have ${JSON.stringify({width:e,height:t})}`);this._width=e,this._height=t}get width(){return this._width}get height(){return this._height}reverse(){return new al(1/this.width,1/this.height)}};function Sp(e,t){return e instanceof ht&&e.shape.length===t}function FTe(e){return Sp(e,1)}function _4(e){return Sp(e,2)}function Rm(e){return Sp(e,3)}function is(e){return Sp(e,4)}function M4(e){return e%1!==0}function Yk(e){return e%2===0}function yI(e,t=2){let r=10**t;return Math.floor(e*r)/r}function Kk(e){return e&&e.width&&e.height}function R4({width:e,height:t},r){let a=r/Math.max(t,e);return new al(Math.round(e*a),Math.round(t*a))}function wI(e){return e.reduce((t,r)=>t.add(r),new $t(0,0)).div(new $t(e.length,e.length))}function Xc(e,t,r){return Array(e).fill(0).map((a,n)=>t+n*r)}function il(e){return!!e&&e!==1/0&&e!==-1/0&&!Number.isNaN(e)||e===0}function LTe(e){return il(e)&&e>=0&&e<=1}var $t=class{constructor(e,t){this._x=e,this._y=t}get x(){return this._x}get y(){return this._y}add(e){return new $t(this.x+e.x,this.y+e.y)}sub(e){return new $t(this.x-e.x,this.y-e.y)}mul(e){return new $t(this.x*e.x,this.y*e.y)}div(e){return new $t(this.x/e.x,this.y/e.y)}abs(){return new $t(Math.abs(this.x),Math.abs(this.y))}magnitude(){return Math.sqrt(this.x**2+this.y**2)}floor(){return new $t(Math.floor(this.x),Math.floor(this.y))}},Qr=class{static isRect(e){return!!e&&[e.x,e.y,e.width,e.height].every(il)}static assertIsValidBox(e,t,r=!1){if(!Qr.isRect(e))throw new Error(`${t} - invalid box: ${JSON.stringify(e)}, expected object with properties x, y, width, height`);if(!r&&(e.width<0||e.height<0))throw new Error(`${t} - width (${e.width}) and height (${e.height}) must be positive numbers`)}constructor(e,t=!0){let r=e||{},a=[r.left,r.top,r.right,r.bottom].every(il),n=[r.x,r.y,r.width,r.height].every(il);if(!n&&!a)throw new Error(`Box.constructor - expected box to be IBoundingBox | IRect, instead have ${JSON.stringify(r)}`);let[i,s,o,l]=n?[r.x,r.y,r.width,r.height]:[r.left,r.top,r.right-r.left,r.bottom-r.top];Qr.assertIsValidBox({x:i,y:s,width:o,height:l},"Box.constructor",t),this._x=i,this._y=s,this._width=o,this._height=l}get x(){return this._x}get y(){return this._y}get width(){return this._width}get height(){return this._height}get left(){return this.x}get top(){return this.y}get right(){return this.x+this.width}get bottom(){return this.y+this.height}get area(){return this.width*this.height}get topLeft(){return new $t(this.left,this.top)}get topRight(){return new $t(this.right,this.top)}get bottomLeft(){return new $t(this.left,this.bottom)}get bottomRight(){return new $t(this.right,this.bottom)}round(){let[e,t,r,a]=[this.x,this.y,this.width,this.height].map(n=>Math.round(n));return new Qr({x:e,y:t,width:r,height:a})}floor(){let[e,t,r,a]=[this.x,this.y,this.width,this.height].map(n=>Math.floor(n));return new Qr({x:e,y:t,width:r,height:a})}toSquare(){let{x:e,y:t,width:r,height:a}=this,n=Math.abs(r-a);return r<a&&(e-=n/2,r+=n),a<r&&(t-=n/2,a+=n),new Qr({x:e,y:t,width:r,height:a})}rescale(e){let t=Kk(e)?e.width:e,r=Kk(e)?e.height:e;return new Qr({x:this.x*t,y:this.y*r,width:this.width*t,height:this.height*r})}pad(e,t){let[r,a,n,i]=[this.x-e/2,this.y-t/2,this.width+e,this.height+t];return new Qr({x:r,y:a,width:n,height:i})}clipAtImageBorders(e,t){let{x:r,y:a,right:n,bottom:i}=this,s=Math.max(r,0),o=Math.max(a,0),l=n-s,u=i-o,c=Math.min(l,e-s),d=Math.min(u,t-o);return new Qr({x:s,y:o,width:c,height:d}).floor()}shift(e,t){let{width:r,height:a}=this,n=this.x+e,i=this.y+t;return new Qr({x:n,y:i,width:r,height:a})}padAtBorders(e,t){let r=this.width+1,a=this.height+1,n=1,i=1,s=r,o=a,l=this.left,u=this.top,c=this.right,d=this.bottom;return c>t&&(s=-c+t+r,c=t),d>e&&(o=-d+e+a,d=e),l<1&&(o=2-l,l=1),u<1&&(o=2-u,u=1),{dy:i,edy:o,dx:n,edx:s,y:u,ey:d,x:l,ex:c,w:r,h:a}}calibrate(e){return new Qr({left:this.left+e.left*this.width,top:this.top+e.top*this.height,right:this.right+e.right*this.width,bottom:this.bottom+e.bottom*this.height}).toSquare().round()}},O4=class extends Qr{constructor(e,t,r,a,n=!1){super({left:e,top:t,right:r,bottom:a},n)}},xI=class{constructor(e,t,r,a,n){this._imageDims=new al(n.width,n.height),this._score=e,this._classScore=t,this._className=r,this._box=new Qr(a).rescale(this._imageDims)}get score(){return this._score}get classScore(){return this._classScore}get className(){return this._className}get box(){return this._box}get imageDims(){return this._imageDims}get imageWidth(){return this.imageDims.width}get imageHeight(){return this.imageDims.height}get relativeBox(){return new Qr(this._box).rescale(this.imageDims.reverse())}forSize(e,t){return new xI(this.score,this.classScore,this.className,this.relativeBox,{width:e,height:t})}},Wa=class extends xI{constructor(e,t,r){super(e,e,"",t,r)}forSize(e,t){let{score:r,relativeBox:a,imageDims:n}=super.forSize(e,t);return new Wa(r,a,n)}};function zTe(e,t,r=!0){let a=Math.max(0,Math.min(e.right,t.right)-Math.max(e.left,t.left)),n=Math.max(0,Math.min(e.bottom,t.bottom)-Math.max(e.top,t.top)),i=a*n;return r?i/(e.area+t.area-i):i/Math.min(e.area,t.area)}function BTe(e){let t=e.map(o=>o.x),r=e.map(o=>o.y),a=t.reduce((o,l)=>l<o?l:o,1/0),n=r.reduce((o,l)=>l<o?l:o,1/0),i=t.reduce((o,l)=>o<l?l:o,0),s=r.reduce((o,l)=>o<l?l:o,0);return new O4(a,n,i,s)}function VTe(e,t,r,a=!0){let n=t.map((s,o)=>({score:s,boxIndex:o})).sort((s,o)=>s.score-o.score).map(s=>s.boxIndex),i=[];for(;n.length>0;){let s=n.pop();i.push(s);let o=n,l=[];for(let u=0;u<o.length;u++){let c=o[u],d=e[s],p=e[c];l.push(zTe(d,p,a))}n=n.filter((u,c)=>l[c]<=r)}return i}function Om(e,t){return te(()=>{let[r,a,n]=t,i=Ea([...e.shape.slice(0,3),1],r,"float32"),s=Ea([...e.shape.slice(0,3),1],a,"float32"),o=Ea([...e.shape.slice(0,3),1],n,"float32"),l=Ot([i,s,o],3);return Fe(e,l)})}function WTe(e,t=!1){return te(()=>{let[r,a]=e.shape.slice(1);if(r===a)return e;let n=Math.abs(r-a),i=Math.round(n*(t?.5:1)),s=r>a?2:1,o=d=>{let p=e.shape.slice();return p[s]=d,Ea(p,0,"float32")},l=o(i),u=n-l.shape[s],c=[t&&u?o(u):null,e,l].filter(d=>!!d).map(d=>Te(d,"float32"));return Ot(c,s)})}function Zw(e){return 1/(1+Math.exp(-e))}var P4=class extends Qr{constructor(e,t,r,a,n=!1){super({x:e,y:t,width:r,height:a},n)}},HTe=.5,UTe=.43,jTe=.45,bb=class{constructor(e,t,r=new $t(0,0)){let{width:a,height:n}=t;this._imgDims=new al(a,n),this._shift=r,this._positions=e.map(i=>i.mul(new $t(a,n)).add(r))}get shift(){return new $t(this._shift.x,this._shift.y)}get imageWidth(){return this._imgDims.width}get imageHeight(){return this._imgDims.height}get positions(){return this._positions}get relativePositions(){return this._positions.map(e=>e.sub(this._shift).div(new $t(this.imageWidth,this.imageHeight)))}forSize(e,t){return new this.constructor(this.relativePositions,{width:e,height:t})}shiftBy(e,t){return new this.constructor(this.relativePositions,this._imgDims,new $t(e,t))}shiftByPoint(e){return this.shiftBy(e.x,e.y)}align(e,t={}){if(e){let n=e instanceof Wa?e.box.floor():new Qr(e);return this.shiftBy(n.x,n.y).align(null,t)}let{useDlibAlignment:r,minBoxPadding:a}=qn({useDlibAlignment:!1,minBoxPadding:.2},t);return r?this.alignDlib():this.alignMinBbox(a)}alignDlib(){let e=this.getRefPointsForAlignment(),[t,r,a]=e,n=c=>a.sub(c).magnitude(),i=(n(t)+n(r))/2,s=Math.floor(i/jTe),o=wI(e),l=Math.floor(Math.max(0,o.x-HTe*s)),u=Math.floor(Math.max(0,o.y-UTe*s));return new P4(l,u,Math.min(s,this.imageWidth+l),Math.min(s,this.imageHeight+u))}alignMinBbox(e){let t=BTe(this.positions);return t.pad(t.width*e,t.height*e)}getRefPointsForAlignment(){throw new Error("getRefPointsForAlignment not implemented by base class")}},D4=class extends bb{getJawOutline(){return this.positions.slice(0,17)}getLeftEyeBrow(){return this.positions.slice(17,22)}getRightEyeBrow(){return this.positions.slice(22,27)}getNose(){return this.positions.slice(27,36)}getLeftEye(){return this.positions.slice(36,42)}getRightEye(){return this.positions.slice(42,48)}getMouth(){return this.positions.slice(48,68)}getRefPointsForAlignment(){return[this.getLeftEye(),this.getRightEye(),this.getMouth()].map(wI)}};function yb(e){return e.detection instanceof Wa}function F4(e,t){return Mo(qn({},e),{detection:t})}function L4(){let e=window.fetch;if(!e)throw new Error("fetch - missing fetch implementation for browser environment");return{Canvas:HTMLCanvasElement,CanvasRenderingContext2D,Image:HTMLImageElement,ImageData,Video:HTMLVideoElement,createCanvasElement:()=>document.createElement("canvas"),createImageElement:()=>document.createElement("img"),createVideoElement:()=>document.createElement("video"),fetch:e,readFile:()=>{throw new Error("readFile - filesystem not available for browser environment")}}}function kI(){return typeof global=="object"&&typeof process!="undefined"&&process.versions!=null&&process.versions.node!=null}function z4(e){let t="";if(!e&&kI())try{e=Wq("fs")}catch(r){t=r.toString()}return{readFile:e?r=>new Promise((a,n)=>{e.readFile(r,(i,s)=>i?n(i):a(s))}):()=>{throw new Error(`readFile - failed to require fs in nodejs environment with error: ${t}`)}}}function B4(){let e=global.Canvas||global.HTMLCanvasElement,t=global.Image||global.HTMLImageElement,r=global.Video||global.HTMLVideoElement,a=()=>{if(e)return new e;throw new Error("createCanvasElement - missing Canvas implementation for nodejs environment")},n=()=>{if(t)return new t;throw new Error("createImageElement - missing Image implementation for nodejs environment")},i=()=>{if(r)return new r;throw new Error("createVideoElement - missing Video implementation for nodejs environment")},s=global.fetch,o=z4();return qn({Canvas:e||class{},CanvasRenderingContext2D:global.CanvasRenderingContext2D||class{},Image:t||class{},ImageData:global.ImageData||class{},Video:global.HTMLVideoElement||class{},createCanvasElement:a,createImageElement:n,createVideoElement:i,fetch:s},o)}function V4(){return typeof window=="object"&&typeof document!="undefined"&&typeof HTMLImageElement!="undefined"&&typeof HTMLCanvasElement!="undefined"&&typeof HTMLVideoElement!="undefined"&&typeof ImageData!="undefined"&&typeof CanvasRenderingContext2D!="undefined"}var Pr;function GTe(){if(!Pr)throw new Error("getEnv - environment is not defined, check isNodejs() and isBrowser()");return Pr}function Zk(e){Pr=e}function EI(){return V4()?Zk(L4()):kI()?Zk(B4()):null}function qTe(e){if(Pr||EI(),!Pr)throw new Error("monkeyPatch - environment is not defined, check isNodejs() and isBrowser()");let{Canvas:t=Pr.Canvas,Image:r=Pr.Image}=e;Pr.Canvas=t,Pr.Image=r,Pr.createCanvasElement=e.createCanvasElement||(()=>new t),Pr.createImageElement=e.createImageElement||(()=>new r),Pr.ImageData=e.ImageData||Pr.ImageData,Pr.Video=e.Video||Pr.Video,Pr.fetch=e.fetch||Pr.fetch,Pr.readFile=e.readFile||Pr.readFile}var zn={getEnv:GTe,setEnv:Zk,initialize:EI,createBrowserEnv:L4,createFileSystem:z4,createNodejsEnv:B4,monkeyPatch:qTe,isBrowser:V4,isNodejs:kI};EI();function CI(e){return!zn.isNodejs()&&typeof e=="string"?document.getElementById(e):e}function fo(e){let{Canvas:t,CanvasRenderingContext2D:r}=zn.getEnv();if(e instanceof r)return e;let a=CI(e);if(!(a instanceof t))throw new Error("resolveContext2d - expected canvas to be of instance of Canvas");let n=a.getContext("2d");if(!n)throw new Error("resolveContext2d - canvas 2d context is null");return n}var W4=(e=>(e.TOP_LEFT="TOP_LEFT",e.TOP_RIGHT="TOP_RIGHT",e.BOTTOM_LEFT="BOTTOM_LEFT",e.BOTTOM_RIGHT="BOTTOM_RIGHT",e))(W4||{}),SI=class{constructor(e={}){let{anchorPosition:t,backgroundColor:r,fontColor:a,fontSize:n,fontStyle:i,padding:s}=e;this.anchorPosition=t||"TOP_LEFT",this.backgroundColor=r||"rgba(0, 0, 0, 0.5)",this.fontColor=a||"rgba(255, 255, 255, 1)",this.fontSize=n||14,this.fontStyle=i||"Georgia",this.padding=s||4}},A0=class{constructor(e,t,r={}){this.text=typeof e=="string"?[e]:e instanceof A0?e.text:e,this.anchor=t,this.options=new SI(r)}measureWidth(e){let{padding:t}=this.options;return this.text.map(r=>e.measureText(r).width).reduce((r,a)=>r<a?a:r,0)+2*t}measureHeight(){let{fontSize:e,padding:t}=this.options;return this.text.length*e+2*t}getUpperLeft(e,t){let{anchorPosition:r}=this.options,a=r==="BOTTOM_RIGHT"||r==="TOP_RIGHT",n=r==="BOTTOM_LEFT"||r==="BOTTOM_RIGHT",i=this.measureWidth(e),s=this.measureHeight(),o=a?this.anchor.x-i:this.anchor.x,l=n?this.anchor.y-s:this.anchor.y;if(t){let{width:u,height:c}=t,d=Math.max(Math.min(o,u-i),0),p=Math.max(Math.min(l,c-s),0);return{x:d,y:p}}return{x:o,y:l}}draw(e){let t=CI(e),r=fo(t),{backgroundColor:a,fontColor:n,fontSize:i,fontStyle:s,padding:o}=this.options;r.font=`${i}px ${s}`;let l=this.measureWidth(r),u=this.measureHeight();r.fillStyle=a;let c=this.getUpperLeft(r,t);r.fillRect(c.x,c.y,l,u),r.fillStyle=n,this.text.forEach((d,p)=>{let f=o+c.x,h=o+c.y+(p+1)*i;r.fillText(d,f,h)})}},H4=class{constructor(e={}){let{boxColor:t,lineWidth:r,label:a,drawLabelOptions:n}=e;this.boxColor=t||"rgba(0, 0, 255, 1)",this.lineWidth=r||2,this.label=a;let i={anchorPosition:"BOTTOM_LEFT",backgroundColor:this.boxColor};this.drawLabelOptions=new SI(qn(qn({},i),n))}},U4=class{constructor(e,t={}){this.box=new Qr(e),this.options=new H4(t)}draw(e){let t=fo(e),{boxColor:r,lineWidth:a}=this.options,{x:n,y:i,width:s,height:o}=this.box;t.strokeStyle=r,t.lineWidth=a,t.strokeRect(n,i,s,o);let{label:l}=this.options;l&&new A0([l],{x:n-a/2,y:i},this.options.drawLabelOptions).draw(e)}};function XTe(e,t){(Array.isArray(t)?t:[t]).forEach(r=>{let a=r instanceof Wa?r.score:yb(r)?r.detection.score:void 0,n=r instanceof Wa?r.box:yb(r)?r.detection.box:new Qr(r),i=a?`${yI(a)}`:void 0;new U4(n,{label:i}).draw(e)})}function j4(e){let{Image:t,Video:r}=zn.getEnv();return e instanceof t&&e.complete||e instanceof r&&e.readyState>=3}function YTe(e){return new Promise((t,r)=>{(e instanceof zn.getEnv().Canvas||j4(e))&&t(null);function a(i){!i.currentTarget||(i.currentTarget.removeEventListener("load",n),i.currentTarget.removeEventListener("error",a),r(i))}function n(i){!i.currentTarget||(i.currentTarget.removeEventListener("load",n),i.currentTarget.removeEventListener("error",a),t(i))}e.addEventListener("load",n),e.addEventListener("error",a)})}function G4(e){let{Image:t,Video:r}=zn.getEnv();return e instanceof t?new al(e.naturalWidth,e.naturalHeight):e instanceof r?new al(e.videoWidth,e.videoHeight):new al(e.width,e.height)}function wb({width:e,height:t}){let{createCanvasElement:r}=zn.getEnv(),a=r();return a.width=e,a.height=t,a}function q4(e,t){let{ImageData:r}=zn.getEnv();if(!(e instanceof r)&&!j4(e))throw new Error("createCanvasFromMedia - media has not finished loading yet");let{width:a,height:n}=t||G4(e),i=wb({width:a,height:n});return e instanceof r?fo(i).putImageData(e,0,0):fo(i).drawImage(e,0,0,a,n),i}async function KTe(e,t){let r=t||zn.getEnv().createCanvasElement(),[a,n,i]=e.shape.slice(is(e)?1:0),s=te(()=>e.as3D(a,n,i).toInt());return await em.toPixels(s,r),s.dispose(),r}function i_(e){let{Image:t,Canvas:r,Video:a}=zn.getEnv();return e instanceof t||e instanceof r||e instanceof a}function ZTe(e,t,r=!1){let{Image:a,Canvas:n}=zn.getEnv();if(!(e instanceof a||e instanceof n))throw new Error("imageToSquare - expected arg0 to be HTMLImageElement | HTMLCanvasElement");if(t<=0)return wb({width:1,height:1});let i=G4(e),s=t/Math.max(i.height,i.width),o=s*i.width,l=s*i.height,u=wb({width:t,height:t}),c=e instanceof n?e:q4(e),d=Math.abs(o-l)/2,p=r&&o<l?d:0,f=r&&l<o?d:0;return c.width>0&&c.height>0&&fo(u).drawImage(c,p,f,o,l),u}var xb=class{constructor(e,t=!1){if(this._imageTensors=[],this._canvases=[],this._treatAsBatchInput=!1,this._inputDimensions=[],this._inputSize=0,!Array.isArray(e))throw new Error(`NetInput.constructor - expected inputs to be an Array of TResolvedNetInput or to be instanceof tf.Tensor4D, instead have ${e}`);this._treatAsBatchInput=t,this._batchSize=e.length,e.forEach((r,a)=>{if(Rm(r)){this._imageTensors[a]=r,this._inputDimensions[a]=r.shape;return}if(is(r)){let i=r.shape[0];if(i!==1)throw new Error(`NetInput - tf.Tensor4D with batchSize ${i} passed, but not supported in input array`);this._imageTensors[a]=r,this._inputDimensions[a]=r.shape.slice(1);return}let n=r instanceof zn.getEnv().Canvas?r:q4(r);this._canvases[a]=n,this._inputDimensions[a]=[n.height,n.width,3]})}get imageTensors(){return this._imageTensors}get canvases(){return this._canvases}get isBatchInput(){return this.batchSize>1||this._treatAsBatchInput}get batchSize(){return this._batchSize}get inputDimensions(){return this._inputDimensions}get inputSize(){return this._inputSize}get reshapedInputDimensions(){return Xc(this.batchSize,0,1).map((e,t)=>this.getReshapedInputDimensions(t))}getInput(e){return this.canvases[e]||this.imageTensors[e]}getInputDimensions(e){return this._inputDimensions[e]}getInputHeight(e){return this._inputDimensions[e][0]}getInputWidth(e){return this._inputDimensions[e][1]}getReshapedInputDimensions(e){if(typeof this.inputSize!="number")throw new Error("getReshapedInputDimensions - inputSize not set, toBatchTensor has not been called yet");let t=this.getInputWidth(e),r=this.getInputHeight(e);return R4({width:t,height:r},this.inputSize)}toBatchTensor(e,t=!0){return this._inputSize=e,te(()=>{let r=Xc(this.batchSize,0,1).map(a=>{let n=this.getInput(a);if(n instanceof ht){let i=is(n)?n:pn(n);return i=WTe(i,t),(i.shape[1]!==e||i.shape[2]!==e)&&(i=ta.resizeBilinear(i,[e,e],!1,!1)),i.as3D(e,e,3)}if(n instanceof zn.getEnv().Canvas)return em.fromPixels(ZTe(n,e,t));throw new Error(`toBatchTensor - at batchIdx ${a}, expected input to be instanceof tf.Tensor or instanceof HTMLCanvasElement, instead have ${n}`)});return Vr(r.map(a=>Te(a,"float32"))).as4D(this.batchSize,e,e,3)})}};async function kn(e){if(e instanceof xb)return e;let t=Array.isArray(e)?e:[e];if(!t.length)throw new Error("toNetInput - empty array passed as input");let r=n=>Array.isArray(e)?` at input index ${n}:`:"",a=t.map(CI);return a.forEach((n,i)=>{if(!i_(n)&&!Rm(n)&&!is(n))throw typeof t[i]=="string"?new Error(`toNetInput -${r(i)} string passed, but could not resolve HTMLElement for element id ${t[i]}`):new Error(`toNetInput -${r(i)} expected media to be of type HTMLImageElement | HTMLVideoElement | HTMLCanvasElement | tf.Tensor3D, or to be an element id`);if(is(n)){let s=n.shape[0];if(s!==1)throw new Error(`toNetInput -${r(i)} tf.Tensor4D with batchSize ${s} passed, but not supported in input array`)}}),await Promise.all(a.map(n=>i_(n)&&YTe(n))),new xb(a,Array.isArray(e))}async function $I(e,t){let{Canvas:r}=zn.getEnv(),a=e;if(!(e instanceof r)){let i=await kn(e);if(i.batchSize>1)throw new Error("extractFaces - batchSize > 1 not supported");let s=i.getInput(0);a=s instanceof r?s:await KTe(s)}let n=fo(a);return t.map(i=>i instanceof Wa?i.forSize(a.width,a.height).box.floor():i).map(i=>i.clipAtImageBorders(a.width,a.height)).map(({x:i,y:s,width:o,height:l})=>{let u=wb({width:o,height:l});return o>0&&l>0&&fo(u).putImageData(n.getImageData(i,s,o,l),0,0),u})}async function II(e,t){if(!Rm(e)&&!is(e))throw new Error("extractFaceTensors - expected image tensor to be 3D or 4D");if(is(e)&&e.shape[0]>1)throw new Error("extractFaceTensors - batchSize > 1 not supported");return te(()=>{let[r,a,n]=e.shape.slice(is(e)?1:0);return t.map(i=>i instanceof Wa?i.forSize(a,r).box:i).map(i=>i.clipAtImageBorders(a,r)).filter(i=>i.width>0&&i.height>0).map(({x:i,y:s,width:o,height:l})=>dm(e.as3D(r,a,n),[s,i,0],[l,o,n]))})}async function QTe(e,t){let{fetch:r}=zn.getEnv(),a=await r(e,t);if(!(a.status<400))throw new Error(`failed to fetch: (${a.status}) ${a.statusText}, from url: ${a.url}`);return a}async function JTe(e){return(await QTe(e)).json()}function X4(e,t){let r=`${t}-weights_manifest.json`;if(!e)return{modelBaseUri:"",manifestUri:r};if(e==="/")return{modelBaseUri:"/",manifestUri:`/${r}`};let a=e.startsWith("http://")?"http://":e.startsWith("https://")?"https://":"";e=e.replace(a,"");let n=e.split("/").filter(o=>o),i=e.endsWith(".json")?n[n.length-1]:r,s=a+(e.endsWith(".json")?n.slice(0,n.length-1):n).join("/");return s=e.startsWith("/")?`/${s}`:s,{modelBaseUri:s,manifestUri:s==="/"?`/${i}`:`${s}/${i}`}}async function e2e(e,t){let{manifestUri:r,modelBaseUri:a}=X4(e,t),n=await JTe(r);return rn.loadWeights(n,a)}var No=class{constructor(e){this._params=void 0,this._paramMappings=[],this._name=e}get params(){return this._params}get paramMappings(){return this._paramMappings}get isLoaded(){return!!this.params}getParamFromPath(e){let{obj:t,objProp:r}=this.traversePropertyPath(e);return t[r]}reassignParamFromPath(e,t){let{obj:r,objProp:a}=this.traversePropertyPath(e);r[a].dispose(),r[a]=t}getParamList(){return this._paramMappings.map(({paramPath:e})=>({path:e,tensor:this.getParamFromPath(e)}))}getTrainableParams(){return this.getParamList().filter(e=>e.tensor instanceof fl)}getFrozenParams(){return this.getParamList().filter(e=>!(e.tensor instanceof fl))}variable(){this.getFrozenParams().forEach(({path:e,tensor:t})=>{this.reassignParamFromPath(e,t.variable())})}freeze(){this.getTrainableParams().forEach(({path:e,tensor:t})=>{let r=ka(t.dataSync());t.dispose(),this.reassignParamFromPath(e,r)})}dispose(e=!0){this.getParamList().forEach(t=>{if(e&&t.tensor.isDisposed)throw new Error(`param tensor has already been disposed for path ${t.path}`);t.tensor.dispose()}),this._params=void 0}serializeParams(){return new Float32Array(this.getParamList().map(({tensor:e})=>Array.from(e.dataSync())).reduce((e,t)=>e.concat(t)))}async load(e){if(e instanceof Float32Array){this.extractWeights(e);return}await this.loadFromUri(e)}async loadFromUri(e){if(e&&typeof e!="string")throw new Error(`${this._name}.loadFromUri - expected model uri`);let t=await e2e(e,this.getDefaultModelName());this.loadFromWeightMap(t)}async loadFromDisk(e){if(e&&typeof e!="string")throw new Error(`${this._name}.loadFromDisk - expected model file path`);let{readFile:t}=zn.getEnv(),{manifestUri:r,modelBaseUri:a}=X4(e,this.getDefaultModelName()),n=l=>Promise.all(l.map(u=>t(u).then(c=>c.buffer))),i=rn.weightsLoaderFactory(n),s=JSON.parse((await t(r)).toString()),o=await i(s,a);this.loadFromWeightMap(o)}loadFromWeightMap(e){let{paramMappings:t,params:r}=this.extractParamsFromWeightMap(e);this._paramMappings=t,this._params=r}extractWeights(e){let{paramMappings:t,params:r}=this.extractParams(e);this._paramMappings=t,this._params=r}traversePropertyPath(e){if(!this.params)throw new Error("traversePropertyPath - model has no loaded params");let t=e.split("/").reduce((n,i)=>{if(!n.nextObj.hasOwnProperty(i))throw new Error(`traversePropertyPath - object does not have property ${i}, for path ${e}`);return{obj:n.nextObj,objProp:i,nextObj:n.nextObj[i]}},{nextObj:this.params}),{obj:r,objProp:a}=t;if(!r||!a||!(r[a]instanceof ht))throw new Error(`traversePropertyPath - parameter is not a tensor, for path ${e}`);return{obj:r,objProp:a}}};function wa(e,t,r){return te(()=>{let a=cm(e,t.depthwise_filter,t.pointwise_filter,r,"same");return a=xe(a,t.bias),a})}function Qw(e,t,r=!1){return te(()=>{let a=At(r?xe(wn(e,t.conv0.filters,[2,2],"same"),t.conv0.bias):wa(e,t.conv0,[2,2])),n=wa(a,t.conv1,[1,1]),i=At(xe(a,n)),s=wa(i,t.conv2,[1,1]);return At(xe(a,xe(n,s)))})}function Og(e,t,r=!1,a=!0){return te(()=>{let n=At(r?xe(wn(e,t.conv0.filters,a?[2,2]:[1,1],"same"),t.conv0.bias):wa(e,t.conv0,a?[2,2]:[1,1])),i=wa(n,t.conv1,[1,1]),s=At(xe(n,i)),o=wa(s,t.conv2,[1,1]),l=At(xe(n,xe(i,o))),u=wa(l,t.conv3,[1,1]);return At(xe(n,xe(i,xe(o,u))))})}function Bf(e,t,r="same",a=!1){return te(()=>{let n=xe(wn(e,t.filters,[1,1],r),t.bias);return a?At(n):n})}function Ao(e,t){Object.keys(e).forEach(r=>{t.some(a=>a.originalPath===r)||e[r].dispose()})}function TI(e,t){return(r,a,n,i)=>{let s=xl(e(r*a*n*n),[n,n,r,a]),o=Nt(e(a));return t.push({paramPath:`${i}/filters`},{paramPath:`${i}/bias`}),{filters:s,bias:o}}}function Y4(e,t){return(r,a,n)=>{let i=ns(e(r*a),[r,a]),s=Nt(e(a));return t.push({paramPath:`${n}/weights`},{paramPath:`${n}/bias`}),{weights:i,bias:s}}}var K4=class{constructor(e,t,r){this.depthwise_filter=e,this.pointwise_filter=t,this.bias=r}};function NI(e,t){return(r,a,n)=>{let i=xl(e(9*r),[3,3,r,1]),s=xl(e(r*a),[1,1,r,a]),o=Nt(e(a));return t.push({paramPath:`${n}/depthwise_filter`},{paramPath:`${n}/pointwise_filter`},{paramPath:`${n}/bias`}),new K4(i,s,o)}}function AI(e){return t=>{let r=e(`${t}/depthwise_filter`,4),a=e(`${t}/pointwise_filter`,4),n=e(`${t}/bias`,1);return new K4(r,a,n)}}function Lu(e,t){return(r,a,n)=>{let i=e[r];if(!Sp(i,a))throw new Error(`expected weightMap[${r}] to be a Tensor${a}D, instead have ${i}`);return t.push({originalPath:r,paramPath:n||r}),i}}function _o(e){let t=e;function r(n){let i=t.slice(0,n);return t=t.slice(n),i}function a(){return t}return{extractWeights:r,getRemainingWeights:a}}function Z4(e,t){let r=TI(e,t),a=NI(e,t);function n(s,o,l,u=!1){let c=u?r(s,o,3,`${l}/conv0`):a(s,o,`${l}/conv0`),d=a(o,o,`${l}/conv1`),p=a(o,o,`${l}/conv2`);return{conv0:c,conv1:d,conv2:p}}function i(s,o,l,u=!1){let{conv0:c,conv1:d,conv2:p}=n(s,o,l,u),f=a(o,o,`${l}/conv3`);return{conv0:c,conv1:d,conv2:p,conv3:f}}return{extractDenseBlock3Params:n,extractDenseBlock4Params:i}}function t2e(e){let t=[],{extractWeights:r,getRemainingWeights:a}=_o(e),{extractDenseBlock4Params:n}=Z4(r,t),i=n(3,32,"dense0",!0),s=n(32,64,"dense1"),o=n(64,128,"dense2"),l=n(128,256,"dense3");if(a().length!==0)throw new Error(`weights remaing after extract: ${a().length}`);return{paramMappings:t,params:{dense0:i,dense1:s,dense2:o,dense3:l}}}function Q4(e){return t=>{let r=e(`${t}/filters`,4),a=e(`${t}/bias`,1);return{filters:r,bias:a}}}function J4(e,t){let r=Lu(e,t),a=Q4(r),n=AI(r);function i(o,l=!1){let u=l?a(`${o}/conv0`):n(`${o}/conv0`),c=n(`${o}/conv1`),d=n(`${o}/conv2`);return{conv0:u,conv1:c,conv2:d}}function s(o,l=!1){let u=l?a(`${o}/conv0`):n(`${o}/conv0`),c=n(`${o}/conv1`),d=n(`${o}/conv2`),p=n(`${o}/conv3`);return{conv0:u,conv1:c,conv2:d,conv3:p}}return{extractDenseBlock3Params:i,extractDenseBlock4Params:s}}function r2e(e){let t=[],{extractDenseBlock4Params:r}=J4(e,t),a={dense0:r("dense0",!0),dense1:r("dense1"),dense2:r("dense2"),dense3:r("dense3")};return Ao(e,t),{params:a,paramMappings:t}}var eV=class extends No{constructor(){super("FaceFeatureExtractor")}forwardInput(e){let{params:t}=this;if(!t)throw new Error("FaceFeatureExtractor - load model before inference");return te(()=>{let r=Te(e.toBatchTensor(112,!0),"float32"),a=Om(r,[122.782,117.001,104.298]).div(255),n=Og(a,t.dense0,!0);return n=Og(n,t.dense1),n=Og(n,t.dense2),n=Og(n,t.dense3),n=ps(n,[7,7],[2,2],"valid"),n})}async forward(e){return this.forwardInput(await kn(e))}getDefaultModelName(){return"face_feature_extractor_model"}extractParamsFromWeightMap(e){return r2e(e)}extractParams(e){return t2e(e)}};function Qk(e,t){return te(()=>xe(ft(e,t.weights),t.bias))}function n2e(e,t,r){let a=[],{extractWeights:n,getRemainingWeights:i}=_o(e),s=Y4(n,a)(t,r,"fc");if(i().length!==0)throw new Error(`weights remaing after extract: ${i().length}`);return{paramMappings:a,params:{fc:s}}}function a2e(e){let t=[],r=Lu(e,t);function a(i){let s=r(`${i}/weights`,2),o=r(`${i}/bias`,1);return{weights:s,bias:o}}let n={fc:a("fc")};return Ao(e,t),{params:n,paramMappings:t}}function tV(e){let t={},r={};return Object.keys(e).forEach(a=>{let n=a.startsWith("fc")?r:t;n[a]=e[a]}),{featureExtractorMap:t,classifierMap:r}}var rV=class extends No{constructor(e,t){super(e),this._faceFeatureExtractor=t}get faceFeatureExtractor(){return this._faceFeatureExtractor}runNet(e){let{params:t}=this;if(!t)throw new Error(`${this._name} - load model before inference`);return te(()=>{let r=e instanceof xb?this.faceFeatureExtractor.forwardInput(e):e;return Qk(r.as2D(r.shape[0],-1),t.fc)})}dispose(e=!0){this.faceFeatureExtractor.dispose(e),super.dispose(e)}loadClassifierParams(e){let{params:t,paramMappings:r}=this.extractClassifierParams(e);this._params=t,this._paramMappings=r}extractClassifierParams(e){return n2e(e,this.getClassifierChannelsIn(),this.getClassifierChannelsOut())}extractParamsFromWeightMap(e){let{featureExtractorMap:t,classifierMap:r}=tV(e);return this.faceFeatureExtractor.loadFromWeightMap(t),a2e(r)}extractParams(e){let t=this.getClassifierChannelsIn(),r=this.getClassifierChannelsOut(),a=r*t+r,n=e.slice(0,e.length-a),i=e.slice(e.length-a);return this.faceFeatureExtractor.extractWeights(n),this.extractClassifierParams(i)}},s_=["neutral","happy","sad","angry","fearful","disgusted","surprised"],_I=class{constructor(e){if(this.neutral=0,this.happy=0,this.sad=0,this.angry=0,this.fearful=0,this.disgusted=0,this.surprised=0,e.length!==7)throw new Error(`FaceExpressions.constructor - expected probabilities.length to be 7, have: ${e.length}`);s_.forEach((t,r)=>{this[t]=e[r]})}asSortedArray(){return s_.map(e=>({expression:e,probability:this[e]})).sort((e,t)=>t.probability-e.probability)}},i2e=class extends rV{constructor(e=new eV){super("FaceExpressionNet",e)}forwardInput(e){return te(()=>So(this.runNet(e)))}async forward(e){return this.forwardInput(await kn(e))}async predictExpressions(e){let t=await kn(e),r=await this.forwardInput(t),a=await Promise.all(hr(r).map(async i=>{let s=i.dataSync();return i.dispose(),s}));r.dispose();let n=a.map(i=>new _I(i));return t.isBatchInput?n:n[0]}getDefaultModelName(){return"face_expression_model"}getClassifierChannelsIn(){return 256}getClassifierChannelsOut(){return 7}};function s2e(e){return e.expressions instanceof _I}function nV(e,t){return Mo(qn({},e),{expressions:t})}function o2e(e,t,r=.1,a){(Array.isArray(t)?t:[t]).forEach(n=>{let i=n instanceof _I?n:s2e(n)?n.expressions:void 0;if(!i)throw new Error("drawFaceExpressions - expected faceExpressions to be FaceExpressions | WithFaceExpressions<{}> or array thereof");let s=i.asSortedArray().filter(l=>l.probability>r),o=yb(n)?n.detection.box.bottomLeft:a||new $t(0,0);new A0(s.map(l=>`${l.expression} (${yI(l.probability)})`),o).draw(e)})}function aV(e){return yb(e)&&e.landmarks instanceof bb&&e.unshiftedLandmarks instanceof bb&&e.alignedRect instanceof Wa}function l2e(e){let t=(s,o,l,u)=>Math.atan2(u-o,l-s)%Math.PI,r={roll:void 0,pitch:void 0,yaw:void 0};if(!e||!e._positions||e._positions.length!==68)return r;let a=e._positions;r.roll=-t(a[36]._x,a[36]._y,a[45]._x,a[45]._y),r.pitch=t(0,Math.abs(a[0]._x-a[30]._x)/a[30]._x,Math.PI,Math.abs(a[16]._x-a[30]._x)/a[30]._x);let n=a.reduce((s,o)=>s<o._y?s:o._y,1/0),i=a.reduce((s,o)=>s>o._y?s:o._y,-1/0);return r.yaw=Math.PI*(e._imgDims._height/(i-n)/1.4-1),r}function iV(e,t){let{box:r}=e.detection,a=t.shiftBy(r.x,r.y),n=a.align(),{imageDims:i}=e.detection,s=new Wa(e.detection.score,n.rescale(i.reverse()),i),o=l2e(t);return Mo(qn({},e),{landmarks:a,unshiftedLandmarks:t,alignedRect:s,angle:o})}var sV=class{constructor(e={}){let{drawLines:t=!0,drawPoints:r=!0,lineWidth:a,lineColor:n,pointSize:i,pointColor:s}=e;this.drawLines=t,this.drawPoints=r,this.lineWidth=a||1,this.pointSize=i||2,this.lineColor=n||"rgba(0, 255, 255, 1)",this.pointColor=s||"rgba(255, 0, 255, 1)"}},oV=class{constructor(e,t={}){this.faceLandmarks=e,this.options=new sV(t)}draw(e){let t=fo(e),{drawLines:r,drawPoints:a,lineWidth:n,lineColor:i,pointSize:s,pointColor:o}=this.options;if(r&&this.faceLandmarks instanceof D4&&(t.strokeStyle=i,t.lineWidth=n,Ss(t,this.faceLandmarks.getJawOutline()),Ss(t,this.faceLandmarks.getLeftEyeBrow()),Ss(t,this.faceLandmarks.getRightEyeBrow()),Ss(t,this.faceLandmarks.getNose()),Ss(t,this.faceLandmarks.getLeftEye(),!0),Ss(t,this.faceLandmarks.getRightEye(),!0),Ss(t,this.faceLandmarks.getMouth(),!0)),a){t.strokeStyle=o,t.fillStyle=o;let l=u=>{t.beginPath(),t.arc(u.x,u.y,s,0,2*Math.PI),t.fill()};this.faceLandmarks.positions.forEach(l)}}};function u2e(e,t){(Array.isArray(t)?t:[t]).forEach(r=>{let a=r instanceof bb?r:aV(r)?r.landmarks:void 0;if(!a)throw new Error("drawFaceLandmarks - expected faceExpressions to be FaceLandmarks | WithFaceLandmarks<WithFaceDetection<{}>> or array thereof");new oV(a).draw(e)})}function c2e(e,t){let r=TI(e,t),a=NI(e,t);function n(s,o,l){let u=a(s,o,`${l}/separable_conv0`),c=a(o,o,`${l}/separable_conv1`),d=r(s,o,1,`${l}/expansion_conv`);return{separable_conv0:u,separable_conv1:c,expansion_conv:d}}function i(s,o){let l=a(s,s,`${o}/separable_conv0`),u=a(s,s,`${o}/separable_conv1`),c=a(s,s,`${o}/separable_conv2`);return{separable_conv0:l,separable_conv1:u,separable_conv2:c}}return{extractConvParams:r,extractSeparableConvParams:a,extractReductionBlockParams:n,extractMainBlockParams:i}}function d2e(e,t){let r=[],{extractWeights:a,getRemainingWeights:n}=_o(e),{extractConvParams:i,extractSeparableConvParams:s,extractReductionBlockParams:o,extractMainBlockParams:l}=c2e(a,r),u=i(3,32,3,"entry_flow/conv_in"),c=o(32,64,"entry_flow/reduction_block_0"),d=o(64,128,"entry_flow/reduction_block_1"),p={conv_in:u,reduction_block_0:c,reduction_block_1:d},f={};Xc(t,0,1).forEach(v=>{f[`main_block_${v}`]=l(128,`middle_flow/main_block_${v}`)});let h=o(128,256,"exit_flow/reduction_block"),m=s(256,512,"exit_flow/separable_conv"),g={reduction_block:h,separable_conv:m};if(n().length!==0)throw new Error(`weights remaing after extract: ${n().length}`);return{paramMappings:r,params:{entry_flow:p,middle_flow:f,exit_flow:g}}}function p2e(e,t){let r=Lu(e,t),a=Q4(r),n=AI(r);function i(o){let l=n(`${o}/separable_conv0`),u=n(`${o}/separable_conv1`),c=a(`${o}/expansion_conv`);return{separable_conv0:l,separable_conv1:u,expansion_conv:c}}function s(o){let l=n(`${o}/separable_conv0`),u=n(`${o}/separable_conv1`),c=n(`${o}/separable_conv2`);return{separable_conv0:l,separable_conv1:u,separable_conv2:c}}return{extractConvParams:a,extractSeparableConvParams:n,extractReductionBlockParams:i,extractMainBlockParams:s}}function f2e(e,t){let r=[],{extractConvParams:a,extractSeparableConvParams:n,extractReductionBlockParams:i,extractMainBlockParams:s}=p2e(e,r),o=a("entry_flow/conv_in"),l=i("entry_flow/reduction_block_0"),u=i("entry_flow/reduction_block_1"),c={conv_in:o,reduction_block_0:l,reduction_block_1:u},d={};Xc(t,0,1).forEach(m=>{d[`main_block_${m}`]=s(`middle_flow/main_block_${m}`)});let p=i("exit_flow/reduction_block"),f=n("exit_flow/separable_conv"),h={reduction_block:p,separable_conv:f};return Ao(e,r),{params:{entry_flow:c,middle_flow:d,exit_flow:h},paramMappings:r}}function lV(e,t,r){return xe(wn(e,t.filters,r,"same"),t.bias)}function Jw(e,t,r=!0){let a=r?At(e):e;return a=wa(a,t.separable_conv0,[1,1]),a=wa(At(a),t.separable_conv1,[1,1]),a=Dr(a,[3,3],[2,2],"same"),a=xe(a,lV(e,t.expansion_conv,[2,2])),a}function h2e(e,t){let r=wa(At(e),t.separable_conv0,[1,1]);return r=wa(At(r),t.separable_conv1,[1,1]),r=wa(At(r),t.separable_conv2,[1,1]),r=xe(r,e),r}var m2e=class extends No{constructor(e){super("TinyXception"),this._numMainBlocks=e}forwardInput(e){let{params:t}=this;if(!t)throw new Error("TinyXception - load model before inference");return te(()=>{let r=Te(e.toBatchTensor(112,!0),"float32"),a=Om(r,[122.782,117.001,104.298]).div(255),n=At(lV(a,t.entry_flow.conv_in,[2,2]));return n=Jw(n,t.entry_flow.reduction_block_0,!1),n=Jw(n,t.entry_flow.reduction_block_1),Xc(this._numMainBlocks,0,1).forEach(i=>{n=h2e(n,t.middle_flow[`main_block_${i}`])}),n=Jw(n,t.exit_flow.reduction_block),n=At(wa(n,t.exit_flow.separable_conv,[1,1])),n})}async forward(e){return this.forwardInput(await kn(e))}getDefaultModelName(){return"tiny_xception_model"}extractParamsFromWeightMap(e){return f2e(e,this._numMainBlocks)}extractParams(e){return d2e(e,this._numMainBlocks)}};function g2e(e){let t=[],{extractWeights:r,getRemainingWeights:a}=_o(e),n=Y4(r,t),i=n(512,1,"fc/age"),s=n(512,2,"fc/gender");if(a().length!==0)throw new Error(`weights remaing after extract: ${a().length}`);return{paramMappings:t,params:{fc:{age:i,gender:s}}}}function v2e(e){let t=[],r=Lu(e,t);function a(i){let s=r(`${i}/weights`,2),o=r(`${i}/bias`,1);return{weights:s,bias:o}}let n={fc:{age:a("fc/age"),gender:a("fc/gender")}};return Ao(e,t),{params:n,paramMappings:t}}var b2e=(e=>(e.FEMALE="female",e.MALE="male",e))(b2e||{}),y2e=class extends No{constructor(e=new m2e(2)){super("AgeGenderNet"),this._faceFeatureExtractor=e}get faceFeatureExtractor(){return this._faceFeatureExtractor}runNet(e){let{params:t}=this;if(!t)throw new Error(`${this._name} - load model before inference`);return te(()=>{let r=e instanceof xb?this.faceFeatureExtractor.forwardInput(e):e,a=ps(r,[7,7],[2,2],"valid").as2D(r.shape[0],-1),n=Qk(a,t.fc.age).as1D(),i=Qk(a,t.fc.gender);return{age:n,gender:i}})}forwardInput(e){return te(()=>{let{age:t,gender:r}=this.runNet(e);return{age:t,gender:So(r)}})}async forward(e){return this.forwardInput(await kn(e))}async predictAgeAndGender(e){let t=await kn(e),r=await this.forwardInput(t),a=hr(r.age),n=hr(r.gender),i=a.map((o,l)=>({ageTensor:o,genderTensor:n[l]})),s=await Promise.all(i.map(async({ageTensor:o,genderTensor:l})=>{let u=o.dataSync()[0],c=l.dataSync()[0],d=c>.5,p=d?"male":"female",f=d?c:1-c;return o.dispose(),l.dispose(),{age:u,gender:p,genderProbability:f}}));return r.age.dispose(),r.gender.dispose(),t.isBatchInput?s:s[0]}getDefaultModelName(){return"age_gender_model"}dispose(e=!0){this.faceFeatureExtractor.dispose(e),super.dispose(e)}loadClassifierParams(e){let{params:t,paramMappings:r}=this.extractClassifierParams(e);this._params=t,this._paramMappings=r}extractClassifierParams(e){return g2e(e)}extractParamsFromWeightMap(e){let{featureExtractorMap:t,classifierMap:r}=tV(e);return this.faceFeatureExtractor.loadFromWeightMap(t),v2e(r)}extractParams(e){let t=e.slice(0,e.length-1539),r=e.slice(e.length-1539);return this.faceFeatureExtractor.extractWeights(t),this.extractClassifierParams(r)}},uV=class extends rV{postProcess(e,t,r){let a=r.map(({width:i,height:s})=>{let o=t/Math.max(s,i);return{width:i*o,height:s*o}}),n=a.length;return te(()=>{let i=(u,c)=>Vr([Ea([68],u,"float32"),Ea([68],c,"float32")],1).as2D(1,136).as1D(),s=(u,c)=>{let{width:d,height:p}=a[u];return c(d,p)?Math.abs(d-p)/2:0},o=u=>s(u,(c,d)=>c<d),l=u=>s(u,(c,d)=>d<c);return e.mul(Ea([n,136],t,"float32")).sub(Vr(Array.from(Array(n),(u,c)=>i(o(c),l(c))))).div(Vr(Array.from(Array(n),(u,c)=>i(a[c].width,a[c].height))))})}forwardInput(e){return te(()=>{let t=this.runNet(e);return this.postProcess(t,e.inputSize,e.inputDimensions.map(([r,a])=>({height:r,width:a})))})}async forward(e){return this.forwardInput(await kn(e))}async detectLandmarks(e){let t=await kn(e),r=te(()=>hr(this.forwardInput(t))),a=await Promise.all(r.map(async(n,i)=>{let s=Array.from(n.dataSync()),o=s.filter((u,c)=>Yk(c)),l=s.filter((u,c)=>!Yk(c));return new D4(Array(68).fill(0).map((u,c)=>new $t(o[c],l[c])),{height:t.getInputHeight(i),width:t.getInputWidth(i)})}));return r.forEach(n=>n.dispose()),t.isBatchInput?a:a[0]}getClassifierChannelsOut(){return 136}},w2e=class extends uV{constructor(e=new eV){super("FaceLandmark68Net",e)}getDefaultModelName(){return"face_landmark_68_model"}getClassifierChannelsIn(){return 256}};function x2e(e){let t=[],{extractDenseBlock3Params:r}=J4(e,t),a={dense0:r("dense0",!0),dense1:r("dense1"),dense2:r("dense2")};return Ao(e,t),{params:a,paramMappings:t}}function k2e(e){let t=[],{extractWeights:r,getRemainingWeights:a}=_o(e),{extractDenseBlock3Params:n}=Z4(r,t),i=n(3,32,"dense0",!0),s=n(32,64,"dense1"),o=n(64,128,"dense2");if(a().length!==0)throw new Error(`weights remaing after extract: ${a().length}`);return{paramMappings:t,params:{dense0:i,dense1:s,dense2:o}}}var E2e=class extends No{constructor(){super("TinyFaceFeatureExtractor")}forwardInput(e){let{params:t}=this;if(!t)throw new Error("TinyFaceFeatureExtractor - load model before inference");return te(()=>{let r=Te(e.toBatchTensor(112,!0),"float32"),a=Om(r,[122.782,117.001,104.298]).div(255),n=Qw(a,t.dense0,!0);return n=Qw(n,t.dense1),n=Qw(n,t.dense2),n=ps(n,[14,14],[2,2],"valid"),n})}async forward(e){return this.forwardInput(await kn(e))}getDefaultModelName(){return"face_feature_extractor_tiny_model"}extractParamsFromWeightMap(e){return x2e(e)}extractParams(e){return k2e(e)}},C2e=class extends uV{constructor(e=new E2e){super("FaceLandmark68TinyNet",e)}getDefaultModelName(){return"face_landmark_68_tiny_model"}getClassifierChannelsIn(){return 128}};function S2e(e,t){return xe(ee(e,t.weights),t.biases)}function MI(e,t,r,a,n="same"){let{filters:i,bias:s}=t.conv,o=wn(e,i,r,n);return o=xe(o,s),o=S2e(o,t.scale),a?At(o):o}function $2e(e,t){return MI(e,t,[1,1],!0)}function cV(e,t){return MI(e,t,[1,1],!1)}function dV(e,t){return MI(e,t,[2,2],!0,"valid")}function I2e(e,t){function r(o,l,u){let c=e(o),d=c.length/(l*u*u);if(M4(d))throw new Error(`depth has to be an integer: ${d}, weights.length: ${c.length}, numFilters: ${l}, filterSize: ${u}`);return te(()=>ct(xl(c,[l,d,u,u]),[2,3,1,0]))}function a(o,l,u,c){let d=r(o,l,u),p=Nt(e(l));return t.push({paramPath:`${c}/filters`},{paramPath:`${c}/bias`}),{filters:d,bias:p}}function n(o,l){let u=Nt(e(o)),c=Nt(e(o));return t.push({paramPath:`${l}/weights`},{paramPath:`${l}/biases`}),{weights:u,biases:c}}function i(o,l,u,c){let d=a(o,l,u,`${c}/conv`),p=n(l,`${c}/scale`);return{conv:d,scale:p}}function s(o,l,u,c,d=!1){let p=i((d?.5:1)*o,l,u,`${c}/conv1`),f=i(o,l,u,`${c}/conv2`);return{conv1:p,conv2:f}}return{extractConvLayerParams:i,extractResidualLayerParams:s}}function T2e(e){let{extractWeights:t,getRemainingWeights:r}=_o(e),a=[],{extractConvLayerParams:n,extractResidualLayerParams:i}=I2e(t,a),s=n(4704,32,7,"conv32_down"),o=i(9216,32,3,"conv32_1"),l=i(9216,32,3,"conv32_2"),u=i(9216,32,3,"conv32_3"),c=i(36864,64,3,"conv64_down",!0),d=i(36864,64,3,"conv64_1"),p=i(36864,64,3,"conv64_2"),f=i(36864,64,3,"conv64_3"),h=i(147456,128,3,"conv128_down",!0),m=i(147456,128,3,"conv128_1"),g=i(147456,128,3,"conv128_2"),v=i(589824,256,3,"conv256_down",!0),b=i(589824,256,3,"conv256_1"),y=i(589824,256,3,"conv256_2"),w=i(589824,256,3,"conv256_down_out"),x=te(()=>ct(ns(t(256*128),[128,256]),[1,0]));if(a.push({paramPath:"fc"}),r().length!==0)throw new Error(`weights remaing after extract: ${r().length}`);return{params:{conv32_down:s,conv32_1:o,conv32_2:l,conv32_3:u,conv64_down:c,conv64_1:d,conv64_2:p,conv64_3:f,conv128_down:h,conv128_1:m,conv128_2:g,conv256_down:v,conv256_1:b,conv256_2:y,conv256_down_out:w,fc:x},paramMappings:a}}function N2e(e,t){let r=Lu(e,t);function a(s){let o=r(`${s}/scale/weights`,1),l=r(`${s}/scale/biases`,1);return{weights:o,biases:l}}function n(s){let o=r(`${s}/conv/filters`,4),l=r(`${s}/conv/bias`,1),u=a(s);return{conv:{filters:o,bias:l},scale:u}}function i(s){return{conv1:n(`${s}/conv1`),conv2:n(`${s}/conv2`)}}return{extractConvLayerParams:n,extractResidualLayerParams:i}}function A2e(e){let t=[],{extractConvLayerParams:r,extractResidualLayerParams:a}=N2e(e,t),n=r("conv32_down"),i=a("conv32_1"),s=a("conv32_2"),o=a("conv32_3"),l=a("conv64_down"),u=a("conv64_1"),c=a("conv64_2"),d=a("conv64_3"),p=a("conv128_down"),f=a("conv128_1"),h=a("conv128_2"),m=a("conv256_down"),g=a("conv256_1"),v=a("conv256_2"),b=a("conv256_down_out"),{fc:y}=e;if(t.push({originalPath:"fc",paramPath:"fc"}),!_4(y))throw new Error(`expected weightMap[fc] to be a Tensor2D, instead have ${y}`);let w={conv32_down:n,conv32_1:i,conv32_2:s,conv32_3:o,conv64_down:l,conv64_1:u,conv64_2:c,conv64_3:d,conv128_down:p,conv128_1:f,conv128_2:h,conv256_down:m,conv256_1:g,conv256_2:v,conv256_down_out:b,fc:y};return Ao(e,t),{params:w,paramMappings:t}}function fi(e,t){let r=$2e(e,t.conv1);return r=cV(r,t.conv2),r=xe(r,e),r=At(r),r}function Pg(e,t){let r=dV(e,t.conv1);r=cV(r,t.conv2);let a=ps(e,2,2,"valid"),n=Jt(a.shape),i=a.shape[3]!==r.shape[3];if(a.shape[1]!==r.shape[1]||a.shape[2]!==r.shape[2]){let s=[...r.shape];s[1]=1;let o=Jt(s);r=Ot([r,o],1);let l=[...r.shape];l[2]=1;let u=Jt(l);r=Ot([r,u],2)}return a=i?Ot([a,n],3):a,r=xe(a,r),r=At(r),r}var _2e=class extends No{constructor(){super("FaceRecognitionNet")}forwardInput(e){let{params:t}=this;if(!t)throw new Error("FaceRecognitionNet - load model before inference");return te(()=>{let r=Te(e.toBatchTensor(150,!0),"float32"),a=Om(r,[122.782,117.001,104.298]).div(255),n=dV(a,t.conv32_down);n=Dr(n,3,2,"valid"),n=fi(n,t.conv32_1),n=fi(n,t.conv32_2),n=fi(n,t.conv32_3),n=Pg(n,t.conv64_down),n=fi(n,t.conv64_1),n=fi(n,t.conv64_2),n=fi(n,t.conv64_3),n=Pg(n,t.conv128_down),n=fi(n,t.conv128_1),n=fi(n,t.conv128_2),n=Pg(n,t.conv256_down),n=fi(n,t.conv256_1),n=fi(n,t.conv256_2),n=Pg(n,t.conv256_down_out);let i=n.mean([1,2]);return ft(i,t.fc)})}async forward(e){return this.forwardInput(await kn(e))}async computeFaceDescriptor(e){var t;if((t=e==null?void 0:e.shape)!=null&&t.some(i=>i<=0))return new Float32Array(128);let r=await kn(e),a=te(()=>hr(this.forwardInput(r))),n=await Promise.all(a.map(i=>i.data()));return a.forEach(i=>i.dispose()),r.isBatchInput?n:n[0]}getDefaultModelName(){return"face_recognition_model"}extractParamsFromWeightMap(e){return A2e(e)}extractParams(e){return T2e(e)}};function pV(e,t){return Mo(qn({},e),{descriptor:t})}function fV(e,t){return Mo(qn({},e),{age:t})}function hV(e,t,r){return Mo(qn({},e),{gender:t,genderProbability:r})}function M2e(e,t){function r(l,u){let c=xl(e(9*l),[3,3,l,1]),d=Nt(e(l)),p=Nt(e(l)),f=Nt(e(l)),h=Nt(e(l));return t.push({paramPath:`${u}/filters`},{paramPath:`${u}/batch_norm_scale`},{paramPath:`${u}/batch_norm_offset`},{paramPath:`${u}/batch_norm_mean`},{paramPath:`${u}/batch_norm_variance`}),{filters:c,batch_norm_scale:d,batch_norm_offset:p,batch_norm_mean:f,batch_norm_variance:h}}function a(l,u,c,d,p){let f=xl(e(l*u*c*c),[c,c,l,u]),h=Nt(e(u));return t.push({paramPath:`${d}/filters`},{paramPath:`${d}/${p?"batch_norm_offset":"bias"}`}),{filters:f,bias:h}}function n(l,u,c,d){let{filters:p,bias:f}=a(l,u,c,d,!0);return{filters:p,batch_norm_offset:f}}function i(l,u,c){let d=r(l,`${c}/depthwise_conv`),p=n(l,u,1,`${c}/pointwise_conv`);return{depthwise_conv:d,pointwise_conv:p}}function s(){let l=n(3,32,3,"mobilenetv1/conv_0"),u=i(32,64,"mobilenetv1/conv_1"),c=i(64,128,"mobilenetv1/conv_2"),d=i(128,128,"mobilenetv1/conv_3"),p=i(128,256,"mobilenetv1/conv_4"),f=i(256,256,"mobilenetv1/conv_5"),h=i(256,512,"mobilenetv1/conv_6"),m=i(512,512,"mobilenetv1/conv_7"),g=i(512,512,"mobilenetv1/conv_8"),v=i(512,512,"mobilenetv1/conv_9"),b=i(512,512,"mobilenetv1/conv_10"),y=i(512,512,"mobilenetv1/conv_11"),w=i(512,1024,"mobilenetv1/conv_12"),x=i(1024,1024,"mobilenetv1/conv_13");return{conv_0:l,conv_1:u,conv_2:c,conv_3:d,conv_4:p,conv_5:f,conv_6:h,conv_7:m,conv_8:g,conv_9:v,conv_10:b,conv_11:y,conv_12:w,conv_13:x}}function o(){let l=n(1024,256,1,"prediction_layer/conv_0"),u=n(256,512,3,"prediction_layer/conv_1"),c=n(512,128,1,"prediction_layer/conv_2"),d=n(128,256,3,"prediction_layer/conv_3"),p=n(256,128,1,"prediction_layer/conv_4"),f=n(128,256,3,"prediction_layer/conv_5"),h=n(256,64,1,"prediction_layer/conv_6"),m=n(64,128,3,"prediction_layer/conv_7"),g=a(512,12,1,"prediction_layer/box_predictor_0/box_encoding_predictor"),v=a(512,9,1,"prediction_layer/box_predictor_0/class_predictor"),b=a(1024,24,1,"prediction_layer/box_predictor_1/box_encoding_predictor"),y=a(1024,18,1,"prediction_layer/box_predictor_1/class_predictor"),w=a(512,24,1,"prediction_layer/box_predictor_2/box_encoding_predictor"),x=a(512,18,1,"prediction_layer/box_predictor_2/class_predictor"),k=a(256,24,1,"prediction_layer/box_predictor_3/box_encoding_predictor"),C=a(256,18,1,"prediction_layer/box_predictor_3/class_predictor"),E=a(256,24,1,"prediction_layer/box_predictor_4/box_encoding_predictor"),$=a(256,18,1,"prediction_layer/box_predictor_4/class_predictor"),N=a(128,24,1,"prediction_layer/box_predictor_5/box_encoding_predictor"),I=a(128,18,1,"prediction_layer/box_predictor_5/class_predictor");return{conv_0:l,conv_1:u,conv_2:c,conv_3:d,conv_4:p,conv_5:f,conv_6:h,conv_7:m,box_predictor_0:{box_encoding_predictor:g,class_predictor:v},box_predictor_1:{box_encoding_predictor:b,class_predictor:y},box_predictor_2:{box_encoding_predictor:w,class_predictor:x},box_predictor_3:{box_encoding_predictor:k,class_predictor:C},box_predictor_4:{box_encoding_predictor:E,class_predictor:$},box_predictor_5:{box_encoding_predictor:N,class_predictor:I}}}return{extractMobilenetV1Params:s,extractPredictionLayerParams:o}}function R2e(e){let t=[],{extractWeights:r,getRemainingWeights:a}=_o(e),{extractMobilenetV1Params:n,extractPredictionLayerParams:i}=M2e(r,t),s=n(),o=i(),l={extra_dim:gC(r(5118*4),[1,5118,4])};if(t.push({paramPath:"output_layer/extra_dim"}),a().length!==0)throw new Error(`weights remaing after extract: ${a().length}`);return{params:{mobilenetv1:s,prediction_layer:o,output_layer:l},paramMappings:t}}function O2e(e,t){let r=Lu(e,t);function a(u,c,d){let p=r(`${u}/Conv2d_${c}_pointwise/weights`,4,`${d}/filters`),f=r(`${u}/Conv2d_${c}_pointwise/convolution_bn_offset`,1,`${d}/batch_norm_offset`);return{filters:p,batch_norm_offset:f}}function n(u){let c=`mobilenetv1/conv_${u}`,d=`MobilenetV1/Conv2d_${u}_depthwise`,p=`${c}/depthwise_conv`,f=`${c}/pointwise_conv`,h=r(`${d}/depthwise_weights`,4,`${p}/filters`),m=r(`${d}/BatchNorm/gamma`,1,`${p}/batch_norm_scale`),g=r(`${d}/BatchNorm/beta`,1,`${p}/batch_norm_offset`),v=r(`${d}/BatchNorm/moving_mean`,1,`${p}/batch_norm_mean`),b=r(`${d}/BatchNorm/moving_variance`,1,`${p}/batch_norm_variance`);return{depthwise_conv:{filters:h,batch_norm_scale:m,batch_norm_offset:g,batch_norm_mean:v,batch_norm_variance:b},pointwise_conv:a("MobilenetV1",u,f)}}function i(){return{conv_0:a("MobilenetV1",0,"mobilenetv1/conv_0"),conv_1:n(1),conv_2:n(2),conv_3:n(3),conv_4:n(4),conv_5:n(5),conv_6:n(6),conv_7:n(7),conv_8:n(8),conv_9:n(9),conv_10:n(10),conv_11:n(11),conv_12:n(12),conv_13:n(13)}}function s(u,c){let d=r(`${u}/weights`,4,`${c}/filters`),p=r(`${u}/biases`,1,`${c}/bias`);return{filters:d,bias:p}}function o(u){let c=s(`Prediction/BoxPredictor_${u}/BoxEncodingPredictor`,`prediction_layer/box_predictor_${u}/box_encoding_predictor`),d=s(`Prediction/BoxPredictor_${u}/ClassPredictor`,`prediction_layer/box_predictor_${u}/class_predictor`);return{box_encoding_predictor:c,class_predictor:d}}function l(){return{conv_0:a("Prediction",0,"prediction_layer/conv_0"),conv_1:a("Prediction",1,"prediction_layer/conv_1"),conv_2:a("Prediction",2,"prediction_layer/conv_2"),conv_3:a("Prediction",3,"prediction_layer/conv_3"),conv_4:a("Prediction",4,"prediction_layer/conv_4"),conv_5:a("Prediction",5,"prediction_layer/conv_5"),conv_6:a("Prediction",6,"prediction_layer/conv_6"),conv_7:a("Prediction",7,"prediction_layer/conv_7"),box_predictor_0:o(0),box_predictor_1:o(1),box_predictor_2:o(2),box_predictor_3:o(3),box_predictor_4:o(4),box_predictor_5:o(5)}}return{extractMobilenetV1Params:i,extractPredictionLayerParams:l}}function P2e(e){let t=[],{extractMobilenetV1Params:r,extractPredictionLayerParams:a}=O2e(e,t),n=e["Output/extra_dim"];if(t.push({originalPath:"Output/extra_dim",paramPath:"output_layer/extra_dim"}),!Rm(n))throw new Error(`expected weightMap['Output/extra_dim'] to be a Tensor3D, instead have ${n}`);let i={mobilenetv1:r(),prediction_layer:a(),output_layer:{extra_dim:n}};return Ao(e,t),{params:i,paramMappings:t}}function mi(e,t,r){return te(()=>{let a=wn(e,t.filters,r,"same");return a=xe(a,t.batch_norm_offset),sn(a,0,6)})}var D2e=.0010000000474974513;function F2e(e,t,r){return te(()=>{let a=Au(e,t.filters,r,"same");return a=ao(a,t.batch_norm_mean,t.batch_norm_variance,t.batch_norm_offset,t.batch_norm_scale,D2e),sn(a,0,6)})}function L2e(e){return[2,4,6,12].some(t=>t===e)?[2,2]:[1,1]}function z2e(e,t){return te(()=>{let r,a=mi(e,t.conv_0,[2,2]);if([t.conv_1,t.conv_2,t.conv_3,t.conv_4,t.conv_5,t.conv_6,t.conv_7,t.conv_8,t.conv_9,t.conv_10,t.conv_11,t.conv_12,t.conv_13].forEach((n,i)=>{let s=i+1,o=L2e(s);a=F2e(a,n.depthwise_conv,o),a=mi(a,n.pointwise_conv,[1,1]),s===11&&(r=a)}),r===null)throw new Error("mobileNetV1 - output of conv layer 11 is null");return{out:a,conv11:r}})}function B2e(e,t,r){let a=e.arraySync(),n=Math.min(a[t][0],a[t][2]),i=Math.min(a[t][1],a[t][3]),s=Math.max(a[t][0],a[t][2]),o=Math.max(a[t][1],a[t][3]),l=Math.min(a[r][0],a[r][2]),u=Math.min(a[r][1],a[r][3]),c=Math.max(a[r][0],a[r][2]),d=Math.max(a[r][1],a[r][3]),p=(s-n)*(o-i),f=(c-l)*(d-u);if(p<=0||f<=0)return 0;let h=Math.max(n,l),m=Math.max(i,u),g=Math.min(s,c),v=Math.min(o,d),b=Math.max(g-h,0)*Math.max(v-m,0);return b/(p+f-b)}function V2e(e,t,r,a,n){let i=e.shape[0],s=Math.min(r,i),o=t.map((c,d)=>({score:c,boxIndex:d})).filter(c=>c.score>n).sort((c,d)=>d.score-c.score),l=c=>c<=a?1:0,u=[];return o.forEach(c=>{if(u.length>=s)return;let d=c.score;for(let p=u.length-1;p>=0;--p){let f=B2e(e,c.boxIndex,u[p]);if(f!==0&&(c.score*=l(f),c.score<=n))break}d===c.score&&u.push(c.boxIndex)}),u}function W2e(e){let t=hr(ct(e,[1,0])),r=[Fe(t[2],t[0]),Fe(t[3],t[1])],a=[xe(t[0],Ve(r[0],2)),xe(t[1],Ve(r[1],2))];return{sizes:r,centers:a}}function H2e(e,t){let{sizes:r,centers:a}=W2e(e),n=hr(ct(t,[1,0])),i=Ve(ee(xn(Ve(n[2],5)),r[0]),2),s=xe(ee(Ve(n[0],10),r[0]),a[0]),o=Ve(ee(xn(Ve(n[3],5)),r[1]),2),l=xe(ee(Ve(n[1],10),r[1]),a[1]);return ct(Vr([Fe(s,i),Fe(l,o),xe(s,i),xe(l,o)]),[1,0])}function U2e(e,t,r){return te(()=>{let a=e.shape[0],n=H2e(re(Jn(r.extra_dim,[a,1,1]),[-1,4]),re(e,[-1,4]));n=re(n,[a,n.shape[0]/a,4]);let i=Da(bt(t,[0,0,1],[-1,-1,-1])),s=bt(i,[0,0,0],[-1,-1,1]);s=re(s,[a,s.shape[1]]);let o=hr(n),l=hr(s);return{boxes:o,scores:l}})}function qu(e,t){return te(()=>{let r=e.shape[0],a=re(Bf(e,t.box_encoding_predictor),[r,-1,1,4]),n=re(Bf(e,t.class_predictor),[r,-1,3]);return{boxPredictionEncoding:a,classPrediction:n}})}function j2e(e,t,r){return te(()=>{let a=mi(e,r.conv_0,[1,1]),n=mi(a,r.conv_1,[2,2]),i=mi(n,r.conv_2,[1,1]),s=mi(i,r.conv_3,[2,2]),o=mi(s,r.conv_4,[1,1]),l=mi(o,r.conv_5,[2,2]),u=mi(l,r.conv_6,[1,1]),c=mi(u,r.conv_7,[2,2]),d=qu(t,r.box_predictor_0),p=qu(e,r.box_predictor_1),f=qu(n,r.box_predictor_2),h=qu(s,r.box_predictor_3),m=qu(l,r.box_predictor_4),g=qu(c,r.box_predictor_5),v=Ot([d.boxPredictionEncoding,p.boxPredictionEncoding,f.boxPredictionEncoding,h.boxPredictionEncoding,m.boxPredictionEncoding,g.boxPredictionEncoding],1),b=Ot([d.classPrediction,p.classPrediction,f.classPrediction,h.classPrediction,m.classPrediction,g.classPrediction],1);return{boxPredictions:v,classPredictions:b}})}var _0=class{constructor({minConfidence:e,maxResults:t}={}){if(this._name="SsdMobilenetv1Options",this._minConfidence=e||.5,this._maxResults=t||100,typeof this._minConfidence!="number"||this._minConfidence<=0||this._minConfidence>=1)throw new Error(`${this._name} - expected minConfidence to be a number between 0 and 1`);if(typeof this._maxResults!="number")throw new Error(`${this._name} - expected maxResults to be a number`)}get minConfidence(){return this._minConfidence}get maxResults(){return this._maxResults}},G2e=class extends No{constructor(){super("SsdMobilenetv1")}forwardInput(e){let{params:t}=this;if(!t)throw new Error("SsdMobilenetv1 - load model before inference");return te(()=>{let r=Te(e.toBatchTensor(512,!1),"float32"),a=Fe(Ve(r,127.5),1),n=z2e(a,t.mobilenetv1),{boxPredictions:i,classPredictions:s}=j2e(n.out,n.conv11,t.prediction_layer);return U2e(i,s,t.output_layer)})}async forward(e){return this.forwardInput(await kn(e))}async locateFaces(e,t={}){let{maxResults:r,minConfidence:a}=new _0(t),n=await kn(e),{boxes:i,scores:s}=this.forwardInput(n),o=i[0],l=s[0];for(let v=1;v<i.length;v++)i[v].dispose(),s[v].dispose();let u=Array.from(l.dataSync()),c=V2e(o,u,r,.5,a),d=n.getReshapedInputDimensions(0),p=n.inputSize,f=p/d.width,h=p/d.height,m=o.arraySync(),g=c.map(v=>{let[b,y]=[Math.max(0,m[v][0]),Math.min(1,m[v][2])].map(k=>k*h),[w,x]=[Math.max(0,m[v][1]),Math.min(1,m[v][3])].map(k=>k*f);return new Wa(u[v],new P4(w,b,x-w,y-b),{height:n.getInputHeight(0),width:n.getInputWidth(0)})});return o.dispose(),l.dispose(),g}getDefaultModelName(){return"ssd_mobilenetv1_model"}extractParamsFromWeightMap(e){return P2e(e)}extractParams(e){return R2e(e)}},q2e=.4,X2e=[new $t(.738768,.874946),new $t(2.42204,2.65704),new $t(4.30971,7.04493),new $t(10.246,4.59428),new $t(12.6868,11.8741)],Y2e=[new $t(1.603231,2.094468),new $t(6.041143,7.080126),new $t(2.882459,3.518061),new $t(4.266906,5.178857),new $t(9.041765,10.66308)],K2e=[117.001,114.697,97.404],Z2e="tiny_yolov2_model",Q2e="tiny_yolov2_separable_conv_model",Dg=e=>typeof e=="number";function J2e(e){if(!e)throw new Error(`invalid config: ${e}`);if(typeof e.withSeparableConvs!="boolean")throw new Error(`config.withSeparableConvs has to be a boolean, have: ${e.withSeparableConvs}`);if(!Dg(e.iouThreshold)||e.iouThreshold<0||e.iouThreshold>1)throw new Error(`config.iouThreshold has to be a number between [0, 1], have: ${e.iouThreshold}`);if(!Array.isArray(e.classes)||!e.classes.length||!e.classes.every(t=>typeof t=="string"))throw new Error(`config.classes has to be an array class names: string[], have: ${JSON.stringify(e.classes)}`);if(!Array.isArray(e.anchors)||!e.anchors.length||!e.anchors.map(t=>t||{}).every(t=>Dg(t.x)&&Dg(t.y)))throw new Error(`config.anchors has to be an array of { x: number, y: number }, have: ${JSON.stringify(e.anchors)}`);if(e.meanRgb&&(!Array.isArray(e.meanRgb)||e.meanRgb.length!==3||!e.meanRgb.every(Dg)))throw new Error(`config.meanRgb has to be an array of shape [number, number, number], have: ${JSON.stringify(e.meanRgb)}`)}function RI(e){return te(()=>{let t=ee(e,et(.10000000149011612));return xe(At(Fe(e,t)),t)})}function ys(e,t){return te(()=>{let r=ui(e,[[0,0],[1,1],[1,1],[0,0]]);return r=wn(r,t.conv.filters,[1,1],"valid"),r=Fe(r,t.bn.sub),r=ee(r,t.bn.truediv),r=xe(r,t.conv.bias),RI(r)})}function ws(e,t){return te(()=>{let r=ui(e,[[0,0],[1,1],[1,1],[0,0]]);return r=cm(r,t.depthwise_filter,t.pointwise_filter,[1,1],"valid"),r=xe(r,t.bias),RI(r)})}function eNe(e,t){let r=TI(e,t);function a(s,o){let l=Nt(e(s)),u=Nt(e(s));return t.push({paramPath:`${o}/sub`},{paramPath:`${o}/truediv`}),{sub:l,truediv:u}}function n(s,o,l){let u=r(s,o,3,`${l}/conv`),c=a(o,`${l}/bn`);return{conv:u,bn:c}}let i=NI(e,t);return{extractConvParams:r,extractConvWithBatchNormParams:n,extractSeparableConvParams:i}}function tNe(e,t,r,a){let{extractWeights:n,getRemainingWeights:i}=_o(e),s=[],{extractConvParams:o,extractConvWithBatchNormParams:l,extractSeparableConvParams:u}=eNe(n,s),c;if(t.withSeparableConvs){let[d,p,f,h,m,g,v,b,y]=a,w=t.isFirstLayerConv2d?o(d,p,3,"conv0"):u(d,p,"conv0"),x=u(p,f,"conv1"),k=u(f,h,"conv2"),C=u(h,m,"conv3"),E=u(m,g,"conv4"),$=u(g,v,"conv5"),N=b?u(v,b,"conv6"):void 0,I=y?u(b,y,"conv7"):void 0,S=o(y||b||v,5*r,1,"conv8");c={conv0:w,conv1:x,conv2:k,conv3:C,conv4:E,conv5:$,conv6:N,conv7:I,conv8:S}}else{let[d,p,f,h,m,g,v,b,y]=a,w=l(d,p,"conv0"),x=l(p,f,"conv1"),k=l(f,h,"conv2"),C=l(h,m,"conv3"),E=l(m,g,"conv4"),$=l(g,v,"conv5"),N=l(v,b,"conv6"),I=l(b,y,"conv7"),S=o(y,5*r,1,"conv8");c={conv0:w,conv1:x,conv2:k,conv3:C,conv4:E,conv5:$,conv6:N,conv7:I,conv8:S}}if(i().length!==0)throw new Error(`weights remaing after extract: ${i().length}`);return{params:c,paramMappings:s}}function rNe(e,t){let r=Lu(e,t);function a(o){let l=r(`${o}/sub`,1),u=r(`${o}/truediv`,1);return{sub:l,truediv:u}}function n(o){let l=r(`${o}/filters`,4),u=r(`${o}/bias`,1);return{filters:l,bias:u}}function i(o){let l=n(`${o}/conv`),u=a(`${o}/bn`);return{conv:l,bn:u}}let s=AI(r);return{extractConvParams:n,extractConvWithBatchNormParams:i,extractSeparableConvParams:s}}function nNe(e,t){let r=[],{extractConvParams:a,extractConvWithBatchNormParams:n,extractSeparableConvParams:i}=rNe(e,r),s;if(t.withSeparableConvs){let o=t.filterSizes&&t.filterSizes.length||9;s={conv0:t.isFirstLayerConv2d?a("conv0"):i("conv0"),conv1:i("conv1"),conv2:i("conv2"),conv3:i("conv3"),conv4:i("conv4"),conv5:i("conv5"),conv6:o>7?i("conv6"):void 0,conv7:o>8?i("conv7"):void 0,conv8:a("conv8")}}else s={conv0:n("conv0"),conv1:n("conv1"),conv2:n("conv2"),conv3:n("conv3"),conv4:n("conv4"),conv5:n("conv5"),conv6:n("conv6"),conv7:n("conv7"),conv8:a("conv8")};return Ao(e,r),{params:s,paramMappings:r}}var OI=class{constructor({inputSize:e,scoreThreshold:t}={}){if(this._name="TinyYolov2Options",this._inputSize=e||416,this._scoreThreshold=t||.5,typeof this._inputSize!="number"||this._inputSize%32!==0)throw new Error(`${this._name} - expected inputSize to be a number divisible by 32`);if(typeof this._scoreThreshold!="number"||this._scoreThreshold<=0||this._scoreThreshold>=1)throw new Error(`${this._name} - expected scoreThreshold to be a number between 0 and 1`)}get inputSize(){return this._inputSize}get scoreThreshold(){return this._scoreThreshold}},mV=class extends No{constructor(e){super("TinyYolov2"),J2e(e),this._config=e}get config(){return this._config}get withClassScores(){return this.config.withClassScores||this.config.classes.length>1}get boxEncodingSize(){return 5+(this.withClassScores?this.config.classes.length:0)}runTinyYolov2(e,t){let r=ys(e,t.conv0);return r=Dr(r,[2,2],[2,2],"same"),r=ys(r,t.conv1),r=Dr(r,[2,2],[2,2],"same"),r=ys(r,t.conv2),r=Dr(r,[2,2],[2,2],"same"),r=ys(r,t.conv3),r=Dr(r,[2,2],[2,2],"same"),r=ys(r,t.conv4),r=Dr(r,[2,2],[2,2],"same"),r=ys(r,t.conv5),r=Dr(r,[2,2],[1,1],"same"),r=ys(r,t.conv6),r=ys(r,t.conv7),Bf(r,t.conv8,"valid",!1)}runMobilenet(e,t){let r=this.config.isFirstLayerConv2d?RI(Bf(e,t.conv0,"valid",!1)):ws(e,t.conv0);return r=Dr(r,[2,2],[2,2],"same"),r=ws(r,t.conv1),r=Dr(r,[2,2],[2,2],"same"),r=ws(r,t.conv2),r=Dr(r,[2,2],[2,2],"same"),r=ws(r,t.conv3),r=Dr(r,[2,2],[2,2],"same"),r=ws(r,t.conv4),r=Dr(r,[2,2],[2,2],"same"),r=ws(r,t.conv5),r=Dr(r,[2,2],[1,1],"same"),r=t.conv6?ws(r,t.conv6):r,r=t.conv7?ws(r,t.conv7):r,Bf(r,t.conv8,"valid",!1)}forwardInput(e,t){let{params:r}=this;if(!r)throw new Error("TinyYolov2 - load model before inference");return te(()=>{let a=Te(e.toBatchTensor(t,!1),"float32");return a=this.config.meanRgb?Om(a,this.config.meanRgb):a,a=a.div(255),this.config.withSeparableConvs?this.runMobilenet(a,r):this.runTinyYolov2(a,r)})}async forward(e,t){return this.forwardInput(await kn(e),t)}async detect(e,t={}){let{inputSize:r,scoreThreshold:a}=new OI(t),n=await kn(e),i=await this.forwardInput(n,r),s=te(()=>hr(i)[0].expandDims()),o={width:n.getInputWidth(0),height:n.getInputHeight(0)},l=await this.extractBoxes(s,n.getReshapedInputDimensions(0),a);i.dispose(),s.dispose();let u=l.map(f=>f.box),c=l.map(f=>f.score),d=l.map(f=>f.classScore),p=l.map(f=>this.config.classes[f.label]);return VTe(u.map(f=>f.rescale(r)),c,this.config.iouThreshold,!0).map(f=>new xI(c[f],d[f],p[f],u[f],o))}getDefaultModelName(){return""}extractParamsFromWeightMap(e){return nNe(e,this.config)}extractParams(e){let t=this.config.filterSizes||mV.DEFAULT_FILTER_SIZES,r=t?t.length:void 0;if(r!==7&&r!==8&&r!==9)throw new Error(`TinyYolov2 - expected 7 | 8 | 9 convolutional filters, but found ${r} filterSizes in config`);return tNe(e,this.config,this.boxEncodingSize,t)}async extractBoxes(e,t,r){let{width:a,height:n}=t,i=Math.max(a,n),s=i/a,o=i/n,l=e.shape[1],u=this.config.anchors.length,[c,d,p]=te(()=>{let g=e.reshape([l,l,u,this.boxEncodingSize]),v=g.slice([0,0,0,0],[l,l,u,4]),b=g.slice([0,0,0,4],[l,l,u,1]),y=this.withClassScores?So(g.slice([0,0,0,5],[l,l,u,this.config.classes.length]),3):et(0);return[v,b,y]}),f=[],h=await d.array(),m=await c.array();for(let g=0;g<l;g++)for(let v=0;v<l;v++)for(let b=0;b<u;b++){let y=Zw(h[g][v][b][0]);if(!r||y>r){let w=(v+Zw(m[g][v][b][0]))/l*s,x=(g+Zw(m[g][v][b][1]))/l*o,k=Math.exp(m[g][v][b][2])*this.config.anchors[b].x/l*s,C=Math.exp(m[g][v][b][3])*this.config.anchors[b].y/l*o,E=w-k/2,$=x-C/2,N={row:g,col:v,anchor:b},{classScore:I,label:S}=this.withClassScores?await this.extractPredictedClass(p,N):{classScore:1,label:0};f.push(qn({box:new O4(E,$,E+k,$+C),score:y,classScore:y*I,label:S},N))}}return c.dispose(),d.dispose(),p.dispose(),f}async extractPredictedClass(e,t){let{row:r,col:a,anchor:n}=t,i=await e.array();return Array(this.config.classes.length).fill(0).map((s,o)=>i[r][a][n][o]).map((s,o)=>({classScore:s,label:o})).reduce((s,o)=>s.classScore>o.classScore?s:o)}},PI=mV;PI.DEFAULT_FILTER_SIZES=[3,16,32,64,128,256,512,1024,1024];var aNe=class extends PI{constructor(e=!0){let t=qn({withSeparableConvs:e,iouThreshold:q2e,classes:["face"]},e?{anchors:Y2e,meanRgb:K2e}:{anchors:X2e,withClassScores:!0});super(t)}get withSeparableConvs(){return this.config.withSeparableConvs}get anchors(){return this.config.anchors}async locateFaces(e,t){return(await this.detect(e,t)).map(r=>new Wa(r.score,r.relativeBox,{width:r.imageWidth,height:r.imageHeight}))}getDefaultModelName(){return this.withSeparableConvs?Q2e:Z2e}extractParamsFromWeightMap(e){return super.extractParamsFromWeightMap(e)}},iNe=class extends OI{constructor(){super(...arguments),this._name="TinyFaceDetectorOptions"}},Pm=class{async then(e){return e(await this.run())}async run(){throw new Error("ComposableTask - run is not implemented")}};async function M0(e,t,r,a,n=({alignedRect:i})=>i){let i=e.map(l=>aV(l)?n(l):l.detection),s=a||(t instanceof ht?await II(t,i):await $I(t,i)),o=await r(s);return s.forEach(l=>l instanceof ht&&l.dispose()),o}async function DI(e,t,r,a,n){return M0([e],t,async i=>r(i[0]),a,n)}var sNe=.4,oNe=[new $t(1.603231,2.094468),new $t(6.041143,7.080126),new $t(2.882459,3.518061),new $t(4.266906,5.178857),new $t(9.041765,10.66308)],lNe=[117.001,114.697,97.404],uNe=class extends PI{constructor(){let e={withSeparableConvs:!0,iouThreshold:sNe,classes:["face"],anchors:oNe,meanRgb:lNe,isFirstLayerConv2d:!0,filterSizes:[3,16,32,64,128,256,512]};super(e)}get anchors(){return this.config.anchors}async locateFaces(e,t){return(await this.detect(e,t)).map(r=>new Wa(r.score,r.relativeBox,{width:r.imageWidth,height:r.imageHeight}))}getDefaultModelName(){return"tiny_face_detector_model"}extractParamsFromWeightMap(e){return super.extractParamsFromWeightMap(e)}},ia={ssdMobilenetv1:new G2e,tinyFaceDetector:new uNe,tinyYolov2:new aNe,faceLandmark68Net:new w2e,faceLandmark68TinyNet:new C2e,faceRecognitionNet:new _2e,faceExpressionNet:new i2e,ageGenderNet:new y2e},gV=class extends Pm{constructor(e,t,r){super(),this.parentTask=e,this.input=t,this.extractedFaces=r}},FI=class extends gV{async run(){let e=await this.parentTask,t=await M0(e,this.input,async r=>Promise.all(r.map(a=>ia.faceExpressionNet.predictExpressions(a))),this.extractedFaces);return e.map((r,a)=>nV(r,t[a]))}withAgeAndGender(){return new VI(this,this.input)}},LI=class extends gV{async run(){let e=await this.parentTask;if(!e)return;let t=await DI(e,this.input,r=>ia.faceExpressionNet.predictExpressions(r),this.extractedFaces);return nV(e,t)}withAgeAndGender(){return new WI(this,this.input)}},zI=class extends FI{withAgeAndGender(){return new HI(this,this.input)}withFaceDescriptors(){return new jI(this,this.input)}},BI=class extends LI{withAgeAndGender(){return new UI(this,this.input)}withFaceDescriptor(){return new GI(this,this.input)}},vV=class extends Pm{constructor(e,t,r){super(),this.parentTask=e,this.input=t,this.extractedFaces=r}},VI=class extends vV{async run(){let e=await this.parentTask,t=await M0(e,this.input,async r=>Promise.all(r.map(a=>ia.ageGenderNet.predictAgeAndGender(a))),this.extractedFaces);return e.map((r,a)=>{let{age:n,gender:i,genderProbability:s}=t[a];return fV(hV(r,i,s),n)})}withFaceExpressions(){return new FI(this,this.input)}},WI=class extends vV{async run(){let e=await this.parentTask;if(!e)return;let{age:t,gender:r,genderProbability:a}=await DI(e,this.input,n=>ia.ageGenderNet.predictAgeAndGender(n),this.extractedFaces);return fV(hV(e,r,a),t)}withFaceExpressions(){return new LI(this,this.input)}},HI=class extends VI{withFaceExpressions(){return new zI(this,this.input)}withFaceDescriptors(){return new jI(this,this.input)}},UI=class extends WI{withFaceExpressions(){return new BI(this,this.input)}withFaceDescriptor(){return new GI(this,this.input)}},bV=class extends Pm{constructor(e,t){super(),this.parentTask=e,this.input=t}},jI=class extends bV{async run(){let e=await this.parentTask;return(await M0(e,this.input,t=>Promise.all(t.map(r=>ia.faceRecognitionNet.computeFaceDescriptor(r))),null,t=>t.landmarks.align(null,{useDlibAlignment:!0}))).map((t,r)=>pV(e[r],t))}withFaceExpressions(){return new zI(this,this.input)}withAgeAndGender(){return new HI(this,this.input)}},GI=class extends bV{async run(){let e=await this.parentTask;if(!e)return;let t=await DI(e,this.input,r=>ia.faceRecognitionNet.computeFaceDescriptor(r),null,r=>r.landmarks.align(null,{useDlibAlignment:!0}));return pV(e,t)}withFaceExpressions(){return new BI(this,this.input)}withAgeAndGender(){return new UI(this,this.input)}},yV=class extends Pm{constructor(e,t,r){super(),this.parentTask=e,this.input=t,this.useTinyLandmarkNet=r}get landmarkNet(){return this.useTinyLandmarkNet?ia.faceLandmark68TinyNet:ia.faceLandmark68Net}},cNe=class extends yV{async run(){let e=await this.parentTask,t=e.map(n=>n.detection),r=this.input instanceof ht?await II(this.input,t):await $I(this.input,t),a=await Promise.all(r.map(n=>this.landmarkNet.detectLandmarks(n)));return r.forEach(n=>n instanceof ht&&n.dispose()),e.filter((n,i)=>a[i]).map((n,i)=>iV(n,a[i]))}withFaceExpressions(){return new zI(this,this.input)}withAgeAndGender(){return new HI(this,this.input)}withFaceDescriptors(){return new jI(this,this.input)}},dNe=class extends yV{async run(){let e=await this.parentTask;if(!e)return;let{detection:t}=e,r=this.input instanceof ht?await II(this.input,[t]):await $I(this.input,[t]),a=await this.landmarkNet.detectLandmarks(r[0]);return r.forEach(n=>n instanceof ht&&n.dispose()),iV(e,a)}withFaceExpressions(){return new BI(this,this.input)}withAgeAndGender(){return new UI(this,this.input)}withFaceDescriptor(){return new GI(this,this.input)}},wV=class extends Pm{constructor(e,t=new _0){super(),this.input=e,this.options=t}},pNe=class extends wV{async run(){let{input:e,options:t}=this,r;if(t instanceof iNe)r=ia.tinyFaceDetector.locateFaces(e,t);else if(t instanceof _0)r=ia.ssdMobilenetv1.locateFaces(e,t);else if(t instanceof OI)r=ia.tinyYolov2.locateFaces(e,t);else throw new Error("detectFaces - expected options to be instance of TinyFaceDetectorOptions | SsdMobilenetv1Options | TinyYolov2Options");return r}runAndExtendWithFaceDetections(){return new Promise((e,t)=>{this.run().then(r=>e(r.map(a=>F4({},a)))).catch(r=>t(r))})}withFaceLandmarks(e=!1){return new cNe(this.runAndExtendWithFaceDetections(),this.input,e)}withFaceExpressions(){return new FI(this.runAndExtendWithFaceDetections(),this.input)}withAgeAndGender(){return new VI(this.runAndExtendWithFaceDetections(),this.input)}},fNe=class extends wV{async run(){let e=await new pNe(this.input,this.options),t=e[0];return e.forEach(r=>{r.score>t.score&&(t=r)}),t}runAndExtendWithFaceDetection(){return new Promise(async e=>{let t=await this.run();e(t?F4({},t):void 0)})}withFaceLandmarks(e=!1){return new dNe(this.runAndExtendWithFaceDetection(),this.input,e)}withFaceExpressions(){return new LI(this.runAndExtendWithFaceDetection(),this.input)}withAgeAndGender(){return new WI(this.runAndExtendWithFaceDetection(),this.input)}};function hNe(e,t=new _0){return new fNe(e,t)}/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*//**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 *//**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 *//**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 *//**
 * @license
 * Copyright 2019 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 *//**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 *//**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 *//**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 *//**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 *//**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 *//**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 *//**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 *//**
 * @license
 * Copyright 2022 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 *//**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 *//**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 *//**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*//** @license See the LICENSE file. */const mNe=()=>{const e=_e.exports.useRef(null),t=_e.exports.useRef(null),[r,a]=_e.exports.useState("Loading..."),n="models",i=async()=>{await ia.ssdMobilenetv1.loadFromUri(n),await ia.faceRecognitionNet.loadFromUri(n),await ia.faceExpressionNet.loadFromUri(n),console.log("model loaded")};_e.exports.useEffect(async()=>{await i(),s()},[]);const s=async()=>{u()?(await h(),console.log("camera started"),c(t.current)):(await p(),console.log("camera started"),c(e.current))},o=()=>{const m=navigator.userAgent||navigator.vendor||window.opera;return!!/android/i.test(m)},l=()=>{const m=navigator.userAgent||navigator.vendor||window.opera;return!!/iPad|iPhone|iPod/i.test(m)},u=()=>!!(window.cordova&&(o()||l())),c=m=>{setInterval(()=>{!m||hNe(m).withFaceExpressions().then(g=>{d(g)})},(+localStorage.getItem("predictionInterval")||2)*1e3)},d=m=>{try{const g=Object.entries(m.expressions).filter(v=>(v[0]==="angry"&&localStorage.getItem("vibrations")==="true"&&(console.log("brrr"),navigator.vibrate(1e3)),v[0]=(v[0]+" ").toUpperCase(),v[1]=Math.trunc(v[1]*100),v[1]>80));g.length>0&&a(g.toString().replace(/,/g,"")+"%")}catch{a("No face found")}},p=()=>new Promise((m,g)=>{navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:"user",width:224,height:224}}).then(v=>(e.current.srcObject=v,m(v))).catch(v=>(console.log("Something went wrong!",v),g(v)))}),f=m=>{const g="file://";let v="";o()?v=g+m.output.images.fullsize.file:v=m.output.images.fullsize.file,window.resolveLocalFileSystemURL(v,b=>{b.file(y=>{const w=new FileReader;w.onloadend=()=>{const x=new Blob([new Uint8Array(w.result)],{type:"image/png"});try{t.current.src=window.URL.createObjectURL(x)}catch(k){console.warn("Video element has not loaded yet: "+k)}},w.readAsArrayBuffer(y)},y=>{console.log("read",y)})},b=>{console.log(b)})},h=()=>new Promise((m,g)=>{const v={canvas:{width:224,height:224},capture:{width:224,height:224},use:"file",fps:+localStorage.getItem("FPS")||15,hasThumbnail:!1,cameraFacing:localStorage.getItem("frontCamera")==="false"?"back":"front"};window.plugin.CanvasCamera.start(v,b=>(console.log("Something went wrong!",b),g(b)),b=>m(f(b)))});return Ce.createElement(OO,{name:"home",className:"container-component"},Ce.createElement("h2",{className:"title"},"Emotions Recognition"),Ce.createElement("p",{className:"sub-title"},"How do you feel today?"),u()?Ce.createElement("img",{className:"capturing-img",ref:t,width:"224",height:"224",src:"../static/placeholder.png"}):Ce.createElement("video",{className:"capturing-video",ref:e,autoPlay:!0}),Ce.createElement("h2",{className:"recognized-title"},"Recognised emotion:"),Ce.createElement("p",{className:"recognized-emotion"},r),Ce.createElement(SO,{outline:!0,color:"black",href:"/settings",className:"button",onClick:()=>{u()?t.current.src=null:e.current.srcObject=null}},"Settings"),Ce.createElement("p",{className:"footer"},"Created by ",Ce.createElement("br",null)," Asial Corporation"))},gNe=()=>{const e=_e.exports.useRef(),t=_e.exports.useRef(),r=_e.exports.useRef(),a=_e.exports.useRef(),n=()=>{localStorage.setItem("vibrations",t.current.f7Toggle().checked),localStorage.setItem("FPS",e.current.getValue()),localStorage.setItem("predictionInterval",r.current.el.f7Range.value),localStorage.setItem("frontCamera",a.current.selected)};return Ce.createElement(Ce.Fragment,null,Ce.createElement(OO,{name:"settings",className:"container-component"},Ce.createElement("h2",{className:"title"},"Settings"),Ce.createElement(xg,null,"FPS of camera"),Ce.createElement(Dq,{type:"text",readOnly:!0,min:10,max:50,step:5,color:"black",ref:e,value:+localStorage.getItem("FPS")||15}),Ce.createElement(xg,null,"Prediction Interval"),Ce.createElement(Tq,{strong:!0},Ce.createElement(Mq,{min:1,max:10,label:!0,step:1,scale:!0,scaleSteps:9,scaleSubSteps:1,ref:r,value:+localStorage.getItem("predictionInterval")||2})),Ce.createElement(xg,null,"Camera"),Ce.createElement("div",{className:"block-header"},"Choose which camera will predict emotions"),Ce.createElement(RN,null,Ce.createElement(MN,{title:"Camera",smartSelect:!0,smartSelectParams:{openIn:"sheet"}},Ce.createElement("select",{name:"Camera",defaultValue:localStorage.getItem("frontCamera")==="true"?"front":"back"},Ce.createElement("option",{value:"front",ref:a},"Front"),Ce.createElement("option",{value:"back"},"Back")))),Ce.createElement(xg,null,"Vibrations"),Ce.createElement("div",{className:"block-header"},"Activate to vibrate while you are happy"),Ce.createElement(RN,null,Ce.createElement(MN,{strong:!0},Ce.createElement("span",null,"Vibrations"),Ce.createElement(_q,{defaultChecked:localStorage.getItem("vibrations")==="true",ref:t}))),Ce.createElement(SO,{outline:!0,color:"black",href:"/",className:"button",onClick:n},"Apply")))};var vNe=[{path:"/",component:mNe},{path:"/settings",component:gNe}];const bNe=Zx({state:{products:[{id:"1",title:"Apple iPhone 8",description:"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Nisi tempora similique reiciendis, error nesciunt vero, blanditiis pariatur dolor, minima sed sapiente rerum, dolorem corrupti hic modi praesentium unde saepe perspiciatis."},{id:"2",title:"Apple iPhone 8 Plus",description:"Velit odit autem modi saepe ratione totam minus, aperiam, labore quia provident temporibus quasi est ut aliquid blanditiis beatae suscipit odio vel! Nostrum porro sunt sint eveniet maiores, dolorem itaque!"},{id:"3",title:"Apple iPhone X",description:"Expedita sequi perferendis quod illum pariatur aliquam, alias laboriosam! Vero blanditiis placeat, mollitia necessitatibus reprehenderit. Labore dolores amet quos, accusamus earum asperiores officiis assumenda optio architecto quia neque, quae eum."}]},getters:{products({state:e}){return e.products}},actions:{addProduct({state:e},t){e.products=[...e.products,t]}}}),yNe=()=>{const e=Ct(),t={name:"My App",theme:"auto",id:"io.framework7.myapp",store:bNe,routes:vNe,input:{scrollIntoViewOnFocus:e.cordova&&!e.electron,scrollIntoViewCentered:e.cordova&&!e.electron},statusbar:{iosOverlaysWebView:!0,androidOverlaysWebView:!1}};return yn(()=>{ye.device.cordova&&ks.init(ye)}),Ce.createElement(Iq,qn({},t),Ce.createElement(Bq,{main:!0,className:"safe-areas",url:"/"}))};to.use(Cq);localStorage.setItem("vibrations","false");uU.render(Ce.createElement(yNe),document.getElementById("app"));
